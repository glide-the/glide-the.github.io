(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=i(a);fetch(a.href,u)}})();function FE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $c={exports:{}},Hs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function $E(){if(Ag)return Hs;Ag=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,a,u){var d=null;if(u!==void 0&&(d=""+u),a.key!==void 0&&(d=""+a.key),"key"in a){u={};for(var p in a)p!=="key"&&(u[p]=a[p])}else u=a;return a=u.ref,{$$typeof:n,type:s,key:d,ref:a!==void 0?a:null,props:u}}return Hs.Fragment=e,Hs.jsx=i,Hs.jsxs=i,Hs}var Cg;function JE(){return Cg||(Cg=1,$c.exports=$E()),$c.exports}var N=JE(),Jc={exports:{}},ks={},Yc={exports:{}},Kc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function YE(){return bg||(bg=1,(function(n){function e(V,Z){var Q=V.length;V.push(Z);e:for(;0<Q;){var Te=Q-1>>>1,Oe=V[Te];if(0<a(Oe,Z))V[Te]=Z,V[Q]=Oe,Q=Te;else break e}}function i(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var Z=V[0],Q=V.pop();if(Q!==Z){V[0]=Q;e:for(var Te=0,Oe=V.length,R=Oe>>>1;Te<R;){var F=2*(Te+1)-1,j=V[F],te=F+1,de=V[te];if(0>a(j,Q))te<Oe&&0>a(de,j)?(V[Te]=de,V[te]=Q,Te=te):(V[Te]=j,V[F]=Q,Te=F);else if(te<Oe&&0>a(de,Q))V[Te]=de,V[te]=Q,Te=te;else break e}}return Z}function a(V,Z){var Q=V.sortIndex-Z.sortIndex;return Q!==0?Q:V.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();n.unstable_now=function(){return d.now()-p}}var y=[],m=[],v=1,_=null,T=3,A=!1,C=!1,I=!1,w=!1,q=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function G(V){for(var Z=i(m);Z!==null;){if(Z.callback===null)s(m);else if(Z.startTime<=V)s(m),Z.sortIndex=Z.expirationTime,e(y,Z);else break;Z=i(m)}}function P(V){if(I=!1,G(V),!C)if(i(y)!==null)C=!0,W||(W=!0,Se());else{var Z=i(m);Z!==null&&Je(P,Z.startTime-V)}}var W=!1,J=-1,ce=5,X=-1;function oe(){return w?!0:!(n.unstable_now()-X<ce)}function se(){if(w=!1,W){var V=n.unstable_now();X=V;var Z=!0;try{e:{C=!1,I&&(I=!1,B(J),J=-1),A=!0;var Q=T;try{t:{for(G(V),_=i(y);_!==null&&!(_.expirationTime>V&&oe());){var Te=_.callback;if(typeof Te=="function"){_.callback=null,T=_.priorityLevel;var Oe=Te(_.expirationTime<=V);if(V=n.unstable_now(),typeof Oe=="function"){_.callback=Oe,G(V),Z=!0;break t}_===i(y)&&s(y),G(V)}else s(y);_=i(y)}if(_!==null)Z=!0;else{var R=i(m);R!==null&&Je(P,R.startTime-V),Z=!1}}break e}finally{_=null,T=Q,A=!1}Z=void 0}}finally{Z?Se():W=!1}}}var Se;if(typeof k=="function")Se=function(){k(se)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Ue=Le.port2;Le.port1.onmessage=se,Se=function(){Ue.postMessage(null)}}else Se=function(){q(se,0)};function Je(V,Z){J=q(function(){V(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(V){switch(T){case 1:case 2:case 3:var Z=3;break;default:Z=T}var Q=T;T=Z;try{return V()}finally{T=Q}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function(V,Z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=T;T=V;try{return Z()}finally{T=Q}},n.unstable_scheduleCallback=function(V,Z,Q){var Te=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?Te+Q:Te):Q=Te,V){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=Q+Oe,V={id:v++,callback:Z,priorityLevel:V,startTime:Q,expirationTime:Oe,sortIndex:-1},Q>Te?(V.sortIndex=Q,e(m,V),i(y)===null&&V===i(m)&&(I?(B(J),J=-1):I=!0,Je(P,Q-Te))):(V.sortIndex=Oe,e(y,V),C||A||(C=!0,W||(W=!0,Se()))),V},n.unstable_shouldYield=oe,n.unstable_wrapCallback=function(V){var Z=T;return function(){var Q=T;T=Z;try{return V.apply(this,arguments)}finally{T=Q}}}})(Kc)),Kc}var wg;function KE(){return wg||(wg=1,Yc.exports=YE()),Yc.exports}var Xc={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function XE(){if(Rg)return ge;Rg=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function A(R){return R===null||typeof R!="object"?null:(R=T&&R[T]||R["@@iterator"],typeof R=="function"?R:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,w={};function q(R,F,j){this.props=R,this.context=F,this.refs=w,this.updater=j||C}q.prototype.isReactComponent={},q.prototype.setState=function(R,F){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,F,"setState")},q.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function B(){}B.prototype=q.prototype;function k(R,F,j){this.props=R,this.context=F,this.refs=w,this.updater=j||C}var G=k.prototype=new B;G.constructor=k,I(G,q.prototype),G.isPureReactComponent=!0;var P=Array.isArray;function W(){}var J={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function X(R,F,j){var te=j.ref;return{$$typeof:n,type:R,key:F,ref:te!==void 0?te:null,props:j}}function oe(R,F){return X(R.type,F,R.props)}function se(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function Se(R){var F={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(j){return F[j]})}var Le=/\/+/g;function Ue(R,F){return typeof R=="object"&&R!==null&&R.key!=null?Se(""+R.key):F.toString(36)}function Je(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(W,W):(R.status="pending",R.then(function(F){R.status==="pending"&&(R.status="fulfilled",R.value=F)},function(F){R.status==="pending"&&(R.status="rejected",R.reason=F)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function V(R,F,j,te,de){var pe=typeof R;(pe==="undefined"||pe==="boolean")&&(R=null);var xe=!1;if(R===null)xe=!0;else switch(pe){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(R.$$typeof){case n:case e:xe=!0;break;case v:return xe=R._init,V(xe(R._payload),F,j,te,de)}}if(xe)return de=de(R),xe=te===""?"."+Ue(R,0):te,P(de)?(j="",xe!=null&&(j=xe.replace(Le,"$&/")+"/"),V(de,F,j,"",function($o){return $o})):de!=null&&(se(de)&&(de=oe(de,j+(de.key==null||R&&R.key===de.key?"":(""+de.key).replace(Le,"$&/")+"/")+xe)),F.push(de)),1;xe=0;var St=te===""?".":te+":";if(P(R))for(var Xe=0;Xe<R.length;Xe++)te=R[Xe],pe=St+Ue(te,Xe),xe+=V(te,F,j,pe,de);else if(Xe=A(R),typeof Xe=="function")for(R=Xe.call(R),Xe=0;!(te=R.next()).done;)te=te.value,pe=St+Ue(te,Xe++),xe+=V(te,F,j,pe,de);else if(pe==="object"){if(typeof R.then=="function")return V(Je(R),F,j,te,de);throw F=String(R),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return xe}function Z(R,F,j){if(R==null)return R;var te=[],de=0;return V(R,te,"","",function(pe){return F.call(j,pe,de++)}),te}function Q(R){if(R._status===-1){var F=R._result;F=F(),F.then(function(j){(R._status===0||R._status===-1)&&(R._status=1,R._result=j)},function(j){(R._status===0||R._status===-1)&&(R._status=2,R._result=j)}),R._status===-1&&(R._status=0,R._result=F)}if(R._status===1)return R._result.default;throw R._result}var Te=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},Oe={map:Z,forEach:function(R,F,j){Z(R,function(){F.apply(this,arguments)},j)},count:function(R){var F=0;return Z(R,function(){F++}),F},toArray:function(R){return Z(R,function(F){return F})||[]},only:function(R){if(!se(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return ge.Activity=_,ge.Children=Oe,ge.Component=q,ge.Fragment=i,ge.Profiler=a,ge.PureComponent=k,ge.StrictMode=s,ge.Suspense=y,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,ge.__COMPILER_RUNTIME={__proto__:null,c:function(R){return J.H.useMemoCache(R)}},ge.cache=function(R){return function(){return R.apply(null,arguments)}},ge.cacheSignal=function(){return null},ge.cloneElement=function(R,F,j){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var te=I({},R.props),de=R.key;if(F!=null)for(pe in F.key!==void 0&&(de=""+F.key),F)!ce.call(F,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&F.ref===void 0||(te[pe]=F[pe]);var pe=arguments.length-2;if(pe===1)te.children=j;else if(1<pe){for(var xe=Array(pe),St=0;St<pe;St++)xe[St]=arguments[St+2];te.children=xe}return X(R.type,de,te)},ge.createContext=function(R){return R={$$typeof:d,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:u,_context:R},R},ge.createElement=function(R,F,j){var te,de={},pe=null;if(F!=null)for(te in F.key!==void 0&&(pe=""+F.key),F)ce.call(F,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(de[te]=F[te]);var xe=arguments.length-2;if(xe===1)de.children=j;else if(1<xe){for(var St=Array(xe),Xe=0;Xe<xe;Xe++)St[Xe]=arguments[Xe+2];de.children=St}if(R&&R.defaultProps)for(te in xe=R.defaultProps,xe)de[te]===void 0&&(de[te]=xe[te]);return X(R,pe,de)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(R){return{$$typeof:p,render:R}},ge.isValidElement=se,ge.lazy=function(R){return{$$typeof:v,_payload:{_status:-1,_result:R},_init:Q}},ge.memo=function(R,F){return{$$typeof:m,type:R,compare:F===void 0?null:F}},ge.startTransition=function(R){var F=J.T,j={};J.T=j;try{var te=R(),de=J.S;de!==null&&de(j,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(W,Te)}catch(pe){Te(pe)}finally{F!==null&&j.types!==null&&(F.types=j.types),J.T=F}},ge.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},ge.use=function(R){return J.H.use(R)},ge.useActionState=function(R,F,j){return J.H.useActionState(R,F,j)},ge.useCallback=function(R,F){return J.H.useCallback(R,F)},ge.useContext=function(R){return J.H.useContext(R)},ge.useDebugValue=function(){},ge.useDeferredValue=function(R,F){return J.H.useDeferredValue(R,F)},ge.useEffect=function(R,F){return J.H.useEffect(R,F)},ge.useEffectEvent=function(R){return J.H.useEffectEvent(R)},ge.useId=function(){return J.H.useId()},ge.useImperativeHandle=function(R,F,j){return J.H.useImperativeHandle(R,F,j)},ge.useInsertionEffect=function(R,F){return J.H.useInsertionEffect(R,F)},ge.useLayoutEffect=function(R,F){return J.H.useLayoutEffect(R,F)},ge.useMemo=function(R,F){return J.H.useMemo(R,F)},ge.useOptimistic=function(R,F){return J.H.useOptimistic(R,F)},ge.useReducer=function(R,F,j){return J.H.useReducer(R,F,j)},ge.useRef=function(R){return J.H.useRef(R)},ge.useState=function(R){return J.H.useState(R)},ge.useSyncExternalStore=function(R,F,j){return J.H.useSyncExternalStore(R,F,j)},ge.useTransition=function(){return J.H.useTransition()},ge.version="19.2.4",ge}var xg;function zf(){return xg||(xg=1,Xc.exports=XE()),Xc.exports}var Qc={exports:{}},vt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function QE(){if(Ng)return vt;Ng=1;var n=zf();function e(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(y,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:y,containerInfo:m,implementation:v}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,vt.createPortal=function(y,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return u(y,m,null,v)},vt.flushSync=function(y){var m=d.T,v=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=m,s.p=v,s.d.f()}},vt.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(y,m))},vt.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},vt.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:A}):v==="script"&&s.d.X(y,{crossOrigin:_,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},vt.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);s.d.M(y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(y)},vt.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin);s.d.L(y,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},vt.preloadModule=function(y,m){if(typeof y=="string")if(m){var v=p(m.as,m.crossOrigin);s.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(y)},vt.requestFormReset=function(y){s.d.r(y)},vt.unstable_batchedUpdates=function(y,m){return y(m)},vt.useFormState=function(y,m,v){return d.H.useFormState(y,m,v)},vt.useFormStatus=function(){return d.H.useHostTransitionStatus()},vt.version="19.2.4",vt}var Ig;function ZE(){if(Ig)return Qc.exports;Ig=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qc.exports=QE(),Qc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function WE(){if(Mg)return ks;Mg=1;var n=KE(),e=zf(),i=ZE();function s(t){var o="https://react.dev/errors/"+t;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var o=t,l=t;if(t.alternate)for(;o.return;)o=o.return;else{t=o;do o=t,(o.flags&4098)!==0&&(l=o.return),t=o.return;while(t)}return o.tag===3?l:null}function d(t){if(t.tag===13){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function p(t){if(t.tag===31){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(s(188))}function m(t){var o=t.alternate;if(!o){if(o=u(t),o===null)throw Error(s(188));return o!==t?null:t}for(var l=t,r=o;;){var h=l.return;if(h===null)break;var g=h.alternate;if(g===null){if(r=h.return,r!==null){l=r;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===l)return y(h),t;if(g===r)return y(h),o;g=g.sibling}throw Error(s(188))}if(l.return!==r.return)l=h,r=g;else{for(var S=!1,E=h.child;E;){if(E===l){S=!0,l=h,r=g;break}if(E===r){S=!0,r=h,l=g;break}E=E.sibling}if(!S){for(E=g.child;E;){if(E===l){S=!0,l=g,r=h;break}if(E===r){S=!0,r=g,l=h;break}E=E.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==r)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?t:o}function v(t){var o=t.tag;if(o===5||o===26||o===27||o===6)return t;for(t=t.child;t!==null;){if(o=v(t),o!==null)return o;t=t.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),k=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function Se(t){return t===null||typeof t!="object"?null:(t=se&&t[se]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Symbol.for("react.client.reference");function Ue(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Le?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case I:return"Fragment";case q:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case W:return"SuspenseList";case X:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case k:return t.displayName||"Context";case B:return(t._context.displayName||"Context")+".Consumer";case G:var o=t.render;return t=t.displayName,t||(t=o.displayName||o.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J:return o=t.displayName||null,o!==null?o:Ue(t.type)||"Memo";case ce:o=t._payload,t=t._init;try{return Ue(t(o))}catch{}}return null}var Je=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},Te=[],Oe=-1;function R(t){return{current:t}}function F(t){0>Oe||(t.current=Te[Oe],Te[Oe]=null,Oe--)}function j(t,o){Oe++,Te[Oe]=t.current,t.current=o}var te=R(null),de=R(null),pe=R(null),xe=R(null);function St(t,o){switch(j(pe,o),j(de,t),j(te,null),o.nodeType){case 9:case 11:t=(t=o.documentElement)&&(t=t.namespaceURI)?Jm(t):0;break;default:if(t=o.tagName,o=o.namespaceURI)o=Jm(o),t=Ym(o,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}F(te),j(te,t)}function Xe(){F(te),F(de),F(pe)}function $o(t){t.memoizedState!==null&&j(xe,t);var o=te.current,l=Ym(o,t.type);o!==l&&(j(de,t),j(te,l))}function rl(t){de.current===t&&(F(te),F(de)),xe.current===t&&(F(xe),Ls._currentValue=Q)}var Rr,Ed;function vi(t){if(Rr===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Rr=o&&o[1]||"",Ed=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rr+t+Ed}var xr=!1;function Nr(t,o){if(!t||xr)return"";xr=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(o){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(H){var O=H}Reflect.construct(t,[],Y)}else{try{Y.call()}catch(H){O=H}t.call(Y.prototype)}}else{try{throw Error()}catch(H){O=H}(Y=t())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(H){if(H&&O&&typeof H.stack=="string")return[H.stack,O.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=r.DetermineComponentFrameRoot(),S=g[0],E=g[1];if(S&&E){var b=S.split(`
`),U=E.split(`
`);for(h=r=0;r<b.length&&!b[r].includes("DetermineComponentFrameRoot");)r++;for(;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;if(r===b.length||h===U.length)for(r=b.length-1,h=U.length-1;1<=r&&0<=h&&b[r]!==U[h];)h--;for(;1<=r&&0<=h;r--,h--)if(b[r]!==U[h]){if(r!==1||h!==1)do if(r--,h--,0>h||b[r]!==U[h]){var z=`
`+b[r].replace(" at new "," at ");return t.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",t.displayName)),z}while(1<=r&&0<=h);break}}}finally{xr=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?vi(l):""}function TS(t,o){switch(t.tag){case 26:case 27:case 5:return vi(t.type);case 16:return vi("Lazy");case 13:return t.child!==o&&o!==null?vi("Suspense Fallback"):vi("Suspense");case 19:return vi("SuspenseList");case 0:case 15:return Nr(t.type,!1);case 11:return Nr(t.type.render,!1);case 1:return Nr(t.type,!0);case 31:return vi("Activity");default:return""}}function Ad(t){try{var o="",l=null;do o+=TS(t,l),l=t,t=t.return;while(t);return o}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Ir=Object.prototype.hasOwnProperty,Mr=n.unstable_scheduleCallback,Dr=n.unstable_cancelCallback,ES=n.unstable_shouldYield,AS=n.unstable_requestPaint,Dt=n.unstable_now,CS=n.unstable_getCurrentPriorityLevel,Cd=n.unstable_ImmediatePriority,bd=n.unstable_UserBlockingPriority,ul=n.unstable_NormalPriority,bS=n.unstable_LowPriority,wd=n.unstable_IdlePriority,wS=n.log,RS=n.unstable_setDisableYieldValue,Jo=null,Ut=null;function zn(t){if(typeof wS=="function"&&RS(t),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Jo,t)}catch{}}var Lt=Math.clz32?Math.clz32:IS,xS=Math.log,NS=Math.LN2;function IS(t){return t>>>=0,t===0?32:31-(xS(t)/NS|0)|0}var cl=256,fl=262144,dl=4194304;function _i(t){var o=t&42;if(o!==0)return o;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function hl(t,o,l){var r=t.pendingLanes;if(r===0)return 0;var h=0,g=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var E=r&134217727;return E!==0?(r=E&~g,r!==0?h=_i(r):(S&=E,S!==0?h=_i(S):l||(l=E&~t,l!==0&&(h=_i(l))))):(E=r&~g,E!==0?h=_i(E):S!==0?h=_i(S):l||(l=r&~t,l!==0&&(h=_i(l)))),h===0?0:o!==0&&o!==h&&(o&g)===0&&(g=h&-h,l=o&-o,g>=l||g===32&&(l&4194048)!==0)?o:h}function Yo(t,o){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&o)===0}function MS(t,o){switch(t){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rd(){var t=dl;return dl<<=1,(dl&62914560)===0&&(dl=4194304),t}function Ur(t){for(var o=[],l=0;31>l;l++)o.push(t);return o}function Ko(t,o){t.pendingLanes|=o,o!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function DS(t,o,l,r,h,g){var S=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var E=t.entanglements,b=t.expirationTimes,U=t.hiddenUpdates;for(l=S&~l;0<l;){var z=31-Lt(l),Y=1<<z;E[z]=0,b[z]=-1;var O=U[z];if(O!==null)for(U[z]=null,z=0;z<O.length;z++){var H=O[z];H!==null&&(H.lane&=-536870913)}l&=~Y}r!==0&&xd(t,r,0),g!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=g&~(S&~o))}function xd(t,o,l){t.pendingLanes|=o,t.suspendedLanes&=~o;var r=31-Lt(o);t.entangledLanes|=o,t.entanglements[r]=t.entanglements[r]|1073741824|l&261930}function Nd(t,o){var l=t.entangledLanes|=o;for(t=t.entanglements;l;){var r=31-Lt(l),h=1<<r;h&o|t[r]&o&&(t[r]|=o),l&=~h}}function Id(t,o){var l=o&-o;return l=(l&42)!==0?1:Lr(l),(l&(t.suspendedLanes|o))!==0?0:l}function Lr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Or(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Md(){var t=Z.p;return t!==0?t:(t=window.event,t===void 0?32:gg(t.type))}function Dd(t,o){var l=Z.p;try{return Z.p=t,o()}finally{Z.p=l}}var Fn=Math.random().toString(36).slice(2),ct="__reactFiber$"+Fn,Ct="__reactProps$"+Fn,Fi="__reactContainer$"+Fn,Gr="__reactEvents$"+Fn,US="__reactListeners$"+Fn,LS="__reactHandles$"+Fn,Ud="__reactResources$"+Fn,Xo="__reactMarker$"+Fn;function Pr(t){delete t[ct],delete t[Ct],delete t[Gr],delete t[US],delete t[LS]}function $i(t){var o=t[ct];if(o)return o;for(var l=t.parentNode;l;){if(o=l[Fi]||l[ct]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(t=eg(t);t!==null;){if(l=t[ct])return l;t=eg(t)}return o}t=l,l=t.parentNode}return null}function Ji(t){if(t=t[ct]||t[Fi]){var o=t.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return t}return null}function Qo(t){var o=t.tag;if(o===5||o===26||o===27||o===6)return t.stateNode;throw Error(s(33))}function Yi(t){var o=t[Ud];return o||(o=t[Ud]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function lt(t){t[Xo]=!0}var Ld=new Set,Od={};function Si(t,o){Ki(t,o),Ki(t+"Capture",o)}function Ki(t,o){for(Od[t]=o,t=0;t<o.length;t++)Ld.add(o[t])}var OS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gd={},Pd={};function GS(t){return Ir.call(Pd,t)?!0:Ir.call(Gd,t)?!1:OS.test(t)?Pd[t]=!0:(Gd[t]=!0,!1)}function pl(t,o,l){if(GS(o))if(l===null)t.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(o);return;case"boolean":var r=o.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(o);return}}t.setAttribute(o,""+l)}}function ml(t,o,l){if(l===null)t.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttribute(o,""+l)}}function Sn(t,o,l,r){if(r===null)t.removeAttribute(l);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(o,l,""+r)}}function $t(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hd(t){var o=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function PS(t,o,l){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,o);if(!t.hasOwnProperty(o)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var h=r.get,g=r.set;return Object.defineProperty(t,o,{configurable:!0,get:function(){return h.call(this)},set:function(S){l=""+S,g.call(this,S)}}),Object.defineProperty(t,o,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){t._valueTracker=null,delete t[o]}}}}function Hr(t){if(!t._valueTracker){var o=Hd(t)?"checked":"value";t._valueTracker=PS(t,o,""+t[o])}}function kd(t){if(!t)return!1;var o=t._valueTracker;if(!o)return!0;var l=o.getValue(),r="";return t&&(r=Hd(t)?t.checked?"true":"false":t.value),t=r,t!==l?(o.setValue(t),!0):!1}function gl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var HS=/[\n"\\]/g;function Jt(t){return t.replace(HS,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function kr(t,o,l,r,h,g,S,E){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),o!=null?S==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+$t(o)):t.value!==""+$t(o)&&(t.value=""+$t(o)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),o!=null?qr(t,S,$t(o)):l!=null?qr(t,S,$t(l)):r!=null&&t.removeAttribute("value"),h==null&&g!=null&&(t.defaultChecked=!!g),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+$t(E):t.removeAttribute("name")}function qd(t,o,l,r,h,g,S,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),o!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||o!=null)){Hr(t);return}l=l!=null?""+$t(l):"",o=o!=null?""+$t(o):l,E||o===t.value||(t.value=o),t.defaultValue=o}r=r??h,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=E?t.checked:!!r,t.defaultChecked=!!r,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S),Hr(t)}function qr(t,o,l){o==="number"&&gl(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Xi(t,o,l,r){if(t=t.options,o){o={};for(var h=0;h<l.length;h++)o["$"+l[h]]=!0;for(l=0;l<t.length;l++)h=o.hasOwnProperty("$"+t[l].value),t[l].selected!==h&&(t[l].selected=h),h&&r&&(t[l].defaultSelected=!0)}else{for(l=""+$t(l),o=null,h=0;h<t.length;h++){if(t[h].value===l){t[h].selected=!0,r&&(t[h].defaultSelected=!0);return}o!==null||t[h].disabled||(o=t[h])}o!==null&&(o.selected=!0)}}function Bd(t,o,l){if(o!=null&&(o=""+$t(o),o!==t.value&&(t.value=o),l==null)){t.defaultValue!==o&&(t.defaultValue=o);return}t.defaultValue=l!=null?""+$t(l):""}function Vd(t,o,l,r){if(o==null){if(r!=null){if(l!=null)throw Error(s(92));if(Je(r)){if(1<r.length)throw Error(s(93));r=r[0]}l=r}l==null&&(l=""),o=l}l=$t(o),t.defaultValue=l,r=t.textContent,r===l&&r!==""&&r!==null&&(t.value=r),Hr(t)}function Qi(t,o){if(o){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=o;return}}t.textContent=o}var kS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zd(t,o,l){var r=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?r?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="":r?t.setProperty(o,l):typeof l!="number"||l===0||kS.has(o)?o==="float"?t.cssFloat=l:t[o]=(""+l).trim():t[o]=l+"px"}function Fd(t,o,l){if(o!=null&&typeof o!="object")throw Error(s(62));if(t=t.style,l!=null){for(var r in l)!l.hasOwnProperty(r)||o!=null&&o.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var h in o)r=o[h],o.hasOwnProperty(h)&&l[h]!==r&&zd(t,h,r)}else for(var g in o)o.hasOwnProperty(g)&&zd(t,g,o[g])}function Br(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),BS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yl(t){return BS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Tn(){}var Vr=null;function zr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zi=null,Wi=null;function $d(t){var o=Ji(t);if(o&&(t=o.stateNode)){var l=t[Ct]||null;e:switch(t=o.stateNode,o.type){case"input":if(kr(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Jt(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var r=l[o];if(r!==t&&r.form===t.form){var h=r[Ct]||null;if(!h)throw Error(s(90));kr(r,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(o=0;o<l.length;o++)r=l[o],r.form===t.form&&kd(r)}break e;case"textarea":Bd(t,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Xi(t,!!l.multiple,o,!1)}}}var Fr=!1;function Jd(t,o,l){if(Fr)return t(o,l);Fr=!0;try{var r=t(o);return r}finally{if(Fr=!1,(Zi!==null||Wi!==null)&&(oa(),Zi&&(o=Zi,t=Wi,Wi=Zi=null,$d(o),t)))for(o=0;o<t.length;o++)$d(t[o])}}function Zo(t,o){var l=t.stateNode;if(l===null)return null;var r=l[Ct]||null;if(r===null)return null;l=r[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(s(231,o,typeof l));return l}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$r=!1;if(En)try{var Wo={};Object.defineProperty(Wo,"passive",{get:function(){$r=!0}}),window.addEventListener("test",Wo,Wo),window.removeEventListener("test",Wo,Wo)}catch{$r=!1}var $n=null,Jr=null,vl=null;function Yd(){if(vl)return vl;var t,o=Jr,l=o.length,r,h="value"in $n?$n.value:$n.textContent,g=h.length;for(t=0;t<l&&o[t]===h[t];t++);var S=l-t;for(r=1;r<=S&&o[l-r]===h[g-r];r++);return vl=h.slice(t,1<r?1-r:void 0)}function _l(t){var o=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&o===13&&(t=13)):t=o,t===10&&(t=13),32<=t||t===13?t:0}function Sl(){return!0}function Kd(){return!1}function bt(t){function o(l,r,h,g,S){this._reactName=l,this._targetInst=h,this.type=r,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(l=t[E],this[E]=l?l(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Sl:Kd,this.isPropagationStopped=Kd,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),o}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tl=bt(Ti),jo=_({},Ti,{view:0,detail:0}),VS=bt(jo),Yr,Kr,es,El=_({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==es&&(es&&t.type==="mousemove"?(Yr=t.screenX-es.screenX,Kr=t.screenY-es.screenY):Kr=Yr=0,es=t),Yr)},movementY:function(t){return"movementY"in t?t.movementY:Kr}}),Xd=bt(El),zS=_({},El,{dataTransfer:0}),FS=bt(zS),$S=_({},jo,{relatedTarget:0}),Xr=bt($S),JS=_({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),YS=bt(JS),KS=_({},Ti,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XS=bt(KS),QS=_({},Ti,{data:0}),Qd=bt(QS),ZS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eT(t){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(t):(t=jS[t])?!!o[t]:!1}function Qr(){return eT}var tT=_({},jo,{key:function(t){if(t.key){var o=ZS[t.key]||t.key;if(o!=="Unidentified")return o}return t.type==="keypress"?(t=_l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(t){return t.type==="keypress"?_l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nT=bt(tT),iT=_({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zd=bt(iT),oT=_({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),sT=bt(oT),lT=_({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),aT=bt(lT),rT=_({},El,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uT=bt(rT),cT=_({},Ti,{newState:0,oldState:0}),fT=bt(cT),dT=[9,13,27,32],Zr=En&&"CompositionEvent"in window,ts=null;En&&"documentMode"in document&&(ts=document.documentMode);var hT=En&&"TextEvent"in window&&!ts,Wd=En&&(!Zr||ts&&8<ts&&11>=ts),jd=" ",eh=!1;function th(t,o){switch(t){case"keyup":return dT.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ji=!1;function pT(t,o){switch(t){case"compositionend":return nh(o);case"keypress":return o.which!==32?null:(eh=!0,jd);case"textInput":return t=o.data,t===jd&&eh?null:t;default:return null}}function mT(t,o){if(ji)return t==="compositionend"||!Zr&&th(t,o)?(t=Yd(),vl=Jr=$n=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Wd&&o.locale!=="ko"?null:o.data;default:return null}}var gT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ih(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o==="input"?!!gT[t.type]:o==="textarea"}function oh(t,o,l,r){Zi?Wi?Wi.push(r):Wi=[r]:Zi=r,o=fa(o,"onChange"),0<o.length&&(l=new Tl("onChange","change",null,l,r),t.push({event:l,listeners:o}))}var ns=null,is=null;function yT(t){qm(t,0)}function Al(t){var o=Qo(t);if(kd(o))return t}function sh(t,o){if(t==="change")return o}var lh=!1;if(En){var Wr;if(En){var jr="oninput"in document;if(!jr){var ah=document.createElement("div");ah.setAttribute("oninput","return;"),jr=typeof ah.oninput=="function"}Wr=jr}else Wr=!1;lh=Wr&&(!document.documentMode||9<document.documentMode)}function rh(){ns&&(ns.detachEvent("onpropertychange",uh),is=ns=null)}function uh(t){if(t.propertyName==="value"&&Al(is)){var o=[];oh(o,is,t,zr(t)),Jd(yT,o)}}function vT(t,o,l){t==="focusin"?(rh(),ns=o,is=l,ns.attachEvent("onpropertychange",uh)):t==="focusout"&&rh()}function _T(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Al(is)}function ST(t,o){if(t==="click")return Al(o)}function TT(t,o){if(t==="input"||t==="change")return Al(o)}function ET(t,o){return t===o&&(t!==0||1/t===1/o)||t!==t&&o!==o}var Ot=typeof Object.is=="function"?Object.is:ET;function os(t,o){if(Ot(t,o))return!0;if(typeof t!="object"||t===null||typeof o!="object"||o===null)return!1;var l=Object.keys(t),r=Object.keys(o);if(l.length!==r.length)return!1;for(r=0;r<l.length;r++){var h=l[r];if(!Ir.call(o,h)||!Ot(t[h],o[h]))return!1}return!0}function ch(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fh(t,o){var l=ch(t);t=0;for(var r;l;){if(l.nodeType===3){if(r=t+l.textContent.length,t<=o&&r>=o)return{node:l,offset:o-t};t=r}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ch(l)}}function dh(t,o){return t&&o?t===o?!0:t&&t.nodeType===3?!1:o&&o.nodeType===3?dh(t,o.parentNode):"contains"in t?t.contains(o):t.compareDocumentPosition?!!(t.compareDocumentPosition(o)&16):!1:!1}function hh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var o=gl(t.document);o instanceof t.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)t=o.contentWindow;else break;o=gl(t.document)}return o}function eu(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o&&(o==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||o==="textarea"||t.contentEditable==="true")}var AT=En&&"documentMode"in document&&11>=document.documentMode,eo=null,tu=null,ss=null,nu=!1;function ph(t,o,l){var r=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;nu||eo==null||eo!==gl(r)||(r=eo,"selectionStart"in r&&eu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ss&&os(ss,r)||(ss=r,r=fa(tu,"onSelect"),0<r.length&&(o=new Tl("onSelect","select",null,o,l),t.push({event:o,listeners:r}),o.target=eo)))}function Ei(t,o){var l={};return l[t.toLowerCase()]=o.toLowerCase(),l["Webkit"+t]="webkit"+o,l["Moz"+t]="moz"+o,l}var to={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionrun:Ei("Transition","TransitionRun"),transitionstart:Ei("Transition","TransitionStart"),transitioncancel:Ei("Transition","TransitionCancel"),transitionend:Ei("Transition","TransitionEnd")},iu={},mh={};En&&(mh=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function Ai(t){if(iu[t])return iu[t];if(!to[t])return t;var o=to[t],l;for(l in o)if(o.hasOwnProperty(l)&&l in mh)return iu[t]=o[l];return t}var gh=Ai("animationend"),yh=Ai("animationiteration"),vh=Ai("animationstart"),CT=Ai("transitionrun"),bT=Ai("transitionstart"),wT=Ai("transitioncancel"),_h=Ai("transitionend"),Sh=new Map,ou="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ou.push("scrollEnd");function ln(t,o){Sh.set(t,o),Si(o,[t])}var Cl=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Yt=[],no=0,su=0;function bl(){for(var t=no,o=su=no=0;o<t;){var l=Yt[o];Yt[o++]=null;var r=Yt[o];Yt[o++]=null;var h=Yt[o];Yt[o++]=null;var g=Yt[o];if(Yt[o++]=null,r!==null&&h!==null){var S=r.pending;S===null?h.next=h:(h.next=S.next,S.next=h),r.pending=h}g!==0&&Th(l,h,g)}}function wl(t,o,l,r){Yt[no++]=t,Yt[no++]=o,Yt[no++]=l,Yt[no++]=r,su|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function lu(t,o,l,r){return wl(t,o,l,r),Rl(t)}function Ci(t,o){return wl(t,null,null,o),Rl(t)}function Th(t,o,l){t.lanes|=l;var r=t.alternate;r!==null&&(r.lanes|=l);for(var h=!1,g=t.return;g!==null;)g.childLanes|=l,r=g.alternate,r!==null&&(r.childLanes|=l),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(h=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,h&&o!==null&&(h=31-Lt(l),t=g.hiddenUpdates,r=t[h],r===null?t[h]=[o]:r.push(o),o.lane=l|536870912),g):null}function Rl(t){if(50<Rs)throw Rs=0,mc=null,Error(s(185));for(var o=t.return;o!==null;)t=o,o=t.return;return t.tag===3?t.stateNode:null}var io={};function RT(t,o,l,r){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,o,l,r){return new RT(t,o,l,r)}function au(t){return t=t.prototype,!(!t||!t.isReactComponent)}function An(t,o){var l=t.alternate;return l===null?(l=Gt(t.tag,o,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=o,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,o=t.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Eh(t,o){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=o,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,o=l.dependencies,t.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),t}function xl(t,o,l,r,h,g){var S=0;if(r=t,typeof t=="function")au(t)&&(S=1);else if(typeof t=="string")S=DE(t,l,te.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case X:return t=Gt(31,l,o,h),t.elementType=X,t.lanes=g,t;case I:return bi(l.children,h,g,o);case w:S=8,h|=24;break;case q:return t=Gt(12,l,o,h|2),t.elementType=q,t.lanes=g,t;case P:return t=Gt(13,l,o,h),t.elementType=P,t.lanes=g,t;case W:return t=Gt(19,l,o,h),t.elementType=W,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:S=10;break e;case B:S=9;break e;case G:S=11;break e;case J:S=14;break e;case ce:S=16,r=null;break e}S=29,l=Error(s(130,t===null?"null":typeof t,"")),r=null}return o=Gt(S,l,o,h),o.elementType=t,o.type=r,o.lanes=g,o}function bi(t,o,l,r){return t=Gt(7,t,r,o),t.lanes=l,t}function ru(t,o,l){return t=Gt(6,t,null,o),t.lanes=l,t}function Ah(t){var o=Gt(18,null,null,0);return o.stateNode=t,o}function uu(t,o,l){return o=Gt(4,t.children!==null?t.children:[],t.key,o),o.lanes=l,o.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},o}var Ch=new WeakMap;function Kt(t,o){if(typeof t=="object"&&t!==null){var l=Ch.get(t);return l!==void 0?l:(o={value:t,source:o,stack:Ad(o)},Ch.set(t,o),o)}return{value:t,source:o,stack:Ad(o)}}var oo=[],so=0,Nl=null,ls=0,Xt=[],Qt=0,Jn=null,hn=1,pn="";function Cn(t,o){oo[so++]=ls,oo[so++]=Nl,Nl=t,ls=o}function bh(t,o,l){Xt[Qt++]=hn,Xt[Qt++]=pn,Xt[Qt++]=Jn,Jn=t;var r=hn;t=pn;var h=32-Lt(r)-1;r&=~(1<<h),l+=1;var g=32-Lt(o)+h;if(30<g){var S=h-h%5;g=(r&(1<<S)-1).toString(32),r>>=S,h-=S,hn=1<<32-Lt(o)+h|l<<h|r,pn=g+t}else hn=1<<g|l<<h|r,pn=t}function cu(t){t.return!==null&&(Cn(t,1),bh(t,1,0))}function fu(t){for(;t===Nl;)Nl=oo[--so],oo[so]=null,ls=oo[--so],oo[so]=null;for(;t===Jn;)Jn=Xt[--Qt],Xt[Qt]=null,pn=Xt[--Qt],Xt[Qt]=null,hn=Xt[--Qt],Xt[Qt]=null}function wh(t,o){Xt[Qt++]=hn,Xt[Qt++]=pn,Xt[Qt++]=Jn,hn=o.id,pn=o.overflow,Jn=t}var ft=null,ze=null,we=!1,Yn=null,Zt=!1,du=Error(s(519));function Kn(t){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw as(Kt(o,t)),du}function Rh(t){var o=t.stateNode,l=t.type,r=t.memoizedProps;switch(o[ct]=t,o[Ct]=r,l){case"dialog":Ae("cancel",o),Ae("close",o);break;case"iframe":case"object":case"embed":Ae("load",o);break;case"video":case"audio":for(l=0;l<Ns.length;l++)Ae(Ns[l],o);break;case"source":Ae("error",o);break;case"img":case"image":case"link":Ae("error",o),Ae("load",o);break;case"details":Ae("toggle",o);break;case"input":Ae("invalid",o),qd(o,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ae("invalid",o);break;case"textarea":Ae("invalid",o),Vd(o,r.value,r.defaultValue,r.children)}l=r.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||r.suppressHydrationWarning===!0||Fm(o.textContent,l)?(r.popover!=null&&(Ae("beforetoggle",o),Ae("toggle",o)),r.onScroll!=null&&Ae("scroll",o),r.onScrollEnd!=null&&Ae("scrollend",o),r.onClick!=null&&(o.onclick=Tn),o=!0):o=!1,o||Kn(t,!0)}function xh(t){for(ft=t.return;ft;)switch(ft.tag){case 5:case 31:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:ft=ft.return}}function lo(t){if(t!==ft)return!1;if(!we)return xh(t),we=!0,!1;var o=t.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Ic(t.type,t.memoizedProps)),l=!l),l&&ze&&Kn(t),xh(t),o===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ze=jm(t)}else if(o===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ze=jm(t)}else o===27?(o=ze,ri(t.type)?(t=Oc,Oc=null,ze=t):ze=o):ze=ft?jt(t.stateNode.nextSibling):null;return!0}function wi(){ze=ft=null,we=!1}function hu(){var t=Yn;return t!==null&&(Nt===null?Nt=t:Nt.push.apply(Nt,t),Yn=null),t}function as(t){Yn===null?Yn=[t]:Yn.push(t)}var pu=R(null),Ri=null,bn=null;function Xn(t,o,l){j(pu,o._currentValue),o._currentValue=l}function wn(t){t._currentValue=pu.current,F(pu)}function mu(t,o,l){for(;t!==null;){var r=t.alternate;if((t.childLanes&o)!==o?(t.childLanes|=o,r!==null&&(r.childLanes|=o)):r!==null&&(r.childLanes&o)!==o&&(r.childLanes|=o),t===l)break;t=t.return}}function gu(t,o,l,r){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var g=h.dependencies;if(g!==null){var S=h.child;g=g.firstContext;e:for(;g!==null;){var E=g;g=h;for(var b=0;b<o.length;b++)if(E.context===o[b]){g.lanes|=l,E=g.alternate,E!==null&&(E.lanes|=l),mu(g.return,l,t),r||(S=null);break e}g=E.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(s(341));S.lanes|=l,g=S.alternate,g!==null&&(g.lanes|=l),mu(S,l,t),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===t){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function ao(t,o,l,r){t=null;for(var h=o,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var E=h.type;Ot(h.pendingProps.value,S.value)||(t!==null?t.push(E):t=[E])}}else if(h===xe.current){if(S=h.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Ls):t=[Ls])}h=h.return}t!==null&&gu(o,t,l,r),o.flags|=262144}function Il(t){for(t=t.firstContext;t!==null;){if(!Ot(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function xi(t){Ri=t,bn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function dt(t){return Nh(Ri,t)}function Ml(t,o){return Ri===null&&xi(t),Nh(t,o)}function Nh(t,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},bn===null){if(t===null)throw Error(s(308));bn=o,t.dependencies={lanes:0,firstContext:o},t.flags|=524288}else bn=bn.next=o;return l}var xT=typeof AbortController<"u"?AbortController:function(){var t=[],o=this.signal={aborted:!1,addEventListener:function(l,r){t.push(r)}};this.abort=function(){o.aborted=!0,t.forEach(function(l){return l()})}},NT=n.unstable_scheduleCallback,IT=n.unstable_NormalPriority,We={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yu(){return{controller:new xT,data:new Map,refCount:0}}function rs(t){t.refCount--,t.refCount===0&&NT(IT,function(){t.controller.abort()})}var us=null,vu=0,ro=0,uo=null;function MT(t,o){if(us===null){var l=us=[];vu=0,ro=Tc(),uo={status:"pending",value:void 0,then:function(r){l.push(r)}}}return vu++,o.then(Ih,Ih),o}function Ih(){if(--vu===0&&us!==null){uo!==null&&(uo.status="fulfilled");var t=us;us=null,ro=0,uo=null;for(var o=0;o<t.length;o++)(0,t[o])()}}function DT(t,o){var l=[],r={status:"pending",value:null,reason:null,then:function(h){l.push(h)}};return t.then(function(){r.status="fulfilled",r.value=o;for(var h=0;h<l.length;h++)(0,l[h])(o)},function(h){for(r.status="rejected",r.reason=h,h=0;h<l.length;h++)(0,l[h])(void 0)}),r}var Mh=V.S;V.S=function(t,o){pm=Dt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&MT(t,o),Mh!==null&&Mh(t,o)};var Ni=R(null);function _u(){var t=Ni.current;return t!==null?t:Ve.pooledCache}function Dl(t,o){o===null?j(Ni,Ni.current):j(Ni,o.pool)}function Dh(){var t=_u();return t===null?null:{parent:We._currentValue,pool:t}}var co=Error(s(460)),Su=Error(s(474)),Ul=Error(s(542)),Ll={then:function(){}};function Uh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Lh(t,o,l){switch(l=t[l],l===void 0?t.push(o):l!==o&&(o.then(Tn,Tn),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw t=o.reason,Gh(t),t;default:if(typeof o.status=="string")o.then(Tn,Tn);else{if(t=Ve,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=o,t.status="pending",t.then(function(r){if(o.status==="pending"){var h=o;h.status="fulfilled",h.value=r}},function(r){if(o.status==="pending"){var h=o;h.status="rejected",h.reason=r}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw t=o.reason,Gh(t),t}throw Mi=o,co}}function Ii(t){try{var o=t._init;return o(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Mi=l,co):l}}var Mi=null;function Oh(){if(Mi===null)throw Error(s(459));var t=Mi;return Mi=null,t}function Gh(t){if(t===co||t===Ul)throw Error(s(483))}var fo=null,cs=0;function Ol(t){var o=cs;return cs+=1,fo===null&&(fo=[]),Lh(fo,t,o)}function fs(t,o){o=o.props.ref,t.ref=o!==void 0?o:null}function Gl(t,o){throw o.$$typeof===T?Error(s(525)):(t=Object.prototype.toString.call(o),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":t)))}function Ph(t){function o(M,x){if(t){var D=M.deletions;D===null?(M.deletions=[x],M.flags|=16):D.push(x)}}function l(M,x){if(!t)return null;for(;x!==null;)o(M,x),x=x.sibling;return null}function r(M){for(var x=new Map;M!==null;)M.key!==null?x.set(M.key,M):x.set(M.index,M),M=M.sibling;return x}function h(M,x){return M=An(M,x),M.index=0,M.sibling=null,M}function g(M,x,D){return M.index=D,t?(D=M.alternate,D!==null?(D=D.index,D<x?(M.flags|=67108866,x):D):(M.flags|=67108866,x)):(M.flags|=1048576,x)}function S(M){return t&&M.alternate===null&&(M.flags|=67108866),M}function E(M,x,D,$){return x===null||x.tag!==6?(x=ru(D,M.mode,$),x.return=M,x):(x=h(x,D),x.return=M,x)}function b(M,x,D,$){var re=D.type;return re===I?z(M,x,D.props.children,$,D.key):x!==null&&(x.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ce&&Ii(re)===x.type)?(x=h(x,D.props),fs(x,D),x.return=M,x):(x=xl(D.type,D.key,D.props,null,M.mode,$),fs(x,D),x.return=M,x)}function U(M,x,D,$){return x===null||x.tag!==4||x.stateNode.containerInfo!==D.containerInfo||x.stateNode.implementation!==D.implementation?(x=uu(D,M.mode,$),x.return=M,x):(x=h(x,D.children||[]),x.return=M,x)}function z(M,x,D,$,re){return x===null||x.tag!==7?(x=bi(D,M.mode,$,re),x.return=M,x):(x=h(x,D),x.return=M,x)}function Y(M,x,D){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=ru(""+x,M.mode,D),x.return=M,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case A:return D=xl(x.type,x.key,x.props,null,M.mode,D),fs(D,x),D.return=M,D;case C:return x=uu(x,M.mode,D),x.return=M,x;case ce:return x=Ii(x),Y(M,x,D)}if(Je(x)||Se(x))return x=bi(x,M.mode,D,null),x.return=M,x;if(typeof x.then=="function")return Y(M,Ol(x),D);if(x.$$typeof===k)return Y(M,Ml(M,x),D);Gl(M,x)}return null}function O(M,x,D,$){var re=x!==null?x.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return re!==null?null:E(M,x,""+D,$);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case A:return D.key===re?b(M,x,D,$):null;case C:return D.key===re?U(M,x,D,$):null;case ce:return D=Ii(D),O(M,x,D,$)}if(Je(D)||Se(D))return re!==null?null:z(M,x,D,$,null);if(typeof D.then=="function")return O(M,x,Ol(D),$);if(D.$$typeof===k)return O(M,x,Ml(M,D),$);Gl(M,D)}return null}function H(M,x,D,$,re){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return M=M.get(D)||null,E(x,M,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return M=M.get($.key===null?D:$.key)||null,b(x,M,$,re);case C:return M=M.get($.key===null?D:$.key)||null,U(x,M,$,re);case ce:return $=Ii($),H(M,x,D,$,re)}if(Je($)||Se($))return M=M.get(D)||null,z(x,M,$,re,null);if(typeof $.then=="function")return H(M,x,D,Ol($),re);if($.$$typeof===k)return H(M,x,D,Ml(x,$),re);Gl(x,$)}return null}function ne(M,x,D,$){for(var re=null,Ne=null,le=x,ve=x=0,be=null;le!==null&&ve<D.length;ve++){le.index>ve?(be=le,le=null):be=le.sibling;var Ie=O(M,le,D[ve],$);if(Ie===null){le===null&&(le=be);break}t&&le&&Ie.alternate===null&&o(M,le),x=g(Ie,x,ve),Ne===null?re=Ie:Ne.sibling=Ie,Ne=Ie,le=be}if(ve===D.length)return l(M,le),we&&Cn(M,ve),re;if(le===null){for(;ve<D.length;ve++)le=Y(M,D[ve],$),le!==null&&(x=g(le,x,ve),Ne===null?re=le:Ne.sibling=le,Ne=le);return we&&Cn(M,ve),re}for(le=r(le);ve<D.length;ve++)be=H(le,M,ve,D[ve],$),be!==null&&(t&&be.alternate!==null&&le.delete(be.key===null?ve:be.key),x=g(be,x,ve),Ne===null?re=be:Ne.sibling=be,Ne=be);return t&&le.forEach(function(hi){return o(M,hi)}),we&&Cn(M,ve),re}function fe(M,x,D,$){if(D==null)throw Error(s(151));for(var re=null,Ne=null,le=x,ve=x=0,be=null,Ie=D.next();le!==null&&!Ie.done;ve++,Ie=D.next()){le.index>ve?(be=le,le=null):be=le.sibling;var hi=O(M,le,Ie.value,$);if(hi===null){le===null&&(le=be);break}t&&le&&hi.alternate===null&&o(M,le),x=g(hi,x,ve),Ne===null?re=hi:Ne.sibling=hi,Ne=hi,le=be}if(Ie.done)return l(M,le),we&&Cn(M,ve),re;if(le===null){for(;!Ie.done;ve++,Ie=D.next())Ie=Y(M,Ie.value,$),Ie!==null&&(x=g(Ie,x,ve),Ne===null?re=Ie:Ne.sibling=Ie,Ne=Ie);return we&&Cn(M,ve),re}for(le=r(le);!Ie.done;ve++,Ie=D.next())Ie=H(le,M,ve,Ie.value,$),Ie!==null&&(t&&Ie.alternate!==null&&le.delete(Ie.key===null?ve:Ie.key),x=g(Ie,x,ve),Ne===null?re=Ie:Ne.sibling=Ie,Ne=Ie);return t&&le.forEach(function(zE){return o(M,zE)}),we&&Cn(M,ve),re}function Be(M,x,D,$){if(typeof D=="object"&&D!==null&&D.type===I&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case A:e:{for(var re=D.key;x!==null;){if(x.key===re){if(re=D.type,re===I){if(x.tag===7){l(M,x.sibling),$=h(x,D.props.children),$.return=M,M=$;break e}}else if(x.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ce&&Ii(re)===x.type){l(M,x.sibling),$=h(x,D.props),fs($,D),$.return=M,M=$;break e}l(M,x);break}else o(M,x);x=x.sibling}D.type===I?($=bi(D.props.children,M.mode,$,D.key),$.return=M,M=$):($=xl(D.type,D.key,D.props,null,M.mode,$),fs($,D),$.return=M,M=$)}return S(M);case C:e:{for(re=D.key;x!==null;){if(x.key===re)if(x.tag===4&&x.stateNode.containerInfo===D.containerInfo&&x.stateNode.implementation===D.implementation){l(M,x.sibling),$=h(x,D.children||[]),$.return=M,M=$;break e}else{l(M,x);break}else o(M,x);x=x.sibling}$=uu(D,M.mode,$),$.return=M,M=$}return S(M);case ce:return D=Ii(D),Be(M,x,D,$)}if(Je(D))return ne(M,x,D,$);if(Se(D)){if(re=Se(D),typeof re!="function")throw Error(s(150));return D=re.call(D),fe(M,x,D,$)}if(typeof D.then=="function")return Be(M,x,Ol(D),$);if(D.$$typeof===k)return Be(M,x,Ml(M,D),$);Gl(M,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,x!==null&&x.tag===6?(l(M,x.sibling),$=h(x,D),$.return=M,M=$):(l(M,x),$=ru(D,M.mode,$),$.return=M,M=$),S(M)):l(M,x)}return function(M,x,D,$){try{cs=0;var re=Be(M,x,D,$);return fo=null,re}catch(le){if(le===co||le===Ul)throw le;var Ne=Gt(29,le,null,M.mode);return Ne.lanes=$,Ne.return=M,Ne}finally{}}}var Di=Ph(!0),Hh=Ph(!1),Qn=!1;function Tu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eu(t,o){t=t.updateQueue,o.updateQueue===t&&(o.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Zn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Wn(t,o,l){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(De&2)!==0){var h=r.pending;return h===null?o.next=o:(o.next=h.next,h.next=o),r.pending=o,o=Rl(t),Th(t,null,l),o}return wl(t,r,o,l),Rl(t)}function ds(t,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var r=o.lanes;r&=t.pendingLanes,l|=r,o.lanes=l,Nd(t,l)}}function Au(t,o){var l=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,l===r)){var h=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?h=g=S:g=g.next=S,l=l.next}while(l!==null);g===null?h=g=o:g=g.next=o}else h=g=o;l={baseState:r.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:r.shared,callbacks:r.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=o:t.next=o,l.lastBaseUpdate=o}var Cu=!1;function hs(){if(Cu){var t=uo;if(t!==null)throw t}}function ps(t,o,l,r){Cu=!1;var h=t.updateQueue;Qn=!1;var g=h.firstBaseUpdate,S=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var b=E,U=b.next;b.next=null,S===null?g=U:S.next=U,S=b;var z=t.alternate;z!==null&&(z=z.updateQueue,E=z.lastBaseUpdate,E!==S&&(E===null?z.firstBaseUpdate=U:E.next=U,z.lastBaseUpdate=b))}if(g!==null){var Y=h.baseState;S=0,z=U=b=null,E=g;do{var O=E.lane&-536870913,H=O!==E.lane;if(H?(Ce&O)===O:(r&O)===O){O!==0&&O===ro&&(Cu=!0),z!==null&&(z=z.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ne=t,fe=E;O=o;var Be=l;switch(fe.tag){case 1:if(ne=fe.payload,typeof ne=="function"){Y=ne.call(Be,Y,O);break e}Y=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=fe.payload,O=typeof ne=="function"?ne.call(Be,Y,O):ne,O==null)break e;Y=_({},Y,O);break e;case 2:Qn=!0}}O=E.callback,O!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[O]:H.push(O))}else H={lane:O,tag:E.tag,payload:E.payload,callback:E.callback,next:null},z===null?(U=z=H,b=Y):z=z.next=H,S|=O;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;H=E,E=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);z===null&&(b=Y),h.baseState=b,h.firstBaseUpdate=U,h.lastBaseUpdate=z,g===null&&(h.shared.lanes=0),ii|=S,t.lanes=S,t.memoizedState=Y}}function kh(t,o){if(typeof t!="function")throw Error(s(191,t));t.call(o)}function qh(t,o){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)kh(l[t],o)}var ho=R(null),Pl=R(0);function Bh(t,o){t=On,j(Pl,t),j(ho,o),On=t|o.baseLanes}function bu(){j(Pl,On),j(ho,ho.current)}function wu(){On=Pl.current,F(ho),F(Pl)}var Pt=R(null),Wt=null;function jn(t){var o=t.alternate;j(Qe,Qe.current&1),j(Pt,t),Wt===null&&(o===null||ho.current!==null||o.memoizedState!==null)&&(Wt=t)}function Ru(t){j(Qe,Qe.current),j(Pt,t),Wt===null&&(Wt=t)}function Vh(t){t.tag===22?(j(Qe,Qe.current),j(Pt,t),Wt===null&&(Wt=t)):ei()}function ei(){j(Qe,Qe.current),j(Pt,Pt.current)}function Ht(t){F(Pt),Wt===t&&(Wt=null),F(Qe)}var Qe=R(0);function Hl(t){for(var o=t;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Uc(l)||Lc(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Rn=0,ye=null,ke=null,je=null,kl=!1,po=!1,Ui=!1,ql=0,ms=0,mo=null,UT=0;function Ye(){throw Error(s(321))}function xu(t,o){if(o===null)return!1;for(var l=0;l<o.length&&l<t.length;l++)if(!Ot(t[l],o[l]))return!1;return!0}function Nu(t,o,l,r,h,g){return Rn=g,ye=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,V.H=t===null||t.memoizedState===null?bp:Fu,Ui=!1,g=l(r,h),Ui=!1,po&&(g=Fh(o,l,r,h)),zh(t),g}function zh(t){V.H=vs;var o=ke!==null&&ke.next!==null;if(Rn=0,je=ke=ye=null,kl=!1,ms=0,mo=null,o)throw Error(s(300));t===null||et||(t=t.dependencies,t!==null&&Il(t)&&(et=!0))}function Fh(t,o,l,r){ye=t;var h=0;do{if(po&&(mo=null),ms=0,po=!1,25<=h)throw Error(s(301));if(h+=1,je=ke=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}V.H=wp,g=o(l,r)}while(po);return g}function LT(){var t=V.H,o=t.useState()[0];return o=typeof o.then=="function"?gs(o):o,t=t.useState()[0],(ke!==null?ke.memoizedState:null)!==t&&(ye.flags|=1024),o}function Iu(){var t=ql!==0;return ql=0,t}function Mu(t,o,l){o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~l}function Du(t){if(kl){for(t=t.memoizedState;t!==null;){var o=t.queue;o!==null&&(o.pending=null),t=t.next}kl=!1}Rn=0,je=ke=ye=null,po=!1,ms=ql=0,mo=null}function Tt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?ye.memoizedState=je=t:je=je.next=t,je}function Ze(){if(ke===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var o=je===null?ye.memoizedState:je.next;if(o!==null)je=o,ke=t;else{if(t===null)throw ye.alternate===null?Error(s(467)):Error(s(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},je===null?ye.memoizedState=je=t:je=je.next=t}return je}function Bl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gs(t){var o=ms;return ms+=1,mo===null&&(mo=[]),t=Lh(mo,t,o),o=ye,(je===null?o.memoizedState:je.next)===null&&(o=o.alternate,V.H=o===null||o.memoizedState===null?bp:Fu),t}function Vl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gs(t);if(t.$$typeof===k)return dt(t)}throw Error(s(438,String(t)))}function Uu(t){var o=null,l=ye.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var r=ye.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(o={data:r.data.map(function(h){return h.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Bl(),ye.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(t),r=0;r<t;r++)l[r]=oe;return o.index++,l}function xn(t,o){return typeof o=="function"?o(t):o}function zl(t){var o=Ze();return Lu(o,ke,t)}function Lu(t,o,l){var r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=l;var h=t.baseQueue,g=r.pending;if(g!==null){if(h!==null){var S=h.next;h.next=g.next,g.next=S}o.baseQueue=h=g,r.pending=null}if(g=t.baseState,h===null)t.memoizedState=g;else{o=h.next;var E=S=null,b=null,U=o,z=!1;do{var Y=U.lane&-536870913;if(Y!==U.lane?(Ce&Y)===Y:(Rn&Y)===Y){var O=U.revertLane;if(O===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),Y===ro&&(z=!0);else if((Rn&O)===O){U=U.next,O===ro&&(z=!0);continue}else Y={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},b===null?(E=b=Y,S=g):b=b.next=Y,ye.lanes|=O,ii|=O;Y=U.action,Ui&&l(g,Y),g=U.hasEagerState?U.eagerState:l(g,Y)}else O={lane:Y,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},b===null?(E=b=O,S=g):b=b.next=O,ye.lanes|=Y,ii|=Y;U=U.next}while(U!==null&&U!==o);if(b===null?S=g:b.next=E,!Ot(g,t.memoizedState)&&(et=!0,z&&(l=uo,l!==null)))throw l;t.memoizedState=g,t.baseState=S,t.baseQueue=b,r.lastRenderedState=g}return h===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function Ou(t){var o=Ze(),l=o.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=t;var r=l.dispatch,h=l.pending,g=o.memoizedState;if(h!==null){l.pending=null;var S=h=h.next;do g=t(g,S.action),S=S.next;while(S!==h);Ot(g,o.memoizedState)||(et=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),l.lastRenderedState=g}return[g,r]}function $h(t,o,l){var r=ye,h=Ze(),g=we;if(g){if(l===void 0)throw Error(s(407));l=l()}else l=o();var S=!Ot((ke||h).memoizedState,l);if(S&&(h.memoizedState=l,et=!0),h=h.queue,Hu(Kh.bind(null,r,h,t),[t]),h.getSnapshot!==o||S||je!==null&&je.memoizedState.tag&1){if(r.flags|=2048,go(9,{destroy:void 0},Yh.bind(null,r,h,l,o),null),Ve===null)throw Error(s(349));g||(Rn&127)!==0||Jh(r,o,l)}return l}function Jh(t,o,l){t.flags|=16384,t={getSnapshot:o,value:l},o=ye.updateQueue,o===null?(o=Bl(),ye.updateQueue=o,o.stores=[t]):(l=o.stores,l===null?o.stores=[t]:l.push(t))}function Yh(t,o,l,r){o.value=l,o.getSnapshot=r,Xh(o)&&Qh(t)}function Kh(t,o,l){return l(function(){Xh(o)&&Qh(t)})}function Xh(t){var o=t.getSnapshot;t=t.value;try{var l=o();return!Ot(t,l)}catch{return!0}}function Qh(t){var o=Ci(t,2);o!==null&&It(o,t,2)}function Gu(t){var o=Tt();if(typeof t=="function"){var l=t;if(t=l(),Ui){zn(!0);try{l()}finally{zn(!1)}}}return o.memoizedState=o.baseState=t,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:t},o}function Zh(t,o,l,r){return t.baseState=l,Lu(t,ke,typeof r=="function"?r:xn)}function OT(t,o,l,r,h){if(Jl(t))throw Error(s(485));if(t=o.action,t!==null){var g={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};V.T!==null?l(!0):g.isTransition=!1,r(g),l=o.pending,l===null?(g.next=o.pending=g,Wh(o,g)):(g.next=l.next,o.pending=l.next=g)}}function Wh(t,o){var l=o.action,r=o.payload,h=t.state;if(o.isTransition){var g=V.T,S={};V.T=S;try{var E=l(h,r),b=V.S;b!==null&&b(S,E),jh(t,o,E)}catch(U){Pu(t,o,U)}finally{g!==null&&S.types!==null&&(g.types=S.types),V.T=g}}else try{g=l(h,r),jh(t,o,g)}catch(U){Pu(t,o,U)}}function jh(t,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(r){ep(t,o,r)},function(r){return Pu(t,o,r)}):ep(t,o,l)}function ep(t,o,l){o.status="fulfilled",o.value=l,tp(o),t.state=l,o=t.pending,o!==null&&(l=o.next,l===o?t.pending=null:(l=l.next,o.next=l,Wh(t,l)))}function Pu(t,o,l){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do o.status="rejected",o.reason=l,tp(o),o=o.next;while(o!==r)}t.action=null}function tp(t){t=t.listeners;for(var o=0;o<t.length;o++)(0,t[o])()}function np(t,o){return o}function ip(t,o){if(we){var l=Ve.formState;if(l!==null){e:{var r=ye;if(we){if(ze){t:{for(var h=ze,g=Zt;h.nodeType!==8;){if(!g){h=null;break t}if(h=jt(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){ze=jt(h.nextSibling),r=h.data==="F!";break e}}Kn(r)}r=!1}r&&(o=l[0])}}return l=Tt(),l.memoizedState=l.baseState=o,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:np,lastRenderedState:o},l.queue=r,l=Ep.bind(null,ye,r),r.dispatch=l,r=Gu(!1),g=zu.bind(null,ye,!1,r.queue),r=Tt(),h={state:o,dispatch:null,action:t,pending:null},r.queue=h,l=OT.bind(null,ye,h,g,l),h.dispatch=l,r.memoizedState=t,[o,l,!1]}function op(t){var o=Ze();return sp(o,ke,t)}function sp(t,o,l){if(o=Lu(t,o,np)[0],t=zl(xn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var r=gs(o)}catch(S){throw S===co?Ul:S}else r=o;o=Ze();var h=o.queue,g=h.dispatch;return l!==o.memoizedState&&(ye.flags|=2048,go(9,{destroy:void 0},GT.bind(null,h,l),null)),[r,g,t]}function GT(t,o){t.action=o}function lp(t){var o=Ze(),l=ke;if(l!==null)return sp(o,l,t);Ze(),o=o.memoizedState,l=Ze();var r=l.queue.dispatch;return l.memoizedState=t,[o,r,!1]}function go(t,o,l,r){return t={tag:t,create:l,deps:r,inst:o,next:null},o=ye.updateQueue,o===null&&(o=Bl(),ye.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=t.next=t:(r=l.next,l.next=t,t.next=r,o.lastEffect=t),t}function ap(){return Ze().memoizedState}function Fl(t,o,l,r){var h=Tt();ye.flags|=t,h.memoizedState=go(1|o,{destroy:void 0},l,r===void 0?null:r)}function $l(t,o,l,r){var h=Ze();r=r===void 0?null:r;var g=h.memoizedState.inst;ke!==null&&r!==null&&xu(r,ke.memoizedState.deps)?h.memoizedState=go(o,g,l,r):(ye.flags|=t,h.memoizedState=go(1|o,g,l,r))}function rp(t,o){Fl(8390656,8,t,o)}function Hu(t,o){$l(2048,8,t,o)}function PT(t){ye.flags|=4;var o=ye.updateQueue;if(o===null)o=Bl(),ye.updateQueue=o,o.events=[t];else{var l=o.events;l===null?o.events=[t]:l.push(t)}}function up(t){var o=Ze().memoizedState;return PT({ref:o,nextImpl:t}),function(){if((De&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function cp(t,o){return $l(4,2,t,o)}function fp(t,o){return $l(4,4,t,o)}function dp(t,o){if(typeof o=="function"){t=t();var l=o(t);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return t=t(),o.current=t,function(){o.current=null}}function hp(t,o,l){l=l!=null?l.concat([t]):null,$l(4,4,dp.bind(null,o,t),l)}function ku(){}function pp(t,o){var l=Ze();o=o===void 0?null:o;var r=l.memoizedState;return o!==null&&xu(o,r[1])?r[0]:(l.memoizedState=[t,o],t)}function mp(t,o){var l=Ze();o=o===void 0?null:o;var r=l.memoizedState;if(o!==null&&xu(o,r[1]))return r[0];if(r=t(),Ui){zn(!0);try{t()}finally{zn(!1)}}return l.memoizedState=[r,o],r}function qu(t,o,l){return l===void 0||(Rn&1073741824)!==0&&(Ce&261930)===0?t.memoizedState=o:(t.memoizedState=l,t=gm(),ye.lanes|=t,ii|=t,l)}function gp(t,o,l,r){return Ot(l,o)?l:ho.current!==null?(t=qu(t,l,r),Ot(t,o)||(et=!0),t):(Rn&42)===0||(Rn&1073741824)!==0&&(Ce&261930)===0?(et=!0,t.memoizedState=l):(t=gm(),ye.lanes|=t,ii|=t,o)}function yp(t,o,l,r,h){var g=Z.p;Z.p=g!==0&&8>g?g:8;var S=V.T,E={};V.T=E,zu(t,!1,o,l);try{var b=h(),U=V.S;if(U!==null&&U(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var z=DT(b,r);ys(t,o,z,Bt(t))}else ys(t,o,r,Bt(t))}catch(Y){ys(t,o,{then:function(){},status:"rejected",reason:Y},Bt())}finally{Z.p=g,S!==null&&E.types!==null&&(S.types=E.types),V.T=S}}function HT(){}function Bu(t,o,l,r){if(t.tag!==5)throw Error(s(476));var h=vp(t).queue;yp(t,h,o,Q,l===null?HT:function(){return _p(t),l(r)})}function vp(t){var o=t.memoizedState;if(o!==null)return o;o={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:Q},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:l},next:null},t.memoizedState=o,t=t.alternate,t!==null&&(t.memoizedState=o),o}function _p(t){var o=vp(t);o.next===null&&(o=t.alternate.memoizedState),ys(t,o.next.queue,{},Bt())}function Vu(){return dt(Ls)}function Sp(){return Ze().memoizedState}function Tp(){return Ze().memoizedState}function kT(t){for(var o=t.return;o!==null;){switch(o.tag){case 24:case 3:var l=Bt();t=Zn(l);var r=Wn(o,t,l);r!==null&&(It(r,o,l),ds(r,o,l)),o={cache:yu()},t.payload=o;return}o=o.return}}function qT(t,o,l){var r=Bt();l={lane:r,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Jl(t)?Ap(o,l):(l=lu(t,o,l,r),l!==null&&(It(l,t,r),Cp(l,o,r)))}function Ep(t,o,l){var r=Bt();ys(t,o,l,r)}function ys(t,o,l,r){var h={lane:r,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jl(t))Ap(o,h);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var S=o.lastRenderedState,E=g(S,l);if(h.hasEagerState=!0,h.eagerState=E,Ot(E,S))return wl(t,o,h,0),Ve===null&&bl(),!1}catch{}finally{}if(l=lu(t,o,h,r),l!==null)return It(l,t,r),Cp(l,o,r),!0}return!1}function zu(t,o,l,r){if(r={lane:2,revertLane:Tc(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Jl(t)){if(o)throw Error(s(479))}else o=lu(t,l,r,2),o!==null&&It(o,t,2)}function Jl(t){var o=t.alternate;return t===ye||o!==null&&o===ye}function Ap(t,o){po=kl=!0;var l=t.pending;l===null?o.next=o:(o.next=l.next,l.next=o),t.pending=o}function Cp(t,o,l){if((l&4194048)!==0){var r=o.lanes;r&=t.pendingLanes,l|=r,o.lanes=l,Nd(t,l)}}var vs={readContext:dt,use:Vl,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye};vs.useEffectEvent=Ye;var bp={readContext:dt,use:Vl,useCallback:function(t,o){return Tt().memoizedState=[t,o===void 0?null:o],t},useContext:dt,useEffect:rp,useImperativeHandle:function(t,o,l){l=l!=null?l.concat([t]):null,Fl(4194308,4,dp.bind(null,o,t),l)},useLayoutEffect:function(t,o){return Fl(4194308,4,t,o)},useInsertionEffect:function(t,o){Fl(4,2,t,o)},useMemo:function(t,o){var l=Tt();o=o===void 0?null:o;var r=t();if(Ui){zn(!0);try{t()}finally{zn(!1)}}return l.memoizedState=[r,o],r},useReducer:function(t,o,l){var r=Tt();if(l!==void 0){var h=l(o);if(Ui){zn(!0);try{l(o)}finally{zn(!1)}}}else h=o;return r.memoizedState=r.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},r.queue=t,t=t.dispatch=qT.bind(null,ye,t),[r.memoizedState,t]},useRef:function(t){var o=Tt();return t={current:t},o.memoizedState=t},useState:function(t){t=Gu(t);var o=t.queue,l=Ep.bind(null,ye,o);return o.dispatch=l,[t.memoizedState,l]},useDebugValue:ku,useDeferredValue:function(t,o){var l=Tt();return qu(l,t,o)},useTransition:function(){var t=Gu(!1);return t=yp.bind(null,ye,t.queue,!0,!1),Tt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,o,l){var r=ye,h=Tt();if(we){if(l===void 0)throw Error(s(407));l=l()}else{if(l=o(),Ve===null)throw Error(s(349));(Ce&127)!==0||Jh(r,o,l)}h.memoizedState=l;var g={value:l,getSnapshot:o};return h.queue=g,rp(Kh.bind(null,r,g,t),[t]),r.flags|=2048,go(9,{destroy:void 0},Yh.bind(null,r,g,l,o),null),l},useId:function(){var t=Tt(),o=Ve.identifierPrefix;if(we){var l=pn,r=hn;l=(r&~(1<<32-Lt(r)-1)).toString(32)+l,o="_"+o+"R_"+l,l=ql++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=UT++,o="_"+o+"r_"+l.toString(32)+"_";return t.memoizedState=o},useHostTransitionStatus:Vu,useFormState:ip,useActionState:ip,useOptimistic:function(t){var o=Tt();o.memoizedState=o.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=zu.bind(null,ye,!0,l),l.dispatch=o,[t,o]},useMemoCache:Uu,useCacheRefresh:function(){return Tt().memoizedState=kT.bind(null,ye)},useEffectEvent:function(t){var o=Tt(),l={impl:t};return o.memoizedState=l,function(){if((De&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},Fu={readContext:dt,use:Vl,useCallback:pp,useContext:dt,useEffect:Hu,useImperativeHandle:hp,useInsertionEffect:cp,useLayoutEffect:fp,useMemo:mp,useReducer:zl,useRef:ap,useState:function(){return zl(xn)},useDebugValue:ku,useDeferredValue:function(t,o){var l=Ze();return gp(l,ke.memoizedState,t,o)},useTransition:function(){var t=zl(xn)[0],o=Ze().memoizedState;return[typeof t=="boolean"?t:gs(t),o]},useSyncExternalStore:$h,useId:Sp,useHostTransitionStatus:Vu,useFormState:op,useActionState:op,useOptimistic:function(t,o){var l=Ze();return Zh(l,ke,t,o)},useMemoCache:Uu,useCacheRefresh:Tp};Fu.useEffectEvent=up;var wp={readContext:dt,use:Vl,useCallback:pp,useContext:dt,useEffect:Hu,useImperativeHandle:hp,useInsertionEffect:cp,useLayoutEffect:fp,useMemo:mp,useReducer:Ou,useRef:ap,useState:function(){return Ou(xn)},useDebugValue:ku,useDeferredValue:function(t,o){var l=Ze();return ke===null?qu(l,t,o):gp(l,ke.memoizedState,t,o)},useTransition:function(){var t=Ou(xn)[0],o=Ze().memoizedState;return[typeof t=="boolean"?t:gs(t),o]},useSyncExternalStore:$h,useId:Sp,useHostTransitionStatus:Vu,useFormState:lp,useActionState:lp,useOptimistic:function(t,o){var l=Ze();return ke!==null?Zh(l,ke,t,o):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Uu,useCacheRefresh:Tp};wp.useEffectEvent=up;function $u(t,o,l,r){o=t.memoizedState,l=l(r,o),l=l==null?o:_({},o,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var Ju={enqueueSetState:function(t,o,l){t=t._reactInternals;var r=Bt(),h=Zn(r);h.payload=o,l!=null&&(h.callback=l),o=Wn(t,h,r),o!==null&&(It(o,t,r),ds(o,t,r))},enqueueReplaceState:function(t,o,l){t=t._reactInternals;var r=Bt(),h=Zn(r);h.tag=1,h.payload=o,l!=null&&(h.callback=l),o=Wn(t,h,r),o!==null&&(It(o,t,r),ds(o,t,r))},enqueueForceUpdate:function(t,o){t=t._reactInternals;var l=Bt(),r=Zn(l);r.tag=2,o!=null&&(r.callback=o),o=Wn(t,r,l),o!==null&&(It(o,t,l),ds(o,t,l))}};function Rp(t,o,l,r,h,g,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,g,S):o.prototype&&o.prototype.isPureReactComponent?!os(l,r)||!os(h,g):!0}function xp(t,o,l,r){t=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,r),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,r),o.state!==t&&Ju.enqueueReplaceState(o,o.state,null)}function Li(t,o){var l=o;if("ref"in o){l={};for(var r in o)r!=="ref"&&(l[r]=o[r])}if(t=t.defaultProps){l===o&&(l=_({},l));for(var h in t)l[h]===void 0&&(l[h]=t[h])}return l}function Np(t){Cl(t)}function Ip(t){console.error(t)}function Mp(t){Cl(t)}function Yl(t,o){try{var l=t.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(r){setTimeout(function(){throw r})}}function Dp(t,o,l){try{var r=t.onCaughtError;r(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Yu(t,o,l){return l=Zn(l),l.tag=3,l.payload={element:null},l.callback=function(){Yl(t,o)},l}function Up(t){return t=Zn(t),t.tag=3,t}function Lp(t,o,l,r){var h=l.type.getDerivedStateFromError;if(typeof h=="function"){var g=r.value;t.payload=function(){return h(g)},t.callback=function(){Dp(o,l,r)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){Dp(o,l,r),typeof h!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var E=r.stack;this.componentDidCatch(r.value,{componentStack:E!==null?E:""})})}function BT(t,o,l,r,h){if(l.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(o=l.alternate,o!==null&&ao(o,l,h,!0),l=Pt.current,l!==null){switch(l.tag){case 31:case 13:return Wt===null?sa():l.alternate===null&&Ke===0&&(Ke=3),l.flags&=-257,l.flags|=65536,l.lanes=h,r===Ll?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([r]):o.add(r),vc(t,r,h)),!1;case 22:return l.flags|=65536,r===Ll?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([r])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([r]):l.add(r)),vc(t,r,h)),!1}throw Error(s(435,l.tag))}return vc(t,r,h),sa(),!1}if(we)return o=Pt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=h,r!==du&&(t=Error(s(422),{cause:r}),as(Kt(t,l)))):(r!==du&&(o=Error(s(423),{cause:r}),as(Kt(o,l))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,r=Kt(r,l),h=Yu(t.stateNode,r,h),Au(t,h),Ke!==4&&(Ke=2)),!1;var g=Error(s(520),{cause:r});if(g=Kt(g,l),ws===null?ws=[g]:ws.push(g),Ke!==4&&(Ke=2),o===null)return!0;r=Kt(r,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,t=h&-h,l.lanes|=t,t=Yu(l.stateNode,r,t),Au(l,t),!1;case 1:if(o=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(oi===null||!oi.has(g))))return l.flags|=65536,h&=-h,l.lanes|=h,h=Up(h),Lp(h,t,l,r),Au(l,h),!1}l=l.return}while(l!==null);return!1}var Ku=Error(s(461)),et=!1;function ht(t,o,l,r){o.child=t===null?Hh(o,null,l,r):Di(o,t.child,l,r)}function Op(t,o,l,r,h){l=l.render;var g=o.ref;if("ref"in r){var S={};for(var E in r)E!=="ref"&&(S[E]=r[E])}else S=r;return xi(o),r=Nu(t,o,l,S,g,h),E=Iu(),t!==null&&!et?(Mu(t,o,h),Nn(t,o,h)):(we&&E&&cu(o),o.flags|=1,ht(t,o,r,h),o.child)}function Gp(t,o,l,r,h){if(t===null){var g=l.type;return typeof g=="function"&&!au(g)&&g.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=g,Pp(t,o,g,r,h)):(t=xl(l.type,null,r,o,o.mode,h),t.ref=o.ref,t.return=o,o.child=t)}if(g=t.child,!nc(t,h)){var S=g.memoizedProps;if(l=l.compare,l=l!==null?l:os,l(S,r)&&t.ref===o.ref)return Nn(t,o,h)}return o.flags|=1,t=An(g,r),t.ref=o.ref,t.return=o,o.child=t}function Pp(t,o,l,r,h){if(t!==null){var g=t.memoizedProps;if(os(g,r)&&t.ref===o.ref)if(et=!1,o.pendingProps=r=g,nc(t,h))(t.flags&131072)!==0&&(et=!0);else return o.lanes=t.lanes,Nn(t,o,h)}return Xu(t,o,l,r,h)}function Hp(t,o,l,r){var h=r.children,g=t!==null?t.memoizedState:null;if(t===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((o.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,t!==null){for(r=o.child=t.child,h=0;r!==null;)h=h|r.lanes|r.childLanes,r=r.sibling;r=h&~g}else r=0,o.child=null;return kp(t,o,g,l,r)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},t!==null&&Dl(o,g!==null?g.cachePool:null),g!==null?Bh(o,g):bu(),Vh(o);else return r=o.lanes=536870912,kp(t,o,g!==null?g.baseLanes|l:l,l,r)}else g!==null?(Dl(o,g.cachePool),Bh(o,g),ei(),o.memoizedState=null):(t!==null&&Dl(o,null),bu(),ei());return ht(t,o,h,l),o.child}function _s(t,o){return t!==null&&t.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function kp(t,o,l,r,h){var g=_u();return g=g===null?null:{parent:We._currentValue,pool:g},o.memoizedState={baseLanes:l,cachePool:g},t!==null&&Dl(o,null),bu(),Vh(o),t!==null&&ao(t,o,r,!0),o.childLanes=h,null}function Kl(t,o){return o=Ql({mode:o.mode,children:o.children},t.mode),o.ref=t.ref,t.child=o,o.return=t,o}function qp(t,o,l){return Di(o,t.child,null,l),t=Kl(o,o.pendingProps),t.flags|=2,Ht(o),o.memoizedState=null,t}function VT(t,o,l){var r=o.pendingProps,h=(o.flags&128)!==0;if(o.flags&=-129,t===null){if(we){if(r.mode==="hidden")return t=Kl(o,r),o.lanes=536870912,_s(null,t);if(Ru(o),(t=ze)?(t=Wm(t,Zt),t=t!==null&&t.data==="&"?t:null,t!==null&&(o.memoizedState={dehydrated:t,treeContext:Jn!==null?{id:hn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},l=Ah(t),l.return=o,o.child=l,ft=o,ze=null)):t=null,t===null)throw Kn(o);return o.lanes=536870912,null}return Kl(o,r)}var g=t.memoizedState;if(g!==null){var S=g.dehydrated;if(Ru(o),h)if(o.flags&256)o.flags&=-257,o=qp(t,o,l);else if(o.memoizedState!==null)o.child=t.child,o.flags|=128,o=null;else throw Error(s(558));else if(et||ao(t,o,l,!1),h=(l&t.childLanes)!==0,et||h){if(r=Ve,r!==null&&(S=Id(r,l),S!==0&&S!==g.retryLane))throw g.retryLane=S,Ci(t,S),It(r,t,S),Ku;sa(),o=qp(t,o,l)}else t=g.treeContext,ze=jt(S.nextSibling),ft=o,we=!0,Yn=null,Zt=!1,t!==null&&wh(o,t),o=Kl(o,r),o.flags|=4096;return o}return t=An(t.child,{mode:r.mode,children:r.children}),t.ref=o.ref,o.child=t,t.return=o,t}function Xl(t,o){var l=o.ref;if(l===null)t!==null&&t.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(t===null||t.ref!==l)&&(o.flags|=4194816)}}function Xu(t,o,l,r,h){return xi(o),l=Nu(t,o,l,r,void 0,h),r=Iu(),t!==null&&!et?(Mu(t,o,h),Nn(t,o,h)):(we&&r&&cu(o),o.flags|=1,ht(t,o,l,h),o.child)}function Bp(t,o,l,r,h,g){return xi(o),o.updateQueue=null,l=Fh(o,r,l,h),zh(t),r=Iu(),t!==null&&!et?(Mu(t,o,g),Nn(t,o,g)):(we&&r&&cu(o),o.flags|=1,ht(t,o,l,g),o.child)}function Vp(t,o,l,r,h){if(xi(o),o.stateNode===null){var g=io,S=l.contextType;typeof S=="object"&&S!==null&&(g=dt(S)),g=new l(r,g),o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ju,o.stateNode=g,g._reactInternals=o,g=o.stateNode,g.props=r,g.state=o.memoizedState,g.refs={},Tu(o),S=l.contextType,g.context=typeof S=="object"&&S!==null?dt(S):io,g.state=o.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&($u(o,l,S,r),g.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Ju.enqueueReplaceState(g,g.state,null),ps(o,r,g,h),hs(),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308),r=!0}else if(t===null){g=o.stateNode;var E=o.memoizedProps,b=Li(l,E);g.props=b;var U=g.context,z=l.contextType;S=io,typeof z=="object"&&z!==null&&(S=dt(z));var Y=l.getDerivedStateFromProps;z=typeof Y=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=o.pendingProps!==E,z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||U!==S)&&xp(o,g,r,S),Qn=!1;var O=o.memoizedState;g.state=O,ps(o,r,g,h),hs(),U=o.memoizedState,E||O!==U||Qn?(typeof Y=="function"&&($u(o,l,Y,r),U=o.memoizedState),(b=Qn||Rp(o,l,b,r,O,U,S))?(z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(o.flags|=4194308)):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=r,o.memoizedState=U),g.props=r,g.state=U,g.context=S,r=b):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),r=!1)}else{g=o.stateNode,Eu(t,o),S=o.memoizedProps,z=Li(l,S),g.props=z,Y=o.pendingProps,O=g.context,U=l.contextType,b=io,typeof U=="object"&&U!==null&&(b=dt(U)),E=l.getDerivedStateFromProps,(U=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==Y||O!==b)&&xp(o,g,r,b),Qn=!1,O=o.memoizedState,g.state=O,ps(o,r,g,h),hs();var H=o.memoizedState;S!==Y||O!==H||Qn||t!==null&&t.dependencies!==null&&Il(t.dependencies)?(typeof E=="function"&&($u(o,l,E,r),H=o.memoizedState),(z=Qn||Rp(o,l,z,r,O,H,b)||t!==null&&t.dependencies!==null&&Il(t.dependencies))?(U||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(r,H,b),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(r,H,b)),typeof g.componentDidUpdate=="function"&&(o.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(o.flags|=1024),o.memoizedProps=r,o.memoizedState=H),g.props=r,g.state=H,g.context=b,r=z):(typeof g.componentDidUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(o.flags|=1024),r=!1)}return g=r,Xl(t,o),r=(o.flags&128)!==0,g||r?(g=o.stateNode,l=r&&typeof l.getDerivedStateFromError!="function"?null:g.render(),o.flags|=1,t!==null&&r?(o.child=Di(o,t.child,null,h),o.child=Di(o,null,l,h)):ht(t,o,l,h),o.memoizedState=g.state,t=o.child):t=Nn(t,o,h),t}function zp(t,o,l,r){return wi(),o.flags|=256,ht(t,o,l,r),o.child}var Qu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zu(t){return{baseLanes:t,cachePool:Dh()}}function Wu(t,o,l){return t=t!==null?t.childLanes&~l:0,o&&(t|=qt),t}function Fp(t,o,l){var r=o.pendingProps,h=!1,g=(o.flags&128)!==0,S;if((S=g)||(S=t!==null&&t.memoizedState===null?!1:(Qe.current&2)!==0),S&&(h=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,t===null){if(we){if(h?jn(o):ei(),(t=ze)?(t=Wm(t,Zt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(o.memoizedState={dehydrated:t,treeContext:Jn!==null?{id:hn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},l=Ah(t),l.return=o,o.child=l,ft=o,ze=null)):t=null,t===null)throw Kn(o);return Lc(t)?o.lanes=32:o.lanes=536870912,null}var E=r.children;return r=r.fallback,h?(ei(),h=o.mode,E=Ql({mode:"hidden",children:E},h),r=bi(r,h,l,null),E.return=o,r.return=o,E.sibling=r,o.child=E,r=o.child,r.memoizedState=Zu(l),r.childLanes=Wu(t,S,l),o.memoizedState=Qu,_s(null,r)):(jn(o),ju(o,E))}var b=t.memoizedState;if(b!==null&&(E=b.dehydrated,E!==null)){if(g)o.flags&256?(jn(o),o.flags&=-257,o=ec(t,o,l)):o.memoizedState!==null?(ei(),o.child=t.child,o.flags|=128,o=null):(ei(),E=r.fallback,h=o.mode,r=Ql({mode:"visible",children:r.children},h),E=bi(E,h,l,null),E.flags|=2,r.return=o,E.return=o,r.sibling=E,o.child=r,Di(o,t.child,null,l),r=o.child,r.memoizedState=Zu(l),r.childLanes=Wu(t,S,l),o.memoizedState=Qu,o=_s(null,r));else if(jn(o),Lc(E)){if(S=E.nextSibling&&E.nextSibling.dataset,S)var U=S.dgst;S=U,r=Error(s(419)),r.stack="",r.digest=S,as({value:r,source:null,stack:null}),o=ec(t,o,l)}else if(et||ao(t,o,l,!1),S=(l&t.childLanes)!==0,et||S){if(S=Ve,S!==null&&(r=Id(S,l),r!==0&&r!==b.retryLane))throw b.retryLane=r,Ci(t,r),It(S,t,r),Ku;Uc(E)||sa(),o=ec(t,o,l)}else Uc(E)?(o.flags|=192,o.child=t.child,o=null):(t=b.treeContext,ze=jt(E.nextSibling),ft=o,we=!0,Yn=null,Zt=!1,t!==null&&wh(o,t),o=ju(o,r.children),o.flags|=4096);return o}return h?(ei(),E=r.fallback,h=o.mode,b=t.child,U=b.sibling,r=An(b,{mode:"hidden",children:r.children}),r.subtreeFlags=b.subtreeFlags&65011712,U!==null?E=An(U,E):(E=bi(E,h,l,null),E.flags|=2),E.return=o,r.return=o,r.sibling=E,o.child=r,_s(null,r),r=o.child,E=t.child.memoizedState,E===null?E=Zu(l):(h=E.cachePool,h!==null?(b=We._currentValue,h=h.parent!==b?{parent:b,pool:b}:h):h=Dh(),E={baseLanes:E.baseLanes|l,cachePool:h}),r.memoizedState=E,r.childLanes=Wu(t,S,l),o.memoizedState=Qu,_s(t.child,r)):(jn(o),l=t.child,t=l.sibling,l=An(l,{mode:"visible",children:r.children}),l.return=o,l.sibling=null,t!==null&&(S=o.deletions,S===null?(o.deletions=[t],o.flags|=16):S.push(t)),o.child=l,o.memoizedState=null,l)}function ju(t,o){return o=Ql({mode:"visible",children:o},t.mode),o.return=t,t.child=o}function Ql(t,o){return t=Gt(22,t,null,o),t.lanes=0,t}function ec(t,o,l){return Di(o,t.child,null,l),t=ju(o,o.pendingProps.children),t.flags|=2,o.memoizedState=null,t}function $p(t,o,l){t.lanes|=o;var r=t.alternate;r!==null&&(r.lanes|=o),mu(t.return,o,l)}function tc(t,o,l,r,h,g){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:r,tail:l,tailMode:h,treeForkCount:g}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=r,S.tail=l,S.tailMode=h,S.treeForkCount=g)}function Jp(t,o,l){var r=o.pendingProps,h=r.revealOrder,g=r.tail;r=r.children;var S=Qe.current,E=(S&2)!==0;if(E?(S=S&1|2,o.flags|=128):S&=1,j(Qe,S),ht(t,o,r,l),r=we?ls:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=o.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$p(t,l,o);else if(t.tag===19)$p(t,l,o);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===o)break e;for(;t.sibling===null;){if(t.return===null||t.return===o)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(l=o.child,h=null;l!==null;)t=l.alternate,t!==null&&Hl(t)===null&&(h=l),l=l.sibling;l=h,l===null?(h=o.child,o.child=null):(h=l.sibling,l.sibling=null),tc(o,!1,h,l,g,r);break;case"backwards":case"unstable_legacy-backwards":for(l=null,h=o.child,o.child=null;h!==null;){if(t=h.alternate,t!==null&&Hl(t)===null){o.child=h;break}t=h.sibling,h.sibling=l,l=h,h=t}tc(o,!0,l,null,g,r);break;case"together":tc(o,!1,null,null,void 0,r);break;default:o.memoizedState=null}return o.child}function Nn(t,o,l){if(t!==null&&(o.dependencies=t.dependencies),ii|=o.lanes,(l&o.childLanes)===0)if(t!==null){if(ao(t,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(t!==null&&o.child!==t.child)throw Error(s(153));if(o.child!==null){for(t=o.child,l=An(t,t.pendingProps),o.child=l,l.return=o;t.sibling!==null;)t=t.sibling,l=l.sibling=An(t,t.pendingProps),l.return=o;l.sibling=null}return o.child}function nc(t,o){return(t.lanes&o)!==0?!0:(t=t.dependencies,!!(t!==null&&Il(t)))}function zT(t,o,l){switch(o.tag){case 3:St(o,o.stateNode.containerInfo),Xn(o,We,t.memoizedState.cache),wi();break;case 27:case 5:$o(o);break;case 4:St(o,o.stateNode.containerInfo);break;case 10:Xn(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Ru(o),null;break;case 13:var r=o.memoizedState;if(r!==null)return r.dehydrated!==null?(jn(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Fp(t,o,l):(jn(o),t=Nn(t,o,l),t!==null?t.sibling:null);jn(o);break;case 19:var h=(t.flags&128)!==0;if(r=(l&o.childLanes)!==0,r||(ao(t,o,l,!1),r=(l&o.childLanes)!==0),h){if(r)return Jp(t,o,l);o.flags|=128}if(h=o.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),j(Qe,Qe.current),r)break;return null;case 22:return o.lanes=0,Hp(t,o,l,o.pendingProps);case 24:Xn(o,We,t.memoizedState.cache)}return Nn(t,o,l)}function Yp(t,o,l){if(t!==null)if(t.memoizedProps!==o.pendingProps)et=!0;else{if(!nc(t,l)&&(o.flags&128)===0)return et=!1,zT(t,o,l);et=(t.flags&131072)!==0}else et=!1,we&&(o.flags&1048576)!==0&&bh(o,ls,o.index);switch(o.lanes=0,o.tag){case 16:e:{var r=o.pendingProps;if(t=Ii(o.elementType),o.type=t,typeof t=="function")au(t)?(r=Li(t,r),o.tag=1,o=Vp(null,o,t,r,l)):(o.tag=0,o=Xu(null,o,t,r,l));else{if(t!=null){var h=t.$$typeof;if(h===G){o.tag=11,o=Op(null,o,t,r,l);break e}else if(h===J){o.tag=14,o=Gp(null,o,t,r,l);break e}}throw o=Ue(t)||t,Error(s(306,o,""))}}return o;case 0:return Xu(t,o,o.type,o.pendingProps,l);case 1:return r=o.type,h=Li(r,o.pendingProps),Vp(t,o,r,h,l);case 3:e:{if(St(o,o.stateNode.containerInfo),t===null)throw Error(s(387));r=o.pendingProps;var g=o.memoizedState;h=g.element,Eu(t,o),ps(o,r,null,l);var S=o.memoizedState;if(r=S.cache,Xn(o,We,r),r!==g.cache&&gu(o,[We],l,!0),hs(),r=S.element,g.isDehydrated)if(g={element:r,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){o=zp(t,o,r,l);break e}else if(r!==h){h=Kt(Error(s(424)),o),as(h),o=zp(t,o,r,l);break e}else{switch(t=o.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ze=jt(t.firstChild),ft=o,we=!0,Yn=null,Zt=!0,l=Hh(o,null,r,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(wi(),r===h){o=Nn(t,o,l);break e}ht(t,o,r,l)}o=o.child}return o;case 26:return Xl(t,o),t===null?(l=og(o.type,null,o.pendingProps,null))?o.memoizedState=l:we||(l=o.type,t=o.pendingProps,r=da(pe.current).createElement(l),r[ct]=o,r[Ct]=t,pt(r,l,t),lt(r),o.stateNode=r):o.memoizedState=og(o.type,t.memoizedProps,o.pendingProps,t.memoizedState),null;case 27:return $o(o),t===null&&we&&(r=o.stateNode=tg(o.type,o.pendingProps,pe.current),ft=o,Zt=!0,h=ze,ri(o.type)?(Oc=h,ze=jt(r.firstChild)):ze=h),ht(t,o,o.pendingProps.children,l),Xl(t,o),t===null&&(o.flags|=4194304),o.child;case 5:return t===null&&we&&((h=r=ze)&&(r=_E(r,o.type,o.pendingProps,Zt),r!==null?(o.stateNode=r,ft=o,ze=jt(r.firstChild),Zt=!1,h=!0):h=!1),h||Kn(o)),$o(o),h=o.type,g=o.pendingProps,S=t!==null?t.memoizedProps:null,r=g.children,Ic(h,g)?r=null:S!==null&&Ic(h,S)&&(o.flags|=32),o.memoizedState!==null&&(h=Nu(t,o,LT,null,null,l),Ls._currentValue=h),Xl(t,o),ht(t,o,r,l),o.child;case 6:return t===null&&we&&((t=l=ze)&&(l=SE(l,o.pendingProps,Zt),l!==null?(o.stateNode=l,ft=o,ze=null,t=!0):t=!1),t||Kn(o)),null;case 13:return Fp(t,o,l);case 4:return St(o,o.stateNode.containerInfo),r=o.pendingProps,t===null?o.child=Di(o,null,r,l):ht(t,o,r,l),o.child;case 11:return Op(t,o,o.type,o.pendingProps,l);case 7:return ht(t,o,o.pendingProps,l),o.child;case 8:return ht(t,o,o.pendingProps.children,l),o.child;case 12:return ht(t,o,o.pendingProps.children,l),o.child;case 10:return r=o.pendingProps,Xn(o,o.type,r.value),ht(t,o,r.children,l),o.child;case 9:return h=o.type._context,r=o.pendingProps.children,xi(o),h=dt(h),r=r(h),o.flags|=1,ht(t,o,r,l),o.child;case 14:return Gp(t,o,o.type,o.pendingProps,l);case 15:return Pp(t,o,o.type,o.pendingProps,l);case 19:return Jp(t,o,l);case 31:return VT(t,o,l);case 22:return Hp(t,o,l,o.pendingProps);case 24:return xi(o),r=dt(We),t===null?(h=_u(),h===null&&(h=Ve,g=yu(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=l),h=g),o.memoizedState={parent:r,cache:h},Tu(o),Xn(o,We,h)):((t.lanes&l)!==0&&(Eu(t,o),ps(o,null,null,l),hs()),h=t.memoizedState,g=o.memoizedState,h.parent!==r?(h={parent:r,cache:r},o.memoizedState=h,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=h),Xn(o,We,r)):(r=g.cache,Xn(o,We,r),r!==h.cache&&gu(o,[We],l,!0))),ht(t,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function In(t){t.flags|=4}function ic(t,o,l,r,h){if((o=(t.mode&32)!==0)&&(o=!1),o){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Sm())t.flags|=8192;else throw Mi=Ll,Su}else t.flags&=-16777217}function Kp(t,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ug(o))if(Sm())t.flags|=8192;else throw Mi=Ll,Su}function Zl(t,o){o!==null&&(t.flags|=4),t.flags&16384&&(o=t.tag!==22?Rd():536870912,t.lanes|=o,So|=o)}function Ss(t,o){if(!we)switch(t.tailMode){case"hidden":o=t.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var r=null;l!==null;)l.alternate!==null&&(r=l),l=l.sibling;r===null?o||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Fe(t){var o=t.alternate!==null&&t.alternate.child===t.child,l=0,r=0;if(o)for(var h=t.child;h!==null;)l|=h.lanes|h.childLanes,r|=h.subtreeFlags&65011712,r|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)l|=h.lanes|h.childLanes,r|=h.subtreeFlags,r|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=r,t.childLanes=l,o}function FT(t,o,l){var r=o.pendingProps;switch(fu(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(o),null;case 1:return Fe(o),null;case 3:return l=o.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),wn(We),Xe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(lo(o)?In(o):t===null||t.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,hu())),Fe(o),null;case 26:var h=o.type,g=o.memoizedState;return t===null?(In(o),g!==null?(Fe(o),Kp(o,g)):(Fe(o),ic(o,h,null,r,l))):g?g!==t.memoizedState?(In(o),Fe(o),Kp(o,g)):(Fe(o),o.flags&=-16777217):(t=t.memoizedProps,t!==r&&In(o),Fe(o),ic(o,h,t,r,l)),null;case 27:if(rl(o),l=pe.current,h=o.type,t!==null&&o.stateNode!=null)t.memoizedProps!==r&&In(o);else{if(!r){if(o.stateNode===null)throw Error(s(166));return Fe(o),null}t=te.current,lo(o)?Rh(o):(t=tg(h,r,l),o.stateNode=t,In(o))}return Fe(o),null;case 5:if(rl(o),h=o.type,t!==null&&o.stateNode!=null)t.memoizedProps!==r&&In(o);else{if(!r){if(o.stateNode===null)throw Error(s(166));return Fe(o),null}if(g=te.current,lo(o))Rh(o);else{var S=da(pe.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof r.is=="string"?S.createElement("select",{is:r.is}):S.createElement("select"),r.multiple?g.multiple=!0:r.size&&(g.size=r.size);break;default:g=typeof r.is=="string"?S.createElement(h,{is:r.is}):S.createElement(h)}}g[ct]=o,g[Ct]=r;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=g;e:switch(pt(g,h,r),h){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&In(o)}}return Fe(o),ic(o,o.type,t===null?null:t.memoizedProps,o.pendingProps,l),null;case 6:if(t&&o.stateNode!=null)t.memoizedProps!==r&&In(o);else{if(typeof r!="string"&&o.stateNode===null)throw Error(s(166));if(t=pe.current,lo(o)){if(t=o.stateNode,l=o.memoizedProps,r=null,h=ft,h!==null)switch(h.tag){case 27:case 5:r=h.memoizedProps}t[ct]=o,t=!!(t.nodeValue===l||r!==null&&r.suppressHydrationWarning===!0||Fm(t.nodeValue,l)),t||Kn(o,!0)}else t=da(t).createTextNode(r),t[ct]=o,o.stateNode=t}return Fe(o),null;case 31:if(l=o.memoizedState,t===null||t.memoizedState!==null){if(r=lo(o),l!==null){if(t===null){if(!r)throw Error(s(318));if(t=o.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[ct]=o}else wi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Fe(o),t=!1}else l=hu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return o.flags&256?(Ht(o),o):(Ht(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Fe(o),null;case 13:if(r=o.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=lo(o),r!==null&&r.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=o.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[ct]=o}else wi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Fe(o),h=!1}else h=hu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return o.flags&256?(Ht(o),o):(Ht(o),null)}return Ht(o),(o.flags&128)!==0?(o.lanes=l,o):(l=r!==null,t=t!==null&&t.memoizedState!==null,l&&(r=o.child,h=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(h=r.alternate.memoizedState.cachePool.pool),g=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(g=r.memoizedState.cachePool.pool),g!==h&&(r.flags|=2048)),l!==t&&l&&(o.child.flags|=8192),Zl(o,o.updateQueue),Fe(o),null);case 4:return Xe(),t===null&&bc(o.stateNode.containerInfo),Fe(o),null;case 10:return wn(o.type),Fe(o),null;case 19:if(F(Qe),r=o.memoizedState,r===null)return Fe(o),null;if(h=(o.flags&128)!==0,g=r.rendering,g===null)if(h)Ss(r,!1);else{if(Ke!==0||t!==null&&(t.flags&128)!==0)for(t=o.child;t!==null;){if(g=Hl(t),g!==null){for(o.flags|=128,Ss(r,!1),t=g.updateQueue,o.updateQueue=t,Zl(o,t),o.subtreeFlags=0,t=l,l=o.child;l!==null;)Eh(l,t),l=l.sibling;return j(Qe,Qe.current&1|2),we&&Cn(o,r.treeForkCount),o.child}t=t.sibling}r.tail!==null&&Dt()>na&&(o.flags|=128,h=!0,Ss(r,!1),o.lanes=4194304)}else{if(!h)if(t=Hl(g),t!==null){if(o.flags|=128,h=!0,t=t.updateQueue,o.updateQueue=t,Zl(o,t),Ss(r,!0),r.tail===null&&r.tailMode==="hidden"&&!g.alternate&&!we)return Fe(o),null}else 2*Dt()-r.renderingStartTime>na&&l!==536870912&&(o.flags|=128,h=!0,Ss(r,!1),o.lanes=4194304);r.isBackwards?(g.sibling=o.child,o.child=g):(t=r.last,t!==null?t.sibling=g:o.child=g,r.last=g)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Dt(),t.sibling=null,l=Qe.current,j(Qe,h?l&1|2:l&1),we&&Cn(o,r.treeForkCount),t):(Fe(o),null);case 22:case 23:return Ht(o),wu(),r=o.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(o.flags|=8192):r&&(o.flags|=8192),r?(l&536870912)!==0&&(o.flags&128)===0&&(Fe(o),o.subtreeFlags&6&&(o.flags|=8192)):Fe(o),l=o.updateQueue,l!==null&&Zl(o,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==l&&(o.flags|=2048),t!==null&&F(Ni),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),wn(We),Fe(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function $T(t,o){switch(fu(o),o.tag){case 1:return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 3:return wn(We),Xe(),t=o.flags,(t&65536)!==0&&(t&128)===0?(o.flags=t&-65537|128,o):null;case 26:case 27:case 5:return rl(o),null;case 31:if(o.memoizedState!==null){if(Ht(o),o.alternate===null)throw Error(s(340));wi()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 13:if(Ht(o),t=o.memoizedState,t!==null&&t.dehydrated!==null){if(o.alternate===null)throw Error(s(340));wi()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 19:return F(Qe),null;case 4:return Xe(),null;case 10:return wn(o.type),null;case 22:case 23:return Ht(o),wu(),t!==null&&F(Ni),t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 24:return wn(We),null;case 25:return null;default:return null}}function Xp(t,o){switch(fu(o),o.tag){case 3:wn(We),Xe();break;case 26:case 27:case 5:rl(o);break;case 4:Xe();break;case 31:o.memoizedState!==null&&Ht(o);break;case 13:Ht(o);break;case 19:F(Qe);break;case 10:wn(o.type);break;case 22:case 23:Ht(o),wu(),t!==null&&F(Ni);break;case 24:wn(We)}}function Ts(t,o){try{var l=o.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var h=r.next;l=h;do{if((l.tag&t)===t){r=void 0;var g=l.create,S=l.inst;r=g(),S.destroy=r}l=l.next}while(l!==h)}}catch(E){Pe(o,o.return,E)}}function ti(t,o,l){try{var r=o.updateQueue,h=r!==null?r.lastEffect:null;if(h!==null){var g=h.next;r=g;do{if((r.tag&t)===t){var S=r.inst,E=S.destroy;if(E!==void 0){S.destroy=void 0,h=o;var b=l,U=E;try{U()}catch(z){Pe(h,b,z)}}}r=r.next}while(r!==g)}}catch(z){Pe(o,o.return,z)}}function Qp(t){var o=t.updateQueue;if(o!==null){var l=t.stateNode;try{qh(o,l)}catch(r){Pe(t,t.return,r)}}}function Zp(t,o,l){l.props=Li(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(r){Pe(t,o,r)}}function Es(t,o){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof l=="function"?t.refCleanup=l(r):l.current=r}}catch(h){Pe(t,o,h)}}function mn(t,o){var l=t.ref,r=t.refCleanup;if(l!==null)if(typeof r=="function")try{r()}catch(h){Pe(t,o,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(h){Pe(t,o,h)}else l.current=null}function Wp(t){var o=t.type,l=t.memoizedProps,r=t.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break e;case"img":l.src?r.src=l.src:l.srcSet&&(r.srcset=l.srcSet)}}catch(h){Pe(t,t.return,h)}}function oc(t,o,l){try{var r=t.stateNode;hE(r,t.type,l,o),r[Ct]=o}catch(h){Pe(t,t.return,h)}}function jp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ri(t.type)||t.tag===4}function sc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ri(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lc(t,o,l){var r=t.tag;if(r===5||r===6)t=t.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(t),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Tn));else if(r!==4&&(r===27&&ri(t.type)&&(l=t.stateNode,o=null),t=t.child,t!==null))for(lc(t,o,l),t=t.sibling;t!==null;)lc(t,o,l),t=t.sibling}function Wl(t,o,l){var r=t.tag;if(r===5||r===6)t=t.stateNode,o?l.insertBefore(t,o):l.appendChild(t);else if(r!==4&&(r===27&&ri(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(Wl(t,o,l),t=t.sibling;t!==null;)Wl(t,o,l),t=t.sibling}function em(t){var o=t.stateNode,l=t.memoizedProps;try{for(var r=t.type,h=o.attributes;h.length;)o.removeAttributeNode(h[0]);pt(o,r,l),o[ct]=t,o[Ct]=l}catch(g){Pe(t,t.return,g)}}var Mn=!1,tt=!1,ac=!1,tm=typeof WeakSet=="function"?WeakSet:Set,at=null;function JT(t,o){if(t=t.containerInfo,xc=_a,t=hh(t),eu(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var r=l.getSelection&&l.getSelection();if(r&&r.rangeCount!==0){l=r.anchorNode;var h=r.anchorOffset,g=r.focusNode;r=r.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var S=0,E=-1,b=-1,U=0,z=0,Y=t,O=null;t:for(;;){for(var H;Y!==l||h!==0&&Y.nodeType!==3||(E=S+h),Y!==g||r!==0&&Y.nodeType!==3||(b=S+r),Y.nodeType===3&&(S+=Y.nodeValue.length),(H=Y.firstChild)!==null;)O=Y,Y=H;for(;;){if(Y===t)break t;if(O===l&&++U===h&&(E=S),O===g&&++z===r&&(b=S),(H=Y.nextSibling)!==null)break;Y=O,O=Y.parentNode}Y=H}l=E===-1||b===-1?null:{start:E,end:b}}else l=null}l=l||{start:0,end:0}}else l=null;for(Nc={focusedElem:t,selectionRange:l},_a=!1,at=o;at!==null;)if(o=at,t=o.child,(o.subtreeFlags&1028)!==0&&t!==null)t.return=o,at=t;else for(;at!==null;){switch(o=at,g=o.alternate,t=o.flags,o.tag){case 0:if((t&4)!==0&&(t=o.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)h=t[l],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,l=o,h=g.memoizedProps,g=g.memoizedState,r=l.stateNode;try{var ne=Li(l.type,h);t=r.getSnapshotBeforeUpdate(ne,g),r.__reactInternalSnapshotBeforeUpdate=t}catch(fe){Pe(l,l.return,fe)}}break;case 3:if((t&1024)!==0){if(t=o.stateNode.containerInfo,l=t.nodeType,l===9)Dc(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Dc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=o.sibling,t!==null){t.return=o.return,at=t;break}at=o.return}}function nm(t,o,l){var r=l.flags;switch(l.tag){case 0:case 11:case 15:Un(t,l),r&4&&Ts(5,l);break;case 1:if(Un(t,l),r&4)if(t=l.stateNode,o===null)try{t.componentDidMount()}catch(S){Pe(l,l.return,S)}else{var h=Li(l.type,o.memoizedProps);o=o.memoizedState;try{t.componentDidUpdate(h,o,t.__reactInternalSnapshotBeforeUpdate)}catch(S){Pe(l,l.return,S)}}r&64&&Qp(l),r&512&&Es(l,l.return);break;case 3:if(Un(t,l),r&64&&(t=l.updateQueue,t!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{qh(t,o)}catch(S){Pe(l,l.return,S)}}break;case 27:o===null&&r&4&&em(l);case 26:case 5:Un(t,l),o===null&&r&4&&Wp(l),r&512&&Es(l,l.return);break;case 12:Un(t,l);break;case 31:Un(t,l),r&4&&sm(t,l);break;case 13:Un(t,l),r&4&&lm(t,l),r&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=tE.bind(null,l),TE(t,l))));break;case 22:if(r=l.memoizedState!==null||Mn,!r){o=o!==null&&o.memoizedState!==null||tt,h=Mn;var g=tt;Mn=r,(tt=o)&&!g?Ln(t,l,(l.subtreeFlags&8772)!==0):Un(t,l),Mn=h,tt=g}break;case 30:break;default:Un(t,l)}}function im(t){var o=t.alternate;o!==null&&(t.alternate=null,im(o)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(o=t.stateNode,o!==null&&Pr(o)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var $e=null,wt=!1;function Dn(t,o,l){for(l=l.child;l!==null;)om(t,o,l),l=l.sibling}function om(t,o,l){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Jo,l)}catch{}switch(l.tag){case 26:tt||mn(l,o),Dn(t,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:tt||mn(l,o);var r=$e,h=wt;ri(l.type)&&($e=l.stateNode,wt=!1),Dn(t,o,l),Ms(l.stateNode),$e=r,wt=h;break;case 5:tt||mn(l,o);case 6:if(r=$e,h=wt,$e=null,Dn(t,o,l),$e=r,wt=h,$e!==null)if(wt)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(l.stateNode)}catch(g){Pe(l,o,g)}else try{$e.removeChild(l.stateNode)}catch(g){Pe(l,o,g)}break;case 18:$e!==null&&(wt?(t=$e,Qm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),xo(t)):Qm($e,l.stateNode));break;case 4:r=$e,h=wt,$e=l.stateNode.containerInfo,wt=!0,Dn(t,o,l),$e=r,wt=h;break;case 0:case 11:case 14:case 15:ti(2,l,o),tt||ti(4,l,o),Dn(t,o,l);break;case 1:tt||(mn(l,o),r=l.stateNode,typeof r.componentWillUnmount=="function"&&Zp(l,o,r)),Dn(t,o,l);break;case 21:Dn(t,o,l);break;case 22:tt=(r=tt)||l.memoizedState!==null,Dn(t,o,l),tt=r;break;default:Dn(t,o,l)}}function sm(t,o){if(o.memoizedState===null&&(t=o.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{xo(t)}catch(l){Pe(o,o.return,l)}}}function lm(t,o){if(o.memoizedState===null&&(t=o.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xo(t)}catch(l){Pe(o,o.return,l)}}function YT(t){switch(t.tag){case 31:case 13:case 19:var o=t.stateNode;return o===null&&(o=t.stateNode=new tm),o;case 22:return t=t.stateNode,o=t._retryCache,o===null&&(o=t._retryCache=new tm),o;default:throw Error(s(435,t.tag))}}function jl(t,o){var l=YT(t);o.forEach(function(r){if(!l.has(r)){l.add(r);var h=nE.bind(null,t,r);r.then(h,h)}})}function Rt(t,o){var l=o.deletions;if(l!==null)for(var r=0;r<l.length;r++){var h=l[r],g=t,S=o,E=S;e:for(;E!==null;){switch(E.tag){case 27:if(ri(E.type)){$e=E.stateNode,wt=!1;break e}break;case 5:$e=E.stateNode,wt=!1;break e;case 3:case 4:$e=E.stateNode.containerInfo,wt=!0;break e}E=E.return}if($e===null)throw Error(s(160));om(g,S,h),$e=null,wt=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)am(o,t),o=o.sibling}var an=null;function am(t,o){var l=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Rt(o,t),xt(t),r&4&&(ti(3,t,t.return),Ts(3,t),ti(5,t,t.return));break;case 1:Rt(o,t),xt(t),r&512&&(tt||l===null||mn(l,l.return)),r&64&&Mn&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?r:l.concat(r))));break;case 26:var h=an;if(Rt(o,t),xt(t),r&512&&(tt||l===null||mn(l,l.return)),r&4){var g=l!==null?l.memoizedState:null;if(r=t.memoizedState,l===null)if(r===null)if(t.stateNode===null){e:{r=t.type,l=t.memoizedProps,h=h.ownerDocument||h;t:switch(r){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Xo]||g[ct]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(r),h.head.insertBefore(g,h.querySelector("head > title"))),pt(g,r,l),g[ct]=t,lt(g),r=g;break e;case"link":var S=ag("link","href",h).get(r+(l.href||""));if(S){for(var E=0;E<S.length;E++)if(g=S[E],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(E,1);break t}}g=h.createElement(r),pt(g,r,l),h.head.appendChild(g);break;case"meta":if(S=ag("meta","content",h).get(r+(l.content||""))){for(E=0;E<S.length;E++)if(g=S[E],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(E,1);break t}}g=h.createElement(r),pt(g,r,l),h.head.appendChild(g);break;default:throw Error(s(468,r))}g[ct]=t,lt(g),r=g}t.stateNode=r}else rg(h,t.type,t.stateNode);else t.stateNode=lg(h,r,t.memoizedProps);else g!==r?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,r===null?rg(h,t.type,t.stateNode):lg(h,r,t.memoizedProps)):r===null&&t.stateNode!==null&&oc(t,t.memoizedProps,l.memoizedProps)}break;case 27:Rt(o,t),xt(t),r&512&&(tt||l===null||mn(l,l.return)),l!==null&&r&4&&oc(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Rt(o,t),xt(t),r&512&&(tt||l===null||mn(l,l.return)),t.flags&32){h=t.stateNode;try{Qi(h,"")}catch(ne){Pe(t,t.return,ne)}}r&4&&t.stateNode!=null&&(h=t.memoizedProps,oc(t,h,l!==null?l.memoizedProps:h)),r&1024&&(ac=!0);break;case 6:if(Rt(o,t),xt(t),r&4){if(t.stateNode===null)throw Error(s(162));r=t.memoizedProps,l=t.stateNode;try{l.nodeValue=r}catch(ne){Pe(t,t.return,ne)}}break;case 3:if(ma=null,h=an,an=ha(o.containerInfo),Rt(o,t),an=h,xt(t),r&4&&l!==null&&l.memoizedState.isDehydrated)try{xo(o.containerInfo)}catch(ne){Pe(t,t.return,ne)}ac&&(ac=!1,rm(t));break;case 4:r=an,an=ha(t.stateNode.containerInfo),Rt(o,t),xt(t),an=r;break;case 12:Rt(o,t),xt(t);break;case 31:Rt(o,t),xt(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,jl(t,r)));break;case 13:Rt(o,t),xt(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ta=Dt()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,jl(t,r)));break;case 22:h=t.memoizedState!==null;var b=l!==null&&l.memoizedState!==null,U=Mn,z=tt;if(Mn=U||h,tt=z||b,Rt(o,t),tt=z,Mn=U,xt(t),r&8192)e:for(o=t.stateNode,o._visibility=h?o._visibility&-2:o._visibility|1,h&&(l===null||b||Mn||tt||Oi(t)),l=null,o=t;;){if(o.tag===5||o.tag===26){if(l===null){b=l=o;try{if(g=b.stateNode,h)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{E=b.stateNode;var Y=b.memoizedProps.style,O=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(ne){Pe(b,b.return,ne)}}}else if(o.tag===6){if(l===null){b=o;try{b.stateNode.nodeValue=h?"":b.memoizedProps}catch(ne){Pe(b,b.return,ne)}}}else if(o.tag===18){if(l===null){b=o;try{var H=b.stateNode;h?Zm(H,!0):Zm(b.stateNode,!1)}catch(ne){Pe(b,b.return,ne)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===t)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}r&4&&(r=t.updateQueue,r!==null&&(l=r.retryQueue,l!==null&&(r.retryQueue=null,jl(t,l))));break;case 19:Rt(o,t),xt(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,jl(t,r)));break;case 30:break;case 21:break;default:Rt(o,t),xt(t)}}function xt(t){var o=t.flags;if(o&2){try{for(var l,r=t.return;r!==null;){if(jp(r)){l=r;break}r=r.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var h=l.stateNode,g=sc(t);Wl(t,g,h);break;case 5:var S=l.stateNode;l.flags&32&&(Qi(S,""),l.flags&=-33);var E=sc(t);Wl(t,E,S);break;case 3:case 4:var b=l.stateNode.containerInfo,U=sc(t);lc(t,U,b);break;default:throw Error(s(161))}}catch(z){Pe(t,t.return,z)}t.flags&=-3}o&4096&&(t.flags&=-4097)}function rm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var o=t;rm(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),t=t.sibling}}function Un(t,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)nm(t,o.alternate,o),o=o.sibling}function Oi(t){for(t=t.child;t!==null;){var o=t;switch(o.tag){case 0:case 11:case 14:case 15:ti(4,o,o.return),Oi(o);break;case 1:mn(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Zp(o,o.return,l),Oi(o);break;case 27:Ms(o.stateNode);case 26:case 5:mn(o,o.return),Oi(o);break;case 22:o.memoizedState===null&&Oi(o);break;case 30:Oi(o);break;default:Oi(o)}t=t.sibling}}function Ln(t,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var r=o.alternate,h=t,g=o,S=g.flags;switch(g.tag){case 0:case 11:case 15:Ln(h,g,l),Ts(4,g);break;case 1:if(Ln(h,g,l),r=g,h=r.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(U){Pe(r,r.return,U)}if(r=g,h=r.updateQueue,h!==null){var E=r.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)kh(b[h],E)}catch(U){Pe(r,r.return,U)}}l&&S&64&&Qp(g),Es(g,g.return);break;case 27:em(g);case 26:case 5:Ln(h,g,l),l&&r===null&&S&4&&Wp(g),Es(g,g.return);break;case 12:Ln(h,g,l);break;case 31:Ln(h,g,l),l&&S&4&&sm(h,g);break;case 13:Ln(h,g,l),l&&S&4&&lm(h,g);break;case 22:g.memoizedState===null&&Ln(h,g,l),Es(g,g.return);break;case 30:break;default:Ln(h,g,l)}o=o.sibling}}function rc(t,o){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(t=o.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&rs(l))}function uc(t,o){t=null,o.alternate!==null&&(t=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==t&&(o.refCount++,t!=null&&rs(t))}function rn(t,o,l,r){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)um(t,o,l,r),o=o.sibling}function um(t,o,l,r){var h=o.flags;switch(o.tag){case 0:case 11:case 15:rn(t,o,l,r),h&2048&&Ts(9,o);break;case 1:rn(t,o,l,r);break;case 3:rn(t,o,l,r),h&2048&&(t=null,o.alternate!==null&&(t=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==t&&(o.refCount++,t!=null&&rs(t)));break;case 12:if(h&2048){rn(t,o,l,r),t=o.stateNode;try{var g=o.memoizedProps,S=g.id,E=g.onPostCommit;typeof E=="function"&&E(S,o.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(b){Pe(o,o.return,b)}}else rn(t,o,l,r);break;case 31:rn(t,o,l,r);break;case 13:rn(t,o,l,r);break;case 23:break;case 22:g=o.stateNode,S=o.alternate,o.memoizedState!==null?g._visibility&2?rn(t,o,l,r):As(t,o):g._visibility&2?rn(t,o,l,r):(g._visibility|=2,yo(t,o,l,r,(o.subtreeFlags&10256)!==0||!1)),h&2048&&rc(S,o);break;case 24:rn(t,o,l,r),h&2048&&uc(o.alternate,o);break;default:rn(t,o,l,r)}}function yo(t,o,l,r,h){for(h=h&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var g=t,S=o,E=l,b=r,U=S.flags;switch(S.tag){case 0:case 11:case 15:yo(g,S,E,b,h),Ts(8,S);break;case 23:break;case 22:var z=S.stateNode;S.memoizedState!==null?z._visibility&2?yo(g,S,E,b,h):As(g,S):(z._visibility|=2,yo(g,S,E,b,h)),h&&U&2048&&rc(S.alternate,S);break;case 24:yo(g,S,E,b,h),h&&U&2048&&uc(S.alternate,S);break;default:yo(g,S,E,b,h)}o=o.sibling}}function As(t,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=t,r=o,h=r.flags;switch(r.tag){case 22:As(l,r),h&2048&&rc(r.alternate,r);break;case 24:As(l,r),h&2048&&uc(r.alternate,r);break;default:As(l,r)}o=o.sibling}}var Cs=8192;function vo(t,o,l){if(t.subtreeFlags&Cs)for(t=t.child;t!==null;)cm(t,o,l),t=t.sibling}function cm(t,o,l){switch(t.tag){case 26:vo(t,o,l),t.flags&Cs&&t.memoizedState!==null&&UE(l,an,t.memoizedState,t.memoizedProps);break;case 5:vo(t,o,l);break;case 3:case 4:var r=an;an=ha(t.stateNode.containerInfo),vo(t,o,l),an=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Cs,Cs=16777216,vo(t,o,l),Cs=r):vo(t,o,l));break;default:vo(t,o,l)}}function fm(t){var o=t.alternate;if(o!==null&&(t=o.child,t!==null)){o.child=null;do o=t.sibling,t.sibling=null,t=o;while(t!==null)}}function bs(t){var o=t.deletions;if((t.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var r=o[l];at=r,hm(r,t)}fm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dm(t),t=t.sibling}function dm(t){switch(t.tag){case 0:case 11:case 15:bs(t),t.flags&2048&&ti(9,t,t.return);break;case 3:bs(t);break;case 12:bs(t);break;case 22:var o=t.stateNode;t.memoizedState!==null&&o._visibility&2&&(t.return===null||t.return.tag!==13)?(o._visibility&=-3,ea(t)):bs(t);break;default:bs(t)}}function ea(t){var o=t.deletions;if((t.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var r=o[l];at=r,hm(r,t)}fm(t)}for(t=t.child;t!==null;){switch(o=t,o.tag){case 0:case 11:case 15:ti(8,o,o.return),ea(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,ea(o));break;default:ea(o)}t=t.sibling}}function hm(t,o){for(;at!==null;){var l=at;switch(l.tag){case 0:case 11:case 15:ti(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var r=l.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:rs(l.memoizedState.cache)}if(r=l.child,r!==null)r.return=l,at=r;else e:for(l=t;at!==null;){r=at;var h=r.sibling,g=r.return;if(im(r),r===l){at=null;break e}if(h!==null){h.return=g,at=h;break e}at=g}}}var KT={getCacheForType:function(t){var o=dt(We),l=o.data.get(t);return l===void 0&&(l=t(),o.data.set(t,l)),l},cacheSignal:function(){return dt(We).controller.signal}},XT=typeof WeakMap=="function"?WeakMap:Map,De=0,Ve=null,Ee=null,Ce=0,Ge=0,kt=null,ni=!1,_o=!1,cc=!1,On=0,Ke=0,ii=0,Gi=0,fc=0,qt=0,So=0,ws=null,Nt=null,dc=!1,ta=0,pm=0,na=1/0,ia=null,oi=null,it=0,si=null,To=null,Gn=0,hc=0,pc=null,mm=null,Rs=0,mc=null;function Bt(){return(De&2)!==0&&Ce!==0?Ce&-Ce:V.T!==null?Tc():Md()}function gm(){if(qt===0)if((Ce&536870912)===0||we){var t=fl;fl<<=1,(fl&3932160)===0&&(fl=262144),qt=t}else qt=536870912;return t=Pt.current,t!==null&&(t.flags|=32),qt}function It(t,o,l){(t===Ve&&(Ge===2||Ge===9)||t.cancelPendingCommit!==null)&&(Eo(t,0),li(t,Ce,qt,!1)),Ko(t,l),((De&2)===0||t!==Ve)&&(t===Ve&&((De&2)===0&&(Gi|=l),Ke===4&&li(t,Ce,qt,!1)),gn(t))}function ym(t,o,l){if((De&6)!==0)throw Error(s(327));var r=!l&&(o&127)===0&&(o&t.expiredLanes)===0||Yo(t,o),h=r?WT(t,o):yc(t,o,!0),g=r;do{if(h===0){_o&&!r&&li(t,o,0,!1);break}else{if(l=t.current.alternate,g&&!QT(l)){h=yc(t,o,!1),g=!1;continue}if(h===2){if(g=o,t.errorRecoveryDisabledLanes&g)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var E=t;h=ws;var b=E.current.memoizedState.isDehydrated;if(b&&(Eo(E,S).flags|=256),S=yc(E,S,!1),S!==2){if(cc&&!b){E.errorRecoveryDisabledLanes|=g,Gi|=g,h=4;break e}g=Nt,Nt=h,g!==null&&(Nt===null?Nt=g:Nt.push.apply(Nt,g))}h=S}if(g=!1,h!==2)continue}}if(h===1){Eo(t,0),li(t,o,0,!0);break}e:{switch(r=t,g=h,g){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:li(r,o,qt,!ni);break e;case 2:Nt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(h=ta+300-Dt(),10<h)){if(li(r,o,qt,!ni),hl(r,0,!0)!==0)break e;Gn=o,r.timeoutHandle=Km(vm.bind(null,r,l,Nt,ia,dc,o,qt,Gi,So,ni,g,"Throttled",-0,0),h);break e}vm(r,l,Nt,ia,dc,o,qt,Gi,So,ni,g,null,-0,0)}}break}while(!0);gn(t)}function vm(t,o,l,r,h,g,S,E,b,U,z,Y,O,H){if(t.timeoutHandle=-1,Y=o.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tn},cm(o,g,Y);var ne=(g&62914560)===g?ta-Dt():(g&4194048)===g?pm-Dt():0;if(ne=LE(Y,ne),ne!==null){Gn=g,t.cancelPendingCommit=ne(wm.bind(null,t,o,g,l,r,h,S,E,b,z,Y,null,O,H)),li(t,g,S,!U);return}}wm(t,o,g,l,r,h,S,E,b)}function QT(t){for(var o=t;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var r=0;r<l.length;r++){var h=l[r],g=h.getSnapshot;h=h.value;try{if(!Ot(g(),h))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function li(t,o,l,r){o&=~fc,o&=~Gi,t.suspendedLanes|=o,t.pingedLanes&=~o,r&&(t.warmLanes|=o),r=t.expirationTimes;for(var h=o;0<h;){var g=31-Lt(h),S=1<<g;r[g]=-1,h&=~S}l!==0&&xd(t,l,o)}function oa(){return(De&6)===0?(xs(0),!1):!0}function gc(){if(Ee!==null){if(Ge===0)var t=Ee.return;else t=Ee,bn=Ri=null,Du(t),fo=null,cs=0,t=Ee;for(;t!==null;)Xp(t.alternate,t),t=t.return;Ee=null}}function Eo(t,o){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,gE(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Gn=0,gc(),Ve=t,Ee=l=An(t.current,null),Ce=o,Ge=0,kt=null,ni=!1,_o=Yo(t,o),cc=!1,So=qt=fc=Gi=ii=Ke=0,Nt=ws=null,dc=!1,(o&8)!==0&&(o|=o&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=o;0<r;){var h=31-Lt(r),g=1<<h;o|=t[h],r&=~g}return On=o,bl(),l}function _m(t,o){ye=null,V.H=vs,o===co||o===Ul?(o=Oh(),Ge=3):o===Su?(o=Oh(),Ge=4):Ge=o===Ku?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,kt=o,Ee===null&&(Ke=1,Yl(t,Kt(o,t.current)))}function Sm(){var t=Pt.current;return t===null?!0:(Ce&4194048)===Ce?Wt===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?t===Wt:!1}function Tm(){var t=V.H;return V.H=vs,t===null?vs:t}function Em(){var t=V.A;return V.A=KT,t}function sa(){Ke=4,ni||(Ce&4194048)!==Ce&&Pt.current!==null||(_o=!0),(ii&134217727)===0&&(Gi&134217727)===0||Ve===null||li(Ve,Ce,qt,!1)}function yc(t,o,l){var r=De;De|=2;var h=Tm(),g=Em();(Ve!==t||Ce!==o)&&(ia=null,Eo(t,o)),o=!1;var S=Ke;e:do try{if(Ge!==0&&Ee!==null){var E=Ee,b=kt;switch(Ge){case 8:gc(),S=6;break e;case 3:case 2:case 9:case 6:Pt.current===null&&(o=!0);var U=Ge;if(Ge=0,kt=null,Ao(t,E,b,U),l&&_o){S=0;break e}break;default:U=Ge,Ge=0,kt=null,Ao(t,E,b,U)}}ZT(),S=Ke;break}catch(z){_m(t,z)}while(!0);return o&&t.shellSuspendCounter++,bn=Ri=null,De=r,V.H=h,V.A=g,Ee===null&&(Ve=null,Ce=0,bl()),S}function ZT(){for(;Ee!==null;)Am(Ee)}function WT(t,o){var l=De;De|=2;var r=Tm(),h=Em();Ve!==t||Ce!==o?(ia=null,na=Dt()+500,Eo(t,o)):_o=Yo(t,o);e:do try{if(Ge!==0&&Ee!==null){o=Ee;var g=kt;t:switch(Ge){case 1:Ge=0,kt=null,Ao(t,o,g,1);break;case 2:case 9:if(Uh(g)){Ge=0,kt=null,Cm(o);break}o=function(){Ge!==2&&Ge!==9||Ve!==t||(Ge=7),gn(t)},g.then(o,o);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:Uh(g)?(Ge=0,kt=null,Cm(o)):(Ge=0,kt=null,Ao(t,o,g,7));break;case 5:var S=null;switch(Ee.tag){case 26:S=Ee.memoizedState;case 5:case 27:var E=Ee;if(S?ug(S):E.stateNode.complete){Ge=0,kt=null;var b=E.sibling;if(b!==null)Ee=b;else{var U=E.return;U!==null?(Ee=U,la(U)):Ee=null}break t}}Ge=0,kt=null,Ao(t,o,g,5);break;case 6:Ge=0,kt=null,Ao(t,o,g,6);break;case 8:gc(),Ke=6;break e;default:throw Error(s(462))}}jT();break}catch(z){_m(t,z)}while(!0);return bn=Ri=null,V.H=r,V.A=h,De=l,Ee!==null?0:(Ve=null,Ce=0,bl(),Ke)}function jT(){for(;Ee!==null&&!ES();)Am(Ee)}function Am(t){var o=Yp(t.alternate,t,On);t.memoizedProps=t.pendingProps,o===null?la(t):Ee=o}function Cm(t){var o=t,l=o.alternate;switch(o.tag){case 15:case 0:o=Bp(l,o,o.pendingProps,o.type,void 0,Ce);break;case 11:o=Bp(l,o,o.pendingProps,o.type.render,o.ref,Ce);break;case 5:Du(o);default:Xp(l,o),o=Ee=Eh(o,On),o=Yp(l,o,On)}t.memoizedProps=t.pendingProps,o===null?la(t):Ee=o}function Ao(t,o,l,r){bn=Ri=null,Du(o),fo=null,cs=0;var h=o.return;try{if(BT(t,h,o,l,Ce)){Ke=1,Yl(t,Kt(l,t.current)),Ee=null;return}}catch(g){if(h!==null)throw Ee=h,g;Ke=1,Yl(t,Kt(l,t.current)),Ee=null;return}o.flags&32768?(we||r===1?t=!0:_o||(Ce&536870912)!==0?t=!1:(ni=t=!0,(r===2||r===9||r===3||r===6)&&(r=Pt.current,r!==null&&r.tag===13&&(r.flags|=16384))),bm(o,t)):la(o)}function la(t){var o=t;do{if((o.flags&32768)!==0){bm(o,ni);return}t=o.return;var l=FT(o.alternate,o,On);if(l!==null){Ee=l;return}if(o=o.sibling,o!==null){Ee=o;return}Ee=o=t}while(o!==null);Ke===0&&(Ke=5)}function bm(t,o){do{var l=$T(t.alternate,t);if(l!==null){l.flags&=32767,Ee=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(t=t.sibling,t!==null)){Ee=t;return}Ee=t=l}while(t!==null);Ke=6,Ee=null}function wm(t,o,l,r,h,g,S,E,b){t.cancelPendingCommit=null;do aa();while(it!==0);if((De&6)!==0)throw Error(s(327));if(o!==null){if(o===t.current)throw Error(s(177));if(g=o.lanes|o.childLanes,g|=su,DS(t,l,g,S,E,b),t===Ve&&(Ee=Ve=null,Ce=0),To=o,si=t,Gn=l,hc=g,pc=h,mm=r,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,iE(ul,function(){return Mm(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||r){r=V.T,V.T=null,h=Z.p,Z.p=2,S=De,De|=4;try{JT(t,o,l)}finally{De=S,Z.p=h,V.T=r}}it=1,Rm(),xm(),Nm()}}function Rm(){if(it===1){it=0;var t=si,o=To,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=V.T,V.T=null;var r=Z.p;Z.p=2;var h=De;De|=4;try{am(o,t);var g=Nc,S=hh(t.containerInfo),E=g.focusedElem,b=g.selectionRange;if(S!==E&&E&&E.ownerDocument&&dh(E.ownerDocument.documentElement,E)){if(b!==null&&eu(E)){var U=b.start,z=b.end;if(z===void 0&&(z=U),"selectionStart"in E)E.selectionStart=U,E.selectionEnd=Math.min(z,E.value.length);else{var Y=E.ownerDocument||document,O=Y&&Y.defaultView||window;if(O.getSelection){var H=O.getSelection(),ne=E.textContent.length,fe=Math.min(b.start,ne),Be=b.end===void 0?fe:Math.min(b.end,ne);!H.extend&&fe>Be&&(S=Be,Be=fe,fe=S);var M=fh(E,fe),x=fh(E,Be);if(M&&x&&(H.rangeCount!==1||H.anchorNode!==M.node||H.anchorOffset!==M.offset||H.focusNode!==x.node||H.focusOffset!==x.offset)){var D=Y.createRange();D.setStart(M.node,M.offset),H.removeAllRanges(),fe>Be?(H.addRange(D),H.extend(x.node,x.offset)):(D.setEnd(x.node,x.offset),H.addRange(D))}}}}for(Y=[],H=E;H=H.parentNode;)H.nodeType===1&&Y.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var $=Y[E];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}_a=!!xc,Nc=xc=null}finally{De=h,Z.p=r,V.T=l}}t.current=o,it=2}}function xm(){if(it===2){it=0;var t=si,o=To,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=V.T,V.T=null;var r=Z.p;Z.p=2;var h=De;De|=4;try{nm(t,o.alternate,o)}finally{De=h,Z.p=r,V.T=l}}it=3}}function Nm(){if(it===4||it===3){it=0,AS();var t=si,o=To,l=Gn,r=mm;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?it=5:(it=0,To=si=null,Im(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(oi=null),Or(l),o=o.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Jo,o,void 0,(o.current.flags&128)===128)}catch{}if(r!==null){o=V.T,h=Z.p,Z.p=2,V.T=null;try{for(var g=t.onRecoverableError,S=0;S<r.length;S++){var E=r[S];g(E.value,{componentStack:E.stack})}}finally{V.T=o,Z.p=h}}(Gn&3)!==0&&aa(),gn(t),h=t.pendingLanes,(l&261930)!==0&&(h&42)!==0?t===mc?Rs++:(Rs=0,mc=t):Rs=0,xs(0)}}function Im(t,o){(t.pooledCacheLanes&=o)===0&&(o=t.pooledCache,o!=null&&(t.pooledCache=null,rs(o)))}function aa(){return Rm(),xm(),Nm(),Mm()}function Mm(){if(it!==5)return!1;var t=si,o=hc;hc=0;var l=Or(Gn),r=V.T,h=Z.p;try{Z.p=32>l?32:l,V.T=null,l=pc,pc=null;var g=si,S=Gn;if(it=0,To=si=null,Gn=0,(De&6)!==0)throw Error(s(331));var E=De;if(De|=4,dm(g.current),um(g,g.current,S,l),De=E,xs(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Jo,g)}catch{}return!0}finally{Z.p=h,V.T=r,Im(t,o)}}function Dm(t,o,l){o=Kt(l,o),o=Yu(t.stateNode,o,2),t=Wn(t,o,2),t!==null&&(Ko(t,2),gn(t))}function Pe(t,o,l){if(t.tag===3)Dm(t,t,l);else for(;o!==null;){if(o.tag===3){Dm(o,t,l);break}else if(o.tag===1){var r=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oi===null||!oi.has(r))){t=Kt(l,t),l=Up(2),r=Wn(o,l,2),r!==null&&(Lp(l,r,o,t),Ko(r,2),gn(r));break}}o=o.return}}function vc(t,o,l){var r=t.pingCache;if(r===null){r=t.pingCache=new XT;var h=new Set;r.set(o,h)}else h=r.get(o),h===void 0&&(h=new Set,r.set(o,h));h.has(l)||(cc=!0,h.add(l),t=eE.bind(null,t,o,l),o.then(t,t))}function eE(t,o,l){var r=t.pingCache;r!==null&&r.delete(o),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,Ve===t&&(Ce&l)===l&&(Ke===4||Ke===3&&(Ce&62914560)===Ce&&300>Dt()-ta?(De&2)===0&&Eo(t,0):fc|=l,So===Ce&&(So=0)),gn(t)}function Um(t,o){o===0&&(o=Rd()),t=Ci(t,o),t!==null&&(Ko(t,o),gn(t))}function tE(t){var o=t.memoizedState,l=0;o!==null&&(l=o.retryLane),Um(t,l)}function nE(t,o){var l=0;switch(t.tag){case 31:case 13:var r=t.stateNode,h=t.memoizedState;h!==null&&(l=h.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(s(314))}r!==null&&r.delete(o),Um(t,l)}function iE(t,o){return Mr(t,o)}var ra=null,Co=null,_c=!1,ua=!1,Sc=!1,ai=0;function gn(t){t!==Co&&t.next===null&&(Co===null?ra=Co=t:Co=Co.next=t),ua=!0,_c||(_c=!0,sE())}function xs(t,o){if(!Sc&&ua){Sc=!0;do for(var l=!1,r=ra;r!==null;){if(t!==0){var h=r.pendingLanes;if(h===0)var g=0;else{var S=r.suspendedLanes,E=r.pingedLanes;g=(1<<31-Lt(42|t)+1)-1,g&=h&~(S&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Pm(r,g))}else g=Ce,g=hl(r,r===Ve?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(g&3)===0||Yo(r,g)||(l=!0,Pm(r,g));r=r.next}while(l);Sc=!1}}function oE(){Lm()}function Lm(){ua=_c=!1;var t=0;ai!==0&&mE()&&(t=ai);for(var o=Dt(),l=null,r=ra;r!==null;){var h=r.next,g=Om(r,o);g===0?(r.next=null,l===null?ra=h:l.next=h,h===null&&(Co=l)):(l=r,(t!==0||(g&3)!==0)&&(ua=!0)),r=h}it!==0&&it!==5||xs(t),ai!==0&&(ai=0)}function Om(t,o){for(var l=t.suspendedLanes,r=t.pingedLanes,h=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var S=31-Lt(g),E=1<<S,b=h[S];b===-1?((E&l)===0||(E&r)!==0)&&(h[S]=MS(E,o)):b<=o&&(t.expiredLanes|=E),g&=~E}if(o=Ve,l=Ce,l=hl(t,t===o?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,l===0||t===o&&(Ge===2||Ge===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&Dr(r),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Yo(t,l)){if(o=l&-l,o===t.callbackPriority)return o;switch(r!==null&&Dr(r),Or(l)){case 2:case 8:l=bd;break;case 32:l=ul;break;case 268435456:l=wd;break;default:l=ul}return r=Gm.bind(null,t),l=Mr(l,r),t.callbackPriority=o,t.callbackNode=l,o}return r!==null&&r!==null&&Dr(r),t.callbackPriority=2,t.callbackNode=null,2}function Gm(t,o){if(it!==0&&it!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(aa()&&t.callbackNode!==l)return null;var r=Ce;return r=hl(t,t===Ve?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(ym(t,r,o),Om(t,Dt()),t.callbackNode!=null&&t.callbackNode===l?Gm.bind(null,t):null)}function Pm(t,o){if(aa())return null;ym(t,o,!0)}function sE(){yE(function(){(De&6)!==0?Mr(Cd,oE):Lm()})}function Tc(){if(ai===0){var t=ro;t===0&&(t=cl,cl<<=1,(cl&261888)===0&&(cl=256)),ai=t}return ai}function Hm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yl(""+t)}function km(t,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,t.id&&l.setAttribute("form",t.id),o.parentNode.insertBefore(l,o),t=new FormData(t),l.parentNode.removeChild(l),t}function lE(t,o,l,r,h){if(o==="submit"&&l&&l.stateNode===h){var g=Hm((h[Ct]||null).action),S=r.submitter;S&&(o=(o=S[Ct]||null)?Hm(o.formAction):S.getAttribute("formAction"),o!==null&&(g=o,S=null));var E=new Tl("action","action",null,r,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(ai!==0){var b=S?km(h,S):new FormData(h);Bu(l,{pending:!0,data:b,method:h.method,action:g},null,b)}}else typeof g=="function"&&(E.preventDefault(),b=S?km(h,S):new FormData(h),Bu(l,{pending:!0,data:b,method:h.method,action:g},g,b))},currentTarget:h}]})}}for(var Ec=0;Ec<ou.length;Ec++){var Ac=ou[Ec],aE=Ac.toLowerCase(),rE=Ac[0].toUpperCase()+Ac.slice(1);ln(aE,"on"+rE)}ln(gh,"onAnimationEnd"),ln(yh,"onAnimationIteration"),ln(vh,"onAnimationStart"),ln("dblclick","onDoubleClick"),ln("focusin","onFocus"),ln("focusout","onBlur"),ln(CT,"onTransitionRun"),ln(bT,"onTransitionStart"),ln(wT,"onTransitionCancel"),ln(_h,"onTransitionEnd"),Ki("onMouseEnter",["mouseout","mouseover"]),Ki("onMouseLeave",["mouseout","mouseover"]),Ki("onPointerEnter",["pointerout","pointerover"]),Ki("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ns));function qm(t,o){o=(o&4)!==0;for(var l=0;l<t.length;l++){var r=t[l],h=r.event;r=r.listeners;e:{var g=void 0;if(o)for(var S=r.length-1;0<=S;S--){var E=r[S],b=E.instance,U=E.currentTarget;if(E=E.listener,b!==g&&h.isPropagationStopped())break e;g=E,h.currentTarget=U;try{g(h)}catch(z){Cl(z)}h.currentTarget=null,g=b}else for(S=0;S<r.length;S++){if(E=r[S],b=E.instance,U=E.currentTarget,E=E.listener,b!==g&&h.isPropagationStopped())break e;g=E,h.currentTarget=U;try{g(h)}catch(z){Cl(z)}h.currentTarget=null,g=b}}}}function Ae(t,o){var l=o[Gr];l===void 0&&(l=o[Gr]=new Set);var r=t+"__bubble";l.has(r)||(Bm(o,t,2,!1),l.add(r))}function Cc(t,o,l){var r=0;o&&(r|=4),Bm(l,t,r,o)}var ca="_reactListening"+Math.random().toString(36).slice(2);function bc(t){if(!t[ca]){t[ca]=!0,Ld.forEach(function(l){l!=="selectionchange"&&(uE.has(l)||Cc(l,!1,t),Cc(l,!0,t))});var o=t.nodeType===9?t:t.ownerDocument;o===null||o[ca]||(o[ca]=!0,Cc("selectionchange",!1,o))}}function Bm(t,o,l,r){switch(gg(o)){case 2:var h=PE;break;case 8:h=HE;break;default:h=qc}l=h.bind(null,o,l,t),h=void 0,!$r||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(h=!0),r?h!==void 0?t.addEventListener(o,l,{capture:!0,passive:h}):t.addEventListener(o,l,!0):h!==void 0?t.addEventListener(o,l,{passive:h}):t.addEventListener(o,l,!1)}function wc(t,o,l,r,h){var g=r;if((o&1)===0&&(o&2)===0&&r!==null)e:for(;;){if(r===null)return;var S=r.tag;if(S===3||S===4){var E=r.stateNode.containerInfo;if(E===h)break;if(S===4)for(S=r.return;S!==null;){var b=S.tag;if((b===3||b===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;E!==null;){if(S=$i(E),S===null)return;if(b=S.tag,b===5||b===6||b===26||b===27){r=g=S;continue e}E=E.parentNode}}r=r.return}Jd(function(){var U=g,z=zr(l),Y=[];e:{var O=Sh.get(t);if(O!==void 0){var H=Tl,ne=t;switch(t){case"keypress":if(_l(l)===0)break e;case"keydown":case"keyup":H=nT;break;case"focusin":ne="focus",H=Xr;break;case"focusout":ne="blur",H=Xr;break;case"beforeblur":case"afterblur":H=Xr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=FS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=sT;break;case gh:case yh:case vh:H=YS;break;case _h:H=aT;break;case"scroll":case"scrollend":H=VS;break;case"wheel":H=uT;break;case"copy":case"cut":case"paste":H=XS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Zd;break;case"toggle":case"beforetoggle":H=fT}var fe=(o&4)!==0,Be=!fe&&(t==="scroll"||t==="scrollend"),M=fe?O!==null?O+"Capture":null:O;fe=[];for(var x=U,D;x!==null;){var $=x;if(D=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||D===null||M===null||($=Zo(x,M),$!=null&&fe.push(Is(x,$,D))),Be)break;x=x.return}0<fe.length&&(O=new H(O,ne,null,l,z),Y.push({event:O,listeners:fe}))}}if((o&7)===0){e:{if(O=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",O&&l!==Vr&&(ne=l.relatedTarget||l.fromElement)&&($i(ne)||ne[Fi]))break e;if((H||O)&&(O=z.window===z?z:(O=z.ownerDocument)?O.defaultView||O.parentWindow:window,H?(ne=l.relatedTarget||l.toElement,H=U,ne=ne?$i(ne):null,ne!==null&&(Be=u(ne),fe=ne.tag,ne!==Be||fe!==5&&fe!==27&&fe!==6)&&(ne=null)):(H=null,ne=U),H!==ne)){if(fe=Xd,$="onMouseLeave",M="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(fe=Zd,$="onPointerLeave",M="onPointerEnter",x="pointer"),Be=H==null?O:Qo(H),D=ne==null?O:Qo(ne),O=new fe($,x+"leave",H,l,z),O.target=Be,O.relatedTarget=D,$=null,$i(z)===U&&(fe=new fe(M,x+"enter",ne,l,z),fe.target=D,fe.relatedTarget=Be,$=fe),Be=$,H&&ne)t:{for(fe=cE,M=H,x=ne,D=0,$=M;$;$=fe($))D++;$=0;for(var re=x;re;re=fe(re))$++;for(;0<D-$;)M=fe(M),D--;for(;0<$-D;)x=fe(x),$--;for(;D--;){if(M===x||x!==null&&M===x.alternate){fe=M;break t}M=fe(M),x=fe(x)}fe=null}else fe=null;H!==null&&Vm(Y,O,H,fe,!1),ne!==null&&Be!==null&&Vm(Y,Be,ne,fe,!0)}}e:{if(O=U?Qo(U):window,H=O.nodeName&&O.nodeName.toLowerCase(),H==="select"||H==="input"&&O.type==="file")var Ne=sh;else if(ih(O))if(lh)Ne=TT;else{Ne=_T;var le=vT}else H=O.nodeName,!H||H.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?U&&Br(U.elementType)&&(Ne=sh):Ne=ST;if(Ne&&(Ne=Ne(t,U))){oh(Y,Ne,l,z);break e}le&&le(t,O,U),t==="focusout"&&U&&O.type==="number"&&U.memoizedProps.value!=null&&qr(O,"number",O.value)}switch(le=U?Qo(U):window,t){case"focusin":(ih(le)||le.contentEditable==="true")&&(eo=le,tu=U,ss=null);break;case"focusout":ss=tu=eo=null;break;case"mousedown":nu=!0;break;case"contextmenu":case"mouseup":case"dragend":nu=!1,ph(Y,l,z);break;case"selectionchange":if(AT)break;case"keydown":case"keyup":ph(Y,l,z)}var ve;if(Zr)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else ji?th(t,l)&&(be="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(be="onCompositionStart");be&&(Wd&&l.locale!=="ko"&&(ji||be!=="onCompositionStart"?be==="onCompositionEnd"&&ji&&(ve=Yd()):($n=z,Jr="value"in $n?$n.value:$n.textContent,ji=!0)),le=fa(U,be),0<le.length&&(be=new Qd(be,t,null,l,z),Y.push({event:be,listeners:le}),ve?be.data=ve:(ve=nh(l),ve!==null&&(be.data=ve)))),(ve=hT?pT(t,l):mT(t,l))&&(be=fa(U,"onBeforeInput"),0<be.length&&(le=new Qd("onBeforeInput","beforeinput",null,l,z),Y.push({event:le,listeners:be}),le.data=ve)),lE(Y,t,U,l,z)}qm(Y,o)})}function Is(t,o,l){return{instance:t,listener:o,currentTarget:l}}function fa(t,o){for(var l=o+"Capture",r=[];t!==null;){var h=t,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Zo(t,l),h!=null&&r.unshift(Is(t,h,g)),h=Zo(t,o),h!=null&&r.push(Is(t,h,g))),t.tag===3)return r;t=t.return}return[]}function cE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Vm(t,o,l,r,h){for(var g=o._reactName,S=[];l!==null&&l!==r;){var E=l,b=E.alternate,U=E.stateNode;if(E=E.tag,b!==null&&b===r)break;E!==5&&E!==26&&E!==27||U===null||(b=U,h?(U=Zo(l,g),U!=null&&S.unshift(Is(l,U,b))):h||(U=Zo(l,g),U!=null&&S.push(Is(l,U,b)))),l=l.return}S.length!==0&&t.push({event:o,listeners:S})}var fE=/\r\n?/g,dE=/\u0000|\uFFFD/g;function zm(t){return(typeof t=="string"?t:""+t).replace(fE,`
`).replace(dE,"")}function Fm(t,o){return o=zm(o),zm(t)===o}function qe(t,o,l,r,h,g){switch(l){case"children":typeof r=="string"?o==="body"||o==="textarea"&&r===""||Qi(t,r):(typeof r=="number"||typeof r=="bigint")&&o!=="body"&&Qi(t,""+r);break;case"className":ml(t,"class",r);break;case"tabIndex":ml(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ml(t,l,r);break;case"style":Fd(t,r,g);break;case"data":if(o!=="object"){ml(t,"data",r);break}case"src":case"href":if(r===""&&(o!=="a"||l!=="href")){t.removeAttribute(l);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(l);break}r=yl(""+r),t.setAttribute(l,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(o!=="input"&&qe(t,o,"name",h.name,h,null),qe(t,o,"formEncType",h.formEncType,h,null),qe(t,o,"formMethod",h.formMethod,h,null),qe(t,o,"formTarget",h.formTarget,h,null)):(qe(t,o,"encType",h.encType,h,null),qe(t,o,"method",h.method,h,null),qe(t,o,"target",h.target,h,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(l);break}r=yl(""+r),t.setAttribute(l,r);break;case"onClick":r!=null&&(t.onclick=Tn);break;case"onScroll":r!=null&&Ae("scroll",t);break;case"onScrollEnd":r!=null&&Ae("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(s(61));if(l=r.__html,l!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}l=yl(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,""+r):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":r===!0?t.setAttribute(l,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(l,r):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(l,r):t.removeAttribute(l);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(l):t.setAttribute(l,r);break;case"popover":Ae("beforetoggle",t),Ae("toggle",t),pl(t,"popover",r);break;case"xlinkActuate":Sn(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Sn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Sn(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Sn(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Sn(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Sn(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":pl(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=qS.get(l)||l,pl(t,l,r))}}function Rc(t,o,l,r,h,g){switch(l){case"style":Fd(t,r,g);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(s(61));if(l=r.__html,l!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"children":typeof r=="string"?Qi(t,r):(typeof r=="number"||typeof r=="bigint")&&Qi(t,""+r);break;case"onScroll":r!=null&&Ae("scroll",t);break;case"onScrollEnd":r!=null&&Ae("scrollend",t);break;case"onClick":r!=null&&(t.onclick=Tn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Od.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(h=l.endsWith("Capture"),o=l.slice(2,h?l.length-7:void 0),g=t[Ct]||null,g=g!=null?g[l]:null,typeof g=="function"&&t.removeEventListener(o,g,h),typeof r=="function")){typeof g!="function"&&g!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(o,r,h);break e}l in t?t[l]=r:r===!0?t.setAttribute(l,""):pl(t,l,r)}}}function pt(t,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",t),Ae("load",t);var r=!1,h=!1,g;for(g in l)if(l.hasOwnProperty(g)){var S=l[g];if(S!=null)switch(g){case"src":r=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:qe(t,o,g,S,l,null)}}h&&qe(t,o,"srcSet",l.srcSet,l,null),r&&qe(t,o,"src",l.src,l,null);return;case"input":Ae("invalid",t);var E=g=S=h=null,b=null,U=null;for(r in l)if(l.hasOwnProperty(r)){var z=l[r];if(z!=null)switch(r){case"name":h=z;break;case"type":S=z;break;case"checked":b=z;break;case"defaultChecked":U=z;break;case"value":g=z;break;case"defaultValue":E=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,o));break;default:qe(t,o,r,z,l,null)}}qd(t,g,E,b,U,S,h,!1);return;case"select":Ae("invalid",t),r=S=g=null;for(h in l)if(l.hasOwnProperty(h)&&(E=l[h],E!=null))switch(h){case"value":g=E;break;case"defaultValue":S=E;break;case"multiple":r=E;default:qe(t,o,h,E,l,null)}o=g,l=S,t.multiple=!!r,o!=null?Xi(t,!!r,o,!1):l!=null&&Xi(t,!!r,l,!0);return;case"textarea":Ae("invalid",t),g=h=r=null;for(S in l)if(l.hasOwnProperty(S)&&(E=l[S],E!=null))switch(S){case"value":r=E;break;case"defaultValue":h=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:qe(t,o,S,E,l,null)}Vd(t,r,h,g);return;case"option":for(b in l)if(l.hasOwnProperty(b)&&(r=l[b],r!=null))switch(b){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:qe(t,o,b,r,l,null)}return;case"dialog":Ae("beforetoggle",t),Ae("toggle",t),Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":Ae("load",t);break;case"video":case"audio":for(r=0;r<Ns.length;r++)Ae(Ns[r],t);break;case"image":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"embed":case"source":case"link":Ae("error",t),Ae("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in l)if(l.hasOwnProperty(U)&&(r=l[U],r!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:qe(t,o,U,r,l,null)}return;default:if(Br(o)){for(z in l)l.hasOwnProperty(z)&&(r=l[z],r!==void 0&&Rc(t,o,z,r,l,void 0));return}}for(E in l)l.hasOwnProperty(E)&&(r=l[E],r!=null&&qe(t,o,E,r,l,null))}function hE(t,o,l,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,S=null,E=null,b=null,U=null,z=null;for(H in l){var Y=l[H];if(l.hasOwnProperty(H)&&Y!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":b=Y;default:r.hasOwnProperty(H)||qe(t,o,H,null,r,Y)}}for(var O in r){var H=r[O];if(Y=l[O],r.hasOwnProperty(O)&&(H!=null||Y!=null))switch(O){case"type":g=H;break;case"name":h=H;break;case"checked":U=H;break;case"defaultChecked":z=H;break;case"value":S=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,o));break;default:H!==Y&&qe(t,o,O,H,r,Y)}}kr(t,S,E,b,U,z,g,h);return;case"select":H=S=E=O=null;for(g in l)if(b=l[g],l.hasOwnProperty(g)&&b!=null)switch(g){case"value":break;case"multiple":H=b;default:r.hasOwnProperty(g)||qe(t,o,g,null,r,b)}for(h in r)if(g=r[h],b=l[h],r.hasOwnProperty(h)&&(g!=null||b!=null))switch(h){case"value":O=g;break;case"defaultValue":E=g;break;case"multiple":S=g;default:g!==b&&qe(t,o,h,g,r,b)}o=E,l=S,r=H,O!=null?Xi(t,!!l,O,!1):!!r!=!!l&&(o!=null?Xi(t,!!l,o,!0):Xi(t,!!l,l?[]:"",!1));return;case"textarea":H=O=null;for(E in l)if(h=l[E],l.hasOwnProperty(E)&&h!=null&&!r.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:qe(t,o,E,null,r,h)}for(S in r)if(h=r[S],g=l[S],r.hasOwnProperty(S)&&(h!=null||g!=null))switch(S){case"value":O=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==g&&qe(t,o,S,h,r,g)}Bd(t,O,H);return;case"option":for(var ne in l)if(O=l[ne],l.hasOwnProperty(ne)&&O!=null&&!r.hasOwnProperty(ne))switch(ne){case"selected":t.selected=!1;break;default:qe(t,o,ne,null,r,O)}for(b in r)if(O=r[b],H=l[b],r.hasOwnProperty(b)&&O!==H&&(O!=null||H!=null))switch(b){case"selected":t.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:qe(t,o,b,O,r,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in l)O=l[fe],l.hasOwnProperty(fe)&&O!=null&&!r.hasOwnProperty(fe)&&qe(t,o,fe,null,r,O);for(U in r)if(O=r[U],H=l[U],r.hasOwnProperty(U)&&O!==H&&(O!=null||H!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(137,o));break;default:qe(t,o,U,O,r,H)}return;default:if(Br(o)){for(var Be in l)O=l[Be],l.hasOwnProperty(Be)&&O!==void 0&&!r.hasOwnProperty(Be)&&Rc(t,o,Be,void 0,r,O);for(z in r)O=r[z],H=l[z],!r.hasOwnProperty(z)||O===H||O===void 0&&H===void 0||Rc(t,o,z,O,r,H);return}}for(var M in l)O=l[M],l.hasOwnProperty(M)&&O!=null&&!r.hasOwnProperty(M)&&qe(t,o,M,null,r,O);for(Y in r)O=r[Y],H=l[Y],!r.hasOwnProperty(Y)||O===H||O==null&&H==null||qe(t,o,Y,O,r,H)}function $m(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,o=0,l=performance.getEntriesByType("resource"),r=0;r<l.length;r++){var h=l[r],g=h.transferSize,S=h.initiatorType,E=h.duration;if(g&&E&&$m(S)){for(S=0,E=h.responseEnd,r+=1;r<l.length;r++){var b=l[r],U=b.startTime;if(U>E)break;var z=b.transferSize,Y=b.initiatorType;z&&$m(Y)&&(b=b.responseEnd,S+=z*(b<E?1:(E-U)/(b-U)))}if(--r,o+=8*(g+S)/(h.duration/1e3),t++,10<t)break}}if(0<t)return o/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var xc=null,Nc=null;function da(t){return t.nodeType===9?t:t.ownerDocument}function Jm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ym(t,o){if(t===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&o==="foreignObject"?0:t}function Ic(t,o){return t==="textarea"||t==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Mc=null;function mE(){var t=window.event;return t&&t.type==="popstate"?t===Mc?!1:(Mc=t,!0):(Mc=null,!1)}var Km=typeof setTimeout=="function"?setTimeout:void 0,gE=typeof clearTimeout=="function"?clearTimeout:void 0,Xm=typeof Promise=="function"?Promise:void 0,yE=typeof queueMicrotask=="function"?queueMicrotask:typeof Xm<"u"?function(t){return Xm.resolve(null).then(t).catch(vE)}:Km;function vE(t){setTimeout(function(){throw t})}function ri(t){return t==="head"}function Qm(t,o){var l=o,r=0;do{var h=l.nextSibling;if(t.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"||l==="/&"){if(r===0){t.removeChild(h),xo(o);return}r--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")r++;else if(l==="html")Ms(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Ms(l);for(var g=l.firstChild;g;){var S=g.nextSibling,E=g.nodeName;g[Xo]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=S}}else l==="body"&&Ms(t.ownerDocument.body);l=h}while(l);xo(o)}function Zm(t,o){var l=t;t=0;do{var r=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),r&&r.nodeType===8)if(l=r.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=r}while(l)}function Dc(t){var o=t.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Dc(l),Pr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function _E(t,o,l,r){for(;t.nodeType===1;){var h=l;if(t.nodeName.toLowerCase()!==o.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[Xo])switch(o){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(o==="input"&&t.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=jt(t.nextSibling),t===null)break}return null}function SE(t,o,l){if(o==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=jt(t.nextSibling),t===null))return null;return t}function Wm(t,o){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=jt(t.nextSibling),t===null))return null;return t}function Uc(t){return t.data==="$?"||t.data==="$~"}function Lc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function TE(t,o){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=o;else if(t.data!=="$?"||l.readyState!=="loading")o();else{var r=function(){o(),l.removeEventListener("DOMContentLoaded",r)};l.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function jt(t){for(;t!=null;t=t.nextSibling){var o=t.nodeType;if(o===1||o===3)break;if(o===8){if(o=t.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return t}var Oc=null;function jm(t){t=t.nextSibling;for(var o=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(o===0)return jt(t.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}t=t.nextSibling}return null}function eg(t){t=t.previousSibling;for(var o=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return t;o--}else l!=="/$"&&l!=="/&"||o++}t=t.previousSibling}return null}function tg(t,o,l){switch(o=da(l),t){case"html":if(t=o.documentElement,!t)throw Error(s(452));return t;case"head":if(t=o.head,!t)throw Error(s(453));return t;case"body":if(t=o.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ms(t){for(var o=t.attributes;o.length;)t.removeAttributeNode(o[0]);Pr(t)}var en=new Map,ng=new Set;function ha(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Pn=Z.d;Z.d={f:EE,r:AE,D:CE,C:bE,L:wE,m:RE,X:NE,S:xE,M:IE};function EE(){var t=Pn.f(),o=oa();return t||o}function AE(t){var o=Ji(t);o!==null&&o.tag===5&&o.type==="form"?_p(o):Pn.r(t)}var bo=typeof document>"u"?null:document;function ig(t,o,l){var r=bo;if(r&&typeof o=="string"&&o){var h=Jt(o);h='link[rel="'+t+'"][href="'+h+'"]',typeof l=="string"&&(h+='[crossorigin="'+l+'"]'),ng.has(h)||(ng.add(h),t={rel:t,crossOrigin:l,href:o},r.querySelector(h)===null&&(o=r.createElement("link"),pt(o,"link",t),lt(o),r.head.appendChild(o)))}}function CE(t){Pn.D(t),ig("dns-prefetch",t,null)}function bE(t,o){Pn.C(t,o),ig("preconnect",t,o)}function wE(t,o,l){Pn.L(t,o,l);var r=bo;if(r&&t&&o){var h='link[rel="preload"][as="'+Jt(o)+'"]';o==="image"&&l&&l.imageSrcSet?(h+='[imagesrcset="'+Jt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(h+='[imagesizes="'+Jt(l.imageSizes)+'"]')):h+='[href="'+Jt(t)+'"]';var g=h;switch(o){case"style":g=wo(t);break;case"script":g=Ro(t)}en.has(g)||(t=_({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:t,as:o},l),en.set(g,t),r.querySelector(h)!==null||o==="style"&&r.querySelector(Ds(g))||o==="script"&&r.querySelector(Us(g))||(o=r.createElement("link"),pt(o,"link",t),lt(o),r.head.appendChild(o)))}}function RE(t,o){Pn.m(t,o);var l=bo;if(l&&t){var r=o&&typeof o.as=="string"?o.as:"script",h='link[rel="modulepreload"][as="'+Jt(r)+'"][href="'+Jt(t)+'"]',g=h;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ro(t)}if(!en.has(g)&&(t=_({rel:"modulepreload",href:t},o),en.set(g,t),l.querySelector(h)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Us(g)))return}r=l.createElement("link"),pt(r,"link",t),lt(r),l.head.appendChild(r)}}}function xE(t,o,l){Pn.S(t,o,l);var r=bo;if(r&&t){var h=Yi(r).hoistableStyles,g=wo(t);o=o||"default";var S=h.get(g);if(!S){var E={loading:0,preload:null};if(S=r.querySelector(Ds(g)))E.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":o},l),(l=en.get(g))&&Gc(t,l);var b=S=r.createElement("link");lt(b),pt(b,"link",t),b._p=new Promise(function(U,z){b.onload=U,b.onerror=z}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,pa(S,o,r)}S={type:"stylesheet",instance:S,count:1,state:E},h.set(g,S)}}}function NE(t,o){Pn.X(t,o);var l=bo;if(l&&t){var r=Yi(l).hoistableScripts,h=Ro(t),g=r.get(h);g||(g=l.querySelector(Us(h)),g||(t=_({src:t,async:!0},o),(o=en.get(h))&&Pc(t,o),g=l.createElement("script"),lt(g),pt(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},r.set(h,g))}}function IE(t,o){Pn.M(t,o);var l=bo;if(l&&t){var r=Yi(l).hoistableScripts,h=Ro(t),g=r.get(h);g||(g=l.querySelector(Us(h)),g||(t=_({src:t,async:!0,type:"module"},o),(o=en.get(h))&&Pc(t,o),g=l.createElement("script"),lt(g),pt(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},r.set(h,g))}}function og(t,o,l,r){var h=(h=pe.current)?ha(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=wo(l.href),l=Yi(h).hoistableStyles,r=l.get(o),r||(r={type:"style",instance:null,count:0,state:null},l.set(o,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=wo(l.href);var g=Yi(h).hoistableStyles,S=g.get(t);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,S),(g=h.querySelector(Ds(t)))&&!g._p&&(S.instance=g,S.state.loading=5),en.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},en.set(t,l),g||ME(h,t,l,S.state))),o&&r===null)throw Error(s(528,""));return S}if(o&&r!==null)throw Error(s(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ro(l),l=Yi(h).hoistableScripts,r=l.get(o),r||(r={type:"script",instance:null,count:0,state:null},l.set(o,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function wo(t){return'href="'+Jt(t)+'"'}function Ds(t){return'link[rel="stylesheet"]['+t+"]"}function sg(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function ME(t,o,l,r){t.querySelector('link[rel="preload"][as="style"]['+o+"]")?r.loading=1:(o=t.createElement("link"),r.preload=o,o.addEventListener("load",function(){return r.loading|=1}),o.addEventListener("error",function(){return r.loading|=2}),pt(o,"link",l),lt(o),t.head.appendChild(o))}function Ro(t){return'[src="'+Jt(t)+'"]'}function Us(t){return"script[async]"+t}function lg(t,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var r=t.querySelector('style[data-href~="'+Jt(l.href)+'"]');if(r)return o.instance=r,lt(r),r;var h=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),lt(r),pt(r,"style",h),pa(r,l.precedence,t),o.instance=r;case"stylesheet":h=wo(l.href);var g=t.querySelector(Ds(h));if(g)return o.state.loading|=4,o.instance=g,lt(g),g;r=sg(l),(h=en.get(h))&&Gc(r,h),g=(t.ownerDocument||t).createElement("link"),lt(g);var S=g;return S._p=new Promise(function(E,b){S.onload=E,S.onerror=b}),pt(g,"link",r),o.state.loading|=4,pa(g,l.precedence,t),o.instance=g;case"script":return g=Ro(l.src),(h=t.querySelector(Us(g)))?(o.instance=h,lt(h),h):(r=l,(h=en.get(g))&&(r=_({},l),Pc(r,h)),t=t.ownerDocument||t,h=t.createElement("script"),lt(h),pt(h,"link",r),t.head.appendChild(h),o.instance=h);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(r=o.instance,o.state.loading|=4,pa(r,l.precedence,t));return o.instance}function pa(t,o,l){for(var r=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=r.length?r[r.length-1]:null,g=h,S=0;S<r.length;S++){var E=r[S];if(E.dataset.precedence===o)g=E;else if(g!==h)break}g?g.parentNode.insertBefore(t,g.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(t,o.firstChild))}function Gc(t,o){t.crossOrigin==null&&(t.crossOrigin=o.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=o.referrerPolicy),t.title==null&&(t.title=o.title)}function Pc(t,o){t.crossOrigin==null&&(t.crossOrigin=o.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=o.referrerPolicy),t.integrity==null&&(t.integrity=o.integrity)}var ma=null;function ag(t,o,l){if(ma===null){var r=new Map,h=ma=new Map;h.set(l,r)}else h=ma,r=h.get(l),r||(r=new Map,h.set(l,r));if(r.has(t))return r;for(r.set(t,null),l=l.getElementsByTagName(t),h=0;h<l.length;h++){var g=l[h];if(!(g[Xo]||g[ct]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(o)||"";S=t+S;var E=r.get(S);E?E.push(g):r.set(S,[g])}}return r}function rg(t,o,l){t=t.ownerDocument||t,t.head.insertBefore(l,o==="title"?t.querySelector("head > title"):null)}function DE(t,o,l){if(l===1||o.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return t=o.disabled,typeof o.precedence=="string"&&t==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function ug(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function UE(t,o,l,r){if(l.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var h=wo(r.href),g=o.querySelector(Ds(h));if(g){o=g._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(t.count++,t=ga.bind(t),o.then(t,t)),l.state.loading|=4,l.instance=g,lt(g);return}g=o.ownerDocument||o,r=sg(r),(h=en.get(h))&&Gc(r,h),g=g.createElement("link"),lt(g);var S=g;S._p=new Promise(function(E,b){S.onload=E,S.onerror=b}),pt(g,"link",r),l.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=ga.bind(t),o.addEventListener("load",l),o.addEventListener("error",l))}}var Hc=0;function LE(t,o){return t.stylesheets&&t.count===0&&va(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var r=setTimeout(function(){if(t.stylesheets&&va(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+o);0<t.imgBytes&&Hc===0&&(Hc=62500*pE());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&va(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>Hc?50:800)+o);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(h)}}:null}function ga(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)va(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ya=null;function va(t,o){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ya=new Map,o.forEach(OE,t),ya=null,ga.call(t))}function OE(t,o){if(!(o.state.loading&4)){var l=ya.get(t);if(l)var r=l.get(null);else{l=new Map,ya.set(t,l);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var S=h[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),r=S)}r&&l.set(null,r)}h=o.instance,S=h.getAttribute("data-precedence"),g=l.get(S)||r,g===r&&l.set(null,h),l.set(S,h),this.count++,r=ga.bind(this),h.addEventListener("load",r),h.addEventListener("error",r),g?g.parentNode.insertBefore(h,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),o.state.loading|=4}}var Ls={$$typeof:k,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function GE(t,o,l,r,h,g,S,E,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=r,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function cg(t,o,l,r,h,g,S,E,b,U,z,Y){return t=new GE(t,o,l,S,b,U,z,Y,E),o=1,g===!0&&(o|=24),g=Gt(3,null,null,o),t.current=g,g.stateNode=t,o=yu(),o.refCount++,t.pooledCache=o,o.refCount++,g.memoizedState={element:r,isDehydrated:l,cache:o},Tu(g),t}function fg(t){return t?(t=io,t):io}function dg(t,o,l,r,h,g){h=fg(h),r.context===null?r.context=h:r.pendingContext=h,r=Zn(o),r.payload={element:l},g=g===void 0?null:g,g!==null&&(r.callback=g),l=Wn(t,r,o),l!==null&&(It(l,t,o),ds(l,t,o))}function hg(t,o){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<o?l:o}}function kc(t,o){hg(t,o),(t=t.alternate)&&hg(t,o)}function pg(t){if(t.tag===13||t.tag===31){var o=Ci(t,67108864);o!==null&&It(o,t,67108864),kc(t,67108864)}}function mg(t){if(t.tag===13||t.tag===31){var o=Bt();o=Lr(o);var l=Ci(t,o);l!==null&&It(l,t,o),kc(t,o)}}var _a=!0;function PE(t,o,l,r){var h=V.T;V.T=null;var g=Z.p;try{Z.p=2,qc(t,o,l,r)}finally{Z.p=g,V.T=h}}function HE(t,o,l,r){var h=V.T;V.T=null;var g=Z.p;try{Z.p=8,qc(t,o,l,r)}finally{Z.p=g,V.T=h}}function qc(t,o,l,r){if(_a){var h=Bc(r);if(h===null)wc(t,o,r,Sa,l),yg(t,r);else if(qE(h,t,o,l,r))r.stopPropagation();else if(yg(t,r),o&4&&-1<kE.indexOf(t)){for(;h!==null;){var g=Ji(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=_i(g.pendingLanes);if(S!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;S;){var b=1<<31-Lt(S);E.entanglements[1]|=b,S&=~b}gn(g),(De&6)===0&&(na=Dt()+500,xs(0))}}break;case 31:case 13:E=Ci(g,2),E!==null&&It(E,g,2),oa(),kc(g,2)}if(g=Bc(r),g===null&&wc(t,o,r,Sa,l),g===h)break;h=g}h!==null&&r.stopPropagation()}else wc(t,o,r,null,l)}}function Bc(t){return t=zr(t),Vc(t)}var Sa=null;function Vc(t){if(Sa=null,t=$i(t),t!==null){var o=u(t);if(o===null)t=null;else{var l=o.tag;if(l===13){if(t=d(o),t!==null)return t;t=null}else if(l===31){if(t=p(o),t!==null)return t;t=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;t=null}else o!==t&&(t=null)}}return Sa=t,null}function gg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(CS()){case Cd:return 2;case bd:return 8;case ul:case bS:return 32;case wd:return 268435456;default:return 32}default:return 32}}var zc=!1,ui=null,ci=null,fi=null,Os=new Map,Gs=new Map,di=[],kE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yg(t,o){switch(t){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":Os.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(o.pointerId)}}function Ps(t,o,l,r,h,g){return t===null||t.nativeEvent!==g?(t={blockedOn:o,domEventName:l,eventSystemFlags:r,nativeEvent:g,targetContainers:[h]},o!==null&&(o=Ji(o),o!==null&&pg(o)),t):(t.eventSystemFlags|=r,o=t.targetContainers,h!==null&&o.indexOf(h)===-1&&o.push(h),t)}function qE(t,o,l,r,h){switch(o){case"focusin":return ui=Ps(ui,t,o,l,r,h),!0;case"dragenter":return ci=Ps(ci,t,o,l,r,h),!0;case"mouseover":return fi=Ps(fi,t,o,l,r,h),!0;case"pointerover":var g=h.pointerId;return Os.set(g,Ps(Os.get(g)||null,t,o,l,r,h)),!0;case"gotpointercapture":return g=h.pointerId,Gs.set(g,Ps(Gs.get(g)||null,t,o,l,r,h)),!0}return!1}function vg(t){var o=$i(t.target);if(o!==null){var l=u(o);if(l!==null){if(o=l.tag,o===13){if(o=d(l),o!==null){t.blockedOn=o,Dd(t.priority,function(){mg(l)});return}}else if(o===31){if(o=p(l),o!==null){t.blockedOn=o,Dd(t.priority,function(){mg(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ta(t){if(t.blockedOn!==null)return!1;for(var o=t.targetContainers;0<o.length;){var l=Bc(t.nativeEvent);if(l===null){l=t.nativeEvent;var r=new l.constructor(l.type,l);Vr=r,l.target.dispatchEvent(r),Vr=null}else return o=Ji(l),o!==null&&pg(o),t.blockedOn=l,!1;o.shift()}return!0}function _g(t,o,l){Ta(t)&&l.delete(o)}function BE(){zc=!1,ui!==null&&Ta(ui)&&(ui=null),ci!==null&&Ta(ci)&&(ci=null),fi!==null&&Ta(fi)&&(fi=null),Os.forEach(_g),Gs.forEach(_g)}function Ea(t,o){t.blockedOn===o&&(t.blockedOn=null,zc||(zc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,BE)))}var Aa=null;function Sg(t){Aa!==t&&(Aa=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Aa===t&&(Aa=null);for(var o=0;o<t.length;o+=3){var l=t[o],r=t[o+1],h=t[o+2];if(typeof r!="function"){if(Vc(r||l)===null)continue;break}var g=Ji(l);g!==null&&(t.splice(o,3),o-=3,Bu(g,{pending:!0,data:h,method:l.method,action:r},r,h))}}))}function xo(t){function o(b){return Ea(b,t)}ui!==null&&Ea(ui,t),ci!==null&&Ea(ci,t),fi!==null&&Ea(fi,t),Os.forEach(o),Gs.forEach(o);for(var l=0;l<di.length;l++){var r=di[l];r.blockedOn===t&&(r.blockedOn=null)}for(;0<di.length&&(l=di[0],l.blockedOn===null);)vg(l),l.blockedOn===null&&di.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(r=0;r<l.length;r+=3){var h=l[r],g=l[r+1],S=h[Ct]||null;if(typeof g=="function")S||Sg(l);else if(S){var E=null;if(g&&g.hasAttribute("formAction")){if(h=g,S=g[Ct]||null)E=S.formAction;else if(Vc(h)!==null)continue}else E=S.action;typeof E=="function"?l[r+1]=E:(l.splice(r,3),r-=3),Sg(l)}}}function Tg(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function o(){h!==null&&(h(),h=null),r||setTimeout(l,20)}function l(){if(!r&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),h!==null&&(h(),h=null)}}}function Fc(t){this._internalRoot=t}Ca.prototype.render=Fc.prototype.render=function(t){var o=this._internalRoot;if(o===null)throw Error(s(409));var l=o.current,r=Bt();dg(l,r,t,o,null,null)},Ca.prototype.unmount=Fc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var o=t.containerInfo;dg(t.current,2,null,t,null,null),oa(),o[Fi]=null}};function Ca(t){this._internalRoot=t}Ca.prototype.unstable_scheduleHydration=function(t){if(t){var o=Md();t={blockedOn:null,target:t,priority:o};for(var l=0;l<di.length&&o!==0&&o<di[l].priority;l++);di.splice(l,0,t),l===0&&vg(t)}};var Eg=e.version;if(Eg!=="19.2.4")throw Error(s(527,Eg,"19.2.4"));Z.findDOMNode=function(t){var o=t._reactInternals;if(o===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(o),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var VE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ba.isDisabled&&ba.supportsFiber)try{Jo=ba.inject(VE),Ut=ba}catch{}}return ks.createRoot=function(t,o){if(!a(t))throw Error(s(299));var l=!1,r="",h=Np,g=Ip,S=Mp;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(r=o.identifierPrefix),o.onUncaughtError!==void 0&&(h=o.onUncaughtError),o.onCaughtError!==void 0&&(g=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=cg(t,1,!1,null,null,l,r,null,h,g,S,Tg),t[Fi]=o.current,bc(t),new Fc(o)},ks.hydrateRoot=function(t,o,l){if(!a(t))throw Error(s(299));var r=!1,h="",g=Np,S=Ip,E=Mp,b=null;return l!=null&&(l.unstable_strictMode===!0&&(r=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.formState!==void 0&&(b=l.formState)),o=cg(t,1,!0,o,l??null,r,h,b,g,S,E,Tg),o.context=fg(null),l=o.current,r=Bt(),r=Lr(r),h=Zn(r),h.callback=null,Wn(l,h,r),l=r,o.current.lanes=l,Ko(o,l),gn(o),t[Fi]=o.current,bc(t),new Ca(o)},ks.version="19.2.4",ks}var Dg;function jE(){if(Dg)return Jc.exports;Dg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jc.exports=WE(),Jc.exports}var eA=jE(),cf=zf();const wa=FE(cf);var gi=(n=>(n.SELECTION="SELECTION",n.LOADING="LOADING",n.GAMEPLAY="GAMEPLAY",n.GAME_OVER="GAME_OVER",n))(gi||{});const tA=[{id:"c1",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1560706560-59f7df8da891?q=80&w=1200&auto=format&fit=crop",stats:{strength:8,wits:7,charm:5},traits:["","",""],weakness:""},{id:"c2",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1535581652167-3d6693c0326e?q=80&w=1200&auto=format&fit=crop",stats:{strength:9,wits:5,charm:3},traits:["","",""],weakness:""},{id:"c3",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1509316975850-ff9c5deb0cd9?q=80&w=1200&auto=format&fit=crop",stats:{strength:3,wits:9,charm:8},traits:["","",""],weakness:""},{id:"c4",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1519074069444-1ba4fff66d16?q=80&w=1200&auto=format&fit=crop",stats:{strength:4,wits:8,charm:6},traits:["","",""],weakness:""},{id:"c5",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1636217989679-2c70092c7251?q=80&w=1200&auto=format&fit=crop",stats:{strength:9,wits:4,charm:6},traits:["","",""],weakness:""},{id:"c6",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop",stats:{strength:3,wits:7,charm:10},traits:["","",""],weakness:""},{id:"c7",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1605806616949-1e87b487bc2a?q=80&w=1200&auto=format&fit=crop",stats:{strength:7,wits:8,charm:2},traits:["","",""],weakness:""},{id:"c8",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1601362840469-51e4d8d58785?q=80&w=1200&auto=format&fit=crop",stats:{strength:2,wits:10,charm:4},traits:["","",""],weakness:""}],ff=[{id:"r1",title:"",type:"CONSTRAINT",description:"",active:!0},{id:"r2",title:"",type:"REALITY",description:"<3NPC>8",active:!0},{id:"r3",title:"",type:"RISK",description:"",active:!0},{id:"r4",title:"",type:"RISK",description:"23",active:!0},{id:"r5",title:"",type:"BONUS",description:"1",active:!0},{id:"r6",title:"",type:"REALITY",description:"",active:!1},{id:"r7",title:"",type:"CONSTRAINT",description:"",active:!1},{id:"r8",title:"",type:"CONSTRAINT",description:"",active:!0},{id:"r9",title:"",type:"BONUS",description:"50%",active:!1},{id:"r10",title:"",type:"REALITY",description:"10%",active:!1},{id:"r11",title:"",type:"RISK",description:"",active:!0},{id:"r12",title:"",type:"BONUS",description:"",active:!1}],Ug={text:"",choices:[{id:"opt1",text:"",consequence:"",cost:"",risk:""},{id:"opt2",text:"",consequence:"",risk:""},{id:"opt3",text:"",consequence:"",cost:"",risk:""}]},nA=n=>({1:"I",2:"II",3:"III",4:"IV",5:"V",6:"VI",7:"VII",8:"VIII"})[n]||"X",Lg=({character:n,onSelect:e,isSelected:i})=>{const s=parseInt(n.id.replace("c",""));return N.jsxs("div",{onClick:()=>e&&e(n),className:`
        relative w-72 h-[450px] rounded-xl overflow-hidden cursor-pointer transition-all duration-500 transform group
        ${i?"scale-105 ring-4 ring-[#D4AF37] shadow-[0_0_50px_rgba(212,175,55,0.4)] z-20":"hover:scale-105 hover:shadow-2xl hover:z-10"}
        border-[6px] border-[#D4AF37] bg-[#1a0f0f]
      `,children:[N.jsx("div",{className:"absolute top-0 w-full h-12 flex justify-center items-center z-20 pointer-events-none",children:N.jsx("div",{className:"bg-[#D4AF37] text-[#1a0f0f] px-4 pt-1 pb-2 rounded-b-lg font-display font-bold text-sm tracking-widest shadow-md",children:nA(s)})}),N.jsxs("div",{className:"absolute inset-0 bg-gray-900",children:[N.jsx("img",{src:n.imageUrl,alt:n.name,className:`
                    w-full h-full object-cover transition-transform duration-1000
                    ${i?"scale-110 grayscale-0":"grayscale-[0.5] sepia-[0.3] group-hover:grayscale-0 group-hover:scale-110"}
                `}),N.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/old-map.png')] opacity-30 mix-blend-overlay pointer-events-none"}),N.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1a0505] via-transparent to-[#1a0505] opacity-90 pointer-events-none"})]}),N.jsx("div",{className:"absolute top-2 left-2 text-[#D4AF37] z-20 opacity-80",children:N.jsx("i",{className:"fa-solid fa-star-of-life text-xs"})}),N.jsx("div",{className:"absolute top-2 right-2 text-[#D4AF37] z-20 opacity-80",children:N.jsx("i",{className:"fa-solid fa-star-of-life text-xs"})}),N.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 w-[90%] flex flex-col items-center justify-center z-20",children:N.jsxs("div",{className:"border-t border-b border-[#D4AF37] py-2 w-full text-center backdrop-blur-sm bg-black/40",children:[N.jsx("h3",{className:"text-xl font-bold font-display text-[#f0e6d2] uppercase tracking-wider",children:n.name}),N.jsx("p",{className:"text-[10px] uppercase font-bold tracking-[0.2em] text-[#D4AF37] mt-1",children:n.title})]})}),N.jsxs("div",{className:"absolute inset-0 bg-[#1a0505]/95 translate-y-full group-hover:translate-y-0 transition-transform duration-500 z-30 flex flex-col items-center justify-center text-paper p-6 text-center border-t-2 border-[#D4AF37]",children:[N.jsx("i",{className:"fa-solid fa-eye text-[#D4AF37] mb-2 text-xl"}),N.jsxs("p",{className:"italic font-serif text-sm mb-6 leading-relaxed opacity-90",children:['"',n.description,'"']}),N.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full border-t border-[#D4AF37]/30 pt-4",children:[N.jsxs("div",{className:"flex flex-col items-center",children:[N.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),N.jsx("span",{className:"text-lg font-display",children:n.stats.strength})]}),N.jsxs("div",{className:"flex flex-col items-center",children:[N.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),N.jsx("span",{className:"text-lg font-display",children:n.stats.wits})]}),N.jsxs("div",{className:"flex flex-col items-center",children:[N.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),N.jsx("span",{className:"text-lg font-display",children:n.stats.charm})]})]}),N.jsxs("div",{className:"mt-6 w-full text-left",children:[N.jsx("span",{className:"text-[10px] text-red-500 uppercase tracking-widest block mb-1",children:""}),N.jsx("span",{className:"text-xs text-stone-gray block font-serif italic",children:n.weakness})]})]})]})},iA=({rule:n})=>{const e=()=>{switch(n.type){case"CONSTRAINT":return"border-red-800";case"BONUS":return"border-green-700";case"RISK":return"border-orange-600";case"REALITY":return"border-purple-800";default:return"border-gray-800"}},i=()=>{switch(n.type){case"CONSTRAINT":return"fa-lock";case"BONUS":return"fa-gift";case"RISK":return"fa-dice-d20";case"REALITY":return"fa-scale-balanced"}};return N.jsxs("div",{className:`
      relative w-full mb-3 bg-[#F5DEB3] rounded-lg p-3 border-l-4 shadow-md 
      transform hover:-translate-y-1 transition-transform duration-300
      ${e()}
    `,children:[N.jsxs("div",{className:"flex justify-between items-start mb-1",children:[N.jsx("h4",{className:"font-bold text-[#4a0404] text-sm uppercase tracking-wider",children:n.title}),N.jsx("i",{className:`fa-solid ${i()} text-[#8B4513] opacity-50`})]}),N.jsx("p",{className:"text-xs text-[#5c4033] leading-snug",children:n.description}),n.type==="REALITY"&&N.jsx("div",{className:"absolute -right-1 -top-1 w-3 h-3 bg-purple-600 rounded-full animate-pulse"})]})},Og=n=>{let e;const i=new Set,s=(m,v)=>{const _=typeof m=="function"?m(e):m;if(!Object.is(_,e)){const T=e;e=v??(typeof _!="object"||_===null)?_:Object.assign({},e,_),i.forEach(A=>A(e,T))}},a=()=>e,p={setState:s,getState:a,getInitialState:()=>y,subscribe:m=>(i.add(m),()=>i.delete(m))},y=e=n(s,a,p);return p},oA=(n=>n?Og(n):Og),sA=n=>n;function lA(n,e=sA){const i=wa.useSyncExternalStore(n.subscribe,wa.useCallback(()=>e(n.getState()),[n,e]),wa.useCallback(()=>e(n.getInitialState()),[n,e]));return wa.useDebugValue(i),i}const aA=n=>{const e=oA(n),i=s=>lA(e,s);return Object.assign(i,e),i},rA=(n=>aA);function Fv(n,e){let i;try{i=n()}catch{return}return{getItem:a=>{var u;const d=y=>y===null?null:JSON.parse(y,void 0),p=(u=i.getItem(a))!=null?u:null;return p instanceof Promise?p.then(d):d(p)},setItem:(a,u)=>i.setItem(a,JSON.stringify(u,void 0)),removeItem:a=>i.removeItem(a)}}const df=n=>e=>{try{const i=n(e);return i instanceof Promise?i:{then(s){return df(s)(i)},catch(s){return this}}}catch(i){return{then(s){return this},catch(s){return df(s)(i)}}}},uA=(n,e)=>(i,s,a)=>{let u={storage:Fv(()=>window.localStorage),partialize:w=>w,version:0,merge:(w,q)=>({...q,...w}),...e},d=!1,p=0;const y=new Set,m=new Set;let v=u.storage;if(!v)return n((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),i(...w)},s,a);const _=()=>{const w=u.partialize({...s()});return v.setItem(u.name,{state:w,version:u.version})},T=a.setState;a.setState=(w,q)=>(T(w,q),_());const A=n((...w)=>(i(...w),_()),s,a);a.getInitialState=()=>A;let C;const I=()=>{var w,q;if(!v)return;const B=++p;d=!1,y.forEach(G=>{var P;return G((P=s())!=null?P:A)});const k=((q=u.onRehydrateStorage)==null?void 0:q.call(u,(w=s())!=null?w:A))||void 0;return df(v.getItem.bind(v))(u.name).then(G=>{if(G)if(typeof G.version=="number"&&G.version!==u.version){if(u.migrate){const P=u.migrate(G.state,G.version);return P instanceof Promise?P.then(W=>[!0,W]):[!0,P]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,G.state];return[!1,void 0]}).then(G=>{var P;if(B!==p)return;const[W,J]=G;if(C=u.merge(J,(P=s())!=null?P:A),i(C,!0),W)return _()}).then(()=>{B===p&&(k==null||k(C,void 0),C=s(),d=!0,m.forEach(G=>G(C)))}).catch(G=>{B===p&&(k==null||k(void 0,G))})};return a.persist={setOptions:w=>{u={...u,...w},w.storage&&(v=w.storage)},clearStorage:()=>{v==null||v.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>I(),hasHydrated:()=>d,onHydrate:w=>(y.add(w),()=>{y.delete(w)}),onFinishHydration:w=>(m.add(w),()=>{m.delete(w)})},u.skipHydration||I(),C||A},cA=uA,fA=Fv(()=>localStorage),dA={phase:gi.SELECTION,character:null,rules:ff,storyLog:[],currentStory:null,realityStats:{credibility:5,stress:2,connections:3},turnCount:0,maxTurns:10,finalSummary:void 0,loading:!1,showAiSettings:!1,provider:"gemini",geminiKey:"",openaiConfig:{apiKey:"",baseUrl:"https://api.openai.com/v1",model:"gpt-4-turbo-preview"}},He=rA()(cA(n=>({...dA,setPhase:e=>n({phase:e}),setCharacter:e=>n({character:e}),setRules:e=>n(i=>({rules:typeof e=="function"?e(i.rules):e})),setStoryLog:e=>n(i=>({storyLog:typeof e=="function"?e(i.storyLog):e})),setCurrentStory:e=>n({currentStory:e}),setRealityStats:e=>n(i=>({realityStats:typeof e=="function"?e(i.realityStats):e})),setTurnCount:e=>n({turnCount:e}),setMaxTurns:e=>n({maxTurns:e}),setFinalSummary:e=>n({finalSummary:e}),setLoading:e=>n({loading:e}),updateGameState:e=>n(i=>e(i)),resetGame:()=>n({phase:gi.SELECTION,character:null,storyLog:[],currentStory:null,turnCount:0,finalSummary:void 0,realityStats:{credibility:5,stress:2,connections:3},rules:ff,loading:!1}),startNewGame:e=>n({phase:gi.GAMEPLAY,character:e,currentStory:Ug,storyLog:[Ug],turnCount:1,realityStats:{credibility:5,stress:2,connections:3},rules:ff,finalSummary:void 0,loading:!1}),setShowAiSettings:e=>n({showAiSettings:e}),setProvider:e=>n({provider:e}),setGeminiKey:e=>n({geminiKey:e}),setOpenaiConfig:e=>n(i=>({openaiConfig:typeof e=="function"?e(i.openaiConfig):e}))}),{name:"character-card-game-store",storage:fA,partialize:n=>({phase:n.phase,character:n.character,rules:n.rules,storyLog:n.storyLog,currentStory:n.currentStory,realityStats:n.realityStats,turnCount:n.turnCount,maxTurns:n.maxTurns,finalSummary:n.finalSummary,provider:n.provider,geminiKey:n.geminiKey,openaiConfig:n.openaiConfig})})),hA=()=>He(n=>n.phase),pA=()=>He(n=>n.character),mA=()=>He(n=>n.rules),gA=()=>He(n=>n.storyLog),yA=()=>He(n=>n.currentStory),vA=()=>He(n=>n.realityStats),_A=()=>He(n=>n.turnCount),SA=()=>He(n=>n.maxTurns),TA=()=>He(n=>n.finalSummary),EA=()=>He(n=>n.loading),AA=()=>He(n=>n.showAiSettings),$v=()=>He(n=>n.provider),Jv=()=>He(n=>n.geminiKey),Yv=()=>He(n=>n.openaiConfig),CA=()=>He(n=>n.setPhase),bA=()=>He(n=>n.setCharacter),wA=()=>He(n=>n.setRules),RA=()=>He(n=>n.setStoryLog),xA=()=>He(n=>n.setCurrentStory),NA=()=>He(n=>n.setRealityStats),IA=()=>He(n=>n.setTurnCount),MA=()=>He(n=>n.setFinalSummary),DA=()=>He(n=>n.setLoading),UA=()=>He(n=>n.resetGame),LA=()=>He(n=>n.startNewGame),Kv=()=>He(n=>n.setShowAiSettings),OA=()=>He(n=>n.setProvider),GA=()=>He(n=>n.setGeminiKey),PA=()=>He(n=>n.setOpenaiConfig),HA=()=>{const n=AA(),e=Kv(),i=$v(),s=OA(),a=Jv(),u=GA(),d=Yv(),p=PA(),y=()=>e(!1);return n?N.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:N.jsxs("div",{className:"bg-[#1a0f0f] border-4 border-double border-gold rounded-lg w-full max-w-md shadow-[0_0_50px_rgba(212,175,55,0.3)] overflow-hidden animate-fade-in",children:[N.jsxs("div",{className:"p-6 border-b border-gold/30 flex items-center justify-between bg-velvet-red/20",children:[N.jsxs("h3",{className:"font-display text-2xl text-gold flex items-center gap-2 uppercase tracking-widest",children:[N.jsx("i",{className:"fa-solid fa-cog"}),"AI "]}),N.jsx("button",{onClick:y,className:"text-gold/60 hover:text-gold p-2 rounded-full hover:bg-gold/10 transition-colors",children:N.jsx("i",{className:"fa-solid fa-times text-xl"})})]}),N.jsxs("div",{className:"p-6 space-y-6 bg-[#0f0303]",children:[N.jsxs("div",{className:"space-y-3",children:[N.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-brown-600 rounded-lg cursor-pointer hover:border-gold transition-colors bg-brown-800/30",children:[N.jsx("input",{type:"radio",name:"provider",checked:i==="gemini",onChange:()=>s("gemini"),className:"w-4 h-4 text-gold focus:ring-gold accent-gold"}),N.jsxs("div",{className:"flex-1",children:[N.jsx("span",{className:"block text-base font-display text-paper",children:"Google Gemini"}),N.jsx("span",{className:"block text-xs text-stone-gray",children:""})]})]}),N.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-brown-600 rounded-lg cursor-pointer hover:border-gold transition-colors bg-brown-800/30",children:[N.jsx("input",{type:"radio",name:"provider",checked:i==="openai",onChange:()=>s("openai"),className:"w-4 h-4 text-gold focus:ring-gold accent-gold"}),N.jsxs("div",{className:"flex-1",children:[N.jsx("span",{className:"block text-base font-display text-paper",children:"OpenAI"}),N.jsx("span",{className:"block text-xs text-stone-gray",children:" API Key"})]})]})]}),i==="gemini"&&N.jsx("div",{className:"space-y-4 pt-4 border-t border-brown-600 animate-fade-in",children:N.jsxs("div",{className:"space-y-2",children:[N.jsx("label",{className:"text-xs font-bold text-gold uppercase tracking-wider",children:"API Key ()"}),N.jsx("input",{type:"password",value:a,onChange:m=>u(m.target.value),placeholder:" Key...",className:"w-full px-4 py-3 text-sm bg-brown-800/50 border-2 border-brown-600 text-paper rounded-lg focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-all placeholder-stone-gray/50"}),N.jsx("p",{className:"text-[10px] text-stone-gray italic",children:" Google Gemini API Key"})]})}),i==="openai"&&N.jsxs("div",{className:"space-y-4 pt-4 border-t border-brown-600 animate-fade-in",children:[N.jsxs("div",{className:"space-y-2",children:[N.jsx("label",{className:"text-xs font-bold text-gold uppercase tracking-wider",children:"Base URL"}),N.jsx("input",{type:"text",value:d.baseUrl,onChange:m=>p(v=>({...v,baseUrl:m.target.value})),placeholder:"https://api.openai.com/v1",className:"w-full px-4 py-3 text-sm bg-brown-800/50 border-2 border-brown-600 text-paper rounded-lg focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-all"})]}),N.jsxs("div",{className:"space-y-2",children:[N.jsxs("label",{className:"text-xs font-bold text-gold uppercase tracking-wider",children:["API Key ",N.jsx("span",{className:"text-red-500",children:"*"})]}),N.jsx("input",{type:"password",value:d.apiKey,onChange:m=>p(v=>({...v,apiKey:m.target.value})),placeholder:"sk-...",className:"w-full px-4 py-3 text-sm bg-brown-800/50 border-2 border-brown-600 text-paper rounded-lg focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-all"})]}),N.jsxs("div",{className:"space-y-2",children:[N.jsx("label",{className:"text-xs font-bold text-gold uppercase tracking-wider",children:""}),N.jsx("input",{type:"text",value:d.model,onChange:m=>p(v=>({...v,model:m.target.value})),placeholder:"gpt-4-turbo-preview",className:"w-full px-4 py-3 text-sm bg-brown-800/50 border-2 border-brown-600 text-paper rounded-lg focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-all"})]})]})]}),N.jsx("div",{className:"p-4 bg-velvet-red/20 border-t border-gold/30 flex justify-end",children:N.jsx("button",{onClick:y,className:"px-8 py-3 bg-gold hover:bg-white text-black font-bold font-display uppercase tracking-widest transition-colors rounded shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.5)]",children:""})})]})}):null};var kA={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let qA,BA;function VA(){return{geminiUrl:qA,vertexUrl:BA}}function zA(n,e,i,s){var a,u;if(!(n!=null&&n.baseUrl)){const d=VA();return e?(a=d.vertexUrl)!==null&&a!==void 0?a:i:(u=d.geminiUrl)!==null&&u!==void 0?u:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bn{}function ee(n,e){const i=/\{([^}]+)\}/g;return n.replace(i,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const u=e[a];return u!=null?String(u):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function f(n,e,i){for(let u=0;u<e.length-1;u++){const d=e[u];if(d.endsWith("[]")){const p=d.slice(0,-2);if(!(p in n))if(Array.isArray(i))n[p]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(n[p])){const y=n[p];if(Array.isArray(i))for(let m=0;m<y.length;m++){const v=y[m];f(v,e.slice(u+1),i[m])}else for(const m of y)f(m,e.slice(u+1),i)}return}else if(d.endsWith("[0]")){const p=d.slice(0,-3);p in n||(n[p]=[{}]);const y=n[p];f(y[0],e.slice(u+1),i);return}(!n[d]||typeof n[d]!="object")&&(n[d]={}),n=n[d]}const s=e[e.length-1],a=n[s];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(n,i):n[s]=i}function c(n,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return i;const a=e[s];if(a.endsWith("[]")){const u=a.slice(0,-2);if(u in n){const d=n[u];return Array.isArray(d)?d.map(p=>c(p,e.slice(s+1),i)):i}else return i}else n=n[a]}return n}catch(s){if(s instanceof TypeError)return i;throw s}}function FA(n,e){for(const[i,s]of Object.entries(e)){const a=i.split("."),u=s.split("."),d=new Set;let p=-1;for(let y=0;y<a.length;y++)if(a[y]==="*"){p=y;break}if(p!==-1&&u.length>p)for(let y=p;y<u.length;y++){const m=u[y];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&d.add(m)}hf(n,a,u,0,d)}}function hf(n,e,i,s,a){if(s>=e.length||typeof n!="object"||n===null)return;const u=e[s];if(u.endsWith("[]")){const d=u.slice(0,-2),p=n;if(d in p&&Array.isArray(p[d]))for(const y of p[d])hf(y,e,i,s+1,a)}else if(u==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const d=n,p=Object.keys(d).filter(m=>!m.startsWith("_")&&!a.has(m)),y={};for(const m of p)y[m]=d[m];for(const[m,v]of Object.entries(y)){const _=[];for(const T of i.slice(s))T==="*"?_.push(m):_.push(T);f(d,_,v)}for(const m of p)delete d[m]}}else{const d=n;u in d&&hf(d[u],e,i,s+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ff(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $A(n){const e={},i=c(n,["operationName"]);i!=null&&f(e,["operationName"],i);const s=c(n,["resourceName"]);return s!=null&&f(e,["_url","resourceName"],s),e}function JA(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(n,["done"]);a!=null&&f(e,["done"],a);const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["response","generateVideoResponse"]);return d!=null&&f(e,["response"],KA(d)),e}function YA(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(n,["done"]);a!=null&&f(e,["done"],a);const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["response"]);return d!=null&&f(e,["response"],XA(d)),e}function KA(n){const e={},i=c(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>QA(d))),f(e,["generatedVideos"],u)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=c(n,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function XA(n){const e={},i=c(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>ZA(d))),f(e,["generatedVideos"],u)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const a=c(n,["raiMediaFilteredReasons"]);return a!=null&&f(e,["raiMediaFilteredReasons"],a),e}function QA(n){const e={},i=c(n,["video"]);return i!=null&&f(e,["video"],iC(i)),e}function ZA(n){const e={},i=c(n,["_self"]);return i!=null&&f(e,["video"],oC(i)),e}function WA(n){const e={},i=c(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function jA(n){const e={},i=c(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function eC(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(n,["done"]);a!=null&&f(e,["done"],a);const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["response"]);return d!=null&&f(e,["response"],tC(d)),e}function tC(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["parent"]);s!=null&&f(e,["parent"],s);const a=c(n,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function Xv(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(n,["done"]);a!=null&&f(e,["done"],a);const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["response"]);return d!=null&&f(e,["response"],nC(d)),e}function nC(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["parent"]);s!=null&&f(e,["parent"],s);const a=c(n,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function iC(n){const e={},i=c(n,["uri"]);i!=null&&f(e,["uri"],i);const s=c(n,["encodedVideo"]);s!=null&&f(e,["videoBytes"],Ff(s));const a=c(n,["encoding"]);return a!=null&&f(e,["mimeType"],a),e}function oC(n){const e={},i=c(n,["gcsUri"]);i!=null&&f(e,["uri"],i);const s=c(n,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],Ff(s));const a=c(n,["mimeType"]);return a!=null&&f(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gg;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Gg||(Gg={}));var Pg;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Pg||(Pg={}));var Hg;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Hg||(Hg={}));var Re;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Re||(Re={}));var kg;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kg||(kg={}));var qg;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(qg||(qg={}));var Bg;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Bg||(Bg={}));var Vg;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Vg||(Vg={}));var zg;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(zg||(zg={}));var Fg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Fg||(Fg={}));var $g;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})($g||($g={}));var Jg;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Jg||(Jg={}));var Yg;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Yg||(Yg={}));var Kg;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Kg||(Kg={}));var Xg;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Xg||(Xg={}));var Qg;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Qg||(Qg={}));var Zg;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Zg||(Zg={}));var Wg;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Wg||(Wg={}));var jg;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(jg||(jg={}));var ey;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(ey||(ey={}));var ty;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ty||(ty={}));var Qa;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Qa||(Qa={}));var ny;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ny||(ny={}));var iy;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(iy||(iy={}));var oy;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(oy||(oy={}));var pf;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(pf||(pf={}));var sy;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(sy||(sy={}));var ly;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ly||(ly={}));var mf;(function(n){n.COLLECTION="COLLECTION"})(mf||(mf={}));var ay;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ay||(ay={}));var ry;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ry||(ry={}));var uy;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(uy||(uy={}));var cy;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(cy||(cy={}));var fy;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(fy||(fy={}));var dy;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(dy||(dy={}));var hy;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(hy||(hy={}));var py;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(py||(py={}));var my;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(my||(my={}));var gy;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(gy||(gy={}));var yy;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(yy||(yy={}));var vy;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(vy||(vy={}));var _y;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(_y||(_y={}));var Sy;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(Sy||(Sy={}));var Ty;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Ty||(Ty={}));var Ey;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Ey||(Ey={}));var Ay;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(Ay||(Ay={}));var Cy;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Cy||(Cy={}));var by;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(by||(by={}));var wy;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(wy||(wy={}));var Ry;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(Ry||(Ry={}));var xy;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xy||(xy={}));var Ny;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ny||(Ny={}));var Iy;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Iy||(Iy={}));var My;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(My||(My={}));var Dy;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Dy||(Dy={}));var Uy;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Uy||(Uy={}));var Go;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Go||(Go={}));class gf{constructor(e){const i={};for(const s of e.headers.entries())i[s[0]]=s[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class qs{get text(){var e,i,s,a,u,d,p,y;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const T of(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[A,C]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(C!==null||C!==void 0)&&_.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,m+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,i,s,a,u,d,p,y;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[T,A]of Object.entries(_))T!=="inlineData"&&(A!==null||A!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,i,s,a,u,d,p,y;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,i,s,a,u,d,p,y,m;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,i,s,a,u,d,p,y,m;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Ly{}class Oy{}class sC{}class lC{}class aC{}class rC{}class Gy{}class Py{}class Hy{}class uC{}class Za{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Za;let a;const u=e;return i?a=YA(u):a=JA(u),Object.assign(s,a),s}}class ky{}class qy{}class By{}class Vy{}class cC{}class fC{}class dC{}class $f{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new $f,u=eC(e);return Object.assign(s,u),s}}class hC{}class pC{}class mC{}class gC{}class zy{}class yC{get text(){var e,i,s;let a="",u=!1;const d=[];for(const p of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[y,m]of Object.entries(p))y!=="text"&&y!=="thought"&&m!==null&&d.push(y);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;u=!0,a+=p.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?a:void 0}get data(){var e,i,s;let a="";const u=[];for(const d of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[p,y]of Object.entries(d))p!=="inlineData"&&y!==null&&u.push(p);d.inlineData&&typeof d.inlineData.data=="string"&&(a+=atob(d.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class vC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Jf{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Jf,u=Xv(e);return Object.assign(s,u),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Me(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Qv(n,e){const i=Me(n,e);return i?i.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}`:i.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${i}`:i:""}function Zv(n){return Array.isArray(n)?n.map(e=>Wa(e)):[Wa(n)]}function Wa(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Wv(n){const e=Wa(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jv(n){const e=Wa(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Fy(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function e0(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Fy(e)):[Fy(n)]}function yf(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function $y(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Jy(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function _t(n){if(n==null)throw new Error("ContentUnion is required");return yf(n)?n:{role:"user",parts:e0(n)}}function Yf(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const s=_t(i);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const i=_t(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>_t(i)):[_t(e)]}function nn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if($y(n)||Jy(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[_t(n)]}const e=[],i=[],s=yf(n[0]);for(const a of n){const u=yf(a);if(u!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)e.push(a);else{if($y(a)||Jy(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return s||e.push({role:"user",parts:e0(i)}),e}function _C(n,e){n.includes("null")&&(e.nullable=!0);const i=n.filter(s=>s!=="null");if(i.length===1)e.type=Object.values(Re).includes(i[0].toUpperCase())?i[0].toUpperCase():Re.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of i)e.anyOf.push({type:Object.values(Re).includes(s.toUpperCase())?s.toUpperCase():Re.TYPE_UNSPECIFIED})}}function Ho(n){const e={},i=["items"],s=["anyOf"],a=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=n.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(e.nullable=!0,n=u[1]):u[1].type==="null"&&(e.nullable=!0,n=u[0])),n.type instanceof Array&&_C(n.type,e);for(const[d,p]of Object.entries(n))if(p!=null)if(d=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(Re).includes(p.toUpperCase())?p.toUpperCase():Re.TYPE_UNSPECIFIED}else if(i.includes(d))e[d]=Ho(p);else if(s.includes(d)){const y=[];for(const m of p){if(m.type=="null"){e.nullable=!0;continue}y.push(Ho(m))}e[d]=y}else if(a.includes(d)){const y={};for(const[m,v]of Object.entries(p))y[m]=Ho(v);e[d]=y}else{if(d==="additionalProperties")continue;e[d]=p}return e}function Kf(n){return Ho(n)}function Xf(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Qf(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function qo(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ho(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ho(e.response));return n}function Bo(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of n)e.push(i);return e}function SC(n,e,i,s=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:a?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function Vn(n,e){if(typeof e!="string")throw new Error("name must be a string");return SC(n,e,"cachedContents")}function t0(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function yi(n){return Ff(n)}function TC(n){return n!=null&&typeof n=="object"&&"name"in n}function EC(n){return n!=null&&typeof n=="object"&&"video"in n}function AC(n){return n!=null&&typeof n=="object"&&"uri"in n}function n0(n){var e;let i;if(TC(n)&&(i=n.name),!(AC(n)&&(i=n.uri,i===void 0))&&!(EC(n)&&(i=(e=n.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof n=="string"&&(i=n),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function i0(n,e){let i;return n.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function o0(n){for(const e of["models","tunedModels","publisherModels"])if(CC(n,e))return n[e];return[]}function CC(n,e){return n!==null&&typeof n=="object"&&e in n}function bC(n,e={}){const i=n,s={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(s.responseJsonSchema=i.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function wC(n,e={}){const i=[],s=new Set;for(const a of n){const u=a.name;if(s.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);s.add(u);const d=bC(a,e);d.functionDeclarations&&i.push(...d.functionDeclarations)}return{functionDeclarations:i}}function s0(n,e){let i;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const s=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,a=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(n.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function RC(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function l0(n){if(typeof n!="object"||n===null)return{};const e=n,i=e.inlinedResponses;if(typeof i!="object"||i===null)return n;const a=i.inlinedResponses;if(!Array.isArray(a)||a.length===0)return n;let u=!1;for(const d of a){if(typeof d!="object"||d===null)continue;const y=d.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){u=!0;break}}return u&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Vo(n,e){const i=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function a0(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xC(n){const e={},i=c(n,["responsesFile"]);i!=null&&f(e,["fileName"],i);const s=c(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>rb(d))),f(e,["inlinedResponses"],u)}const a=c(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["inlinedEmbedContentResponses"],u)}return e}function NC(n){const e={},i=c(n,["predictionsFormat"]);i!=null&&f(e,["format"],i);const s=c(n,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const a=c(n,["bigqueryDestination","outputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function IC(n){const e={},i=c(n,["format"]);i!=null&&f(e,["predictionsFormat"],i);const s=c(n,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const a=c(n,["bigqueryUri"]);if(a!=null&&f(e,["bigqueryDestination","outputUri"],a),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ka(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const a=c(n,["metadata","state"]);a!=null&&f(e,["state"],a0(a));const u=c(n,["metadata","createTime"]);u!=null&&f(e,["createTime"],u);const d=c(n,["metadata","endTime"]);d!=null&&f(e,["endTime"],d);const p=c(n,["metadata","updateTime"]);p!=null&&f(e,["updateTime"],p);const y=c(n,["metadata","model"]);y!=null&&f(e,["model"],y);const m=c(n,["metadata","output"]);return m!=null&&f(e,["dest"],xC(l0(m))),e}function vf(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["displayName"]);s!=null&&f(e,["displayName"],s);const a=c(n,["state"]);a!=null&&f(e,["state"],a0(a));const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["createTime"]);d!=null&&f(e,["createTime"],d);const p=c(n,["startTime"]);p!=null&&f(e,["startTime"],p);const y=c(n,["endTime"]);y!=null&&f(e,["endTime"],y);const m=c(n,["updateTime"]);m!=null&&f(e,["updateTime"],m);const v=c(n,["model"]);v!=null&&f(e,["model"],v);const _=c(n,["inputConfig"]);_!=null&&f(e,["src"],MC(_));const T=c(n,["outputConfig"]);T!=null&&f(e,["dest"],NC(l0(T)));const A=c(n,["completionStats"]);return A!=null&&f(e,["completionStats"],A),e}function MC(n){const e={},i=c(n,["instancesFormat"]);i!=null&&f(e,["format"],i);const s=c(n,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const a=c(n,["bigquerySource","inputUri"]);return a!=null&&f(e,["bigqueryUri"],a),e}function DC(n,e){const i={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=c(e,["fileName"]);s!=null&&f(i,["fileName"],s);const a=c(e,["inlinedRequests"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>ab(n,d))),f(i,["requests","requests"],u)}return i}function UC(n){const e={},i=c(n,["format"]);i!=null&&f(e,["instancesFormat"],i);const s=c(n,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const a=c(n,["bigqueryUri"]);if(a!=null&&f(e,["bigquerySource","inputUri"],a),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function LC(n){const e={},i=c(n,["data"]);if(i!=null&&f(e,["data"],i),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function OC(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function GC(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function PC(n){const e={},i=c(n,["content"]);i!=null&&f(e,["content"],i);const s=c(n,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],HC(s));const a=c(n,["tokenCount"]);a!=null&&f(e,["tokenCount"],a);const u=c(n,["finishReason"]);u!=null&&f(e,["finishReason"],u);const d=c(n,["avgLogprobs"]);d!=null&&f(e,["avgLogprobs"],d);const p=c(n,["groundingMetadata"]);p!=null&&f(e,["groundingMetadata"],p);const y=c(n,["index"]);y!=null&&f(e,["index"],y);const m=c(n,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=c(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),f(e,["safetyRatings"],T)}const _=c(n,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function HC(n){const e={},i=c(n,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["citations"],s)}return e}function r0(n){const e={},i=c(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>mb(u))),f(e,["parts"],a)}const s=c(n,["role"]);return s!=null&&f(e,["role"],s),e}function kC(n,e){const i={},s=c(n,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function qC(n,e){const i={},s=c(n,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const a=c(n,["dest"]);return e!==void 0&&a!=null&&f(e,["outputConfig"],IC(RC(a))),i}function Yy(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["_url","model"],Me(n,s));const a=c(e,["src"]);a!=null&&f(i,["batch","inputConfig"],DC(n,s0(n,a)));const u=c(e,["config"]);return u!=null&&kC(u,i),i}function BC(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["model"],Me(n,s));const a=c(e,["src"]);a!=null&&f(i,["inputConfig"],UC(s0(n,a)));const u=c(e,["config"]);return u!=null&&qC(u,i),i}function VC(n,e){const i={},s=c(n,["displayName"]);return e!==void 0&&s!=null&&f(e,["batch","displayName"],s),i}function zC(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["_url","model"],Me(n,s));const a=c(e,["src"]);a!=null&&f(i,["batch","inputConfig"],QC(n,a));const u=c(e,["config"]);return u!=null&&VC(u,i),i}function FC(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function $C(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function JC(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["name"]);s!=null&&f(e,["name"],s);const a=c(n,["done"]);a!=null&&f(e,["done"],a);const u=c(n,["error"]);return u!=null&&f(e,["error"],u),e}function YC(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["name"]);s!=null&&f(e,["name"],s);const a=c(n,["done"]);a!=null&&f(e,["done"],a);const u=c(n,["error"]);return u!=null&&f(e,["error"],u),e}function KC(n,e){const i={},s=c(e,["contents"]);if(s!=null){let u=Yf(n,s);Array.isArray(u)&&(u=u.map(d=>d)),f(i,["requests[]","request","content"],u)}const a=c(e,["config"]);return a!=null&&(f(i,["_self"],XC(a,i)),FA(i,{"requests[].*":"requests[].request.*"})),i}function XC(n,e){const i={},s=c(n,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const a=c(n,["title"]);e!==void 0&&a!=null&&f(e,["requests[]","title"],a);const u=c(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&f(e,["requests[]","outputDimensionality"],u),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function QC(n,e){const i={},s=c(e,["fileName"]);s!=null&&f(i,["file_name"],s);const a=c(e,["inlinedRequests"]);return a!=null&&f(i,["requests"],KC(n,a)),i}function ZC(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function WC(n){const e={},i=c(n,["id"]);i!=null&&f(e,["id"],i);const s=c(n,["args"]);s!=null&&f(e,["args"],s);const a=c(n,["name"]);if(a!=null&&f(e,["name"],a),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jC(n){const e={},i=c(n,["allowedFunctionNames"]);i!=null&&f(e,["allowedFunctionNames"],i);const s=c(n,["mode"]);if(s!=null&&f(e,["mode"],s),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function eb(n,e,i){const s={},a=c(e,["systemInstruction"]);i!==void 0&&a!=null&&f(i,["systemInstruction"],r0(_t(a)));const u=c(e,["temperature"]);u!=null&&f(s,["temperature"],u);const d=c(e,["topP"]);d!=null&&f(s,["topP"],d);const p=c(e,["topK"]);p!=null&&f(s,["topK"],p);const y=c(e,["candidateCount"]);y!=null&&f(s,["candidateCount"],y);const m=c(e,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const v=c(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=c(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const T=c(e,["logprobs"]);T!=null&&f(s,["logprobs"],T);const A=c(e,["presencePenalty"]);A!=null&&f(s,["presencePenalty"],A);const C=c(e,["frequencyPenalty"]);C!=null&&f(s,["frequencyPenalty"],C);const I=c(e,["seed"]);I!=null&&f(s,["seed"],I);const w=c(e,["responseMimeType"]);w!=null&&f(s,["responseMimeType"],w);const q=c(e,["responseSchema"]);q!=null&&f(s,["responseSchema"],Kf(q));const B=c(e,["responseJsonSchema"]);if(B!=null&&f(s,["responseJsonSchema"],B),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=c(e,["safetySettings"]);if(i!==void 0&&k!=null){let Le=k;Array.isArray(Le)&&(Le=Le.map(Ue=>gb(Ue))),f(i,["safetySettings"],Le)}const G=c(e,["tools"]);if(i!==void 0&&G!=null){let Le=Bo(G);Array.isArray(Le)&&(Le=Le.map(Ue=>vb(qo(Ue)))),f(i,["tools"],Le)}const P=c(e,["toolConfig"]);if(i!==void 0&&P!=null&&f(i,["toolConfig"],yb(P)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=c(e,["cachedContent"]);i!==void 0&&W!=null&&f(i,["cachedContent"],Vn(n,W));const J=c(e,["responseModalities"]);J!=null&&f(s,["responseModalities"],J);const ce=c(e,["mediaResolution"]);ce!=null&&f(s,["mediaResolution"],ce);const X=c(e,["speechConfig"]);if(X!=null&&f(s,["speechConfig"],Xf(X)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const oe=c(e,["thinkingConfig"]);oe!=null&&f(s,["thinkingConfig"],oe);const se=c(e,["imageConfig"]);se!=null&&f(s,["imageConfig"],lb(se));const Se=c(e,["enableEnhancedCivicAnswers"]);if(Se!=null&&f(s,["enableEnhancedCivicAnswers"],Se),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function tb(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(m=>PC(m))),f(e,["candidates"],y)}const a=c(n,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const u=c(n,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const d=c(n,["responseId"]);d!=null&&f(e,["responseId"],d);const p=c(n,["usageMetadata"]);return p!=null&&f(e,["usageMetadata"],p),e}function nb(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function ib(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function ob(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function sb(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function lb(n){const e={},i=c(n,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const s=c(n,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),c(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ab(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["request","model"],Me(n,s));const a=c(e,["contents"]);if(a!=null){let p=nn(a);Array.isArray(p)&&(p=p.map(y=>r0(y))),f(i,["request","contents"],p)}const u=c(e,["metadata"]);u!=null&&f(i,["metadata"],u);const d=c(e,["config"]);return d!=null&&f(i,["request","generationConfig"],eb(n,d,c(i,["request"],{}))),i}function rb(n){const e={},i=c(n,["response"]);i!=null&&f(e,["response"],tb(i));const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(n,["error"]);return a!=null&&f(e,["error"],a),e}function ub(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(n,["pageToken"]);if(e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function cb(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(n,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const u=c(n,["filter"]);return e!==void 0&&u!=null&&f(e,["_query","filter"],u),i}function fb(n){const e={},i=c(n,["config"]);return i!=null&&ub(i,e),e}function db(n){const e={},i=c(n,["config"]);return i!=null&&cb(i,e),e}function hb(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(n,["operations"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>ka(d))),f(e,["batchJobs"],u)}return e}function pb(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(n,["batchPredictionJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>vf(d))),f(e,["batchJobs"],u)}return e}function mb(n){const e={},i=c(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=c(n,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(n,["fileData"]);u!=null&&f(e,["fileData"],ZC(u));const d=c(n,["functionCall"]);d!=null&&f(e,["functionCall"],WC(d));const p=c(n,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(n,["inlineData"]);y!=null&&f(e,["inlineData"],LC(y));const m=c(n,["text"]);m!=null&&f(e,["text"],m);const v=c(n,["thought"]);v!=null&&f(e,["thought"],v);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const T=c(n,["videoMetadata"]);return T!=null&&f(e,["videoMetadata"],T),e}function gb(n){const e={},i=c(n,["category"]);if(i!=null&&f(e,["category"],i),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(n,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function yb(n){const e={},i=c(n,["retrievalConfig"]);i!=null&&f(e,["retrievalConfig"],i);const s=c(n,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],jC(s)),e}function vb(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=c(n,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const a=c(n,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(n,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const d=c(n,["googleMaps"]);d!=null&&f(e,["googleMaps"],ob(d));const p=c(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],sb(p));const y=c(n,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=c(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qn;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(qn||(qn={}));class zi{constructor(e,i,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,s,a)}init(e,i,s){var a,u;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!s||Object.keys(s).length===0?d={config:{}}:typeof s=="object"?d=Object.assign({},s):d=s,d.config&&(d.config.pageToken=i.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(u=(a=d.config)===null||a===void 0?void 0:a.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _b=class extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new zi(qn.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=Yy(this.apiClient,e),s=i._url,a=ee("{model}:batchGenerateContent",s),p=i.batch.inputConfig.requests,y=p.requests,m=[];for(const v of y){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const A=_.request;A.systemInstruction=T,_.request=A}m.push(_)}return p.requests=m,delete i.config,delete i._url,delete i._query,{path:a,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const s=i?Object.assign({},i):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const u=this.getGcsUri(e),d=this.getBigqueryUri(e);if(u)u.endsWith(".jsonl")?s.dest=`${u.slice(0,-6)}/dest`:s.dest=`${u}_dest_${a}`;else if(d)s.dest=`${d}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=BC(this.apiClient,e);return p=ee("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>vf(v))}else{const m=Yy(this.apiClient,e);return p=ee("{model}:batchGenerateContent",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>ka(v))}}async createEmbeddingsInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=zC(this.apiClient,e);return u=ee("{model}:asyncBatchEmbedContent",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>ka(y))}}async get(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=ib(this.apiClient,e);return p=ee("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>vf(v))}else{const m=nb(this.apiClient,e);return p=ee("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>ka(v))}}async cancel(e){var i,s,a,u;let d="",p={};if(this.apiClient.isVertexAI()){const y=GC(this.apiClient,e);d=ee("batchPredictionJobs/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=OC(this.apiClient,e);d=ee("batches/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=db(e);return p=ee("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=pb(v),T=new zy;return Object.assign(T,_),T})}else{const m=fb(e);return p=ee("batches",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=hb(v),T=new zy;return Object.assign(T,_),T})}}async delete(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=$C(this.apiClient,e);return p=ee("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>YC(v))}else{const m=FC(this.apiClient,e);return p=ee("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>JC(v))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sb(n){const e={},i=c(n,["data"]);if(i!=null&&f(e,["data"],i),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Ky(n){const e={},i=c(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>zb(u))),f(e,["parts"],a)}const s=c(n,["role"]);return s!=null&&f(e,["role"],s),e}function Tb(n,e){const i={},s=c(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(n,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const u=c(n,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const d=c(n,["contents"]);if(e!==void 0&&d!=null){let v=nn(d);Array.isArray(v)&&(v=v.map(_=>Ky(_))),f(e,["contents"],v)}const p=c(n,["systemInstruction"]);e!==void 0&&p!=null&&f(e,["systemInstruction"],Ky(_t(p)));const y=c(n,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(_=>$b(_))),f(e,["tools"],v)}const m=c(n,["toolConfig"]);if(e!==void 0&&m!=null&&f(e,["toolConfig"],Fb(m)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function Eb(n,e){const i={},s=c(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(n,["expireTime"]);e!==void 0&&a!=null&&f(e,["expireTime"],a);const u=c(n,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const d=c(n,["contents"]);if(e!==void 0&&d!=null){let _=nn(d);Array.isArray(_)&&(_=_.map(T=>T)),f(e,["contents"],_)}const p=c(n,["systemInstruction"]);e!==void 0&&p!=null&&f(e,["systemInstruction"],_t(p));const y=c(n,["tools"]);if(e!==void 0&&y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>Jb(T))),f(e,["tools"],_)}const m=c(n,["toolConfig"]);e!==void 0&&m!=null&&f(e,["toolConfig"],m);const v=c(n,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),i}function Ab(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["model"],Qv(n,s));const a=c(e,["config"]);return a!=null&&Tb(a,i),i}function Cb(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["model"],Qv(n,s));const a=c(e,["config"]);return a!=null&&Eb(a,i),i}function bb(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vn(n,s)),i}function wb(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vn(n,s)),i}function Rb(n){const e={},i=c(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function xb(n){const e={},i=c(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Nb(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Ib(n){const e={},i=c(n,["id"]);i!=null&&f(e,["id"],i);const s=c(n,["args"]);s!=null&&f(e,["args"],s);const a=c(n,["name"]);if(a!=null&&f(e,["name"],a),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Mb(n){const e={},i=c(n,["allowedFunctionNames"]);i!=null&&f(e,["allowedFunctionNames"],i);const s=c(n,["mode"]);if(s!=null&&f(e,["mode"],s),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Db(n){const e={},i=c(n,["description"]);i!=null&&f(e,["description"],i);const s=c(n,["name"]);s!=null&&f(e,["name"],s);const a=c(n,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(n,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(n,["response"]);d!=null&&f(e,["response"],d);const p=c(n,["responseJsonSchema"]);if(p!=null&&f(e,["responseJsonSchema"],p),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Ub(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vn(n,s)),i}function Lb(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vn(n,s)),i}function Ob(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function Gb(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function Pb(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function Hb(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function kb(n){const e={},i=c(n,["config"]);return i!=null&&Pb(i,e),e}function qb(n){const e={},i=c(n,["config"]);return i!=null&&Hb(i,e),e}function Bb(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(n,["cachedContents"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["cachedContents"],u)}return e}function Vb(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(n,["cachedContents"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["cachedContents"],u)}return e}function zb(n){const e={},i=c(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=c(n,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(n,["fileData"]);u!=null&&f(e,["fileData"],Nb(u));const d=c(n,["functionCall"]);d!=null&&f(e,["functionCall"],Ib(d));const p=c(n,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(n,["inlineData"]);y!=null&&f(e,["inlineData"],Sb(y));const m=c(n,["text"]);m!=null&&f(e,["text"],m);const v=c(n,["thought"]);v!=null&&f(e,["thought"],v);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const T=c(n,["videoMetadata"]);return T!=null&&f(e,["videoMetadata"],T),e}function Fb(n){const e={},i=c(n,["retrievalConfig"]);i!=null&&f(e,["retrievalConfig"],i);const s=c(n,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],Mb(s)),e}function $b(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=c(n,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const a=c(n,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(n,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const d=c(n,["googleMaps"]);d!=null&&f(e,["googleMaps"],Ob(d));const p=c(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],Gb(p));const y=c(n,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=c(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function Jb(n){const e={},i=c(n,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=c(n,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(n,["codeExecution"]);a!=null&&f(e,["codeExecution"],a);const u=c(n,["enterpriseWebSearch"]);u!=null&&f(e,["enterpriseWebSearch"],u);const d=c(n,["functionDeclarations"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(T=>Db(T))),f(e,["functionDeclarations"],_)}const p=c(n,["googleMaps"]);p!=null&&f(e,["googleMaps"],p);const y=c(n,["googleSearch"]);y!=null&&f(e,["googleSearch"],y);const m=c(n,["googleSearchRetrieval"]);m!=null&&f(e,["googleSearchRetrieval"],m);const v=c(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Yb(n,e){const i={},s=c(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(n,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function Kb(n,e){const i={},s=c(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const a=c(n,["expireTime"]);return e!==void 0&&a!=null&&f(e,["expireTime"],a),i}function Xb(n,e){const i={},s=c(e,["name"]);s!=null&&f(i,["_url","name"],Vn(n,s));const a=c(e,["config"]);return a!=null&&Yb(a,i),i}function Qb(n,e){const i={},s=c(e,["name"]);s!=null&&f(i,["_url","name"],Vn(n,s));const a=c(e,["config"]);return a!=null&&Kb(a,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zb extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new zi(qn.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(i),i)}async create(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Cb(this.apiClient,e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const m=Ab(this.apiClient,e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async get(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Lb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const m=Ub(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async delete(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=wb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=xb(v),T=new By;return Object.assign(T,_),T})}else{const m=bb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Rb(v),T=new By;return Object.assign(T,_),T})}}async update(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Qb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const m=Xb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async listInternal(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=qb(e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Vb(v),T=new Vy;return Object.assign(T,_),T})}else{const m=kb(e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Bb(v),T=new Vy;return Object.assign(T,_),T})}}}function ja(n,e){var i={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(i[s[a]]=n[s[a]]);return i}function Xy(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],s=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function me(n){return this instanceof me?(this.v=n,this):new me(n)}function cn(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(n,e||[]),a,u=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),a[Symbol.asyncIterator]=function(){return this},a;function d(A){return function(C){return Promise.resolve(C).then(A,_)}}function p(A,C){s[A]&&(a[A]=function(I){return new Promise(function(w,q){u.push([A,I,w,q])>1||y(A,I)})},C&&(a[A]=C(a[A])))}function y(A,C){try{m(s[A](C))}catch(I){T(u[0][3],I)}}function m(A){A.value instanceof me?Promise.resolve(A.value.v).then(v,_):T(u[0][2],A)}function v(A){y("next",A)}function _(A){y("throw",A)}function T(A,C){A(C),u.shift(),u.length&&y(u[0][0],u[0][1])}}function fn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof Xy=="function"?Xy(n):n[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(u){i[u]=n[u]&&function(d){return new Promise(function(p,y){d=n[u](d),a(p,y,d.done,d.value)})}}function a(u,d,p,y){Promise.resolve(y).then(function(m){u({value:m,done:p})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wb(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const i=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:u0(i)}function u0(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function jb(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Qy(n){if(n===void 0||n.length===0)return[];const e=[],i=n.length;let s=0;for(;s<i;)if(n[s].role==="user")e.push(n[s]),s++;else{const a=[];let u=!0;for(;s<i&&n[s].role==="model";)a.push(n[s]),u&&!u0(n[s])&&(u=!1),s++;u?e.push(...a):e.pop()}return e}class ew{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new tw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let tw=class{constructor(e,i,s,a={},u=[]){this.apiClient=e,this.modelsModule=i,this.model=s,this.config=a,this.history=u,this.sendPromise=Promise.resolve(),jb(u)}async sendMessage(e){var i;await this.sendPromise;const s=_t(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var u,d,p;const y=await a,m=(d=(u=y.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content,v=y.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(p=v.slice(_))!==null&&p!==void 0?p:[]);const A=m?[m]:[];this.recordHistory(s,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const s=_t(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const u=await a;return this.processStreamResponse(u,s)}getHistory(e=!1){const i=e?Qy(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return cn(this,arguments,function*(){var a,u,d,p,y,m;const v=[];try{for(var _=!0,T=fn(e),A;A=yield me(T.next()),a=A.done,!a;_=!0){p=A.value,_=!1;const C=p;if(Wb(C)){const I=(m=(y=C.candidates)===null||y===void 0?void 0:y[0])===null||m===void 0?void 0:m.content;I!==void 0&&v.push(I)}yield yield me(C)}}catch(C){u={error:C}}finally{try{!_&&!a&&(d=T.return)&&(yield me(d.call(T)))}finally{if(u)throw u.error}}this.recordHistory(i,v)})}recordHistory(e,i,s){let a=[];i.length>0&&i.every(u=>u.role!==void 0)?a=i:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Qy(s)):this.history.push(e),this.history.push(...a)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class il extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,il.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nw(n){const e={},i=c(n,["file"]);return i!=null&&f(e,["file"],i),e}function iw(n){const e={},i=c(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function ow(n){const e={},i=c(n,["name"]);return i!=null&&f(e,["_url","file"],n0(i)),e}function sw(n){const e={},i=c(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function lw(n){const e={},i=c(n,["name"]);return i!=null&&f(e,["_url","file"],n0(i)),e}function aw(n){const e={},i=c(n,["uris"]);return i!=null&&f(e,["uris"],i),e}function rw(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function uw(n){const e={},i=c(n,["config"]);return i!=null&&rw(i,e),e}function cw(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(n,["files"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["files"],u)}return e}function fw(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),f(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dw=class extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new zi(qn.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=uw(e);return u=ee("files",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=cw(y),v=new hC;return Object.assign(v,m),v})}}async createInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=nw(e);return u=ee("upload/v1beta/files",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const m=iw(y),v=new pC;return Object.assign(v,m),v})}}async get(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=lw(e);return u=ee("files/{file}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=ow(e);return u=ee("files/{file}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=sw(y),v=new mC;return Object.assign(v,m),v})}}async registerFilesInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=aw(e);return u=ee("files:register",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const m=fw(y),v=new gC;return Object.assign(v,m),v})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qa(n){const e={},i=c(n,["data"]);if(i!=null&&f(e,["data"],i),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function hw(n){const e={},i=c(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Nw(u))),f(e,["parts"],a)}const s=c(n,["role"]);return s!=null&&f(e,["role"],s),e}function pw(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function mw(n){const e={},i=c(n,["id"]);i!=null&&f(e,["id"],i);const s=c(n,["args"]);s!=null&&f(e,["args"],s);const a=c(n,["name"]);if(a!=null&&f(e,["name"],a),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gw(n){const e={},i=c(n,["description"]);i!=null&&f(e,["description"],i);const s=c(n,["name"]);s!=null&&f(e,["name"],s);const a=c(n,["parameters"]);a!=null&&f(e,["parameters"],a);const u=c(n,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(n,["response"]);d!=null&&f(e,["response"],d);const p=c(n,["responseJsonSchema"]);if(p!=null&&f(e,["responseJsonSchema"],p),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function yw(n){const e={},i=c(n,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const s=c(n,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const a=c(n,["audioTimestamp"]);a!=null&&f(e,["audioTimestamp"],a);const u=c(n,["candidateCount"]);u!=null&&f(e,["candidateCount"],u);const d=c(n,["enableAffectiveDialog"]);d!=null&&f(e,["enableAffectiveDialog"],d);const p=c(n,["frequencyPenalty"]);p!=null&&f(e,["frequencyPenalty"],p);const y=c(n,["logprobs"]);y!=null&&f(e,["logprobs"],y);const m=c(n,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=c(n,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=c(n,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const T=c(n,["responseLogprobs"]);T!=null&&f(e,["responseLogprobs"],T);const A=c(n,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const C=c(n,["responseModalities"]);C!=null&&f(e,["responseModalities"],C);const I=c(n,["responseSchema"]);I!=null&&f(e,["responseSchema"],I);const w=c(n,["routingConfig"]);w!=null&&f(e,["routingConfig"],w);const q=c(n,["seed"]);q!=null&&f(e,["seed"],q);const B=c(n,["speechConfig"]);B!=null&&f(e,["speechConfig"],B);const k=c(n,["stopSequences"]);k!=null&&f(e,["stopSequences"],k);const G=c(n,["temperature"]);G!=null&&f(e,["temperature"],G);const P=c(n,["thinkingConfig"]);P!=null&&f(e,["thinkingConfig"],P);const W=c(n,["topK"]);W!=null&&f(e,["topK"],W);const J=c(n,["topP"]);if(J!=null&&f(e,["topP"],J),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vw(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function _w(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function Sw(n,e){const i={},s=c(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const a=c(n,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const u=c(n,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(n,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const p=c(n,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=c(n,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=c(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=c(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Qf(_));const T=c(n,["thinkingConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=c(n,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],hw(_t(C)));const I=c(n,["tools"]);if(e!==void 0&&I!=null){let W=Bo(I);Array.isArray(W)&&(W=W.map(J=>Mw(qo(J)))),f(e,["setup","tools"],W)}const w=c(n,["sessionResumption"]);e!==void 0&&w!=null&&f(e,["setup","sessionResumption"],Iw(w));const q=c(n,["inputAudioTranscription"]);e!==void 0&&q!=null&&f(e,["setup","inputAudioTranscription"],q);const B=c(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","outputAudioTranscription"],B);const k=c(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&f(e,["setup","realtimeInputConfig"],k);const G=c(n,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],G);const P=c(n,["proactivity"]);if(e!==void 0&&P!=null&&f(e,["setup","proactivity"],P),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function Tw(n,e){const i={},s=c(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],yw(s));const a=c(n,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const u=c(n,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(n,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const p=c(n,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=c(n,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=c(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=c(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Qf(_));const T=c(n,["thinkingConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=c(n,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],_t(C));const I=c(n,["tools"]);if(e!==void 0&&I!=null){let J=Bo(I);Array.isArray(J)&&(J=J.map(ce=>Dw(qo(ce)))),f(e,["setup","tools"],J)}const w=c(n,["sessionResumption"]);e!==void 0&&w!=null&&f(e,["setup","sessionResumption"],w);const q=c(n,["inputAudioTranscription"]);e!==void 0&&q!=null&&f(e,["setup","inputAudioTranscription"],q);const B=c(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","outputAudioTranscription"],B);const k=c(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&f(e,["setup","realtimeInputConfig"],k);const G=c(n,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],G);const P=c(n,["proactivity"]);e!==void 0&&P!=null&&f(e,["setup","proactivity"],P);const W=c(n,["explicitVadSignal"]);return e!==void 0&&W!=null&&f(e,["setup","explicitVadSignal"],W),i}function Ew(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["setup","model"],Me(n,s));const a=c(e,["config"]);return a!=null&&f(i,["config"],Sw(a,i)),i}function Aw(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["setup","model"],Me(n,s));const a=c(e,["config"]);return a!=null&&f(i,["config"],Tw(a,i)),i}function Cw(n){const e={},i=c(n,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],i),e}function bw(n){const e={},i=c(n,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),f(e,["weightedPrompts"],s)}return e}function ww(n){const e={},i=c(n,["media"]);if(i!=null){let m=Zv(i);Array.isArray(m)&&(m=m.map(v=>qa(v))),f(e,["mediaChunks"],m)}const s=c(n,["audio"]);s!=null&&f(e,["audio"],qa(jv(s)));const a=c(n,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const u=c(n,["video"]);u!=null&&f(e,["video"],qa(Wv(u)));const d=c(n,["text"]);d!=null&&f(e,["text"],d);const p=c(n,["activityStart"]);p!=null&&f(e,["activityStart"],p);const y=c(n,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function Rw(n){const e={},i=c(n,["media"]);if(i!=null){let m=Zv(i);Array.isArray(m)&&(m=m.map(v=>v)),f(e,["mediaChunks"],m)}const s=c(n,["audio"]);s!=null&&f(e,["audio"],jv(s));const a=c(n,["audioStreamEnd"]);a!=null&&f(e,["audioStreamEnd"],a);const u=c(n,["video"]);u!=null&&f(e,["video"],Wv(u));const d=c(n,["text"]);d!=null&&f(e,["text"],d);const p=c(n,["activityStart"]);p!=null&&f(e,["activityStart"],p);const y=c(n,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function xw(n){const e={},i=c(n,["setupComplete"]);i!=null&&f(e,["setupComplete"],i);const s=c(n,["serverContent"]);s!=null&&f(e,["serverContent"],s);const a=c(n,["toolCall"]);a!=null&&f(e,["toolCall"],a);const u=c(n,["toolCallCancellation"]);u!=null&&f(e,["toolCallCancellation"],u);const d=c(n,["usageMetadata"]);d!=null&&f(e,["usageMetadata"],Uw(d));const p=c(n,["goAway"]);p!=null&&f(e,["goAway"],p);const y=c(n,["sessionResumptionUpdate"]);y!=null&&f(e,["sessionResumptionUpdate"],y);const m=c(n,["voiceActivityDetectionSignal"]);m!=null&&f(e,["voiceActivityDetectionSignal"],m);const v=c(n,["voiceActivity"]);return v!=null&&f(e,["voiceActivity"],Lw(v)),e}function Nw(n){const e={},i=c(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=c(n,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(n,["fileData"]);u!=null&&f(e,["fileData"],pw(u));const d=c(n,["functionCall"]);d!=null&&f(e,["functionCall"],mw(d));const p=c(n,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(n,["inlineData"]);y!=null&&f(e,["inlineData"],qa(y));const m=c(n,["text"]);m!=null&&f(e,["text"],m);const v=c(n,["thought"]);v!=null&&f(e,["thought"],v);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const T=c(n,["videoMetadata"]);return T!=null&&f(e,["videoMetadata"],T),e}function Iw(n){const e={},i=c(n,["handle"]);if(i!=null&&f(e,["handle"],i),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Mw(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=c(n,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const a=c(n,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(n,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const d=c(n,["googleMaps"]);d!=null&&f(e,["googleMaps"],vw(d));const p=c(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],_w(p));const y=c(n,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=c(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function Dw(n){const e={},i=c(n,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=c(n,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(n,["codeExecution"]);a!=null&&f(e,["codeExecution"],a);const u=c(n,["enterpriseWebSearch"]);u!=null&&f(e,["enterpriseWebSearch"],u);const d=c(n,["functionDeclarations"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(T=>gw(T))),f(e,["functionDeclarations"],_)}const p=c(n,["googleMaps"]);p!=null&&f(e,["googleMaps"],p);const y=c(n,["googleSearch"]);y!=null&&f(e,["googleSearch"],y);const m=c(n,["googleSearchRetrieval"]);m!=null&&f(e,["googleSearchRetrieval"],m);const v=c(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Uw(n){const e={},i=c(n,["promptTokenCount"]);i!=null&&f(e,["promptTokenCount"],i);const s=c(n,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const a=c(n,["candidatesTokenCount"]);a!=null&&f(e,["responseTokenCount"],a);const u=c(n,["toolUsePromptTokenCount"]);u!=null&&f(e,["toolUsePromptTokenCount"],u);const d=c(n,["thoughtsTokenCount"]);d!=null&&f(e,["thoughtsTokenCount"],d);const p=c(n,["totalTokenCount"]);p!=null&&f(e,["totalTokenCount"],p);const y=c(n,["promptTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(C=>C)),f(e,["promptTokensDetails"],A)}const m=c(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(C=>C)),f(e,["cacheTokensDetails"],A)}const v=c(n,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(C=>C)),f(e,["responseTokensDetails"],A)}const _=c(n,["toolUsePromptTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(C=>C)),f(e,["toolUsePromptTokensDetails"],A)}const T=c(n,["trafficType"]);return T!=null&&f(e,["trafficType"],T),e}function Lw(n){const e={},i=c(n,["type"]);return i!=null&&f(e,["voiceActivityType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ow(n,e){const i={},s=c(n,["data"]);if(s!=null&&f(i,["data"],s),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(n,["mimeType"]);return a!=null&&f(i,["mimeType"],a),i}function Gw(n,e){const i={},s=c(n,["content"]);s!=null&&f(i,["content"],s);const a=c(n,["citationMetadata"]);a!=null&&f(i,["citationMetadata"],Pw(a));const u=c(n,["tokenCount"]);u!=null&&f(i,["tokenCount"],u);const d=c(n,["finishReason"]);d!=null&&f(i,["finishReason"],d);const p=c(n,["avgLogprobs"]);p!=null&&f(i,["avgLogprobs"],p);const y=c(n,["groundingMetadata"]);y!=null&&f(i,["groundingMetadata"],y);const m=c(n,["index"]);m!=null&&f(i,["index"],m);const v=c(n,["logprobsResult"]);v!=null&&f(i,["logprobsResult"],v);const _=c(n,["safetyRatings"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(C=>C)),f(i,["safetyRatings"],A)}const T=c(n,["urlContextMetadata"]);return T!=null&&f(i,["urlContextMetadata"],T),i}function Pw(n,e){const i={},s=c(n,["citationSources"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),f(i,["citations"],a)}return i}function Hw(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["contents"]);if(u!=null){let d=nn(u);Array.isArray(d)&&(d=d.map(p=>p)),f(s,["contents"],d)}return s}function kw(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["tokensInfo"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(i,["tokensInfo"],u)}return i}function qw(n,e){const i={},s=c(n,["values"]);s!=null&&f(i,["values"],s);const a=c(n,["statistics"]);return a!=null&&f(i,["statistics"],Bw(a)),i}function Bw(n,e){const i={},s=c(n,["truncated"]);s!=null&&f(i,["truncated"],s);const a=c(n,["token_count"]);return a!=null&&f(i,["tokenCount"],a),i}function fr(n,e){const i={},s=c(n,["parts"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>QR(d))),f(i,["parts"],u)}const a=c(n,["role"]);return a!=null&&f(i,["role"],a),i}function Vw(n,e){const i={},s=c(n,["controlType"]);s!=null&&f(i,["controlType"],s);const a=c(n,["enableControlImageComputation"]);return a!=null&&f(i,["computeControl"],a),i}function zw(n,e){const i={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return i}function Fw(n,e,i){const s={},a=c(n,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],_t(a));const u=c(n,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>h0(y))),f(e,["tools"],p)}const d=c(n,["generationConfig"]);return e!==void 0&&d!=null&&f(e,["generationConfig"],OR(d)),s}function $w(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["contents"]);if(u!=null){let p=nn(u);Array.isArray(p)&&(p=p.map(y=>fr(y))),f(s,["contents"],p)}const d=c(e,["config"]);return d!=null&&zw(d),s}function Jw(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["contents"]);if(u!=null){let p=nn(u);Array.isArray(p)&&(p=p.map(y=>y)),f(s,["contents"],p)}const d=c(e,["config"]);return d!=null&&Fw(d,s),s}function Yw(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["totalTokens"]);a!=null&&f(i,["totalTokens"],a);const u=c(n,["cachedContentTokenCount"]);return u!=null&&f(i,["cachedContentTokenCount"],u),i}function Kw(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["totalTokens"]);return a!=null&&f(i,["totalTokens"],a),i}function Xw(n,e,i){const s={},a=c(e,["model"]);return a!=null&&f(s,["_url","name"],Me(n,a)),s}function Qw(n,e,i){const s={},a=c(e,["model"]);return a!=null&&f(s,["_url","name"],Me(n,a)),s}function Zw(n,e){const i={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function Ww(n,e){const i={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function jw(n,e,i){const s={},a=c(n,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const u=c(n,["negativePrompt"]);e!==void 0&&u!=null&&f(e,["parameters","negativePrompt"],u);const d=c(n,["numberOfImages"]);e!==void 0&&d!=null&&f(e,["parameters","sampleCount"],d);const p=c(n,["aspectRatio"]);e!==void 0&&p!=null&&f(e,["parameters","aspectRatio"],p);const y=c(n,["guidanceScale"]);e!==void 0&&y!=null&&f(e,["parameters","guidanceScale"],y);const m=c(n,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const v=c(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&f(e,["parameters","safetySetting"],v);const _=c(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const T=c(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&f(e,["parameters","includeSafetyAttributes"],T);const A=c(n,["includeRaiReason"]);e!==void 0&&A!=null&&f(e,["parameters","includeRaiReason"],A);const C=c(n,["language"]);e!==void 0&&C!=null&&f(e,["parameters","language"],C);const I=c(n,["outputMimeType"]);e!==void 0&&I!=null&&f(e,["parameters","outputOptions","mimeType"],I);const w=c(n,["outputCompressionQuality"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","compressionQuality"],w);const q=c(n,["addWatermark"]);e!==void 0&&q!=null&&f(e,["parameters","addWatermark"],q);const B=c(n,["labels"]);e!==void 0&&B!=null&&f(e,["labels"],B);const k=c(n,["editMode"]);e!==void 0&&k!=null&&f(e,["parameters","editMode"],k);const G=c(n,["baseSteps"]);return e!==void 0&&G!=null&&f(e,["parameters","editConfig","baseSteps"],G),s}function eR(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["prompt"]);u!=null&&f(s,["instances[0]","prompt"],u);const d=c(e,["referenceImages"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(m=>nx(m))),f(s,["instances[0]","referenceImages"],y)}const p=c(e,["config"]);return p!=null&&jw(p,s),s}function tR(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>dr(d))),f(i,["generatedImages"],u)}return i}function nR(n,e,i){const s={},a=c(n,["taskType"]);e!==void 0&&a!=null&&f(e,["requests[]","taskType"],a);const u=c(n,["title"]);e!==void 0&&u!=null&&f(e,["requests[]","title"],u);const d=c(n,["outputDimensionality"]);if(e!==void 0&&d!=null&&f(e,["requests[]","outputDimensionality"],d),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function iR(n,e,i){const s={},a=c(n,["taskType"]);e!==void 0&&a!=null&&f(e,["instances[]","task_type"],a);const u=c(n,["title"]);e!==void 0&&u!=null&&f(e,["instances[]","title"],u);const d=c(n,["outputDimensionality"]);e!==void 0&&d!=null&&f(e,["parameters","outputDimensionality"],d);const p=c(n,["mimeType"]);e!==void 0&&p!=null&&f(e,["instances[]","mimeType"],p);const y=c(n,["autoTruncate"]);return e!==void 0&&y!=null&&f(e,["parameters","autoTruncate"],y),s}function oR(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["contents"]);if(u!=null){let y=Yf(n,u);Array.isArray(y)&&(y=y.map(m=>m)),f(s,["requests[]","content"],y)}const d=c(e,["config"]);d!=null&&nR(d,s);const p=c(e,["model"]);return p!==void 0&&f(s,["requests[]","model"],Me(n,p)),s}function sR(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["contents"]);if(u!=null){let p=Yf(n,u);Array.isArray(p)&&(p=p.map(y=>y)),f(s,["instances[]","content"],p)}const d=c(e,["config"]);return d!=null&&iR(d,s),s}function lR(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["embeddings"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),f(i,["embeddings"],d)}const u=c(n,["metadata"]);return u!=null&&f(i,["metadata"],u),i}function aR(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["predictions[]","embeddings"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>qw(p))),f(i,["embeddings"],d)}const u=c(n,["metadata"]);return u!=null&&f(i,["metadata"],u),i}function rR(n,e){const i={},s=c(n,["endpoint"]);s!=null&&f(i,["name"],s);const a=c(n,["deployedModelId"]);return a!=null&&f(i,["deployedModelId"],a),i}function uR(n,e){const i={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["fileUri"]);s!=null&&f(i,["fileUri"],s);const a=c(n,["mimeType"]);return a!=null&&f(i,["mimeType"],a),i}function cR(n,e){const i={},s=c(n,["id"]);s!=null&&f(i,["id"],s);const a=c(n,["args"]);a!=null&&f(i,["args"],a);const u=c(n,["name"]);if(u!=null&&f(i,["name"],u),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return i}function fR(n,e){const i={},s=c(n,["allowedFunctionNames"]);s!=null&&f(i,["allowedFunctionNames"],s);const a=c(n,["mode"]);if(a!=null&&f(i,["mode"],a),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return i}function dR(n,e){const i={},s=c(n,["description"]);s!=null&&f(i,["description"],s);const a=c(n,["name"]);a!=null&&f(i,["name"],a);const u=c(n,["parameters"]);u!=null&&f(i,["parameters"],u);const d=c(n,["parametersJsonSchema"]);d!=null&&f(i,["parametersJsonSchema"],d);const p=c(n,["response"]);p!=null&&f(i,["response"],p);const y=c(n,["responseJsonSchema"]);if(y!=null&&f(i,["responseJsonSchema"],y),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return i}function hR(n,e,i,s){const a={},u=c(e,["systemInstruction"]);i!==void 0&&u!=null&&f(i,["systemInstruction"],fr(_t(u)));const d=c(e,["temperature"]);d!=null&&f(a,["temperature"],d);const p=c(e,["topP"]);p!=null&&f(a,["topP"],p);const y=c(e,["topK"]);y!=null&&f(a,["topK"],y);const m=c(e,["candidateCount"]);m!=null&&f(a,["candidateCount"],m);const v=c(e,["maxOutputTokens"]);v!=null&&f(a,["maxOutputTokens"],v);const _=c(e,["stopSequences"]);_!=null&&f(a,["stopSequences"],_);const T=c(e,["responseLogprobs"]);T!=null&&f(a,["responseLogprobs"],T);const A=c(e,["logprobs"]);A!=null&&f(a,["logprobs"],A);const C=c(e,["presencePenalty"]);C!=null&&f(a,["presencePenalty"],C);const I=c(e,["frequencyPenalty"]);I!=null&&f(a,["frequencyPenalty"],I);const w=c(e,["seed"]);w!=null&&f(a,["seed"],w);const q=c(e,["responseMimeType"]);q!=null&&f(a,["responseMimeType"],q);const B=c(e,["responseSchema"]);B!=null&&f(a,["responseSchema"],Kf(B));const k=c(e,["responseJsonSchema"]);if(k!=null&&f(a,["responseJsonSchema"],k),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=c(e,["safetySettings"]);if(i!==void 0&&G!=null){let Ue=G;Array.isArray(Ue)&&(Ue=Ue.map(Je=>ix(Je))),f(i,["safetySettings"],Ue)}const P=c(e,["tools"]);if(i!==void 0&&P!=null){let Ue=Bo(P);Array.isArray(Ue)&&(Ue=Ue.map(Je=>cx(qo(Je)))),f(i,["tools"],Ue)}const W=c(e,["toolConfig"]);if(i!==void 0&&W!=null&&f(i,["toolConfig"],ux(W)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=c(e,["cachedContent"]);i!==void 0&&J!=null&&f(i,["cachedContent"],Vn(n,J));const ce=c(e,["responseModalities"]);ce!=null&&f(a,["responseModalities"],ce);const X=c(e,["mediaResolution"]);X!=null&&f(a,["mediaResolution"],X);const oe=c(e,["speechConfig"]);if(oe!=null&&f(a,["speechConfig"],Xf(oe)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const se=c(e,["thinkingConfig"]);se!=null&&f(a,["thinkingConfig"],se);const Se=c(e,["imageConfig"]);Se!=null&&f(a,["imageConfig"],qR(Se));const Le=c(e,["enableEnhancedCivicAnswers"]);if(Le!=null&&f(a,["enableEnhancedCivicAnswers"],Le),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return a}function pR(n,e,i,s){const a={},u=c(e,["systemInstruction"]);i!==void 0&&u!=null&&f(i,["systemInstruction"],_t(u));const d=c(e,["temperature"]);d!=null&&f(a,["temperature"],d);const p=c(e,["topP"]);p!=null&&f(a,["topP"],p);const y=c(e,["topK"]);y!=null&&f(a,["topK"],y);const m=c(e,["candidateCount"]);m!=null&&f(a,["candidateCount"],m);const v=c(e,["maxOutputTokens"]);v!=null&&f(a,["maxOutputTokens"],v);const _=c(e,["stopSequences"]);_!=null&&f(a,["stopSequences"],_);const T=c(e,["responseLogprobs"]);T!=null&&f(a,["responseLogprobs"],T);const A=c(e,["logprobs"]);A!=null&&f(a,["logprobs"],A);const C=c(e,["presencePenalty"]);C!=null&&f(a,["presencePenalty"],C);const I=c(e,["frequencyPenalty"]);I!=null&&f(a,["frequencyPenalty"],I);const w=c(e,["seed"]);w!=null&&f(a,["seed"],w);const q=c(e,["responseMimeType"]);q!=null&&f(a,["responseMimeType"],q);const B=c(e,["responseSchema"]);B!=null&&f(a,["responseSchema"],Kf(B));const k=c(e,["responseJsonSchema"]);k!=null&&f(a,["responseJsonSchema"],k);const G=c(e,["routingConfig"]);G!=null&&f(a,["routingConfig"],G);const P=c(e,["modelSelectionConfig"]);P!=null&&f(a,["modelConfig"],P);const W=c(e,["safetySettings"]);if(i!==void 0&&W!=null){let Q=W;Array.isArray(Q)&&(Q=Q.map(Te=>Te)),f(i,["safetySettings"],Q)}const J=c(e,["tools"]);if(i!==void 0&&J!=null){let Q=Bo(J);Array.isArray(Q)&&(Q=Q.map(Te=>h0(qo(Te)))),f(i,["tools"],Q)}const ce=c(e,["toolConfig"]);i!==void 0&&ce!=null&&f(i,["toolConfig"],ce);const X=c(e,["labels"]);i!==void 0&&X!=null&&f(i,["labels"],X);const oe=c(e,["cachedContent"]);i!==void 0&&oe!=null&&f(i,["cachedContent"],Vn(n,oe));const se=c(e,["responseModalities"]);se!=null&&f(a,["responseModalities"],se);const Se=c(e,["mediaResolution"]);Se!=null&&f(a,["mediaResolution"],Se);const Le=c(e,["speechConfig"]);Le!=null&&f(a,["speechConfig"],Xf(Le));const Ue=c(e,["audioTimestamp"]);Ue!=null&&f(a,["audioTimestamp"],Ue);const Je=c(e,["thinkingConfig"]);Je!=null&&f(a,["thinkingConfig"],Je);const V=c(e,["imageConfig"]);if(V!=null&&f(a,["imageConfig"],BR(V)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Z=c(e,["modelArmorConfig"]);return i!==void 0&&Z!=null&&f(i,["modelArmorConfig"],Z),a}function Zy(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["contents"]);if(u!=null){let p=nn(u);Array.isArray(p)&&(p=p.map(y=>fr(y))),f(s,["contents"],p)}const d=c(e,["config"]);return d!=null&&f(s,["generationConfig"],hR(n,d,s)),s}function Wy(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["contents"]);if(u!=null){let p=nn(u);Array.isArray(p)&&(p=p.map(y=>y)),f(s,["contents"],p)}const d=c(e,["config"]);return d!=null&&f(s,["generationConfig"],pR(n,d,s)),s}function jy(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["candidates"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(v=>Gw(v))),f(i,["candidates"],m)}const u=c(n,["modelVersion"]);u!=null&&f(i,["modelVersion"],u);const d=c(n,["promptFeedback"]);d!=null&&f(i,["promptFeedback"],d);const p=c(n,["responseId"]);p!=null&&f(i,["responseId"],p);const y=c(n,["usageMetadata"]);return y!=null&&f(i,["usageMetadata"],y),i}function ev(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(_=>_)),f(i,["candidates"],v)}const u=c(n,["createTime"]);u!=null&&f(i,["createTime"],u);const d=c(n,["modelVersion"]);d!=null&&f(i,["modelVersion"],d);const p=c(n,["promptFeedback"]);p!=null&&f(i,["promptFeedback"],p);const y=c(n,["responseId"]);y!=null&&f(i,["responseId"],y);const m=c(n,["usageMetadata"]);return m!=null&&f(i,["usageMetadata"],m),i}function mR(n,e,i){const s={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=c(n,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const u=c(n,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const d=c(n,["guidanceScale"]);if(e!==void 0&&d!=null&&f(e,["parameters","guidanceScale"],d),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=c(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const y=c(n,["personGeneration"]);e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y);const m=c(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const v=c(n,["includeRaiReason"]);e!==void 0&&v!=null&&f(e,["parameters","includeRaiReason"],v);const _=c(n,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const T=c(n,["outputMimeType"]);e!==void 0&&T!=null&&f(e,["parameters","outputOptions","mimeType"],T);const A=c(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&f(e,["parameters","outputOptions","compressionQuality"],A),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=c(n,["imageSize"]);if(e!==void 0&&C!=null&&f(e,["parameters","sampleImageSize"],C),c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function gR(n,e,i){const s={},a=c(n,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const u=c(n,["negativePrompt"]);e!==void 0&&u!=null&&f(e,["parameters","negativePrompt"],u);const d=c(n,["numberOfImages"]);e!==void 0&&d!=null&&f(e,["parameters","sampleCount"],d);const p=c(n,["aspectRatio"]);e!==void 0&&p!=null&&f(e,["parameters","aspectRatio"],p);const y=c(n,["guidanceScale"]);e!==void 0&&y!=null&&f(e,["parameters","guidanceScale"],y);const m=c(n,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const v=c(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&f(e,["parameters","safetySetting"],v);const _=c(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const T=c(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&f(e,["parameters","includeSafetyAttributes"],T);const A=c(n,["includeRaiReason"]);e!==void 0&&A!=null&&f(e,["parameters","includeRaiReason"],A);const C=c(n,["language"]);e!==void 0&&C!=null&&f(e,["parameters","language"],C);const I=c(n,["outputMimeType"]);e!==void 0&&I!=null&&f(e,["parameters","outputOptions","mimeType"],I);const w=c(n,["outputCompressionQuality"]);e!==void 0&&w!=null&&f(e,["parameters","outputOptions","compressionQuality"],w);const q=c(n,["addWatermark"]);e!==void 0&&q!=null&&f(e,["parameters","addWatermark"],q);const B=c(n,["labels"]);e!==void 0&&B!=null&&f(e,["labels"],B);const k=c(n,["imageSize"]);e!==void 0&&k!=null&&f(e,["parameters","sampleImageSize"],k);const G=c(n,["enhancePrompt"]);return e!==void 0&&G!=null&&f(e,["parameters","enhancePrompt"],G),s}function yR(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["prompt"]);u!=null&&f(s,["instances[0]","prompt"],u);const d=c(e,["config"]);return d!=null&&mR(d,s),s}function vR(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["prompt"]);u!=null&&f(s,["instances[0]","prompt"],u);const d=c(e,["config"]);return d!=null&&gR(d,s),s}function _R(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["predictions"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>MR(p))),f(i,["generatedImages"],d)}const u=c(n,["positivePromptSafetyAttributes"]);return u!=null&&f(i,["positivePromptSafetyAttributes"],f0(u)),i}function SR(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["predictions"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>dr(p))),f(i,["generatedImages"],d)}const u=c(n,["positivePromptSafetyAttributes"]);return u!=null&&f(i,["positivePromptSafetyAttributes"],d0(u)),i}function TR(n,e,i){const s={},a=c(n,["numberOfVideos"]);if(e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=c(n,["durationSeconds"]);if(e!==void 0&&u!=null&&f(e,["parameters","durationSeconds"],u),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=c(n,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const p=c(n,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const y=c(n,["personGeneration"]);if(e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=c(n,["negativePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","negativePrompt"],m);const v=c(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&f(e,["parameters","enhancePrompt"],v),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=c(n,["lastFrame"]);e!==void 0&&_!=null&&f(e,["instances[0]","lastFrame"],hr(_));const T=c(n,["referenceImages"]);if(e!==void 0&&T!=null){let A=T;Array.isArray(A)&&(A=A.map(C=>Ax(C))),f(e,["instances[0]","referenceImages"],A)}if(c(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function ER(n,e,i){const s={},a=c(n,["numberOfVideos"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const u=c(n,["outputGcsUri"]);e!==void 0&&u!=null&&f(e,["parameters","storageUri"],u);const d=c(n,["fps"]);e!==void 0&&d!=null&&f(e,["parameters","fps"],d);const p=c(n,["durationSeconds"]);e!==void 0&&p!=null&&f(e,["parameters","durationSeconds"],p);const y=c(n,["seed"]);e!==void 0&&y!=null&&f(e,["parameters","seed"],y);const m=c(n,["aspectRatio"]);e!==void 0&&m!=null&&f(e,["parameters","aspectRatio"],m);const v=c(n,["resolution"]);e!==void 0&&v!=null&&f(e,["parameters","resolution"],v);const _=c(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const T=c(n,["pubsubTopic"]);e!==void 0&&T!=null&&f(e,["parameters","pubsubTopic"],T);const A=c(n,["negativePrompt"]);e!==void 0&&A!=null&&f(e,["parameters","negativePrompt"],A);const C=c(n,["enhancePrompt"]);e!==void 0&&C!=null&&f(e,["parameters","enhancePrompt"],C);const I=c(n,["generateAudio"]);e!==void 0&&I!=null&&f(e,["parameters","generateAudio"],I);const w=c(n,["lastFrame"]);e!==void 0&&w!=null&&f(e,["instances[0]","lastFrame"],dn(w));const q=c(n,["referenceImages"]);if(e!==void 0&&q!=null){let G=q;Array.isArray(G)&&(G=G.map(P=>Cx(P))),f(e,["instances[0]","referenceImages"],G)}const B=c(n,["mask"]);e!==void 0&&B!=null&&f(e,["instances[0]","mask"],Ex(B));const k=c(n,["compressionQuality"]);return e!==void 0&&k!=null&&f(e,["parameters","compressionQuality"],k),s}function AR(n,e){const i={},s=c(n,["name"]);s!=null&&f(i,["name"],s);const a=c(n,["metadata"]);a!=null&&f(i,["metadata"],a);const u=c(n,["done"]);u!=null&&f(i,["done"],u);const d=c(n,["error"]);d!=null&&f(i,["error"],d);const p=c(n,["response","generateVideoResponse"]);return p!=null&&f(i,["response"],RR(p)),i}function CR(n,e){const i={},s=c(n,["name"]);s!=null&&f(i,["name"],s);const a=c(n,["metadata"]);a!=null&&f(i,["metadata"],a);const u=c(n,["done"]);u!=null&&f(i,["done"],u);const d=c(n,["error"]);d!=null&&f(i,["error"],d);const p=c(n,["response"]);return p!=null&&f(i,["response"],xR(p)),i}function bR(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["prompt"]);u!=null&&f(s,["instances[0]","prompt"],u);const d=c(e,["image"]);d!=null&&f(s,["instances[0]","image"],hr(d));const p=c(e,["video"]);p!=null&&f(s,["instances[0]","video"],p0(p));const y=c(e,["source"]);y!=null&&NR(y,s);const m=c(e,["config"]);return m!=null&&TR(m,s),s}function wR(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["prompt"]);u!=null&&f(s,["instances[0]","prompt"],u);const d=c(e,["image"]);d!=null&&f(s,["instances[0]","image"],dn(d));const p=c(e,["video"]);p!=null&&f(s,["instances[0]","video"],m0(p));const y=c(e,["source"]);y!=null&&IR(y,s);const m=c(e,["config"]);return m!=null&&ER(m,s),s}function RR(n,e){const i={},s=c(n,["generatedSamples"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>UR(p))),f(i,["generatedVideos"],d)}const a=c(n,["raiMediaFilteredCount"]);a!=null&&f(i,["raiMediaFilteredCount"],a);const u=c(n,["raiMediaFilteredReasons"]);return u!=null&&f(i,["raiMediaFilteredReasons"],u),i}function xR(n,e){const i={},s=c(n,["videos"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>LR(p))),f(i,["generatedVideos"],d)}const a=c(n,["raiMediaFilteredCount"]);a!=null&&f(i,["raiMediaFilteredCount"],a);const u=c(n,["raiMediaFilteredReasons"]);return u!=null&&f(i,["raiMediaFilteredReasons"],u),i}function NR(n,e,i){const s={},a=c(n,["prompt"]);e!==void 0&&a!=null&&f(e,["instances[0]","prompt"],a);const u=c(n,["image"]);e!==void 0&&u!=null&&f(e,["instances[0]","image"],hr(u));const d=c(n,["video"]);return e!==void 0&&d!=null&&f(e,["instances[0]","video"],p0(d)),s}function IR(n,e,i){const s={},a=c(n,["prompt"]);e!==void 0&&a!=null&&f(e,["instances[0]","prompt"],a);const u=c(n,["image"]);e!==void 0&&u!=null&&f(e,["instances[0]","image"],dn(u));const d=c(n,["video"]);return e!==void 0&&d!=null&&f(e,["instances[0]","video"],m0(d)),s}function MR(n,e){const i={},s=c(n,["_self"]);s!=null&&f(i,["image"],VR(s));const a=c(n,["raiFilteredReason"]);a!=null&&f(i,["raiFilteredReason"],a);const u=c(n,["_self"]);return u!=null&&f(i,["safetyAttributes"],f0(u)),i}function dr(n,e){const i={},s=c(n,["_self"]);s!=null&&f(i,["image"],c0(s));const a=c(n,["raiFilteredReason"]);a!=null&&f(i,["raiFilteredReason"],a);const u=c(n,["_self"]);u!=null&&f(i,["safetyAttributes"],d0(u));const d=c(n,["prompt"]);return d!=null&&f(i,["enhancedPrompt"],d),i}function DR(n,e){const i={},s=c(n,["_self"]);s!=null&&f(i,["mask"],c0(s));const a=c(n,["labels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(i,["labels"],u)}return i}function UR(n,e){const i={},s=c(n,["video"]);return s!=null&&f(i,["video"],Sx(s)),i}function LR(n,e){const i={},s=c(n,["_self"]);return s!=null&&f(i,["video"],Tx(s)),i}function OR(n,e){const i={},s=c(n,["modelSelectionConfig"]);s!=null&&f(i,["modelConfig"],s);const a=c(n,["responseJsonSchema"]);a!=null&&f(i,["responseJsonSchema"],a);const u=c(n,["audioTimestamp"]);u!=null&&f(i,["audioTimestamp"],u);const d=c(n,["candidateCount"]);d!=null&&f(i,["candidateCount"],d);const p=c(n,["enableAffectiveDialog"]);p!=null&&f(i,["enableAffectiveDialog"],p);const y=c(n,["frequencyPenalty"]);y!=null&&f(i,["frequencyPenalty"],y);const m=c(n,["logprobs"]);m!=null&&f(i,["logprobs"],m);const v=c(n,["maxOutputTokens"]);v!=null&&f(i,["maxOutputTokens"],v);const _=c(n,["mediaResolution"]);_!=null&&f(i,["mediaResolution"],_);const T=c(n,["presencePenalty"]);T!=null&&f(i,["presencePenalty"],T);const A=c(n,["responseLogprobs"]);A!=null&&f(i,["responseLogprobs"],A);const C=c(n,["responseMimeType"]);C!=null&&f(i,["responseMimeType"],C);const I=c(n,["responseModalities"]);I!=null&&f(i,["responseModalities"],I);const w=c(n,["responseSchema"]);w!=null&&f(i,["responseSchema"],w);const q=c(n,["routingConfig"]);q!=null&&f(i,["routingConfig"],q);const B=c(n,["seed"]);B!=null&&f(i,["seed"],B);const k=c(n,["speechConfig"]);k!=null&&f(i,["speechConfig"],k);const G=c(n,["stopSequences"]);G!=null&&f(i,["stopSequences"],G);const P=c(n,["temperature"]);P!=null&&f(i,["temperature"],P);const W=c(n,["thinkingConfig"]);W!=null&&f(i,["thinkingConfig"],W);const J=c(n,["topK"]);J!=null&&f(i,["topK"],J);const ce=c(n,["topP"]);if(ce!=null&&f(i,["topP"],ce),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function GR(n,e,i){const s={},a=c(e,["model"]);return a!=null&&f(s,["_url","name"],Me(n,a)),s}function PR(n,e,i){const s={},a=c(e,["model"]);return a!=null&&f(s,["_url","name"],Me(n,a)),s}function HR(n,e){const i={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(n,["enableWidget"]);return s!=null&&f(i,["enableWidget"],s),i}function kR(n,e){const i={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=c(n,["timeRangeFilter"]);return s!=null&&f(i,["timeRangeFilter"],s),i}function qR(n,e){const i={},s=c(n,["aspectRatio"]);s!=null&&f(i,["aspectRatio"],s);const a=c(n,["imageSize"]);if(a!=null&&f(i,["imageSize"],a),c(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return i}function BR(n,e){const i={},s=c(n,["aspectRatio"]);s!=null&&f(i,["aspectRatio"],s);const a=c(n,["imageSize"]);a!=null&&f(i,["imageSize"],a);const u=c(n,["personGeneration"]);u!=null&&f(i,["personGeneration"],u);const d=c(n,["outputMimeType"]);d!=null&&f(i,["imageOutputOptions","mimeType"],d);const p=c(n,["outputCompressionQuality"]);return p!=null&&f(i,["imageOutputOptions","compressionQuality"],p),i}function VR(n,e){const i={},s=c(n,["bytesBase64Encoded"]);s!=null&&f(i,["imageBytes"],yi(s));const a=c(n,["mimeType"]);return a!=null&&f(i,["mimeType"],a),i}function c0(n,e){const i={},s=c(n,["gcsUri"]);s!=null&&f(i,["gcsUri"],s);const a=c(n,["bytesBase64Encoded"]);a!=null&&f(i,["imageBytes"],yi(a));const u=c(n,["mimeType"]);return u!=null&&f(i,["mimeType"],u),i}function hr(n,e){const i={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=c(n,["imageBytes"]);s!=null&&f(i,["bytesBase64Encoded"],yi(s));const a=c(n,["mimeType"]);return a!=null&&f(i,["mimeType"],a),i}function dn(n,e){const i={},s=c(n,["gcsUri"]);s!=null&&f(i,["gcsUri"],s);const a=c(n,["imageBytes"]);a!=null&&f(i,["bytesBase64Encoded"],yi(a));const u=c(n,["mimeType"]);return u!=null&&f(i,["mimeType"],u),i}function zR(n,e,i,s){const a={},u=c(e,["pageSize"]);i!==void 0&&u!=null&&f(i,["_query","pageSize"],u);const d=c(e,["pageToken"]);i!==void 0&&d!=null&&f(i,["_query","pageToken"],d);const p=c(e,["filter"]);i!==void 0&&p!=null&&f(i,["_query","filter"],p);const y=c(e,["queryBase"]);return i!==void 0&&y!=null&&f(i,["_url","models_url"],i0(n,y)),a}function FR(n,e,i,s){const a={},u=c(e,["pageSize"]);i!==void 0&&u!=null&&f(i,["_query","pageSize"],u);const d=c(e,["pageToken"]);i!==void 0&&d!=null&&f(i,["_query","pageToken"],d);const p=c(e,["filter"]);i!==void 0&&p!=null&&f(i,["_query","filter"],p);const y=c(e,["queryBase"]);return i!==void 0&&y!=null&&f(i,["_url","models_url"],i0(n,y)),a}function $R(n,e,i){const s={},a=c(e,["config"]);return a!=null&&zR(n,a,s),s}function JR(n,e,i){const s={},a=c(e,["config"]);return a!=null&&FR(n,a,s),s}function YR(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const u=c(n,["_self"]);if(u!=null){let d=o0(u);Array.isArray(d)&&(d=d.map(p=>_f(p))),f(i,["models"],d)}return i}function KR(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const u=c(n,["_self"]);if(u!=null){let d=o0(u);Array.isArray(d)&&(d=d.map(p=>Sf(p))),f(i,["models"],d)}return i}function XR(n,e){const i={},s=c(n,["maskMode"]);s!=null&&f(i,["maskMode"],s);const a=c(n,["segmentationClasses"]);a!=null&&f(i,["maskClasses"],a);const u=c(n,["maskDilation"]);return u!=null&&f(i,["dilation"],u),i}function _f(n,e){const i={},s=c(n,["name"]);s!=null&&f(i,["name"],s);const a=c(n,["displayName"]);a!=null&&f(i,["displayName"],a);const u=c(n,["description"]);u!=null&&f(i,["description"],u);const d=c(n,["version"]);d!=null&&f(i,["version"],d);const p=c(n,["_self"]);p!=null&&f(i,["tunedModelInfo"],fx(p));const y=c(n,["inputTokenLimit"]);y!=null&&f(i,["inputTokenLimit"],y);const m=c(n,["outputTokenLimit"]);m!=null&&f(i,["outputTokenLimit"],m);const v=c(n,["supportedGenerationMethods"]);v!=null&&f(i,["supportedActions"],v);const _=c(n,["temperature"]);_!=null&&f(i,["temperature"],_);const T=c(n,["maxTemperature"]);T!=null&&f(i,["maxTemperature"],T);const A=c(n,["topP"]);A!=null&&f(i,["topP"],A);const C=c(n,["topK"]);C!=null&&f(i,["topK"],C);const I=c(n,["thinking"]);return I!=null&&f(i,["thinking"],I),i}function Sf(n,e){const i={},s=c(n,["name"]);s!=null&&f(i,["name"],s);const a=c(n,["displayName"]);a!=null&&f(i,["displayName"],a);const u=c(n,["description"]);u!=null&&f(i,["description"],u);const d=c(n,["versionId"]);d!=null&&f(i,["version"],d);const p=c(n,["deployedModels"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(A=>rR(A))),f(i,["endpoints"],T)}const y=c(n,["labels"]);y!=null&&f(i,["labels"],y);const m=c(n,["_self"]);m!=null&&f(i,["tunedModelInfo"],dx(m));const v=c(n,["defaultCheckpointId"]);v!=null&&f(i,["defaultCheckpointId"],v);const _=c(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>A)),f(i,["checkpoints"],T)}return i}function QR(n,e){const i={},s=c(n,["mediaResolution"]);s!=null&&f(i,["mediaResolution"],s);const a=c(n,["codeExecutionResult"]);a!=null&&f(i,["codeExecutionResult"],a);const u=c(n,["executableCode"]);u!=null&&f(i,["executableCode"],u);const d=c(n,["fileData"]);d!=null&&f(i,["fileData"],uR(d));const p=c(n,["functionCall"]);p!=null&&f(i,["functionCall"],cR(p));const y=c(n,["functionResponse"]);y!=null&&f(i,["functionResponse"],y);const m=c(n,["inlineData"]);m!=null&&f(i,["inlineData"],Ow(m));const v=c(n,["text"]);v!=null&&f(i,["text"],v);const _=c(n,["thought"]);_!=null&&f(i,["thought"],_);const T=c(n,["thoughtSignature"]);T!=null&&f(i,["thoughtSignature"],T);const A=c(n,["videoMetadata"]);return A!=null&&f(i,["videoMetadata"],A),i}function ZR(n,e){const i={},s=c(n,["productImage"]);return s!=null&&f(i,["image"],dn(s)),i}function WR(n,e,i){const s={},a=c(n,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const u=c(n,["baseSteps"]);e!==void 0&&u!=null&&f(e,["parameters","baseSteps"],u);const d=c(n,["outputGcsUri"]);e!==void 0&&d!=null&&f(e,["parameters","storageUri"],d);const p=c(n,["seed"]);e!==void 0&&p!=null&&f(e,["parameters","seed"],p);const y=c(n,["safetyFilterLevel"]);e!==void 0&&y!=null&&f(e,["parameters","safetySetting"],y);const m=c(n,["personGeneration"]);e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m);const v=c(n,["addWatermark"]);e!==void 0&&v!=null&&f(e,["parameters","addWatermark"],v);const _=c(n,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const T=c(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&f(e,["parameters","outputOptions","compressionQuality"],T);const A=c(n,["enhancePrompt"]);e!==void 0&&A!=null&&f(e,["parameters","enhancePrompt"],A);const C=c(n,["labels"]);return e!==void 0&&C!=null&&f(e,["labels"],C),s}function jR(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["source"]);u!=null&&tx(u,s);const d=c(e,["config"]);return d!=null&&WR(d,s),s}function ex(n,e){const i={},s=c(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>dr(u))),f(i,["generatedImages"],a)}return i}function tx(n,e,i){const s={},a=c(n,["prompt"]);e!==void 0&&a!=null&&f(e,["instances[0]","prompt"],a);const u=c(n,["personImage"]);e!==void 0&&u!=null&&f(e,["instances[0]","personImage","image"],dn(u));const d=c(n,["productImages"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(y=>ZR(y))),f(e,["instances[0]","productImages"],p)}return s}function nx(n,e){const i={},s=c(n,["referenceImage"]);s!=null&&f(i,["referenceImage"],dn(s));const a=c(n,["referenceId"]);a!=null&&f(i,["referenceId"],a);const u=c(n,["referenceType"]);u!=null&&f(i,["referenceType"],u);const d=c(n,["maskImageConfig"]);d!=null&&f(i,["maskImageConfig"],XR(d));const p=c(n,["controlImageConfig"]);p!=null&&f(i,["controlImageConfig"],Vw(p));const y=c(n,["styleImageConfig"]);y!=null&&f(i,["styleImageConfig"],y);const m=c(n,["subjectImageConfig"]);return m!=null&&f(i,["subjectImageConfig"],m),i}function f0(n,e){const i={},s=c(n,["safetyAttributes","categories"]);s!=null&&f(i,["categories"],s);const a=c(n,["safetyAttributes","scores"]);a!=null&&f(i,["scores"],a);const u=c(n,["contentType"]);return u!=null&&f(i,["contentType"],u),i}function d0(n,e){const i={},s=c(n,["safetyAttributes","categories"]);s!=null&&f(i,["categories"],s);const a=c(n,["safetyAttributes","scores"]);a!=null&&f(i,["scores"],a);const u=c(n,["contentType"]);return u!=null&&f(i,["contentType"],u),i}function ix(n,e){const i={},s=c(n,["category"]);if(s!=null&&f(i,["category"],s),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(n,["threshold"]);return a!=null&&f(i,["threshold"],a),i}function ox(n,e){const i={},s=c(n,["image"]);return s!=null&&f(i,["image"],dn(s)),i}function sx(n,e,i){const s={},a=c(n,["mode"]);e!==void 0&&a!=null&&f(e,["parameters","mode"],a);const u=c(n,["maxPredictions"]);e!==void 0&&u!=null&&f(e,["parameters","maxPredictions"],u);const d=c(n,["confidenceThreshold"]);e!==void 0&&d!=null&&f(e,["parameters","confidenceThreshold"],d);const p=c(n,["maskDilation"]);e!==void 0&&p!=null&&f(e,["parameters","maskDilation"],p);const y=c(n,["binaryColorThreshold"]);e!==void 0&&y!=null&&f(e,["parameters","binaryColorThreshold"],y);const m=c(n,["labels"]);return e!==void 0&&m!=null&&f(e,["labels"],m),s}function lx(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["source"]);u!=null&&rx(u,s);const d=c(e,["config"]);return d!=null&&sx(d,s),s}function ax(n,e){const i={},s=c(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>DR(u))),f(i,["generatedMasks"],a)}return i}function rx(n,e,i){const s={},a=c(n,["prompt"]);e!==void 0&&a!=null&&f(e,["instances[0]","prompt"],a);const u=c(n,["image"]);e!==void 0&&u!=null&&f(e,["instances[0]","image"],dn(u));const d=c(n,["scribbleImage"]);return e!==void 0&&d!=null&&f(e,["instances[0]","scribble"],ox(d)),s}function ux(n,e){const i={},s=c(n,["retrievalConfig"]);s!=null&&f(i,["retrievalConfig"],s);const a=c(n,["functionCallingConfig"]);return a!=null&&f(i,["functionCallingConfig"],fR(a)),i}function cx(n,e){const i={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["computerUse"]);s!=null&&f(i,["computerUse"],s);const a=c(n,["fileSearch"]);a!=null&&f(i,["fileSearch"],a);const u=c(n,["codeExecution"]);if(u!=null&&f(i,["codeExecution"],u),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(n,["functionDeclarations"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(T=>T)),f(i,["functionDeclarations"],_)}const p=c(n,["googleMaps"]);p!=null&&f(i,["googleMaps"],HR(p));const y=c(n,["googleSearch"]);y!=null&&f(i,["googleSearch"],kR(y));const m=c(n,["googleSearchRetrieval"]);m!=null&&f(i,["googleSearchRetrieval"],m);const v=c(n,["urlContext"]);return v!=null&&f(i,["urlContext"],v),i}function h0(n,e){const i={},s=c(n,["retrieval"]);s!=null&&f(i,["retrieval"],s);const a=c(n,["computerUse"]);if(a!=null&&f(i,["computerUse"],a),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=c(n,["codeExecution"]);u!=null&&f(i,["codeExecution"],u);const d=c(n,["enterpriseWebSearch"]);d!=null&&f(i,["enterpriseWebSearch"],d);const p=c(n,["functionDeclarations"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(A=>dR(A))),f(i,["functionDeclarations"],T)}const y=c(n,["googleMaps"]);y!=null&&f(i,["googleMaps"],y);const m=c(n,["googleSearch"]);m!=null&&f(i,["googleSearch"],m);const v=c(n,["googleSearchRetrieval"]);v!=null&&f(i,["googleSearchRetrieval"],v);const _=c(n,["urlContext"]);return _!=null&&f(i,["urlContext"],_),i}function fx(n,e){const i={},s=c(n,["baseModel"]);s!=null&&f(i,["baseModel"],s);const a=c(n,["createTime"]);a!=null&&f(i,["createTime"],a);const u=c(n,["updateTime"]);return u!=null&&f(i,["updateTime"],u),i}function dx(n,e){const i={},s=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&f(i,["baseModel"],s);const a=c(n,["createTime"]);a!=null&&f(i,["createTime"],a);const u=c(n,["updateTime"]);return u!=null&&f(i,["updateTime"],u),i}function hx(n,e,i){const s={},a=c(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const u=c(n,["description"]);e!==void 0&&u!=null&&f(e,["description"],u);const d=c(n,["defaultCheckpointId"]);return e!==void 0&&d!=null&&f(e,["defaultCheckpointId"],d),s}function px(n,e,i){const s={},a=c(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const u=c(n,["description"]);e!==void 0&&u!=null&&f(e,["description"],u);const d=c(n,["defaultCheckpointId"]);return e!==void 0&&d!=null&&f(e,["defaultCheckpointId"],d),s}function mx(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","name"],Me(n,a));const u=c(e,["config"]);return u!=null&&hx(u,s),s}function gx(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["config"]);return u!=null&&px(u,s),s}function yx(n,e,i){const s={},a=c(n,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const u=c(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const d=c(n,["personGeneration"]);e!==void 0&&d!=null&&f(e,["parameters","personGeneration"],d);const p=c(n,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const y=c(n,["outputMimeType"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","mimeType"],y);const m=c(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m);const v=c(n,["enhanceInputImage"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],v);const _=c(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=c(n,["labels"]);e!==void 0&&T!=null&&f(e,["labels"],T);const A=c(n,["numberOfImages"]);e!==void 0&&A!=null&&f(e,["parameters","sampleCount"],A);const C=c(n,["mode"]);return e!==void 0&&C!=null&&f(e,["parameters","mode"],C),s}function vx(n,e,i){const s={},a=c(e,["model"]);a!=null&&f(s,["_url","model"],Me(n,a));const u=c(e,["image"]);u!=null&&f(s,["instances[0]","image"],dn(u));const d=c(e,["upscaleFactor"]);d!=null&&f(s,["parameters","upscaleConfig","upscaleFactor"],d);const p=c(e,["config"]);return p!=null&&yx(p,s),s}function _x(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["predictions"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>dr(d))),f(i,["generatedImages"],u)}return i}function Sx(n,e){const i={},s=c(n,["uri"]);s!=null&&f(i,["uri"],s);const a=c(n,["encodedVideo"]);a!=null&&f(i,["videoBytes"],yi(a));const u=c(n,["encoding"]);return u!=null&&f(i,["mimeType"],u),i}function Tx(n,e){const i={},s=c(n,["gcsUri"]);s!=null&&f(i,["uri"],s);const a=c(n,["bytesBase64Encoded"]);a!=null&&f(i,["videoBytes"],yi(a));const u=c(n,["mimeType"]);return u!=null&&f(i,["mimeType"],u),i}function Ex(n,e){const i={},s=c(n,["image"]);s!=null&&f(i,["_self"],dn(s));const a=c(n,["maskMode"]);return a!=null&&f(i,["maskMode"],a),i}function Ax(n,e){const i={},s=c(n,["image"]);s!=null&&f(i,["image"],hr(s));const a=c(n,["referenceType"]);return a!=null&&f(i,["referenceType"],a),i}function Cx(n,e){const i={},s=c(n,["image"]);s!=null&&f(i,["image"],dn(s));const a=c(n,["referenceType"]);return a!=null&&f(i,["referenceType"],a),i}function p0(n,e){const i={},s=c(n,["uri"]);s!=null&&f(i,["uri"],s);const a=c(n,["videoBytes"]);a!=null&&f(i,["encodedVideo"],yi(a));const u=c(n,["mimeType"]);return u!=null&&f(i,["encoding"],u),i}function m0(n,e){const i={},s=c(n,["uri"]);s!=null&&f(i,["gcsUri"],s);const a=c(n,["videoBytes"]);a!=null&&f(i,["bytesBase64Encoded"],yi(a));const u=c(n,["mimeType"]);return u!=null&&f(i,["mimeType"],u),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bx(n,e){const i={},s=c(n,["displayName"]);return e!==void 0&&s!=null&&f(e,["displayName"],s),i}function wx(n){const e={},i=c(n,["config"]);return i!=null&&bx(i,e),e}function Rx(n,e){const i={},s=c(n,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),i}function xx(n){const e={},i=c(n,["name"]);i!=null&&f(e,["_url","name"],i);const s=c(n,["config"]);return s!=null&&Rx(s,e),e}function Nx(n){const e={},i=c(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function Ix(n,e){const i={},s=c(n,["customMetadata"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["customMetadata"],u)}const a=c(n,["chunkingConfig"]);return e!==void 0&&a!=null&&f(e,["chunkingConfig"],a),i}function Mx(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const a=c(n,["done"]);a!=null&&f(e,["done"],a);const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["response"]);return d!=null&&f(e,["response"],Ux(d)),e}function Dx(n){const e={},i=c(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const s=c(n,["fileName"]);s!=null&&f(e,["fileName"],s);const a=c(n,["config"]);return a!=null&&Ix(a,e),e}function Ux(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["parent"]);s!=null&&f(e,["parent"],s);const a=c(n,["documentName"]);return a!=null&&f(e,["documentName"],a),e}function Lx(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function Ox(n){const e={},i=c(n,["config"]);return i!=null&&Lx(i,e),e}function Gx(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(n,["fileSearchStores"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["fileSearchStores"],u)}return e}function g0(n,e){const i={},s=c(n,["mimeType"]);e!==void 0&&s!=null&&f(e,["mimeType"],s);const a=c(n,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const u=c(n,["customMetadata"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>y)),f(e,["customMetadata"],p)}const d=c(n,["chunkingConfig"]);return e!==void 0&&d!=null&&f(e,["chunkingConfig"],d),i}function Px(n){const e={},i=c(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const s=c(n,["config"]);return s!=null&&g0(s,e),e}function Hx(n){const e={},i=c(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kx="Content-Type",qx="X-Server-Timeout",Bx="User-Agent",Tf="x-goog-api-client",Vx="1.40.0",zx=`google-genai-sdk/${Vx}`,Fx="v1beta1",$x="v1beta";class Jx{constructor(e){var i,s,a;this.clientOptions=Object.assign({},e),this.customBaseUrl=(i=e.httpOptions)===null||i===void 0?void 0:i.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const u={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const p=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!p?(u.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?u.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(u.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),u.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:Fx}else{if(!this.clientOptions.apiKey)throw new il({message:"API key must be set when using the Gemini API.",status:403});u.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:$x,u.baseUrl="https://generativelanguage.googleapis.com/"}u.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=u,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(u,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,s){const a=[this.getRequestUrlInternal(i)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e,i){return!(i.baseUrl&&i.baseUrlResourceScope===mf.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,i),a=this.constructUrl(e.path,i,s);if(e.queryParams)for(const[d,p]of Object.entries(e.queryParams))a.searchParams.append(d,String(p));let u={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=e.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,i,a.toString(),e.abortSignal),this.unaryApiCall(a,u,e.httpMethod)}patchHttpOptions(e,i){const s=JSON.parse(JSON.stringify(e));for(const[a,u]of Object.entries(i))typeof u=="object"?s[a]=Object.assign(Object.assign({},s[a]),u):u!==void 0&&(s[a]=u);return s}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,i),a=this.constructUrl(e.path,i,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let u={};return u.body=e.body,u=await this.includeExtraHttpOptionsToRequestInit(u,i,a.toString(),e.abortSignal),this.streamApiCall(a,u,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,s,a){if(i&&i.timeout||a){const u=new AbortController,d=u.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const p=setTimeout(()=>u.abort(),i.timeout);p&&typeof p.unref=="function"&&p.unref()}a&&a.addEventListener("abort",()=>{u.abort()}),e.signal=d}return i&&i.extraBody!==null&&Yx(e,i.extraBody),e.headers=await this.getHeadersInternal(i,s),e}async unaryApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async a=>(await tv(a),new gf(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async a=>(await tv(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return cn(this,arguments,function*(){var s;const a=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),u=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let d="";const p="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield me(a.read());if(m){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=u.decode(v,{stream:!0});try{const C=JSON.parse(_);if("error"in C){const I=JSON.parse(JSON.stringify(C.error)),w=I.status,q=I.code,B=`got status: ${w}. ${JSON.stringify(C)}`;if(q>=400&&q<600)throw new il({message:B,status:q})}}catch(C){if(C.name==="ApiError")throw C}d+=_;let T=-1,A=0;for(;;){T=-1,A=0;for(const w of y){const q=d.indexOf(w);q!==-1&&(T===-1||q<T)&&(T=q,A=w.length)}if(T===-1)break;const C=d.substring(0,T);d=d.substring(T+A);const I=C.trim();if(I.startsWith(p)){const w=I.substring(p.length).trim();try{const q=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield me(new gf(q))}catch(q){throw new Error(`exception parsing stream chunk ${w}. ${q}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},i=zx+" "+this.clientOptions.userAgentExtra;return e[Bx]=i,e[Tf]=i,e[kx]="application/json",e}async getHeadersInternal(e,i){const s=new Headers;if(e&&e.headers){for(const[a,u]of Object.entries(e.headers))s.append(a,u);e.timeout&&e.timeout>0&&s.append(qx,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,i),s}getFileName(e){var i;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(i=s.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),s}async uploadFile(e,i){var s;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const u=this.clientOptions.uploader,d=await u.stat(e);a.sizeBytes=String(d.size);const p=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:d.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=p;const y={file:a},m=this.getFileName(e),v=ee("upload/v1beta/files",y._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,m,y,i==null?void 0:i.httpOptions);return u.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,s){var a;const u=this.clientOptions.uploader,d=await u.stat(i),p=String(d.size),y=(a=s==null?void 0:s.mimeType)!==null&&a!==void 0?a:d.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};s!=null&&g0(s,_);const T=await this.fetchUploadUrl(m,p,y,v,_,s==null?void 0:s.httpOptions);return u.uploadToFileSearchStore(i,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,s,a,u,d){var p;let y={};d?y=d:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const m=await this.request({path:e,body:JSON.stringify(u),httpMethod:"POST",httpOptions:y});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(p=m==null?void 0:m.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function tv(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const i=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const a=JSON.stringify(s);throw i>=400&&i<600?new il({message:a,status:i}):new Error(a)}}function Yx(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof n.body=="string"&&n.body.length>0)try{const u=JSON.parse(n.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))i=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(u,d){const p=Object.assign({},u);for(const y in d)if(Object.prototype.hasOwnProperty.call(d,y)){const m=d[y],v=p[y];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?p[y]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),p[y]=m)}return p}const a=s(i,e);n.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kx="mcp_used/unknown";let Xx=!1;function y0(n){for(const e of n)if(Qx(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Xx}function v0(n){var e;const i=(e=n[Tf])!==null&&e!==void 0?e:"";n[Tf]=(i+` ${Kx}`).trimStart()}function Qx(n){return n!==null&&typeof n=="object"&&n instanceof Zf}function Zx(n){return cn(this,arguments,function*(i,s=100){let a,u=0;for(;u<s;){const d=yield me(i.listTools({cursor:a}));for(const p of d.tools)yield yield me(p),u++;if(!d.nextCursor)break;a=d.nextCursor}})}class Zf{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Zf(e,i)}async initialize(){var e,i,s,a;if(this.mcpTools.length>0)return;const u={},d=[];for(const v of this.mcpClients)try{for(var p=!0,y=(i=void 0,fn(Zx(v))),m;m=await y.next(),e=m.done,!e;p=!0){a=m.value,p=!1;const _=a;d.push(_);const T=_.name;if(u[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);u[T]=v}}catch(_){i={error:_}}finally{try{!p&&!e&&(s=y.return)&&await s.call(y)}finally{if(i)throw i.error}}this.mcpTools=d,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),wC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const d=await a.callTool({name:s.name,arguments:s.args},void 0,u);i.push({functionResponse:{name:s.name,response:d.isError?{error:d}:d}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Wx(n,e,i){const s=new vC;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data),Object.assign(s,a),e(s)}class jx{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s}async connect(e){var i,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),d=nN(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),y=`${a}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${p}`;let m=()=>{};const v=new Promise(k=>{m=k}),_=e.callbacks,T=function(){m({})},A=this.apiClient,C={onopen:T,onmessage:k=>{Wx(A,_.onmessage,k)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(k){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(k){}},I=this.webSocketFactory.create(y,tN(d),C);I.connect(),await v;const B={setup:{model:Me(this.apiClient,e.model)}};return I.send(JSON.stringify(B)),new eN(I,this.apiClient)}}class eN{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=bw(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=Cw(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Go.PLAY)}pause(){this.sendPlaybackControl(Go.PAUSE)}stop(){this.sendPlaybackControl(Go.STOP)}resetContext(){this.sendPlaybackControl(Go.RESET_CONTEXT)}close(){this.conn.close()}}function tN(n){const e={};return n.forEach((i,s)=>{e[s]=i}),e}function nN(n){const e=new Headers;for(const[i,s]of Object.entries(n))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function oN(n,e,i){const s=new yC;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const u=JSON.parse(a);if(n.isVertexAI()){const d=xw(u);Object.assign(s,d)}else Object.assign(s,u);e(s)}class sN{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s,this.music=new jx(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,s,a,u,d,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&y0(e.config.tools)&&v0(_);const T=uN(_);if(this.apiClient.isVertexAI()){const X=this.apiClient.getProject(),oe=this.apiClient.getLocation(),se=this.apiClient.getApiKey(),Se=!!X&&!!oe||!!se;this.apiClient.getCustomBaseUrl()&&!Se?v=y:(v=`${y}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v))}else{const X=this.apiClient.getApiKey();let oe="BidiGenerateContent",se="key";X!=null&&X.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),oe="BidiGenerateContentConstrained",se="access_token"),v=`${y}/ws/google.ai.generativelanguage.${m}.GenerativeService.${oe}?${se}=${X}`}let A=()=>{};const C=new Promise(X=>{A=X}),I=e.callbacks,w=function(){var X;(X=I==null?void 0:I.onopen)===null||X===void 0||X.call(I),A({})},q=this.apiClient,B={onopen:w,onmessage:X=>{oN(q,I.onmessage,X)},onerror:(i=I==null?void 0:I.onerror)!==null&&i!==void 0?i:function(X){},onclose:(s=I==null?void 0:I.onclose)!==null&&s!==void 0?s:function(X){}},k=this.webSocketFactory.create(v,rN(T),B);k.connect(),await C;let G=Me(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const X=this.apiClient.getProject(),oe=this.apiClient.getLocation();X&&oe&&(G=`projects/${X}/locations/${oe}/`+G)}let P={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Qa.AUDIO]}:e.config.responseModalities=[Qa.AUDIO]),!((u=e.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(p=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&p!==void 0?p:[],J=[];for(const X of W)if(this.isCallableTool(X)){const oe=X;J.push(await oe.tool())}else J.push(X);J.length>0&&(e.config.tools=J);const ce={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=Aw(this.apiClient,ce):P=Ew(this.apiClient,ce),delete P.config,k.send(JSON.stringify(P)),new aN(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const lN={turnComplete:!0};class aN{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let s=[];try{s=nn(i.turns),e.isVertexAI()||(s=s.map(a=>fr(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:s,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let s=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?s=i.functionResponses:s=[i.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const u of s){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!e.isVertexAI()&&!("id"in u))throw new Error(iN)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},lN),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:Rw(e)}:i={realtimeInput:ww(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function rN(n){const e={};return n.forEach((i,s)=>{e[s]=i}),e}function uN(n){const e=new Headers;for(const[i,s]of Object.entries(n))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nv=10;function iv(n){var e,i,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const d of(i=n==null?void 0:n.tools)!==null&&i!==void 0?i:[])if(ko(d)){a=!0;break}if(!a)return!0;const u=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function ko(n){return"callTool"in n&&typeof n.callTool=="function"}function cN(n){var e,i,s;return(s=(i=(e=n.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>ko(a)))!==null&&s!==void 0?s:!1}function ov(n){var e;const i=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,a)=>{if(ko(s))return;const u=s;u.functionDeclarations&&u.functionDeclarations.length>0&&i.push(a)}),i}function sv(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fN=class extends Bn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var s,a,u,d,p;const y=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!cN(i)||iv(i.config))return await this.generateContentInternal(y);const m=ov(i);if(m.length>0){const I=m.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${I}.`)}let v,_;const T=nn(y.contents),A=(u=(a=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&u!==void 0?u:nv;let C=0;for(;C<A&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const I=v.candidates[0].content,w=[];for(const q of(p=(d=i.config)===null||d===void 0?void 0:d.tools)!==null&&p!==void 0?p:[])if(ko(q)){const k=await q.callTool(v.functionCalls);w.push(...k)}C++,_={role:"user",parts:w},y.contents=nn(y.contents),y.contents.push(I),y.contents.push(_),sv(y.config)&&(T.push(I),T.push(_))}return sv(y.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async i=>{var s,a,u,d,p;if(this.maybeMoveToResponseJsonSchem(i),iv(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const y=ov(i);if(y.length>0){const _=y.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(u=(a=(s=i==null?void 0:i.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,v=(p=(d=i==null?void 0:i.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||p===void 0?void 0:p.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(s=>{var a;let u;const d=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((a=y==null?void 0:y.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?u=y==null?void 0:y.safetyAttributes:d.push(y);let p;return u?p={generatedImages:d,positivePromptSafetyAttributes:u,sdkHttpResponse:s.sdkHttpResponse}:p={generatedImages:d,sdkHttpResponse:s.sdkHttpResponse},p}),this.list=async i=>{var s;const d={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((s=d.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new zi(qn.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(d),d)},this.editImage=async i=>{const s={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(s.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async i=>{let s={numberOfImages:1,mode:"upscale"};i.config&&(s=Object.assign(Object.assign({},s),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>{var s,a,u,d,p,y;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=i.video)===null||s===void 0)&&s.uri&&(!((a=i.video)===null||a===void 0)&&a.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((d=(u=i.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.uri&&(!((y=(p=i.source)===null||p===void 0?void 0:p.video)===null||y===void 0)&&y.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,s,a;const u=(i=e.config)===null||i===void 0?void 0:i.tools;if(!u)return e;const d=await Promise.all(u.map(async y=>ko(y)?await y.tool():y)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(p.config.tools=d,e.config&&e.config.tools&&y0(e.config.tools)){const y=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},y);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),v0(m),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return p}async initAfcToolsMap(e){var i,s,a;const u=new Map;for(const d of(s=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&s!==void 0?s:[])if(ko(d)){const p=d,y=await p.tool();for(const m of(a=y.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(u.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);u.set(m.name,p)}}return u}async processAfcStream(e){var i,s,a;const u=(a=(s=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:nv;let d=!1,p=0;const y=await this.initAfcToolsMap(e);return(function(m,v,_){return cn(this,arguments,function*(){for(var T,A,C,I,w,q;p<u;){d&&(p++,d=!1);const P=yield me(m.processParamsMaybeAddMcpUsage(_)),W=yield me(m.generateContentStreamInternal(P)),J=[],ce=[];try{for(var B=!0,k=(A=void 0,fn(W)),G;G=yield me(k.next()),T=G.done,!T;B=!0){I=G.value,B=!1;const X=I;if(yield yield me(X),X.candidates&&(!((w=X.candidates[0])===null||w===void 0)&&w.content)){ce.push(X.candidates[0].content);for(const oe of(q=X.candidates[0].content.parts)!==null&&q!==void 0?q:[])if(p<u&&oe.functionCall){if(!oe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(oe.functionCall.name)){const se=yield me(v.get(oe.functionCall.name).callTool([oe.functionCall]));J.push(...se)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${oe.functionCall.name}`)}}}}catch(X){A={error:X}}finally{try{!B&&!T&&(C=k.return)&&(yield me(C.call(k)))}finally{if(A)throw A.error}}if(J.length>0){d=!0;const X=new qs;X.candidates=[{content:{role:"user",parts:J}}],yield yield me(X);const oe=[];oe.push(...ce),oe.push({role:"user",parts:J});const se=nn(_.contents).concat(oe);_.contents=se}else break}})})(this,y,e)}async generateContentInternal(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Wy(this.apiClient,e);return p=ee("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=ev(v),T=new qs;return Object.assign(T,_),T})}else{const m=Zy(this.apiClient,e);return p=ee("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=jy(v),T=new qs;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Wy(this.apiClient,e);return p=ee("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),d.then(function(_){return cn(this,arguments,function*(){var T,A,C,I;try{for(var w=!0,q=fn(_),B;B=yield me(q.next()),T=B.done,!T;w=!0){I=B.value,w=!1;const k=I,G=ev(yield me(k.json()),e);G.sdkHttpResponse={headers:k.headers};const P=new qs;Object.assign(P,G),yield yield me(P)}}catch(k){A={error:k}}finally{try{!w&&!T&&(C=q.return)&&(yield me(C.call(q)))}finally{if(A)throw A.error}}})})}else{const m=Zy(this.apiClient,e);return p=ee("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}),d.then(function(_){return cn(this,arguments,function*(){var T,A,C,I;try{for(var w=!0,q=fn(_),B;B=yield me(q.next()),T=B.done,!T;w=!0){I=B.value,w=!1;const k=I,G=jy(yield me(k.json()),e);G.sdkHttpResponse={headers:k.headers};const P=new qs;Object.assign(P,G),yield yield me(P)}}catch(k){A={error:k}}finally{try{!w&&!T&&(C=q.return)&&(yield me(C.call(q)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=sR(this.apiClient,e);return p=ee("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=aR(v),T=new Ly;return Object.assign(T,_),T})}else{const m=oR(this.apiClient,e);return p=ee("{model}:batchEmbedContents",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=lR(v),T=new Ly;return Object.assign(T,_),T})}}async generateImagesInternal(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=vR(this.apiClient,e);return p=ee("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=SR(v),T=new Oy;return Object.assign(T,_),T})}else{const m=yR(this.apiClient,e);return p=ee("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=_R(v),T=new Oy;return Object.assign(T,_),T})}}async editImageInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=eR(this.apiClient,e);return u=ee("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=tR(y),v=new sC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=vx(this.apiClient,e);return u=ee("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=_x(y),v=new lC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=jR(this.apiClient,e);return u=ee("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const m=ex(y),v=new aC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=lx(this.apiClient,e);return u=ee("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const m=ax(y),v=new rC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=PR(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>Sf(v))}else{const m=GR(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>_f(v))}}async listInternal(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=JR(this.apiClient,e);return p=ee("{models_url}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=KR(v),T=new Gy;return Object.assign(T,_),T})}else{const m=$R(this.apiClient,e);return p=ee("{models_url}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=YR(v),T=new Gy;return Object.assign(T,_),T})}}async update(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=gx(this.apiClient,e);return p=ee("{model}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>Sf(v))}else{const m=mx(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>_f(v))}}async delete(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Qw(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Ww(v),T=new Py;return Object.assign(T,_),T})}else{const m=Xw(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Zw(v),T=new Py;return Object.assign(T,_),T})}}async countTokens(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Jw(this.apiClient,e);return p=ee("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Kw(v),T=new Hy;return Object.assign(T,_),T})}else{const m=$w(this.apiClient,e);return p=ee("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Yw(v),T=new Hy;return Object.assign(T,_),T})}}async computeTokens(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=Hw(this.apiClient,e);return u=ee("{model}:computeTokens",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=kw(y),v=new uC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=wR(this.apiClient,e);return p=ee("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>{const _=CR(v),T=new Za;return Object.assign(T,_),T})}else{const m=bR(this.apiClient,e);return p=ee("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>{const _=AR(v),T=new Za;return Object.assign(T,_),T})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dN extends Bn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:u}});return i._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:u}});return i._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=jA(e);return p=ee("{operationName}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d}else{const m=WA(e);return p=ee("{operationName}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d}}async fetchPredictVideosOperationInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=$A(e);return u=ee("{resourceName}:fetchPredictOperation",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hN(n){const e={},i=c(n,["data"]);if(i!=null&&f(e,["data"],i),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function pN(n){const e={},i=c(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>AN(u))),f(e,["parts"],a)}const s=c(n,["role"]);return s!=null&&f(e,["role"],s),e}function mN(n,e,i){const s={},a=c(e,["expireTime"]);i!==void 0&&a!=null&&f(i,["expireTime"],a);const u=c(e,["newSessionExpireTime"]);i!==void 0&&u!=null&&f(i,["newSessionExpireTime"],u);const d=c(e,["uses"]);i!==void 0&&d!=null&&f(i,["uses"],d);const p=c(e,["liveConnectConstraints"]);i!==void 0&&p!=null&&f(i,["bidiGenerateContentSetup"],EN(n,p));const y=c(e,["lockAdditionalFields"]);return i!==void 0&&y!=null&&f(i,["fieldMask"],y),s}function gN(n,e){const i={},s=c(e,["config"]);return s!=null&&f(i,["config"],mN(n,s,i)),i}function yN(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function vN(n){const e={},i=c(n,["id"]);i!=null&&f(e,["id"],i);const s=c(n,["args"]);s!=null&&f(e,["args"],s);const a=c(n,["name"]);if(a!=null&&f(e,["name"],a),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _N(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function SN(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function TN(n,e){const i={},s=c(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const a=c(n,["responseModalities"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","responseModalities"],a);const u=c(n,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(n,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const p=c(n,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=c(n,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=c(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=c(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Qf(_));const T=c(n,["thinkingConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const C=c(n,["systemInstruction"]);e!==void 0&&C!=null&&f(e,["setup","systemInstruction"],pN(_t(C)));const I=c(n,["tools"]);if(e!==void 0&&I!=null){let W=Bo(I);Array.isArray(W)&&(W=W.map(J=>bN(qo(J)))),f(e,["setup","tools"],W)}const w=c(n,["sessionResumption"]);e!==void 0&&w!=null&&f(e,["setup","sessionResumption"],CN(w));const q=c(n,["inputAudioTranscription"]);e!==void 0&&q!=null&&f(e,["setup","inputAudioTranscription"],q);const B=c(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","outputAudioTranscription"],B);const k=c(n,["realtimeInputConfig"]);e!==void 0&&k!=null&&f(e,["setup","realtimeInputConfig"],k);const G=c(n,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],G);const P=c(n,["proactivity"]);if(e!==void 0&&P!=null&&f(e,["setup","proactivity"],P),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function EN(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["setup","model"],Me(n,s));const a=c(e,["config"]);return a!=null&&f(i,["config"],TN(a,i)),i}function AN(n){const e={},i=c(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=c(n,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const a=c(n,["executableCode"]);a!=null&&f(e,["executableCode"],a);const u=c(n,["fileData"]);u!=null&&f(e,["fileData"],yN(u));const d=c(n,["functionCall"]);d!=null&&f(e,["functionCall"],vN(d));const p=c(n,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(n,["inlineData"]);y!=null&&f(e,["inlineData"],hN(y));const m=c(n,["text"]);m!=null&&f(e,["text"],m);const v=c(n,["thought"]);v!=null&&f(e,["thought"],v);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const T=c(n,["videoMetadata"]);return T!=null&&f(e,["videoMetadata"],T),e}function CN(n){const e={},i=c(n,["handle"]);if(i!=null&&f(e,["handle"],i),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bN(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=c(n,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const a=c(n,["codeExecution"]);if(a!=null&&f(e,["codeExecution"],a),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(n,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const d=c(n,["googleMaps"]);d!=null&&f(e,["googleMaps"],_N(d));const p=c(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],SN(p));const y=c(n,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=c(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wN(n){const e=[];for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const s=n[i];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(u=>`${i}.${u}`);e.push(...a)}else e.push(i)}return e.join(",")}function RN(n,e){let i=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const u=s.setup;typeof u=="object"&&u!==null?(n.bidiGenerateContentSetup=u,i=u):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const a=n.fieldMask;if(i){const u=wN(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)u?n.fieldMask=u:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];a.length>0&&(p=a.map(m=>d.includes(m)?`generationConfig.${m}`:m));const y=[];u&&y.push(u),p.length>0&&y.push(...p),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?n.fieldMask=a.join(","):delete n.fieldMask;return n}class xN extends Bn{constructor(e){super(),this.apiClient=e}async create(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=gN(this.apiClient,e);u=ee("auth_tokens",p._url),d=p._query,delete p.config,delete p._url,delete p._query;const y=RN(p,e.config);return a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),a.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NN(n,e){const i={},s=c(n,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),i}function IN(n){const e={},i=c(n,["name"]);i!=null&&f(e,["_url","name"],i);const s=c(n,["config"]);return s!=null&&NN(s,e),e}function MN(n){const e={},i=c(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function DN(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const a=c(n,["pageToken"]);return e!==void 0&&a!=null&&f(e,["_query","pageToken"],a),i}function UN(n){const e={},i=c(n,["parent"]);i!=null&&f(e,["_url","parent"],i);const s=c(n,["config"]);return s!=null&&DN(s,e),e}function LN(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const a=c(n,["documents"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["documents"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ON extends Bn{constructor(e){super(),this.apiClient=e,this.list=async i=>new zi(qn.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:i.parent,config:s.config}),await this.listInternal(i),i)}async get(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=MN(e);return u=ee("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var i,s;let a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IN(e);a=ee("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=UN(e);return u=ee("{parent}/documents",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const m=LN(y),v=new cC;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GN extends Bn{constructor(e,i=new ON(e)){super(),this.apiClient=e,this.documents=i,this.list=async(s={})=>new zi(qn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=wx(e);return u=ee("fileSearchStores",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async get(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Nx(e);return u=ee("{name}",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var i,s;let a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xx(e);a=ee("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Ox(e);return u=ee("fileSearchStores",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const m=Gx(y),v=new fC;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Px(e);return u=ee("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const m=Hx(y),v=new dC;return Object.assign(v,m),v})}}async importFile(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Dx(e);return u=ee("{file_search_store_name}:importFile",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),a.then(y=>{const m=Mx(y),v=new $f;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _0=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return _0=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),i=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^i()&15>>+s/4).toString(16))};const PN=()=>_0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ef(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Af=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class on extends Error{}let sn=class Cf extends on{constructor(e,i,s,a){super(`${Cf.makeMessage(e,i,s)}`),this.status=e,this.headers=a,this.error=i}static makeMessage(e,i,s){const a=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,s,a){if(!e||!a)return new pr({message:s,cause:Af(i)});const u=i;return e===400?new T0(e,u,s,a):e===401?new E0(e,u,s,a):e===403?new A0(e,u,s,a):e===404?new C0(e,u,s,a):e===409?new b0(e,u,s,a):e===422?new w0(e,u,s,a):e===429?new R0(e,u,s,a):e>=500?new x0(e,u,s,a):new Cf(e,u,s,a)}},bf=class extends sn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},pr=class extends sn{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}},S0=class extends pr{constructor({message:e}={}){super({message:e??"Request timed out."})}},T0=class extends sn{},E0=class extends sn{},A0=class extends sn{},C0=class extends sn{},b0=class extends sn{},w0=class extends sn{},R0=class extends sn{},x0=class extends sn{};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HN=/^[a-z][a-z0-9+.-]*:/i,kN=n=>HN.test(n);let wf=n=>(wf=Array.isArray,wf(n));const qN=wf;let BN=qN;const lv=BN;function VN(n){if(!n)return!0;for(const e in n)return!1;return!0}function zN(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const FN=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new on(`${n} must be an integer`);if(e<0)throw new on(`${n} must be a positive integer`);return e},$N=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JN=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Do="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YN(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const KN=()=>{var n,e,i,s,a;const u=YN();if(u==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":rv(Deno.build.os),"X-Stainless-Arch":av(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(u==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":rv((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":av((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const d=XN();return d?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${d.browser}`,"X-Stainless-Runtime-Version":d.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function XN(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of n){const s=i.exec(navigator.userAgent);if(s){const a=s[1]||0,u=s[2]||0,d=s[3]||0;return{browser:e,version:`${a}.${u}.${d}`}}}return null}const av=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",rv=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Ra;const QN=()=>Ra??(Ra=KN());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZN(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function N0(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function WN(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return N0({start(){},async pull(i){const{done:s,value:a}=await e.next();s?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function I0(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function jN(n){var e,i;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((i=(e=n[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const s=n.getReader(),a=s.cancel();s.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eI=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M0=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Zc(n,e,i){return M0(),new File(n,e??"unknown_file",i)}function tI(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const nI=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D0=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",iI=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&D0(n),oI=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function sI(n,e,i){if(M0(),n=await n,iI(n))return n instanceof File?n:Zc([await n.arrayBuffer()],n.name);if(oI(n)){const a=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Zc(await Rf(a),e,i)}const s=await Rf(n);if(e||(e=tI(n)),!(i!=null&&i.type)){const a=s.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof a=="string"&&(i=Object.assign(Object.assign({},i),{type:a}))}return Zc(s,e,i)}async function Rf(n){var e,i,s,a,u;let d=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)d.push(n);else if(D0(n))d.push(n instanceof Blob?n:await n.arrayBuffer());else if(nI(n))try{for(var p=!0,y=fn(n),m;m=await y.next(),e=m.done,!e;p=!0){a=m.value,p=!1;const v=a;d.push(...await Rf(v))}}catch(v){i={error:v}}finally{try{!p&&!e&&(s=y.return)&&await s.call(y)}finally{if(i)throw i.error}}else{const v=(u=n==null?void 0:n.constructor)===null||u===void 0?void 0:u.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${lI(n)}`)}return d}function lI(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let U0=class{constructor(e){this._client=e}};U0._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L0(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const uv=Object.freeze(Object.create(null)),aI=(n=L0)=>(function(i,...s){if(i.length===1)return i[0];let a=!1;const u=[],d=i.reduce((v,_,T)=>{var A,C,I;/[?#]/.test(_)&&(a=!0);const w=s[T];let q=(a?encodeURIComponent:n)(""+w);return T!==s.length&&(w==null||typeof w=="object"&&w.toString===((I=Object.getPrototypeOf((C=Object.getPrototypeOf((A=w.hasOwnProperty)!==null&&A!==void 0?A:uv))!==null&&C!==void 0?C:uv))===null||I===void 0?void 0:I.toString))&&(q=w+"",u.push({start:v.length+_.length,length:q.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),v+_+(T===s.length?"":q)},""),p=d.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(p))!==null;)u.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(u.sort((v,_)=>v.start-_.start),u.length>0){let v=0;const _=u.reduce((T,A)=>{const C=" ".repeat(A.start-v),I="^".repeat(A.length);return v=A.start+A.length,T+C+I},"");throw new on(`Path parameters result in path with invalid segments:
${u.map(T=>T.error).join(`
`)}
${d}
${_}`)}return d}),xa=aI(L0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O0 extends U0{create(e,i){var s;const{api_version:a=this._client.apiVersion}=e,u=ja(e,["api_version"]);if("model"in u&&"agent_config"in u)throw new on("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in u&&"generation_config"in u)throw new on("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(xa`/${a}/interactions`,Object.assign(Object.assign({body:u},i),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,i={},s){const{api_version:a=this._client.apiVersion}=i??{};return this._client.delete(xa`/${a}/interactions/${e}`,s)}cancel(e,i={},s){const{api_version:a=this._client.apiVersion}=i??{};return this._client.post(xa`/${a}/interactions/${e}/cancel`,s)}get(e,i={},s){var a;const u=i??{},{api_version:d=this._client.apiVersion}=u,p=ja(u,["api_version"]);return this._client.get(xa`/${d}/interactions/${e}`,Object.assign(Object.assign({query:p},s),{stream:(a=i==null?void 0:i.stream)!==null&&a!==void 0?a:!1}))}}O0._key=Object.freeze(["interactions"]);class G0 extends O0{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rI(n){let e=0;for(const a of n)e+=a.length;const i=new Uint8Array(e);let s=0;for(const a of n)i.set(a,s),s+=a.length;return i}let Na;function Wf(n){let e;return(Na??(e=new globalThis.TextEncoder,Na=e.encode.bind(e)))(n)}let Ia;function cv(n){let e;return(Ia??(e=new globalThis.TextDecoder,Ia=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let mr=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Wf(e):e;this.buffer=rI([this.buffer,i]);const s=[];let a;for(;(a=uI(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(cv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const u=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,d=cv(this.buffer.subarray(0,u));s.push(d),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}};mr.NEWLINE_CHARS=new Set([`
`,"\r"]);mr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function uI(n,e){for(let a=e??0;a<n.length;a++){if(n[a]===10)return{preceding:a,index:a+1,carriage:!1};if(n[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function cI(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const er={off:0,error:200,warn:300,info:400,debug:500},fv=(n,e,i)=>{if(n){if(zN(er,n))return n;At(i).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(er))}`)}};function zs(){}function Ma(n,e,i){return!e||er[n]>er[i]?zs:e[n].bind(e)}const fI={error:zs,warn:zs,info:zs,debug:zs};let dv=new WeakMap;function At(n){var e;const i=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!i)return fI;const a=dv.get(i);if(a&&a[0]===s)return a[1];const u={error:Ma("error",i,s),warn:Ma("warn",i,s),info:Ma("info",i,s),debug:Ma("debug",i,s)};return dv.set(i,[s,u]),u}const Pi=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dI=class Fs{constructor(e,i,s){this.iterator=e,this.controller=i,this.client=s}static fromSSEResponse(e,i,s){let a=!1;const u=s?At(s):console;function d(){return cn(this,arguments,function*(){var y,m,v,_;if(a)throw new on("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var A=!0,C=fn(hI(e,i)),I;I=yield me(C.next()),y=I.done,!y;A=!0){_=I.value,A=!1;const w=_;if(!T)if(w.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield me(JSON.parse(w.data))}catch(q){throw u.error("Could not parse message into JSON:",w.data),u.error("From chunk:",w.raw),q}}}catch(w){m={error:w}}finally{try{!A&&!y&&(v=C.return)&&(yield me(v.call(C)))}finally{if(m)throw m.error}}T=!0}catch(w){if(Ef(w))return yield me(void 0);throw w}finally{T||i.abort()}})}return new Fs(d,i,s)}static fromReadableStream(e,i,s){let a=!1;function u(){return cn(this,arguments,function*(){var y,m,v,_;const T=new mr,A=I0(e);try{for(var C=!0,I=fn(A),w;w=yield me(I.next()),y=w.done,!y;C=!0){_=w.value,C=!1;const q=_;for(const B of T.decode(q))yield yield me(B)}}catch(q){m={error:q}}finally{try{!C&&!y&&(v=I.return)&&(yield me(v.call(I)))}finally{if(m)throw m.error}}for(const q of T.flush())yield yield me(q)})}function d(){return cn(this,arguments,function*(){var y,m,v,_;if(a)throw new on("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var A=!0,C=fn(u()),I;I=yield me(C.next()),y=I.done,!y;A=!0){_=I.value,A=!1;const w=_;T||w&&(yield yield me(JSON.parse(w)))}}catch(w){m={error:w}}finally{try{!A&&!y&&(v=C.return)&&(yield me(v.call(C)))}finally{if(m)throw m.error}}T=!0}catch(w){if(Ef(w))return yield me(void 0);throw w}finally{T||i.abort()}})}return new Fs(d,i,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],s=this.iterator(),a=u=>({next:()=>{if(u.length===0){const d=s.next();e.push(d),i.push(d)}return u.shift()}});return[new Fs(()=>a(e),this.controller,this.client),new Fs(()=>a(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return N0({async start(){i=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:u}=await i.next();if(u)return s.close();const d=Wf(JSON.stringify(a)+`
`);s.enqueue(d)}catch(a){s.error(a)}},async cancel(){var s;await((s=i.return)===null||s===void 0?void 0:s.call(i))}})}};function hI(n,e){return cn(this,arguments,function*(){var s,a,u,d;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new on("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new on("Attempted to iterate over a response with no body");const p=new mI,y=new mr,m=I0(n.body);try{for(var v=!0,_=fn(pI(m)),T;T=yield me(_.next()),s=T.done,!s;v=!0){d=T.value,v=!1;const A=d;for(const C of y.decode(A)){const I=p.decode(C);I&&(yield yield me(I))}}}catch(A){a={error:A}}finally{try{!v&&!s&&(u=_.return)&&(yield me(u.call(_)))}finally{if(a)throw a.error}}for(const A of y.flush()){const C=p.decode(A);C&&(yield yield me(C))}})}function pI(n){return cn(this,arguments,function*(){var i,s,a,u;let d=new Uint8Array;try{for(var p=!0,y=fn(n),m;m=yield me(y.next()),i=m.done,!i;p=!0){u=m.value,p=!1;const v=u;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Wf(v):v;let T=new Uint8Array(d.length+_.length);T.set(d),T.set(_,d.length),d=T;let A;for(;(A=cI(d))!==-1;)yield yield me(d.slice(0,A)),d=d.slice(A)}}catch(v){s={error:v}}finally{try{!p&&!i&&(a=y.return)&&(yield me(a.call(y)))}finally{if(s)throw s.error}}d.length>0&&(yield yield me(d))})}let mI=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,s,a]=gI(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}};function gI(n,e){const i=n.indexOf(e);return i!==-1?[n.substring(0,i),e,n.substring(i+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function yI(n,e){const{response:i,requestLogID:s,retryOfRequestLogID:a,startTime:u}=e,d=await(async()=>{var p;if(e.options.stream)return At(n).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,n):dI.fromSSEResponse(i,e.controller,n);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const y=i.headers.get("content-type"),m=(p=y==null?void 0:y.split(";")[0])===null||p===void 0?void 0:p.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?i.headers.get("content-length")==="0"?void 0:await i.json():await i.text()})();return At(n).debug(`[${s}] response parsed`,Pi({retryOfRequestLogID:a,url:i.url,status:i.status,body:d,durationMs:Date.now()-u})),d}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let vI=class P0 extends Promise{constructor(e,i,s=yI){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new P0(this.client,this.responsePromise,async(i,s)=>e(await this.parseResponse(i,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H0=Symbol("brand.privateNullableHeaders");function*_I(n){if(!n)return;if(H0 in n){const{values:s,nulls:a}=n;yield*s.entries();for(const u of a)yield[u,null];return}let e=!1,i;n instanceof Headers?i=n.entries():lv(n)?i=n:(e=!0,i=Object.entries(n??{}));for(let s of i){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const u=lv(s[1])?s[1]:[s[1]];let d=!1;for(const p of u)p!==void 0&&(e&&!d&&(d=!0,yield[a,null]),yield[a,p])}}const Bs=n=>{const e=new Headers,i=new Set;for(const s of n){const a=new Set;for(const[u,d]of _I(s)){const p=u.toLowerCase();a.has(p)||(e.delete(u),a.add(p)),d===null?(e.delete(u),i.add(p)):(e.append(u,d),i.delete(p))}}return{[H0]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wc=n=>{var e,i,s,a,u,d;if(typeof globalThis.process<"u")return(s=(i=(e=kA)===null||e===void 0?void 0:e[n])===null||i===void 0?void 0:i.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(d=(u=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||u===void 0?void 0:u.call(a,n))===null||d===void 0?void 0:d.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var k0;class gr{constructor(e){var i,s,a,u,d,p,y,{baseURL:m=Wc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=Wc("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:_="v1beta"}=e,T=ja(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:v,apiVersion:_},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:gr.DEFAULT_TIMEOUT,this.logger=(a=A.logger)!==null&&a!==void 0?a:console;const C="warn";this.logLevel=C,this.logLevel=(d=(u=fv(A.logLevel,"ClientOptions.logLevel",this))!==null&&u!==void 0?u:fv(Wc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&d!==void 0?d:C,this.fetchOptions=A.fetchOptions,this.maxRetries=(p=A.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(y=A.fetch)!==null&&y!==void 0?y:ZN(),this.encoder=eI,this._options=A,this.apiKey=v,this.apiVersion=_,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=Bs([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return Bs([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Bs([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,s])=>typeof s<"u").map(([i,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(i)}=`;throw new on(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Do}`}defaultIdempotencyKey(){return`stainless-node-retry-${PN()}`}makeStatusError(e,i,s,a){return sn.generate(e,i,s,a)}buildURL(e,i,s){const a=!this.baseURLOverridden()&&s||this.baseURL,u=kN(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return VN(d)||(i=Object.assign(Object.assign({},d),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(u.search=this.stringifyQuery(i)),u.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:s}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:i},a)))}request(e,i=null){return new vI(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,s){var a,u,d;const p=await e,y=(a=p.maxRetries)!==null&&a!==void 0?a:this.maxRetries;i==null&&(i=y),await this.prepareOptions(p);const{req:m,url:v,timeout:_}=await this.buildRequest(p,{retryCount:y-i});await this.prepareRequest(m,{url:v,options:p});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,C=Date.now();if(At(this).debug(`[${T}] sending request`,Pi({retryOfRequestLogID:s,method:p.method,url:v,options:p,headers:m.headers})),!((u=p.signal)===null||u===void 0)&&u.aborted)throw new bf;const I=new AbortController,w=await this.fetchWithTimeout(v,m,_,I).catch(Af),q=Date.now();if(w instanceof globalThis.Error){const k=`retrying, ${i} attempts remaining`;if(!((d=p.signal)===null||d===void 0)&&d.aborted)throw new bf;const G=Ef(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(i)return At(this).info(`[${T}] connection ${G?"timed out":"failed"} - ${k}`),At(this).debug(`[${T}] connection ${G?"timed out":"failed"} (${k})`,Pi({retryOfRequestLogID:s,url:v,durationMs:q-C,message:w.message})),this.retryRequest(p,i,s??T);throw At(this).info(`[${T}] connection ${G?"timed out":"failed"} - error; no more retries left`),At(this).debug(`[${T}] connection ${G?"timed out":"failed"} (error; no more retries left)`,Pi({retryOfRequestLogID:s,url:v,durationMs:q-C,message:w.message})),G?new S0:new pr({cause:w})}const B=`[${T}${A}] ${m.method} ${v} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${q-C}ms`;if(!w.ok){const k=await this.shouldRetry(w);if(i&&k){const X=`retrying, ${i} attempts remaining`;return await jN(w.body),At(this).info(`${B} - ${X}`),At(this).debug(`[${T}] response error (${X})`,Pi({retryOfRequestLogID:s,url:w.url,status:w.status,headers:w.headers,durationMs:q-C})),this.retryRequest(p,i,s??T,w.headers)}const G=k?"error; no more retries left":"error; not retryable";At(this).info(`${B} - ${G}`);const P=await w.text().catch(X=>Af(X).message),W=$N(P),J=W?void 0:P;throw At(this).debug(`[${T}] response error (${G})`,Pi({retryOfRequestLogID:s,url:w.url,status:w.status,headers:w.headers,message:J,durationMs:Date.now()-C})),this.makeStatusError(w.status,W,J,w.headers)}return At(this).info(B),At(this).debug(`[${T}] response start`,Pi({retryOfRequestLogID:s,url:w.url,status:w.status,headers:w.headers,durationMs:q-C})),{response:w,options:p,controller:I,requestLogID:T,retryOfRequestLogID:s,startTime:C}}async fetchWithTimeout(e,i,s,a){const u=i||{},{signal:d,method:p}=u,y=ja(u,["signal","method"]),m=a.abort.bind(a);d&&d.addEventListener("abort",m,{once:!0});const v=setTimeout(m,s),_=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,T=Object.assign(Object.assign(Object.assign({signal:a.signal},_?{duplex:"half"}:{}),{method:"GET"}),y);p&&(T.method=p.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(v)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,s,a){var u;let d;const p=a==null?void 0:a.get("retry-after-ms");if(p){const m=parseFloat(p);Number.isNaN(m)||(d=m)}const y=a==null?void 0:a.get("retry-after");if(y&&!d){const m=parseFloat(y);Number.isNaN(m)?d=Date.parse(y)-Date.now():d=m*1e3}if(!(d&&0<=d&&d<60*1e3)){const m=(u=e.maxRetries)!==null&&u!==void 0?u:this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(i,m)}return await JN(d),this.makeRequest(e,i-1,s)}calculateDefaultRetryTimeoutMillis(e,i){const u=i-e,d=Math.min(.5*Math.pow(2,u),8),p=1-Math.random()*.25;return d*p*1e3}async buildRequest(e,{retryCount:i=0}={}){var s,a,u;const d=Object.assign({},e),{method:p,path:y,query:m,defaultBaseURL:v}=d,_=this.buildURL(y,m,v);"timeout"in d&&FN("timeout",d.timeout),d.timeout=(s=d.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:d}),C=await this.buildHeaders({options:e,method:p,bodyHeaders:T,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:C},d.signal&&{signal:d.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(u=d.fetchOptions)!==null&&u!==void 0?u:{}),url:_,timeout:d.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:s,retryCount:a}){let u={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);const d=await this.authHeaders(e);let p=Bs([u,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),QN()),this._options.defaultHeaders,s,e.headers,d]);return this.validateHeaders(p),p.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Bs([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:WN(e)}:this.encoder({body:e,headers:s})}}gr.DEFAULT_TIMEOUT=6e4;class ut extends gr{constructor(){super(...arguments),this.interactions=new G0(this)}}k0=ut;ut.GeminiNextGenAPIClient=k0;ut.GeminiNextGenAPIClientError=on;ut.APIError=sn;ut.APIConnectionError=pr;ut.APIConnectionTimeoutError=S0;ut.APIUserAbortError=bf;ut.NotFoundError=C0;ut.ConflictError=b0;ut.RateLimitError=R0;ut.BadRequestError=T0;ut.AuthenticationError=E0;ut.InternalServerError=x0;ut.PermissionDeniedError=A0;ut.UnprocessableEntityError=w0;ut.toFile=sI;ut.Interactions=G0;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SI(n,e){const i={},s=c(n,["name"]);return s!=null&&f(i,["_url","name"],s),i}function TI(n,e){const i={},s=c(n,["name"]);return s!=null&&f(i,["_url","name"],s),i}function EI(n,e){const i={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function AI(n,e){const i={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function CI(n,e,i){const s={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=c(n,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&f(e,["displayName"],a),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(n,["epochCount"]);e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","epochCount"],u);const d=c(n,["learningRateMultiplier"]);if(d!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],d),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(c(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(c(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const p=c(n,["batchSize"]);e!==void 0&&p!=null&&f(e,["tuningTask","hyperparameters","batchSize"],p);const y=c(n,["learningRate"]);if(e!==void 0&&y!=null&&f(e,["tuningTask","hyperparameters","learningRate"],y),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(c(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(c(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(c(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(c(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return s}function bI(n,e,i){const s={};let a=c(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const P=c(n,["validationDataset"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec"],jc(P))}else if(a==="PREFERENCE_TUNING"){const P=c(n,["validationDataset"]);e!==void 0&&P!=null&&f(e,["preferenceOptimizationSpec"],jc(P))}else if(a==="DISTILLATION"){const P=c(n,["validationDataset"]);e!==void 0&&P!=null&&f(e,["distillationSpec"],jc(P))}const u=c(n,["tunedModelDisplayName"]);e!==void 0&&u!=null&&f(e,["tunedModelDisplayName"],u);const d=c(n,["description"]);e!==void 0&&d!=null&&f(e,["description"],d);let p=c(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const P=c(n,["epochCount"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],P)}else if(p==="PREFERENCE_TUNING"){const P=c(n,["epochCount"]);e!==void 0&&P!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],P)}else if(p==="DISTILLATION"){const P=c(n,["epochCount"]);e!==void 0&&P!=null&&f(e,["distillationSpec","hyperParameters","epochCount"],P)}let y=c(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const P=c(n,["learningRateMultiplier"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],P)}else if(y==="PREFERENCE_TUNING"){const P=c(n,["learningRateMultiplier"]);e!==void 0&&P!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],P)}else if(y==="DISTILLATION"){const P=c(n,["learningRateMultiplier"]);e!==void 0&&P!=null&&f(e,["distillationSpec","hyperParameters","learningRateMultiplier"],P)}let m=c(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const P=c(n,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],P)}else if(m==="PREFERENCE_TUNING"){const P=c(n,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],P)}else if(m==="DISTILLATION"){const P=c(n,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&f(e,["distillationSpec","exportLastCheckpointOnly"],P)}let v=c(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const P=c(n,["adapterSize"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],P)}else if(v==="PREFERENCE_TUNING"){const P=c(n,["adapterSize"]);e!==void 0&&P!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],P)}else if(v==="DISTILLATION"){const P=c(n,["adapterSize"]);e!==void 0&&P!=null&&f(e,["distillationSpec","hyperParameters","adapterSize"],P)}let _=c(i,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const P=c(n,["tuningMode"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","tuningMode"],P)}const T=c(n,["customBaseModel"]);e!==void 0&&T!=null&&f(e,["customBaseModel"],T);let A=c(i,["config","method"]);if(A===void 0&&(A="SUPERVISED_FINE_TUNING"),A==="SUPERVISED_FINE_TUNING"){const P=c(n,["batchSize"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","hyperParameters","batchSize"],P)}let C=c(i,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const P=c(n,["learningRate"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRate"],P)}const I=c(n,["labels"]);e!==void 0&&I!=null&&f(e,["labels"],I);const w=c(n,["beta"]);e!==void 0&&w!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],w);const q=c(n,["baseTeacherModel"]);e!==void 0&&q!=null&&f(e,["distillationSpec","baseTeacherModel"],q);const B=c(n,["tunedTeacherModelSource"]);e!==void 0&&B!=null&&f(e,["distillationSpec","tunedTeacherModelSource"],B);const k=c(n,["sftLossWeightMultiplier"]);e!==void 0&&k!=null&&f(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],k);const G=c(n,["outputUri"]);return e!==void 0&&G!=null&&f(e,["outputUri"],G),s}function wI(n,e){const i={},s=c(n,["baseModel"]);s!=null&&f(i,["baseModel"],s);const a=c(n,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const u=c(n,["trainingDataset"]);u!=null&&PI(u);const d=c(n,["config"]);return d!=null&&CI(d,i),i}function RI(n,e){const i={},s=c(n,["baseModel"]);s!=null&&f(i,["baseModel"],s);const a=c(n,["preTunedModel"]);a!=null&&f(i,["preTunedModel"],a);const u=c(n,["trainingDataset"]);u!=null&&HI(u,i,e);const d=c(n,["config"]);return d!=null&&bI(d,i,e),i}function xI(n,e){const i={},s=c(n,["name"]);return s!=null&&f(i,["_url","name"],s),i}function NI(n,e){const i={},s=c(n,["name"]);return s!=null&&f(i,["_url","name"],s),i}function II(n,e,i){const s={},a=c(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const u=c(n,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const d=c(n,["filter"]);return e!==void 0&&d!=null&&f(e,["_query","filter"],d),s}function MI(n,e,i){const s={},a=c(n,["pageSize"]);e!==void 0&&a!=null&&f(e,["_query","pageSize"],a);const u=c(n,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const d=c(n,["filter"]);return e!==void 0&&d!=null&&f(e,["_query","filter"],d),s}function DI(n,e){const i={},s=c(n,["config"]);return s!=null&&II(s,i),i}function UI(n,e){const i={},s=c(n,["config"]);return s!=null&&MI(s,i),i}function LI(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const u=c(n,["tunedModels"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>q0(p))),f(i,["tuningJobs"],d)}return i}function OI(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["nextPageToken"]);a!=null&&f(i,["nextPageToken"],a);const u=c(n,["tuningJobs"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>xf(p))),f(i,["tuningJobs"],d)}return i}function GI(n,e){const i={},s=c(n,["name"]);s!=null&&f(i,["model"],s);const a=c(n,["name"]);return a!=null&&f(i,["endpoint"],a),i}function PI(n,e){const i={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=c(n,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),f(i,["examples","examples"],a)}return i}function HI(n,e,i){const s={};let a=c(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const d=c(n,["gcsUri"]);e!==void 0&&d!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(a==="PREFERENCE_TUNING"){const d=c(n,["gcsUri"]);e!==void 0&&d!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(a==="DISTILLATION"){const d=c(n,["gcsUri"]);e!==void 0&&d!=null&&f(e,["distillationSpec","promptDatasetUri"],d)}let u=c(i,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const d=c(n,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(u==="PREFERENCE_TUNING"){const d=c(n,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(u==="DISTILLATION"){const d=c(n,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["distillationSpec","promptDatasetUri"],d)}if(c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function q0(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["name"]);a!=null&&f(i,["name"],a);const u=c(n,["state"]);u!=null&&f(i,["state"],t0(u));const d=c(n,["createTime"]);d!=null&&f(i,["createTime"],d);const p=c(n,["tuningTask","startTime"]);p!=null&&f(i,["startTime"],p);const y=c(n,["tuningTask","completeTime"]);y!=null&&f(i,["endTime"],y);const m=c(n,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=c(n,["description"]);v!=null&&f(i,["description"],v);const _=c(n,["baseModel"]);_!=null&&f(i,["baseModel"],_);const T=c(n,["_self"]);return T!=null&&f(i,["tunedModel"],GI(T)),i}function xf(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["name"]);a!=null&&f(i,["name"],a);const u=c(n,["state"]);u!=null&&f(i,["state"],t0(u));const d=c(n,["createTime"]);d!=null&&f(i,["createTime"],d);const p=c(n,["startTime"]);p!=null&&f(i,["startTime"],p);const y=c(n,["endTime"]);y!=null&&f(i,["endTime"],y);const m=c(n,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=c(n,["error"]);v!=null&&f(i,["error"],v);const _=c(n,["description"]);_!=null&&f(i,["description"],_);const T=c(n,["baseModel"]);T!=null&&f(i,["baseModel"],T);const A=c(n,["tunedModel"]);A!=null&&f(i,["tunedModel"],A);const C=c(n,["preTunedModel"]);C!=null&&f(i,["preTunedModel"],C);const I=c(n,["supervisedTuningSpec"]);I!=null&&f(i,["supervisedTuningSpec"],I);const w=c(n,["preferenceOptimizationSpec"]);w!=null&&f(i,["preferenceOptimizationSpec"],w);const q=c(n,["distillationSpec"]);q!=null&&f(i,["distillationSpec"],q);const B=c(n,["tuningDataStats"]);B!=null&&f(i,["tuningDataStats"],B);const k=c(n,["encryptionSpec"]);k!=null&&f(i,["encryptionSpec"],k);const G=c(n,["partnerModelTuningSpec"]);G!=null&&f(i,["partnerModelTuningSpec"],G);const P=c(n,["customBaseModel"]);P!=null&&f(i,["customBaseModel"],P);const W=c(n,["experiment"]);W!=null&&f(i,["experiment"],W);const J=c(n,["labels"]);J!=null&&f(i,["labels"],J);const ce=c(n,["outputUri"]);ce!=null&&f(i,["outputUri"],ce);const X=c(n,["pipelineJob"]);X!=null&&f(i,["pipelineJob"],X);const oe=c(n,["serviceAccount"]);oe!=null&&f(i,["serviceAccount"],oe);const se=c(n,["tunedModelDisplayName"]);se!=null&&f(i,["tunedModelDisplayName"],se);const Se=c(n,["veoTuningSpec"]);return Se!=null&&f(i,["veoTuningSpec"],Se),i}function kI(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const a=c(n,["name"]);a!=null&&f(i,["name"],a);const u=c(n,["metadata"]);u!=null&&f(i,["metadata"],u);const d=c(n,["done"]);d!=null&&f(i,["done"],d);const p=c(n,["error"]);return p!=null&&f(i,["error"],p),i}function jc(n,e){const i={},s=c(n,["gcsUri"]);s!=null&&f(i,["validationDatasetUri"],s);const a=c(n,["vertexDatasetResource"]);return a!=null&&f(i,["validationDatasetUri"],a),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qI extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new zi(qn.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var s;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const a={tunedModelName:i.baseModel};!((s=i.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=i.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},i),{preTunedModel:a});return u.baseModel=void 0,await this.tuneInternal(u)}else{const a=Object.assign({},i);return await this.tuneInternal(a)}else{const a=Object.assign({},i),u=await this.tuneMldevInternal(a);let d="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?d=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(d=u.name.split("/operations/")[0]),{name:d,state:pf.JOB_STATE_QUEUED}}}}async getInternal(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=NI(e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>xf(v))}else{const m=xI(e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>q0(v))}}async listInternal(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=UI(e);return p=ee("tuningJobs",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=OI(v),T=new ky;return Object.assign(T,_),T})}else{const m=DI(e);return p=ee("tunedModels",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=LI(v),T=new ky;return Object.assign(T,_),T})}}async cancel(e){var i,s,a,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=TI(e);return p=ee("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=AI(v),T=new qy;return Object.assign(T,_),T})}else{const m=SI(e);return p=ee("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=EI(v),T=new qy;return Object.assign(T,_),T})}}async tuneInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI()){const p=RI(e,e);return u=ee("tuningJobs",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>xf(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,s;let a,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=wI(e);return u=ee("tunedModels",p._url),d=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>kI(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BI{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const VI=1024*1024*8,zI=3,FI=1e3,$I=2,tr="x-goog-upload-status";async function JI(n,e,i){var s;const a=await B0(n,e,i),u=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[tr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function YI(n,e,i){var s;const a=await B0(n,e,i),u=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s[tr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=Xv(u),p=new Jf;return Object.assign(p,d),p}async function B0(n,e,i){var s,a;let u=0,d=0,p=new gf(new Response),y="upload";for(u=n.size;d<u;){const m=Math.min(VI,u-d),v=n.slice(d,d+m);d+m>=u&&(y+=", finalize");let _=0,T=FI;for(;_<zI&&(p=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(d),"Content-Length":String(m)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[tr]));)_++,await XI(T),T=T*$I;if(d+=m,((a=p==null?void 0:p.headers)===null||a===void 0?void 0:a[tr])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function KI(n){return{size:n.size,type:n.type}}function XI(n){return new Promise(e=>setTimeout(e,n))}class QI{async upload(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await JI(e,i,s)}async uploadToFileSearchStore(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YI(e,i,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KI(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZI{create(e,i,s){return new WI(e,i,s)}}class WI{constructor(e,i,s){this.url=e,this.headers=i,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hv="x-goog-api-key";class jI{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(hv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(hv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eM="gl-node/";class tM{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new ut({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const s=zA(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new jI(this.apiKey);this.apiClient=new Jx({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:eM+"web",uploader:new QI,downloader:new BI}),this.models=new fN(this.apiClient),this.live=new sN(this.apiClient,a,new ZI),this.batches=new _b(this.apiClient),this.chats=new ew(this.models,this.apiClient),this.caches=new Zb(this.apiClient),this.files=new dw(this.apiClient),this.operations=new dN(this.apiClient),this.authTokens=new xN(this.apiClient),this.tunings=new qI(this.apiClient),this.fileSearchStores=new GN(this.apiClient)}}function he(n,e,i,s,a){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,i),i}function L(n,e,i,s){if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?s:i==="a"?s.call(n):s?s.value:e.get(n)}let V0=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return V0=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),i=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^i()&15>>+s/4).toString(16))};function Nf(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const If=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class ue extends Error{}class yt extends ue{constructor(e,i,s,a){super(`${yt.makeMessage(e,i,s)}`),this.status=e,this.headers=a,this.requestID=a==null?void 0:a.get("x-request-id"),this.error=i;const u=i;this.code=u==null?void 0:u.code,this.param=u==null?void 0:u.param,this.type=u==null?void 0:u.type}static makeMessage(e,i,s){const a=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,s,a){if(!e||!a)return new yr({message:s,cause:If(i)});const u=i==null?void 0:i.error;return e===400?new z0(e,u,s,a):e===401?new F0(e,u,s,a):e===403?new $0(e,u,s,a):e===404?new J0(e,u,s,a):e===409?new Y0(e,u,s,a):e===422?new K0(e,u,s,a):e===429?new X0(e,u,s,a):e>=500?new Q0(e,u,s,a):new yt(e,u,s,a)}}class tn extends yt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class yr extends yt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class jf extends yr{constructor({message:e}={}){super({message:e??"Request timed out."})}}class z0 extends yt{}class F0 extends yt{}class $0 extends yt{}class J0 extends yt{}class Y0 extends yt{}class K0 extends yt{}class X0 extends yt{}class Q0 extends yt{}class Z0 extends ue{constructor(){super("Could not parse response content as the length limit was reached")}}class W0 extends ue{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class $s extends Error{constructor(e){super(e)}}const nM=/^[a-z][a-z0-9+.-]*:/i,iM=n=>nM.test(n);let Mt=n=>(Mt=Array.isArray,Mt(n)),pv=Mt;function j0(n){return typeof n!="object"?{}:n??{}}function oM(n){if(!n)return!0;for(const e in n)return!1;return!0}function sM(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ef(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const lM=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ue(`${n} must be an integer`);if(e<0)throw new ue(`${n} must be a positive integer`);return e},aM=n=>{try{return JSON.parse(n)}catch{return}},sl=n=>new Promise(e=>setTimeout(e,n)),Uo="6.17.0",rM=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function uM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const cM=()=>{var i;const n=uM();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uo,"X-Stainless-OS":gv(Deno.build.os),"X-Stainless-Arch":mv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((i=Deno.version)==null?void 0:i.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uo,"X-Stainless-OS":gv(globalThis.process.platform??"unknown"),"X-Stainless-Arch":mv(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=fM();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function fM(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of n){const s=i.exec(navigator.userAgent);if(s){const a=s[1]||0,u=s[2]||0,d=s[3]||0;return{browser:e,version:`${a}.${u}.${d}`}}}return null}const mv=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",gv=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let yv;const dM=()=>yv??(yv=cM());function hM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function e_(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function t_(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return e_({start(){},async pull(i){const{done:s,value:a}=await e.next();s?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)==null?void 0:i.call(e))}})}function n_(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function pM(n){var s,a;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((a=(s=n[Symbol.asyncIterator]()).return)==null?void 0:a.call(s));return}const e=n.getReader(),i=e.cancel();e.releaseLock(),await i}const mM=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),i_="RFC3986",o_=n=>String(n),vv={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:o_},gM="RFC1738";let Mf=(n,e)=>(Mf=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Mf(n,e));const yn=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),tf=1024,yM=(n,e,i,s,a)=>{if(n.length===0)return n;let u=n;if(typeof n=="symbol"?u=Symbol.prototype.toString.call(n):typeof n!="string"&&(u=String(n)),i==="iso-8859-1")return escape(u).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});let d="";for(let p=0;p<u.length;p+=tf){const y=u.length>=tf?u.slice(p,p+tf):u,m=[];for(let v=0;v<y.length;++v){let _=y.charCodeAt(v);if(_===45||_===46||_===95||_===126||_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||a===gM&&(_===40||_===41)){m[m.length]=y.charAt(v);continue}if(_<128){m[m.length]=yn[_];continue}if(_<2048){m[m.length]=yn[192|_>>6]+yn[128|_&63];continue}if(_<55296||_>=57344){m[m.length]=yn[224|_>>12]+yn[128|_>>6&63]+yn[128|_&63];continue}v+=1,_=65536+((_&1023)<<10|y.charCodeAt(v)&1023),m[m.length]=yn[240|_>>18]+yn[128|_>>12&63]+yn[128|_>>6&63]+yn[128|_&63]}d+=m.join("")}return d};function vM(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function _v(n,e){if(Mt(n)){const i=[];for(let s=0;s<n.length;s+=1)i.push(e(n[s]));return i}return e(n)}const s_={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},l_=function(n,e){Array.prototype.push.apply(n,Mt(e)?e:[e])};let Sv;const st={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:yM,encodeValuesOnly:!1,format:i_,formatter:o_,indices:!1,serializeDate(n){return(Sv??(Sv=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function _M(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const nf={};function a_(n,e,i,s,a,u,d,p,y,m,v,_,T,A,C,I,w,q){let B=n,k=q,G=0,P=!1;for(;(k=k.get(nf))!==void 0&&!P;){const oe=k.get(n);if(G+=1,typeof oe<"u"){if(oe===G)throw new RangeError("Cyclic object value");P=!0}typeof k.get(nf)>"u"&&(G=0)}if(typeof m=="function"?B=m(e,B):B instanceof Date?B=T==null?void 0:T(B):i==="comma"&&Mt(B)&&(B=_v(B,function(oe){return oe instanceof Date?T==null?void 0:T(oe):oe})),B===null){if(u)return y&&!I?y(e,st.encoder,w,"key",A):e;B=""}if(_M(B)||vM(B)){if(y){const oe=I?e:y(e,st.encoder,w,"key",A);return[(C==null?void 0:C(oe))+"="+(C==null?void 0:C(y(B,st.encoder,w,"value",A)))]}return[(C==null?void 0:C(e))+"="+(C==null?void 0:C(String(B)))]}const W=[];if(typeof B>"u")return W;let J;if(i==="comma"&&Mt(B))I&&y&&(B=_v(B,y)),J=[{value:B.length>0?B.join(",")||null:void 0}];else if(Mt(m))J=m;else{const oe=Object.keys(B);J=v?oe.sort(v):oe}const ce=p?String(e).replace(/\./g,"%2E"):String(e),X=s&&Mt(B)&&B.length===1?ce+"[]":ce;if(a&&Mt(B)&&B.length===0)return X+"[]";for(let oe=0;oe<J.length;++oe){const se=J[oe],Se=typeof se=="object"&&typeof se.value<"u"?se.value:B[se];if(d&&Se===null)continue;const Le=_&&p?se.replace(/\./g,"%2E"):se,Ue=Mt(B)?typeof i=="function"?i(X,Le):X:X+(_?"."+Le:"["+Le+"]");q.set(n,G);const Je=new WeakMap;Je.set(nf,q),l_(W,a_(Se,Ue,i,s,a,u,d,p,i==="comma"&&I&&Mt(B)?null:y,m,v,_,T,A,C,I,w,Je))}return W}function SM(n=st){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||st.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let i=i_;if(typeof n.format<"u"){if(!Mf(vv,n.format))throw new TypeError("Unknown format option provided.");i=n.format}const s=vv[i];let a=st.filter;(typeof n.filter=="function"||Mt(n.filter))&&(a=n.filter);let u;if(n.arrayFormat&&n.arrayFormat in s_?u=n.arrayFormat:"indices"in n?u=n.indices?"indices":"repeat":u=st.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const d=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:st.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:st.addQueryPrefix,allowDots:d,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:st.allowEmptyArrays,arrayFormat:u,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:st.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?st.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:st.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:st.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:st.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:st.encodeValuesOnly,filter:a,format:i,formatter:s,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:st.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:st.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:st.strictNullHandling}}function TM(n,e={}){let i=n;const s=SM(e);let a,u;typeof s.filter=="function"?(u=s.filter,i=u("",i)):Mt(s.filter)&&(u=s.filter,a=u);const d=[];if(typeof i!="object"||i===null)return"";const p=s_[s.arrayFormat],y=p==="comma"&&s.commaRoundTrip;a||(a=Object.keys(i)),s.sort&&a.sort(s.sort);const m=new WeakMap;for(let T=0;T<a.length;++T){const A=a[T];s.skipNulls&&i[A]===null||l_(d,a_(i[A],A,p,y,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,m))}const v=d.join(s.delimiter);let _=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),v.length>0?_+v:""}function EM(n){let e=0;for(const a of n)e+=a.length;const i=new Uint8Array(e);let s=0;for(const a of n)i.set(a,s),s+=a.length;return i}let Tv;function ed(n){let e;return(Tv??(e=new globalThis.TextEncoder,Tv=e.encode.bind(e)))(n)}let Ev;function Av(n){let e;return(Ev??(e=new globalThis.TextDecoder,Ev=e.decode.bind(e)))(n)}var Vt,zt;class vr{constructor(){Vt.set(this,void 0),zt.set(this,void 0),he(this,Vt,new Uint8Array),he(this,zt,null)}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ed(e):e;he(this,Vt,EM([L(this,Vt,"f"),i]));const s=[];let a;for(;(a=AM(L(this,Vt,"f"),L(this,zt,"f")))!=null;){if(a.carriage&&L(this,zt,"f")==null){he(this,zt,a.index);continue}if(L(this,zt,"f")!=null&&(a.index!==L(this,zt,"f")+1||a.carriage)){s.push(Av(L(this,Vt,"f").subarray(0,L(this,zt,"f")-1))),he(this,Vt,L(this,Vt,"f").subarray(L(this,zt,"f"))),he(this,zt,null);continue}const u=L(this,zt,"f")!==null?a.preceding-1:a.preceding,d=Av(L(this,Vt,"f").subarray(0,u));s.push(d),he(this,Vt,L(this,Vt,"f").subarray(a.index)),he(this,zt,null)}return s}flush(){return L(this,Vt,"f").length?this.decode(`
`):[]}}Vt=new WeakMap,zt=new WeakMap;vr.NEWLINE_CHARS=new Set([`
`,"\r"]);vr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function AM(n,e){for(let a=e??0;a<n.length;a++){if(n[a]===10)return{preceding:a,index:a+1,carriage:!1};if(n[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function CM(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}const nr={off:0,error:200,warn:300,info:400,debug:500},Cv=(n,e,i)=>{if(n){if(sM(nr,n))return n;mt(i).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(nr))}`)}};function Js(){}function Da(n,e,i){return!e||nr[n]>nr[i]?Js:e[n].bind(e)}const bM={error:Js,warn:Js,info:Js,debug:Js};let bv=new WeakMap;function mt(n){const e=n.logger,i=n.logLevel??"off";if(!e)return bM;const s=bv.get(e);if(s&&s[0]===i)return s[1];const a={error:Da("error",e,i),warn:Da("warn",e,i),info:Da("info",e,i),debug:Da("debug",e,i)};return bv.set(e,[i,a]),a}const Hi=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,i])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var Vs;class _n{constructor(e,i,s){this.iterator=e,Vs.set(this,void 0),this.controller=i,he(this,Vs,s)}static fromSSEResponse(e,i,s){let a=!1;const u=s?mt(s):console;async function*d(){if(a)throw new ue("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let p=!1;try{for await(const y of wM(e,i))if(!p){if(y.data.startsWith("[DONE]")){p=!0;continue}if(y.event===null||!y.event.startsWith("thread.")){let m;try{m=JSON.parse(y.data)}catch(v){throw u.error("Could not parse message into JSON:",y.data),u.error("From chunk:",y.raw),v}if(m&&m.error)throw new yt(void 0,m.error,void 0,e.headers);yield m}else{let m;try{m=JSON.parse(y.data)}catch(v){throw console.error("Could not parse message into JSON:",y.data),console.error("From chunk:",y.raw),v}if(y.event=="error")throw new yt(void 0,m.error,m.message,void 0);yield{event:y.event,data:m}}}p=!0}catch(y){if(Nf(y))return;throw y}finally{p||i.abort()}}return new _n(d,i,s)}static fromReadableStream(e,i,s){let a=!1;async function*u(){const p=new vr,y=n_(e);for await(const m of y)for(const v of p.decode(m))yield v;for(const m of p.flush())yield m}async function*d(){if(a)throw new ue("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let p=!1;try{for await(const y of u())p||y&&(yield JSON.parse(y));p=!0}catch(y){if(Nf(y))return;throw y}finally{p||i.abort()}}return new _n(d,i,s)}[(Vs=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],i=[],s=this.iterator(),a=u=>({next:()=>{if(u.length===0){const d=s.next();e.push(d),i.push(d)}return u.shift()}});return[new _n(()=>a(e),this.controller,L(this,Vs,"f")),new _n(()=>a(i),this.controller,L(this,Vs,"f"))]}toReadableStream(){const e=this;let i;return e_({async start(){i=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:u}=await i.next();if(u)return s.close();const d=ed(JSON.stringify(a)+`
`);s.enqueue(d)}catch(a){s.error(a)}},async cancel(){var s;await((s=i.return)==null?void 0:s.call(i))}})}}async function*wM(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ue("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ue("Attempted to iterate over a response with no body");const i=new xM,s=new vr,a=n_(n.body);for await(const u of RM(a))for(const d of s.decode(u)){const p=i.decode(d);p&&(yield p)}for(const u of s.flush()){const d=i.decode(u);d&&(yield d)}}async function*RM(n){let e=new Uint8Array;for await(const i of n){if(i==null)continue;const s=i instanceof ArrayBuffer?new Uint8Array(i):typeof i=="string"?ed(i):i;let a=new Uint8Array(e.length+s.length);a.set(e),a.set(s,e.length),e=a;let u;for(;(u=CM(e))!==-1;)yield e.slice(0,u),e=e.slice(u)}e.length>0&&(yield e)}class xM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,s,a]=NM(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}}function NM(n,e){const i=n.indexOf(e);return i!==-1?[n.substring(0,i),e,n.substring(i+e.length)]:[n,"",""]}async function r_(n,e){const{response:i,requestLogID:s,retryOfRequestLogID:a,startTime:u}=e,d=await(async()=>{var _;if(e.options.stream)return mt(n).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,n):_n.fromSSEResponse(i,e.controller,n);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const p=i.headers.get("content-type"),y=(_=p==null?void 0:p.split(";")[0])==null?void 0:_.trim();if((y==null?void 0:y.includes("application/json"))||(y==null?void 0:y.endsWith("+json"))){const T=await i.json();return u_(T,i)}return await i.text()})();return mt(n).debug(`[${s}] response parsed`,Hi({retryOfRequestLogID:a,url:i.url,status:i.status,body:d,durationMs:Date.now()-u})),d}function u_(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Ys;class _r extends Promise{constructor(e,i,s=r_){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=s,Ys.set(this,void 0),he(this,Ys,e)}_thenUnwrap(e){return new _r(L(this,Ys,"f"),this.responsePromise,async(i,s)=>u_(e(await this.parseResponse(i,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i,request_id:i.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(L(this,Ys,"f"),e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Ys=new WeakMap;var Ua;class td{constructor(e,i,s,a){Ua.set(this,void 0),he(this,Ua,e),this.options=a,this.response=i,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new ue("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await L(this,Ua,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ua=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const i of e.getPaginatedItems())yield i}}class IM extends _r{constructor(e,i,s){super(e,i,async(a,u)=>new s(a,u.response,await r_(a,u),u.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const i of e)yield i}}class Sr extends td{constructor(e,i,s,a){super(e,i,s,a),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class nt extends td{constructor(e,i,s,a){super(e,i,s,a),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var s;const e=this.getPaginatedItems(),i=(s=e[e.length-1])==null?void 0:s.id;return i?{...this.options,query:{...j0(this.options.query),after:i}}:null}}class ir extends td{constructor(e,i,s,a){super(e,i,s,a),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...j0(this.options.query),after:e}}:null}}const c_=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((n=e==null?void 0:e.versions)==null?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function el(n,e,i){return c_(),new File(n,e??"unknown_file",i)}function Ba(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const nd=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",wv=async(n,e)=>Df(n.body)?{...n,body:await f_(n.body,e)}:n,Vi=async(n,e)=>({...n,body:await f_(n.body,e)}),Rv=new WeakMap;function MM(n){const e=typeof n=="function"?n:n.fetch,i=Rv.get(e);if(i)return i;const s=(async()=>{try{const a="Response"in e?e.Response:(await e("data:,")).constructor,u=new FormData;return u.toString()!==await new a(u).text()}catch{return!0}})();return Rv.set(e,s),s}const f_=async(n,e)=>{if(!await MM(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const i=new FormData;return await Promise.all(Object.entries(n||{}).map(([s,a])=>Uf(i,s,a))),i},d_=n=>n instanceof Blob&&"name"in n,DM=n=>typeof n=="object"&&n!==null&&(n instanceof Response||nd(n)||d_(n)),Df=n=>{if(DM(n))return!0;if(Array.isArray(n))return n.some(Df);if(n&&typeof n=="object"){for(const e in n)if(Df(n[e]))return!0}return!1},Uf=async(n,e,i)=>{if(i!==void 0){if(i==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")n.append(e,String(i));else if(i instanceof Response)n.append(e,el([await i.blob()],Ba(i)));else if(nd(i))n.append(e,el([await new Response(t_(i)).blob()],Ba(i)));else if(d_(i))n.append(e,i,Ba(i));else if(Array.isArray(i))await Promise.all(i.map(s=>Uf(n,e+"[]",s)));else if(typeof i=="object")await Promise.all(Object.entries(i).map(([s,a])=>Uf(n,`${e}[${s}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${i} instead`)}},h_=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",UM=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&h_(n),LM=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function OM(n,e,i){if(c_(),n=await n,UM(n))return n instanceof File?n:el([await n.arrayBuffer()],n.name);if(LM(n)){const a=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),el(await Lf(a),e,i)}const s=await Lf(n);if(e||(e=Ba(n)),!(i!=null&&i.type)){const a=s.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof a=="string"&&(i={...i,type:a})}return el(s,e,i)}async function Lf(n){var i;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(h_(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(nd(n))for await(const s of n)e.push(...await Lf(s));else{const s=(i=n==null?void 0:n.constructor)==null?void 0:i.name;throw new Error(`Unexpected data type: ${typeof n}${s?`; constructor: ${s}`:""}${GM(n)}`)}return e}function GM(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(i=>`"${i}"`).join(", ")}]`}class ae{constructor(e){this._client=e}}function p_(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const xv=Object.freeze(Object.create(null)),PM=(n=p_)=>function(i,...s){if(i.length===1)return i[0];let a=!1;const u=[],d=i.reduce((v,_,T)=>{var I;/[?#]/.test(_)&&(a=!0);const A=s[T];let C=(a?encodeURIComponent:n)(""+A);return T!==s.length&&(A==null||typeof A=="object"&&A.toString===((I=Object.getPrototypeOf(Object.getPrototypeOf(A.hasOwnProperty??xv)??xv))==null?void 0:I.toString))&&(C=A+"",u.push({start:v.length+_.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),v+_+(T===s.length?"":C)},""),p=d.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(p))!==null;)u.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(u.sort((v,_)=>v.start-_.start),u.length>0){let v=0;const _=u.reduce((T,A)=>{const C=" ".repeat(A.start-v),I="^".repeat(A.length);return v=A.start+A.length,T+C+I},"");throw new ue(`Path parameters result in path with invalid segments:
${u.map(T=>T.error).join(`
`)}
${d}
${_}`)}return d},K=PM(p_);let m_=class extends ae{list(e,i={},s){return this._client.getAPIList(K`/chat/completions/${e}/messages`,nt,{query:i,...s})}};function or(n){return n!==void 0&&"function"in n&&n.function!==void 0}function id(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function ll(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function HM(n,e){return!e||!g_(e)?{...n,choices:n.choices.map(i=>(y_(i.message.tool_calls),{...i,message:{...i.message,parsed:null,...i.message.tool_calls?{tool_calls:i.message.tool_calls}:void 0}}))}:od(n,e)}function od(n,e){const i=n.choices.map(s=>{var a;if(s.finish_reason==="length")throw new Z0;if(s.finish_reason==="content_filter")throw new W0;return y_(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:((a=s.message.tool_calls)==null?void 0:a.map(u=>qM(e,u)))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?kM(e,s.message.content):null}}});return{...n,choices:i}}function kM(n,e){var i,s;return((i=n.response_format)==null?void 0:i.type)!=="json_schema"?null:((s=n.response_format)==null?void 0:s.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function qM(n,e){var s;const i=(s=n.tools)==null?void 0:s.find(a=>{var u;return or(a)&&((u=a.function)==null?void 0:u.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:ll(i)?i.$parseRaw(e.function.arguments):i!=null&&i.function.strict?JSON.parse(e.function.arguments):null}}}function BM(n,e){var s;if(!n||!("tools"in n)||!n.tools)return!1;const i=(s=n.tools)==null?void 0:s.find(a=>{var u;return or(a)&&((u=a.function)==null?void 0:u.name)===e.function.name});return or(i)&&(ll(i)||(i==null?void 0:i.function.strict)||!1)}function g_(n){var e;return id(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(i=>ll(i)||i.type==="function"&&i.function.strict===!0))??!1}function y_(n){for(const e of n||[])if(e.type!=="function")throw new ue(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function VM(n){for(const e of n??[]){if(e.type!=="function")throw new ue(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ue(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const sr=n=>(n==null?void 0:n.role)==="assistant",v_=n=>(n==null?void 0:n.role)==="tool";var Of,Va,za,Ks,Xs,Fa,Qs,kn,Zs,lr,ar,Lo,__;class sd{constructor(){Of.add(this),this.controller=new AbortController,Va.set(this,void 0),za.set(this,()=>{}),Ks.set(this,()=>{}),Xs.set(this,void 0),Fa.set(this,()=>{}),Qs.set(this,()=>{}),kn.set(this,{}),Zs.set(this,!1),lr.set(this,!1),ar.set(this,!1),Lo.set(this,!1),he(this,Va,new Promise((e,i)=>{he(this,za,e,"f"),he(this,Ks,i,"f")})),he(this,Xs,new Promise((e,i)=>{he(this,Fa,e,"f"),he(this,Qs,i,"f")})),L(this,Va,"f").catch(()=>{}),L(this,Xs,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},L(this,Of,"m",__).bind(this))},0)}_connected(){this.ended||(L(this,za,"f").call(this),this._emit("connect"))}get ended(){return L(this,Zs,"f")}get errored(){return L(this,lr,"f")}get aborted(){return L(this,ar,"f")}abort(){this.controller.abort()}on(e,i){return(L(this,kn,"f")[e]||(L(this,kn,"f")[e]=[])).push({listener:i}),this}off(e,i){const s=L(this,kn,"f")[e];if(!s)return this;const a=s.findIndex(u=>u.listener===i);return a>=0&&s.splice(a,1),this}once(e,i){return(L(this,kn,"f")[e]||(L(this,kn,"f")[e]=[])).push({listener:i,once:!0}),this}emitted(e){return new Promise((i,s)=>{he(this,Lo,!0),e!=="error"&&this.once("error",s),this.once(e,i)})}async done(){he(this,Lo,!0),await L(this,Xs,"f")}_emit(e,...i){if(L(this,Zs,"f"))return;e==="end"&&(he(this,Zs,!0),L(this,Fa,"f").call(this));const s=L(this,kn,"f")[e];if(s&&(L(this,kn,"f")[e]=s.filter(a=>!a.once),s.forEach(({listener:a})=>a(...i))),e==="abort"){const a=i[0];!L(this,Lo,"f")&&!(s!=null&&s.length)&&Promise.reject(a),L(this,Ks,"f").call(this,a),L(this,Qs,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=i[0];!L(this,Lo,"f")&&!(s!=null&&s.length)&&Promise.reject(a),L(this,Ks,"f").call(this,a),L(this,Qs,"f").call(this,a),this._emit("end")}}_emitFinal(){}}Va=new WeakMap,za=new WeakMap,Ks=new WeakMap,Xs=new WeakMap,Fa=new WeakMap,Qs=new WeakMap,kn=new WeakMap,Zs=new WeakMap,lr=new WeakMap,ar=new WeakMap,Lo=new WeakMap,Of=new WeakSet,__=function(e){if(he(this,lr,!0),e instanceof Error&&e.name==="AbortError"&&(e=new tn),e instanceof tn)return he(this,ar,!0),this._emit("abort",e);if(e instanceof ue)return this._emit("error",e);if(e instanceof Error){const i=new ue(e.message);return i.cause=e,this._emit("error",i)}return this._emit("error",new ue(String(e)))};function zM(n){return typeof n.parse=="function"}var Et,Gf,rr,Pf,Hf,kf,S_,T_;const FM=10;class E_ extends sd{constructor(){super(...arguments),Et.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var s;this._chatCompletions.push(e),this._emit("chatCompletion",e);const i=(s=e.choices[0])==null?void 0:s.message;return i&&this._addMessage(i),e}_addMessage(e,i=!0){if("content"in e||(e.content=null),this.messages.push(e),i){if(this._emit("message",e),v_(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(sr(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ue("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),L(this,Et,"m",Gf).call(this)}async finalMessage(){return await this.done(),L(this,Et,"m",rr).call(this)}async finalFunctionToolCall(){return await this.done(),L(this,Et,"m",Pf).call(this)}async finalFunctionToolCallResult(){return await this.done(),L(this,Et,"m",Hf).call(this)}async totalUsage(){return await this.done(),L(this,Et,"m",kf).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const i=L(this,Et,"m",rr).call(this);i&&this._emit("finalMessage",i);const s=L(this,Et,"m",Gf).call(this);s&&this._emit("finalContent",s);const a=L(this,Et,"m",Pf).call(this);a&&this._emit("finalFunctionToolCall",a);const u=L(this,Et,"m",Hf).call(this);u!=null&&this._emit("finalFunctionToolCallResult",u),this._chatCompletions.some(d=>d.usage)&&this._emit("totalUsage",L(this,Et,"m",kf).call(this))}async _createChatCompletion(e,i,s){const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),L(this,Et,"m",S_).call(this,i);const u=await e.chat.completions.create({...i,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(od(u,i))}async _runChatCompletion(e,i,s){for(const a of i.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,i,s)}async _runTools(e,i,s){var A,C,I;const a="tool",{tool_choice:u="auto",stream:d,...p}=i,y=typeof u!="string"&&u.type==="function"&&((A=u==null?void 0:u.function)==null?void 0:A.name),{maxChatCompletions:m=FM}=s||{},v=i.tools.map(w=>{if(ll(w)){if(!w.$callback)throw new ue("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:w.$callback,name:w.function.name,description:w.function.description||"",parameters:w.function.parameters,parse:w.$parseRaw,strict:!0}}}return w}),_={};for(const w of v)w.type==="function"&&(_[w.function.name||w.function.function.name]=w.function);const T="tools"in i?v.map(w=>w.type==="function"?{type:"function",function:{name:w.function.name||w.function.function.name,parameters:w.function.parameters,description:w.function.description,strict:w.function.strict}}:w):void 0;for(const w of i.messages)this._addMessage(w,!1);for(let w=0;w<m;++w){const B=(C=(await this._createChatCompletion(e,{...p,tool_choice:u,tools:T,messages:[...this.messages]},s)).choices[0])==null?void 0:C.message;if(!B)throw new ue("missing message in ChatCompletion response");if(!((I=B.tool_calls)!=null&&I.length))return;for(const k of B.tool_calls){if(k.type!=="function")continue;const G=k.id,{name:P,arguments:W}=k.function,J=_[P];if(J){if(y&&y!==P){const se=`Invalid tool_call: ${JSON.stringify(P)}. ${JSON.stringify(y)} requested. Please try again`;this._addMessage({role:a,tool_call_id:G,content:se});continue}}else{const se=`Invalid tool_call: ${JSON.stringify(P)}. Available options are: ${Object.keys(_).map(Se=>JSON.stringify(Se)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:G,content:se});continue}let ce;try{ce=zM(J)?await J.parse(W):W}catch(se){const Se=se instanceof Error?se.message:String(se);this._addMessage({role:a,tool_call_id:G,content:Se});continue}const X=await J.function(ce,this),oe=L(this,Et,"m",T_).call(this,X);if(this._addMessage({role:a,tool_call_id:G,content:oe}),y)return}}}}Et=new WeakSet,Gf=function(){return L(this,Et,"m",rr).call(this).content??null},rr=function(){let e=this.messages.length;for(;e-- >0;){const i=this.messages[e];if(sr(i))return{...i,content:i.content??null,refusal:i.refusal??null}}throw new ue("stream ended without producing a ChatCompletionMessage with role=assistant")},Pf=function(){var e,i;for(let s=this.messages.length-1;s>=0;s--){const a=this.messages[s];if(sr(a)&&((e=a==null?void 0:a.tool_calls)!=null&&e.length))return(i=a.tool_calls.filter(u=>u.type==="function").at(-1))==null?void 0:i.function}},Hf=function(){for(let e=this.messages.length-1;e>=0;e--){const i=this.messages[e];if(v_(i)&&i.content!=null&&typeof i.content=="string"&&this.messages.some(s=>{var a;return s.role==="assistant"&&((a=s.tool_calls)==null?void 0:a.some(u=>u.type==="function"&&u.id===i.tool_call_id))}))return i.content}},kf=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:i}of this._chatCompletions)i&&(e.completion_tokens+=i.completion_tokens,e.prompt_tokens+=i.prompt_tokens,e.total_tokens+=i.total_tokens);return e},S_=function(e){if(e.n!=null&&e.n>1)throw new ue("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},T_=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ld extends E_{static runTools(e,i,s){const a=new ld,u={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,i,u)),a}_addMessage(e,i=!0){super._addMessage(e,i),sr(e)&&e.content&&this._emit("content",e.content)}}const A_=1,C_=2,b_=4,w_=8,R_=16,x_=32,N_=64,I_=128,M_=256,D_=I_|M_,U_=R_|x_|D_|N_,L_=A_|C_|U_,O_=b_|w_,$M=L_|O_,rt={STR:A_,NUM:C_,ARR:b_,OBJ:w_,NULL:R_,BOOL:x_,NAN:N_,INFINITY:I_,MINUS_INFINITY:M_,INF:D_,SPECIAL:U_,ATOM:L_,COLLECTION:O_,ALL:$M};class JM extends Error{}class YM extends Error{}function KM(n,e=rt.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return XM(n.trim(),e)}const XM=(n,e)=>{const i=n.length;let s=0;const a=T=>{throw new JM(`${T} at position ${s}`)},u=T=>{throw new YM(`${T} at position ${s}`)},d=()=>(_(),s>=i&&a("Unexpected end of input"),n[s]==='"'?p():n[s]==="{"?y():n[s]==="["?m():n.substring(s,s+4)==="null"||rt.NULL&e&&i-s<4&&"null".startsWith(n.substring(s))?(s+=4,null):n.substring(s,s+4)==="true"||rt.BOOL&e&&i-s<4&&"true".startsWith(n.substring(s))?(s+=4,!0):n.substring(s,s+5)==="false"||rt.BOOL&e&&i-s<5&&"false".startsWith(n.substring(s))?(s+=5,!1):n.substring(s,s+8)==="Infinity"||rt.INFINITY&e&&i-s<8&&"Infinity".startsWith(n.substring(s))?(s+=8,1/0):n.substring(s,s+9)==="-Infinity"||rt.MINUS_INFINITY&e&&1<i-s&&i-s<9&&"-Infinity".startsWith(n.substring(s))?(s+=9,-1/0):n.substring(s,s+3)==="NaN"||rt.NAN&e&&i-s<3&&"NaN".startsWith(n.substring(s))?(s+=3,NaN):v()),p=()=>{const T=s;let A=!1;for(s++;s<i&&(n[s]!=='"'||A&&n[s-1]==="\\");)A=n[s]==="\\"?!A:!1,s++;if(n.charAt(s)=='"')try{return JSON.parse(n.substring(T,++s-Number(A)))}catch(C){u(String(C))}else if(rt.STR&e)try{return JSON.parse(n.substring(T,s-Number(A))+'"')}catch{return JSON.parse(n.substring(T,n.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},y=()=>{s++,_();const T={};try{for(;n[s]!=="}";){if(_(),s>=i&&rt.OBJ&e)return T;const A=p();_(),s++;try{const C=d();Object.defineProperty(T,A,{value:C,writable:!0,enumerable:!0,configurable:!0})}catch(C){if(rt.OBJ&e)return T;throw C}_(),n[s]===","&&s++}}catch{if(rt.OBJ&e)return T;a("Expected '}' at end of object")}return s++,T},m=()=>{s++;const T=[];try{for(;n[s]!=="]";)T.push(d()),_(),n[s]===","&&s++}catch{if(rt.ARR&e)return T;a("Expected ']' at end of array")}return s++,T},v=()=>{if(s===0){n==="-"&&rt.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(n)}catch(A){if(rt.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}u(String(A))}}const T=s;for(n[s]==="-"&&s++;n[s]&&!",]}".includes(n[s]);)s++;s==i&&!(rt.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(n.substring(T,s))}catch{n.substring(T,s)==="-"&&rt.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(n.substring(T,n.lastIndexOf("e")))}catch(C){u(String(C))}}},_=()=>{for(;s<i&&` 
\r	`.includes(n[s]);)s++};return d()},Nv=n=>KM(n,rt.ALL^rt.NUM);var ot,Hn,No,pi,of,La,sf,lf,af,Oa,rf,Iv;class ol extends E_{constructor(e){super(),ot.add(this),Hn.set(this,void 0),No.set(this,void 0),pi.set(this,void 0),he(this,Hn,e),he(this,No,[])}get currentChatCompletionSnapshot(){return L(this,pi,"f")}static fromReadableStream(e){const i=new ol(null);return i._run(()=>i._fromReadableStream(e)),i}static createChatCompletion(e,i,s){const a=new ol(i);return a._run(()=>a._runChatCompletion(e,{...i,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,i,s){var d;super._createChatCompletion;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),L(this,ot,"m",of).call(this);const u=await e.chat.completions.create({...i,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const p of u)L(this,ot,"m",sf).call(this,p);if((d=u.controller.signal)!=null&&d.aborted)throw new tn;return this._addChatCompletion(L(this,ot,"m",Oa).call(this))}async _fromReadableStream(e,i){var d;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),L(this,ot,"m",of).call(this),this._connected();const a=_n.fromReadableStream(e,this.controller);let u;for await(const p of a)u&&u!==p.id&&this._addChatCompletion(L(this,ot,"m",Oa).call(this)),L(this,ot,"m",sf).call(this,p),u=p.id;if((d=a.controller.signal)!=null&&d.aborted)throw new tn;return this._addChatCompletion(L(this,ot,"m",Oa).call(this))}[(Hn=new WeakMap,No=new WeakMap,pi=new WeakMap,ot=new WeakSet,of=function(){this.ended||he(this,pi,void 0)},La=function(i){let s=L(this,No,"f")[i.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},L(this,No,"f")[i.index]=s,s)},sf=function(i){var a,u,d,p,y,m,v,_,T,A,C,I,w,q,B;if(this.ended)return;const s=L(this,ot,"m",Iv).call(this,i);this._emit("chunk",i,s);for(const k of i.choices){const G=s.choices[k.index];k.delta.content!=null&&((a=G.message)==null?void 0:a.role)==="assistant"&&((u=G.message)!=null&&u.content)&&(this._emit("content",k.delta.content,G.message.content),this._emit("content.delta",{delta:k.delta.content,snapshot:G.message.content,parsed:G.message.parsed})),k.delta.refusal!=null&&((d=G.message)==null?void 0:d.role)==="assistant"&&((p=G.message)!=null&&p.refusal)&&this._emit("refusal.delta",{delta:k.delta.refusal,snapshot:G.message.refusal}),((y=k.logprobs)==null?void 0:y.content)!=null&&((m=G.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(v=k.logprobs)==null?void 0:v.content,snapshot:((_=G.logprobs)==null?void 0:_.content)??[]}),((T=k.logprobs)==null?void 0:T.refusal)!=null&&((A=G.message)==null?void 0:A.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(C=k.logprobs)==null?void 0:C.refusal,snapshot:((I=G.logprobs)==null?void 0:I.refusal)??[]});const P=L(this,ot,"m",La).call(this,G);G.finish_reason&&(L(this,ot,"m",af).call(this,G),P.current_tool_call_index!=null&&L(this,ot,"m",lf).call(this,G,P.current_tool_call_index));for(const W of k.delta.tool_calls??[])P.current_tool_call_index!==W.index&&(L(this,ot,"m",af).call(this,G),P.current_tool_call_index!=null&&L(this,ot,"m",lf).call(this,G,P.current_tool_call_index)),P.current_tool_call_index=W.index;for(const W of k.delta.tool_calls??[]){const J=(w=G.message.tool_calls)==null?void 0:w[W.index];J!=null&&J.type&&((J==null?void 0:J.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(q=J.function)==null?void 0:q.name,index:W.index,arguments:J.function.arguments,parsed_arguments:J.function.parsed_arguments,arguments_delta:((B=W.function)==null?void 0:B.arguments)??""}):(J==null||J.type,void 0))}}},lf=function(i,s){var d,p,y;if(L(this,ot,"m",La).call(this,i).done_tool_calls.has(s))return;const u=(d=i.message.tool_calls)==null?void 0:d[s];if(!u)throw new Error("no tool call snapshot");if(!u.type)throw new Error("tool call snapshot missing `type`");if(u.type==="function"){const m=(y=(p=L(this,Hn,"f"))==null?void 0:p.tools)==null?void 0:y.find(v=>or(v)&&v.function.name===u.function.name);this._emit("tool_calls.function.arguments.done",{name:u.function.name,index:s,arguments:u.function.arguments,parsed_arguments:ll(m)?m.$parseRaw(u.function.arguments):m!=null&&m.function.strict?JSON.parse(u.function.arguments):null})}else u.type},af=function(i){var a,u;const s=L(this,ot,"m",La).call(this,i);if(i.message.content&&!s.content_done){s.content_done=!0;const d=L(this,ot,"m",rf).call(this);this._emit("content.done",{content:i.message.content,parsed:d?d.$parseRaw(i.message.content):null})}i.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:i.message.refusal})),(a=i.logprobs)!=null&&a.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:i.logprobs.content})),(u=i.logprobs)!=null&&u.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:i.logprobs.refusal}))},Oa=function(){if(this.ended)throw new ue("stream has ended, this shouldn't happen");const i=L(this,pi,"f");if(!i)throw new ue("request ended without sending any chunks");return he(this,pi,void 0),he(this,No,[]),QM(i,L(this,Hn,"f"))},rf=function(){var s;const i=(s=L(this,Hn,"f"))==null?void 0:s.response_format;return id(i)?i:null},Iv=function(i){var s,a,u,d;let p=L(this,pi,"f");const{choices:y,...m}=i;p?Object.assign(p,m):p=he(this,pi,{...m,choices:[]});for(const{delta:v,finish_reason:_,index:T,logprobs:A=null,...C}of i.choices){let I=p.choices[T];if(I||(I=p.choices[T]={finish_reason:_,index:T,message:{},logprobs:A,...C}),A)if(!I.logprobs)I.logprobs=Object.assign({},A);else{const{content:W,refusal:J,...ce}=A;Object.assign(I.logprobs,ce),W&&((s=I.logprobs).content??(s.content=[]),I.logprobs.content.push(...W)),J&&((a=I.logprobs).refusal??(a.refusal=[]),I.logprobs.refusal.push(...J))}if(_&&(I.finish_reason=_,L(this,Hn,"f")&&g_(L(this,Hn,"f")))){if(_==="length")throw new Z0;if(_==="content_filter")throw new W0}if(Object.assign(I,C),!v)continue;const{content:w,refusal:q,function_call:B,role:k,tool_calls:G,...P}=v;if(Object.assign(I.message,P),q&&(I.message.refusal=(I.message.refusal||"")+q),k&&(I.message.role=k),B&&(I.message.function_call?(B.name&&(I.message.function_call.name=B.name),B.arguments&&((u=I.message.function_call).arguments??(u.arguments=""),I.message.function_call.arguments+=B.arguments)):I.message.function_call=B),w&&(I.message.content=(I.message.content||"")+w,!I.message.refusal&&L(this,ot,"m",rf).call(this)&&(I.message.parsed=Nv(I.message.content))),G){I.message.tool_calls||(I.message.tool_calls=[]);for(const{index:W,id:J,type:ce,function:X,...oe}of G){const se=(d=I.message.tool_calls)[W]??(d[W]={});Object.assign(se,oe),J&&(se.id=J),ce&&(se.type=ce),X&&(se.function??(se.function={name:X.name??"",arguments:""})),X!=null&&X.name&&(se.function.name=X.name),X!=null&&X.arguments&&(se.function.arguments+=X.arguments,BM(L(this,Hn,"f"),se)&&(se.function.parsed_arguments=Nv(se.function.arguments)))}}}return p},Symbol.asyncIterator)](){const e=[],i=[];let s=!1;return this.on("chunk",a=>{const u=i.shift();u?u.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of i)a.resolve(void 0);i.length=0}),this.on("abort",a=>{s=!0;for(const u of i)u.reject(a);i.length=0}),this.on("error",a=>{s=!0;for(const u of i)u.reject(a);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((u,d)=>i.push({resolve:u,reject:d})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new _n(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function QM(n,e){const{id:i,choices:s,created:a,model:u,system_fingerprint:d,...p}=n,y={...p,id:i,choices:s.map(({message:m,finish_reason:v,index:_,logprobs:T,...A})=>{if(!v)throw new ue(`missing finish_reason for choice ${_}`);const{content:C=null,function_call:I,tool_calls:w,...q}=m,B=m.role;if(!B)throw new ue(`missing role for choice ${_}`);if(I){const{arguments:k,name:G}=I;if(k==null)throw new ue(`missing function_call.arguments for choice ${_}`);if(!G)throw new ue(`missing function_call.name for choice ${_}`);return{...A,message:{content:C,function_call:{arguments:k,name:G},role:B,refusal:m.refusal??null},finish_reason:v,index:_,logprobs:T}}return w?{...A,index:_,finish_reason:v,logprobs:T,message:{...q,role:B,content:C,refusal:m.refusal??null,tool_calls:w.map((k,G)=>{const{function:P,type:W,id:J,...ce}=k,{arguments:X,name:oe,...se}=P||{};if(J==null)throw new ue(`missing choices[${_}].tool_calls[${G}].id
${Ga(n)}`);if(W==null)throw new ue(`missing choices[${_}].tool_calls[${G}].type
${Ga(n)}`);if(oe==null)throw new ue(`missing choices[${_}].tool_calls[${G}].function.name
${Ga(n)}`);if(X==null)throw new ue(`missing choices[${_}].tool_calls[${G}].function.arguments
${Ga(n)}`);return{...ce,id:J,type:W,function:{...se,name:oe,arguments:X}}})}}:{...A,message:{...q,content:C,role:B,refusal:m.refusal??null},finish_reason:v,index:_,logprobs:T}}),created:a,model:u,object:"chat.completion",...d?{system_fingerprint:d}:{}};return HM(y,e)}function Ga(n){return JSON.stringify(n)}class ur extends ol{static fromReadableStream(e){const i=new ur(null);return i._run(()=>i._fromReadableStream(e)),i}static runTools(e,i,s){const a=new ur(i),u={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,i,u)),a}}let ad=class extends ae{constructor(){super(...arguments),this.messages=new m_(this._client)}create(e,i){return this._client.post("/chat/completions",{body:e,...i,stream:e.stream??!1})}retrieve(e,i){return this._client.get(K`/chat/completions/${e}`,i)}update(e,i,s){return this._client.post(K`/chat/completions/${e}`,{body:i,...s})}list(e={},i){return this._client.getAPIList("/chat/completions",nt,{query:e,...i})}delete(e,i){return this._client.delete(K`/chat/completions/${e}`,i)}parse(e,i){return VM(e.tools),this._client.chat.completions.create(e,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>od(s,e))}runTools(e,i){return e.stream?ur.runTools(this._client,e,i):ld.runTools(this._client,e,i)}stream(e,i){return ol.createChatCompletion(this._client,e,i)}};ad.Messages=m_;class rd extends ae{constructor(){super(...arguments),this.completions=new ad(this._client)}}rd.Completions=ad;const G_=Symbol("brand.privateNullableHeaders");function*ZM(n){if(!n)return;if(G_ in n){const{values:s,nulls:a}=n;yield*s.entries();for(const u of a)yield[u,null];return}let e=!1,i;n instanceof Headers?i=n.entries():pv(n)?i=n:(e=!0,i=Object.entries(n??{}));for(let s of i){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const u=pv(s[1])?s[1]:[s[1]];let d=!1;for(const p of u)p!==void 0&&(e&&!d&&(d=!0,yield[a,null]),yield[a,p])}}const ie=n=>{const e=new Headers,i=new Set;for(const s of n){const a=new Set;for(const[u,d]of ZM(s)){const p=u.toLowerCase();a.has(p)||(e.delete(u),a.add(p)),d===null?(e.delete(u),i.add(p)):(e.append(u,d),i.delete(p))}}return{[G_]:!0,values:e,nulls:i}};class P_ extends ae{create(e,i){return this._client.post("/audio/speech",{body:e,...i,headers:ie([{Accept:"application/octet-stream"},i==null?void 0:i.headers]),__binaryResponse:!0})}}class H_ extends ae{create(e,i){return this._client.post("/audio/transcriptions",Vi({body:e,...i,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class k_ extends ae{create(e,i){return this._client.post("/audio/translations",Vi({body:e,...i,__metadata:{model:e.model}},this._client))}}class al extends ae{constructor(){super(...arguments),this.transcriptions=new H_(this._client),this.translations=new k_(this._client),this.speech=new P_(this._client)}}al.Transcriptions=H_;al.Translations=k_;al.Speech=P_;class q_ extends ae{create(e,i){return this._client.post("/batches",{body:e,...i})}retrieve(e,i){return this._client.get(K`/batches/${e}`,i)}list(e={},i){return this._client.getAPIList("/batches",nt,{query:e,...i})}cancel(e,i){return this._client.post(K`/batches/${e}/cancel`,i)}}class B_ extends ae{create(e,i){return this._client.post("/assistants",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(K`/assistants/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,s){return this._client.post(K`/assistants/${e}`,{body:i,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},i){return this._client.getAPIList("/assistants",nt,{query:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(K`/assistants/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}let V_=class extends ae{create(e,i){return this._client.post("/realtime/sessions",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}};class z_ extends ae{create(e,i){return this._client.post("/realtime/transcription_sessions",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}let Tr=class extends ae{constructor(){super(...arguments),this.sessions=new V_(this._client),this.transcriptionSessions=new z_(this._client)}};Tr.Sessions=V_;Tr.TranscriptionSessions=z_;class F_ extends ae{create(e,i){return this._client.post("/chatkit/sessions",{body:e,...i,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}cancel(e,i){return this._client.post(K`/chatkit/sessions/${e}/cancel`,{...i,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}}let $_=class extends ae{retrieve(e,i){return this._client.get(K`/chatkit/threads/${e}`,{...i,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}list(e={},i){return this._client.getAPIList("/chatkit/threads",ir,{query:e,...i,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(K`/chatkit/threads/${e}`,{...i,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}listItems(e,i={},s){return this._client.getAPIList(K`/chatkit/threads/${e}/items`,ir,{query:i,...s,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},s==null?void 0:s.headers])})}};class Er extends ae{constructor(){super(...arguments),this.sessions=new F_(this._client),this.threads=new $_(this._client)}}Er.Sessions=F_;Er.Threads=$_;class J_ extends ae{create(e,i,s){return this._client.post(K`/threads/${e}/messages`,{body:i,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,i,s){const{thread_id:a}=i;return this._client.get(K`/threads/${a}/messages/${e}`,{...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,i,s){const{thread_id:a,...u}=i;return this._client.post(K`/threads/${a}/messages/${e}`,{body:u,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,i={},s){return this._client.getAPIList(K`/threads/${e}/messages`,nt,{query:i,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,i,s){const{thread_id:a}=i;return this._client.delete(K`/threads/${a}/messages/${e}`,{...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class Y_ extends ae{retrieve(e,i,s){const{thread_id:a,run_id:u,...d}=i;return this._client.get(K`/threads/${a}/runs/${u}/steps/${e}`,{query:d,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,i,s){const{thread_id:a,...u}=i;return this._client.getAPIList(K`/threads/${a}/runs/${e}/steps`,nt,{query:u,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}const WM=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),i=e.length,s=new Uint8Array(i);for(let a=0;a<i;a++)s[a]=e.charCodeAt(a);return Array.from(new Float32Array(s.buffer))}};var uf={};const Io=n=>{var e,i,s,a;if(typeof globalThis.process<"u")return((e=uf==null?void 0:uf[n])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(a=(s=(i=globalThis.Deno.env)==null?void 0:i.get)==null?void 0:s.call(i,n))==null?void 0:a.trim()};var gt,qi,qf,vn,$a,un,Bi,Po,ki,cr,Ft,Ja,Ya,tl,Ws,js,Mv,Dv,Uv,Lv,Ov,Gv,Pv;class nl extends sd{constructor(){super(...arguments),gt.add(this),qf.set(this,[]),vn.set(this,{}),$a.set(this,{}),un.set(this,void 0),Bi.set(this,void 0),Po.set(this,void 0),ki.set(this,void 0),cr.set(this,void 0),Ft.set(this,void 0),Ja.set(this,void 0),Ya.set(this,void 0),tl.set(this,void 0)}[(qf=new WeakMap,vn=new WeakMap,$a=new WeakMap,un=new WeakMap,Bi=new WeakMap,Po=new WeakMap,ki=new WeakMap,cr=new WeakMap,Ft=new WeakMap,Ja=new WeakMap,Ya=new WeakMap,tl=new WeakMap,gt=new WeakSet,Symbol.asyncIterator)](){const e=[],i=[];let s=!1;return this.on("event",a=>{const u=i.shift();u?u.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of i)a.resolve(void 0);i.length=0}),this.on("abort",a=>{s=!0;for(const u of i)u.reject(a);i.length=0}),this.on("error",a=>{s=!0;for(const u of i)u.reject(a);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((u,d)=>i.push({resolve:u,reject:d})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const i=new qi;return i._run(()=>i._fromReadableStream(e)),i}async _fromReadableStream(e,i){var u;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=_n.fromReadableStream(e,this.controller);for await(const d of a)L(this,gt,"m",Ws).call(this,d);if((u=a.controller.signal)!=null&&u.aborted)throw new tn;return this._addRun(L(this,gt,"m",js).call(this))}toReadableStream(){return new _n(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,i,s,a){const u=new qi;return u._run(()=>u._runToolAssistantStream(e,i,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),u}async _createToolAssistantStream(e,i,s,a){var y;const u=a==null?void 0:a.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const d={...s,stream:!0},p=await e.submitToolOutputs(i,d,{...a,signal:this.controller.signal});this._connected();for await(const m of p)L(this,gt,"m",Ws).call(this,m);if((y=p.controller.signal)!=null&&y.aborted)throw new tn;return this._addRun(L(this,gt,"m",js).call(this))}static createThreadAssistantStream(e,i,s){const a=new qi;return a._run(()=>a._threadAssistantStream(e,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,i,s,a){const u=new qi;return u._run(()=>u._runAssistantStream(e,i,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),u}currentEvent(){return L(this,Ja,"f")}currentRun(){return L(this,Ya,"f")}currentMessageSnapshot(){return L(this,un,"f")}currentRunStepSnapshot(){return L(this,tl,"f")}async finalRunSteps(){return await this.done(),Object.values(L(this,vn,"f"))}async finalMessages(){return await this.done(),Object.values(L(this,$a,"f"))}async finalRun(){if(await this.done(),!L(this,Bi,"f"))throw Error("Final run was not received.");return L(this,Bi,"f")}async _createThreadAssistantStream(e,i,s){var p;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...i,stream:!0},d=await e.createAndRun(u,{...s,signal:this.controller.signal});this._connected();for await(const y of d)L(this,gt,"m",Ws).call(this,y);if((p=d.controller.signal)!=null&&p.aborted)throw new tn;return this._addRun(L(this,gt,"m",js).call(this))}async _createAssistantStream(e,i,s,a){var y;const u=a==null?void 0:a.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const d={...s,stream:!0},p=await e.create(i,d,{...a,signal:this.controller.signal});this._connected();for await(const m of p)L(this,gt,"m",Ws).call(this,m);if((y=p.controller.signal)!=null&&y.aborted)throw new tn;return this._addRun(L(this,gt,"m",js).call(this))}static accumulateDelta(e,i){for(const[s,a]of Object.entries(i)){if(!e.hasOwnProperty(s)){e[s]=a;continue}let u=e[s];if(u==null){e[s]=a;continue}if(s==="index"||s==="type"){e[s]=a;continue}if(typeof u=="string"&&typeof a=="string")u+=a;else if(typeof u=="number"&&typeof a=="number")u+=a;else if(ef(u)&&ef(a))u=this.accumulateDelta(u,a);else if(Array.isArray(u)&&Array.isArray(a)){if(u.every(d=>typeof d=="string"||typeof d=="number")){u.push(...a);continue}for(const d of a){if(!ef(d))throw new Error(`Expected array delta entry to be an object but got: ${d}`);const p=d.index;if(p==null)throw console.error(d),new Error("Expected array delta entry to have an `index` property");if(typeof p!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${p}`);const y=u[p];y==null?u.push(d):u[p]=this.accumulateDelta(y,d)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${a}, accValue: ${u}`);e[s]=u}return e}_addRun(e){return e}async _threadAssistantStream(e,i,s){return await this._createThreadAssistantStream(i,e,s)}async _runAssistantStream(e,i,s,a){return await this._createAssistantStream(i,e,s,a)}async _runToolAssistantStream(e,i,s,a){return await this._createToolAssistantStream(i,e,s,a)}}qi=nl,Ws=function(e){if(!this.ended)switch(he(this,Ja,e),L(this,gt,"m",Uv).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":L(this,gt,"m",Pv).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":L(this,gt,"m",Dv).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":L(this,gt,"m",Mv).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},js=function(){if(this.ended)throw new ue("stream has ended, this shouldn't happen");if(!L(this,Bi,"f"))throw Error("Final run has not been received");return L(this,Bi,"f")},Mv=function(e){const[i,s]=L(this,gt,"m",Ov).call(this,e,L(this,un,"f"));he(this,un,i),L(this,$a,"f")[i.id]=i;for(const a of s){const u=i.content[a.index];(u==null?void 0:u.type)=="text"&&this._emit("textCreated",u.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,i),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let u=a.text,d=i.content[a.index];if(d&&d.type=="text")this._emit("textDelta",u,d.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=L(this,Po,"f")){if(L(this,ki,"f"))switch(L(this,ki,"f").type){case"text":this._emit("textDone",L(this,ki,"f").text,L(this,un,"f"));break;case"image_file":this._emit("imageFileDone",L(this,ki,"f").image_file,L(this,un,"f"));break}he(this,Po,a.index)}he(this,ki,i.content[a.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(L(this,Po,"f")!==void 0){const a=e.data.content[L(this,Po,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,L(this,un,"f"));break;case"text":this._emit("textDone",a.text,L(this,un,"f"));break}}L(this,un,"f")&&this._emit("messageDone",e.data),he(this,un,void 0)}},Dv=function(e){const i=L(this,gt,"m",Lv).call(this,e);switch(he(this,tl,i),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&i.step_details.type=="tool_calls")for(const u of s.step_details.tool_calls)u.index==L(this,cr,"f")?this._emit("toolCallDelta",u,i.step_details.tool_calls[u.index]):(L(this,Ft,"f")&&this._emit("toolCallDone",L(this,Ft,"f")),he(this,cr,u.index),he(this,Ft,i.step_details.tool_calls[u.index]),L(this,Ft,"f")&&this._emit("toolCallCreated",L(this,Ft,"f")));this._emit("runStepDelta",e.data.delta,i);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":he(this,tl,void 0),e.data.step_details.type=="tool_calls"&&L(this,Ft,"f")&&(this._emit("toolCallDone",L(this,Ft,"f")),he(this,Ft,void 0)),this._emit("runStepDone",e.data,i);break}},Uv=function(e){L(this,qf,"f").push(e),this._emit("event",e)},Lv=function(e){switch(e.event){case"thread.run.step.created":return L(this,vn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let i=L(this,vn,"f")[e.data.id];if(!i)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const a=qi.accumulateDelta(i,s.delta);L(this,vn,"f")[e.data.id]=a}return L(this,vn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":L(this,vn,"f")[e.data.id]=e.data;break}if(L(this,vn,"f")[e.data.id])return L(this,vn,"f")[e.data.id];throw new Error("No snapshot available")},Ov=function(e,i){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!i)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const u of a.delta.content)if(u.index in i.content){let d=i.content[u.index];i.content[u.index]=L(this,gt,"m",Gv).call(this,u,d)}else i.content[u.index]=u,s.push(u);return[i,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(i)return[i,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Gv=function(e,i){return qi.accumulateDelta(i,e)},Pv=function(e){switch(he(this,Ya,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":he(this,Bi,e.data),L(this,Ft,"f")&&(this._emit("toolCallDone",L(this,Ft,"f")),he(this,Ft,void 0));break}};let ud=class extends ae{constructor(){super(...arguments),this.steps=new Y_(this._client)}create(e,i,s){const{include:a,...u}=i;return this._client.post(K`/threads/${e}/runs`,{query:{include:a},body:u,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:i.stream??!1})}retrieve(e,i,s){const{thread_id:a}=i;return this._client.get(K`/threads/${a}/runs/${e}`,{...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,i,s){const{thread_id:a,...u}=i;return this._client.post(K`/threads/${a}/runs/${e}`,{body:u,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,i={},s){return this._client.getAPIList(K`/threads/${e}/runs`,nt,{query:i,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,i,s){const{thread_id:a}=i;return this._client.post(K`/threads/${a}/runs/${e}/cancel`,{...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,i,s){const a=await this.create(e,i,s);return await this.poll(a.id,{thread_id:e},s)}createAndStream(e,i,s){return nl.createAssistantStream(e,this._client.beta.threads.runs,i,s)}async poll(e,i,s){var u;const a=ie([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((u=s==null?void 0:s.pollIntervalMs)==null?void 0:u.toString())??void 0}]);for(;;){const{data:d,response:p}=await this.retrieve(e,i,{...s,headers:{...s==null?void 0:s.headers,...a}}).withResponse();switch(d.status){case"queued":case"in_progress":case"cancelling":let y=5e3;if(s!=null&&s.pollIntervalMs)y=s.pollIntervalMs;else{const m=p.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await sl(y);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return d}}}stream(e,i,s){return nl.createAssistantStream(e,this._client.beta.threads.runs,i,s)}submitToolOutputs(e,i,s){const{thread_id:a,...u}=i;return this._client.post(K`/threads/${a}/runs/${e}/submit_tool_outputs`,{body:u,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:i.stream??!1})}async submitToolOutputsAndPoll(e,i,s){const a=await this.submitToolOutputs(e,i,s);return await this.poll(a.id,i,s)}submitToolOutputsStream(e,i,s){return nl.createToolAssistantStream(e,this._client.beta.threads.runs,i,s)}};ud.Steps=Y_;class Ar extends ae{constructor(){super(...arguments),this.runs=new ud(this._client),this.messages=new J_(this._client)}create(e={},i){return this._client.post("/threads",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(K`/threads/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,s){return this._client.post(K`/threads/${e}`,{body:i,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,i){return this._client.delete(K`/threads/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}createAndRun(e,i){return this._client.post("/threads/runs",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers]),stream:e.stream??!1})}async createAndRunPoll(e,i){const s=await this.createAndRun(e,i);return await this.runs.poll(s.id,{thread_id:s.thread_id},i)}createAndRunStream(e,i){return nl.createThreadAssistantStream(e,this._client.beta.threads,i)}}Ar.Runs=ud;Ar.Messages=J_;class zo extends ae{constructor(){super(...arguments),this.realtime=new Tr(this._client),this.chatkit=new Er(this._client),this.assistants=new B_(this._client),this.threads=new Ar(this._client)}}zo.Realtime=Tr;zo.ChatKit=Er;zo.Assistants=B_;zo.Threads=Ar;class K_ extends ae{create(e,i){return this._client.post("/completions",{body:e,...i,stream:e.stream??!1})}}class X_ extends ae{retrieve(e,i,s){const{container_id:a}=i;return this._client.get(K`/containers/${a}/files/${e}/content`,{...s,headers:ie([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}}let cd=class extends ae{constructor(){super(...arguments),this.content=new X_(this._client)}create(e,i,s){return this._client.post(K`/containers/${e}/files`,Vi({body:i,...s},this._client))}retrieve(e,i,s){const{container_id:a}=i;return this._client.get(K`/containers/${a}/files/${e}`,s)}list(e,i={},s){return this._client.getAPIList(K`/containers/${e}/files`,nt,{query:i,...s})}delete(e,i,s){const{container_id:a}=i;return this._client.delete(K`/containers/${a}/files/${e}`,{...s,headers:ie([{Accept:"*/*"},s==null?void 0:s.headers])})}};cd.Content=X_;class fd extends ae{constructor(){super(...arguments),this.files=new cd(this._client)}create(e,i){return this._client.post("/containers",{body:e,...i})}retrieve(e,i){return this._client.get(K`/containers/${e}`,i)}list(e={},i){return this._client.getAPIList("/containers",nt,{query:e,...i})}delete(e,i){return this._client.delete(K`/containers/${e}`,{...i,headers:ie([{Accept:"*/*"},i==null?void 0:i.headers])})}}fd.Files=cd;class Q_ extends ae{create(e,i,s){const{include:a,...u}=i;return this._client.post(K`/conversations/${e}/items`,{query:{include:a},body:u,...s})}retrieve(e,i,s){const{conversation_id:a,...u}=i;return this._client.get(K`/conversations/${a}/items/${e}`,{query:u,...s})}list(e,i={},s){return this._client.getAPIList(K`/conversations/${e}/items`,ir,{query:i,...s})}delete(e,i,s){const{conversation_id:a}=i;return this._client.delete(K`/conversations/${a}/items/${e}`,s)}}class dd extends ae{constructor(){super(...arguments),this.items=new Q_(this._client)}create(e={},i){return this._client.post("/conversations",{body:e,...i})}retrieve(e,i){return this._client.get(K`/conversations/${e}`,i)}update(e,i,s){return this._client.post(K`/conversations/${e}`,{body:i,...s})}delete(e,i){return this._client.delete(K`/conversations/${e}`,i)}}dd.Items=Q_;class Z_ extends ae{create(e,i){const s=!!e.encoding_format;let a=s?e.encoding_format:"base64";s&&mt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const u=this._client.post("/embeddings",{body:{...e,encoding_format:a},...i});return s?u:(mt(this._client).debug("embeddings/decoding base64 embeddings from base64"),u._thenUnwrap(d=>(d&&d.data&&d.data.forEach(p=>{const y=p.embedding;p.embedding=WM(y)}),d)))}}class W_ extends ae{retrieve(e,i,s){const{eval_id:a,run_id:u}=i;return this._client.get(K`/evals/${a}/runs/${u}/output_items/${e}`,s)}list(e,i,s){const{eval_id:a,...u}=i;return this._client.getAPIList(K`/evals/${a}/runs/${e}/output_items`,nt,{query:u,...s})}}class hd extends ae{constructor(){super(...arguments),this.outputItems=new W_(this._client)}create(e,i,s){return this._client.post(K`/evals/${e}/runs`,{body:i,...s})}retrieve(e,i,s){const{eval_id:a}=i;return this._client.get(K`/evals/${a}/runs/${e}`,s)}list(e,i={},s){return this._client.getAPIList(K`/evals/${e}/runs`,nt,{query:i,...s})}delete(e,i,s){const{eval_id:a}=i;return this._client.delete(K`/evals/${a}/runs/${e}`,s)}cancel(e,i,s){const{eval_id:a}=i;return this._client.post(K`/evals/${a}/runs/${e}`,s)}}hd.OutputItems=W_;class pd extends ae{constructor(){super(...arguments),this.runs=new hd(this._client)}create(e,i){return this._client.post("/evals",{body:e,...i})}retrieve(e,i){return this._client.get(K`/evals/${e}`,i)}update(e,i,s){return this._client.post(K`/evals/${e}`,{body:i,...s})}list(e={},i){return this._client.getAPIList("/evals",nt,{query:e,...i})}delete(e,i){return this._client.delete(K`/evals/${e}`,i)}}pd.Runs=hd;let j_=class extends ae{create(e,i){return this._client.post("/files",Vi({body:e,...i},this._client))}retrieve(e,i){return this._client.get(K`/files/${e}`,i)}list(e={},i){return this._client.getAPIList("/files",nt,{query:e,...i})}delete(e,i){return this._client.delete(K`/files/${e}`,i)}content(e,i){return this._client.get(K`/files/${e}/content`,{...i,headers:ie([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:i=5e3,maxWait:s=1800*1e3}={}){const a=new Set(["processed","error","deleted"]),u=Date.now();let d=await this.retrieve(e);for(;!d.status||!a.has(d.status);)if(await sl(i),d=await this.retrieve(e),Date.now()-u>s)throw new jf({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return d}};class eS extends ae{}let tS=class extends ae{run(e,i){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...i})}validate(e,i){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...i})}};class md extends ae{constructor(){super(...arguments),this.graders=new tS(this._client)}}md.Graders=tS;class nS extends ae{create(e,i,s){return this._client.getAPIList(K`/fine_tuning/checkpoints/${e}/permissions`,Sr,{body:i,method:"post",...s})}retrieve(e,i={},s){return this._client.get(K`/fine_tuning/checkpoints/${e}/permissions`,{query:i,...s})}delete(e,i,s){const{fine_tuned_model_checkpoint:a}=i;return this._client.delete(K`/fine_tuning/checkpoints/${a}/permissions/${e}`,s)}}let gd=class extends ae{constructor(){super(...arguments),this.permissions=new nS(this._client)}};gd.Permissions=nS;class iS extends ae{list(e,i={},s){return this._client.getAPIList(K`/fine_tuning/jobs/${e}/checkpoints`,nt,{query:i,...s})}}class yd extends ae{constructor(){super(...arguments),this.checkpoints=new iS(this._client)}create(e,i){return this._client.post("/fine_tuning/jobs",{body:e,...i})}retrieve(e,i){return this._client.get(K`/fine_tuning/jobs/${e}`,i)}list(e={},i){return this._client.getAPIList("/fine_tuning/jobs",nt,{query:e,...i})}cancel(e,i){return this._client.post(K`/fine_tuning/jobs/${e}/cancel`,i)}listEvents(e,i={},s){return this._client.getAPIList(K`/fine_tuning/jobs/${e}/events`,nt,{query:i,...s})}pause(e,i){return this._client.post(K`/fine_tuning/jobs/${e}/pause`,i)}resume(e,i){return this._client.post(K`/fine_tuning/jobs/${e}/resume`,i)}}yd.Checkpoints=iS;class Fo extends ae{constructor(){super(...arguments),this.methods=new eS(this._client),this.jobs=new yd(this._client),this.checkpoints=new gd(this._client),this.alpha=new md(this._client)}}Fo.Methods=eS;Fo.Jobs=yd;Fo.Checkpoints=gd;Fo.Alpha=md;class oS extends ae{}class vd extends ae{constructor(){super(...arguments),this.graderModels=new oS(this._client)}}vd.GraderModels=oS;class sS extends ae{createVariation(e,i){return this._client.post("/images/variations",Vi({body:e,...i},this._client))}edit(e,i){return this._client.post("/images/edits",Vi({body:e,...i,stream:e.stream??!1},this._client))}generate(e,i){return this._client.post("/images/generations",{body:e,...i,stream:e.stream??!1})}}class lS extends ae{retrieve(e,i){return this._client.get(K`/models/${e}`,i)}list(e){return this._client.getAPIList("/models",Sr,e)}delete(e,i){return this._client.delete(K`/models/${e}`,i)}}class aS extends ae{create(e,i){return this._client.post("/moderations",{body:e,...i})}}class rS extends ae{accept(e,i,s){return this._client.post(K`/realtime/calls/${e}/accept`,{body:i,...s,headers:ie([{Accept:"*/*"},s==null?void 0:s.headers])})}hangup(e,i){return this._client.post(K`/realtime/calls/${e}/hangup`,{...i,headers:ie([{Accept:"*/*"},i==null?void 0:i.headers])})}refer(e,i,s){return this._client.post(K`/realtime/calls/${e}/refer`,{body:i,...s,headers:ie([{Accept:"*/*"},s==null?void 0:s.headers])})}reject(e,i={},s){return this._client.post(K`/realtime/calls/${e}/reject`,{body:i,...s,headers:ie([{Accept:"*/*"},s==null?void 0:s.headers])})}}class uS extends ae{create(e,i){return this._client.post("/realtime/client_secrets",{body:e,...i})}}class Cr extends ae{constructor(){super(...arguments),this.clientSecrets=new uS(this._client),this.calls=new rS(this._client)}}Cr.ClientSecrets=uS;Cr.Calls=rS;function jM(n,e){return!e||!t1(e)?{...n,output_parsed:null,output:n.output.map(i=>i.type==="function_call"?{...i,parsed_arguments:null}:i.type==="message"?{...i,content:i.content.map(s=>({...s,parsed:null}))}:i)}:cS(n,e)}function cS(n,e){const i=n.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:o1(e,a)};if(a.type==="message"){const u=a.content.map(d=>d.type==="output_text"?{...d,parsed:e1(e,d.text)}:d);return{...a,content:u}}return a}),s=Object.assign({},n,{output:i});return Object.getOwnPropertyDescriptor(n,"output_text")||Bf(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const a of s.output)if(a.type==="message"){for(const u of a.content)if(u.type==="output_text"&&u.parsed!==null)return u.parsed}return null}}),s}function e1(n,e){var i,s,a,u;return((s=(i=n.text)==null?void 0:i.format)==null?void 0:s.type)!=="json_schema"?null:"$parseRaw"in((a=n.text)==null?void 0:a.format)?((u=n.text)==null?void 0:u.format).$parseRaw(e):JSON.parse(e)}function t1(n){var e;return!!id((e=n.text)==null?void 0:e.format)}function n1(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function i1(n,e){return n.find(i=>i.type==="function"&&i.name===e)}function o1(n,e){const i=i1(n.tools??[],e.name);return{...e,...e,parsed_arguments:n1(i)?i.$parseRaw(e.arguments):i!=null&&i.strict?JSON.parse(e.arguments):null}}function Bf(n){const e=[];for(const i of n.output)if(i.type==="message")for(const s of i.content)s.type==="output_text"&&e.push(s.text);n.output_text=e.join("")}var Mo,Pa,mi,Ha,Hv,kv,qv,Bv;class _d extends sd{constructor(e){super(),Mo.add(this),Pa.set(this,void 0),mi.set(this,void 0),Ha.set(this,void 0),he(this,Pa,e)}static createResponse(e,i,s){const a=new _d(i);return a._run(()=>a._createOrRetrieveResponse(e,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createOrRetrieveResponse(e,i,s){var p;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),L(this,Mo,"m",Hv).call(this);let u,d=null;"response_id"in i?(u=await e.responses.retrieve(i.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),d=i.starting_after??null):u=await e.responses.create({...i,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const y of u)L(this,Mo,"m",kv).call(this,y,d);if((p=u.controller.signal)!=null&&p.aborted)throw new tn;return L(this,Mo,"m",qv).call(this)}[(Pa=new WeakMap,mi=new WeakMap,Ha=new WeakMap,Mo=new WeakSet,Hv=function(){this.ended||he(this,mi,void 0)},kv=function(i,s){if(this.ended)return;const a=(d,p)=>{(s==null||p.sequence_number>s)&&this._emit(d,p)},u=L(this,Mo,"m",Bv).call(this,i);switch(a("event",i),i.type){case"response.output_text.delta":{const d=u.output[i.output_index];if(!d)throw new ue(`missing output at index ${i.output_index}`);if(d.type==="message"){const p=d.content[i.content_index];if(!p)throw new ue(`missing content at index ${i.content_index}`);if(p.type!=="output_text")throw new ue(`expected content to be 'output_text', got ${p.type}`);a("response.output_text.delta",{...i,snapshot:p.text})}break}case"response.function_call_arguments.delta":{const d=u.output[i.output_index];if(!d)throw new ue(`missing output at index ${i.output_index}`);d.type==="function_call"&&a("response.function_call_arguments.delta",{...i,snapshot:d.arguments});break}default:a(i.type,i);break}},qv=function(){if(this.ended)throw new ue("stream has ended, this shouldn't happen");const i=L(this,mi,"f");if(!i)throw new ue("request ended without sending any events");he(this,mi,void 0);const s=s1(i,L(this,Pa,"f"));return he(this,Ha,s),s},Bv=function(i){var a;let s=L(this,mi,"f");if(!s){if(i.type!=="response.created")throw new ue(`When snapshot hasn't been set yet, expected 'response.created' event, got ${i.type}`);return s=he(this,mi,i.response),s}switch(i.type){case"response.output_item.added":{s.output.push(i.item);break}case"response.content_part.added":{const u=s.output[i.output_index];if(!u)throw new ue(`missing output at index ${i.output_index}`);const d=u.type,p=i.part;d==="message"&&p.type!=="reasoning_text"?u.content.push(p):d==="reasoning"&&p.type==="reasoning_text"&&(u.content||(u.content=[]),u.content.push(p));break}case"response.output_text.delta":{const u=s.output[i.output_index];if(!u)throw new ue(`missing output at index ${i.output_index}`);if(u.type==="message"){const d=u.content[i.content_index];if(!d)throw new ue(`missing content at index ${i.content_index}`);if(d.type!=="output_text")throw new ue(`expected content to be 'output_text', got ${d.type}`);d.text+=i.delta}break}case"response.function_call_arguments.delta":{const u=s.output[i.output_index];if(!u)throw new ue(`missing output at index ${i.output_index}`);u.type==="function_call"&&(u.arguments+=i.delta);break}case"response.reasoning_text.delta":{const u=s.output[i.output_index];if(!u)throw new ue(`missing output at index ${i.output_index}`);if(u.type==="reasoning"){const d=(a=u.content)==null?void 0:a[i.content_index];if(!d)throw new ue(`missing content at index ${i.content_index}`);if(d.type!=="reasoning_text")throw new ue(`expected content to be 'reasoning_text', got ${d.type}`);d.text+=i.delta}break}case"response.completed":{he(this,mi,i.response);break}}return s},Symbol.asyncIterator)](){const e=[],i=[];let s=!1;return this.on("event",a=>{const u=i.shift();u?u.resolve(a):e.push(a)}),this.on("end",()=>{s=!0;for(const a of i)a.resolve(void 0);i.length=0}),this.on("abort",a=>{s=!0;for(const u of i)u.reject(a);i.length=0}),this.on("error",a=>{s=!0;for(const u of i)u.reject(a);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((u,d)=>i.push({resolve:u,reject:d})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=L(this,Ha,"f");if(!e)throw new ue("stream ended without producing a ChatCompletion");return e}}function s1(n,e){return jM(n,e)}class fS extends ae{list(e,i={},s){return this._client.getAPIList(K`/responses/${e}/input_items`,nt,{query:i,...s})}}class dS extends ae{count(e={},i){return this._client.post("/responses/input_tokens",{body:e,...i})}}class br extends ae{constructor(){super(...arguments),this.inputItems=new fS(this._client),this.inputTokens=new dS(this._client)}create(e,i){return this._client.post("/responses",{body:e,...i,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&Bf(s),s))}retrieve(e,i={},s){return this._client.get(K`/responses/${e}`,{query:i,...s,stream:(i==null?void 0:i.stream)??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&Bf(a),a))}delete(e,i){return this._client.delete(K`/responses/${e}`,{...i,headers:ie([{Accept:"*/*"},i==null?void 0:i.headers])})}parse(e,i){return this._client.responses.create(e,i)._thenUnwrap(s=>cS(s,e))}stream(e,i){return _d.createResponse(this._client,e,i)}cancel(e,i){return this._client.post(K`/responses/${e}/cancel`,i)}compact(e,i){return this._client.post("/responses/compact",{body:e,...i})}}br.InputItems=fS;br.InputTokens=dS;class hS extends ae{create(e,i,s){return this._client.post(K`/uploads/${e}/parts`,Vi({body:i,...s},this._client))}}class Sd extends ae{constructor(){super(...arguments),this.parts=new hS(this._client)}create(e,i){return this._client.post("/uploads",{body:e,...i})}cancel(e,i){return this._client.post(K`/uploads/${e}/cancel`,i)}complete(e,i,s){return this._client.post(K`/uploads/${e}/complete`,{body:i,...s})}}Sd.Parts=hS;const l1=async n=>{const e=await Promise.allSettled(n),i=e.filter(a=>a.status==="rejected");if(i.length){for(const a of i)console.error(a.reason);throw new Error(`${i.length} promise(s) failed - see the above errors`)}const s=[];for(const a of e)a.status==="fulfilled"&&s.push(a.value);return s};class pS extends ae{create(e,i,s){return this._client.post(K`/vector_stores/${e}/file_batches`,{body:i,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,i,s){const{vector_store_id:a}=i;return this._client.get(K`/vector_stores/${a}/file_batches/${e}`,{...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,i,s){const{vector_store_id:a}=i;return this._client.post(K`/vector_stores/${a}/file_batches/${e}/cancel`,{...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,i,s){const a=await this.create(e,i);return await this.poll(e,a.id,s)}listFiles(e,i,s){const{vector_store_id:a,...u}=i;return this._client.getAPIList(K`/vector_stores/${a}/file_batches/${e}/files`,nt,{query:u,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async poll(e,i,s){var u;const a=ie([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((u=s==null?void 0:s.pollIntervalMs)==null?void 0:u.toString())??void 0}]);for(;;){const{data:d,response:p}=await this.retrieve(i,{vector_store_id:e},{...s,headers:a}).withResponse();switch(d.status){case"in_progress":let y=5e3;if(s!=null&&s.pollIntervalMs)y=s.pollIntervalMs;else{const m=p.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await sl(y);break;case"failed":case"cancelled":case"completed":return d}}}async uploadAndPoll(e,{files:i,fileIds:s=[]},a){if(i==null||i.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const u=(a==null?void 0:a.maxConcurrency)??5,d=Math.min(u,i.length),p=this._client,y=i.values(),m=[...s];async function v(T){for(let A of T){const C=await p.files.create({file:A,purpose:"assistants"},a);m.push(C.id)}}const _=Array(d).fill(y).map(v);return await l1(_),await this.createAndPoll(e,{file_ids:m})}}class mS extends ae{create(e,i,s){return this._client.post(K`/vector_stores/${e}/files`,{body:i,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,i,s){const{vector_store_id:a}=i;return this._client.get(K`/vector_stores/${a}/files/${e}`,{...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,i,s){const{vector_store_id:a,...u}=i;return this._client.post(K`/vector_stores/${a}/files/${e}`,{body:u,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,i={},s){return this._client.getAPIList(K`/vector_stores/${e}/files`,nt,{query:i,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,i,s){const{vector_store_id:a}=i;return this._client.delete(K`/vector_stores/${a}/files/${e}`,{...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,i,s){const a=await this.create(e,i,s);return await this.poll(e,a.id,s)}async poll(e,i,s){var u;const a=ie([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((u=s==null?void 0:s.pollIntervalMs)==null?void 0:u.toString())??void 0}]);for(;;){const d=await this.retrieve(i,{vector_store_id:e},{...s,headers:a}).withResponse(),p=d.data;switch(p.status){case"in_progress":let y=5e3;if(s!=null&&s.pollIntervalMs)y=s.pollIntervalMs;else{const m=d.response.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await sl(y);break;case"failed":case"completed":return p}}}async upload(e,i,s){const a=await this._client.files.create({file:i,purpose:"assistants"},s);return this.create(e,{file_id:a.id},s)}async uploadAndPoll(e,i,s){const a=await this.upload(e,i,s);return await this.poll(e,a.id,s)}content(e,i,s){const{vector_store_id:a}=i;return this._client.getAPIList(K`/vector_stores/${a}/files/${e}/content`,Sr,{...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class wr extends ae{constructor(){super(...arguments),this.files=new mS(this._client),this.fileBatches=new pS(this._client)}create(e,i){return this._client.post("/vector_stores",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(K`/vector_stores/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,s){return this._client.post(K`/vector_stores/${e}`,{body:i,...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},i){return this._client.getAPIList("/vector_stores",nt,{query:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(K`/vector_stores/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}search(e,i,s){return this._client.getAPIList(K`/vector_stores/${e}/search`,Sr,{body:i,method:"post",...s,headers:ie([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}wr.Files=mS;wr.FileBatches=pS;class gS extends ae{create(e,i){return this._client.post("/videos",wv({body:e,...i},this._client))}retrieve(e,i){return this._client.get(K`/videos/${e}`,i)}list(e={},i){return this._client.getAPIList("/videos",ir,{query:e,...i})}delete(e,i){return this._client.delete(K`/videos/${e}`,i)}downloadContent(e,i={},s){return this._client.get(K`/videos/${e}/content`,{query:i,...s,headers:ie([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}remix(e,i,s){return this._client.post(K`/videos/${e}/remix`,wv({body:i,...s},this._client))}}var Oo,yS,Ka;class vS extends ae{constructor(){super(...arguments),Oo.add(this)}async unwrap(e,i,s=this._client.webhookSecret,a=300){return await this.verifySignature(e,i,s,a),JSON.parse(e)}async verifySignature(e,i,s=this._client.webhookSecret,a=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");L(this,Oo,"m",yS).call(this,s);const u=ie([i]).values,d=L(this,Oo,"m",Ka).call(this,u,"webhook-signature"),p=L(this,Oo,"m",Ka).call(this,u,"webhook-timestamp"),y=L(this,Oo,"m",Ka).call(this,u,"webhook-id"),m=parseInt(p,10);if(isNaN(m))throw new $s("Invalid webhook timestamp format");const v=Math.floor(Date.now()/1e3);if(v-m>a)throw new $s("Webhook timestamp is too old");if(m>v+a)throw new $s("Webhook timestamp is too new");const _=d.split(" ").map(I=>I.startsWith("v1,")?I.substring(3):I),T=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),A=y?`${y}.${p}.${e}`:`${p}.${e}`,C=await crypto.subtle.importKey("raw",T,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const I of _)try{const w=Buffer.from(I,"base64");if(await crypto.subtle.verify("HMAC",C,w,new TextEncoder().encode(A)))return}catch{continue}throw new $s("The given webhook signature does not match the expected signature")}}Oo=new WeakSet,yS=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Ka=function(e,i){if(!e)throw new Error("Headers are required");const s=e.get(i);if(s==null)throw new Error(`Missing required header: ${i}`);return s};var Vf,Td,Xa,_S;class _e{constructor({baseURL:e=Io("OPENAI_BASE_URL"),apiKey:i=Io("OPENAI_API_KEY"),organization:s=Io("OPENAI_ORG_ID")??null,project:a=Io("OPENAI_PROJECT_ID")??null,webhookSecret:u=Io("OPENAI_WEBHOOK_SECRET")??null,...d}={}){if(Vf.add(this),Xa.set(this,void 0),this.completions=new K_(this),this.chat=new rd(this),this.embeddings=new Z_(this),this.files=new j_(this),this.images=new sS(this),this.audio=new al(this),this.moderations=new aS(this),this.models=new lS(this),this.fineTuning=new Fo(this),this.graders=new vd(this),this.vectorStores=new wr(this),this.webhooks=new vS(this),this.beta=new zo(this),this.batches=new q_(this),this.uploads=new Sd(this),this.responses=new br(this),this.realtime=new Cr(this),this.conversations=new dd(this),this.evals=new pd(this),this.containers=new fd(this),this.videos=new gS(this),i===void 0)throw new ue("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const p={apiKey:i,organization:s,project:a,webhookSecret:u,...d,baseURL:e||"https://api.openai.com/v1"};if(!p.dangerouslyAllowBrowser&&rM())throw new ue(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=p.baseURL,this.timeout=p.timeout??Td.DEFAULT_TIMEOUT,this.logger=p.logger??console;const y="warn";this.logLevel=y,this.logLevel=Cv(p.logLevel,"ClientOptions.logLevel",this)??Cv(Io("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??y,this.fetchOptions=p.fetchOptions,this.maxRetries=p.maxRetries??2,this.fetch=p.fetch??hM(),he(this,Xa,mM),this._options=p,this.apiKey=typeof i=="string"?i:"Missing Key",this.organization=s,this.project=a,this.webhookSecret=u}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){}async authHeaders(e){return ie([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return TM(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Uo}`}defaultIdempotencyKey(){return`stainless-node-retry-${V0()}`}makeStatusError(e,i,s,a){return yt.generate(e,i,s,a)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let i;try{i=await e()}catch(s){throw s instanceof ue?s:new ue(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof i!="string"||!i)throw new ue(`Expected 'apiKey' function argument to return a string but it returned ${i}`);return this.apiKey=i,!0}buildURL(e,i,s){const a=!L(this,Vf,"m",_S).call(this)&&s||this.baseURL,u=iM(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return oM(d)||(i={...d,...i}),typeof i=="object"&&i&&!Array.isArray(i)&&(u.search=this.stringifyQuery(i)),u.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:i,options:s}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,s){return this.request(Promise.resolve(s).then(a=>({method:e,path:i,...a})))}request(e,i=null){return new _r(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,s){var q,B;const a=await e,u=a.maxRetries??this.maxRetries;i==null&&(i=u),await this.prepareOptions(a);const{req:d,url:p,timeout:y}=await this.buildRequest(a,{retryCount:u-i});await this.prepareRequest(d,{url:p,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=s===void 0?"":`, retryOf: ${s}`,_=Date.now();if(mt(this).debug(`[${m}] sending request`,Hi({retryOfRequestLogID:s,method:a.method,url:p,options:a,headers:d.headers})),(q=a.signal)!=null&&q.aborted)throw new tn;const T=new AbortController,A=await this.fetchWithTimeout(p,d,y,T).catch(If),C=Date.now();if(A instanceof globalThis.Error){const k=`retrying, ${i} attempts remaining`;if((B=a.signal)!=null&&B.aborted)throw new tn;const G=Nf(A)||/timed? ?out/i.test(String(A)+("cause"in A?String(A.cause):""));if(i)return mt(this).info(`[${m}] connection ${G?"timed out":"failed"} - ${k}`),mt(this).debug(`[${m}] connection ${G?"timed out":"failed"} (${k})`,Hi({retryOfRequestLogID:s,url:p,durationMs:C-_,message:A.message})),this.retryRequest(a,i,s??m);throw mt(this).info(`[${m}] connection ${G?"timed out":"failed"} - error; no more retries left`),mt(this).debug(`[${m}] connection ${G?"timed out":"failed"} (error; no more retries left)`,Hi({retryOfRequestLogID:s,url:p,durationMs:C-_,message:A.message})),G?new jf:new yr({cause:A})}const I=[...A.headers.entries()].filter(([k])=>k==="x-request-id").map(([k,G])=>", "+k+": "+JSON.stringify(G)).join(""),w=`[${m}${v}${I}] ${d.method} ${p} ${A.ok?"succeeded":"failed"} with status ${A.status} in ${C-_}ms`;if(!A.ok){const k=await this.shouldRetry(A);if(i&&k){const X=`retrying, ${i} attempts remaining`;return await pM(A.body),mt(this).info(`${w} - ${X}`),mt(this).debug(`[${m}] response error (${X})`,Hi({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,durationMs:C-_})),this.retryRequest(a,i,s??m,A.headers)}const G=k?"error; no more retries left":"error; not retryable";mt(this).info(`${w} - ${G}`);const P=await A.text().catch(X=>If(X).message),W=aM(P),J=W?void 0:P;throw mt(this).debug(`[${m}] response error (${G})`,Hi({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,message:J,durationMs:Date.now()-_})),this.makeStatusError(A.status,W,J,A.headers)}return mt(this).info(w),mt(this).debug(`[${m}] response start`,Hi({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,durationMs:C-_})),{response:A,options:a,controller:T,requestLogID:m,retryOfRequestLogID:s,startTime:_}}getAPIList(e,i,s){return this.requestAPIList(i,{method:"get",path:e,...s})}requestAPIList(e,i){const s=this.makeRequest(i,null,void 0);return new IM(this,s,e)}async fetchWithTimeout(e,i,s,a){const{signal:u,method:d,...p}=i||{};u&&u.addEventListener("abort",()=>a.abort());const y=setTimeout(()=>a.abort(),s),m=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,v={signal:a.signal,...m?{duplex:"half"}:{},method:"GET",...p};d&&(v.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(y)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,s,a){let u;const d=a==null?void 0:a.get("retry-after-ms");if(d){const y=parseFloat(d);Number.isNaN(y)||(u=y)}const p=a==null?void 0:a.get("retry-after");if(p&&!u){const y=parseFloat(p);Number.isNaN(y)?u=Date.parse(p)-Date.now():u=y*1e3}if(!(u&&0<=u&&u<60*1e3)){const y=e.maxRetries??this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(i,y)}return await sl(u),this.makeRequest(e,i-1,s)}calculateDefaultRetryTimeoutMillis(e,i){const u=i-e,d=Math.min(.5*Math.pow(2,u),8),p=1-Math.random()*.25;return d*p*1e3}async buildRequest(e,{retryCount:i=0}={}){const s={...e},{method:a,path:u,query:d,defaultBaseURL:p}=s,y=this.buildURL(u,d,p);"timeout"in s&&lM("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:m,body:v}=this.buildBody({options:s}),_=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:i});return{req:{method:a,headers:_,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"},...v&&{body:v},...this.fetchOptions??{},...s.fetchOptions??{}},url:y,timeout:s.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:s,retryCount:a}){let u={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);const d=ie([u,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...dM(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=ie([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:t_(e)}:L(this,Xa,"f").call(this,{body:e,headers:s})}}Td=_e,Xa=new WeakMap,Vf=new WeakSet,_S=function(){return this.baseURL!=="https://api.openai.com/v1"};_e.OpenAI=Td;_e.DEFAULT_TIMEOUT=6e5;_e.OpenAIError=ue;_e.APIError=yt;_e.APIConnectionError=yr;_e.APIConnectionTimeoutError=jf;_e.APIUserAbortError=tn;_e.NotFoundError=J0;_e.ConflictError=Y0;_e.RateLimitError=X0;_e.BadRequestError=z0;_e.AuthenticationError=F0;_e.InternalServerError=Q0;_e.PermissionDeniedError=$0;_e.UnprocessableEntityError=K0;_e.InvalidWebhookSignatureError=$s;_e.toFile=OM;_e.Completions=K_;_e.Chat=rd;_e.Embeddings=Z_;_e.Files=j_;_e.Images=sS;_e.Audio=al;_e.Moderations=aS;_e.Models=lS;_e.FineTuning=Fo;_e.Graders=vd;_e.VectorStores=wr;_e.Webhooks=vS;_e.Beta=zo;_e.Batches=q_;_e.Uploads=Sd;_e.Responses=br;_e.Realtime=Cr;_e.Conversations=dd;_e.Evals=pd;_e.Containers=fd;_e.Videos=gS;const Vv='You should always follow the instructions and output a valid JSON object.\nThe structure of the JSON object you can found in the instructions.\n\nAnd you should always end the block with a "```" to indicate the end of the JSON object.\n\nIMPORTANT: You must output exactly one top-level JSON object inside a single fenced code block that starts with ```json and ends with ```. You must only output one such fenced code block per response, without any additional code blocks or text outside it.\n\n<instructions>\n',zv=`Output:
</instructions>

`;function a1(n){if(!n||n.trim().length===0)throw new Error("Empty response from AI");const e=/```(?:json\s*)?([\s\S]*?)```/,i=n.match(e);if(i&&i[1]){const p=i[1].trim();if(p.startsWith("{")||p.startsWith("["))return p}const s=n.trim();if(s.startsWith("{")||s.startsWith("["))return s;const a=s.indexOf("{"),u=s.indexOf("[");let d=-1;if(a!==-1&&u!==-1?d=Math.min(a,u):a!==-1?d=a:u!==-1&&(d=u),d!==-1){let p=0,y=0,m=!1,v=!1;for(let _=d;_<s.length;_++){const T=s[_];if(v){v=!1;continue}if(T==="\\"){v=!0;continue}if(T==='"'){m=!m;continue}if(!m&&(T==="{"&&p++,T==="}"&&p--,T==="["&&y++,T==="]"&&y--,p===0&&y===0&&_>d))return s.substring(d,_+1)}return s.substring(d)}throw new Error(`Could not extract valid JSON from response. Response preview: ${n.substring(0,200)}...`)}function r1(n){try{return JSON.parse(n)}catch(e){let i=n.replace(/^\uFEFF/,"").replace(/,(\s*[}\]])/g,"$1").replace(/'/g,'"').replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*/g,"").replace(/([{,]\s*)([a-zA-Z_][a-zA-Z0-9_]*)(\s*:)/g,'$1"$2"$3');try{return JSON.parse(i)}catch(s){throw new Error(`Failed to parse JSON even after repair attempts. Original error: ${e}. Repaired error: ${s}`)}}}function u1(n){const e=a1(n);return r1(e)}function c1(n){var e,i;if(n.provider==="openai"){if(!((e=n.openai)!=null&&e.apiKey))throw new Error("OpenAI API Key is missing in settings.")}else if(n.provider==="gemini"&&!((i=n.gemini)!=null&&i.apiKey))throw new Error("Gemini API Key is missing (process.env.API_KEY).")}function SS(n,e=0){var s,a;const i="  ".repeat(e);if(n.type===Re.OBJECT&&n.properties){let u=`{
`;for(const[d,p]of Object.entries(n.properties)){const y=p,m=(s=n.required)!=null&&s.includes(d)?" (required)":" (optional)",v=y.enum?` Enum: ${y.enum.join(", ")}`:"";u+=`${i}  "${d}": ${y.type}${m}${v},
`}return u+=`${i}}`,u}return n.type===Re.ARRAY&&n.items?`[
${SS(n.items,e+1)}
${i}]`:((a=n.type)==null?void 0:a.toLowerCase())||"object"}const f1=async(n,e)=>{var i;if(c1(n),n.provider==="gemini"){const s=((i=n.gemini)==null?void 0:i.apiKey)||"",a=new tM({apiKey:s}),u={systemInstruction:e.systemInstruction};u.responseMimeType="application/json",e.jsonSchema&&(u.responseSchema=e.jsonSchema);try{return(await a.models.generateContent({model:"gemini-3-flash-preview",contents:e.prompt,config:u})).text||""}catch(d){throw console.error("Gemini Error:",d),new Error(`Gemini Error: ${d.message}`)}}if(n.provider==="openai"&&n.openai){const s=new _e({apiKey:n.openai.apiKey,baseURL:n.openai.baseUrl||"https://api.openai.com/v1",dangerouslyAllowBrowser:!0}),a=e.jsonSchema?`

Expected JSON Schema Structure:
${SS(e.jsonSchema)}

Strictly follow the structure above.`:`

Output must be a valid JSON object.`,u=e.systemInstruction?`${Vv}${e.systemInstruction}${a}
</instructions>
${zv}`:`${Vv}${a}
</instructions>
${zv}`,d=[];u&&d.push({role:"system",content:u}),d.push({role:"user",content:e.prompt});try{const p={messages:d,model:n.openai.model||"gpt-4-turbo-preview"},y=await s.chat.completions.create(p);if(e.jsonMode){const m=u1(y.choices[0].message.content||"");return JSON.stringify(m)}}catch(p){throw console.error("OpenAI Error:",p),new Error(`OpenAI Error: ${p.message}`)}}throw new Error("Invalid Provider Configuration")},d1=`
You are the **Core Logic Engine** and **Narrative Director** for "Chronicles of the Persona".
Your role is to execute the game loop:
1. **Analyze Input**: Evaluate the player's choice against the current World State, Character Stats, and **Active Rules**.
2. **Apply Rules**: Check if any active rules (like "Murphy's Law" or "Equivalent Exchange") are triggered. 
   - If a rule triggers, you MUST apply its consequence (e.g., increase Stress, remove a resource).
   - You can also decide to ADD a new rule (e.g., "Wanted by Guards") or REMOVE an old one.
3. **Generate Output**: 
   - Write the narrative (Simplified Chinese).
   - Calculate numeric changes to stats (Stress, Credibility, Connections).
   - Determine if the game ends (Victory or Death).

**Current Reality Mapping (Stats):**
- **Credibility ()**: < 3 means NPCs are hostile. 0 is Game Over (Exiled).
- **Stress ()**: > 7 means hallucinations/bad decisions. 10 is Game Over (Insanity).
- **Connections ()**: Currency for help. 0 means isolation.

**Output Constraints:**
- Language: **Simplified Chinese ()** ONLY.
- Style: Dark Fantasy, Tarot aesthetics, Gritty.
- Structure: JSON matching the schema.
`,h1={type:Re.OBJECT,properties:{text:{type:Re.STRING,description:"The narrative segment."},statUpdates:{type:Re.OBJECT,properties:{credibility:{type:Re.INTEGER,description:"Change amount, e.g., -1"},stress:{type:Re.INTEGER,description:"Change amount, e.g., +2"},connections:{type:Re.INTEGER,description:"Change amount, e.g., -1"}}},ruleUpdates:{type:Re.OBJECT,properties:{add:{type:Re.ARRAY,items:{type:Re.OBJECT,properties:{id:{type:Re.STRING},title:{type:Re.STRING},type:{type:Re.STRING,enum:["CONSTRAINT","BONUS","RISK","REALITY"]},description:{type:Re.STRING},active:{type:Re.BOOLEAN}}}},removeIds:{type:Re.ARRAY,items:{type:Re.STRING}}}},isGameOver:{type:Re.BOOLEAN},gameSummary:{type:Re.STRING,description:"Only if isGameOver is true."},choices:{type:Re.ARRAY,items:{type:Re.OBJECT,properties:{id:{type:Re.STRING},text:{type:Re.STRING},consequence:{type:Re.STRING},cost:{type:Re.STRING},risk:{type:Re.STRING}}}}}},p1=async(n,e,i,s,a,u,d,p)=>{var _,T;const y=u>=d,m=`
    [GAME STATE]
    Turn: ${u} / ${d}
    Character: ${n.name} (${n.title}) - Weakness: ${n.weakness}
    Current Stats: Credibility=${i.credibility}, Stress=${i.stress}, Connections=${i.connections}
    
    [ACTIVE RULES REGISTRY]
    ${e.map(A=>`(ID: ${A.id}) ${A.title}: ${A.description}`).join(`
`)}
    
    [NARRATIVE CONTEXT]
    Story So Far: ${a}
    **Player Action**: "${s}"
    
    [DIRECTIVES]
    1. Based on the player action and active rules, determine what happens next.
    2. Did any rule trigger? If "Murphy's Law" is active and they tried a complex plan, fail it.
    3. Update Stats: Did they get hurt? (Stress +). Did they offend someone? (Credibility -).
    4. **Rule Evolution**: If the story shifts significantly, you may Add a Rule (e.g., "Injury") or Remove one.
    5. ${y?"This is the CLIMAX. Ignore choices generation. Set 'isGameOver': true and provide a 'gameSummary'.":"Generate 3 distinct choices for the next step."}
  `,v=p||{provider:"gemini",gemini:{apiKey:""}};try{const A=await f1(v,{prompt:m,systemInstruction:d1,jsonSchema:h1,jsonMode:!0}),C=JSON.parse(A);return{storyNode:{text:C.text||"...",choices:C.choices||[]},statUpdates:C.statUpdates||{},ruleUpdates:{add:((_=C.ruleUpdates)==null?void 0:_.add)||[],removeIds:((T=C.ruleUpdates)==null?void 0:T.removeIds)||[]},isGameOver:!!C.isGameOver,gameSummary:C.gameSummary}}catch(A){return console.error("Gemini Engine Error",A),{storyNode:{text:"AI ",choices:[{id:"retry",text:"",consequence:""}]},statUpdates:{},ruleUpdates:{},isGameOver:!1}}},m1=()=>{const n=hA(),e=pA(),i=mA(),s=gA(),a=yA(),u=vA(),d=_A(),p=SA(),y=TA(),m=EA(),v=$v(),_=Jv(),T=Yv(),A=Kv(),C=CA(),I=bA(),w=wA(),q=RA(),B=xA(),k=NA(),G=IA(),P=MA(),W=DA(),J=UA(),ce=LA(),X=cf.useRef(null);cf.useEffect(()=>{X.current&&(X.current.scrollTop=X.current.scrollHeight)},[s,a,m]);const oe=Z=>{I(Z)},se=()=>{e&&ce(e)},Se=async(Z,Q)=>{if(!e)return;W(!0);const Te=s.map(pe=>pe.text).join(" ").slice(-1e3),Oe={provider:v,gemini:_?{apiKey:_}:void 0,openai:v==="openai"?T:void 0},R=await p1(e,i.filter(pe=>pe.active),u,Q,Te,d,p,Oe);W(!1);const F={...u};R.statUpdates.credibility&&(F.credibility+=R.statUpdates.credibility),R.statUpdates.stress&&(F.stress+=R.statUpdates.stress),R.statUpdates.connections&&(F.connections+=R.statUpdates.connections),F.credibility=Math.max(0,Math.min(10,F.credibility)),F.stress=Math.max(0,Math.min(10,F.stress)),F.connections=Math.max(0,Math.min(10,F.connections));let j=[...i];R.ruleUpdates.removeIds&&(j=j.filter(pe=>{var xe;return!((xe=R.ruleUpdates.removeIds)!=null&&xe.includes(pe.id))})),R.ruleUpdates.add&&(j=[...j,...R.ruleUpdates.add]);let te=R.isGameOver,de=R.gameSummary||"";F.stress>=10&&(te=!0,de=de||""),F.credibility<=0&&(te=!0,de=de||""),k(F),w(j),B(R.storyNode),q(pe=>[...pe,R.storyNode]),G(d+1),te&&(C(gi.GAME_OVER),P(de))},Le=()=>{J()},Ue=()=>N.jsxs("div",{className:"min-h-screen w-full flex flex-col items-center justify-start p-8 bg-velvet-red relative overflow-y-auto",children:[N.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle,transparent_20%,#000000_100%)] opacity-80 fixed"}),N.jsx("button",{onClick:()=>A(!0),className:"fixed top-6 right-6 z-30 p-4 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:N.jsx("i",{className:"fa-solid fa-cog text-xl group-hover:rotate-90 transition-transform duration-300"})}),N.jsxs("div",{className:"z-10 text-center mb-12 mt-8 animate-float",children:[N.jsx("h1",{className:"text-5xl md:text-7xl font-bold text-gold-flow mb-4 drop-shadow-lg font-display",children:""}),N.jsx("p",{className:"text-paper text-lg font-serif italic opacity-80 max-w-2xl mx-auto border-b border-gold pb-4",children:'""'})]}),N.jsx("div",{className:"z-20 flex flex-col items-center gap-4 mb-12 sticky top-4",children:N.jsxs("button",{disabled:!e,onClick:se,className:`
                px-12 py-4 text-xl font-bold font-display tracking-widest uppercase transition-all duration-500
                border-2 border-gold relative overflow-hidden group shadow-2xl
                ${e?"bg-velvet-red text-gold shadow-[0_0_30px_#D4AF37] hover:scale-110":"bg-gray-900 text-gray-600 cursor-not-allowed border-gray-700"}
              `,children:[N.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e?` ${e.name}`:"",N.jsx("i",{className:"fa-solid fa-scroll"})]}),N.jsx("div",{className:"absolute inset-0 bg-gold transform -translate-x-full group-hover:translate-x-0 transition-transform duration-500 opacity-20"})]})}),N.jsx("div",{className:"z-10 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-[1600px] mb-20 px-4",children:tA.map(Z=>N.jsx("div",{className:"flex justify-center",children:N.jsx(Lg,{character:Z,isSelected:(e==null?void 0:e.id)===Z.id,onSelect:oe})},Z.id))})]}),Je=()=>N.jsxs("div",{className:"min-h-screen w-full bg-black flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[N.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-20"}),N.jsx("button",{onClick:()=>A(!0),className:"fixed top-6 right-6 z-30 p-4 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:N.jsx("i",{className:"fa-solid fa-cog text-xl group-hover:rotate-90 transition-transform duration-300"})}),N.jsxs("div",{className:"z-10 max-w-2xl text-center border-[6px] border-double border-gold p-12 bg-[#1a0f0f] shadow-[0_0_100px_rgba(139,0,0,0.5)] transform animate-fade-in-up",children:[N.jsx("h1",{className:"text-6xl font-display text-velvet-red mb-6 uppercase tracking-widest",children:d>=p?"":""}),N.jsx("div",{className:"w-full h-1 bg-gold mb-8"}),N.jsxs("div",{className:"mb-8 font-serif text-2xl text-paper italic leading-relaxed",children:['"',y||"...",'"']}),N.jsxs("div",{className:"grid grid-cols-3 gap-8 mb-12 opacity-80",children:[N.jsxs("div",{className:"flex flex-col",children:[N.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),N.jsx("span",{className:"text-gold font-display text-3xl",children:u.credibility})]}),N.jsxs("div",{className:"flex flex-col",children:[N.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),N.jsx("span",{className:"text-gold font-display text-3xl",children:10-u.stress})]}),N.jsxs("div",{className:"flex flex-col",children:[N.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),N.jsx("span",{className:"text-gold font-display text-3xl",children:d})]})]}),N.jsx("button",{onClick:Le,className:"px-8 py-3 bg-gold text-black font-bold hover:bg-white transition-colors duration-300 font-display uppercase tracking-widest",children:""})]})]}),V=()=>{if(!a)return null;const Z=Q=>["I","II","III","IV","V","VI","VII","VIII","IX","X"][Q-1]||Q;return N.jsxs("div",{className:"min-h-screen w-full bg-[#1a0505] flex flex-col md:flex-row text-paper overflow-hidden relative",children:[N.jsx("button",{onClick:()=>A(!0),className:"fixed top-6 right-6 z-30 p-3 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:N.jsx("i",{className:"fa-solid fa-cog text-lg group-hover:rotate-90 transition-transform duration-300"})}),N.jsx("div",{className:"hidden md:flex flex-col w-1/4 bg-[#0f0303] border-r-4 border-brown-600 p-6 relative shadow-2xl z-10",children:N.jsxs("div",{className:"sticky top-6",children:[N.jsx("h2",{className:"text-gold font-display text-2xl mb-6 border-b border-brown pb-2 text-center",children:""}),e&&N.jsx("div",{className:"flex justify-center transform scale-75 origin-top mb-[-80px]",children:N.jsx(Lg,{character:e,isSelected:!0})}),N.jsxs("div",{className:"mt-28",children:[N.jsx("h2",{className:"text-gold font-display text-xl mb-4 border-b border-brown pb-2",children:""}),N.jsxs("div",{className:"space-y-6 bg-brown-800/30 p-4 rounded-lg border border-brown",children:[N.jsxs("div",{className:"group",children:[N.jsxs("div",{className:"flex justify-between mb-1 text-sm font-bold text-stone-gray",children:[N.jsxs("span",{children:[N.jsx("i",{className:"fa-solid fa-scale-balanced mr-2"}),""]}),N.jsxs("span",{children:[u.credibility,"/10"]})]}),N.jsx("div",{className:"w-full bg-[#2c1810] h-3 rounded-full overflow-hidden border border-brown-600",children:N.jsx("div",{className:"bg-forest-green h-full transition-all duration-1000",style:{width:`${u.credibility*10}%`}})})]}),N.jsxs("div",{className:"group",children:[N.jsxs("div",{className:"flex justify-between mb-1 text-sm font-bold text-stone-gray",children:[N.jsxs("span",{children:[N.jsx("i",{className:"fa-solid fa-brain mr-2"}),""]}),N.jsxs("span",{children:[u.stress,"/10"]})]}),N.jsx("div",{className:"w-full bg-[#2c1810] h-3 rounded-full overflow-hidden border border-brown-600",children:N.jsx("div",{className:`h-full transition-all duration-1000 ${u.stress>7?"bg-red-600 animate-pulse":"bg-orange-700"}`,style:{width:`${u.stress*10}%`}})})]}),N.jsxs("div",{className:"group",children:[N.jsxs("div",{className:"flex justify-between mb-1 text-sm font-bold text-stone-gray",children:[N.jsxs("span",{children:[N.jsx("i",{className:"fa-solid fa-handshake mr-2"}),""]}),N.jsxs("span",{children:[u.connections,"/10"]})]}),N.jsx("div",{className:"w-full bg-[#2c1810] h-3 rounded-full overflow-hidden border border-brown-600",children:N.jsx("div",{className:"bg-blue-700 h-full transition-all duration-1000",style:{width:`${u.connections*10}%`}})})]})]})]})]})}),N.jsxs("div",{className:"flex-1 flex flex-col relative h-screen bg-paper/5",children:[N.jsx("div",{className:"absolute top-0 w-full h-16 bg-gradient-to-b from-black to-transparent z-20 flex justify-center items-center pointer-events-none",children:N.jsxs("span",{className:"text-gold opacity-50 font-display tracking-[0.5em] text-sm",children:["ACT ",Z(d)," / ",Z(p)]})}),N.jsxs("div",{ref:X,className:"flex-1 overflow-y-auto p-8 md:p-16 scrollbar-hide scroll-smooth",children:[s.slice(0,-1).map((Q,Te)=>N.jsx("div",{className:"mb-12 opacity-50 text-base font-serif border-l-4 border-brown-600 pl-6 italic hover:opacity-100 transition-opacity",children:N.jsx("p",{children:Q.text})},Te)),N.jsxs("div",{className:"animate-fade-in-up pb-20",children:[N.jsxs("div",{className:"flex items-center justify-center mb-8 text-gold opacity-80",children:[N.jsx("div",{className:"h-[1px] w-12 bg-gold"}),N.jsx("i",{className:"fa-solid fa-diamond text-sm mx-4 animate-spin-slow"}),N.jsx("span",{className:"uppercase tracking-[0.3em] text-sm font-display",children:d===1?"":""}),N.jsx("i",{className:"fa-solid fa-diamond text-sm mx-4 animate-spin-slow"}),N.jsx("div",{className:"h-[1px] w-12 bg-gold"})]}),N.jsx("p",{className:"font-serif text-2xl md:text-3xl leading-relaxed mb-12 drop-shadow-md text-justify text-paper first-letter:text-6xl first-letter:font-display first-letter:text-gold first-letter:mr-3 first-letter:float-left",children:a.text}),m?N.jsxs("div",{className:"flex flex-col justify-center items-center py-12 gap-4",children:[N.jsxs("div",{className:"relative",children:[N.jsx("i",{className:"fa-solid fa-sun fa-spin text-6xl text-gold opacity-20"}),N.jsx("i",{className:"fa-solid fa-eye absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-2xl text-gold animate-pulse"})]}),N.jsx("span",{className:"font-serif italic text-xl text-stone-gray animate-pulse",children:"..."}),N.jsxs("div",{className:"text-xs text-brown font-mono mt-2",children:["Checking: ",i.filter(Q=>Q.active).map(Q=>Q.title).slice(0,3).join(", "),"..."]})]}):N.jsx("div",{className:"grid gap-6 max-w-3xl mx-auto",children:a.choices.map(Q=>N.jsxs("button",{onClick:()=>Se(Q.id,Q.text),className:"group relative p-6 bg-[#2c1810] border-2 border-brown text-left hover:bg-[#3d2216] hover:border-gold transition-all duration-300 rounded-xl overflow-hidden shadow-lg",children:[N.jsx("div",{className:"absolute inset-0 bg-gold opacity-0 group-hover:opacity-5 transition-opacity"}),N.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-gold transform scale-y-0 group-hover:scale-y-100 transition-transform origin-bottom duration-300"}),N.jsxs("div",{className:"flex items-start gap-4",children:[N.jsx("div",{className:"mt-1 text-gold opacity-50 group-hover:opacity-100",children:N.jsx("i",{className:"fa-solid fa-chevron-right"})}),N.jsxs("div",{children:[N.jsx("h4",{className:"font-bold text-xl mb-2 group-hover:text-gold transition-colors font-display",children:Q.text}),N.jsxs("div",{className:"flex flex-wrap gap-4 text-sm opacity-70 font-serif",children:[Q.cost&&N.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[N.jsx("i",{className:"fa-solid fa-coins"})," ",Q.cost]}),Q.risk&&N.jsxs("span",{className:"text-orange-400 flex items-center gap-1",children:[N.jsx("i",{className:"fa-solid fa-triangle-exclamation"})," ",Q.risk]}),N.jsx("span",{className:"text-stone-gray italic border-l border-stone-gray pl-3",children:Q.consequence})]})]})]})]},Q.id))})]})]})]}),N.jsxs("div",{className:"hidden md:flex flex-col w-1/4 bg-[#140404] border-l-4 border-brown-600 p-6 shadow-2xl z-10",children:[N.jsxs("h2",{className:"text-gold font-display text-xl mb-6 border-b border-brown pb-2 flex justify-between items-center",children:[N.jsx("span",{children:""}),N.jsxs("span",{className:"text-xs bg-velvet-red px-2 py-1 rounded text-gold border border-gold",children:[i.filter(Q=>Q.active).length," "]})]}),N.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 scrollbar-hide space-y-4",children:[i.filter(Q=>Q.active).map(Q=>N.jsx(iA,{rule:Q},Q.id)),i.some(Q=>!Q.active)&&N.jsx("div",{className:"text-center p-4 border border-dashed border-brown-600 opacity-50 rounded-lg",children:N.jsx("p",{className:"text-xs text-stone-gray",children:"..."})})]}),N.jsxs("div",{className:"mt-6 p-4 bg-brown-800/20 rounded border border-brown text-center",children:[N.jsx("i",{className:"fa-solid fa-gear text-2xl text-brown mb-2 animate-spin-slow opacity-50"}),N.jsx("p",{className:"text-xs text-stone-gray italic",children:'""'}),N.jsxs("button",{onClick:J,className:"mt-3 text-xs text-paper/60 hover:text-gold transition-colors duration-300 underline underline-offset-2 decoration-dotted",children:[N.jsx("i",{className:"fa-solid fa-rotate-right mr-1"}),""]})]})]})]})};return N.jsxs(N.Fragment,{children:[n===gi.SELECTION&&Ue(),n===gi.GAMEPLAY&&V(),n===gi.GAME_OVER&&Je(),N.jsx(HA,{})]})},g1=document.getElementById("root"),y1=eA.createRoot(g1);y1.render(N.jsx(m1,{}));
