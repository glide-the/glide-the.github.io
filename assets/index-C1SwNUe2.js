(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function i(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=i(a);fetch(a.href,r)}})();function uC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var df={exports:{}},il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function cC(){if(kg)return il;kg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,a,r){var f=null;if(r!==void 0&&(f=""+r),a.key!==void 0&&(f=""+a.key),"key"in a){r={};for(var p in a)p!=="key"&&(r[p]=a[p])}else r=a;return a=r.ref,{$$typeof:t,type:o,key:f,ref:a!==void 0?a:null,props:r}}return il.Fragment=e,il.jsx=i,il.jsxs=i,il}var Hg;function fC(){return Hg||(Hg=1,df.exports=cC()),df.exports}var C=fC(),hf={exports:{}},sl={},pf={exports:{}},mf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qg;function dC(){return qg||(qg=1,(function(t){function e(V,Z){var le=V.length;V.push(Z);e:for(;0<le;){var Re=le-1>>>1,ke=V[Re];if(0<a(ke,Z))V[Re]=Z,V[le]=ke,le=Re;else break e}}function i(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var Z=V[0],le=V.pop();if(le!==Z){V[0]=le;e:for(var Re=0,ke=V.length,M=ke>>>1;Re<M;){var Y=2*(Re+1)-1,W=V[Y],se=Y+1,me=V[se];if(0>a(W,le))se<ke&&0>a(me,W)?(V[Re]=me,V[se]=le,Re=se):(V[Re]=W,V[Y]=le,Re=Y);else if(se<ke&&0>a(me,le))V[Re]=me,V[se]=le,Re=se;else break e}}return Z}function a(V,Z){var le=V.sortIndex-Z.sortIndex;return le!==0?le:V.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var f=Date,p=f.now();t.unstable_now=function(){return f.now()-p}}var y=[],m=[],v=1,_=null,T=3,A=!1,x=!1,w=!1,b=!1,H=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function O(V){for(var Z=i(m);Z!==null;){if(Z.callback===null)o(m);else if(Z.startTime<=V)o(m),Z.sortIndex=Z.expirationTime,e(y,Z);else break;Z=i(m)}}function q(V){if(w=!1,O(V),!x)if(i(y)!==null)x=!0,Q||(Q=!0,Ce());else{var Z=i(m);Z!==null&&Ke(q,Z.startTime-V)}}var Q=!1,$=-1,fe=5,X=-1;function ie(){return b?!0:!(t.unstable_now()-X<fe)}function oe(){if(b=!1,Q){var V=t.unstable_now();X=V;var Z=!0;try{e:{x=!1,w&&(w=!1,G($),$=-1),A=!0;var le=T;try{t:{for(O(V),_=i(y);_!==null&&!(_.expirationTime>V&&ie());){var Re=_.callback;if(typeof Re=="function"){_.callback=null,T=_.priorityLevel;var ke=Re(_.expirationTime<=V);if(V=t.unstable_now(),typeof ke=="function"){_.callback=ke,O(V),Z=!0;break t}_===i(y)&&o(y),O(V)}else o(y);_=i(y)}if(_!==null)Z=!0;else{var M=i(m);M!==null&&Ke(q,M.startTime-V),Z=!1}}break e}finally{_=null,T=le,A=!1}Z=void 0}}finally{Z?Ce():Q=!1}}}var Ce;if(typeof I=="function")Ce=function(){I(oe)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Ge=Pe.port2;Pe.port1.onmessage=oe,Ce=function(){Ge.postMessage(null)}}else Ce=function(){H(oe,0)};function Ke(V,Z){$=H(function(){V(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(V){switch(T){case 1:case 2:case 3:var Z=3;break;default:Z=T}var le=T;T=Z;try{return V()}finally{T=le}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(V,Z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var le=T;T=V;try{return Z()}finally{T=le}},t.unstable_scheduleCallback=function(V,Z,le){var Re=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Re+le:Re):le=Re,V){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=le+ke,V={id:v++,callback:Z,priorityLevel:V,startTime:le,expirationTime:ke,sortIndex:-1},le>Re?(V.sortIndex=le,e(m,V),i(y)===null&&V===i(m)&&(w?(G($),$=-1):w=!0,Ke(q,le-Re))):(V.sortIndex=ke,e(y,V),x||A||(x=!0,Q||(Q=!0,Ce()))),V},t.unstable_shouldYield=ie,t.unstable_wrapCallback=function(V){var Z=T;return function(){var le=T;T=Z;try{return V.apply(this,arguments)}finally{T=le}}}})(mf)),mf}var Bg;function hC(){return Bg||(Bg=1,pf.exports=dC()),pf.exports}var gf={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function pC(){if(Vg)return ye;Vg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function H(M,Y,W){this.props=M,this.context=Y,this.refs=b,this.updater=W||x}H.prototype.isReactComponent={},H.prototype.setState=function(M,Y){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Y,"setState")},H.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function G(){}G.prototype=H.prototype;function I(M,Y,W){this.props=M,this.context=Y,this.refs=b,this.updater=W||x}var O=I.prototype=new G;O.constructor=I,w(O,H.prototype),O.isPureReactComponent=!0;var q=Array.isArray;function Q(){}var $={H:null,A:null,T:null,S:null},fe=Object.prototype.hasOwnProperty;function X(M,Y,W){var se=W.ref;return{$$typeof:t,type:M,key:Y,ref:se!==void 0?se:null,props:W}}function ie(M,Y){return X(M.type,Y,M.props)}function oe(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function Ce(M){var Y={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(W){return Y[W]})}var Pe=/\/+/g;function Ge(M,Y){return typeof M=="object"&&M!==null&&M.key!=null?Ce(""+M.key):Y.toString(36)}function Ke(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Q,Q):(M.status="pending",M.then(function(Y){M.status==="pending"&&(M.status="fulfilled",M.value=Y)},function(Y){M.status==="pending"&&(M.status="rejected",M.reason=Y)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function V(M,Y,W,se,me){var Ee=typeof M;(Ee==="undefined"||Ee==="boolean")&&(M=null);var Ie=!1;if(M===null)Ie=!0;else switch(Ee){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(M.$$typeof){case t:case e:Ie=!0;break;case v:return Ie=M._init,V(Ie(M._payload),Y,W,se,me)}}if(Ie)return me=me(M),Ie=se===""?"."+Ge(M,0):se,q(me)?(W="",Ie!=null&&(W=Ie.replace(Pe,"$&/")+"/"),V(me,Y,W,"",function(Mi){return Mi})):me!=null&&(oe(me)&&(me=ie(me,W+(me.key==null||M&&M.key===me.key?"":(""+me.key).replace(Pe,"$&/")+"/")+Ie)),Y.push(me)),1;Ie=0;var yt=se===""?".":se+":";if(q(M))for(var Qe=0;Qe<M.length;Qe++)se=M[Qe],Ee=yt+Ge(se,Qe),Ie+=V(se,Y,W,Ee,me);else if(Qe=A(M),typeof Qe=="function")for(M=Qe.call(M),Qe=0;!(se=M.next()).done;)se=se.value,Ee=yt+Ge(se,Qe++),Ie+=V(se,Y,W,Ee,me);else if(Ee==="object"){if(typeof M.then=="function")return V(Ke(M),Y,W,se,me);throw Y=String(M),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function Z(M,Y,W){if(M==null)return M;var se=[],me=0;return V(M,se,"","",function(Ee){return Y.call(W,Ee,me++)}),se}function le(M){if(M._status===-1){var Y=M._result;Y=Y(),Y.then(function(W){(M._status===0||M._status===-1)&&(M._status=1,M._result=W)},function(W){(M._status===0||M._status===-1)&&(M._status=2,M._result=W)}),M._status===-1&&(M._status=0,M._result=Y)}if(M._status===1)return M._result.default;throw M._result}var Re=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},ke={map:Z,forEach:function(M,Y,W){Z(M,function(){Y.apply(this,arguments)},W)},count:function(M){var Y=0;return Z(M,function(){Y++}),Y},toArray:function(M){return Z(M,function(Y){return Y})||[]},only:function(M){if(!oe(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ye.Activity=_,ye.Children=ke,ye.Component=H,ye.Fragment=i,ye.Profiler=a,ye.PureComponent=I,ye.StrictMode=o,ye.Suspense=y,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,ye.__COMPILER_RUNTIME={__proto__:null,c:function(M){return $.H.useMemoCache(M)}},ye.cache=function(M){return function(){return M.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(M,Y,W){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var se=w({},M.props),me=M.key;if(Y!=null)for(Ee in Y.key!==void 0&&(me=""+Y.key),Y)!fe.call(Y,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&Y.ref===void 0||(se[Ee]=Y[Ee]);var Ee=arguments.length-2;if(Ee===1)se.children=W;else if(1<Ee){for(var Ie=Array(Ee),yt=0;yt<Ee;yt++)Ie[yt]=arguments[yt+2];se.children=Ie}return X(M.type,me,se)},ye.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:r,_context:M},M},ye.createElement=function(M,Y,W){var se,me={},Ee=null;if(Y!=null)for(se in Y.key!==void 0&&(Ee=""+Y.key),Y)fe.call(Y,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(me[se]=Y[se]);var Ie=arguments.length-2;if(Ie===1)me.children=W;else if(1<Ie){for(var yt=Array(Ie),Qe=0;Qe<Ie;Qe++)yt[Qe]=arguments[Qe+2];me.children=yt}if(M&&M.defaultProps)for(se in Ie=M.defaultProps,Ie)me[se]===void 0&&(me[se]=Ie[se]);return X(M,Ee,me)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(M){return{$$typeof:p,render:M}},ye.isValidElement=oe,ye.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:le}},ye.memo=function(M,Y){return{$$typeof:m,type:M,compare:Y===void 0?null:Y}},ye.startTransition=function(M){var Y=$.T,W={};$.T=W;try{var se=M(),me=$.S;me!==null&&me(W,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Q,Re)}catch(Ee){Re(Ee)}finally{Y!==null&&W.types!==null&&(Y.types=W.types),$.T=Y}},ye.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},ye.use=function(M){return $.H.use(M)},ye.useActionState=function(M,Y,W){return $.H.useActionState(M,Y,W)},ye.useCallback=function(M,Y){return $.H.useCallback(M,Y)},ye.useContext=function(M){return $.H.useContext(M)},ye.useDebugValue=function(){},ye.useDeferredValue=function(M,Y){return $.H.useDeferredValue(M,Y)},ye.useEffect=function(M,Y){return $.H.useEffect(M,Y)},ye.useEffectEvent=function(M){return $.H.useEffectEvent(M)},ye.useId=function(){return $.H.useId()},ye.useImperativeHandle=function(M,Y,W){return $.H.useImperativeHandle(M,Y,W)},ye.useInsertionEffect=function(M,Y){return $.H.useInsertionEffect(M,Y)},ye.useLayoutEffect=function(M,Y){return $.H.useLayoutEffect(M,Y)},ye.useMemo=function(M,Y){return $.H.useMemo(M,Y)},ye.useOptimistic=function(M,Y){return $.H.useOptimistic(M,Y)},ye.useReducer=function(M,Y,W){return $.H.useReducer(M,Y,W)},ye.useRef=function(M){return $.H.useRef(M)},ye.useState=function(M){return $.H.useState(M)},ye.useSyncExternalStore=function(M,Y,W){return $.H.useSyncExternalStore(M,Y,W)},ye.useTransition=function(){return $.H.useTransition()},ye.version="19.2.4",ye}var zg;function ud(){return zg||(zg=1,gf.exports=pC()),gf.exports}var yf={exports:{}},Rt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function mC(){if(Fg)return Rt;Fg=1;var t=ud();function e(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function r(y,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:y,containerInfo:m,implementation:v}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Rt.createPortal=function(y,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return r(y,m,null,v)},Rt.flushSync=function(y){var m=f.T,v=o.p;try{if(f.T=null,o.p=2,y)return y()}finally{f.T=m,o.p=v,o.d.f()}},Rt.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(y,m))},Rt.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},Rt.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:A}):v==="script"&&o.d.X(y,{crossOrigin:_,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Rt.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);o.d.M(y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(y)},Rt.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin);o.d.L(y,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Rt.preloadModule=function(y,m){if(typeof y=="string")if(m){var v=p(m.as,m.crossOrigin);o.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(y)},Rt.requestFormReset=function(y){o.d.r(y)},Rt.unstable_batchedUpdates=function(y,m){return y(m)},Rt.useFormState=function(y,m,v){return f.H.useFormState(y,m,v)},Rt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Rt.version="19.2.4",Rt}var $g;function gC(){if($g)return yf.exports;$g=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yf.exports=mC(),yf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function yC(){if(Jg)return sl;Jg=1;var t=hC(),e=ud(),i=gC();function o(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function r(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function f(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function y(n){if(r(n)!==n)throw Error(o(188))}function m(n){var s=n.alternate;if(!s){if(s=r(n),s===null)throw Error(o(188));return s!==n?null:n}for(var l=n,u=s;;){var h=l.return;if(h===null)break;var g=h.alternate;if(g===null){if(u=h.return,u!==null){l=u;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===l)return y(h),n;if(g===u)return y(h),s;g=g.sibling}throw Error(o(188))}if(l.return!==u.return)l=h,u=g;else{for(var S=!1,E=h.child;E;){if(E===l){S=!0,l=h,u=g;break}if(E===u){S=!0,u=h,l=g;break}E=E.sibling}if(!S){for(E=g.child;E;){if(E===l){S=!0,l=g,u=h;break}if(E===u){S=!0,u=g,l=h;break}E=E.sibling}if(!S)throw Error(o(189))}}if(l.alternate!==u)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),I=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function Ce(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var Pe=Symbol.for("react.client.reference");function Ge(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Pe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case H:return"Profiler";case b:return"StrictMode";case q:return"Suspense";case Q:return"SuspenseList";case X:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case I:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case O:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $:return s=n.displayName||null,s!==null?s:Ge(n.type)||"Memo";case fe:s=n._payload,n=n._init;try{return Ge(n(s))}catch{}}return null}var Ke=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Re=[],ke=-1;function M(n){return{current:n}}function Y(n){0>ke||(n.current=Re[ke],Re[ke]=null,ke--)}function W(n,s){ke++,Re[ke]=n.current,n.current=s}var se=M(null),me=M(null),Ee=M(null),Ie=M(null);function yt(n,s){switch(W(Ee,s),W(me,n),W(se,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?ag(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=ag(s),n=rg(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Y(se),W(se,n)}function Qe(){Y(se),Y(me),Y(Ee)}function Mi(n){n.memoizedState!==null&&W(Ie,n);var s=se.current,l=rg(s,n.type);s!==l&&(W(me,n),W(se,l))}function Ii(n){me.current===n&&(Y(se),Y(me)),Ie.current===n&&(Y(Ie),jo._currentValue=le)}var ti,Ml;function In(n){if(ti===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);ti=s&&s[1]||"",Ml=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ti+n+Ml}var oo=!1;function lo(n,s){if(!n||oo)return"";oo=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(B){var k=B}Reflect.construct(n,[],J)}else{try{J.call()}catch(B){k=B}n.call(J.prototype)}}else{try{throw Error()}catch(B){k=B}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(B){if(B&&k&&typeof B.stack=="string")return[B.stack,k.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),S=g[0],E=g[1];if(S&&E){var R=S.split(`
`),L=E.split(`
`);for(h=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(u===R.length||h===L.length)for(u=R.length-1,h=L.length-1;1<=u&&0<=h&&R[u]!==L[h];)h--;for(;1<=u&&0<=h;u--,h--)if(R[u]!==L[h]){if(u!==1||h!==1)do if(u--,h--,0>h||R[u]!==L[h]){var z=`
`+R[u].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=u&&0<=h);break}}}finally{oo=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?In(l):""}function Wr(n,s){switch(n.tag){case 26:case 27:case 5:return In(n.type);case 16:return In("Lazy");case 13:return n.child!==s&&s!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return lo(n.type,!1);case 11:return lo(n.type.render,!1);case 1:return lo(n.type,!0);case 31:return In("Activity");default:return""}}function Il(n){try{var s="",l=null;do s+=Wr(n,l),l=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ao=Object.prototype.hasOwnProperty,ro=t.unstable_scheduleCallback,st=t.unstable_cancelCallback,En=t.unstable_shouldYield,ve=t.unstable_requestPaint,je=t.unstable_now,$e=t.unstable_getCurrentPriorityLevel,Cn=t.unstable_ImmediatePriority,Ze=t.unstable_UserBlockingPriority,bt=t.unstable_NormalPriority,uo=t.unstable_LowPriority,ni=t.unstable_IdlePriority,Dl=t.log,Ul=t.unstable_setDisableYieldValue,Di=null,wt=null;function hn(n){if(typeof Dl=="function"&&Ul(n),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Di,n)}catch{}}var Me=Math.clz32?Math.clz32:XS,Ut=Math.log,co=Math.LN2;function XS(n){return n>>>=0,n===0?32:31-(Ut(n)/co|0)|0}var Ll=256,Ol=262144,Gl=4194304;function Ui(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Pl(n,s,l){var u=n.pendingLanes;if(u===0)return 0;var h=0,g=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~g,u!==0?h=Ui(u):(S&=E,S!==0?h=Ui(S):l||(l=E&~n,l!==0&&(h=Ui(l))))):(E=u&~g,E!==0?h=Ui(E):S!==0?h=Ui(S):l||(l=u&~n,l!==0&&(h=Ui(l)))),h===0?0:s!==0&&s!==h&&(s&g)===0&&(g=h&-h,l=s&-s,g>=l||g===32&&(l&4194048)!==0)?s:h}function fo(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function QS(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vd(){var n=Gl;return Gl<<=1,(Gl&62914560)===0&&(Gl=4194304),n}function jr(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function ho(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ZS(n,s,l,u,h,g){var S=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var E=n.entanglements,R=n.expirationTimes,L=n.hiddenUpdates;for(l=S&~l;0<l;){var z=31-Me(l),J=1<<z;E[z]=0,R[z]=-1;var k=L[z];if(k!==null)for(L[z]=null,z=0;z<k.length;z++){var B=k[z];B!==null&&(B.lane&=-536870913)}l&=~J}u!==0&&zd(n,u,0),g!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=g&~(S&~s))}function zd(n,s,l){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-Me(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|l&261930}function Fd(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var u=31-Me(l),h=1<<u;h&s|n[u]&s&&(n[u]|=s),l&=~h}}function $d(n,s){var l=s&-s;return l=(l&42)!==0?1:eu(l),(l&(n.suspendedLanes|s))!==0?0:l}function eu(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function tu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Jd(){var n=Z.p;return n!==0?n:(n=window.event,n===void 0?32:Ig(n.type))}function Yd(n,s){var l=Z.p;try{return Z.p=n,s()}finally{Z.p=l}}var ii=Math.random().toString(36).slice(2),vt="__reactFiber$"+ii,Lt="__reactProps$"+ii,ss="__reactContainer$"+ii,nu="__reactEvents$"+ii,WS="__reactListeners$"+ii,jS="__reactHandles$"+ii,Kd="__reactResources$"+ii,po="__reactMarker$"+ii;function iu(n){delete n[vt],delete n[Lt],delete n[nu],delete n[WS],delete n[jS]}function os(n){var s=n[vt];if(s)return s;for(var l=n.parentNode;l;){if(s=l[ss]||l[vt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=mg(n);n!==null;){if(l=n[vt])return l;n=mg(n)}return s}n=l,l=n.parentNode}return null}function ls(n){if(n=n[vt]||n[ss]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function mo(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(o(33))}function as(n){var s=n[Kd];return s||(s=n[Kd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ht(n){n[po]=!0}var Xd=new Set,Qd={};function Li(n,s){rs(n,s),rs(n+"Capture",s)}function rs(n,s){for(Qd[n]=s,n=0;n<s.length;n++)Xd.add(s[n])}var eT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zd={},Wd={};function tT(n){return ao.call(Wd,n)?!0:ao.call(Zd,n)?!1:eT.test(n)?Wd[n]=!0:(Zd[n]=!0,!1)}function kl(n,s,l){if(tT(s))if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+l)}}function Hl(n,s,l){if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+l)}}function Dn(n,s,l,u){if(u===null)n.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(s,l,""+u)}}function Wt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function jd(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function nT(n,s,l){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var h=u.get,g=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(S){l=""+S,g.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function su(n){if(!n._valueTracker){var s=jd(n)?"checked":"value";n._valueTracker=nT(n,s,""+n[s])}}function eh(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return n&&(u=jd(n)?n.checked?"true":"false":n.value),n=u,n!==l?(s.setValue(n),!0):!1}function ql(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var iT=/[\n"\\]/g;function jt(n){return n.replace(iT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ou(n,s,l,u,h,g,S,E){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Wt(s)):n.value!==""+Wt(s)&&(n.value=""+Wt(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?lu(n,S,Wt(s)):l!=null?lu(n,S,Wt(l)):u!=null&&n.removeAttribute("value"),h==null&&g!=null&&(n.defaultChecked=!!g),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+Wt(E):n.removeAttribute("name")}function th(n,s,l,u,h,g,S,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){su(n);return}l=l!=null?""+Wt(l):"",s=s!=null?""+Wt(s):l,E||s===n.value||(n.value=s),n.defaultValue=s}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),su(n)}function lu(n,s,l){s==="number"&&ql(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function us(n,s,l,u){if(n=n.options,s){s={};for(var h=0;h<l.length;h++)s["$"+l[h]]=!0;for(l=0;l<n.length;l++)h=s.hasOwnProperty("$"+n[l].value),n[l].selected!==h&&(n[l].selected=h),h&&u&&(n[l].defaultSelected=!0)}else{for(l=""+Wt(l),s=null,h=0;h<n.length;h++){if(n[h].value===l){n[h].selected=!0,u&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function nh(n,s,l){if(s!=null&&(s=""+Wt(s),s!==n.value&&(n.value=s),l==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=l!=null?""+Wt(l):""}function ih(n,s,l,u){if(s==null){if(u!=null){if(l!=null)throw Error(o(92));if(Ke(u)){if(1<u.length)throw Error(o(93));u=u[0]}l=u}l==null&&(l=""),s=l}l=Wt(s),n.defaultValue=l,u=n.textContent,u===l&&u!==""&&u!==null&&(n.value=u),su(n)}function cs(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var sT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sh(n,s,l){var u=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,l):typeof l!="number"||l===0||sT.has(s)?s==="float"?n.cssFloat=l:n[s]=(""+l).trim():n[s]=l+"px"}function oh(n,s,l){if(s!=null&&typeof s!="object")throw Error(o(62));if(n=n.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var h in s)u=s[h],s.hasOwnProperty(h)&&l[h]!==u&&sh(n,h,u)}else for(var g in s)s.hasOwnProperty(g)&&sh(n,g,s[g])}function au(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bl(n){return lT.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Un(){}var ru=null;function uu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fs=null,ds=null;function lh(n){var s=ls(n);if(s&&(n=s.stateNode)){var l=n[Lt]||null;e:switch(n=s.stateNode,s.type){case"input":if(ou(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+jt(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==n&&u.form===n.form){var h=u[Lt]||null;if(!h)throw Error(o(90));ou(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<l.length;s++)u=l[s],u.form===n.form&&eh(u)}break e;case"textarea":nh(n,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&us(n,!!l.multiple,s,!1)}}}var cu=!1;function ah(n,s,l){if(cu)return n(s,l);cu=!0;try{var u=n(s);return u}finally{if(cu=!1,(fs!==null||ds!==null)&&(Ra(),fs&&(s=fs,n=ds,ds=fs=null,lh(s),n)))for(s=0;s<n.length;s++)lh(n[s])}}function go(n,s){var l=n.stateNode;if(l===null)return null;var u=l[Lt]||null;if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(o(231,s,typeof l));return l}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fu=!1;if(Ln)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){fu=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{fu=!1}var si=null,du=null,Vl=null;function rh(){if(Vl)return Vl;var n,s=du,l=s.length,u,h="value"in si?si.value:si.textContent,g=h.length;for(n=0;n<l&&s[n]===h[n];n++);var S=l-n;for(u=1;u<=S&&s[l-u]===h[g-u];u++);return Vl=h.slice(n,1<u?1-u:void 0)}function zl(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Fl(){return!0}function uh(){return!1}function Ot(n){function s(l,u,h,g,S){this._reactName=l,this._targetInst=h,this.type=u,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(l=n[E],this[E]=l?l(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Fl:uh,this.isPropagationStopped=uh,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),s}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$l=Ot(Oi),vo=_({},Oi,{view:0,detail:0}),aT=Ot(vo),hu,pu,_o,Jl=_({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_o&&(_o&&n.type==="mousemove"?(hu=n.screenX-_o.screenX,pu=n.screenY-_o.screenY):pu=hu=0,_o=n),hu)},movementY:function(n){return"movementY"in n?n.movementY:pu}}),ch=Ot(Jl),rT=_({},Jl,{dataTransfer:0}),uT=Ot(rT),cT=_({},vo,{relatedTarget:0}),mu=Ot(cT),fT=_({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),dT=Ot(fT),hT=_({},Oi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),pT=Ot(hT),mT=_({},Oi,{data:0}),fh=Ot(mT),gT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _T(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=vT[n])?!!s[n]:!1}function gu(){return _T}var ST=_({},vo,{key:function(n){if(n.key){var s=gT[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=zl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?yT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gu,charCode:function(n){return n.type==="keypress"?zl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),TT=Ot(ST),ET=_({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dh=Ot(ET),CT=_({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gu}),AT=Ot(CT),xT=_({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),bT=Ot(xT),wT=_({},Jl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),RT=Ot(wT),NT=_({},Oi,{newState:0,oldState:0}),MT=Ot(NT),IT=[9,13,27,32],yu=Ln&&"CompositionEvent"in window,So=null;Ln&&"documentMode"in document&&(So=document.documentMode);var DT=Ln&&"TextEvent"in window&&!So,hh=Ln&&(!yu||So&&8<So&&11>=So),ph=" ",mh=!1;function gh(n,s){switch(n){case"keyup":return IT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var hs=!1;function UT(n,s){switch(n){case"compositionend":return yh(s);case"keypress":return s.which!==32?null:(mh=!0,ph);case"textInput":return n=s.data,n===ph&&mh?null:n;default:return null}}function LT(n,s){if(hs)return n==="compositionend"||!yu&&gh(n,s)?(n=rh(),Vl=du=si=null,hs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return hh&&s.locale!=="ko"?null:s.data;default:return null}}var OT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!OT[n.type]:s==="textarea"}function _h(n,s,l,u){fs?ds?ds.push(u):ds=[u]:fs=u,s=Oa(s,"onChange"),0<s.length&&(l=new $l("onChange","change",null,l,u),n.push({event:l,listeners:s}))}var To=null,Eo=null;function GT(n){tg(n,0)}function Yl(n){var s=mo(n);if(eh(s))return n}function Sh(n,s){if(n==="change")return s}var Th=!1;if(Ln){var vu;if(Ln){var _u="oninput"in document;if(!_u){var Eh=document.createElement("div");Eh.setAttribute("oninput","return;"),_u=typeof Eh.oninput=="function"}vu=_u}else vu=!1;Th=vu&&(!document.documentMode||9<document.documentMode)}function Ch(){To&&(To.detachEvent("onpropertychange",Ah),Eo=To=null)}function Ah(n){if(n.propertyName==="value"&&Yl(Eo)){var s=[];_h(s,Eo,n,uu(n)),ah(GT,s)}}function PT(n,s,l){n==="focusin"?(Ch(),To=s,Eo=l,To.attachEvent("onpropertychange",Ah)):n==="focusout"&&Ch()}function kT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Yl(Eo)}function HT(n,s){if(n==="click")return Yl(s)}function qT(n,s){if(n==="input"||n==="change")return Yl(s)}function BT(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Vt=typeof Object.is=="function"?Object.is:BT;function Co(n,s){if(Vt(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var h=l[u];if(!ao.call(s,h)||!Vt(n[h],s[h]))return!1}return!0}function xh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bh(n,s){var l=xh(n);n=0;for(var u;l;){if(l.nodeType===3){if(u=n+l.textContent.length,n<=s&&u>=s)return{node:l,offset:s-n};n=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=xh(l)}}function wh(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?wh(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Rh(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ql(n.document);s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=ql(n.document)}return s}function Su(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var VT=Ln&&"documentMode"in document&&11>=document.documentMode,ps=null,Tu=null,Ao=null,Eu=!1;function Nh(n,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Eu||ps==null||ps!==ql(u)||(u=ps,"selectionStart"in u&&Su(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ao&&Co(Ao,u)||(Ao=u,u=Oa(Tu,"onSelect"),0<u.length&&(s=new $l("onSelect","select",null,s,l),n.push({event:s,listeners:u}),s.target=ps)))}function Gi(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var ms={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionrun:Gi("Transition","TransitionRun"),transitionstart:Gi("Transition","TransitionStart"),transitioncancel:Gi("Transition","TransitionCancel"),transitionend:Gi("Transition","TransitionEnd")},Cu={},Mh={};Ln&&(Mh=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function Pi(n){if(Cu[n])return Cu[n];if(!ms[n])return n;var s=ms[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Mh)return Cu[n]=s[l];return n}var Ih=Pi("animationend"),Dh=Pi("animationiteration"),Uh=Pi("animationstart"),zT=Pi("transitionrun"),FT=Pi("transitionstart"),$T=Pi("transitioncancel"),Lh=Pi("transitionend"),Oh=new Map,Au="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Au.push("scrollEnd");function pn(n,s){Oh.set(n,s),Li(s,[n])}var Kl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},en=[],gs=0,xu=0;function Xl(){for(var n=gs,s=xu=gs=0;s<n;){var l=en[s];en[s++]=null;var u=en[s];en[s++]=null;var h=en[s];en[s++]=null;var g=en[s];if(en[s++]=null,u!==null&&h!==null){var S=u.pending;S===null?h.next=h:(h.next=S.next,S.next=h),u.pending=h}g!==0&&Gh(l,h,g)}}function Ql(n,s,l,u){en[gs++]=n,en[gs++]=s,en[gs++]=l,en[gs++]=u,xu|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function bu(n,s,l,u){return Ql(n,s,l,u),Zl(n)}function ki(n,s){return Ql(n,null,null,s),Zl(n)}function Gh(n,s,l){n.lanes|=l;var u=n.alternate;u!==null&&(u.lanes|=l);for(var h=!1,g=n.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(h=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,h&&s!==null&&(h=31-Me(l),n=g.hiddenUpdates,u=n[h],u===null?n[h]=[s]:u.push(s),s.lane=l|536870912),g):null}function Zl(n){if(50<Jo)throw Jo=0,Oc=null,Error(o(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ys={};function JT(n,s,l,u){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(n,s,l,u){return new JT(n,s,l,u)}function wu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function On(n,s){var l=n.alternate;return l===null?(l=zt(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Ph(n,s){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,s=l.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Wl(n,s,l,u,h,g){var S=0;if(u=n,typeof n=="function")wu(n)&&(S=1);else if(typeof n=="string")S=ZE(n,l,se.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case X:return n=zt(31,l,s,h),n.elementType=X,n.lanes=g,n;case w:return Hi(l.children,h,g,s);case b:S=8,h|=24;break;case H:return n=zt(12,l,s,h|2),n.elementType=H,n.lanes=g,n;case q:return n=zt(13,l,s,h),n.elementType=q,n.lanes=g,n;case Q:return n=zt(19,l,s,h),n.elementType=Q,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case I:S=10;break e;case G:S=9;break e;case O:S=11;break e;case $:S=14;break e;case fe:S=16,u=null;break e}S=29,l=Error(o(130,n===null?"null":typeof n,"")),u=null}return s=zt(S,l,s,h),s.elementType=n,s.type=u,s.lanes=g,s}function Hi(n,s,l,u){return n=zt(7,n,u,s),n.lanes=l,n}function Ru(n,s,l){return n=zt(6,n,null,s),n.lanes=l,n}function kh(n){var s=zt(18,null,null,0);return s.stateNode=n,s}function Nu(n,s,l){return s=zt(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Hh=new WeakMap;function tn(n,s){if(typeof n=="object"&&n!==null){var l=Hh.get(n);return l!==void 0?l:(s={value:n,source:s,stack:Il(s)},Hh.set(n,s),s)}return{value:n,source:s,stack:Il(s)}}var vs=[],_s=0,jl=null,xo=0,nn=[],sn=0,oi=null,An=1,xn="";function Gn(n,s){vs[_s++]=xo,vs[_s++]=jl,jl=n,xo=s}function qh(n,s,l){nn[sn++]=An,nn[sn++]=xn,nn[sn++]=oi,oi=n;var u=An;n=xn;var h=32-Me(u)-1;u&=~(1<<h),l+=1;var g=32-Me(s)+h;if(30<g){var S=h-h%5;g=(u&(1<<S)-1).toString(32),u>>=S,h-=S,An=1<<32-Me(s)+h|l<<h|u,xn=g+n}else An=1<<g|l<<h|u,xn=n}function Mu(n){n.return!==null&&(Gn(n,1),qh(n,1,0))}function Iu(n){for(;n===jl;)jl=vs[--_s],vs[_s]=null,xo=vs[--_s],vs[_s]=null;for(;n===oi;)oi=nn[--sn],nn[sn]=null,xn=nn[--sn],nn[sn]=null,An=nn[--sn],nn[sn]=null}function Bh(n,s){nn[sn++]=An,nn[sn++]=xn,nn[sn++]=oi,An=s.id,xn=s.overflow,oi=n}var _t=null,Je=null,Ne=!1,li=null,on=!1,Du=Error(o(519));function ai(n){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bo(tn(s,n)),Du}function Vh(n){var s=n.stateNode,l=n.type,u=n.memoizedProps;switch(s[vt]=n,s[Lt]=u,l){case"dialog":xe("cancel",s),xe("close",s);break;case"iframe":case"object":case"embed":xe("load",s);break;case"video":case"audio":for(l=0;l<Ko.length;l++)xe(Ko[l],s);break;case"source":xe("error",s);break;case"img":case"image":case"link":xe("error",s),xe("load",s);break;case"details":xe("toggle",s);break;case"input":xe("invalid",s),th(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":xe("invalid",s);break;case"textarea":xe("invalid",s),ih(s,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||u.suppressHydrationWarning===!0||og(s.textContent,l)?(u.popover!=null&&(xe("beforetoggle",s),xe("toggle",s)),u.onScroll!=null&&xe("scroll",s),u.onScrollEnd!=null&&xe("scrollend",s),u.onClick!=null&&(s.onclick=Un),s=!0):s=!1,s||ai(n,!0)}function zh(n){for(_t=n.return;_t;)switch(_t.tag){case 5:case 31:case 13:on=!1;return;case 27:case 3:on=!0;return;default:_t=_t.return}}function Ss(n){if(n!==_t)return!1;if(!Ne)return zh(n),Ne=!0,!1;var s=n.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Qc(n.type,n.memoizedProps)),l=!l),l&&Je&&ai(n),zh(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Je=pg(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));Je=pg(n)}else s===27?(s=Je,Ti(n.type)?(n=tf,tf=null,Je=n):Je=s):Je=_t?an(n.stateNode.nextSibling):null;return!0}function qi(){Je=_t=null,Ne=!1}function Uu(){var n=li;return n!==null&&(Ht===null?Ht=n:Ht.push.apply(Ht,n),li=null),n}function bo(n){li===null?li=[n]:li.push(n)}var Lu=M(null),Bi=null,Pn=null;function ri(n,s,l){W(Lu,s._currentValue),s._currentValue=l}function kn(n){n._currentValue=Lu.current,Y(Lu)}function Ou(n,s,l){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===l)break;n=n.return}}function Gu(n,s,l,u){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var g=h.dependencies;if(g!==null){var S=h.child;g=g.firstContext;e:for(;g!==null;){var E=g;g=h;for(var R=0;R<s.length;R++)if(E.context===s[R]){g.lanes|=l,E=g.alternate,E!==null&&(E.lanes|=l),Ou(g.return,l,n),u||(S=null);break e}g=E.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(o(341));S.lanes|=l,g=S.alternate,g!==null&&(g.lanes|=l),Ou(S,l,n),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===n){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function Ts(n,s,l,u){n=null;for(var h=s,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var E=h.type;Vt(h.pendingProps.value,S.value)||(n!==null?n.push(E):n=[E])}}else if(h===Ie.current){if(S=h.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(jo):n=[jo])}h=h.return}n!==null&&Gu(s,n,l,u),s.flags|=262144}function ea(n){for(n=n.firstContext;n!==null;){if(!Vt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Vi(n){Bi=n,Pn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function St(n){return Fh(Bi,n)}function ta(n,s){return Bi===null&&Vi(n),Fh(n,s)}function Fh(n,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Pn===null){if(n===null)throw Error(o(308));Pn=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Pn=Pn.next=s;return l}var YT=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(l,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(l){return l()})}},KT=t.unstable_scheduleCallback,XT=t.unstable_NormalPriority,ot={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pu(){return{controller:new YT,data:new Map,refCount:0}}function wo(n){n.refCount--,n.refCount===0&&KT(XT,function(){n.controller.abort()})}var Ro=null,ku=0,Es=0,Cs=null;function QT(n,s){if(Ro===null){var l=Ro=[];ku=0,Es=Bc(),Cs={status:"pending",value:void 0,then:function(u){l.push(u)}}}return ku++,s.then($h,$h),s}function $h(){if(--ku===0&&Ro!==null){Cs!==null&&(Cs.status="fulfilled");var n=Ro;Ro=null,Es=0,Cs=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function ZT(n,s){var l=[],u={status:"pending",value:null,reason:null,then:function(h){l.push(h)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var h=0;h<l.length;h++)(0,l[h])(s)},function(h){for(u.status="rejected",u.reason=h,h=0;h<l.length;h++)(0,l[h])(void 0)}),u}var Jh=V.S;V.S=function(n,s){Nm=je(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&QT(n,s),Jh!==null&&Jh(n,s)};var zi=M(null);function Hu(){var n=zi.current;return n!==null?n:Fe.pooledCache}function na(n,s){s===null?W(zi,zi.current):W(zi,s.pool)}function Yh(){var n=Hu();return n===null?null:{parent:ot._currentValue,pool:n}}var As=Error(o(460)),qu=Error(o(474)),ia=Error(o(542)),sa={then:function(){}};function Kh(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Xh(n,s,l){switch(l=n[l],l===void 0?n.push(s):l!==s&&(s.then(Un,Un),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Zh(n),n;default:if(typeof s.status=="string")s.then(Un,Un);else{if(n=Fe,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=u}},function(u){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Zh(n),n}throw $i=s,As}}function Fi(n){try{var s=n._init;return s(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?($i=l,As):l}}var $i=null;function Qh(){if($i===null)throw Error(o(459));var n=$i;return $i=null,n}function Zh(n){if(n===As||n===ia)throw Error(o(483))}var xs=null,No=0;function oa(n){var s=No;return No+=1,xs===null&&(xs=[]),Xh(xs,n,s)}function Mo(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function la(n,s){throw s.$$typeof===T?Error(o(525)):(n=Object.prototype.toString.call(s),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Wh(n){function s(D,N){if(n){var U=D.deletions;U===null?(D.deletions=[N],D.flags|=16):U.push(N)}}function l(D,N){if(!n)return null;for(;N!==null;)s(D,N),N=N.sibling;return null}function u(D){for(var N=new Map;D!==null;)D.key!==null?N.set(D.key,D):N.set(D.index,D),D=D.sibling;return N}function h(D,N){return D=On(D,N),D.index=0,D.sibling=null,D}function g(D,N,U){return D.index=U,n?(U=D.alternate,U!==null?(U=U.index,U<N?(D.flags|=67108866,N):U):(D.flags|=67108866,N)):(D.flags|=1048576,N)}function S(D){return n&&D.alternate===null&&(D.flags|=67108866),D}function E(D,N,U,F){return N===null||N.tag!==6?(N=Ru(U,D.mode,F),N.return=D,N):(N=h(N,U),N.return=D,N)}function R(D,N,U,F){var ue=U.type;return ue===w?z(D,N,U.props.children,F,U.key):N!==null&&(N.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===fe&&Fi(ue)===N.type)?(N=h(N,U.props),Mo(N,U),N.return=D,N):(N=Wl(U.type,U.key,U.props,null,D.mode,F),Mo(N,U),N.return=D,N)}function L(D,N,U,F){return N===null||N.tag!==4||N.stateNode.containerInfo!==U.containerInfo||N.stateNode.implementation!==U.implementation?(N=Nu(U,D.mode,F),N.return=D,N):(N=h(N,U.children||[]),N.return=D,N)}function z(D,N,U,F,ue){return N===null||N.tag!==7?(N=Hi(U,D.mode,F,ue),N.return=D,N):(N=h(N,U),N.return=D,N)}function J(D,N,U){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Ru(""+N,D.mode,U),N.return=D,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case A:return U=Wl(N.type,N.key,N.props,null,D.mode,U),Mo(U,N),U.return=D,U;case x:return N=Nu(N,D.mode,U),N.return=D,N;case fe:return N=Fi(N),J(D,N,U)}if(Ke(N)||Ce(N))return N=Hi(N,D.mode,U,null),N.return=D,N;if(typeof N.then=="function")return J(D,oa(N),U);if(N.$$typeof===I)return J(D,ta(D,N),U);la(D,N)}return null}function k(D,N,U,F){var ue=N!==null?N.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ue!==null?null:E(D,N,""+U,F);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return U.key===ue?R(D,N,U,F):null;case x:return U.key===ue?L(D,N,U,F):null;case fe:return U=Fi(U),k(D,N,U,F)}if(Ke(U)||Ce(U))return ue!==null?null:z(D,N,U,F,null);if(typeof U.then=="function")return k(D,N,oa(U),F);if(U.$$typeof===I)return k(D,N,ta(D,U),F);la(D,U)}return null}function B(D,N,U,F,ue){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return D=D.get(U)||null,E(N,D,""+F,ue);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return D=D.get(F.key===null?U:F.key)||null,R(N,D,F,ue);case x:return D=D.get(F.key===null?U:F.key)||null,L(N,D,F,ue);case fe:return F=Fi(F),B(D,N,U,F,ue)}if(Ke(F)||Ce(F))return D=D.get(U)||null,z(N,D,F,ue,null);if(typeof F.then=="function")return B(D,N,U,oa(F),ue);if(F.$$typeof===I)return B(D,N,U,ta(N,F),ue);la(N,F)}return null}function te(D,N,U,F){for(var ue=null,De=null,ae=N,Se=N=0,we=null;ae!==null&&Se<U.length;Se++){ae.index>Se?(we=ae,ae=null):we=ae.sibling;var Ue=k(D,ae,U[Se],F);if(Ue===null){ae===null&&(ae=we);break}n&&ae&&Ue.alternate===null&&s(D,ae),N=g(Ue,N,Se),De===null?ue=Ue:De.sibling=Ue,De=Ue,ae=we}if(Se===U.length)return l(D,ae),Ne&&Gn(D,Se),ue;if(ae===null){for(;Se<U.length;Se++)ae=J(D,U[Se],F),ae!==null&&(N=g(ae,N,Se),De===null?ue=ae:De.sibling=ae,De=ae);return Ne&&Gn(D,Se),ue}for(ae=u(ae);Se<U.length;Se++)we=B(ae,D,Se,U[Se],F),we!==null&&(n&&we.alternate!==null&&ae.delete(we.key===null?Se:we.key),N=g(we,N,Se),De===null?ue=we:De.sibling=we,De=we);return n&&ae.forEach(function(bi){return s(D,bi)}),Ne&&Gn(D,Se),ue}function de(D,N,U,F){if(U==null)throw Error(o(151));for(var ue=null,De=null,ae=N,Se=N=0,we=null,Ue=U.next();ae!==null&&!Ue.done;Se++,Ue=U.next()){ae.index>Se?(we=ae,ae=null):we=ae.sibling;var bi=k(D,ae,Ue.value,F);if(bi===null){ae===null&&(ae=we);break}n&&ae&&bi.alternate===null&&s(D,ae),N=g(bi,N,Se),De===null?ue=bi:De.sibling=bi,De=bi,ae=we}if(Ue.done)return l(D,ae),Ne&&Gn(D,Se),ue;if(ae===null){for(;!Ue.done;Se++,Ue=U.next())Ue=J(D,Ue.value,F),Ue!==null&&(N=g(Ue,N,Se),De===null?ue=Ue:De.sibling=Ue,De=Ue);return Ne&&Gn(D,Se),ue}for(ae=u(ae);!Ue.done;Se++,Ue=U.next())Ue=B(ae,D,Se,Ue.value,F),Ue!==null&&(n&&Ue.alternate!==null&&ae.delete(Ue.key===null?Se:Ue.key),N=g(Ue,N,Se),De===null?ue=Ue:De.sibling=Ue,De=Ue);return n&&ae.forEach(function(rC){return s(D,rC)}),Ne&&Gn(D,Se),ue}function ze(D,N,U,F){if(typeof U=="object"&&U!==null&&U.type===w&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case A:e:{for(var ue=U.key;N!==null;){if(N.key===ue){if(ue=U.type,ue===w){if(N.tag===7){l(D,N.sibling),F=h(N,U.props.children),F.return=D,D=F;break e}}else if(N.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===fe&&Fi(ue)===N.type){l(D,N.sibling),F=h(N,U.props),Mo(F,U),F.return=D,D=F;break e}l(D,N);break}else s(D,N);N=N.sibling}U.type===w?(F=Hi(U.props.children,D.mode,F,U.key),F.return=D,D=F):(F=Wl(U.type,U.key,U.props,null,D.mode,F),Mo(F,U),F.return=D,D=F)}return S(D);case x:e:{for(ue=U.key;N!==null;){if(N.key===ue)if(N.tag===4&&N.stateNode.containerInfo===U.containerInfo&&N.stateNode.implementation===U.implementation){l(D,N.sibling),F=h(N,U.children||[]),F.return=D,D=F;break e}else{l(D,N);break}else s(D,N);N=N.sibling}F=Nu(U,D.mode,F),F.return=D,D=F}return S(D);case fe:return U=Fi(U),ze(D,N,U,F)}if(Ke(U))return te(D,N,U,F);if(Ce(U)){if(ue=Ce(U),typeof ue!="function")throw Error(o(150));return U=ue.call(U),de(D,N,U,F)}if(typeof U.then=="function")return ze(D,N,oa(U),F);if(U.$$typeof===I)return ze(D,N,ta(D,U),F);la(D,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,N!==null&&N.tag===6?(l(D,N.sibling),F=h(N,U),F.return=D,D=F):(l(D,N),F=Ru(U,D.mode,F),F.return=D,D=F),S(D)):l(D,N)}return function(D,N,U,F){try{No=0;var ue=ze(D,N,U,F);return xs=null,ue}catch(ae){if(ae===As||ae===ia)throw ae;var De=zt(29,ae,null,D.mode);return De.lanes=F,De.return=D,De}finally{}}}var Ji=Wh(!0),jh=Wh(!1),ui=!1;function Bu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ci(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function fi(n,s,l){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Oe&2)!==0){var h=u.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),u.pending=s,s=Zl(n),Gh(n,null,l),s}return Ql(n,u,s,l),Zl(n)}function Io(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,l|=u,s.lanes=l,Fd(n,l)}}function zu(n,s){var l=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var h=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?h=g=S:g=g.next=S,l=l.next}while(l!==null);g===null?h=g=s:g=g.next=s}else h=g=s;l={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}var Fu=!1;function Do(){if(Fu){var n=Cs;if(n!==null)throw n}}function Uo(n,s,l,u){Fu=!1;var h=n.updateQueue;ui=!1;var g=h.firstBaseUpdate,S=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var R=E,L=R.next;R.next=null,S===null?g=L:S.next=L,S=R;var z=n.alternate;z!==null&&(z=z.updateQueue,E=z.lastBaseUpdate,E!==S&&(E===null?z.firstBaseUpdate=L:E.next=L,z.lastBaseUpdate=R))}if(g!==null){var J=h.baseState;S=0,z=L=R=null,E=g;do{var k=E.lane&-536870913,B=k!==E.lane;if(B?(be&k)===k:(u&k)===k){k!==0&&k===Es&&(Fu=!0),z!==null&&(z=z.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var te=n,de=E;k=s;var ze=l;switch(de.tag){case 1:if(te=de.payload,typeof te=="function"){J=te.call(ze,J,k);break e}J=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=de.payload,k=typeof te=="function"?te.call(ze,J,k):te,k==null)break e;J=_({},J,k);break e;case 2:ui=!0}}k=E.callback,k!==null&&(n.flags|=64,B&&(n.flags|=8192),B=h.callbacks,B===null?h.callbacks=[k]:B.push(k))}else B={lane:k,tag:E.tag,payload:E.payload,callback:E.callback,next:null},z===null?(L=z=B,R=J):z=z.next=B,S|=k;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);z===null&&(R=J),h.baseState=R,h.firstBaseUpdate=L,h.lastBaseUpdate=z,g===null&&(h.shared.lanes=0),gi|=S,n.lanes=S,n.memoizedState=J}}function ep(n,s){if(typeof n!="function")throw Error(o(191,n));n.call(s)}function tp(n,s){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)ep(l[n],s)}var bs=M(null),aa=M(0);function np(n,s){n=Yn,W(aa,n),W(bs,s),Yn=n|s.baseLanes}function $u(){W(aa,Yn),W(bs,bs.current)}function Ju(){Yn=aa.current,Y(bs),Y(aa)}var Ft=M(null),ln=null;function di(n){var s=n.alternate;W(nt,nt.current&1),W(Ft,n),ln===null&&(s===null||bs.current!==null||s.memoizedState!==null)&&(ln=n)}function Yu(n){W(nt,nt.current),W(Ft,n),ln===null&&(ln=n)}function ip(n){n.tag===22?(W(nt,nt.current),W(Ft,n),ln===null&&(ln=n)):hi()}function hi(){W(nt,nt.current),W(Ft,Ft.current)}function $t(n){Y(Ft),ln===n&&(ln=null),Y(nt)}var nt=M(0);function ra(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||jc(l)||ef(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Hn=0,_e=null,Be=null,lt=null,ua=!1,ws=!1,Yi=!1,ca=0,Lo=0,Rs=null,WT=0;function et(){throw Error(o(321))}function Ku(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!Vt(n[l],s[l]))return!1;return!0}function Xu(n,s,l,u,h,g){return Hn=g,_e=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,V.H=n===null||n.memoizedState===null?qp:cc,Yi=!1,g=l(u,h),Yi=!1,ws&&(g=op(s,l,u,h)),sp(n),g}function sp(n){V.H=Po;var s=Be!==null&&Be.next!==null;if(Hn=0,lt=Be=_e=null,ua=!1,Lo=0,Rs=null,s)throw Error(o(300));n===null||at||(n=n.dependencies,n!==null&&ea(n)&&(at=!0))}function op(n,s,l,u){_e=n;var h=0;do{if(ws&&(Rs=null),Lo=0,ws=!1,25<=h)throw Error(o(301));if(h+=1,lt=Be=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}V.H=Bp,g=s(l,u)}while(ws);return g}function jT(){var n=V.H,s=n.useState()[0];return s=typeof s.then=="function"?Oo(s):s,n=n.useState()[0],(Be!==null?Be.memoizedState:null)!==n&&(_e.flags|=1024),s}function Qu(){var n=ca!==0;return ca=0,n}function Zu(n,s,l){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~l}function Wu(n){if(ua){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ua=!1}Hn=0,lt=Be=_e=null,ws=!1,Lo=ca=0,Rs=null}function Mt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?_e.memoizedState=lt=n:lt=lt.next=n,lt}function it(){if(Be===null){var n=_e.alternate;n=n!==null?n.memoizedState:null}else n=Be.next;var s=lt===null?_e.memoizedState:lt.next;if(s!==null)lt=s,Be=n;else{if(n===null)throw _e.alternate===null?Error(o(467)):Error(o(310));Be=n,n={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},lt===null?_e.memoizedState=lt=n:lt=lt.next=n}return lt}function fa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oo(n){var s=Lo;return Lo+=1,Rs===null&&(Rs=[]),n=Xh(Rs,n,s),s=_e,(lt===null?s.memoizedState:lt.next)===null&&(s=s.alternate,V.H=s===null||s.memoizedState===null?qp:cc),n}function da(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Oo(n);if(n.$$typeof===I)return St(n)}throw Error(o(438,String(n)))}function ju(n){var s=null,l=_e.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var u=_e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=fa(),_e.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(n),u=0;u<n;u++)l[u]=ie;return s.index++,l}function qn(n,s){return typeof s=="function"?s(n):s}function ha(n){var s=it();return ec(s,Be,n)}function ec(n,s,l){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=l;var h=n.baseQueue,g=u.pending;if(g!==null){if(h!==null){var S=h.next;h.next=g.next,g.next=S}s.baseQueue=h=g,u.pending=null}if(g=n.baseState,h===null)n.memoizedState=g;else{s=h.next;var E=S=null,R=null,L=s,z=!1;do{var J=L.lane&-536870913;if(J!==L.lane?(be&J)===J:(Hn&J)===J){var k=L.revertLane;if(k===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),J===Es&&(z=!0);else if((Hn&k)===k){L=L.next,k===Es&&(z=!0);continue}else J={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},R===null?(E=R=J,S=g):R=R.next=J,_e.lanes|=k,gi|=k;J=L.action,Yi&&l(g,J),g=L.hasEagerState?L.eagerState:l(g,J)}else k={lane:J,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},R===null?(E=R=k,S=g):R=R.next=k,_e.lanes|=J,gi|=J;L=L.next}while(L!==null&&L!==s);if(R===null?S=g:R.next=E,!Vt(g,n.memoizedState)&&(at=!0,z&&(l=Cs,l!==null)))throw l;n.memoizedState=g,n.baseState=S,n.baseQueue=R,u.lastRenderedState=g}return h===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function tc(n){var s=it(),l=s.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=n;var u=l.dispatch,h=l.pending,g=s.memoizedState;if(h!==null){l.pending=null;var S=h=h.next;do g=n(g,S.action),S=S.next;while(S!==h);Vt(g,s.memoizedState)||(at=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,u]}function lp(n,s,l){var u=_e,h=it(),g=Ne;if(g){if(l===void 0)throw Error(o(407));l=l()}else l=s();var S=!Vt((Be||h).memoizedState,l);if(S&&(h.memoizedState=l,at=!0),h=h.queue,sc(up.bind(null,u,h,n),[n]),h.getSnapshot!==s||S||lt!==null&&lt.memoizedState.tag&1){if(u.flags|=2048,Ns(9,{destroy:void 0},rp.bind(null,u,h,l,s),null),Fe===null)throw Error(o(349));g||(Hn&127)!==0||ap(u,s,l)}return l}function ap(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=_e.updateQueue,s===null?(s=fa(),_e.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function rp(n,s,l,u){s.value=l,s.getSnapshot=u,cp(s)&&fp(n)}function up(n,s,l){return l(function(){cp(s)&&fp(n)})}function cp(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!Vt(n,l)}catch{return!0}}function fp(n){var s=ki(n,2);s!==null&&qt(s,n,2)}function nc(n){var s=Mt();if(typeof n=="function"){var l=n;if(n=l(),Yi){hn(!0);try{l()}finally{hn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:n},s}function dp(n,s,l,u){return n.baseState=l,ec(n,Be,typeof u=="function"?u:qn)}function eE(n,s,l,u,h){if(ga(n))throw Error(o(485));if(n=s.action,n!==null){var g={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};V.T!==null?l(!0):g.isTransition=!1,u(g),l=s.pending,l===null?(g.next=s.pending=g,hp(s,g)):(g.next=l.next,s.pending=l.next=g)}}function hp(n,s){var l=s.action,u=s.payload,h=n.state;if(s.isTransition){var g=V.T,S={};V.T=S;try{var E=l(h,u),R=V.S;R!==null&&R(S,E),pp(n,s,E)}catch(L){ic(n,s,L)}finally{g!==null&&S.types!==null&&(g.types=S.types),V.T=g}}else try{g=l(h,u),pp(n,s,g)}catch(L){ic(n,s,L)}}function pp(n,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){mp(n,s,u)},function(u){return ic(n,s,u)}):mp(n,s,l)}function mp(n,s,l){s.status="fulfilled",s.value=l,gp(s),n.state=l,s=n.pending,s!==null&&(l=s.next,l===s?n.pending=null:(l=l.next,s.next=l,hp(n,l)))}function ic(n,s,l){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=l,gp(s),s=s.next;while(s!==u)}n.action=null}function gp(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function yp(n,s){return s}function vp(n,s){if(Ne){var l=Fe.formState;if(l!==null){e:{var u=_e;if(Ne){if(Je){t:{for(var h=Je,g=on;h.nodeType!==8;){if(!g){h=null;break t}if(h=an(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){Je=an(h.nextSibling),u=h.data==="F!";break e}}ai(u)}u=!1}u&&(s=l[0])}}return l=Mt(),l.memoizedState=l.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yp,lastRenderedState:s},l.queue=u,l=Pp.bind(null,_e,u),u.dispatch=l,u=nc(!1),g=uc.bind(null,_e,!1,u.queue),u=Mt(),h={state:s,dispatch:null,action:n,pending:null},u.queue=h,l=eE.bind(null,_e,h,g,l),h.dispatch=l,u.memoizedState=n,[s,l,!1]}function _p(n){var s=it();return Sp(s,Be,n)}function Sp(n,s,l){if(s=ec(n,s,yp)[0],n=ha(qn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Oo(s)}catch(S){throw S===As?ia:S}else u=s;s=it();var h=s.queue,g=h.dispatch;return l!==s.memoizedState&&(_e.flags|=2048,Ns(9,{destroy:void 0},tE.bind(null,h,l),null)),[u,g,n]}function tE(n,s){n.action=s}function Tp(n){var s=it(),l=Be;if(l!==null)return Sp(s,l,n);it(),s=s.memoizedState,l=it();var u=l.queue.dispatch;return l.memoizedState=n,[s,u,!1]}function Ns(n,s,l,u){return n={tag:n,create:l,deps:u,inst:s,next:null},s=_e.updateQueue,s===null&&(s=fa(),_e.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=n.next=n:(u=l.next,l.next=n,n.next=u,s.lastEffect=n),n}function Ep(){return it().memoizedState}function pa(n,s,l,u){var h=Mt();_e.flags|=n,h.memoizedState=Ns(1|s,{destroy:void 0},l,u===void 0?null:u)}function ma(n,s,l,u){var h=it();u=u===void 0?null:u;var g=h.memoizedState.inst;Be!==null&&u!==null&&Ku(u,Be.memoizedState.deps)?h.memoizedState=Ns(s,g,l,u):(_e.flags|=n,h.memoizedState=Ns(1|s,g,l,u))}function Cp(n,s){pa(8390656,8,n,s)}function sc(n,s){ma(2048,8,n,s)}function nE(n){_e.flags|=4;var s=_e.updateQueue;if(s===null)s=fa(),_e.updateQueue=s,s.events=[n];else{var l=s.events;l===null?s.events=[n]:l.push(n)}}function Ap(n){var s=it().memoizedState;return nE({ref:s,nextImpl:n}),function(){if((Oe&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function xp(n,s){return ma(4,2,n,s)}function bp(n,s){return ma(4,4,n,s)}function wp(n,s){if(typeof s=="function"){n=n();var l=s(n);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Rp(n,s,l){l=l!=null?l.concat([n]):null,ma(4,4,wp.bind(null,s,n),l)}function oc(){}function Np(n,s){var l=it();s=s===void 0?null:s;var u=l.memoizedState;return s!==null&&Ku(s,u[1])?u[0]:(l.memoizedState=[n,s],n)}function Mp(n,s){var l=it();s=s===void 0?null:s;var u=l.memoizedState;if(s!==null&&Ku(s,u[1]))return u[0];if(u=n(),Yi){hn(!0);try{n()}finally{hn(!1)}}return l.memoizedState=[u,s],u}function lc(n,s,l){return l===void 0||(Hn&1073741824)!==0&&(be&261930)===0?n.memoizedState=s:(n.memoizedState=l,n=Im(),_e.lanes|=n,gi|=n,l)}function Ip(n,s,l,u){return Vt(l,s)?l:bs.current!==null?(n=lc(n,l,u),Vt(n,s)||(at=!0),n):(Hn&42)===0||(Hn&1073741824)!==0&&(be&261930)===0?(at=!0,n.memoizedState=l):(n=Im(),_e.lanes|=n,gi|=n,s)}function Dp(n,s,l,u,h){var g=Z.p;Z.p=g!==0&&8>g?g:8;var S=V.T,E={};V.T=E,uc(n,!1,s,l);try{var R=h(),L=V.S;if(L!==null&&L(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var z=ZT(R,u);Go(n,s,z,Kt(n))}else Go(n,s,u,Kt(n))}catch(J){Go(n,s,{then:function(){},status:"rejected",reason:J},Kt())}finally{Z.p=g,S!==null&&E.types!==null&&(S.types=E.types),V.T=S}}function iE(){}function ac(n,s,l,u){if(n.tag!==5)throw Error(o(476));var h=Up(n).queue;Dp(n,h,s,le,l===null?iE:function(){return Lp(n),l(u)})}function Up(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:le},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:l},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Lp(n){var s=Up(n);s.next===null&&(s=n.alternate.memoizedState),Go(n,s.next.queue,{},Kt())}function rc(){return St(jo)}function Op(){return it().memoizedState}function Gp(){return it().memoizedState}function sE(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var l=Kt();n=ci(l);var u=fi(s,n,l);u!==null&&(qt(u,s,l),Io(u,s,l)),s={cache:Pu()},n.payload=s;return}s=s.return}}function oE(n,s,l){var u=Kt();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ga(n)?kp(s,l):(l=bu(n,s,l,u),l!==null&&(qt(l,n,u),Hp(l,s,u)))}function Pp(n,s,l){var u=Kt();Go(n,s,l,u)}function Go(n,s,l,u){var h={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(ga(n))kp(s,h);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var S=s.lastRenderedState,E=g(S,l);if(h.hasEagerState=!0,h.eagerState=E,Vt(E,S))return Ql(n,s,h,0),Fe===null&&Xl(),!1}catch{}finally{}if(l=bu(n,s,h,u),l!==null)return qt(l,n,u),Hp(l,s,u),!0}return!1}function uc(n,s,l,u){if(u={lane:2,revertLane:Bc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ga(n)){if(s)throw Error(o(479))}else s=bu(n,l,u,2),s!==null&&qt(s,n,2)}function ga(n){var s=n.alternate;return n===_e||s!==null&&s===_e}function kp(n,s){ws=ua=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Hp(n,s,l){if((l&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,l|=u,s.lanes=l,Fd(n,l)}}var Po={readContext:St,use:da,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};Po.useEffectEvent=et;var qp={readContext:St,use:da,useCallback:function(n,s){return Mt().memoizedState=[n,s===void 0?null:s],n},useContext:St,useEffect:Cp,useImperativeHandle:function(n,s,l){l=l!=null?l.concat([n]):null,pa(4194308,4,wp.bind(null,s,n),l)},useLayoutEffect:function(n,s){return pa(4194308,4,n,s)},useInsertionEffect:function(n,s){pa(4,2,n,s)},useMemo:function(n,s){var l=Mt();s=s===void 0?null:s;var u=n();if(Yi){hn(!0);try{n()}finally{hn(!1)}}return l.memoizedState=[u,s],u},useReducer:function(n,s,l){var u=Mt();if(l!==void 0){var h=l(s);if(Yi){hn(!0);try{l(s)}finally{hn(!1)}}}else h=s;return u.memoizedState=u.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},u.queue=n,n=n.dispatch=oE.bind(null,_e,n),[u.memoizedState,n]},useRef:function(n){var s=Mt();return n={current:n},s.memoizedState=n},useState:function(n){n=nc(n);var s=n.queue,l=Pp.bind(null,_e,s);return s.dispatch=l,[n.memoizedState,l]},useDebugValue:oc,useDeferredValue:function(n,s){var l=Mt();return lc(l,n,s)},useTransition:function(){var n=nc(!1);return n=Dp.bind(null,_e,n.queue,!0,!1),Mt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,l){var u=_e,h=Mt();if(Ne){if(l===void 0)throw Error(o(407));l=l()}else{if(l=s(),Fe===null)throw Error(o(349));(be&127)!==0||ap(u,s,l)}h.memoizedState=l;var g={value:l,getSnapshot:s};return h.queue=g,Cp(up.bind(null,u,g,n),[n]),u.flags|=2048,Ns(9,{destroy:void 0},rp.bind(null,u,g,l,s),null),l},useId:function(){var n=Mt(),s=Fe.identifierPrefix;if(Ne){var l=xn,u=An;l=(u&~(1<<32-Me(u)-1)).toString(32)+l,s="_"+s+"R_"+l,l=ca++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=WT++,s="_"+s+"r_"+l.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:rc,useFormState:vp,useActionState:vp,useOptimistic:function(n){var s=Mt();s.memoizedState=s.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=uc.bind(null,_e,!0,l),l.dispatch=s,[n,s]},useMemoCache:ju,useCacheRefresh:function(){return Mt().memoizedState=sE.bind(null,_e)},useEffectEvent:function(n){var s=Mt(),l={impl:n};return s.memoizedState=l,function(){if((Oe&2)!==0)throw Error(o(440));return l.impl.apply(void 0,arguments)}}},cc={readContext:St,use:da,useCallback:Np,useContext:St,useEffect:sc,useImperativeHandle:Rp,useInsertionEffect:xp,useLayoutEffect:bp,useMemo:Mp,useReducer:ha,useRef:Ep,useState:function(){return ha(qn)},useDebugValue:oc,useDeferredValue:function(n,s){var l=it();return Ip(l,Be.memoizedState,n,s)},useTransition:function(){var n=ha(qn)[0],s=it().memoizedState;return[typeof n=="boolean"?n:Oo(n),s]},useSyncExternalStore:lp,useId:Op,useHostTransitionStatus:rc,useFormState:_p,useActionState:_p,useOptimistic:function(n,s){var l=it();return dp(l,Be,n,s)},useMemoCache:ju,useCacheRefresh:Gp};cc.useEffectEvent=Ap;var Bp={readContext:St,use:da,useCallback:Np,useContext:St,useEffect:sc,useImperativeHandle:Rp,useInsertionEffect:xp,useLayoutEffect:bp,useMemo:Mp,useReducer:tc,useRef:Ep,useState:function(){return tc(qn)},useDebugValue:oc,useDeferredValue:function(n,s){var l=it();return Be===null?lc(l,n,s):Ip(l,Be.memoizedState,n,s)},useTransition:function(){var n=tc(qn)[0],s=it().memoizedState;return[typeof n=="boolean"?n:Oo(n),s]},useSyncExternalStore:lp,useId:Op,useHostTransitionStatus:rc,useFormState:Tp,useActionState:Tp,useOptimistic:function(n,s){var l=it();return Be!==null?dp(l,Be,n,s):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:ju,useCacheRefresh:Gp};Bp.useEffectEvent=Ap;function fc(n,s,l,u){s=n.memoizedState,l=l(u,s),l=l==null?s:_({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var dc={enqueueSetState:function(n,s,l){n=n._reactInternals;var u=Kt(),h=ci(u);h.payload=s,l!=null&&(h.callback=l),s=fi(n,h,u),s!==null&&(qt(s,n,u),Io(s,n,u))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var u=Kt(),h=ci(u);h.tag=1,h.payload=s,l!=null&&(h.callback=l),s=fi(n,h,u),s!==null&&(qt(s,n,u),Io(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=Kt(),u=ci(l);u.tag=2,s!=null&&(u.callback=s),s=fi(n,u,l),s!==null&&(qt(s,n,l),Io(s,n,l))}};function Vp(n,s,l,u,h,g,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,S):s.prototype&&s.prototype.isPureReactComponent?!Co(l,u)||!Co(h,g):!0}function zp(n,s,l,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==n&&dc.enqueueReplaceState(s,s.state,null)}function Ki(n,s){var l=s;if("ref"in s){l={};for(var u in s)u!=="ref"&&(l[u]=s[u])}if(n=n.defaultProps){l===s&&(l=_({},l));for(var h in n)l[h]===void 0&&(l[h]=n[h])}return l}function Fp(n){Kl(n)}function $p(n){console.error(n)}function Jp(n){Kl(n)}function ya(n,s){try{var l=n.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Yp(n,s,l){try{var u=n.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function hc(n,s,l){return l=ci(l),l.tag=3,l.payload={element:null},l.callback=function(){ya(n,s)},l}function Kp(n){return n=ci(n),n.tag=3,n}function Xp(n,s,l,u){var h=l.type.getDerivedStateFromError;if(typeof h=="function"){var g=u.value;n.payload=function(){return h(g)},n.callback=function(){Yp(s,l,u)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Yp(s,l,u),typeof h!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function lE(n,s,l,u,h){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=l.alternate,s!==null&&Ts(s,l,h,!0),l=Ft.current,l!==null){switch(l.tag){case 31:case 13:return ln===null?Na():l.alternate===null&&tt===0&&(tt=3),l.flags&=-257,l.flags|=65536,l.lanes=h,u===sa?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([u]):s.add(u),kc(n,u,h)),!1;case 22:return l.flags|=65536,u===sa?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([u]):l.add(u)),kc(n,u,h)),!1}throw Error(o(435,l.tag))}return kc(n,u,h),Na(),!1}if(Ne)return s=Ft.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,u!==Du&&(n=Error(o(422),{cause:u}),bo(tn(n,l)))):(u!==Du&&(s=Error(o(423),{cause:u}),bo(tn(s,l))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,u=tn(u,l),h=hc(n.stateNode,u,h),zu(n,h),tt!==4&&(tt=2)),!1;var g=Error(o(520),{cause:u});if(g=tn(g,l),$o===null?$o=[g]:$o.push(g),tt!==4&&(tt=2),s===null)return!0;u=tn(u,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,n=h&-h,l.lanes|=n,n=hc(l.stateNode,u,n),zu(l,n),!1;case 1:if(s=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(yi===null||!yi.has(g))))return l.flags|=65536,h&=-h,l.lanes|=h,h=Kp(h),Xp(h,n,l,u),zu(l,h),!1}l=l.return}while(l!==null);return!1}var pc=Error(o(461)),at=!1;function Tt(n,s,l,u){s.child=n===null?jh(s,null,l,u):Ji(s,n.child,l,u)}function Qp(n,s,l,u,h){l=l.render;var g=s.ref;if("ref"in u){var S={};for(var E in u)E!=="ref"&&(S[E]=u[E])}else S=u;return Vi(s),u=Xu(n,s,l,S,g,h),E=Qu(),n!==null&&!at?(Zu(n,s,h),Bn(n,s,h)):(Ne&&E&&Mu(s),s.flags|=1,Tt(n,s,u,h),s.child)}function Zp(n,s,l,u,h){if(n===null){var g=l.type;return typeof g=="function"&&!wu(g)&&g.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=g,Wp(n,s,g,u,h)):(n=Wl(l.type,null,u,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!Ec(n,h)){var S=g.memoizedProps;if(l=l.compare,l=l!==null?l:Co,l(S,u)&&n.ref===s.ref)return Bn(n,s,h)}return s.flags|=1,n=On(g,u),n.ref=s.ref,n.return=s,s.child=n}function Wp(n,s,l,u,h){if(n!==null){var g=n.memoizedProps;if(Co(g,u)&&n.ref===s.ref)if(at=!1,s.pendingProps=u=g,Ec(n,h))(n.flags&131072)!==0&&(at=!0);else return s.lanes=n.lanes,Bn(n,s,h)}return mc(n,s,l,u,h)}function jp(n,s,l,u){var h=u.children,g=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,n!==null){for(u=s.child=n.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;u=h&~g}else u=0,s.child=null;return em(n,s,g,l,u)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&na(s,g!==null?g.cachePool:null),g!==null?np(s,g):$u(),ip(s);else return u=s.lanes=536870912,em(n,s,g!==null?g.baseLanes|l:l,l,u)}else g!==null?(na(s,g.cachePool),np(s,g),hi(),s.memoizedState=null):(n!==null&&na(s,null),$u(),hi());return Tt(n,s,h,l),s.child}function ko(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function em(n,s,l,u,h){var g=Hu();return g=g===null?null:{parent:ot._currentValue,pool:g},s.memoizedState={baseLanes:l,cachePool:g},n!==null&&na(s,null),$u(),ip(s),n!==null&&Ts(n,s,u,!0),s.childLanes=h,null}function va(n,s){return s=Sa({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function tm(n,s,l){return Ji(s,n.child,null,l),n=va(s,s.pendingProps),n.flags|=2,$t(s),s.memoizedState=null,n}function aE(n,s,l){var u=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Ne){if(u.mode==="hidden")return n=va(s,u),s.lanes=536870912,ko(null,n);if(Yu(s),(n=Je)?(n=hg(n,on),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:oi!==null?{id:An,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},l=kh(n),l.return=s,s.child=l,_t=s,Je=null)):n=null,n===null)throw ai(s);return s.lanes=536870912,null}return va(s,u)}var g=n.memoizedState;if(g!==null){var S=g.dehydrated;if(Yu(s),h)if(s.flags&256)s.flags&=-257,s=tm(n,s,l);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(o(558));else if(at||Ts(n,s,l,!1),h=(l&n.childLanes)!==0,at||h){if(u=Fe,u!==null&&(S=$d(u,l),S!==0&&S!==g.retryLane))throw g.retryLane=S,ki(n,S),qt(u,n,S),pc;Na(),s=tm(n,s,l)}else n=g.treeContext,Je=an(S.nextSibling),_t=s,Ne=!0,li=null,on=!1,n!==null&&Bh(s,n),s=va(s,u),s.flags|=4096;return s}return n=On(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function _a(n,s){var l=s.ref;if(l===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(o(284));(n===null||n.ref!==l)&&(s.flags|=4194816)}}function mc(n,s,l,u,h){return Vi(s),l=Xu(n,s,l,u,void 0,h),u=Qu(),n!==null&&!at?(Zu(n,s,h),Bn(n,s,h)):(Ne&&u&&Mu(s),s.flags|=1,Tt(n,s,l,h),s.child)}function nm(n,s,l,u,h,g){return Vi(s),s.updateQueue=null,l=op(s,u,l,h),sp(n),u=Qu(),n!==null&&!at?(Zu(n,s,g),Bn(n,s,g)):(Ne&&u&&Mu(s),s.flags|=1,Tt(n,s,l,g),s.child)}function im(n,s,l,u,h){if(Vi(s),s.stateNode===null){var g=ys,S=l.contextType;typeof S=="object"&&S!==null&&(g=St(S)),g=new l(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=dc,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},Bu(s),S=l.contextType,g.context=typeof S=="object"&&S!==null?St(S):ys,g.state=s.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(fc(s,l,S,u),g.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&dc.enqueueReplaceState(g,g.state,null),Uo(s,u,g,h),Do(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){g=s.stateNode;var E=s.memoizedProps,R=Ki(l,E);g.props=R;var L=g.context,z=l.contextType;S=ys,typeof z=="object"&&z!==null&&(S=St(z));var J=l.getDerivedStateFromProps;z=typeof J=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||L!==S)&&zp(s,g,u,S),ui=!1;var k=s.memoizedState;g.state=k,Uo(s,u,g,h),Do(),L=s.memoizedState,E||k!==L||ui?(typeof J=="function"&&(fc(s,l,J,u),L=s.memoizedState),(R=ui||Vp(s,l,R,u,k,L,S))?(z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=L),g.props=u,g.state=L,g.context=S,u=R):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,Vu(n,s),S=s.memoizedProps,z=Ki(l,S),g.props=z,J=s.pendingProps,k=g.context,L=l.contextType,R=ys,typeof L=="object"&&L!==null&&(R=St(L)),E=l.getDerivedStateFromProps,(L=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==J||k!==R)&&zp(s,g,u,R),ui=!1,k=s.memoizedState,g.state=k,Uo(s,u,g,h),Do();var B=s.memoizedState;S!==J||k!==B||ui||n!==null&&n.dependencies!==null&&ea(n.dependencies)?(typeof E=="function"&&(fc(s,l,E,u),B=s.memoizedState),(z=ui||Vp(s,l,z,u,k,B,R)||n!==null&&n.dependencies!==null&&ea(n.dependencies))?(L||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,B,R),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,B,R)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===n.memoizedProps&&k===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&k===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=B),g.props=u,g.state=B,g.context=R,u=z):(typeof g.componentDidUpdate!="function"||S===n.memoizedProps&&k===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&k===n.memoizedState||(s.flags|=1024),u=!1)}return g=u,_a(n,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&u?(s.child=Ji(s,n.child,null,h),s.child=Ji(s,null,l,h)):Tt(n,s,l,h),s.memoizedState=g.state,n=s.child):n=Bn(n,s,h),n}function sm(n,s,l,u){return qi(),s.flags|=256,Tt(n,s,l,u),s.child}var gc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yc(n){return{baseLanes:n,cachePool:Yh()}}function vc(n,s,l){return n=n!==null?n.childLanes&~l:0,s&&(n|=Yt),n}function om(n,s,l){var u=s.pendingProps,h=!1,g=(s.flags&128)!==0,S;if((S=g)||(S=n!==null&&n.memoizedState===null?!1:(nt.current&2)!==0),S&&(h=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ne){if(h?di(s):hi(),(n=Je)?(n=hg(n,on),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:oi!==null?{id:An,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},l=kh(n),l.return=s,s.child=l,_t=s,Je=null)):n=null,n===null)throw ai(s);return ef(n)?s.lanes=32:s.lanes=536870912,null}var E=u.children;return u=u.fallback,h?(hi(),h=s.mode,E=Sa({mode:"hidden",children:E},h),u=Hi(u,h,l,null),E.return=s,u.return=s,E.sibling=u,s.child=E,u=s.child,u.memoizedState=yc(l),u.childLanes=vc(n,S,l),s.memoizedState=gc,ko(null,u)):(di(s),_c(s,E))}var R=n.memoizedState;if(R!==null&&(E=R.dehydrated,E!==null)){if(g)s.flags&256?(di(s),s.flags&=-257,s=Sc(n,s,l)):s.memoizedState!==null?(hi(),s.child=n.child,s.flags|=128,s=null):(hi(),E=u.fallback,h=s.mode,u=Sa({mode:"visible",children:u.children},h),E=Hi(E,h,l,null),E.flags|=2,u.return=s,E.return=s,u.sibling=E,s.child=u,Ji(s,n.child,null,l),u=s.child,u.memoizedState=yc(l),u.childLanes=vc(n,S,l),s.memoizedState=gc,s=ko(null,u));else if(di(s),ef(E)){if(S=E.nextSibling&&E.nextSibling.dataset,S)var L=S.dgst;S=L,u=Error(o(419)),u.stack="",u.digest=S,bo({value:u,source:null,stack:null}),s=Sc(n,s,l)}else if(at||Ts(n,s,l,!1),S=(l&n.childLanes)!==0,at||S){if(S=Fe,S!==null&&(u=$d(S,l),u!==0&&u!==R.retryLane))throw R.retryLane=u,ki(n,u),qt(S,n,u),pc;jc(E)||Na(),s=Sc(n,s,l)}else jc(E)?(s.flags|=192,s.child=n.child,s=null):(n=R.treeContext,Je=an(E.nextSibling),_t=s,Ne=!0,li=null,on=!1,n!==null&&Bh(s,n),s=_c(s,u.children),s.flags|=4096);return s}return h?(hi(),E=u.fallback,h=s.mode,R=n.child,L=R.sibling,u=On(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,L!==null?E=On(L,E):(E=Hi(E,h,l,null),E.flags|=2),E.return=s,u.return=s,u.sibling=E,s.child=u,ko(null,u),u=s.child,E=n.child.memoizedState,E===null?E=yc(l):(h=E.cachePool,h!==null?(R=ot._currentValue,h=h.parent!==R?{parent:R,pool:R}:h):h=Yh(),E={baseLanes:E.baseLanes|l,cachePool:h}),u.memoizedState=E,u.childLanes=vc(n,S,l),s.memoizedState=gc,ko(n.child,u)):(di(s),l=n.child,n=l.sibling,l=On(l,{mode:"visible",children:u.children}),l.return=s,l.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=l,s.memoizedState=null,l)}function _c(n,s){return s=Sa({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Sa(n,s){return n=zt(22,n,null,s),n.lanes=0,n}function Sc(n,s,l){return Ji(s,n.child,null,l),n=_c(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function lm(n,s,l){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Ou(n.return,s,l)}function Tc(n,s,l,u,h,g){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:h,treeForkCount:g}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=l,S.tailMode=h,S.treeForkCount=g)}function am(n,s,l){var u=s.pendingProps,h=u.revealOrder,g=u.tail;u=u.children;var S=nt.current,E=(S&2)!==0;if(E?(S=S&1|2,s.flags|=128):S&=1,W(nt,S),Tt(n,s,u,l),u=Ne?xo:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&lm(n,l,s);else if(n.tag===19)lm(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(h){case"forwards":for(l=s.child,h=null;l!==null;)n=l.alternate,n!==null&&ra(n)===null&&(h=l),l=l.sibling;l=h,l===null?(h=s.child,s.child=null):(h=l.sibling,l.sibling=null),Tc(s,!1,h,l,g,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&ra(n)===null){s.child=h;break}n=h.sibling,h.sibling=l,l=h,h=n}Tc(s,!0,l,null,g,u);break;case"together":Tc(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Bn(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),gi|=s.lanes,(l&s.childLanes)===0)if(n!==null){if(Ts(n,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(o(153));if(s.child!==null){for(n=s.child,l=On(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=On(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function Ec(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&ea(n)))}function rE(n,s,l){switch(s.tag){case 3:yt(s,s.stateNode.containerInfo),ri(s,ot,n.memoizedState.cache),qi();break;case 27:case 5:Mi(s);break;case 4:yt(s,s.stateNode.containerInfo);break;case 10:ri(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Yu(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(di(s),s.flags|=128,null):(l&s.child.childLanes)!==0?om(n,s,l):(di(s),n=Bn(n,s,l),n!==null?n.sibling:null);di(s);break;case 19:var h=(n.flags&128)!==0;if(u=(l&s.childLanes)!==0,u||(Ts(n,s,l,!1),u=(l&s.childLanes)!==0),h){if(u)return am(n,s,l);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),W(nt,nt.current),u)break;return null;case 22:return s.lanes=0,jp(n,s,l,s.pendingProps);case 24:ri(s,ot,n.memoizedState.cache)}return Bn(n,s,l)}function rm(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps)at=!0;else{if(!Ec(n,l)&&(s.flags&128)===0)return at=!1,rE(n,s,l);at=(n.flags&131072)!==0}else at=!1,Ne&&(s.flags&1048576)!==0&&qh(s,xo,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Fi(s.elementType),s.type=n,typeof n=="function")wu(n)?(u=Ki(n,u),s.tag=1,s=im(null,s,n,u,l)):(s.tag=0,s=mc(null,s,n,u,l));else{if(n!=null){var h=n.$$typeof;if(h===O){s.tag=11,s=Qp(null,s,n,u,l);break e}else if(h===$){s.tag=14,s=Zp(null,s,n,u,l);break e}}throw s=Ge(n)||n,Error(o(306,s,""))}}return s;case 0:return mc(n,s,s.type,s.pendingProps,l);case 1:return u=s.type,h=Ki(u,s.pendingProps),im(n,s,u,h,l);case 3:e:{if(yt(s,s.stateNode.containerInfo),n===null)throw Error(o(387));u=s.pendingProps;var g=s.memoizedState;h=g.element,Vu(n,s),Uo(s,u,null,l);var S=s.memoizedState;if(u=S.cache,ri(s,ot,u),u!==g.cache&&Gu(s,[ot],l,!0),Do(),u=S.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=sm(n,s,u,l);break e}else if(u!==h){h=tn(Error(o(424)),s),bo(h),s=sm(n,s,u,l);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Je=an(n.firstChild),_t=s,Ne=!0,li=null,on=!0,l=jh(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(qi(),u===h){s=Bn(n,s,l);break e}Tt(n,s,u,l)}s=s.child}return s;case 26:return _a(n,s),n===null?(l=_g(s.type,null,s.pendingProps,null))?s.memoizedState=l:Ne||(l=s.type,n=s.pendingProps,u=Ga(Ee.current).createElement(l),u[vt]=s,u[Lt]=n,Et(u,l,n),ht(u),s.stateNode=u):s.memoizedState=_g(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Mi(s),n===null&&Ne&&(u=s.stateNode=gg(s.type,s.pendingProps,Ee.current),_t=s,on=!0,h=Je,Ti(s.type)?(tf=h,Je=an(u.firstChild)):Je=h),Tt(n,s,s.pendingProps.children,l),_a(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ne&&((h=u=Je)&&(u=kE(u,s.type,s.pendingProps,on),u!==null?(s.stateNode=u,_t=s,Je=an(u.firstChild),on=!1,h=!0):h=!1),h||ai(s)),Mi(s),h=s.type,g=s.pendingProps,S=n!==null?n.memoizedProps:null,u=g.children,Qc(h,g)?u=null:S!==null&&Qc(h,S)&&(s.flags|=32),s.memoizedState!==null&&(h=Xu(n,s,jT,null,null,l),jo._currentValue=h),_a(n,s),Tt(n,s,u,l),s.child;case 6:return n===null&&Ne&&((n=l=Je)&&(l=HE(l,s.pendingProps,on),l!==null?(s.stateNode=l,_t=s,Je=null,n=!0):n=!1),n||ai(s)),null;case 13:return om(n,s,l);case 4:return yt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Ji(s,null,u,l):Tt(n,s,u,l),s.child;case 11:return Qp(n,s,s.type,s.pendingProps,l);case 7:return Tt(n,s,s.pendingProps,l),s.child;case 8:return Tt(n,s,s.pendingProps.children,l),s.child;case 12:return Tt(n,s,s.pendingProps.children,l),s.child;case 10:return u=s.pendingProps,ri(s,s.type,u.value),Tt(n,s,u.children,l),s.child;case 9:return h=s.type._context,u=s.pendingProps.children,Vi(s),h=St(h),u=u(h),s.flags|=1,Tt(n,s,u,l),s.child;case 14:return Zp(n,s,s.type,s.pendingProps,l);case 15:return Wp(n,s,s.type,s.pendingProps,l);case 19:return am(n,s,l);case 31:return aE(n,s,l);case 22:return jp(n,s,l,s.pendingProps);case 24:return Vi(s),u=St(ot),n===null?(h=Hu(),h===null&&(h=Fe,g=Pu(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=l),h=g),s.memoizedState={parent:u,cache:h},Bu(s),ri(s,ot,h)):((n.lanes&l)!==0&&(Vu(n,s),Uo(s,null,null,l),Do()),h=n.memoizedState,g=s.memoizedState,h.parent!==u?(h={parent:u,cache:u},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),ri(s,ot,u)):(u=g.cache,ri(s,ot,u),u!==h.cache&&Gu(s,[ot],l,!0))),Tt(n,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Vn(n){n.flags|=4}function Cc(n,s,l,u,h){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(h&335544128)===h)if(n.stateNode.complete)n.flags|=8192;else if(Om())n.flags|=8192;else throw $i=sa,qu}else n.flags&=-16777217}function um(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Ag(s))if(Om())n.flags|=8192;else throw $i=sa,qu}function Ta(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Vd():536870912,n.lanes|=s,Us|=s)}function Ho(n,s){if(!Ne)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Ye(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,u=0;if(s)for(var h=n.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=u,n.childLanes=l,s}function uE(n,s,l){var u=s.pendingProps;switch(Iu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(s),null;case 1:return Ye(s),null;case 3:return l=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),kn(ot),Qe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Ss(s)?Vn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Uu())),Ye(s),null;case 26:var h=s.type,g=s.memoizedState;return n===null?(Vn(s),g!==null?(Ye(s),um(s,g)):(Ye(s),Cc(s,h,null,u,l))):g?g!==n.memoizedState?(Vn(s),Ye(s),um(s,g)):(Ye(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Vn(s),Ye(s),Cc(s,h,n,u,l)),null;case 27:if(Ii(s),l=Ee.current,h=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Vn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Ye(s),null}n=se.current,Ss(s)?Vh(s):(n=gg(h,u,l),s.stateNode=n,Vn(s))}return Ye(s),null;case 5:if(Ii(s),h=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Vn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Ye(s),null}if(g=se.current,Ss(s))Vh(s);else{var S=Ga(Ee.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?S.createElement(h,{is:u.is}):S.createElement(h)}}g[vt]=s,g[Lt]=u;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=g;e:switch(Et(g,h,u),h){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Vn(s)}}return Ye(s),Cc(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,l),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Vn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(n=Ee.current,Ss(s)){if(n=s.stateNode,l=s.memoizedProps,u=null,h=_t,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}n[vt]=s,n=!!(n.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||og(n.nodeValue,l)),n||ai(s,!0)}else n=Ga(n).createTextNode(u),n[vt]=s,s.stateNode=n}return Ye(s),null;case 31:if(l=s.memoizedState,n===null||n.memoizedState!==null){if(u=Ss(s),l!==null){if(n===null){if(!u)throw Error(o(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[vt]=s}else qi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ye(s),n=!1}else l=Uu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return s.flags&256?($t(s),s):($t(s),null);if((s.flags&128)!==0)throw Error(o(558))}return Ye(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=Ss(s),u!==null&&u.dehydrated!==null){if(n===null){if(!h)throw Error(o(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));h[vt]=s}else qi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ye(s),h=!1}else h=Uu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?($t(s),s):($t(s),null)}return $t(s),(s.flags&128)!==0?(s.lanes=l,s):(l=u!==null,n=n!==null&&n.memoizedState!==null,l&&(u=s.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==h&&(u.flags|=2048)),l!==n&&l&&(s.child.flags|=8192),Ta(s,s.updateQueue),Ye(s),null);case 4:return Qe(),n===null&&$c(s.stateNode.containerInfo),Ye(s),null;case 10:return kn(s.type),Ye(s),null;case 19:if(Y(nt),u=s.memoizedState,u===null)return Ye(s),null;if(h=(s.flags&128)!==0,g=u.rendering,g===null)if(h)Ho(u,!1);else{if(tt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=ra(n),g!==null){for(s.flags|=128,Ho(u,!1),n=g.updateQueue,s.updateQueue=n,Ta(s,n),s.subtreeFlags=0,n=l,l=s.child;l!==null;)Ph(l,n),l=l.sibling;return W(nt,nt.current&1|2),Ne&&Gn(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&je()>ba&&(s.flags|=128,h=!0,Ho(u,!1),s.lanes=4194304)}else{if(!h)if(n=ra(g),n!==null){if(s.flags|=128,h=!0,n=n.updateQueue,s.updateQueue=n,Ta(s,n),Ho(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Ne)return Ye(s),null}else 2*je()-u.renderingStartTime>ba&&l!==536870912&&(s.flags|=128,h=!0,Ho(u,!1),s.lanes=4194304);u.isBackwards?(g.sibling=s.child,s.child=g):(n=u.last,n!==null?n.sibling=g:s.child=g,u.last=g)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=je(),n.sibling=null,l=nt.current,W(nt,h?l&1|2:l&1),Ne&&Gn(s,u.treeForkCount),n):(Ye(s),null);case 22:case 23:return $t(s),Ju(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(l&536870912)!==0&&(s.flags&128)===0&&(Ye(s),s.subtreeFlags&6&&(s.flags|=8192)):Ye(s),l=s.updateQueue,l!==null&&Ta(s,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048),n!==null&&Y(zi),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),kn(ot),Ye(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function cE(n,s){switch(Iu(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return kn(ot),Qe(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ii(s),null;case 31:if(s.memoizedState!==null){if($t(s),s.alternate===null)throw Error(o(340));qi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if($t(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(o(340));qi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Y(nt),null;case 4:return Qe(),null;case 10:return kn(s.type),null;case 22:case 23:return $t(s),Ju(),n!==null&&Y(zi),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return kn(ot),null;case 25:return null;default:return null}}function cm(n,s){switch(Iu(s),s.tag){case 3:kn(ot),Qe();break;case 26:case 27:case 5:Ii(s);break;case 4:Qe();break;case 31:s.memoizedState!==null&&$t(s);break;case 13:$t(s);break;case 19:Y(nt);break;case 10:kn(s.type);break;case 22:case 23:$t(s),Ju(),n!==null&&Y(zi);break;case 24:kn(ot)}}function qo(n,s){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var h=u.next;l=h;do{if((l.tag&n)===n){u=void 0;var g=l.create,S=l.inst;u=g(),S.destroy=u}l=l.next}while(l!==h)}}catch(E){qe(s,s.return,E)}}function pi(n,s,l){try{var u=s.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var g=h.next;u=g;do{if((u.tag&n)===n){var S=u.inst,E=S.destroy;if(E!==void 0){S.destroy=void 0,h=s;var R=l,L=E;try{L()}catch(z){qe(h,R,z)}}}u=u.next}while(u!==g)}}catch(z){qe(s,s.return,z)}}function fm(n){var s=n.updateQueue;if(s!==null){var l=n.stateNode;try{tp(s,l)}catch(u){qe(n,n.return,u)}}}function dm(n,s,l){l.props=Ki(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(u){qe(n,s,u)}}function Bo(n,s){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof l=="function"?n.refCleanup=l(u):l.current=u}}catch(h){qe(n,s,h)}}function bn(n,s){var l=n.ref,u=n.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(h){qe(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(h){qe(n,s,h)}else l.current=null}function hm(n){var s=n.type,l=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(h){qe(n,n.return,h)}}function Ac(n,s,l){try{var u=n.stateNode;DE(u,n.type,l,s),u[Lt]=s}catch(h){qe(n,n.return,h)}}function pm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ti(n.type)||n.tag===4}function xc(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||pm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ti(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function bc(n,s,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(n),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Un));else if(u!==4&&(u===27&&Ti(n.type)&&(l=n.stateNode,s=null),n=n.child,n!==null))for(bc(n,s,l),n=n.sibling;n!==null;)bc(n,s,l),n=n.sibling}function Ea(n,s,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(u!==4&&(u===27&&Ti(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Ea(n,s,l),n=n.sibling;n!==null;)Ea(n,s,l),n=n.sibling}function mm(n){var s=n.stateNode,l=n.memoizedProps;try{for(var u=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Et(s,u,l),s[vt]=n,s[Lt]=l}catch(g){qe(n,n.return,g)}}var zn=!1,rt=!1,wc=!1,gm=typeof WeakSet=="function"?WeakSet:Set,pt=null;function fE(n,s){if(n=n.containerInfo,Kc=za,n=Rh(n),Su(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var h=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var S=0,E=-1,R=-1,L=0,z=0,J=n,k=null;t:for(;;){for(var B;J!==l||h!==0&&J.nodeType!==3||(E=S+h),J!==g||u!==0&&J.nodeType!==3||(R=S+u),J.nodeType===3&&(S+=J.nodeValue.length),(B=J.firstChild)!==null;)k=J,J=B;for(;;){if(J===n)break t;if(k===l&&++L===h&&(E=S),k===g&&++z===u&&(R=S),(B=J.nextSibling)!==null)break;J=k,k=J.parentNode}J=B}l=E===-1||R===-1?null:{start:E,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(Xc={focusedElem:n,selectionRange:l},za=!1,pt=s;pt!==null;)if(s=pt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,pt=n;else for(;pt!==null;){switch(s=pt,g=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)h=n[l],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,l=s,h=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var te=Ki(l.type,h);n=u.getSnapshotBeforeUpdate(te,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(de){qe(l,l.return,de)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,l=n.nodeType,l===9)Wc(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Wc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=s.sibling,n!==null){n.return=s.return,pt=n;break}pt=s.return}}function ym(n,s,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:$n(n,l),u&4&&qo(5,l);break;case 1:if($n(n,l),u&4)if(n=l.stateNode,s===null)try{n.componentDidMount()}catch(S){qe(l,l.return,S)}else{var h=Ki(l.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){qe(l,l.return,S)}}u&64&&fm(l),u&512&&Bo(l,l.return);break;case 3:if($n(n,l),u&64&&(n=l.updateQueue,n!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{tp(n,s)}catch(S){qe(l,l.return,S)}}break;case 27:s===null&&u&4&&mm(l);case 26:case 5:$n(n,l),s===null&&u&4&&hm(l),u&512&&Bo(l,l.return);break;case 12:$n(n,l);break;case 31:$n(n,l),u&4&&Sm(n,l);break;case 13:$n(n,l),u&4&&Tm(n,l),u&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=SE.bind(null,l),qE(n,l))));break;case 22:if(u=l.memoizedState!==null||zn,!u){s=s!==null&&s.memoizedState!==null||rt,h=zn;var g=rt;zn=u,(rt=s)&&!g?Jn(n,l,(l.subtreeFlags&8772)!==0):$n(n,l),zn=h,rt=g}break;case 30:break;default:$n(n,l)}}function vm(n){var s=n.alternate;s!==null&&(n.alternate=null,vm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&iu(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Xe=null,Gt=!1;function Fn(n,s,l){for(l=l.child;l!==null;)_m(n,s,l),l=l.sibling}function _m(n,s,l){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Di,l)}catch{}switch(l.tag){case 26:rt||bn(l,s),Fn(n,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:rt||bn(l,s);var u=Xe,h=Gt;Ti(l.type)&&(Xe=l.stateNode,Gt=!1),Fn(n,s,l),Qo(l.stateNode),Xe=u,Gt=h;break;case 5:rt||bn(l,s);case 6:if(u=Xe,h=Gt,Xe=null,Fn(n,s,l),Xe=u,Gt=h,Xe!==null)if(Gt)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(l.stateNode)}catch(g){qe(l,s,g)}else try{Xe.removeChild(l.stateNode)}catch(g){qe(l,s,g)}break;case 18:Xe!==null&&(Gt?(n=Xe,fg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),Bs(n)):fg(Xe,l.stateNode));break;case 4:u=Xe,h=Gt,Xe=l.stateNode.containerInfo,Gt=!0,Fn(n,s,l),Xe=u,Gt=h;break;case 0:case 11:case 14:case 15:pi(2,l,s),rt||pi(4,l,s),Fn(n,s,l);break;case 1:rt||(bn(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"&&dm(l,s,u)),Fn(n,s,l);break;case 21:Fn(n,s,l);break;case 22:rt=(u=rt)||l.memoizedState!==null,Fn(n,s,l),rt=u;break;default:Fn(n,s,l)}}function Sm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Bs(n)}catch(l){qe(s,s.return,l)}}}function Tm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Bs(n)}catch(l){qe(s,s.return,l)}}function dE(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new gm),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new gm),s;default:throw Error(o(435,n.tag))}}function Ca(n,s){var l=dE(n);s.forEach(function(u){if(!l.has(u)){l.add(u);var h=TE.bind(null,n,u);u.then(h,h)}})}function Pt(n,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var h=l[u],g=n,S=s,E=S;e:for(;E!==null;){switch(E.tag){case 27:if(Ti(E.type)){Xe=E.stateNode,Gt=!1;break e}break;case 5:Xe=E.stateNode,Gt=!1;break e;case 3:case 4:Xe=E.stateNode.containerInfo,Gt=!0;break e}E=E.return}if(Xe===null)throw Error(o(160));_m(g,S,h),Xe=null,Gt=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Em(s,n),s=s.sibling}var mn=null;function Em(n,s){var l=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pt(s,n),kt(n),u&4&&(pi(3,n,n.return),qo(3,n),pi(5,n,n.return));break;case 1:Pt(s,n),kt(n),u&512&&(rt||l===null||bn(l,l.return)),u&64&&zn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var h=mn;if(Pt(s,n),kt(n),u&512&&(rt||l===null||bn(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=n.memoizedState,l===null)if(u===null)if(n.stateNode===null){e:{u=n.type,l=n.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":g=h.getElementsByTagName("title")[0],(!g||g[po]||g[vt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(u),h.head.insertBefore(g,h.querySelector("head > title"))),Et(g,u,l),g[vt]=n,ht(g),u=g;break e;case"link":var S=Eg("link","href",h).get(u+(l.href||""));if(S){for(var E=0;E<S.length;E++)if(g=S[E],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(E,1);break t}}g=h.createElement(u),Et(g,u,l),h.head.appendChild(g);break;case"meta":if(S=Eg("meta","content",h).get(u+(l.content||""))){for(E=0;E<S.length;E++)if(g=S[E],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(E,1);break t}}g=h.createElement(u),Et(g,u,l),h.head.appendChild(g);break;default:throw Error(o(468,u))}g[vt]=n,ht(g),u=g}n.stateNode=u}else Cg(h,n.type,n.stateNode);else n.stateNode=Tg(h,u,n.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?Cg(h,n.type,n.stateNode):Tg(h,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Ac(n,n.memoizedProps,l.memoizedProps)}break;case 27:Pt(s,n),kt(n),u&512&&(rt||l===null||bn(l,l.return)),l!==null&&u&4&&Ac(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Pt(s,n),kt(n),u&512&&(rt||l===null||bn(l,l.return)),n.flags&32){h=n.stateNode;try{cs(h,"")}catch(te){qe(n,n.return,te)}}u&4&&n.stateNode!=null&&(h=n.memoizedProps,Ac(n,h,l!==null?l.memoizedProps:h)),u&1024&&(wc=!0);break;case 6:if(Pt(s,n),kt(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,l=n.stateNode;try{l.nodeValue=u}catch(te){qe(n,n.return,te)}}break;case 3:if(Ha=null,h=mn,mn=Pa(s.containerInfo),Pt(s,n),mn=h,kt(n),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Bs(s.containerInfo)}catch(te){qe(n,n.return,te)}wc&&(wc=!1,Cm(n));break;case 4:u=mn,mn=Pa(n.stateNode.containerInfo),Pt(s,n),kt(n),mn=u;break;case 12:Pt(s,n),kt(n);break;case 31:Pt(s,n),kt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ca(n,u)));break;case 13:Pt(s,n),kt(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(xa=je()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ca(n,u)));break;case 22:h=n.memoizedState!==null;var R=l!==null&&l.memoizedState!==null,L=zn,z=rt;if(zn=L||h,rt=z||R,Pt(s,n),rt=z,zn=L,kt(n),u&8192)e:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(l===null||R||zn||rt||Xi(n)),l=null,s=n;;){if(s.tag===5||s.tag===26){if(l===null){R=l=s;try{if(g=R.stateNode,h)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{E=R.stateNode;var J=R.memoizedProps.style,k=J!=null&&J.hasOwnProperty("display")?J.display:null;E.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(te){qe(R,R.return,te)}}}else if(s.tag===6){if(l===null){R=s;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(te){qe(R,R.return,te)}}}else if(s.tag===18){if(l===null){R=s;try{var B=R.stateNode;h?dg(B,!0):dg(R.stateNode,!1)}catch(te){qe(R,R.return,te)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Ca(n,l))));break;case 19:Pt(s,n),kt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Ca(n,u)));break;case 30:break;case 21:break;default:Pt(s,n),kt(n)}}function kt(n){var s=n.flags;if(s&2){try{for(var l,u=n.return;u!==null;){if(pm(u)){l=u;break}u=u.return}if(l==null)throw Error(o(160));switch(l.tag){case 27:var h=l.stateNode,g=xc(n);Ea(n,g,h);break;case 5:var S=l.stateNode;l.flags&32&&(cs(S,""),l.flags&=-33);var E=xc(n);Ea(n,E,S);break;case 3:case 4:var R=l.stateNode.containerInfo,L=xc(n);bc(n,L,R);break;default:throw Error(o(161))}}catch(z){qe(n,n.return,z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Cm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Cm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function $n(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ym(n,s.alternate,s),s=s.sibling}function Xi(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:pi(4,s,s.return),Xi(s);break;case 1:bn(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&dm(s,s.return,l),Xi(s);break;case 27:Qo(s.stateNode);case 26:case 5:bn(s,s.return),Xi(s);break;case 22:s.memoizedState===null&&Xi(s);break;case 30:Xi(s);break;default:Xi(s)}n=n.sibling}}function Jn(n,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,h=n,g=s,S=g.flags;switch(g.tag){case 0:case 11:case 15:Jn(h,g,l),qo(4,g);break;case 1:if(Jn(h,g,l),u=g,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){qe(u,u.return,L)}if(u=g,h=u.updateQueue,h!==null){var E=u.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)ep(R[h],E)}catch(L){qe(u,u.return,L)}}l&&S&64&&fm(g),Bo(g,g.return);break;case 27:mm(g);case 26:case 5:Jn(h,g,l),l&&u===null&&S&4&&hm(g),Bo(g,g.return);break;case 12:Jn(h,g,l);break;case 31:Jn(h,g,l),l&&S&4&&Sm(h,g);break;case 13:Jn(h,g,l),l&&S&4&&Tm(h,g);break;case 22:g.memoizedState===null&&Jn(h,g,l),Bo(g,g.return);break;case 30:break;default:Jn(h,g,l)}s=s.sibling}}function Rc(n,s){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&wo(l))}function Nc(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&wo(n))}function gn(n,s,l,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Am(n,s,l,u),s=s.sibling}function Am(n,s,l,u){var h=s.flags;switch(s.tag){case 0:case 11:case 15:gn(n,s,l,u),h&2048&&qo(9,s);break;case 1:gn(n,s,l,u);break;case 3:gn(n,s,l,u),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&wo(n)));break;case 12:if(h&2048){gn(n,s,l,u),n=s.stateNode;try{var g=s.memoizedProps,S=g.id,E=g.onPostCommit;typeof E=="function"&&E(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){qe(s,s.return,R)}}else gn(n,s,l,u);break;case 31:gn(n,s,l,u);break;case 13:gn(n,s,l,u);break;case 23:break;case 22:g=s.stateNode,S=s.alternate,s.memoizedState!==null?g._visibility&2?gn(n,s,l,u):Vo(n,s):g._visibility&2?gn(n,s,l,u):(g._visibility|=2,Ms(n,s,l,u,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Rc(S,s);break;case 24:gn(n,s,l,u),h&2048&&Nc(s.alternate,s);break;default:gn(n,s,l,u)}}function Ms(n,s,l,u,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=n,S=s,E=l,R=u,L=S.flags;switch(S.tag){case 0:case 11:case 15:Ms(g,S,E,R,h),qo(8,S);break;case 23:break;case 22:var z=S.stateNode;S.memoizedState!==null?z._visibility&2?Ms(g,S,E,R,h):Vo(g,S):(z._visibility|=2,Ms(g,S,E,R,h)),h&&L&2048&&Rc(S.alternate,S);break;case 24:Ms(g,S,E,R,h),h&&L&2048&&Nc(S.alternate,S);break;default:Ms(g,S,E,R,h)}s=s.sibling}}function Vo(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=n,u=s,h=u.flags;switch(u.tag){case 22:Vo(l,u),h&2048&&Rc(u.alternate,u);break;case 24:Vo(l,u),h&2048&&Nc(u.alternate,u);break;default:Vo(l,u)}s=s.sibling}}var zo=8192;function Is(n,s,l){if(n.subtreeFlags&zo)for(n=n.child;n!==null;)xm(n,s,l),n=n.sibling}function xm(n,s,l){switch(n.tag){case 26:Is(n,s,l),n.flags&zo&&n.memoizedState!==null&&WE(l,mn,n.memoizedState,n.memoizedProps);break;case 5:Is(n,s,l);break;case 3:case 4:var u=mn;mn=Pa(n.stateNode.containerInfo),Is(n,s,l),mn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=zo,zo=16777216,Is(n,s,l),zo=u):Is(n,s,l));break;default:Is(n,s,l)}}function bm(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Fo(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];pt=u,Rm(u,n)}bm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)wm(n),n=n.sibling}function wm(n){switch(n.tag){case 0:case 11:case 15:Fo(n),n.flags&2048&&pi(9,n,n.return);break;case 3:Fo(n);break;case 12:Fo(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Aa(n)):Fo(n);break;default:Fo(n)}}function Aa(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];pt=u,Rm(u,n)}bm(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:pi(8,s,s.return),Aa(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Aa(s));break;default:Aa(s)}n=n.sibling}}function Rm(n,s){for(;pt!==null;){var l=pt;switch(l.tag){case 0:case 11:case 15:pi(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:wo(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,pt=u;else e:for(l=n;pt!==null;){u=pt;var h=u.sibling,g=u.return;if(vm(u),u===l){pt=null;break e}if(h!==null){h.return=g,pt=h;break e}pt=g}}}var hE={getCacheForType:function(n){var s=St(ot),l=s.data.get(n);return l===void 0&&(l=n(),s.data.set(n,l)),l},cacheSignal:function(){return St(ot).controller.signal}},pE=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Fe=null,Ae=null,be=0,He=0,Jt=null,mi=!1,Ds=!1,Mc=!1,Yn=0,tt=0,gi=0,Qi=0,Ic=0,Yt=0,Us=0,$o=null,Ht=null,Dc=!1,xa=0,Nm=0,ba=1/0,wa=null,yi=null,ct=0,vi=null,Ls=null,Kn=0,Uc=0,Lc=null,Mm=null,Jo=0,Oc=null;function Kt(){return(Oe&2)!==0&&be!==0?be&-be:V.T!==null?Bc():Jd()}function Im(){if(Yt===0)if((be&536870912)===0||Ne){var n=Ol;Ol<<=1,(Ol&3932160)===0&&(Ol=262144),Yt=n}else Yt=536870912;return n=Ft.current,n!==null&&(n.flags|=32),Yt}function qt(n,s,l){(n===Fe&&(He===2||He===9)||n.cancelPendingCommit!==null)&&(Os(n,0),_i(n,be,Yt,!1)),ho(n,l),((Oe&2)===0||n!==Fe)&&(n===Fe&&((Oe&2)===0&&(Qi|=l),tt===4&&_i(n,be,Yt,!1)),wn(n))}function Dm(n,s,l){if((Oe&6)!==0)throw Error(o(327));var u=!l&&(s&127)===0&&(s&n.expiredLanes)===0||fo(n,s),h=u?yE(n,s):Pc(n,s,!0),g=u;do{if(h===0){Ds&&!u&&_i(n,s,0,!1);break}else{if(l=n.current.alternate,g&&!mE(l)){h=Pc(n,s,!1),g=!1;continue}if(h===2){if(g=s,n.errorRecoveryDisabledLanes&g)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var E=n;h=$o;var R=E.current.memoizedState.isDehydrated;if(R&&(Os(E,S).flags|=256),S=Pc(E,S,!1),S!==2){if(Mc&&!R){E.errorRecoveryDisabledLanes|=g,Qi|=g,h=4;break e}g=Ht,Ht=h,g!==null&&(Ht===null?Ht=g:Ht.push.apply(Ht,g))}h=S}if(g=!1,h!==2)continue}}if(h===1){Os(n,0),_i(n,s,0,!0);break}e:{switch(u=n,g=h,g){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:_i(u,s,Yt,!mi);break e;case 2:Ht=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(h=xa+300-je(),10<h)){if(_i(u,s,Yt,!mi),Pl(u,0,!0)!==0)break e;Kn=s,u.timeoutHandle=ug(Um.bind(null,u,l,Ht,wa,Dc,s,Yt,Qi,Us,mi,g,"Throttled",-0,0),h);break e}Um(u,l,Ht,wa,Dc,s,Yt,Qi,Us,mi,g,null,-0,0)}}break}while(!0);wn(n)}function Um(n,s,l,u,h,g,S,E,R,L,z,J,k,B){if(n.timeoutHandle=-1,J=s.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Un},xm(s,g,J);var te=(g&62914560)===g?xa-je():(g&4194048)===g?Nm-je():0;if(te=jE(J,te),te!==null){Kn=g,n.cancelPendingCommit=te(Bm.bind(null,n,s,g,l,u,h,S,E,R,z,J,null,k,B)),_i(n,g,S,!L);return}}Bm(n,s,g,l,u,h,S,E,R)}function mE(n){for(var s=n;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var h=l[u],g=h.getSnapshot;h=h.value;try{if(!Vt(g(),h))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _i(n,s,l,u){s&=~Ic,s&=~Qi,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var h=s;0<h;){var g=31-Me(h),S=1<<g;u[g]=-1,h&=~S}l!==0&&zd(n,l,s)}function Ra(){return(Oe&6)===0?(Yo(0),!1):!0}function Gc(){if(Ae!==null){if(He===0)var n=Ae.return;else n=Ae,Pn=Bi=null,Wu(n),xs=null,No=0,n=Ae;for(;n!==null;)cm(n.alternate,n),n=n.return;Ae=null}}function Os(n,s){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,OE(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Kn=0,Gc(),Fe=n,Ae=l=On(n.current,null),be=s,He=0,Jt=null,mi=!1,Ds=fo(n,s),Mc=!1,Us=Yt=Ic=Qi=gi=tt=0,Ht=$o=null,Dc=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var h=31-Me(u),g=1<<h;s|=n[h],u&=~g}return Yn=s,Xl(),l}function Lm(n,s){_e=null,V.H=Po,s===As||s===ia?(s=Qh(),He=3):s===qu?(s=Qh(),He=4):He=s===pc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Jt=s,Ae===null&&(tt=1,ya(n,tn(s,n.current)))}function Om(){var n=Ft.current;return n===null?!0:(be&4194048)===be?ln===null:(be&62914560)===be||(be&536870912)!==0?n===ln:!1}function Gm(){var n=V.H;return V.H=Po,n===null?Po:n}function Pm(){var n=V.A;return V.A=hE,n}function Na(){tt=4,mi||(be&4194048)!==be&&Ft.current!==null||(Ds=!0),(gi&134217727)===0&&(Qi&134217727)===0||Fe===null||_i(Fe,be,Yt,!1)}function Pc(n,s,l){var u=Oe;Oe|=2;var h=Gm(),g=Pm();(Fe!==n||be!==s)&&(wa=null,Os(n,s)),s=!1;var S=tt;e:do try{if(He!==0&&Ae!==null){var E=Ae,R=Jt;switch(He){case 8:Gc(),S=6;break e;case 3:case 2:case 9:case 6:Ft.current===null&&(s=!0);var L=He;if(He=0,Jt=null,Gs(n,E,R,L),l&&Ds){S=0;break e}break;default:L=He,He=0,Jt=null,Gs(n,E,R,L)}}gE(),S=tt;break}catch(z){Lm(n,z)}while(!0);return s&&n.shellSuspendCounter++,Pn=Bi=null,Oe=u,V.H=h,V.A=g,Ae===null&&(Fe=null,be=0,Xl()),S}function gE(){for(;Ae!==null;)km(Ae)}function yE(n,s){var l=Oe;Oe|=2;var u=Gm(),h=Pm();Fe!==n||be!==s?(wa=null,ba=je()+500,Os(n,s)):Ds=fo(n,s);e:do try{if(He!==0&&Ae!==null){s=Ae;var g=Jt;t:switch(He){case 1:He=0,Jt=null,Gs(n,s,g,1);break;case 2:case 9:if(Kh(g)){He=0,Jt=null,Hm(s);break}s=function(){He!==2&&He!==9||Fe!==n||(He=7),wn(n)},g.then(s,s);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:Kh(g)?(He=0,Jt=null,Hm(s)):(He=0,Jt=null,Gs(n,s,g,7));break;case 5:var S=null;switch(Ae.tag){case 26:S=Ae.memoizedState;case 5:case 27:var E=Ae;if(S?Ag(S):E.stateNode.complete){He=0,Jt=null;var R=E.sibling;if(R!==null)Ae=R;else{var L=E.return;L!==null?(Ae=L,Ma(L)):Ae=null}break t}}He=0,Jt=null,Gs(n,s,g,5);break;case 6:He=0,Jt=null,Gs(n,s,g,6);break;case 8:Gc(),tt=6;break e;default:throw Error(o(462))}}vE();break}catch(z){Lm(n,z)}while(!0);return Pn=Bi=null,V.H=u,V.A=h,Oe=l,Ae!==null?0:(Fe=null,be=0,Xl(),tt)}function vE(){for(;Ae!==null&&!En();)km(Ae)}function km(n){var s=rm(n.alternate,n,Yn);n.memoizedProps=n.pendingProps,s===null?Ma(n):Ae=s}function Hm(n){var s=n,l=s.alternate;switch(s.tag){case 15:case 0:s=nm(l,s,s.pendingProps,s.type,void 0,be);break;case 11:s=nm(l,s,s.pendingProps,s.type.render,s.ref,be);break;case 5:Wu(s);default:cm(l,s),s=Ae=Ph(s,Yn),s=rm(l,s,Yn)}n.memoizedProps=n.pendingProps,s===null?Ma(n):Ae=s}function Gs(n,s,l,u){Pn=Bi=null,Wu(s),xs=null,No=0;var h=s.return;try{if(lE(n,h,s,l,be)){tt=1,ya(n,tn(l,n.current)),Ae=null;return}}catch(g){if(h!==null)throw Ae=h,g;tt=1,ya(n,tn(l,n.current)),Ae=null;return}s.flags&32768?(Ne||u===1?n=!0:Ds||(be&536870912)!==0?n=!1:(mi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Ft.current,u!==null&&u.tag===13&&(u.flags|=16384))),qm(s,n)):Ma(s)}function Ma(n){var s=n;do{if((s.flags&32768)!==0){qm(s,mi);return}n=s.return;var l=uE(s.alternate,s,Yn);if(l!==null){Ae=l;return}if(s=s.sibling,s!==null){Ae=s;return}Ae=s=n}while(s!==null);tt===0&&(tt=5)}function qm(n,s){do{var l=cE(n.alternate,n);if(l!==null){l.flags&=32767,Ae=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(n=n.sibling,n!==null)){Ae=n;return}Ae=n=l}while(n!==null);tt=6,Ae=null}function Bm(n,s,l,u,h,g,S,E,R){n.cancelPendingCommit=null;do Ia();while(ct!==0);if((Oe&6)!==0)throw Error(o(327));if(s!==null){if(s===n.current)throw Error(o(177));if(g=s.lanes|s.childLanes,g|=xu,ZS(n,l,g,S,E,R),n===Fe&&(Ae=Fe=null,be=0),Ls=s,vi=n,Kn=l,Uc=g,Lc=h,Mm=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,EE(bt,function(){return Jm(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=V.T,V.T=null,h=Z.p,Z.p=2,S=Oe,Oe|=4;try{fE(n,s,l)}finally{Oe=S,Z.p=h,V.T=u}}ct=1,Vm(),zm(),Fm()}}function Vm(){if(ct===1){ct=0;var n=vi,s=Ls,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=V.T,V.T=null;var u=Z.p;Z.p=2;var h=Oe;Oe|=4;try{Em(s,n);var g=Xc,S=Rh(n.containerInfo),E=g.focusedElem,R=g.selectionRange;if(S!==E&&E&&E.ownerDocument&&wh(E.ownerDocument.documentElement,E)){if(R!==null&&Su(E)){var L=R.start,z=R.end;if(z===void 0&&(z=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(z,E.value.length);else{var J=E.ownerDocument||document,k=J&&J.defaultView||window;if(k.getSelection){var B=k.getSelection(),te=E.textContent.length,de=Math.min(R.start,te),ze=R.end===void 0?de:Math.min(R.end,te);!B.extend&&de>ze&&(S=ze,ze=de,de=S);var D=bh(E,de),N=bh(E,ze);if(D&&N&&(B.rangeCount!==1||B.anchorNode!==D.node||B.anchorOffset!==D.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var U=J.createRange();U.setStart(D.node,D.offset),B.removeAllRanges(),de>ze?(B.addRange(U),B.extend(N.node,N.offset)):(U.setEnd(N.node,N.offset),B.addRange(U))}}}}for(J=[],B=E;B=B.parentNode;)B.nodeType===1&&J.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<J.length;E++){var F=J[E];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}za=!!Kc,Xc=Kc=null}finally{Oe=h,Z.p=u,V.T=l}}n.current=s,ct=2}}function zm(){if(ct===2){ct=0;var n=vi,s=Ls,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=V.T,V.T=null;var u=Z.p;Z.p=2;var h=Oe;Oe|=4;try{ym(n,s.alternate,s)}finally{Oe=h,Z.p=u,V.T=l}}ct=3}}function Fm(){if(ct===4||ct===3){ct=0,ve();var n=vi,s=Ls,l=Kn,u=Mm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ct=5:(ct=0,Ls=vi=null,$m(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(yi=null),tu(l),s=s.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Di,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=V.T,h=Z.p,Z.p=2,V.T=null;try{for(var g=n.onRecoverableError,S=0;S<u.length;S++){var E=u[S];g(E.value,{componentStack:E.stack})}}finally{V.T=s,Z.p=h}}(Kn&3)!==0&&Ia(),wn(n),h=n.pendingLanes,(l&261930)!==0&&(h&42)!==0?n===Oc?Jo++:(Jo=0,Oc=n):Jo=0,Yo(0)}}function $m(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,wo(s)))}function Ia(){return Vm(),zm(),Fm(),Jm()}function Jm(){if(ct!==5)return!1;var n=vi,s=Uc;Uc=0;var l=tu(Kn),u=V.T,h=Z.p;try{Z.p=32>l?32:l,V.T=null,l=Lc,Lc=null;var g=vi,S=Kn;if(ct=0,Ls=vi=null,Kn=0,(Oe&6)!==0)throw Error(o(331));var E=Oe;if(Oe|=4,wm(g.current),Am(g,g.current,S,l),Oe=E,Yo(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Di,g)}catch{}return!0}finally{Z.p=h,V.T=u,$m(n,s)}}function Ym(n,s,l){s=tn(l,s),s=hc(n.stateNode,s,2),n=fi(n,s,2),n!==null&&(ho(n,2),wn(n))}function qe(n,s,l){if(n.tag===3)Ym(n,n,l);else for(;s!==null;){if(s.tag===3){Ym(s,n,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(yi===null||!yi.has(u))){n=tn(l,n),l=Kp(2),u=fi(s,l,2),u!==null&&(Xp(l,u,s,n),ho(u,2),wn(u));break}}s=s.return}}function kc(n,s,l){var u=n.pingCache;if(u===null){u=n.pingCache=new pE;var h=new Set;u.set(s,h)}else h=u.get(s),h===void 0&&(h=new Set,u.set(s,h));h.has(l)||(Mc=!0,h.add(l),n=_E.bind(null,n,s,l),s.then(n,n))}function _E(n,s,l){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Fe===n&&(be&l)===l&&(tt===4||tt===3&&(be&62914560)===be&&300>je()-xa?(Oe&2)===0&&Os(n,0):Ic|=l,Us===be&&(Us=0)),wn(n)}function Km(n,s){s===0&&(s=Vd()),n=ki(n,s),n!==null&&(ho(n,s),wn(n))}function SE(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),Km(n,l)}function TE(n,s){var l=0;switch(n.tag){case 31:case 13:var u=n.stateNode,h=n.memoizedState;h!==null&&(l=h.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Km(n,l)}function EE(n,s){return ro(n,s)}var Da=null,Ps=null,Hc=!1,Ua=!1,qc=!1,Si=0;function wn(n){n!==Ps&&n.next===null&&(Ps===null?Da=Ps=n:Ps=Ps.next=n),Ua=!0,Hc||(Hc=!0,AE())}function Yo(n,s){if(!qc&&Ua){qc=!0;do for(var l=!1,u=Da;u!==null;){if(n!==0){var h=u.pendingLanes;if(h===0)var g=0;else{var S=u.suspendedLanes,E=u.pingedLanes;g=(1<<31-Me(42|n)+1)-1,g&=h&~(S&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Wm(u,g))}else g=be,g=Pl(u,u===Fe?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||fo(u,g)||(l=!0,Wm(u,g));u=u.next}while(l);qc=!1}}function CE(){Xm()}function Xm(){Ua=Hc=!1;var n=0;Si!==0&&LE()&&(n=Si);for(var s=je(),l=null,u=Da;u!==null;){var h=u.next,g=Qm(u,s);g===0?(u.next=null,l===null?Da=h:l.next=h,h===null&&(Ps=l)):(l=u,(n!==0||(g&3)!==0)&&(Ua=!0)),u=h}ct!==0&&ct!==5||Yo(n),Si!==0&&(Si=0)}function Qm(n,s){for(var l=n.suspendedLanes,u=n.pingedLanes,h=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var S=31-Me(g),E=1<<S,R=h[S];R===-1?((E&l)===0||(E&u)!==0)&&(h[S]=QS(E,s)):R<=s&&(n.expiredLanes|=E),g&=~E}if(s=Fe,l=be,l=Pl(n,n===s?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,l===0||n===s&&(He===2||He===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&st(u),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||fo(n,l)){if(s=l&-l,s===n.callbackPriority)return s;switch(u!==null&&st(u),tu(l)){case 2:case 8:l=Ze;break;case 32:l=bt;break;case 268435456:l=ni;break;default:l=bt}return u=Zm.bind(null,n),l=ro(l,u),n.callbackPriority=s,n.callbackNode=l,s}return u!==null&&u!==null&&st(u),n.callbackPriority=2,n.callbackNode=null,2}function Zm(n,s){if(ct!==0&&ct!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Ia()&&n.callbackNode!==l)return null;var u=be;return u=Pl(n,n===Fe?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Dm(n,u,s),Qm(n,je()),n.callbackNode!=null&&n.callbackNode===l?Zm.bind(null,n):null)}function Wm(n,s){if(Ia())return null;Dm(n,s,!0)}function AE(){GE(function(){(Oe&6)!==0?ro(Cn,CE):Xm()})}function Bc(){if(Si===0){var n=Es;n===0&&(n=Ll,Ll<<=1,(Ll&261888)===0&&(Ll=256)),Si=n}return Si}function jm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Bl(""+n)}function eg(n,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,n.id&&l.setAttribute("form",n.id),s.parentNode.insertBefore(l,s),n=new FormData(n),l.parentNode.removeChild(l),n}function xE(n,s,l,u,h){if(s==="submit"&&l&&l.stateNode===h){var g=jm((h[Lt]||null).action),S=u.submitter;S&&(s=(s=S[Lt]||null)?jm(s.formAction):S.getAttribute("formAction"),s!==null&&(g=s,S=null));var E=new $l("action","action",null,u,h);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Si!==0){var R=S?eg(h,S):new FormData(h);ac(l,{pending:!0,data:R,method:h.method,action:g},null,R)}}else typeof g=="function"&&(E.preventDefault(),R=S?eg(h,S):new FormData(h),ac(l,{pending:!0,data:R,method:h.method,action:g},g,R))},currentTarget:h}]})}}for(var Vc=0;Vc<Au.length;Vc++){var zc=Au[Vc],bE=zc.toLowerCase(),wE=zc[0].toUpperCase()+zc.slice(1);pn(bE,"on"+wE)}pn(Ih,"onAnimationEnd"),pn(Dh,"onAnimationIteration"),pn(Uh,"onAnimationStart"),pn("dblclick","onDoubleClick"),pn("focusin","onFocus"),pn("focusout","onBlur"),pn(zT,"onTransitionRun"),pn(FT,"onTransitionStart"),pn($T,"onTransitionCancel"),pn(Lh,"onTransitionEnd"),rs("onMouseEnter",["mouseout","mouseover"]),rs("onMouseLeave",["mouseout","mouseover"]),rs("onPointerEnter",["pointerout","pointerover"]),rs("onPointerLeave",["pointerout","pointerover"]),Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Li("onBeforeInput",["compositionend","keypress","textInput","paste"]),Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ko));function tg(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var u=n[l],h=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var S=u.length-1;0<=S;S--){var E=u[S],R=E.instance,L=E.currentTarget;if(E=E.listener,R!==g&&h.isPropagationStopped())break e;g=E,h.currentTarget=L;try{g(h)}catch(z){Kl(z)}h.currentTarget=null,g=R}else for(S=0;S<u.length;S++){if(E=u[S],R=E.instance,L=E.currentTarget,E=E.listener,R!==g&&h.isPropagationStopped())break e;g=E,h.currentTarget=L;try{g(h)}catch(z){Kl(z)}h.currentTarget=null,g=R}}}}function xe(n,s){var l=s[nu];l===void 0&&(l=s[nu]=new Set);var u=n+"__bubble";l.has(u)||(ng(s,n,2,!1),l.add(u))}function Fc(n,s,l){var u=0;s&&(u|=4),ng(l,n,u,s)}var La="_reactListening"+Math.random().toString(36).slice(2);function $c(n){if(!n[La]){n[La]=!0,Xd.forEach(function(l){l!=="selectionchange"&&(RE.has(l)||Fc(l,!1,n),Fc(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[La]||(s[La]=!0,Fc("selectionchange",!1,s))}}function ng(n,s,l,u){switch(Ig(s)){case 2:var h=nC;break;case 8:h=iC;break;default:h=af}l=h.bind(null,s,l,n),h=void 0,!fu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),u?h!==void 0?n.addEventListener(s,l,{capture:!0,passive:h}):n.addEventListener(s,l,!0):h!==void 0?n.addEventListener(s,l,{passive:h}):n.addEventListener(s,l,!1)}function Jc(n,s,l,u,h){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var E=u.stateNode.containerInfo;if(E===h)break;if(S===4)for(S=u.return;S!==null;){var R=S.tag;if((R===3||R===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;E!==null;){if(S=os(E),S===null)return;if(R=S.tag,R===5||R===6||R===26||R===27){u=g=S;continue e}E=E.parentNode}}u=u.return}ah(function(){var L=g,z=uu(l),J=[];e:{var k=Oh.get(n);if(k!==void 0){var B=$l,te=n;switch(n){case"keypress":if(zl(l)===0)break e;case"keydown":case"keyup":B=TT;break;case"focusin":te="focus",B=mu;break;case"focusout":te="blur",B=mu;break;case"beforeblur":case"afterblur":B=mu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=ch;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=uT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=AT;break;case Ih:case Dh:case Uh:B=dT;break;case Lh:B=bT;break;case"scroll":case"scrollend":B=aT;break;case"wheel":B=RT;break;case"copy":case"cut":case"paste":B=pT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=dh;break;case"toggle":case"beforetoggle":B=MT}var de=(s&4)!==0,ze=!de&&(n==="scroll"||n==="scrollend"),D=de?k!==null?k+"Capture":null:k;de=[];for(var N=L,U;N!==null;){var F=N;if(U=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||U===null||D===null||(F=go(N,D),F!=null&&de.push(Xo(N,F,U))),ze)break;N=N.return}0<de.length&&(k=new B(k,te,null,l,z),J.push({event:k,listeners:de}))}}if((s&7)===0){e:{if(k=n==="mouseover"||n==="pointerover",B=n==="mouseout"||n==="pointerout",k&&l!==ru&&(te=l.relatedTarget||l.fromElement)&&(os(te)||te[ss]))break e;if((B||k)&&(k=z.window===z?z:(k=z.ownerDocument)?k.defaultView||k.parentWindow:window,B?(te=l.relatedTarget||l.toElement,B=L,te=te?os(te):null,te!==null&&(ze=r(te),de=te.tag,te!==ze||de!==5&&de!==27&&de!==6)&&(te=null)):(B=null,te=L),B!==te)){if(de=ch,F="onMouseLeave",D="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(de=dh,F="onPointerLeave",D="onPointerEnter",N="pointer"),ze=B==null?k:mo(B),U=te==null?k:mo(te),k=new de(F,N+"leave",B,l,z),k.target=ze,k.relatedTarget=U,F=null,os(z)===L&&(de=new de(D,N+"enter",te,l,z),de.target=U,de.relatedTarget=ze,F=de),ze=F,B&&te)t:{for(de=NE,D=B,N=te,U=0,F=D;F;F=de(F))U++;F=0;for(var ue=N;ue;ue=de(ue))F++;for(;0<U-F;)D=de(D),U--;for(;0<F-U;)N=de(N),F--;for(;U--;){if(D===N||N!==null&&D===N.alternate){de=D;break t}D=de(D),N=de(N)}de=null}else de=null;B!==null&&ig(J,k,B,de,!1),te!==null&&ze!==null&&ig(J,ze,te,de,!0)}}e:{if(k=L?mo(L):window,B=k.nodeName&&k.nodeName.toLowerCase(),B==="select"||B==="input"&&k.type==="file")var De=Sh;else if(vh(k))if(Th)De=qT;else{De=kT;var ae=PT}else B=k.nodeName,!B||B.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?L&&au(L.elementType)&&(De=Sh):De=HT;if(De&&(De=De(n,L))){_h(J,De,l,z);break e}ae&&ae(n,k,L),n==="focusout"&&L&&k.type==="number"&&L.memoizedProps.value!=null&&lu(k,"number",k.value)}switch(ae=L?mo(L):window,n){case"focusin":(vh(ae)||ae.contentEditable==="true")&&(ps=ae,Tu=L,Ao=null);break;case"focusout":Ao=Tu=ps=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,Nh(J,l,z);break;case"selectionchange":if(VT)break;case"keydown":case"keyup":Nh(J,l,z)}var Se;if(yu)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else hs?gh(n,l)&&(we="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(we="onCompositionStart");we&&(hh&&l.locale!=="ko"&&(hs||we!=="onCompositionStart"?we==="onCompositionEnd"&&hs&&(Se=rh()):(si=z,du="value"in si?si.value:si.textContent,hs=!0)),ae=Oa(L,we),0<ae.length&&(we=new fh(we,n,null,l,z),J.push({event:we,listeners:ae}),Se?we.data=Se:(Se=yh(l),Se!==null&&(we.data=Se)))),(Se=DT?UT(n,l):LT(n,l))&&(we=Oa(L,"onBeforeInput"),0<we.length&&(ae=new fh("onBeforeInput","beforeinput",null,l,z),J.push({event:ae,listeners:we}),ae.data=Se)),xE(J,n,L,l,z)}tg(J,s)})}function Xo(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Oa(n,s){for(var l=s+"Capture",u=[];n!==null;){var h=n,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=go(n,l),h!=null&&u.unshift(Xo(n,h,g)),h=go(n,s),h!=null&&u.push(Xo(n,h,g))),n.tag===3)return u;n=n.return}return[]}function NE(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ig(n,s,l,u,h){for(var g=s._reactName,S=[];l!==null&&l!==u;){var E=l,R=E.alternate,L=E.stateNode;if(E=E.tag,R!==null&&R===u)break;E!==5&&E!==26&&E!==27||L===null||(R=L,h?(L=go(l,g),L!=null&&S.unshift(Xo(l,L,R))):h||(L=go(l,g),L!=null&&S.push(Xo(l,L,R)))),l=l.return}S.length!==0&&n.push({event:s,listeners:S})}var ME=/\r\n?/g,IE=/\u0000|\uFFFD/g;function sg(n){return(typeof n=="string"?n:""+n).replace(ME,`
`).replace(IE,"")}function og(n,s){return s=sg(s),sg(n)===s}function Ve(n,s,l,u,h,g){switch(l){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||cs(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&cs(n,""+u);break;case"className":Hl(n,"class",u);break;case"tabIndex":Hl(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Hl(n,l,u);break;case"style":oh(n,u,g);break;case"data":if(s!=="object"){Hl(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||l!=="href")){n.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=Bl(""+u),n.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(s!=="input"&&Ve(n,s,"name",h.name,h,null),Ve(n,s,"formEncType",h.formEncType,h,null),Ve(n,s,"formMethod",h.formMethod,h,null),Ve(n,s,"formTarget",h.formTarget,h,null)):(Ve(n,s,"encType",h.encType,h,null),Ve(n,s,"method",h.method,h,null),Ve(n,s,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=Bl(""+u),n.setAttribute(l,u);break;case"onClick":u!=null&&(n.onclick=Un);break;case"onScroll":u!=null&&xe("scroll",n);break;case"onScrollEnd":u!=null&&xe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(l=u.__html,l!=null){if(h.children!=null)throw Error(o(60));n.innerHTML=l}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}l=Bl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""+u):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":u===!0?n.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,u):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(l,u):n.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(l):n.setAttribute(l,u);break;case"popover":xe("beforetoggle",n),xe("toggle",n),kl(n,"popover",u);break;case"xlinkActuate":Dn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Dn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Dn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Dn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Dn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Dn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Dn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Dn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Dn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":kl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=oT.get(l)||l,kl(n,l,u))}}function Yc(n,s,l,u,h,g){switch(l){case"style":oh(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(l=u.__html,l!=null){if(h.children!=null)throw Error(o(60));n.innerHTML=l}}break;case"children":typeof u=="string"?cs(n,u):(typeof u=="number"||typeof u=="bigint")&&cs(n,""+u);break;case"onScroll":u!=null&&xe("scroll",n);break;case"onScrollEnd":u!=null&&xe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Un);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qd.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(h=l.endsWith("Capture"),s=l.slice(2,h?l.length-7:void 0),g=n[Lt]||null,g=g!=null?g[l]:null,typeof g=="function"&&n.removeEventListener(s,g,h),typeof u=="function")){typeof g!="function"&&g!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(s,u,h);break e}l in n?n[l]=u:u===!0?n.setAttribute(l,""):kl(n,l,u)}}}function Et(n,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",n),xe("load",n);var u=!1,h=!1,g;for(g in l)if(l.hasOwnProperty(g)){var S=l[g];if(S!=null)switch(g){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Ve(n,s,g,S,l,null)}}h&&Ve(n,s,"srcSet",l.srcSet,l,null),u&&Ve(n,s,"src",l.src,l,null);return;case"input":xe("invalid",n);var E=g=S=h=null,R=null,L=null;for(u in l)if(l.hasOwnProperty(u)){var z=l[u];if(z!=null)switch(u){case"name":h=z;break;case"type":S=z;break;case"checked":R=z;break;case"defaultChecked":L=z;break;case"value":g=z;break;case"defaultValue":E=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(o(137,s));break;default:Ve(n,s,u,z,l,null)}}th(n,g,E,R,L,S,h,!1);return;case"select":xe("invalid",n),u=S=g=null;for(h in l)if(l.hasOwnProperty(h)&&(E=l[h],E!=null))switch(h){case"value":g=E;break;case"defaultValue":S=E;break;case"multiple":u=E;default:Ve(n,s,h,E,l,null)}s=g,l=S,n.multiple=!!u,s!=null?us(n,!!u,s,!1):l!=null&&us(n,!!u,l,!0);return;case"textarea":xe("invalid",n),g=h=u=null;for(S in l)if(l.hasOwnProperty(S)&&(E=l[S],E!=null))switch(S){case"value":u=E;break;case"defaultValue":h=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:Ve(n,s,S,E,l,null)}ih(n,u,h,g);return;case"option":for(R in l)if(l.hasOwnProperty(R)&&(u=l[R],u!=null))switch(R){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ve(n,s,R,u,l,null)}return;case"dialog":xe("beforetoggle",n),xe("toggle",n),xe("cancel",n),xe("close",n);break;case"iframe":case"object":xe("load",n);break;case"video":case"audio":for(u=0;u<Ko.length;u++)xe(Ko[u],n);break;case"image":xe("error",n),xe("load",n);break;case"details":xe("toggle",n);break;case"embed":case"source":case"link":xe("error",n),xe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in l)if(l.hasOwnProperty(L)&&(u=l[L],u!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Ve(n,s,L,u,l,null)}return;default:if(au(s)){for(z in l)l.hasOwnProperty(z)&&(u=l[z],u!==void 0&&Yc(n,s,z,u,l,void 0));return}}for(E in l)l.hasOwnProperty(E)&&(u=l[E],u!=null&&Ve(n,s,E,u,l,null))}function DE(n,s,l,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,S=null,E=null,R=null,L=null,z=null;for(B in l){var J=l[B];if(l.hasOwnProperty(B)&&J!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":R=J;default:u.hasOwnProperty(B)||Ve(n,s,B,null,u,J)}}for(var k in u){var B=u[k];if(J=l[k],u.hasOwnProperty(k)&&(B!=null||J!=null))switch(k){case"type":g=B;break;case"name":h=B;break;case"checked":L=B;break;case"defaultChecked":z=B;break;case"value":S=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(o(137,s));break;default:B!==J&&Ve(n,s,k,B,u,J)}}ou(n,S,E,R,L,z,g,h);return;case"select":B=S=E=k=null;for(g in l)if(R=l[g],l.hasOwnProperty(g)&&R!=null)switch(g){case"value":break;case"multiple":B=R;default:u.hasOwnProperty(g)||Ve(n,s,g,null,u,R)}for(h in u)if(g=u[h],R=l[h],u.hasOwnProperty(h)&&(g!=null||R!=null))switch(h){case"value":k=g;break;case"defaultValue":E=g;break;case"multiple":S=g;default:g!==R&&Ve(n,s,h,g,u,R)}s=E,l=S,u=B,k!=null?us(n,!!l,k,!1):!!u!=!!l&&(s!=null?us(n,!!l,s,!0):us(n,!!l,l?[]:"",!1));return;case"textarea":B=k=null;for(E in l)if(h=l[E],l.hasOwnProperty(E)&&h!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ve(n,s,E,null,u,h)}for(S in u)if(h=u[S],g=l[S],u.hasOwnProperty(S)&&(h!=null||g!=null))switch(S){case"value":k=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(o(91));break;default:h!==g&&Ve(n,s,S,h,u,g)}nh(n,k,B);return;case"option":for(var te in l)if(k=l[te],l.hasOwnProperty(te)&&k!=null&&!u.hasOwnProperty(te))switch(te){case"selected":n.selected=!1;break;default:Ve(n,s,te,null,u,k)}for(R in u)if(k=u[R],B=l[R],u.hasOwnProperty(R)&&k!==B&&(k!=null||B!=null))switch(R){case"selected":n.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Ve(n,s,R,k,u,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in l)k=l[de],l.hasOwnProperty(de)&&k!=null&&!u.hasOwnProperty(de)&&Ve(n,s,de,null,u,k);for(L in u)if(k=u[L],B=l[L],u.hasOwnProperty(L)&&k!==B&&(k!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(137,s));break;default:Ve(n,s,L,k,u,B)}return;default:if(au(s)){for(var ze in l)k=l[ze],l.hasOwnProperty(ze)&&k!==void 0&&!u.hasOwnProperty(ze)&&Yc(n,s,ze,void 0,u,k);for(z in u)k=u[z],B=l[z],!u.hasOwnProperty(z)||k===B||k===void 0&&B===void 0||Yc(n,s,z,k,u,B);return}}for(var D in l)k=l[D],l.hasOwnProperty(D)&&k!=null&&!u.hasOwnProperty(D)&&Ve(n,s,D,null,u,k);for(J in u)k=u[J],B=l[J],!u.hasOwnProperty(J)||k===B||k==null&&B==null||Ve(n,s,J,k,u,B)}function lg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function UE(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var h=l[u],g=h.transferSize,S=h.initiatorType,E=h.duration;if(g&&E&&lg(S)){for(S=0,E=h.responseEnd,u+=1;u<l.length;u++){var R=l[u],L=R.startTime;if(L>E)break;var z=R.transferSize,J=R.initiatorType;z&&lg(J)&&(R=R.responseEnd,S+=z*(R<E?1:(E-L)/(R-L)))}if(--u,s+=8*(g+S)/(h.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Kc=null,Xc=null;function Ga(n){return n.nodeType===9?n:n.ownerDocument}function ag(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rg(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Qc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Zc=null;function LE(){var n=window.event;return n&&n.type==="popstate"?n===Zc?!1:(Zc=n,!0):(Zc=null,!1)}var ug=typeof setTimeout=="function"?setTimeout:void 0,OE=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,GE=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(n){return cg.resolve(null).then(n).catch(PE)}:ug;function PE(n){setTimeout(function(){throw n})}function Ti(n){return n==="head"}function fg(n,s){var l=s,u=0;do{var h=l.nextSibling;if(n.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"||l==="/&"){if(u===0){n.removeChild(h),Bs(s);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Qo(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Qo(l);for(var g=l.firstChild;g;){var S=g.nextSibling,E=g.nodeName;g[po]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=S}}else l==="body"&&Qo(n.ownerDocument.body);l=h}while(l);Bs(s)}function dg(n,s){var l=n;n=0;do{var u=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=u}while(l)}function Wc(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Wc(l),iu(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function kE(n,s,l,u){for(;n.nodeType===1;){var h=l;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[po])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=an(n.nextSibling),n===null)break}return null}function HE(n,s,l){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=an(n.nextSibling),n===null))return null;return n}function hg(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=an(n.nextSibling),n===null))return null;return n}function jc(n){return n.data==="$?"||n.data==="$~"}function ef(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function qE(n,s){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||l.readyState!=="loading")s();else{var u=function(){s(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function an(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var tf=null;function pg(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(s===0)return an(n.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}n=n.nextSibling}return null}function mg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return n;s--}else l!=="/$"&&l!=="/&"||s++}n=n.previousSibling}return null}function gg(n,s,l){switch(s=Ga(l),n){case"html":if(n=s.documentElement,!n)throw Error(o(452));return n;case"head":if(n=s.head,!n)throw Error(o(453));return n;case"body":if(n=s.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function Qo(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);iu(n)}var rn=new Map,yg=new Set;function Pa(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Xn=Z.d;Z.d={f:BE,r:VE,D:zE,C:FE,L:$E,m:JE,X:KE,S:YE,M:XE};function BE(){var n=Xn.f(),s=Ra();return n||s}function VE(n){var s=ls(n);s!==null&&s.tag===5&&s.type==="form"?Lp(s):Xn.r(n)}var ks=typeof document>"u"?null:document;function vg(n,s,l){var u=ks;if(u&&typeof s=="string"&&s){var h=jt(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof l=="string"&&(h+='[crossorigin="'+l+'"]'),yg.has(h)||(yg.add(h),n={rel:n,crossOrigin:l,href:s},u.querySelector(h)===null&&(s=u.createElement("link"),Et(s,"link",n),ht(s),u.head.appendChild(s)))}}function zE(n){Xn.D(n),vg("dns-prefetch",n,null)}function FE(n,s){Xn.C(n,s),vg("preconnect",n,s)}function $E(n,s,l){Xn.L(n,s,l);var u=ks;if(u&&n&&s){var h='link[rel="preload"][as="'+jt(s)+'"]';s==="image"&&l&&l.imageSrcSet?(h+='[imagesrcset="'+jt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(h+='[imagesizes="'+jt(l.imageSizes)+'"]')):h+='[href="'+jt(n)+'"]';var g=h;switch(s){case"style":g=Hs(n);break;case"script":g=qs(n)}rn.has(g)||(n=_({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:n,as:s},l),rn.set(g,n),u.querySelector(h)!==null||s==="style"&&u.querySelector(Zo(g))||s==="script"&&u.querySelector(Wo(g))||(s=u.createElement("link"),Et(s,"link",n),ht(s),u.head.appendChild(s)))}}function JE(n,s){Xn.m(n,s);var l=ks;if(l&&n){var u=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+jt(u)+'"][href="'+jt(n)+'"]',g=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=qs(n)}if(!rn.has(g)&&(n=_({rel:"modulepreload",href:n},s),rn.set(g,n),l.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Wo(g)))return}u=l.createElement("link"),Et(u,"link",n),ht(u),l.head.appendChild(u)}}}function YE(n,s,l){Xn.S(n,s,l);var u=ks;if(u&&n){var h=as(u).hoistableStyles,g=Hs(n);s=s||"default";var S=h.get(g);if(!S){var E={loading:0,preload:null};if(S=u.querySelector(Zo(g)))E.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},l),(l=rn.get(g))&&nf(n,l);var R=S=u.createElement("link");ht(R),Et(R,"link",n),R._p=new Promise(function(L,z){R.onload=L,R.onerror=z}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,ka(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:E},h.set(g,S)}}}function KE(n,s){Xn.X(n,s);var l=ks;if(l&&n){var u=as(l).hoistableScripts,h=qs(n),g=u.get(h);g||(g=l.querySelector(Wo(h)),g||(n=_({src:n,async:!0},s),(s=rn.get(h))&&sf(n,s),g=l.createElement("script"),ht(g),Et(g,"link",n),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(h,g))}}function XE(n,s){Xn.M(n,s);var l=ks;if(l&&n){var u=as(l).hoistableScripts,h=qs(n),g=u.get(h);g||(g=l.querySelector(Wo(h)),g||(n=_({src:n,async:!0,type:"module"},s),(s=rn.get(h))&&sf(n,s),g=l.createElement("script"),ht(g),Et(g,"link",n),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(h,g))}}function _g(n,s,l,u){var h=(h=Ee.current)?Pa(h):null;if(!h)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Hs(l.href),l=as(h).hoistableStyles,u=l.get(s),u||(u={type:"style",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Hs(l.href);var g=as(h).hoistableStyles,S=g.get(n);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,S),(g=h.querySelector(Zo(n)))&&!g._p&&(S.instance=g,S.state.loading=5),rn.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},rn.set(n,l),g||QE(h,n,l,S.state))),s&&u===null)throw Error(o(528,""));return S}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=qs(l),l=as(h).hoistableScripts,u=l.get(s),u||(u={type:"script",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function Hs(n){return'href="'+jt(n)+'"'}function Zo(n){return'link[rel="stylesheet"]['+n+"]"}function Sg(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function QE(n,s,l,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Et(s,"link",l),ht(s),n.head.appendChild(s))}function qs(n){return'[src="'+jt(n)+'"]'}function Wo(n){return"script[async]"+n}function Tg(n,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+jt(l.href)+'"]');if(u)return s.instance=u,ht(u),u;var h=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ht(u),Et(u,"style",h),ka(u,l.precedence,n),s.instance=u;case"stylesheet":h=Hs(l.href);var g=n.querySelector(Zo(h));if(g)return s.state.loading|=4,s.instance=g,ht(g),g;u=Sg(l),(h=rn.get(h))&&nf(u,h),g=(n.ownerDocument||n).createElement("link"),ht(g);var S=g;return S._p=new Promise(function(E,R){S.onload=E,S.onerror=R}),Et(g,"link",u),s.state.loading|=4,ka(g,l.precedence,n),s.instance=g;case"script":return g=qs(l.src),(h=n.querySelector(Wo(g)))?(s.instance=h,ht(h),h):(u=l,(h=rn.get(g))&&(u=_({},l),sf(u,h)),n=n.ownerDocument||n,h=n.createElement("script"),ht(h),Et(h,"link",u),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ka(u,l.precedence,n));return s.instance}function ka(n,s,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,g=h,S=0;S<u.length;S++){var E=u[S];if(E.dataset.precedence===s)g=E;else if(g!==h)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(n,s.firstChild))}function nf(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function sf(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Ha=null;function Eg(n,s,l){if(Ha===null){var u=new Map,h=Ha=new Map;h.set(l,u)}else h=Ha,u=h.get(l),u||(u=new Map,h.set(l,u));if(u.has(n))return u;for(u.set(n,null),l=l.getElementsByTagName(n),h=0;h<l.length;h++){var g=l[h];if(!(g[po]||g[vt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(s)||"";S=n+S;var E=u.get(S);E?E.push(g):u.set(S,[g])}}return u}function Cg(n,s,l){n=n.ownerDocument||n,n.head.insertBefore(l,s==="title"?n.querySelector("head > title"):null)}function ZE(n,s,l){if(l===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ag(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function WE(n,s,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var h=Hs(u.href),g=s.querySelector(Zo(h));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=qa.bind(n),s.then(n,n)),l.state.loading|=4,l.instance=g,ht(g);return}g=s.ownerDocument||s,u=Sg(u),(h=rn.get(h))&&nf(u,h),g=g.createElement("link"),ht(g);var S=g;S._p=new Promise(function(E,R){S.onload=E,S.onerror=R}),Et(g,"link",u),l.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=qa.bind(n),s.addEventListener("load",l),s.addEventListener("error",l))}}var of=0;function jE(n,s){return n.stylesheets&&n.count===0&&Va(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var u=setTimeout(function(){if(n.stylesheets&&Va(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+s);0<n.imgBytes&&of===0&&(of=62500*UE());var h=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Va(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>of?50:800)+s);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(h)}}:null}function qa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Va(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ba=null;function Va(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ba=new Map,s.forEach(eC,n),Ba=null,qa.call(n))}function eC(n,s){if(!(s.state.loading&4)){var l=Ba.get(n);if(l)var u=l.get(null);else{l=new Map,Ba.set(n,l);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var S=h[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),u=S)}u&&l.set(null,u)}h=s.instance,S=h.getAttribute("data-precedence"),g=l.get(S)||u,g===u&&l.set(null,h),l.set(S,h),this.count++,u=qa.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),g?g.parentNode.insertBefore(h,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var jo={$$typeof:I,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function tC(n,s,l,u,h,g,S,E,R){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.hiddenUpdates=jr(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function xg(n,s,l,u,h,g,S,E,R,L,z,J){return n=new tC(n,s,l,S,R,L,z,J,E),s=1,g===!0&&(s|=24),g=zt(3,null,null,s),n.current=g,g.stateNode=n,s=Pu(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:s},Bu(g),n}function bg(n){return n?(n=ys,n):ys}function wg(n,s,l,u,h,g){h=bg(h),u.context===null?u.context=h:u.pendingContext=h,u=ci(s),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=fi(n,u,s),l!==null&&(qt(l,n,s),Io(l,n,s))}function Rg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function lf(n,s){Rg(n,s),(n=n.alternate)&&Rg(n,s)}function Ng(n){if(n.tag===13||n.tag===31){var s=ki(n,67108864);s!==null&&qt(s,n,67108864),lf(n,67108864)}}function Mg(n){if(n.tag===13||n.tag===31){var s=Kt();s=eu(s);var l=ki(n,s);l!==null&&qt(l,n,s),lf(n,s)}}var za=!0;function nC(n,s,l,u){var h=V.T;V.T=null;var g=Z.p;try{Z.p=2,af(n,s,l,u)}finally{Z.p=g,V.T=h}}function iC(n,s,l,u){var h=V.T;V.T=null;var g=Z.p;try{Z.p=8,af(n,s,l,u)}finally{Z.p=g,V.T=h}}function af(n,s,l,u){if(za){var h=rf(u);if(h===null)Jc(n,s,u,Fa,l),Dg(n,u);else if(oC(h,n,s,l,u))u.stopPropagation();else if(Dg(n,u),s&4&&-1<sC.indexOf(n)){for(;h!==null;){var g=ls(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=Ui(g.pendingLanes);if(S!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;S;){var R=1<<31-Me(S);E.entanglements[1]|=R,S&=~R}wn(g),(Oe&6)===0&&(ba=je()+500,Yo(0))}}break;case 31:case 13:E=ki(g,2),E!==null&&qt(E,g,2),Ra(),lf(g,2)}if(g=rf(u),g===null&&Jc(n,s,u,Fa,l),g===h)break;h=g}h!==null&&u.stopPropagation()}else Jc(n,s,u,null,l)}}function rf(n){return n=uu(n),uf(n)}var Fa=null;function uf(n){if(Fa=null,n=os(n),n!==null){var s=r(n);if(s===null)n=null;else{var l=s.tag;if(l===13){if(n=f(s),n!==null)return n;n=null}else if(l===31){if(n=p(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Fa=n,null}function Ig(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($e()){case Cn:return 2;case Ze:return 8;case bt:case uo:return 32;case ni:return 268435456;default:return 32}default:return 32}}var cf=!1,Ei=null,Ci=null,Ai=null,el=new Map,tl=new Map,xi=[],sC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dg(n,s){switch(n){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":el.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(s.pointerId)}}function nl(n,s,l,u,h,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[h]},s!==null&&(s=ls(s),s!==null&&Ng(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function oC(n,s,l,u,h){switch(s){case"focusin":return Ei=nl(Ei,n,s,l,u,h),!0;case"dragenter":return Ci=nl(Ci,n,s,l,u,h),!0;case"mouseover":return Ai=nl(Ai,n,s,l,u,h),!0;case"pointerover":var g=h.pointerId;return el.set(g,nl(el.get(g)||null,n,s,l,u,h)),!0;case"gotpointercapture":return g=h.pointerId,tl.set(g,nl(tl.get(g)||null,n,s,l,u,h)),!0}return!1}function Ug(n){var s=os(n.target);if(s!==null){var l=r(s);if(l!==null){if(s=l.tag,s===13){if(s=f(l),s!==null){n.blockedOn=s,Yd(n.priority,function(){Mg(l)});return}}else if(s===31){if(s=p(l),s!==null){n.blockedOn=s,Yd(n.priority,function(){Mg(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $a(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=rf(n.nativeEvent);if(l===null){l=n.nativeEvent;var u=new l.constructor(l.type,l);ru=u,l.target.dispatchEvent(u),ru=null}else return s=ls(l),s!==null&&Ng(s),n.blockedOn=l,!1;s.shift()}return!0}function Lg(n,s,l){$a(n)&&l.delete(s)}function lC(){cf=!1,Ei!==null&&$a(Ei)&&(Ei=null),Ci!==null&&$a(Ci)&&(Ci=null),Ai!==null&&$a(Ai)&&(Ai=null),el.forEach(Lg),tl.forEach(Lg)}function Ja(n,s){n.blockedOn===s&&(n.blockedOn=null,cf||(cf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,lC)))}var Ya=null;function Og(n){Ya!==n&&(Ya=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ya===n&&(Ya=null);for(var s=0;s<n.length;s+=3){var l=n[s],u=n[s+1],h=n[s+2];if(typeof u!="function"){if(uf(u||l)===null)continue;break}var g=ls(l);g!==null&&(n.splice(s,3),s-=3,ac(g,{pending:!0,data:h,method:l.method,action:u},u,h))}}))}function Bs(n){function s(R){return Ja(R,n)}Ei!==null&&Ja(Ei,n),Ci!==null&&Ja(Ci,n),Ai!==null&&Ja(Ai,n),el.forEach(s),tl.forEach(s);for(var l=0;l<xi.length;l++){var u=xi[l];u.blockedOn===n&&(u.blockedOn=null)}for(;0<xi.length&&(l=xi[0],l.blockedOn===null);)Ug(l),l.blockedOn===null&&xi.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var h=l[u],g=l[u+1],S=h[Lt]||null;if(typeof g=="function")S||Og(l);else if(S){var E=null;if(g&&g.hasAttribute("formAction")){if(h=g,S=g[Lt]||null)E=S.formAction;else if(uf(h)!==null)continue}else E=S.action;typeof E=="function"?l[u+1]=E:(l.splice(u,3),u-=3),Og(l)}}}function Gg(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,h=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function ff(n){this._internalRoot=n}Ka.prototype.render=ff.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(o(409));var l=s.current,u=Kt();wg(l,u,n,s,null,null)},Ka.prototype.unmount=ff.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;wg(n.current,2,null,n,null,null),Ra(),s[ss]=null}};function Ka(n){this._internalRoot=n}Ka.prototype.unstable_scheduleHydration=function(n){if(n){var s=Jd();n={blockedOn:null,target:n,priority:s};for(var l=0;l<xi.length&&s!==0&&s<xi[l].priority;l++);xi.splice(l,0,n),l===0&&Ug(n)}};var Pg=e.version;if(Pg!=="19.2.4")throw Error(o(527,Pg,"19.2.4"));Z.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=m(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var aC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{Di=Xa.inject(aC),wt=Xa}catch{}}return sl.createRoot=function(n,s){if(!a(n))throw Error(o(299));var l=!1,u="",h=Fp,g=$p,S=Jp;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=xg(n,1,!1,null,null,l,u,null,h,g,S,Gg),n[ss]=s.current,$c(n),new ff(s)},sl.hydrateRoot=function(n,s,l){if(!a(n))throw Error(o(299));var u=!1,h="",g=Fp,S=$p,E=Jp,R=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.formState!==void 0&&(R=l.formState)),s=xg(n,1,!0,s,l??null,u,h,R,g,S,E,Gg),s.context=bg(null),l=s.current,u=Kt(),u=eu(u),h=ci(u),h.callback=null,fi(l,h,u),l=u,s.current.lanes=l,ho(s,l),wn(s),n[ss]=s.current,$c(n),new Ka(s)},sl.version="19.2.4",sl}var Yg;function vC(){if(Yg)return hf.exports;Yg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),hf.exports=yC(),hf.exports}var _C=vC(),We=ud();const Qa=uC(We);var vn=(t=>(t.SELECTION="SELECTION",t.LOADING="LOADING",t.GAMEPLAY="GAMEPLAY",t.DECISION_MAP="DECISION_MAP",t.GAME_OVER="GAME_OVER",t))(vn||{});const c0=[{id:"c1",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1560706560-59f7df8da891?q=80&w=1200&auto=format&fit=crop",stats:{strength:8,wits:7,charm:5},traits:["","",""],weakness:""},{id:"c2",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1535581652167-3d6693c0326e?q=80&w=1200&auto=format&fit=crop",stats:{strength:9,wits:5,charm:3},traits:["","",""],weakness:""},{id:"c3",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1509316975850-ff9c5deb0cd9?q=80&w=1200&auto=format&fit=crop",stats:{strength:3,wits:9,charm:8},traits:["","",""],weakness:""},{id:"c4",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1519074069444-1ba4fff66d16?q=80&w=1200&auto=format&fit=crop",stats:{strength:4,wits:8,charm:6},traits:["","",""],weakness:""},{id:"c5",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1636217989679-2c70092c7251?q=80&w=1200&auto=format&fit=crop",stats:{strength:9,wits:4,charm:6},traits:["","",""],weakness:""},{id:"c6",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop",stats:{strength:3,wits:7,charm:10},traits:["","",""],weakness:""},{id:"c7",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1605806616949-1e87b487bc2a?q=80&w=1200&auto=format&fit=crop",stats:{strength:7,wits:8,charm:2},traits:["","",""],weakness:""},{id:"c8",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1601362840469-51e4d8d58785?q=80&w=1200&auto=format&fit=crop",stats:{strength:2,wits:10,charm:4},traits:["","",""],weakness:""}],f0=[{id:"r1",title:"",type:"CONSTRAINT",description:"",active:!0},{id:"r2",title:"",type:"REALITY",description:"<3NPC>8",active:!0},{id:"r3",title:"",type:"RISK",description:"",active:!0},{id:"r4",title:"",type:"RISK",description:"23",active:!0},{id:"r5",title:"",type:"BONUS",description:"1",active:!0},{id:"r6",title:"",type:"REALITY",description:"",active:!1},{id:"r7",title:"",type:"CONSTRAINT",description:"",active:!1},{id:"r8",title:"",type:"CONSTRAINT",description:"",active:!0},{id:"r9",title:"",type:"BONUS",description:"50%",active:!1},{id:"r10",title:"",type:"REALITY",description:"10%",active:!1},{id:"r11",title:"",type:"RISK",description:"",active:!0},{id:"r12",title:"",type:"BONUS",description:"",active:!1}],Kg={text:"",choices:[{id:"opt1",text:"",consequence:"",cost:"",risk:""},{id:"opt2",text:"",consequence:"",risk:""},{id:"opt3",text:"",consequence:"",cost:"",risk:""}]},rl={narrative:{geminiModel:"gemini-2.5-flash-preview-05-20",openaiModel:"gpt-4.1-mini",temperature:.75,maxOutputTokens:1024,topP:.95,jsonMode:!1,streaming:!0,timeoutMs:3e4,maxRetries:1,retryDelayMs:1e3},realityMapping:{geminiModel:"gemini-2.5-flash-preview-05-20",openaiModel:"gpt-4.1-mini",temperature:.3,maxOutputTokens:512,topP:.85,jsonMode:!0,streaming:!1,timeoutMs:15e3,maxRetries:2,retryDelayMs:800},worldRules:{geminiModel:"gemini-2.5-flash-preview-05-20",openaiModel:"gpt-4.1-mini",temperature:.3,maxOutputTokens:768,topP:.85,jsonMode:!0,streaming:!1,timeoutMs:15e3,maxRetries:2,retryDelayMs:800},choices:{geminiModel:"gemini-2.5-flash-preview-05-20",openaiModel:"gpt-4.1-mini",temperature:.9,maxOutputTokens:512,topP:.95,jsonMode:!0,streaming:!1,timeoutMs:15e3,maxRetries:2,retryDelayMs:800}},SC=t=>({1:"I",2:"II",3:"III",4:"IV",5:"V",6:"VI",7:"VII",8:"VIII"})[t]||"X",Xg=({character:t,onSelect:e,isSelected:i})=>{const o=parseInt(t.id.replace("c",""));return C.jsxs("div",{onClick:()=>e&&e(t),className:`
        relative w-72 h-[450px] rounded-xl overflow-hidden cursor-pointer transition-all duration-500 transform group
        ${i?"scale-105 ring-4 ring-[#D4AF37] shadow-[0_0_50px_rgba(212,175,55,0.4)] z-20":"hover:scale-105 hover:shadow-2xl hover:z-10"}
        border-[6px] border-[#D4AF37] bg-[#1a0f0f]
      `,children:[C.jsx("div",{className:"absolute top-0 w-full h-12 flex justify-center items-center z-20 pointer-events-none",children:C.jsx("div",{className:"bg-[#D4AF37] text-[#1a0f0f] px-4 pt-1 pb-2 rounded-b-lg font-display font-bold text-sm tracking-widest shadow-md",children:SC(o)})}),C.jsxs("div",{className:"absolute inset-0 bg-gray-900",children:[C.jsx("img",{src:t.imageUrl,alt:t.name,className:`
                    w-full h-full object-cover transition-transform duration-1000
                    ${i?"scale-110 grayscale-0":"grayscale-[0.5] sepia-[0.3] group-hover:grayscale-0 group-hover:scale-110"}
                `}),C.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/old-map.png')] opacity-30 mix-blend-overlay pointer-events-none"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1a0505] via-transparent to-[#1a0505] opacity-90 pointer-events-none"})]}),C.jsx("div",{className:"absolute top-2 left-2 text-[#D4AF37] z-20 opacity-80",children:C.jsx("i",{className:"fa-solid fa-star-of-life text-xs"})}),C.jsx("div",{className:"absolute top-2 right-2 text-[#D4AF37] z-20 opacity-80",children:C.jsx("i",{className:"fa-solid fa-star-of-life text-xs"})}),C.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 w-[90%] flex flex-col items-center justify-center z-20",children:C.jsxs("div",{className:"border-t border-b border-[#D4AF37] py-2 w-full text-center backdrop-blur-sm bg-black/40",children:[C.jsx("h3",{className:"text-xl font-bold font-display text-[#f0e6d2] uppercase tracking-wider",children:t.name}),C.jsx("p",{className:"text-[10px] uppercase font-bold tracking-[0.2em] text-[#D4AF37] mt-1",children:t.title})]})}),C.jsxs("div",{className:"absolute inset-0 bg-[#1a0505]/95 translate-y-full group-hover:translate-y-0 transition-transform duration-500 z-30 flex flex-col items-center justify-center text-paper p-6 text-center border-t-2 border-[#D4AF37]",children:[C.jsx("i",{className:"fa-solid fa-eye text-[#D4AF37] mb-2 text-xl"}),C.jsxs("p",{className:"italic font-serif text-sm mb-6 leading-relaxed opacity-90",children:['"',t.description,'"']}),C.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full border-t border-[#D4AF37]/30 pt-4",children:[C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-lg font-display",children:t.stats.strength})]}),C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-lg font-display",children:t.stats.wits})]}),C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-lg font-display",children:t.stats.charm})]})]}),C.jsxs("div",{className:"mt-6 w-full text-left",children:[C.jsx("span",{className:"text-[10px] text-red-500 uppercase tracking-widest block mb-1",children:""}),C.jsx("span",{className:"text-xs text-stone-gray block font-serif italic",children:t.weakness})]})]})]})},TC=({rule:t,triggeredInfo:e,parsedMapping:i,autoShowToken:o=0,isHighlighted:a=!1,statusOverride:r})=>{const[f,p]=We.useState(!1),[y,m]=We.useState(!1),v=!!e;We.useEffect(()=>{if(o>0&&v){m(!0);const G=setTimeout(()=>m(!1),3e3);return()=>clearTimeout(G)}},[o,v]);const _=f||y,T=()=>{if(v)return"border-yellow-400";switch(t.type){case"CONSTRAINT":return"border-red-800";case"BONUS":return"border-green-700";case"RISK":return"border-orange-600";case"REALITY":return"border-purple-800";default:return"border-gray-800"}},A=()=>{switch(t.type){case"CONSTRAINT":return"";case"BONUS":return"";case"RISK":return"";case"REALITY":return"";default:return""}},x=()=>{switch(t.type){case"CONSTRAINT":return"fa-lock";case"BONUS":return"fa-gift";case"RISK":return"fa-dice-d20";case"REALITY":return"fa-scale-balanced"}},w=r==="inactive"?"inactive":r==="triggered"?"triggered":t.active?v||r==="active_not_triggered"?r==="active_not_triggered"?"active":"triggered":"active":"inactive",b=We.useMemo(()=>(i==null?void 0:i.linkedStats)??[],[i]),H=()=>{switch(w){case"triggered":return C.jsx("span",{className:"text-[10px] bg-yellow-500 text-black px-1.5 py-0.5 rounded",children:""});case"active":return C.jsx("span",{className:"text-[10px] bg-green-700 text-white px-1.5 py-0.5 rounded",children:""});case"inactive":return C.jsx("span",{className:"text-[10px] bg-stone-gray/40 text-stone-gray px-1.5 py-0.5 rounded",children:""});default:return null}};return C.jsxs("div",{className:`
        relative w-full mb-3 bg-[#F5DEB3] rounded-lg p-3 border-l-4 shadow-md 
        transform hover:-translate-y-1 transition-all duration-300
        ${T()}
        ${v?"ring-2 ring-yellow-400/60 shadow-[0_0_12px_rgba(250,204,21,0.3)] animate-pulse-once":""}
        ${a?"ring-2 ring-yellow-300 animate-pulse":""}
      `,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[C.jsxs("div",{className:"flex justify-between items-start mb-1",children:[C.jsxs("h4",{className:"font-bold text-[#4a0404] text-sm uppercase tracking-wider flex items-center gap-1.5",children:[t.title,v&&C.jsxs("span",{className:"inline-flex items-center text-[10px] bg-yellow-500 text-black px-1.5 py-0.5 rounded-full font-bold normal-case tracking-normal",children:[C.jsx("i",{className:"fa-solid fa-bolt mr-0.5 text-[8px]"}),""]})]}),C.jsx("i",{className:`fa-solid ${x()} text-[#8B4513] opacity-50`})]}),C.jsx("p",{className:"text-xs text-[#5c4033] leading-snug",children:t.description}),t.type==="REALITY"&&!v&&C.jsx("div",{className:"absolute -right-1 -top-1 w-3 h-3 bg-purple-600 rounded-full animate-pulse"}),_&&C.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-64 z-50",children:C.jsxs("div",{className:"bg-[#1a0505] border border-yellow-500/60 rounded-lg p-3 shadow-2xl text-left text-paper text-xs",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsxs("span",{className:"flex items-center gap-1.5 text-yellow-400 uppercase tracking-wider text-[10px]",children:[C.jsx("i",{className:`fa-solid ${x()} text-[10px]`}),A()]}),H()]}),b.length>0&&C.jsxs("div",{className:"mb-2",children:[C.jsx("div",{className:"text-[10px] text-stone-gray uppercase tracking-wider mb-1",children:""}),C.jsx("div",{className:"space-y-1",children:b.map(G=>{const I=G.threshold===null?null:Math.abs(G.currentValue-G.threshold),O=G.threshold===null?"":G.isTriggered?"":`: ${I}`;return C.jsxs("div",{className:"flex justify-between text-[11px]",children:[C.jsx("span",{children:G.statLabel}),C.jsxs("span",{className:"text-stone-gray",children:[G.currentValue,"/10 ",G.threshold!==null?`( ${G.threshold})`:""]}),C.jsx("span",{className:"text-yellow-300",children:O})]},`${t.id}-${G.statKey}`)})})]}),C.jsx("div",{className:"border-t border-brown-700/60 pt-2 mt-2",children:w==="triggered"&&e?C.jsxs("div",{children:[C.jsx("div",{className:"text-yellow-400 font-bold text-[10px] uppercase tracking-wider mb-1",children:""}),C.jsx("p",{className:"text-paper text-xs leading-relaxed",children:e.reason})]}):w==="active"?C.jsxs("div",{className:"text-stone-gray",children:["",b.length===0?"":""]}):C.jsx("div",{className:"text-stone-gray",children:""})}),C.jsx("div",{className:"absolute -bottom-1.5 left-6 w-3 h-3 bg-[#1a0505] border-r border-b border-yellow-500/60 transform rotate-45"})]})})]})},Qg=t=>{let e;const i=new Set,o=(m,v)=>{const _=typeof m=="function"?m(e):m;if(!Object.is(_,e)){const T=e;e=v??(typeof _!="object"||_===null)?_:Object.assign({},e,_),i.forEach(A=>A(e,T))}},a=()=>e,p={setState:o,getState:a,getInitialState:()=>y,subscribe:m=>(i.add(m),()=>i.delete(m))},y=e=t(o,a,p);return p},EC=(t=>t?Qg(t):Qg),CC=t=>t;function AC(t,e=CC){const i=Qa.useSyncExternalStore(t.subscribe,Qa.useCallback(()=>e(t.getState()),[t,e]),Qa.useCallback(()=>e(t.getInitialState()),[t,e]));return Qa.useDebugValue(i),i}const xC=t=>{const e=EC(t),i=o=>AC(e,o);return Object.assign(i,e),i},bC=(t=>xC);function d0(t,e){let i;try{i=t()}catch{return}return{getItem:a=>{var r;const f=y=>y===null?null:JSON.parse(y,void 0),p=(r=i.getItem(a))!=null?r:null;return p instanceof Promise?p.then(f):f(p)},setItem:(a,r)=>i.setItem(a,JSON.stringify(r,void 0)),removeItem:a=>i.removeItem(a)}}const Df=t=>e=>{try{const i=t(e);return i instanceof Promise?i:{then(o){return Df(o)(i)},catch(o){return this}}}catch(i){return{then(o){return this},catch(o){return Df(o)(i)}}}},wC=(t,e)=>(i,o,a)=>{let r={storage:d0(()=>window.localStorage),partialize:b=>b,version:0,merge:(b,H)=>({...H,...b}),...e},f=!1,p=0;const y=new Set,m=new Set;let v=r.storage;if(!v)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),i(...b)},o,a);const _=()=>{const b=r.partialize({...o()});return v.setItem(r.name,{state:b,version:r.version})},T=a.setState;a.setState=(b,H)=>(T(b,H),_());const A=t((...b)=>(i(...b),_()),o,a);a.getInitialState=()=>A;let x;const w=()=>{var b,H;if(!v)return;const G=++p;f=!1,y.forEach(O=>{var q;return O((q=o())!=null?q:A)});const I=((H=r.onRehydrateStorage)==null?void 0:H.call(r,(b=o())!=null?b:A))||void 0;return Df(v.getItem.bind(v))(r.name).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==r.version){if(r.migrate){const q=r.migrate(O.state,O.version);return q instanceof Promise?q.then(Q=>[!0,Q]):[!0,q]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,O.state];return[!1,void 0]}).then(O=>{var q;if(G!==p)return;const[Q,$]=O;if(x=r.merge($,(q=o())!=null?q:A),i(x,!0),Q)return _()}).then(()=>{G===p&&(I==null||I(x,void 0),x=o(),f=!0,m.forEach(O=>O(x)))}).catch(O=>{G===p&&(I==null||I(void 0,O))})};return a.persist={setOptions:b=>{r={...r,...b},b.storage&&(v=b.storage)},clearStorage:()=>{v==null||v.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>w(),hasHydrated:()=>f,onHydrate:b=>(y.add(b),()=>{y.delete(b)}),onFinishHydration:b=>(m.add(b),()=>{m.delete(b)})},r.skipHydration||w(),x||A},RC=wC,NC=d0(()=>localStorage),Cl="__default__",Xs=()=>({narrative:{...rl.narrative},realityMapping:{...rl.realityMapping},worldRules:{...rl.worldRules},choices:{...rl.choices}}),Zg={phase:vn.SELECTION,character:null,rules:f0,storyLog:[],currentStory:null,decisionHistory:[],realityStats:{credibility:5,stress:2,connections:3},turnCount:0,maxTurns:10,finalSummary:void 0,loading:!1,currentTriggeredRules:[],narrativeLoading:!1,narrativeStreamBuffer:"",realityAnalysisLoading:!1,realityAnalysis:null,worldRulesLoading:!1,ruleStatusMap:{},choicesLoading:!1,showAiSettings:!1,provider:"gemini",geminiKey:"",openaiConfig:{apiKey:"",baseUrl:"https://api.openai.com/v1",model:"gpt-4-turbo-preview"},taskConfigScopeId:Cl,taskConfigsByCharacter:{[Cl]:Xs()}},MC=t=>{var i;const e=t.taskConfigScopeId||((i=t.character)==null?void 0:i.id)||Cl;return t.taskConfigsByCharacter[e]||t.taskConfigsByCharacter[Cl]||Xs()},pe=bC()(RC(t=>({...Zg,setPhase:e=>t({phase:e}),setCharacter:e=>t({character:e}),setRules:e=>t(i=>({rules:typeof e=="function"?e(i.rules):e})),setStoryLog:e=>t(i=>({storyLog:typeof e=="function"?e(i.storyLog):e})),setCurrentStory:e=>t({currentStory:e}),setDecisionHistory:e=>t(i=>({decisionHistory:typeof e=="function"?e(i.decisionHistory):e})),setRealityStats:e=>t(i=>({realityStats:typeof e=="function"?e(i.realityStats):e})),setTurnCount:e=>t({turnCount:e}),setMaxTurns:e=>t({maxTurns:e}),setFinalSummary:e=>t({finalSummary:e}),setLoading:e=>t({loading:e}),setCurrentTriggeredRules:e=>t({currentTriggeredRules:e}),setNarrativeLoading:e=>t({narrativeLoading:e}),setNarrativeStreamBuffer:e=>t({narrativeStreamBuffer:e}),setRealityAnalysisLoading:e=>t({realityAnalysisLoading:e}),setRealityAnalysis:e=>t({realityAnalysis:e}),setWorldRulesLoading:e=>t({worldRulesLoading:e}),setRuleStatusMap:e=>t({ruleStatusMap:e}),setChoicesLoading:e=>t({choicesLoading:e}),updateGameState:e=>t(i=>e(i)),resetGame:()=>t(e=>({...Zg,showAiSettings:!1,provider:e.provider,geminiKey:e.geminiKey,openaiConfig:e.openaiConfig,taskConfigScopeId:e.taskConfigScopeId,taskConfigsByCharacter:e.taskConfigsByCharacter})),startNewGame:e=>t({phase:vn.GAMEPLAY,character:e,currentStory:Kg,storyLog:[Kg],decisionHistory:[],turnCount:1,realityStats:{credibility:5,stress:2,connections:3},rules:f0,finalSummary:void 0,loading:!1,currentTriggeredRules:[],narrativeLoading:!1,narrativeStreamBuffer:"",realityAnalysisLoading:!1,realityAnalysis:null,worldRulesLoading:!1,ruleStatusMap:{},choicesLoading:!1}),setShowAiSettings:e=>t({showAiSettings:e}),setProvider:e=>t({provider:e}),setGeminiKey:e=>t({geminiKey:e}),setOpenaiConfig:e=>t(i=>({openaiConfig:typeof e=="function"?e(i.openaiConfig):e})),setTaskConfigScopeId:e=>t(i=>({taskConfigScopeId:e,taskConfigsByCharacter:i.taskConfigsByCharacter[e]?i.taskConfigsByCharacter:{...i.taskConfigsByCharacter,[e]:Xs()}})),setTaskConfigs:e=>t(i=>({taskConfigsByCharacter:{...i.taskConfigsByCharacter,[i.taskConfigScopeId]:e}})),updateTaskConfig:(e,i)=>t(o=>{var a;return{taskConfigsByCharacter:{...o.taskConfigsByCharacter,[o.taskConfigScopeId]:{...o.taskConfigsByCharacter[o.taskConfigScopeId]||Xs(),[e]:{...((a=o.taskConfigsByCharacter[o.taskConfigScopeId])==null?void 0:a[e])||Xs()[e],...i}}}}}),resetTaskConfigs:()=>t(e=>({taskConfigsByCharacter:{...e.taskConfigsByCharacter,[e.taskConfigScopeId]:Xs()}}))}),{name:"character-card-game-store",storage:NC,partialize:t=>({phase:t.phase,character:t.character,rules:t.rules,storyLog:t.storyLog,currentStory:t.currentStory,decisionHistory:t.decisionHistory,realityStats:t.realityStats,turnCount:t.turnCount,maxTurns:t.maxTurns,finalSummary:t.finalSummary,provider:t.provider,geminiKey:t.geminiKey,openaiConfig:t.openaiConfig,taskConfigScopeId:t.taskConfigScopeId,taskConfigsByCharacter:t.taskConfigsByCharacter})})),IC=()=>pe(t=>t.phase),DC=()=>pe(t=>t.character),UC=()=>pe(t=>t.rules),LC=()=>pe(t=>t.storyLog),h0=()=>pe(t=>t.currentStory),OC=()=>pe(t=>t.decisionHistory),GC=()=>pe(t=>t.realityStats),p0=()=>pe(t=>t.turnCount),m0=()=>pe(t=>t.maxTurns),PC=()=>pe(t=>t.finalSummary),kC=()=>pe(t=>t.loading),HC=()=>pe(t=>t.currentTriggeredRules),qC=()=>pe(t=>t.realityAnalysisLoading),BC=()=>pe(t=>t.realityAnalysis),VC=()=>pe(t=>t.ruleStatusMap),zC=()=>pe(t=>t.showAiSettings),g0=()=>pe(t=>t.provider),y0=()=>pe(t=>t.geminiKey),v0=()=>pe(t=>t.openaiConfig),FC=()=>pe(t=>t.taskConfigScopeId),_0=()=>pe(t=>MC(t)),S0=()=>pe(t=>t.setPhase),$C=()=>pe(t=>t.setCharacter),JC=()=>pe(t=>t.setRules),YC=()=>pe(t=>t.setStoryLog),KC=()=>pe(t=>t.setCurrentStory),XC=()=>pe(t=>t.setDecisionHistory),QC=()=>pe(t=>t.setRealityStats),ZC=()=>pe(t=>t.setTurnCount),WC=()=>pe(t=>t.setFinalSummary),jC=()=>pe(t=>t.setLoading),eA=()=>pe(t=>t.setCurrentTriggeredRules),tA=()=>pe(t=>t.setNarrativeLoading),nA=()=>pe(t=>t.setRealityAnalysisLoading),iA=()=>pe(t=>t.setRealityAnalysis),sA=()=>pe(t=>t.setWorldRulesLoading),oA=()=>pe(t=>t.setRuleStatusMap),lA=()=>pe(t=>t.setChoicesLoading),aA=()=>pe(t=>t.resetGame),rA=()=>pe(t=>t.startNewGame),T0=()=>pe(t=>t.setShowAiSettings),uA=()=>pe(t=>t.setProvider),cA=()=>pe(t=>t.setGeminiKey),fA=()=>pe(t=>t.setOpenaiConfig),E0=()=>pe(t=>t.setTaskConfigScopeId),dA=()=>pe(t=>t.updateTaskConfig),hA=()=>pe(t=>t.resetTaskConfigs),Wg={narrative:"",realityMapping:"",worldRules:"",choices:""},pA=()=>{var G;const t=zC(),e=T0(),i=g0(),o=uA(),a=y0(),r=cA(),f=v0(),p=fA(),y=FC(),m=E0(),v=_0(),_=dA(),T=hA(),[A,x]=We.useState("narrative"),w=We.useMemo(()=>[{id:Cl,label:""},...c0.map(I=>({id:I.id,label:`${I.name}${I.title}`}))],[]),b=()=>e(!1);if(!t)return null;const H=v[A];return C.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:C.jsxs("div",{className:"bg-[#1a0f0f] border-4 border-double border-gold rounded-lg w-full max-w-2xl shadow-[0_0_50px_rgba(212,175,55,0.3)] overflow-hidden animate-fade-in",children:[C.jsxs("div",{className:"p-4 border-b border-gold/30 flex items-center justify-between bg-velvet-red/20",children:[C.jsxs("h3",{className:"font-display text-2xl text-gold",children:[C.jsx("i",{className:"fa-solid fa-cog mr-2"}),"AI "]}),C.jsx("button",{onClick:b,className:"text-gold/60 hover:text-gold",children:C.jsx("i",{className:"fa-solid fa-times text-xl"})})]}),C.jsxs("div",{className:"p-6 space-y-5 bg-[#0f0303] max-h-[80vh] overflow-y-auto",children:[C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-gold mb-1 block",children:""}),C.jsx("select",{value:y,onChange:I=>m(I.target.value),className:"w-full px-3 py-2 bg-brown-800/40 border border-brown-600 rounded",children:w.map(I=>C.jsx("option",{value:I.id,children:I.label},I.id))})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[C.jsxs("label",{className:"p-3 border rounded cursor-pointer",children:[C.jsx("input",{type:"radio",checked:i==="gemini",onChange:()=>o("gemini"),className:"mr-2"}),"Gemini"]}),C.jsxs("label",{className:"p-3 border rounded cursor-pointer",children:[C.jsx("input",{type:"radio",checked:i==="openai",onChange:()=>o("openai"),className:"mr-2"}),"OpenAI"]})]}),i==="gemini"?C.jsx("input",{type:"password",value:a,onChange:I=>r(I.target.value),placeholder:"Gemini API Key",className:"w-full px-3 py-2 bg-brown-800/40 border"}):C.jsxs("div",{className:"grid gap-2",children:[C.jsx("input",{type:"text",value:f.baseUrl,onChange:I=>p(O=>({...O,baseUrl:I.target.value})),placeholder:"Base URL",className:"w-full px-3 py-2 bg-brown-800/40 border"}),C.jsx("input",{type:"password",value:f.apiKey,onChange:I=>p(O=>({...O,apiKey:I.target.value})),placeholder:"API Key",className:"w-full px-3 py-2 bg-brown-800/40 border"}),C.jsx("input",{type:"text",value:f.model,onChange:I=>p(O=>({...O,model:I.target.value})),placeholder:"Model",className:"w-full px-3 py-2 bg-brown-800/40 border"})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"text-xs text-stone-gray mb-2",children:["",((G=w.find(I=>I.id===y))==null?void 0:G.label)||""]}),C.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[C.jsxs("label",{className:"text-xs",children:["Gemini ",C.jsx("input",{type:"text",value:H.geminiModel||"",onChange:I=>_(A,{geminiModel:I.target.value||void 0}),placeholder:"gemini-2.5-flash-preview-05-20",className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),C.jsxs("label",{className:"text-xs",children:["OpenAI ",C.jsx("input",{type:"text",value:H.openaiModel||"",onChange:I=>_(A,{openaiModel:I.target.value||void 0}),placeholder:"gpt-4.1-mini",className:"w-full px-2 py-1 bg-brown-800/40 border"})]})]}),C.jsx("div",{className:"flex gap-2 flex-wrap mb-3",children:Object.keys(Wg).map(I=>C.jsx("button",{onClick:()=>x(I),className:`px-3 py-1 border rounded ${A===I?"border-gold text-gold":"border-brown-600 text-stone-gray"}`,children:Wg[I]},I))}),C.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[C.jsxs("label",{className:"text-xs",children:["Temperature",C.jsx("input",{type:"number",step:"0.05",value:H.temperature,onChange:I=>_(A,{temperature:Number(I.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),C.jsxs("label",{className:"text-xs",children:["Max Tokens",C.jsx("input",{type:"number",value:H.maxOutputTokens,onChange:I=>_(A,{maxOutputTokens:Number(I.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),C.jsxs("label",{className:"text-xs",children:["Timeout(ms)",C.jsx("input",{type:"number",value:H.timeoutMs,onChange:I=>_(A,{timeoutMs:Number(I.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),C.jsxs("label",{className:"text-xs",children:["",C.jsx("input",{type:"number",value:H.maxRetries,onChange:I=>_(A,{maxRetries:Number(I.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),C.jsxs("label",{className:"text-xs",children:["Top P",C.jsx("input",{type:"number",step:"0.01",value:H.topP??"",onChange:I=>_(A,{topP:I.target.value===""?void 0:Number(I.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),C.jsxs("label",{className:"text-xs",children:["(ms)",C.jsx("input",{type:"number",value:H.retryDelayMs,onChange:I=>_(A,{retryDelayMs:Number(I.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]})]}),C.jsx("button",{onClick:T,className:"mt-3 text-xs underline text-paper/70",children:""})]})]}),C.jsx("div",{className:"p-4 bg-velvet-red/20 border-t border-gold/30 flex justify-end",children:C.jsx("button",{onClick:b,className:"px-6 py-2 bg-gold text-black font-bold",children:""})})]})})},vf=t=>["I","II","III","IV","V","VI","VII","VIII","IX","X"][t-1]||t,jg=(t,e=80)=>t.length<=e?t:`${t.slice(0,e)}`,_f=(t,e,i)=>{const o=t>0?"fa-arrow-up":t<0?"fa-arrow-down":"fa-minus",a=t>0?`+${t}`:`${t}`;return C.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-serif ${i}`,children:[C.jsx("i",{className:`fa-solid ${o}`}),e," ",a]})},mA=()=>{const t=h0(),e=OC(),i=S0(),o=p0(),a=m0();return C.jsxs("div",{className:"min-h-screen w-full bg-[#0f0303] text-paper relative overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle,transparent_20%,#000000_100%)] opacity-80"}),C.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[C.jsxs("header",{className:"flex items-center justify-between px-6 py-4 border-b border-brown-700 bg-[#1a0505]/80",children:[C.jsxs("div",{children:[C.jsx("h1",{className:"font-display text-2xl text-gold",children:""}),C.jsxs("p",{className:"text-xs font-serif text-paper/70",children:["ACT ",vf(o)," / ",vf(a)]})]}),C.jsxs("button",{onClick:()=>i(vn.GAMEPLAY),className:"inline-flex items-center gap-2 px-4 py-2 border border-gold text-gold bg-black/40 hover:bg-gold/10 transition-colors rounded-full font-display text-sm",children:[C.jsx("i",{className:"fa-solid fa-arrow-left"}),""]})]}),C.jsxs("main",{className:"flex-1 grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-6 p-6",children:[C.jsxs("section",{className:"bg-[#1a0b0b]/60 border border-brown-700 rounded-2xl p-6 shadow-[0_0_30px_rgba(0,0,0,0.4)]",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx("h2",{className:"font-display text-xl text-gold",children:""}),C.jsxs("span",{className:"text-xs text-paper/50 font-serif",children:[" ",e.length," "]})]}),e.length===0?C.jsx("div",{className:"text-center py-16 text-paper/60 font-serif",children:""}):C.jsx("div",{className:"space-y-8",children:e.map((r,f)=>{const p=f===e.length-1;return C.jsxs("div",{className:"relative pl-10",children:[f!==e.length-1&&C.jsx("span",{className:"absolute left-[18px] top-6 bottom-[-24px] w-px bg-gold/30"}),C.jsx("span",{className:"absolute left-[10px] top-6 w-4 h-4 rounded-full border border-gold bg-[#2c1810]"}),C.jsxs("div",{className:`rounded-xl border-2 bg-[#2c1810]/70 p-5 shadow-lg transition-colors ${p?"border-gold animate-pulse":"border-gold/60"}`,children:[C.jsxs("div",{className:"flex flex-wrap items-center gap-3 justify-between",children:[C.jsxs("h3",{className:"font-display text-lg text-gold",children:["ACT ",vf(r.turn)]}),C.jsx("span",{className:"text-xs font-serif text-paper/60",children:jg(r.sceneTextPreview)})]}),C.jsxs("div",{className:"mt-3",children:[C.jsx("p",{className:"text-sm font-serif text-paper/80",children:""}),C.jsx("p",{className:"text-sm font-serif text-paper/60 italic",children:jg(r.sceneTextPreview)})]}),C.jsxs("div",{className:"mt-4",children:[C.jsx("p",{className:"text-xs uppercase tracking-widest text-paper/60 mb-1",children:""}),C.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 border border-gold bg-gold/10 rounded-full text-gold text-sm font-display",children:[C.jsx("i",{className:"fa-solid fa-route"}),r.chosenOptionText]})]}),C.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[_f(r.statDelta.credibility,"","text-green-300"),_f(r.statDelta.stress,"","text-red-300"),_f(r.statDelta.connections,"","text-blue-300")]}),C.jsxs("div",{className:"mt-4",children:[C.jsx("p",{className:"text-xs uppercase tracking-widest text-paper/60 mb-1",children:""}),r.triggeredRules.length===0?C.jsx("p",{className:"text-xs text-paper/40 font-serif",children:""}):C.jsx("div",{className:"flex flex-wrap gap-2",children:r.triggeredRules.map(y=>C.jsx("span",{className:"text-xs px-2 py-1 bg-purple-900/40 border border-purple-500/60 rounded-full text-purple-200",children:y.ruleTitle},y.ruleId))})]}),C.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3 text-xs font-serif text-paper/70",children:[C.jsxs("span",{children:["",r.statSnapshot.credibility]}),C.jsxs("span",{children:["",r.statSnapshot.stress]}),C.jsxs("span",{children:["",r.statSnapshot.connections]})]})]})]},r.chosenOptionId)})})]}),C.jsxs("section",{className:"bg-[#1a0b0b]/60 border border-brown-700 rounded-2xl p-6 shadow-[0_0_30px_rgba(0,0,0,0.4)]",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx("h2",{className:"font-display text-xl text-gold",children:""}),C.jsx("span",{className:"text-xs font-serif text-paper/50",children:""})]}),C.jsx("div",{className:"space-y-4",children:t==null?void 0:t.choices.map(r=>C.jsxs("div",{className:"group relative overflow-hidden rounded-xl border border-dashed border-gold/60 bg-black/40 p-4",children:[C.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(212,175,55,0.15),_transparent_70%)] opacity-60"}),C.jsxs("div",{className:"relative z-10 flex items-start gap-3",children:[C.jsx("div",{className:"text-gold/70 text-lg",children:C.jsx("i",{className:"fa-solid fa-question"})}),C.jsxs("div",{className:"flex-1",children:[C.jsx("p",{className:"text-sm font-display text-paper/70",children:""}),C.jsx("p",{className:"text-xs text-paper/40 font-serif",children:""})]})]}),C.jsxs("div",{className:"absolute inset-0 bg-black/80 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-center px-4",children:[C.jsx("p",{className:"text-sm font-display text-gold mb-1",children:r.text}),C.jsx("p",{className:"text-xs font-serif text-paper/70",children:r.consequence})]})]},r.id))}),C.jsxs("div",{className:"mt-6 text-xs text-paper/50 font-serif flex items-center gap-2",children:[C.jsx("span",{className:"w-6 h-px bg-gold/40"}),""]})]})]})]})]})},gA=({isOpen:t,turnNumber:e,onViewDecision:i,onDismiss:o})=>{const[a,r]=We.useState(!1);return We.useEffect(()=>{if(!t)return;const f=window.setTimeout(()=>{r(!0)},5e3);return()=>window.clearTimeout(f)},[t]),We.useEffect(()=>{if(!a)return;const f=window.setTimeout(()=>{r(!1),o()},300);return()=>window.clearTimeout(f)},[a,o]),t?C.jsx("div",{className:"fixed inset-x-0 bottom-6 z-50 flex justify-center pointer-events-none",children:C.jsxs("div",{className:`pointer-events-auto w-[min(90vw,520px)] rounded-2xl border border-gold bg-black/70 px-5 py-4 shadow-[0_0_25px_rgba(212,175,55,0.35)] backdrop-blur transition-all duration-300 ${a?"opacity-0 translate-y-3":"opacity-100 translate-y-0 animate-fade-in-up"}`,children:[C.jsxs("div",{className:"flex items-start gap-3",children:[C.jsx("div",{className:"text-gold text-xl",children:C.jsx("i",{className:"fa-solid fa-scroll"})}),C.jsxs("div",{className:"flex-1",children:[C.jsxs("p",{className:"font-display text-gold text-lg",children:[" ",e,"   "]}),C.jsx("p",{className:"text-xs font-serif text-paper/60 mt-1",children:""})]})]}),C.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[C.jsx("button",{onClick:()=>{r(!0),i()},className:"px-4 py-2 text-sm font-display border border-gold text-gold rounded-full hover:bg-gold/10 transition-colors",children:""}),C.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 text-sm font-display border border-brown-600 text-paper/70 rounded-full hover:text-paper hover:border-gold/60 transition-colors",children:""})]})]})}):null},yA=({label:t,icon:e,value:i,max:o=10,barColor:a,linkedRules:r})=>{const f=r.some(p=>p.link.isTriggered&&p.isActive);return C.jsxs("div",{className:"space-y-2",children:[C.jsxs("div",{className:"flex justify-between text-xs font-bold text-stone-gray",children:[C.jsxs("span",{children:[C.jsx("i",{className:`fa-solid ${e} mr-1.5`}),t]}),C.jsxs("span",{className:f?"text-red-400 animate-pulse":"",children:[i,"/",o]})]}),C.jsxs("div",{className:"w-full bg-[#2c1810] h-2.5 rounded-full overflow-hidden border border-brown-600 relative",children:[C.jsx("div",{className:`${a} h-full transition-all duration-1000`,style:{width:`${i/o*100}%`}}),r.filter(p=>p.link.threshold!==null).map(p=>C.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500/60",style:{left:`${p.link.threshold/o*100}%`},title:`: ${p.link.threshold}`},`${p.rule.id}-${p.link.threshold}`))]}),C.jsxs("div",{className:"space-y-1",children:[r.length===0&&C.jsx("div",{className:"text-[10px] text-stone-gray italic",children:""}),r.map(p=>{const{link:y,rule:m,isActive:v,triggeredInfo:_}=p,T=y.isTriggered&&v,A=y.threshold===null?null:Math.abs(y.currentValue-y.threshold),x=v&&y.threshold!==null&&!T&&A!==null&&A<=2,w=v?T?"text-red-300 bg-red-900/30 border-red-700/60 animate-pulse":x?"text-yellow-300 bg-yellow-900/20 border-yellow-700/60":y.threshold===null?"text-purple-200 bg-purple-900/20 border-purple-700/40":"text-green-300 bg-green-900/20 border-green-700/50":"text-stone-gray bg-brown-800/30 border-brown-700/60",b=v?T?` ${_?`${_.reason}`:""}`:x?`  ${A}`:y.threshold===null?" ":" ":"";return C.jsxs("div",{className:`flex items-start justify-between gap-2 rounded border px-2 py-1 text-[10px] ${w}`,children:[C.jsxs("div",{children:[C.jsx("span",{className:"font-semibold",children:m.title}),C.jsxs("span",{className:"ml-1 text-[9px] opacity-80",children:["(",m.type,")"]}),C.jsx("p",{className:"text-[10px] opacity-80",children:y.warningMessage})]}),C.jsx("span",{className:"text-right min-w-[90px]",children:b})]},`${m.id}-${y.statKey}-${y.warningMessage}`)})]})]})},vA=[{key:"credibility",label:"",icon:"fa-scale-balanced",barColor:"bg-forest-green"},{key:"stress",label:"",icon:"fa-brain",barColor:"bg-orange-700"},{key:"connections",label:"",icon:"fa-handshake",barColor:"bg-blue-700"}],ey=({rules:t,realityStats:e,parsedMappings:i,triggeredMap:o,className:a,isMobile:r=!1,aiAnalysis:f=null,loading:p=!1})=>{const[y,m]=We.useState(!0),v=We.useMemo(()=>vA.map(w=>{const b=i.flatMap(H=>H.linkedStats.filter(G=>G.statKey===w.key).map(G=>({rule:H.rule,link:G,isActive:H.rule.active,triggeredInfo:o.get(H.rule.id)})));return{...w,linkedRules:b}}),[i,o]),_=We.useMemo(()=>{const w=new Map;return(f||[]).forEach(b=>w.set(b.statKey,{status:b.status,warningMessage:b.warningMessage,reason:b.reason})),w},[f]),T=We.useMemo(()=>{const w=new Set(i.filter(b=>b.linkedStats.length>0).map(b=>b.rule.id));return t.filter(b=>b.active&&!w.has(b.id))},[i,t]),A=C.jsx("div",{className:"grid grid-cols-3 gap-2",children:v.map(w=>{var G;const H=((G=_.get(w.key))==null?void 0:G.status)==="triggered"||w.linkedRules.some(I=>I.isActive&&I.link.isTriggered);return C.jsxs("div",{className:"rounded border border-brown-700/60 p-2 bg-brown-900/30",children:[C.jsxs("div",{className:"flex items-center justify-between text-[10px] text-stone-gray",children:[C.jsx("span",{children:w.label}),H&&C.jsx("i",{className:"fa-solid fa-triangle-exclamation text-red-400"})]}),C.jsx("div",{className:"mt-1 w-full bg-[#2c1810] h-1.5 rounded-full overflow-hidden",children:C.jsx("div",{className:`${w.barColor} h-full`,style:{width:`${e[w.key]/10*100}%`}})})]},w.key)})}),x=C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"space-y-4 bg-brown-800/30 p-3 rounded-lg border border-brown",children:[p&&C.jsx("div",{className:"text-xs text-stone-gray",children:"..."}),!p&&f&&f.length>0&&C.jsx("div",{className:"space-y-1 text-xs",children:f.map(w=>C.jsxs("div",{className:"text-paper/80",children:[C.jsx("span",{className:"text-gold mr-1",children:w.statKey}),C.jsx("span",{children:w.warningMessage||w.reason})]},w.statKey))}),v.map(w=>C.jsx(yA,{label:w.label,icon:w.icon,value:e[w.key],barColor:w.barColor,linkedRules:w.linkedRules},w.key))]}),C.jsxs("div",{children:[C.jsxs("h3",{className:"text-purple-400 text-xs font-bold uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[C.jsx("i",{className:"fa-solid fa-bolt text-[10px]"}),""]}),T.length===0?C.jsx("p",{className:"text-[10px] text-stone-gray italic",children:""}):C.jsx("div",{className:"space-y-2",children:T.map(w=>C.jsxs("div",{className:"rounded border border-brown-700/60 bg-[#1a0a0a] p-2 text-[11px]",children:[C.jsxs("div",{className:"flex items-center gap-1 text-gold",children:[C.jsx("span",{className:"font-semibold",children:w.title}),C.jsxs("span",{className:"text-[9px] text-stone-gray",children:["(",w.type,")"]})]}),C.jsx("p",{className:"text-stone-gray mt-1",children:w.description})]},w.id))})]})]});return r?C.jsxs("div",{className:`md:hidden rounded-xl border border-brown-700/60 bg-[#0f0303] p-3 ${a??""}`,children:[C.jsxs("button",{type:"button",onClick:()=>m(w=>!w),className:"w-full flex items-center justify-between text-gold font-display text-sm mb-3",children:[C.jsxs("span",{className:"flex items-center gap-2",children:[C.jsx("i",{className:"fa-solid fa-map text-[10px]"}),""]}),C.jsxs("span",{className:"text-xs text-stone-gray",children:[y?"":"",C.jsx("i",{className:`fa-solid fa-chevron-${y?"down":"up"} ml-2`})]})]}),y?A:x]}):C.jsx("div",{className:a,children:x})};var _A={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let SA,TA;function EA(){return{geminiUrl:SA,vertexUrl:TA}}function CA(t,e,i,o){var a,r;if(!(t!=null&&t.baseUrl)){const f=EA();return e?(a=f.vertexUrl)!==null&&a!==void 0?a:i:(r=f.geminiUrl)!==null&&r!==void 0?r:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jn{}function ee(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const r=e[a];return r!=null?String(r):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function d(t,e,i){for(let r=0;r<e.length-1;r++){const f=e[r];if(f.endsWith("[]")){const p=f.slice(0,-2);if(!(p in t))if(Array.isArray(i))t[p]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(t[p])){const y=t[p];if(Array.isArray(i))for(let m=0;m<y.length;m++){const v=y[m];d(v,e.slice(r+1),i[m])}else for(const m of y)d(m,e.slice(r+1),i)}return}else if(f.endsWith("[0]")){const p=f.slice(0,-3);p in t||(t[p]=[{}]);const y=t[p];d(y[0],e.slice(r+1),i);return}(!t[f]||typeof t[f]!="object")&&(t[f]={}),t=t[f]}const o=e[e.length-1],a=t[o];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[o]=i}function c(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return i;const a=e[o];if(a.endsWith("[]")){const r=a.slice(0,-2);if(r in t){const f=t[r];return Array.isArray(f)?f.map(p=>c(p,e.slice(o+1),i)):i}else return i}else t=t[a]}return t}catch(o){if(o instanceof TypeError)return i;throw o}}function AA(t,e){for(const[i,o]of Object.entries(e)){const a=i.split("."),r=o.split("."),f=new Set;let p=-1;for(let y=0;y<a.length;y++)if(a[y]==="*"){p=y;break}if(p!==-1&&r.length>p)for(let y=p;y<r.length;y++){const m=r[y];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&f.add(m)}Uf(t,a,r,0,f)}}function Uf(t,e,i,o,a){if(o>=e.length||typeof t!="object"||t===null)return;const r=e[o];if(r.endsWith("[]")){const f=r.slice(0,-2),p=t;if(f in p&&Array.isArray(p[f]))for(const y of p[f])Uf(y,e,i,o+1,a)}else if(r==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const f=t,p=Object.keys(f).filter(m=>!m.startsWith("_")&&!a.has(m)),y={};for(const m of p)y[m]=f[m];for(const[m,v]of Object.entries(y)){const _=[];for(const T of i.slice(o))T==="*"?_.push(m):_.push(T);d(f,_,v)}for(const m of p)delete f[m]}}else{const f=t;r in f&&Uf(f[r],e,i,o+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xA(t){const e={},i=c(t,["operationName"]);i!=null&&d(e,["operationName"],i);const o=c(t,["resourceName"]);return o!=null&&d(e,["_url","resourceName"],o),e}function bA(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["response","generateVideoResponse"]);return f!=null&&d(e,["response"],RA(f)),e}function wA(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["response"]);return f!=null&&d(e,["response"],NA(f)),e}function RA(t){const e={},i=c(t,["generatedSamples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(f=>MA(f))),d(e,["generatedVideos"],r)}const o=c(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const a=c(t,["raiMediaFilteredReasons"]);return a!=null&&d(e,["raiMediaFilteredReasons"],a),e}function NA(t){const e={},i=c(t,["videos"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(f=>IA(f))),d(e,["generatedVideos"],r)}const o=c(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const a=c(t,["raiMediaFilteredReasons"]);return a!=null&&d(e,["raiMediaFilteredReasons"],a),e}function MA(t){const e={},i=c(t,["video"]);return i!=null&&d(e,["video"],PA(i)),e}function IA(t){const e={},i=c(t,["_self"]);return i!=null&&d(e,["video"],kA(i)),e}function DA(t){const e={},i=c(t,["operationName"]);return i!=null&&d(e,["_url","operationName"],i),e}function UA(t){const e={},i=c(t,["operationName"]);return i!=null&&d(e,["_url","operationName"],i),e}function LA(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["response"]);return f!=null&&d(e,["response"],OA(f)),e}function OA(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["parent"]);o!=null&&d(e,["parent"],o);const a=c(t,["documentName"]);return a!=null&&d(e,["documentName"],a),e}function C0(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["response"]);return f!=null&&d(e,["response"],GA(f)),e}function GA(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["parent"]);o!=null&&d(e,["parent"],o);const a=c(t,["documentName"]);return a!=null&&d(e,["documentName"],a),e}function PA(t){const e={},i=c(t,["uri"]);i!=null&&d(e,["uri"],i);const o=c(t,["encodedVideo"]);o!=null&&d(e,["videoBytes"],cd(o));const a=c(t,["encoding"]);return a!=null&&d(e,["mimeType"],a),e}function kA(t){const e={},i=c(t,["gcsUri"]);i!=null&&d(e,["uri"],i);const o=c(t,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],cd(o));const a=c(t,["mimeType"]);return a!=null&&d(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ty;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ty||(ty={}));var ny;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ny||(ny={}));var iy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(iy||(iy={}));var j;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(j||(j={}));var sy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(sy||(sy={}));var oy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(oy||(oy={}));var ly;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ly||(ly={}));var ay;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ay||(ay={}));var ry;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ry||(ry={}));var uy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(uy||(uy={}));var cy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(cy||(cy={}));var fy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(fy||(fy={}));var dy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(dy||(dy={}));var hy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(hy||(hy={}));var py;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(py||(py={}));var my;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(my||(my={}));var gy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(gy||(gy={}));var yy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(yy||(yy={}));var vy;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(vy||(vy={}));var _y;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(_y||(_y={}));var Sy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Sy||(Sy={}));var Sr;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Sr||(Sr={}));var Ty;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ty||(Ty={}));var Ey;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ey||(Ey={}));var Cy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Cy||(Cy={}));var Lf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Lf||(Lf={}));var Ay;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ay||(Ay={}));var xy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(xy||(xy={}));var Of;(function(t){t.COLLECTION="COLLECTION"})(Of||(Of={}));var by;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(by||(by={}));var wy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(wy||(wy={}));var Ry;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ry||(Ry={}));var Ny;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ny||(Ny={}));var My;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(My||(My={}));var Iy;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Iy||(Iy={}));var Dy;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Dy||(Dy={}));var Uy;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Uy||(Uy={}));var Ly;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Ly||(Ly={}));var Oy;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Oy||(Oy={}));var Gy;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Gy||(Gy={}));var Py;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Py||(Py={}));var ky;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ky||(ky={}));var Hy;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(Hy||(Hy={}));var qy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(qy||(qy={}));var By;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(By||(By={}));var Vy;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Vy||(Vy={}));var zy;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zy||(zy={}));var Fy;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Fy||(Fy={}));var $y;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})($y||($y={}));var Jy;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Jy||(Jy={}));var Yy;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Yy||(Yy={}));var Ky;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ky||(Ky={}));var Xy;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Xy||(Xy={}));var Qy;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Qy||(Qy={}));var Zy;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Zy||(Zy={}));var Wy;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Wy||(Wy={}));var Qs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Qs||(Qs={}));class Gf{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class ol{get text(){var e,i,o,a,r,f,p,y;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const T of(y=(p=(f=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[A,x]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(x!==null||x!==void 0)&&_.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,m+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,i,o,a,r,f,p,y;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(y=(p=(f=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[T,A]of Object.entries(_))T!=="inlineData"&&(A!==null||A!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,i,o,a,r,f,p,y;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(y=(p=(f=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,i,o,a,r,f,p,y,m;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(p=(f=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,i,o,a,r,f,p,y,m;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(p=(f=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class jy{}class ev{}class HA{}class qA{}class BA{}class VA{}class tv{}class nv{}class iv{}class zA{}class Tr{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Tr;let a;const r=e;return i?a=wA(r):a=bA(r),Object.assign(o,a),o}}class sv{}class ov{}class lv{}class av{}class FA{}class $A{}class JA{}class fd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new fd,r=LA(e);return Object.assign(o,r),o}}class YA{}class KA{}class XA{}class QA{}class rv{}class ZA{get text(){var e,i,o;let a="",r=!1;const f=[];for(const p of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[y,m]of Object.entries(p))y!=="text"&&y!=="thought"&&m!==null&&f.push(y);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;r=!0,a+=p.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?a:void 0}get data(){var e,i,o;let a="";const r=[];for(const f of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[p,y]of Object.entries(f))p!=="inlineData"&&y!==null&&r.push(p);f.inlineData&&typeof f.inlineData.data=="string"&&(a+=atob(f.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class WA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class dd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new dd,r=C0(e);return Object.assign(o,r),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Le(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function A0(t,e){const i=Le(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function x0(t){return Array.isArray(t)?t.map(e=>Er(e)):[Er(t)]}function Er(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function b0(t){const e=Er(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function w0(t){const e=Er(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function uv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function R0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>uv(e)):[uv(t)]}function Pf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function cv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function fv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Nt(t){if(t==null)throw new Error("ContentUnion is required");return Pf(t)?t:{role:"user",parts:R0(t)}}function hd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=Nt(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=Nt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Nt(i)):[Nt(e)]}function cn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(cv(t)||fv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Nt(t)]}const e=[],i=[],o=Pf(t[0]);for(const a of t){const r=Pf(a);if(r!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(a);else{if(cv(a)||fv(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return o||e.push({role:"user",parts:R0(i)}),e}function jA(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(j).includes(i[0].toUpperCase())?i[0].toUpperCase():j.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(j).includes(o.toUpperCase())?o.toUpperCase():j.TYPE_UNSPECIFIED})}}function Ws(t){const e={},i=["items"],o=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&jA(t.type,e);for(const[f,p]of Object.entries(t))if(p!=null)if(f=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(j).includes(p.toUpperCase())?p.toUpperCase():j.TYPE_UNSPECIFIED}else if(i.includes(f))e[f]=Ws(p);else if(o.includes(f)){const y=[];for(const m of p){if(m.type=="null"){e.nullable=!0;continue}y.push(Ws(m))}e[f]=y}else if(a.includes(f)){const y={};for(const[m,v]of Object.entries(p))y[m]=Ws(v);e[f]=y}else{if(f==="additionalProperties")continue;e[f]=p}return e}function pd(t){return Ws(t)}function md(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function gd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function eo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ws(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ws(e.response));return t}function to(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function ex(t,e,i,o=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function ei(t,e){if(typeof e!="string")throw new Error("name must be a string");return ex(t,e,"cachedContents")}function N0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ni(t){return cd(t)}function tx(t){return t!=null&&typeof t=="object"&&"name"in t}function nx(t){return t!=null&&typeof t=="object"&&"video"in t}function ix(t){return t!=null&&typeof t=="object"&&"uri"in t}function M0(t){var e;let i;if(tx(t)&&(i=t.name),!(ix(t)&&(i=t.uri,i===void 0))&&!(nx(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function I0(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function D0(t){for(const e of["models","tunedModels","publisherModels"])if(sx(t,e))return t[e];return[]}function sx(t,e){return t!==null&&typeof t=="object"&&e in t}function ox(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function lx(t,e={}){const i=[],o=new Set;for(const a of t){const r=a.name;if(o.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);o.add(r);const f=ox(a,e);f.functionDeclarations&&i.push(...f.functionDeclarations)}return{functionDeclarations:i}}function U0(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,a=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function ax(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function L0(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const a=i.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let r=!1;for(const f of a){if(typeof f!="object"||f===null)continue;const y=f.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function no(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function O0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rx(t){const e={},i=c(t,["responsesFile"]);i!=null&&d(e,["fileName"],i);const o=c(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(f=>Vx(f))),d(e,["inlinedResponses"],r)}const a=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["inlinedEmbedContentResponses"],r)}return e}function ux(t){const e={},i=c(t,["predictionsFormat"]);i!=null&&d(e,["format"],i);const o=c(t,["gcsDestination","outputUriPrefix"]);o!=null&&d(e,["gcsUri"],o);const a=c(t,["bigqueryDestination","outputUri"]);return a!=null&&d(e,["bigqueryUri"],a),e}function cx(t){const e={},i=c(t,["format"]);i!=null&&d(e,["predictionsFormat"],i);const o=c(t,["gcsUri"]);o!=null&&d(e,["gcsDestination","outputUriPrefix"],o);const a=c(t,["bigqueryUri"]);if(a!=null&&d(e,["bigqueryDestination","outputUri"],a),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ur(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata","displayName"]);o!=null&&d(e,["displayName"],o);const a=c(t,["metadata","state"]);a!=null&&d(e,["state"],O0(a));const r=c(t,["metadata","createTime"]);r!=null&&d(e,["createTime"],r);const f=c(t,["metadata","endTime"]);f!=null&&d(e,["endTime"],f);const p=c(t,["metadata","updateTime"]);p!=null&&d(e,["updateTime"],p);const y=c(t,["metadata","model"]);y!=null&&d(e,["model"],y);const m=c(t,["metadata","output"]);return m!=null&&d(e,["dest"],rx(L0(m))),e}function kf(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["displayName"]);o!=null&&d(e,["displayName"],o);const a=c(t,["state"]);a!=null&&d(e,["state"],O0(a));const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["createTime"]);f!=null&&d(e,["createTime"],f);const p=c(t,["startTime"]);p!=null&&d(e,["startTime"],p);const y=c(t,["endTime"]);y!=null&&d(e,["endTime"],y);const m=c(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const v=c(t,["model"]);v!=null&&d(e,["model"],v);const _=c(t,["inputConfig"]);_!=null&&d(e,["src"],fx(_));const T=c(t,["outputConfig"]);T!=null&&d(e,["dest"],ux(L0(T)));const A=c(t,["completionStats"]);return A!=null&&d(e,["completionStats"],A),e}function fx(t){const e={},i=c(t,["instancesFormat"]);i!=null&&d(e,["format"],i);const o=c(t,["gcsSource","uris"]);o!=null&&d(e,["gcsUri"],o);const a=c(t,["bigquerySource","inputUri"]);return a!=null&&d(e,["bigqueryUri"],a),e}function dx(t,e){const i={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=c(e,["fileName"]);o!=null&&d(i,["fileName"],o);const a=c(e,["inlinedRequests"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>Bx(t,f))),d(i,["requests","requests"],r)}return i}function hx(t){const e={},i=c(t,["format"]);i!=null&&d(e,["instancesFormat"],i);const o=c(t,["gcsUri"]);o!=null&&d(e,["gcsSource","uris"],o);const a=c(t,["bigqueryUri"]);if(a!=null&&d(e,["bigquerySource","inputUri"],a),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function px(t){const e={},i=c(t,["data"]);if(i!=null&&d(e,["data"],i),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function mx(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],no(t,o)),i}function gx(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],no(t,o)),i}function yx(t){const e={},i=c(t,["content"]);i!=null&&d(e,["content"],i);const o=c(t,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],vx(o));const a=c(t,["tokenCount"]);a!=null&&d(e,["tokenCount"],a);const r=c(t,["finishReason"]);r!=null&&d(e,["finishReason"],r);const f=c(t,["avgLogprobs"]);f!=null&&d(e,["avgLogprobs"],f);const p=c(t,["groundingMetadata"]);p!=null&&d(e,["groundingMetadata"],p);const y=c(t,["index"]);y!=null&&d(e,["index"],y);const m=c(t,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const v=c(t,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),d(e,["safetyRatings"],T)}const _=c(t,["urlContextMetadata"]);return _!=null&&d(e,["urlContextMetadata"],_),e}function vx(t){const e={},i=c(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),d(e,["citations"],o)}return e}function G0(t){const e={},i=c(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>Xx(r))),d(e,["parts"],a)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function _x(t,e){const i={},o=c(t,["displayName"]);if(e!==void 0&&o!=null&&d(e,["batch","displayName"],o),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function Sx(t,e){const i={},o=c(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const a=c(t,["dest"]);return e!==void 0&&a!=null&&d(e,["outputConfig"],cx(ax(a))),i}function dv(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["_url","model"],Le(t,o));const a=c(e,["src"]);a!=null&&d(i,["batch","inputConfig"],dx(t,U0(t,a)));const r=c(e,["config"]);return r!=null&&_x(r,i),i}function Tx(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["model"],Le(t,o));const a=c(e,["src"]);a!=null&&d(i,["inputConfig"],hx(U0(t,a)));const r=c(e,["config"]);return r!=null&&Sx(r,i),i}function Ex(t,e){const i={},o=c(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["batch","displayName"],o),i}function Cx(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["_url","model"],Le(t,o));const a=c(e,["src"]);a!=null&&d(i,["batch","inputConfig"],Mx(t,a));const r=c(e,["config"]);return r!=null&&Ex(r,i),i}function Ax(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],no(t,o)),i}function xx(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],no(t,o)),i}function bx(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);return r!=null&&d(e,["error"],r),e}function wx(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);return r!=null&&d(e,["error"],r),e}function Rx(t,e){const i={},o=c(e,["contents"]);if(o!=null){let r=hd(t,o);Array.isArray(r)&&(r=r.map(f=>f)),d(i,["requests[]","request","content"],r)}const a=c(e,["config"]);return a!=null&&(d(i,["_self"],Nx(a,i)),AA(i,{"requests[].*":"requests[].request.*"})),i}function Nx(t,e){const i={},o=c(t,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const a=c(t,["title"]);e!==void 0&&a!=null&&d(e,["requests[]","title"],a);const r=c(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&d(e,["requests[]","outputDimensionality"],r),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Mx(t,e){const i={},o=c(e,["fileName"]);o!=null&&d(i,["file_name"],o);const a=c(e,["inlinedRequests"]);return a!=null&&d(i,["requests"],Rx(t,a)),i}function Ix(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Dx(t){const e={},i=c(t,["id"]);i!=null&&d(e,["id"],i);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const a=c(t,["name"]);if(a!=null&&d(e,["name"],a),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ux(t){const e={},i=c(t,["allowedFunctionNames"]);i!=null&&d(e,["allowedFunctionNames"],i);const o=c(t,["mode"]);if(o!=null&&d(e,["mode"],o),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Lx(t,e,i){const o={},a=c(e,["systemInstruction"]);i!==void 0&&a!=null&&d(i,["systemInstruction"],G0(Nt(a)));const r=c(e,["temperature"]);r!=null&&d(o,["temperature"],r);const f=c(e,["topP"]);f!=null&&d(o,["topP"],f);const p=c(e,["topK"]);p!=null&&d(o,["topK"],p);const y=c(e,["candidateCount"]);y!=null&&d(o,["candidateCount"],y);const m=c(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const v=c(e,["stopSequences"]);v!=null&&d(o,["stopSequences"],v);const _=c(e,["responseLogprobs"]);_!=null&&d(o,["responseLogprobs"],_);const T=c(e,["logprobs"]);T!=null&&d(o,["logprobs"],T);const A=c(e,["presencePenalty"]);A!=null&&d(o,["presencePenalty"],A);const x=c(e,["frequencyPenalty"]);x!=null&&d(o,["frequencyPenalty"],x);const w=c(e,["seed"]);w!=null&&d(o,["seed"],w);const b=c(e,["responseMimeType"]);b!=null&&d(o,["responseMimeType"],b);const H=c(e,["responseSchema"]);H!=null&&d(o,["responseSchema"],pd(H));const G=c(e,["responseJsonSchema"]);if(G!=null&&d(o,["responseJsonSchema"],G),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=c(e,["safetySettings"]);if(i!==void 0&&I!=null){let Pe=I;Array.isArray(Pe)&&(Pe=Pe.map(Ge=>Qx(Ge))),d(i,["safetySettings"],Pe)}const O=c(e,["tools"]);if(i!==void 0&&O!=null){let Pe=to(O);Array.isArray(Pe)&&(Pe=Pe.map(Ge=>Wx(eo(Ge)))),d(i,["tools"],Pe)}const q=c(e,["toolConfig"]);if(i!==void 0&&q!=null&&d(i,["toolConfig"],Zx(q)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Q=c(e,["cachedContent"]);i!==void 0&&Q!=null&&d(i,["cachedContent"],ei(t,Q));const $=c(e,["responseModalities"]);$!=null&&d(o,["responseModalities"],$);const fe=c(e,["mediaResolution"]);fe!=null&&d(o,["mediaResolution"],fe);const X=c(e,["speechConfig"]);if(X!=null&&d(o,["speechConfig"],md(X)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ie=c(e,["thinkingConfig"]);ie!=null&&d(o,["thinkingConfig"],ie);const oe=c(e,["imageConfig"]);oe!=null&&d(o,["imageConfig"],qx(oe));const Ce=c(e,["enableEnhancedCivicAnswers"]);if(Ce!=null&&d(o,["enableEnhancedCivicAnswers"],Ce),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function Ox(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>yx(m))),d(e,["candidates"],y)}const a=c(t,["modelVersion"]);a!=null&&d(e,["modelVersion"],a);const r=c(t,["promptFeedback"]);r!=null&&d(e,["promptFeedback"],r);const f=c(t,["responseId"]);f!=null&&d(e,["responseId"],f);const p=c(t,["usageMetadata"]);return p!=null&&d(e,["usageMetadata"],p),e}function Gx(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],no(t,o)),i}function Px(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],no(t,o)),i}function kx(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function Hx(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function qx(t){const e={},i=c(t,["aspectRatio"]);i!=null&&d(e,["aspectRatio"],i);const o=c(t,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Bx(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["request","model"],Le(t,o));const a=c(e,["contents"]);if(a!=null){let p=cn(a);Array.isArray(p)&&(p=p.map(y=>G0(y))),d(i,["request","contents"],p)}const r=c(e,["metadata"]);r!=null&&d(i,["metadata"],r);const f=c(e,["config"]);return f!=null&&d(i,["request","generationConfig"],Lx(t,f,c(i,["request"],{}))),i}function Vx(t){const e={},i=c(t,["response"]);i!=null&&d(e,["response"],Ox(i));const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["error"]);return a!=null&&d(e,["error"],a),e}function zx(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);if(e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function Fx(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);e!==void 0&&a!=null&&d(e,["_query","pageToken"],a);const r=c(t,["filter"]);return e!==void 0&&r!=null&&d(e,["_query","filter"],r),i}function $x(t){const e={},i=c(t,["config"]);return i!=null&&zx(i,e),e}function Jx(t){const e={},i=c(t,["config"]);return i!=null&&Fx(i,e),e}function Yx(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["operations"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>ur(f))),d(e,["batchJobs"],r)}return e}function Kx(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["batchPredictionJobs"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>kf(f))),d(e,["batchJobs"],r)}return e}function Xx(t){const e={},i=c(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const a=c(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const r=c(t,["fileData"]);r!=null&&d(e,["fileData"],Ix(r));const f=c(t,["functionCall"]);f!=null&&d(e,["functionCall"],Dx(f));const p=c(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],px(y));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const v=c(t,["thought"]);v!=null&&d(e,["thought"],v);const _=c(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const T=c(t,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function Qx(t){const e={},i=c(t,["category"]);if(i!=null&&d(e,["category"],i),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=c(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function Zx(t){const e={},i=c(t,["retrievalConfig"]);i!=null&&d(e,["retrievalConfig"],i);const o=c(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],Ux(o)),e}function Wx(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],kx(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],Hx(p));const y=c(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Wn||(Wn={}));class is{constructor(e,i,o,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,a)}init(e,i,o){var a,r;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let f={config:{}};!o||Object.keys(o).length===0?f={config:{}}:typeof o=="object"?f=Object.assign({},o):f=o,f.config&&(f.config.pageToken=i.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(r=(a=f.config)===null||a===void 0?void 0:a.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let jx=class extends jn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new is(Wn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=dv(this.apiClient,e),o=i._url,a=ee("{model}:batchGenerateContent",o),p=i.batch.inputConfig.requests,y=p.requests,m=[];for(const v of y){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const A=_.request;A.systemInstruction=T,_.request=A}m.push(_)}return p.requests=m,delete i.config,delete i._url,delete i._query,{path:a,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},a=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${a}`),o.dest===void 0){const r=this.getGcsUri(e),f=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?o.dest=`${r.slice(0,-6)}/dest`:o.dest=`${r}_dest_${a}`;else if(f)o.dest=`${f}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Tx(this.apiClient,e);return p=ee("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>kf(v))}else{const m=dv(this.apiClient,e);return p=ee("{model}:batchGenerateContent",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>ur(v))}}async createEmbeddingsInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Cx(this.apiClient,e);return r=ee("{model}:asyncBatchEmbedContent",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>ur(y))}}async get(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Px(this.apiClient,e);return p=ee("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>kf(v))}else{const m=Gx(this.apiClient,e);return p=ee("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>ur(v))}}async cancel(e){var i,o,a,r;let f="",p={};if(this.apiClient.isVertexAI()){const y=gx(this.apiClient,e);f=ee("batchPredictionJobs/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=mx(this.apiClient,e);f=ee("batches/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Jx(e);return p=ee("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Kx(v),T=new rv;return Object.assign(T,_),T})}else{const m=$x(e);return p=ee("batches",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Yx(v),T=new rv;return Object.assign(T,_),T})}}async delete(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=xx(this.apiClient,e);return p=ee("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>wx(v))}else{const m=Ax(this.apiClient,e);return p=ee("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>bx(v))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eb(t){const e={},i=c(t,["data"]);if(i!=null&&d(e,["data"],i),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function hv(t){const e={},i=c(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>Cb(r))),d(e,["parts"],a)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function tb(t,e){const i={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const a=c(t,["expireTime"]);e!==void 0&&a!=null&&d(e,["expireTime"],a);const r=c(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const f=c(t,["contents"]);if(e!==void 0&&f!=null){let v=cn(f);Array.isArray(v)&&(v=v.map(_=>hv(_))),d(e,["contents"],v)}const p=c(t,["systemInstruction"]);e!==void 0&&p!=null&&d(e,["systemInstruction"],hv(Nt(p)));const y=c(t,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(_=>xb(_))),d(e,["tools"],v)}const m=c(t,["toolConfig"]);if(e!==void 0&&m!=null&&d(e,["toolConfig"],Ab(m)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function nb(t,e){const i={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const a=c(t,["expireTime"]);e!==void 0&&a!=null&&d(e,["expireTime"],a);const r=c(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const f=c(t,["contents"]);if(e!==void 0&&f!=null){let _=cn(f);Array.isArray(_)&&(_=_.map(T=>T)),d(e,["contents"],_)}const p=c(t,["systemInstruction"]);e!==void 0&&p!=null&&d(e,["systemInstruction"],Nt(p));const y=c(t,["tools"]);if(e!==void 0&&y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>bb(T))),d(e,["tools"],_)}const m=c(t,["toolConfig"]);e!==void 0&&m!=null&&d(e,["toolConfig"],m);const v=c(t,["kmsKeyName"]);return e!==void 0&&v!=null&&d(e,["encryption_spec","kmsKeyName"],v),i}function ib(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["model"],A0(t,o));const a=c(e,["config"]);return a!=null&&tb(a,i),i}function sb(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["model"],A0(t,o));const a=c(e,["config"]);return a!=null&&nb(a,i),i}function ob(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],ei(t,o)),i}function lb(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],ei(t,o)),i}function ab(t){const e={},i=c(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function rb(t){const e={},i=c(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function ub(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function cb(t){const e={},i=c(t,["id"]);i!=null&&d(e,["id"],i);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const a=c(t,["name"]);if(a!=null&&d(e,["name"],a),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fb(t){const e={},i=c(t,["allowedFunctionNames"]);i!=null&&d(e,["allowedFunctionNames"],i);const o=c(t,["mode"]);if(o!=null&&d(e,["mode"],o),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function db(t){const e={},i=c(t,["description"]);i!=null&&d(e,["description"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["parameters"]);a!=null&&d(e,["parameters"],a);const r=c(t,["parametersJsonSchema"]);r!=null&&d(e,["parametersJsonSchema"],r);const f=c(t,["response"]);f!=null&&d(e,["response"],f);const p=c(t,["responseJsonSchema"]);if(p!=null&&d(e,["responseJsonSchema"],p),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function hb(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],ei(t,o)),i}function pb(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],ei(t,o)),i}function mb(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function gb(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function yb(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function vb(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function _b(t){const e={},i=c(t,["config"]);return i!=null&&yb(i,e),e}function Sb(t){const e={},i=c(t,["config"]);return i!=null&&vb(i,e),e}function Tb(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["cachedContents"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["cachedContents"],r)}return e}function Eb(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["cachedContents"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["cachedContents"],r)}return e}function Cb(t){const e={},i=c(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const a=c(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const r=c(t,["fileData"]);r!=null&&d(e,["fileData"],ub(r));const f=c(t,["functionCall"]);f!=null&&d(e,["functionCall"],cb(f));const p=c(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],eb(y));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const v=c(t,["thought"]);v!=null&&d(e,["thought"],v);const _=c(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const T=c(t,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function Ab(t){const e={},i=c(t,["retrievalConfig"]);i!=null&&d(e,["retrievalConfig"],i);const o=c(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],fb(o)),e}function xb(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],mb(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],gb(p));const y=c(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function bb(t){const e={},i=c(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const o=c(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&d(e,["codeExecution"],a);const r=c(t,["enterpriseWebSearch"]);r!=null&&d(e,["enterpriseWebSearch"],r);const f=c(t,["functionDeclarations"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(T=>db(T))),d(e,["functionDeclarations"],_)}const p=c(t,["googleMaps"]);p!=null&&d(e,["googleMaps"],p);const y=c(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],y);const m=c(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const v=c(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function wb(t,e){const i={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const a=c(t,["expireTime"]);return e!==void 0&&a!=null&&d(e,["expireTime"],a),i}function Rb(t,e){const i={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const a=c(t,["expireTime"]);return e!==void 0&&a!=null&&d(e,["expireTime"],a),i}function Nb(t,e){const i={},o=c(e,["name"]);o!=null&&d(i,["_url","name"],ei(t,o));const a=c(e,["config"]);return a!=null&&wb(a,i),i}function Mb(t,e){const i={},o=c(e,["name"]);o!=null&&d(i,["_url","name"],ei(t,o));const a=c(e,["config"]);return a!=null&&Rb(a,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ib extends jn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new is(Wn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=sb(this.apiClient,e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const m=ib(this.apiClient,e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async get(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=pb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const m=hb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async delete(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=lb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=rb(v),T=new lv;return Object.assign(T,_),T})}else{const m=ob(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=ab(v),T=new lv;return Object.assign(T,_),T})}}async update(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Mb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const m=Nb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async listInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Sb(e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Eb(v),T=new av;return Object.assign(T,_),T})}else{const m=_b(e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Tb(v),T=new av;return Object.assign(T,_),T})}}}function Cr(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(t);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(t,o[a])&&(i[o[a]]=t[o[a]]);return i}function pv(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ge(t){return this instanceof ge?(this.v=t,this):new ge(t)}function _n(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),a,r=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",f),a[Symbol.asyncIterator]=function(){return this},a;function f(A){return function(x){return Promise.resolve(x).then(A,_)}}function p(A,x){o[A]&&(a[A]=function(w){return new Promise(function(b,H){r.push([A,w,b,H])>1||y(A,w)})},x&&(a[A]=x(a[A])))}function y(A,x){try{m(o[A](x))}catch(w){T(r[0][3],w)}}function m(A){A.value instanceof ge?Promise.resolve(A.value.v).then(v,_):T(r[0][2],A)}function v(A){y("next",A)}function _(A){y("throw",A)}function T(A,x){A(x),r.shift(),r.length&&y(r[0][0],r[0][1])}}function Sn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof pv=="function"?pv(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(r){i[r]=t[r]&&function(f){return new Promise(function(p,y){f=t[r](f),a(p,y,f.done,f.value)})}}function a(r,f,p,y){Promise.resolve(y).then(function(m){r({value:m,done:p})},f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Db(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:P0(i)}function P0(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Ub(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function mv(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const a=[];let r=!0;for(;o<i&&t[o].role==="model";)a.push(t[o]),r&&!P0(t[o])&&(r=!1),o++;r?e.push(...a):e.pop()}return e}class Lb{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new Ob(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let Ob=class{constructor(e,i,o,a={},r=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=a,this.history=r,this.sendPromise=Promise.resolve(),Ub(r)}async sendMessage(e){var i;await this.sendPromise;const o=Nt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var r,f,p;const y=await a,m=(f=(r=y.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content,v=y.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(p=v.slice(_))!==null&&p!==void 0?p:[]);const A=m?[m]:[];this.recordHistory(o,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const o=Nt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const r=await a;return this.processStreamResponse(r,o)}getHistory(e=!1){const i=e?mv(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return _n(this,arguments,function*(){var a,r,f,p,y,m;const v=[];try{for(var _=!0,T=Sn(e),A;A=yield ge(T.next()),a=A.done,!a;_=!0){p=A.value,_=!1;const x=p;if(Db(x)){const w=(m=(y=x.candidates)===null||y===void 0?void 0:y[0])===null||m===void 0?void 0:m.content;w!==void 0&&v.push(w)}yield yield ge(x)}}catch(x){r={error:x}}finally{try{!_&&!a&&(f=T.return)&&(yield ge(f.call(T)))}finally{if(r)throw r.error}}this.recordHistory(i,v)})}recordHistory(e,i,o){let a=[];i.length>0&&i.every(r=>r.role!==void 0)?a=i:a.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...mv(o)):this.history.push(e),this.history.push(...a)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Al extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Al.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gb(t){const e={},i=c(t,["file"]);return i!=null&&d(e,["file"],i),e}function Pb(t){const e={},i=c(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function kb(t){const e={},i=c(t,["name"]);return i!=null&&d(e,["_url","file"],M0(i)),e}function Hb(t){const e={},i=c(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function qb(t){const e={},i=c(t,["name"]);return i!=null&&d(e,["_url","file"],M0(i)),e}function Bb(t){const e={},i=c(t,["uris"]);return i!=null&&d(e,["uris"],i),e}function Vb(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function zb(t){const e={},i=c(t,["config"]);return i!=null&&Vb(i,e),e}function Fb(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["files"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["files"],r)}return e}function $b(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Jb=class extends jn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new is(Wn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=zb(e);return r=ee("files",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=Fb(y),v=new YA;return Object.assign(v,m),v})}}async createInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Gb(e);return r=ee("upload/v1beta/files",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=Pb(y),v=new KA;return Object.assign(v,m),v})}}async get(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=qb(e);return r=ee("files/{file}",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=kb(e);return r=ee("files/{file}",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=Hb(y),v=new XA;return Object.assign(v,m),v})}}async registerFilesInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Bb(e);return r=ee("files:register",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=$b(y),v=new QA;return Object.assign(v,m),v})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cr(t){const e={},i=c(t,["data"]);if(i!=null&&d(e,["data"],i),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Yb(t){const e={},i=c(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>uw(r))),d(e,["parts"],a)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function Kb(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Xb(t){const e={},i=c(t,["id"]);i!=null&&d(e,["id"],i);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const a=c(t,["name"]);if(a!=null&&d(e,["name"],a),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Qb(t){const e={},i=c(t,["description"]);i!=null&&d(e,["description"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["parameters"]);a!=null&&d(e,["parameters"],a);const r=c(t,["parametersJsonSchema"]);r!=null&&d(e,["parametersJsonSchema"],r);const f=c(t,["response"]);f!=null&&d(e,["response"],f);const p=c(t,["responseJsonSchema"]);if(p!=null&&d(e,["responseJsonSchema"],p),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Zb(t){const e={},i=c(t,["modelSelectionConfig"]);i!=null&&d(e,["modelConfig"],i);const o=c(t,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const a=c(t,["audioTimestamp"]);a!=null&&d(e,["audioTimestamp"],a);const r=c(t,["candidateCount"]);r!=null&&d(e,["candidateCount"],r);const f=c(t,["enableAffectiveDialog"]);f!=null&&d(e,["enableAffectiveDialog"],f);const p=c(t,["frequencyPenalty"]);p!=null&&d(e,["frequencyPenalty"],p);const y=c(t,["logprobs"]);y!=null&&d(e,["logprobs"],y);const m=c(t,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const v=c(t,["mediaResolution"]);v!=null&&d(e,["mediaResolution"],v);const _=c(t,["presencePenalty"]);_!=null&&d(e,["presencePenalty"],_);const T=c(t,["responseLogprobs"]);T!=null&&d(e,["responseLogprobs"],T);const A=c(t,["responseMimeType"]);A!=null&&d(e,["responseMimeType"],A);const x=c(t,["responseModalities"]);x!=null&&d(e,["responseModalities"],x);const w=c(t,["responseSchema"]);w!=null&&d(e,["responseSchema"],w);const b=c(t,["routingConfig"]);b!=null&&d(e,["routingConfig"],b);const H=c(t,["seed"]);H!=null&&d(e,["seed"],H);const G=c(t,["speechConfig"]);G!=null&&d(e,["speechConfig"],G);const I=c(t,["stopSequences"]);I!=null&&d(e,["stopSequences"],I);const O=c(t,["temperature"]);O!=null&&d(e,["temperature"],O);const q=c(t,["thinkingConfig"]);q!=null&&d(e,["thinkingConfig"],q);const Q=c(t,["topK"]);Q!=null&&d(e,["topK"],Q);const $=c(t,["topP"]);if($!=null&&d(e,["topP"],$),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Wb(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function jb(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function ew(t,e){const i={},o=c(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const a=c(t,["responseModalities"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","responseModalities"],a);const r=c(t,["temperature"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","temperature"],r);const f=c(t,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const p=c(t,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const y=c(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=c(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const _=c(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],gd(_));const T=c(t,["thinkingConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","thinkingConfig"],T);const A=c(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],Yb(Nt(x)));const w=c(t,["tools"]);if(e!==void 0&&w!=null){let Q=to(w);Array.isArray(Q)&&(Q=Q.map($=>fw(eo($)))),d(e,["setup","tools"],Q)}const b=c(t,["sessionResumption"]);e!==void 0&&b!=null&&d(e,["setup","sessionResumption"],cw(b));const H=c(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&d(e,["setup","inputAudioTranscription"],H);const G=c(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&d(e,["setup","outputAudioTranscription"],G);const I=c(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&d(e,["setup","realtimeInputConfig"],I);const O=c(t,["contextWindowCompression"]);e!==void 0&&O!=null&&d(e,["setup","contextWindowCompression"],O);const q=c(t,["proactivity"]);if(e!==void 0&&q!=null&&d(e,["setup","proactivity"],q),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function tw(t,e){const i={},o=c(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],Zb(o));const a=c(t,["responseModalities"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","responseModalities"],a);const r=c(t,["temperature"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","temperature"],r);const f=c(t,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const p=c(t,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const y=c(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=c(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const _=c(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],gd(_));const T=c(t,["thinkingConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","thinkingConfig"],T);const A=c(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],Nt(x));const w=c(t,["tools"]);if(e!==void 0&&w!=null){let $=to(w);Array.isArray($)&&($=$.map(fe=>dw(eo(fe)))),d(e,["setup","tools"],$)}const b=c(t,["sessionResumption"]);e!==void 0&&b!=null&&d(e,["setup","sessionResumption"],b);const H=c(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&d(e,["setup","inputAudioTranscription"],H);const G=c(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&d(e,["setup","outputAudioTranscription"],G);const I=c(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&d(e,["setup","realtimeInputConfig"],I);const O=c(t,["contextWindowCompression"]);e!==void 0&&O!=null&&d(e,["setup","contextWindowCompression"],O);const q=c(t,["proactivity"]);e!==void 0&&q!=null&&d(e,["setup","proactivity"],q);const Q=c(t,["explicitVadSignal"]);return e!==void 0&&Q!=null&&d(e,["setup","explicitVadSignal"],Q),i}function nw(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["setup","model"],Le(t,o));const a=c(e,["config"]);return a!=null&&d(i,["config"],ew(a,i)),i}function iw(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["setup","model"],Le(t,o));const a=c(e,["config"]);return a!=null&&d(i,["config"],tw(a,i)),i}function sw(t){const e={},i=c(t,["musicGenerationConfig"]);return i!=null&&d(e,["musicGenerationConfig"],i),e}function ow(t){const e={},i=c(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),d(e,["weightedPrompts"],o)}return e}function lw(t){const e={},i=c(t,["media"]);if(i!=null){let m=x0(i);Array.isArray(m)&&(m=m.map(v=>cr(v))),d(e,["mediaChunks"],m)}const o=c(t,["audio"]);o!=null&&d(e,["audio"],cr(w0(o)));const a=c(t,["audioStreamEnd"]);a!=null&&d(e,["audioStreamEnd"],a);const r=c(t,["video"]);r!=null&&d(e,["video"],cr(b0(r)));const f=c(t,["text"]);f!=null&&d(e,["text"],f);const p=c(t,["activityStart"]);p!=null&&d(e,["activityStart"],p);const y=c(t,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function aw(t){const e={},i=c(t,["media"]);if(i!=null){let m=x0(i);Array.isArray(m)&&(m=m.map(v=>v)),d(e,["mediaChunks"],m)}const o=c(t,["audio"]);o!=null&&d(e,["audio"],w0(o));const a=c(t,["audioStreamEnd"]);a!=null&&d(e,["audioStreamEnd"],a);const r=c(t,["video"]);r!=null&&d(e,["video"],b0(r));const f=c(t,["text"]);f!=null&&d(e,["text"],f);const p=c(t,["activityStart"]);p!=null&&d(e,["activityStart"],p);const y=c(t,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function rw(t){const e={},i=c(t,["setupComplete"]);i!=null&&d(e,["setupComplete"],i);const o=c(t,["serverContent"]);o!=null&&d(e,["serverContent"],o);const a=c(t,["toolCall"]);a!=null&&d(e,["toolCall"],a);const r=c(t,["toolCallCancellation"]);r!=null&&d(e,["toolCallCancellation"],r);const f=c(t,["usageMetadata"]);f!=null&&d(e,["usageMetadata"],hw(f));const p=c(t,["goAway"]);p!=null&&d(e,["goAway"],p);const y=c(t,["sessionResumptionUpdate"]);y!=null&&d(e,["sessionResumptionUpdate"],y);const m=c(t,["voiceActivityDetectionSignal"]);m!=null&&d(e,["voiceActivityDetectionSignal"],m);const v=c(t,["voiceActivity"]);return v!=null&&d(e,["voiceActivity"],pw(v)),e}function uw(t){const e={},i=c(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const a=c(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const r=c(t,["fileData"]);r!=null&&d(e,["fileData"],Kb(r));const f=c(t,["functionCall"]);f!=null&&d(e,["functionCall"],Xb(f));const p=c(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],cr(y));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const v=c(t,["thought"]);v!=null&&d(e,["thought"],v);const _=c(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const T=c(t,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function cw(t){const e={},i=c(t,["handle"]);if(i!=null&&d(e,["handle"],i),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function fw(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],Wb(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],jb(p));const y=c(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function dw(t){const e={},i=c(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const o=c(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&d(e,["codeExecution"],a);const r=c(t,["enterpriseWebSearch"]);r!=null&&d(e,["enterpriseWebSearch"],r);const f=c(t,["functionDeclarations"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(T=>Qb(T))),d(e,["functionDeclarations"],_)}const p=c(t,["googleMaps"]);p!=null&&d(e,["googleMaps"],p);const y=c(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],y);const m=c(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const v=c(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function hw(t){const e={},i=c(t,["promptTokenCount"]);i!=null&&d(e,["promptTokenCount"],i);const o=c(t,["cachedContentTokenCount"]);o!=null&&d(e,["cachedContentTokenCount"],o);const a=c(t,["candidatesTokenCount"]);a!=null&&d(e,["responseTokenCount"],a);const r=c(t,["toolUsePromptTokenCount"]);r!=null&&d(e,["toolUsePromptTokenCount"],r);const f=c(t,["thoughtsTokenCount"]);f!=null&&d(e,["thoughtsTokenCount"],f);const p=c(t,["totalTokenCount"]);p!=null&&d(e,["totalTokenCount"],p);const y=c(t,["promptTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(x=>x)),d(e,["promptTokensDetails"],A)}const m=c(t,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(x=>x)),d(e,["cacheTokensDetails"],A)}const v=c(t,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(x=>x)),d(e,["responseTokensDetails"],A)}const _=c(t,["toolUsePromptTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(x=>x)),d(e,["toolUsePromptTokensDetails"],A)}const T=c(t,["trafficType"]);return T!=null&&d(e,["trafficType"],T),e}function pw(t){const e={},i=c(t,["type"]);return i!=null&&d(e,["voiceActivityType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mw(t,e){const i={},o=c(t,["data"]);if(o!=null&&d(i,["data"],o),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function gw(t,e){const i={},o=c(t,["content"]);o!=null&&d(i,["content"],o);const a=c(t,["citationMetadata"]);a!=null&&d(i,["citationMetadata"],yw(a));const r=c(t,["tokenCount"]);r!=null&&d(i,["tokenCount"],r);const f=c(t,["finishReason"]);f!=null&&d(i,["finishReason"],f);const p=c(t,["avgLogprobs"]);p!=null&&d(i,["avgLogprobs"],p);const y=c(t,["groundingMetadata"]);y!=null&&d(i,["groundingMetadata"],y);const m=c(t,["index"]);m!=null&&d(i,["index"],m);const v=c(t,["logprobsResult"]);v!=null&&d(i,["logprobsResult"],v);const _=c(t,["safetyRatings"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(x=>x)),d(i,["safetyRatings"],A)}const T=c(t,["urlContextMetadata"]);return T!=null&&d(i,["urlContextMetadata"],T),i}function yw(t,e){const i={},o=c(t,["citationSources"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(i,["citations"],a)}return i}function vw(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["contents"]);if(r!=null){let f=cn(r);Array.isArray(f)&&(f=f.map(p=>p)),d(o,["contents"],f)}return o}function _w(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["tokensInfo"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(i,["tokensInfo"],r)}return i}function Sw(t,e){const i={},o=c(t,["values"]);o!=null&&d(i,["values"],o);const a=c(t,["statistics"]);return a!=null&&d(i,["statistics"],Tw(a)),i}function Tw(t,e){const i={},o=c(t,["truncated"]);o!=null&&d(i,["truncated"],o);const a=c(t,["token_count"]);return a!=null&&d(i,["tokenCount"],a),i}function Or(t,e){const i={},o=c(t,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(f=>MR(f))),d(i,["parts"],r)}const a=c(t,["role"]);return a!=null&&d(i,["role"],a),i}function Ew(t,e){const i={},o=c(t,["controlType"]);o!=null&&d(i,["controlType"],o);const a=c(t,["enableControlImageComputation"]);return a!=null&&d(i,["computeControl"],a),i}function Cw(t,e){const i={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return i}function Aw(t,e,i){const o={},a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],Nt(a));const r=c(t,["tools"]);if(e!==void 0&&r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>B0(y))),d(e,["tools"],p)}const f=c(t,["generationConfig"]);return e!==void 0&&f!=null&&d(e,["generationConfig"],mR(f)),o}function xw(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["contents"]);if(r!=null){let p=cn(r);Array.isArray(p)&&(p=p.map(y=>Or(y))),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&Cw(f),o}function bw(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["contents"]);if(r!=null){let p=cn(r);Array.isArray(p)&&(p=p.map(y=>y)),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&Aw(f,o),o}function ww(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["totalTokens"]);a!=null&&d(i,["totalTokens"],a);const r=c(t,["cachedContentTokenCount"]);return r!=null&&d(i,["cachedContentTokenCount"],r),i}function Rw(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["totalTokens"]);return a!=null&&d(i,["totalTokens"],a),i}function Nw(t,e,i){const o={},a=c(e,["model"]);return a!=null&&d(o,["_url","name"],Le(t,a)),o}function Mw(t,e,i){const o={},a=c(e,["model"]);return a!=null&&d(o,["_url","name"],Le(t,a)),o}function Iw(t,e){const i={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(i,["sdkHttpResponse"],o),i}function Dw(t,e){const i={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(i,["sdkHttpResponse"],o),i}function Uw(t,e,i){const o={},a=c(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const f=c(t,["numberOfImages"]);e!==void 0&&f!=null&&d(e,["parameters","sampleCount"],f);const p=c(t,["aspectRatio"]);e!==void 0&&p!=null&&d(e,["parameters","aspectRatio"],p);const y=c(t,["guidanceScale"]);e!==void 0&&y!=null&&d(e,["parameters","guidanceScale"],y);const m=c(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const v=c(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&d(e,["parameters","safetySetting"],v);const _=c(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const T=c(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&d(e,["parameters","includeSafetyAttributes"],T);const A=c(t,["includeRaiReason"]);e!==void 0&&A!=null&&d(e,["parameters","includeRaiReason"],A);const x=c(t,["language"]);e!==void 0&&x!=null&&d(e,["parameters","language"],x);const w=c(t,["outputMimeType"]);e!==void 0&&w!=null&&d(e,["parameters","outputOptions","mimeType"],w);const b=c(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","compressionQuality"],b);const H=c(t,["addWatermark"]);e!==void 0&&H!=null&&d(e,["parameters","addWatermark"],H);const G=c(t,["labels"]);e!==void 0&&G!=null&&d(e,["labels"],G);const I=c(t,["editMode"]);e!==void 0&&I!=null&&d(e,["parameters","editMode"],I);const O=c(t,["baseSteps"]);return e!==void 0&&O!=null&&d(e,["parameters","editConfig","baseSteps"],O),o}function Lw(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const f=c(e,["referenceImages"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(m=>GR(m))),d(o,["instances[0]","referenceImages"],y)}const p=c(e,["config"]);return p!=null&&Uw(p,o),o}function Ow(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>Gr(f))),d(i,["generatedImages"],r)}return i}function Gw(t,e,i){const o={},a=c(t,["taskType"]);e!==void 0&&a!=null&&d(e,["requests[]","taskType"],a);const r=c(t,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const f=c(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&d(e,["requests[]","outputDimensionality"],f),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function Pw(t,e,i){const o={},a=c(t,["taskType"]);e!==void 0&&a!=null&&d(e,["instances[]","task_type"],a);const r=c(t,["title"]);e!==void 0&&r!=null&&d(e,["instances[]","title"],r);const f=c(t,["outputDimensionality"]);e!==void 0&&f!=null&&d(e,["parameters","outputDimensionality"],f);const p=c(t,["mimeType"]);e!==void 0&&p!=null&&d(e,["instances[]","mimeType"],p);const y=c(t,["autoTruncate"]);return e!==void 0&&y!=null&&d(e,["parameters","autoTruncate"],y),o}function kw(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["contents"]);if(r!=null){let y=hd(t,r);Array.isArray(y)&&(y=y.map(m=>m)),d(o,["requests[]","content"],y)}const f=c(e,["config"]);f!=null&&Gw(f,o);const p=c(e,["model"]);return p!==void 0&&d(o,["requests[]","model"],Le(t,p)),o}function Hw(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["contents"]);if(r!=null){let p=hd(t,r);Array.isArray(p)&&(p=p.map(y=>y)),d(o,["instances[]","content"],p)}const f=c(e,["config"]);return f!=null&&Pw(f,o),o}function qw(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["embeddings"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>p)),d(i,["embeddings"],f)}const r=c(t,["metadata"]);return r!=null&&d(i,["metadata"],r),i}function Bw(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["predictions[]","embeddings"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>Sw(p))),d(i,["embeddings"],f)}const r=c(t,["metadata"]);return r!=null&&d(i,["metadata"],r),i}function Vw(t,e){const i={},o=c(t,["endpoint"]);o!=null&&d(i,["name"],o);const a=c(t,["deployedModelId"]);return a!=null&&d(i,["deployedModelId"],a),i}function zw(t,e){const i={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["fileUri"]);o!=null&&d(i,["fileUri"],o);const a=c(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function Fw(t,e){const i={},o=c(t,["id"]);o!=null&&d(i,["id"],o);const a=c(t,["args"]);a!=null&&d(i,["args"],a);const r=c(t,["name"]);if(r!=null&&d(i,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return i}function $w(t,e){const i={},o=c(t,["allowedFunctionNames"]);o!=null&&d(i,["allowedFunctionNames"],o);const a=c(t,["mode"]);if(a!=null&&d(i,["mode"],a),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return i}function Jw(t,e){const i={},o=c(t,["description"]);o!=null&&d(i,["description"],o);const a=c(t,["name"]);a!=null&&d(i,["name"],a);const r=c(t,["parameters"]);r!=null&&d(i,["parameters"],r);const f=c(t,["parametersJsonSchema"]);f!=null&&d(i,["parametersJsonSchema"],f);const p=c(t,["response"]);p!=null&&d(i,["response"],p);const y=c(t,["responseJsonSchema"]);if(y!=null&&d(i,["responseJsonSchema"],y),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return i}function Yw(t,e,i,o){const a={},r=c(e,["systemInstruction"]);i!==void 0&&r!=null&&d(i,["systemInstruction"],Or(Nt(r)));const f=c(e,["temperature"]);f!=null&&d(a,["temperature"],f);const p=c(e,["topP"]);p!=null&&d(a,["topP"],p);const y=c(e,["topK"]);y!=null&&d(a,["topK"],y);const m=c(e,["candidateCount"]);m!=null&&d(a,["candidateCount"],m);const v=c(e,["maxOutputTokens"]);v!=null&&d(a,["maxOutputTokens"],v);const _=c(e,["stopSequences"]);_!=null&&d(a,["stopSequences"],_);const T=c(e,["responseLogprobs"]);T!=null&&d(a,["responseLogprobs"],T);const A=c(e,["logprobs"]);A!=null&&d(a,["logprobs"],A);const x=c(e,["presencePenalty"]);x!=null&&d(a,["presencePenalty"],x);const w=c(e,["frequencyPenalty"]);w!=null&&d(a,["frequencyPenalty"],w);const b=c(e,["seed"]);b!=null&&d(a,["seed"],b);const H=c(e,["responseMimeType"]);H!=null&&d(a,["responseMimeType"],H);const G=c(e,["responseSchema"]);G!=null&&d(a,["responseSchema"],pd(G));const I=c(e,["responseJsonSchema"]);if(I!=null&&d(a,["responseJsonSchema"],I),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=c(e,["safetySettings"]);if(i!==void 0&&O!=null){let Ge=O;Array.isArray(Ge)&&(Ge=Ge.map(Ke=>PR(Ke))),d(i,["safetySettings"],Ge)}const q=c(e,["tools"]);if(i!==void 0&&q!=null){let Ge=to(q);Array.isArray(Ge)&&(Ge=Ge.map(Ke=>FR(eo(Ke)))),d(i,["tools"],Ge)}const Q=c(e,["toolConfig"]);if(i!==void 0&&Q!=null&&d(i,["toolConfig"],zR(Q)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=c(e,["cachedContent"]);i!==void 0&&$!=null&&d(i,["cachedContent"],ei(t,$));const fe=c(e,["responseModalities"]);fe!=null&&d(a,["responseModalities"],fe);const X=c(e,["mediaResolution"]);X!=null&&d(a,["mediaResolution"],X);const ie=c(e,["speechConfig"]);if(ie!=null&&d(a,["speechConfig"],md(ie)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const oe=c(e,["thinkingConfig"]);oe!=null&&d(a,["thinkingConfig"],oe);const Ce=c(e,["imageConfig"]);Ce!=null&&d(a,["imageConfig"],SR(Ce));const Pe=c(e,["enableEnhancedCivicAnswers"]);if(Pe!=null&&d(a,["enableEnhancedCivicAnswers"],Pe),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return a}function Kw(t,e,i,o){const a={},r=c(e,["systemInstruction"]);i!==void 0&&r!=null&&d(i,["systemInstruction"],Nt(r));const f=c(e,["temperature"]);f!=null&&d(a,["temperature"],f);const p=c(e,["topP"]);p!=null&&d(a,["topP"],p);const y=c(e,["topK"]);y!=null&&d(a,["topK"],y);const m=c(e,["candidateCount"]);m!=null&&d(a,["candidateCount"],m);const v=c(e,["maxOutputTokens"]);v!=null&&d(a,["maxOutputTokens"],v);const _=c(e,["stopSequences"]);_!=null&&d(a,["stopSequences"],_);const T=c(e,["responseLogprobs"]);T!=null&&d(a,["responseLogprobs"],T);const A=c(e,["logprobs"]);A!=null&&d(a,["logprobs"],A);const x=c(e,["presencePenalty"]);x!=null&&d(a,["presencePenalty"],x);const w=c(e,["frequencyPenalty"]);w!=null&&d(a,["frequencyPenalty"],w);const b=c(e,["seed"]);b!=null&&d(a,["seed"],b);const H=c(e,["responseMimeType"]);H!=null&&d(a,["responseMimeType"],H);const G=c(e,["responseSchema"]);G!=null&&d(a,["responseSchema"],pd(G));const I=c(e,["responseJsonSchema"]);I!=null&&d(a,["responseJsonSchema"],I);const O=c(e,["routingConfig"]);O!=null&&d(a,["routingConfig"],O);const q=c(e,["modelSelectionConfig"]);q!=null&&d(a,["modelConfig"],q);const Q=c(e,["safetySettings"]);if(i!==void 0&&Q!=null){let le=Q;Array.isArray(le)&&(le=le.map(Re=>Re)),d(i,["safetySettings"],le)}const $=c(e,["tools"]);if(i!==void 0&&$!=null){let le=to($);Array.isArray(le)&&(le=le.map(Re=>B0(eo(Re)))),d(i,["tools"],le)}const fe=c(e,["toolConfig"]);i!==void 0&&fe!=null&&d(i,["toolConfig"],fe);const X=c(e,["labels"]);i!==void 0&&X!=null&&d(i,["labels"],X);const ie=c(e,["cachedContent"]);i!==void 0&&ie!=null&&d(i,["cachedContent"],ei(t,ie));const oe=c(e,["responseModalities"]);oe!=null&&d(a,["responseModalities"],oe);const Ce=c(e,["mediaResolution"]);Ce!=null&&d(a,["mediaResolution"],Ce);const Pe=c(e,["speechConfig"]);Pe!=null&&d(a,["speechConfig"],md(Pe));const Ge=c(e,["audioTimestamp"]);Ge!=null&&d(a,["audioTimestamp"],Ge);const Ke=c(e,["thinkingConfig"]);Ke!=null&&d(a,["thinkingConfig"],Ke);const V=c(e,["imageConfig"]);if(V!=null&&d(a,["imageConfig"],TR(V)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Z=c(e,["modelArmorConfig"]);return i!==void 0&&Z!=null&&d(i,["modelArmorConfig"],Z),a}function gv(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["contents"]);if(r!=null){let p=cn(r);Array.isArray(p)&&(p=p.map(y=>Or(y))),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&d(o,["generationConfig"],Yw(t,f,o)),o}function yv(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["contents"]);if(r!=null){let p=cn(r);Array.isArray(p)&&(p=p.map(y=>y)),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&d(o,["generationConfig"],Kw(t,f,o)),o}function vv(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["candidates"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(v=>gw(v))),d(i,["candidates"],m)}const r=c(t,["modelVersion"]);r!=null&&d(i,["modelVersion"],r);const f=c(t,["promptFeedback"]);f!=null&&d(i,["promptFeedback"],f);const p=c(t,["responseId"]);p!=null&&d(i,["responseId"],p);const y=c(t,["usageMetadata"]);return y!=null&&d(i,["usageMetadata"],y),i}function _v(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(_=>_)),d(i,["candidates"],v)}const r=c(t,["createTime"]);r!=null&&d(i,["createTime"],r);const f=c(t,["modelVersion"]);f!=null&&d(i,["modelVersion"],f);const p=c(t,["promptFeedback"]);p!=null&&d(i,["promptFeedback"],p);const y=c(t,["responseId"]);y!=null&&d(i,["responseId"],y);const m=c(t,["usageMetadata"]);return m!=null&&d(i,["usageMetadata"],m),i}function Xw(t,e,i){const o={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=c(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const r=c(t,["aspectRatio"]);e!==void 0&&r!=null&&d(e,["parameters","aspectRatio"],r);const f=c(t,["guidanceScale"]);if(e!==void 0&&f!=null&&d(e,["parameters","guidanceScale"],f),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=c(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const y=c(t,["personGeneration"]);e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y);const m=c(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&d(e,["parameters","includeRaiReason"],v);const _=c(t,["language"]);e!==void 0&&_!=null&&d(e,["parameters","language"],_);const T=c(t,["outputMimeType"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","mimeType"],T);const A=c(t,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&d(e,["parameters","outputOptions","compressionQuality"],A),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=c(t,["imageSize"]);if(e!==void 0&&x!=null&&d(e,["parameters","sampleImageSize"],x),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Qw(t,e,i){const o={},a=c(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const f=c(t,["numberOfImages"]);e!==void 0&&f!=null&&d(e,["parameters","sampleCount"],f);const p=c(t,["aspectRatio"]);e!==void 0&&p!=null&&d(e,["parameters","aspectRatio"],p);const y=c(t,["guidanceScale"]);e!==void 0&&y!=null&&d(e,["parameters","guidanceScale"],y);const m=c(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const v=c(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&d(e,["parameters","safetySetting"],v);const _=c(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const T=c(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&d(e,["parameters","includeSafetyAttributes"],T);const A=c(t,["includeRaiReason"]);e!==void 0&&A!=null&&d(e,["parameters","includeRaiReason"],A);const x=c(t,["language"]);e!==void 0&&x!=null&&d(e,["parameters","language"],x);const w=c(t,["outputMimeType"]);e!==void 0&&w!=null&&d(e,["parameters","outputOptions","mimeType"],w);const b=c(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","compressionQuality"],b);const H=c(t,["addWatermark"]);e!==void 0&&H!=null&&d(e,["parameters","addWatermark"],H);const G=c(t,["labels"]);e!==void 0&&G!=null&&d(e,["labels"],G);const I=c(t,["imageSize"]);e!==void 0&&I!=null&&d(e,["parameters","sampleImageSize"],I);const O=c(t,["enhancePrompt"]);return e!==void 0&&O!=null&&d(e,["parameters","enhancePrompt"],O),o}function Zw(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const f=c(e,["config"]);return f!=null&&Xw(f,o),o}function Ww(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const f=c(e,["config"]);return f!=null&&Qw(f,o),o}function jw(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["predictions"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>fR(p))),d(i,["generatedImages"],f)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&d(i,["positivePromptSafetyAttributes"],H0(r)),i}function eR(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["predictions"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>Gr(p))),d(i,["generatedImages"],f)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&d(i,["positivePromptSafetyAttributes"],q0(r)),i}function tR(t,e,i){const o={},a=c(t,["numberOfVideos"]);if(e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(t,["durationSeconds"]);if(e!==void 0&&r!=null&&d(e,["parameters","durationSeconds"],r),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=c(t,["aspectRatio"]);e!==void 0&&f!=null&&d(e,["parameters","aspectRatio"],f);const p=c(t,["resolution"]);e!==void 0&&p!=null&&d(e,["parameters","resolution"],p);const y=c(t,["personGeneration"]);if(e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=c(t,["negativePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","negativePrompt"],m);const v=c(t,["enhancePrompt"]);if(e!==void 0&&v!=null&&d(e,["parameters","enhancePrompt"],v),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=c(t,["lastFrame"]);e!==void 0&&_!=null&&d(e,["instances[0]","lastFrame"],Pr(_));const T=c(t,["referenceImages"]);if(e!==void 0&&T!=null){let A=T;Array.isArray(A)&&(A=A.map(x=>iN(x))),d(e,["instances[0]","referenceImages"],A)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function nR(t,e,i){const o={},a=c(t,["numberOfVideos"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const f=c(t,["fps"]);e!==void 0&&f!=null&&d(e,["parameters","fps"],f);const p=c(t,["durationSeconds"]);e!==void 0&&p!=null&&d(e,["parameters","durationSeconds"],p);const y=c(t,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const m=c(t,["aspectRatio"]);e!==void 0&&m!=null&&d(e,["parameters","aspectRatio"],m);const v=c(t,["resolution"]);e!==void 0&&v!=null&&d(e,["parameters","resolution"],v);const _=c(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const T=c(t,["pubsubTopic"]);e!==void 0&&T!=null&&d(e,["parameters","pubsubTopic"],T);const A=c(t,["negativePrompt"]);e!==void 0&&A!=null&&d(e,["parameters","negativePrompt"],A);const x=c(t,["enhancePrompt"]);e!==void 0&&x!=null&&d(e,["parameters","enhancePrompt"],x);const w=c(t,["generateAudio"]);e!==void 0&&w!=null&&d(e,["parameters","generateAudio"],w);const b=c(t,["lastFrame"]);e!==void 0&&b!=null&&d(e,["instances[0]","lastFrame"],Tn(b));const H=c(t,["referenceImages"]);if(e!==void 0&&H!=null){let O=H;Array.isArray(O)&&(O=O.map(q=>sN(q))),d(e,["instances[0]","referenceImages"],O)}const G=c(t,["mask"]);e!==void 0&&G!=null&&d(e,["instances[0]","mask"],nN(G));const I=c(t,["compressionQuality"]);return e!==void 0&&I!=null&&d(e,["parameters","compressionQuality"],I),o}function iR(t,e){const i={},o=c(t,["name"]);o!=null&&d(i,["name"],o);const a=c(t,["metadata"]);a!=null&&d(i,["metadata"],a);const r=c(t,["done"]);r!=null&&d(i,["done"],r);const f=c(t,["error"]);f!=null&&d(i,["error"],f);const p=c(t,["response","generateVideoResponse"]);return p!=null&&d(i,["response"],aR(p)),i}function sR(t,e){const i={},o=c(t,["name"]);o!=null&&d(i,["name"],o);const a=c(t,["metadata"]);a!=null&&d(i,["metadata"],a);const r=c(t,["done"]);r!=null&&d(i,["done"],r);const f=c(t,["error"]);f!=null&&d(i,["error"],f);const p=c(t,["response"]);return p!=null&&d(i,["response"],rR(p)),i}function oR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const f=c(e,["image"]);f!=null&&d(o,["instances[0]","image"],Pr(f));const p=c(e,["video"]);p!=null&&d(o,["instances[0]","video"],V0(p));const y=c(e,["source"]);y!=null&&uR(y,o);const m=c(e,["config"]);return m!=null&&tR(m,o),o}function lR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const f=c(e,["image"]);f!=null&&d(o,["instances[0]","image"],Tn(f));const p=c(e,["video"]);p!=null&&d(o,["instances[0]","video"],z0(p));const y=c(e,["source"]);y!=null&&cR(y,o);const m=c(e,["config"]);return m!=null&&nR(m,o),o}function aR(t,e){const i={},o=c(t,["generatedSamples"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>hR(p))),d(i,["generatedVideos"],f)}const a=c(t,["raiMediaFilteredCount"]);a!=null&&d(i,["raiMediaFilteredCount"],a);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&d(i,["raiMediaFilteredReasons"],r),i}function rR(t,e){const i={},o=c(t,["videos"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>pR(p))),d(i,["generatedVideos"],f)}const a=c(t,["raiMediaFilteredCount"]);a!=null&&d(i,["raiMediaFilteredCount"],a);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&d(i,["raiMediaFilteredReasons"],r),i}function uR(t,e,i){const o={},a=c(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const r=c(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Pr(r));const f=c(t,["video"]);return e!==void 0&&f!=null&&d(e,["instances[0]","video"],V0(f)),o}function cR(t,e,i){const o={},a=c(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const r=c(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Tn(r));const f=c(t,["video"]);return e!==void 0&&f!=null&&d(e,["instances[0]","video"],z0(f)),o}function fR(t,e){const i={},o=c(t,["_self"]);o!=null&&d(i,["image"],ER(o));const a=c(t,["raiFilteredReason"]);a!=null&&d(i,["raiFilteredReason"],a);const r=c(t,["_self"]);return r!=null&&d(i,["safetyAttributes"],H0(r)),i}function Gr(t,e){const i={},o=c(t,["_self"]);o!=null&&d(i,["image"],k0(o));const a=c(t,["raiFilteredReason"]);a!=null&&d(i,["raiFilteredReason"],a);const r=c(t,["_self"]);r!=null&&d(i,["safetyAttributes"],q0(r));const f=c(t,["prompt"]);return f!=null&&d(i,["enhancedPrompt"],f),i}function dR(t,e){const i={},o=c(t,["_self"]);o!=null&&d(i,["mask"],k0(o));const a=c(t,["labels"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(i,["labels"],r)}return i}function hR(t,e){const i={},o=c(t,["video"]);return o!=null&&d(i,["video"],eN(o)),i}function pR(t,e){const i={},o=c(t,["_self"]);return o!=null&&d(i,["video"],tN(o)),i}function mR(t,e){const i={},o=c(t,["modelSelectionConfig"]);o!=null&&d(i,["modelConfig"],o);const a=c(t,["responseJsonSchema"]);a!=null&&d(i,["responseJsonSchema"],a);const r=c(t,["audioTimestamp"]);r!=null&&d(i,["audioTimestamp"],r);const f=c(t,["candidateCount"]);f!=null&&d(i,["candidateCount"],f);const p=c(t,["enableAffectiveDialog"]);p!=null&&d(i,["enableAffectiveDialog"],p);const y=c(t,["frequencyPenalty"]);y!=null&&d(i,["frequencyPenalty"],y);const m=c(t,["logprobs"]);m!=null&&d(i,["logprobs"],m);const v=c(t,["maxOutputTokens"]);v!=null&&d(i,["maxOutputTokens"],v);const _=c(t,["mediaResolution"]);_!=null&&d(i,["mediaResolution"],_);const T=c(t,["presencePenalty"]);T!=null&&d(i,["presencePenalty"],T);const A=c(t,["responseLogprobs"]);A!=null&&d(i,["responseLogprobs"],A);const x=c(t,["responseMimeType"]);x!=null&&d(i,["responseMimeType"],x);const w=c(t,["responseModalities"]);w!=null&&d(i,["responseModalities"],w);const b=c(t,["responseSchema"]);b!=null&&d(i,["responseSchema"],b);const H=c(t,["routingConfig"]);H!=null&&d(i,["routingConfig"],H);const G=c(t,["seed"]);G!=null&&d(i,["seed"],G);const I=c(t,["speechConfig"]);I!=null&&d(i,["speechConfig"],I);const O=c(t,["stopSequences"]);O!=null&&d(i,["stopSequences"],O);const q=c(t,["temperature"]);q!=null&&d(i,["temperature"],q);const Q=c(t,["thinkingConfig"]);Q!=null&&d(i,["thinkingConfig"],Q);const $=c(t,["topK"]);$!=null&&d(i,["topK"],$);const fe=c(t,["topP"]);if(fe!=null&&d(i,["topP"],fe),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function gR(t,e,i){const o={},a=c(e,["model"]);return a!=null&&d(o,["_url","name"],Le(t,a)),o}function yR(t,e,i){const o={},a=c(e,["model"]);return a!=null&&d(o,["_url","name"],Le(t,a)),o}function vR(t,e){const i={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(t,["enableWidget"]);return o!=null&&d(i,["enableWidget"],o),i}function _R(t,e){const i={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(t,["timeRangeFilter"]);return o!=null&&d(i,["timeRangeFilter"],o),i}function SR(t,e){const i={},o=c(t,["aspectRatio"]);o!=null&&d(i,["aspectRatio"],o);const a=c(t,["imageSize"]);if(a!=null&&d(i,["imageSize"],a),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return i}function TR(t,e){const i={},o=c(t,["aspectRatio"]);o!=null&&d(i,["aspectRatio"],o);const a=c(t,["imageSize"]);a!=null&&d(i,["imageSize"],a);const r=c(t,["personGeneration"]);r!=null&&d(i,["personGeneration"],r);const f=c(t,["outputMimeType"]);f!=null&&d(i,["imageOutputOptions","mimeType"],f);const p=c(t,["outputCompressionQuality"]);return p!=null&&d(i,["imageOutputOptions","compressionQuality"],p),i}function ER(t,e){const i={},o=c(t,["bytesBase64Encoded"]);o!=null&&d(i,["imageBytes"],Ni(o));const a=c(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function k0(t,e){const i={},o=c(t,["gcsUri"]);o!=null&&d(i,["gcsUri"],o);const a=c(t,["bytesBase64Encoded"]);a!=null&&d(i,["imageBytes"],Ni(a));const r=c(t,["mimeType"]);return r!=null&&d(i,["mimeType"],r),i}function Pr(t,e){const i={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(t,["imageBytes"]);o!=null&&d(i,["bytesBase64Encoded"],Ni(o));const a=c(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function Tn(t,e){const i={},o=c(t,["gcsUri"]);o!=null&&d(i,["gcsUri"],o);const a=c(t,["imageBytes"]);a!=null&&d(i,["bytesBase64Encoded"],Ni(a));const r=c(t,["mimeType"]);return r!=null&&d(i,["mimeType"],r),i}function CR(t,e,i,o){const a={},r=c(e,["pageSize"]);i!==void 0&&r!=null&&d(i,["_query","pageSize"],r);const f=c(e,["pageToken"]);i!==void 0&&f!=null&&d(i,["_query","pageToken"],f);const p=c(e,["filter"]);i!==void 0&&p!=null&&d(i,["_query","filter"],p);const y=c(e,["queryBase"]);return i!==void 0&&y!=null&&d(i,["_url","models_url"],I0(t,y)),a}function AR(t,e,i,o){const a={},r=c(e,["pageSize"]);i!==void 0&&r!=null&&d(i,["_query","pageSize"],r);const f=c(e,["pageToken"]);i!==void 0&&f!=null&&d(i,["_query","pageToken"],f);const p=c(e,["filter"]);i!==void 0&&p!=null&&d(i,["_query","filter"],p);const y=c(e,["queryBase"]);return i!==void 0&&y!=null&&d(i,["_url","models_url"],I0(t,y)),a}function xR(t,e,i){const o={},a=c(e,["config"]);return a!=null&&CR(t,a,o),o}function bR(t,e,i){const o={},a=c(e,["config"]);return a!=null&&AR(t,a,o),o}function wR(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const r=c(t,["_self"]);if(r!=null){let f=D0(r);Array.isArray(f)&&(f=f.map(p=>Hf(p))),d(i,["models"],f)}return i}function RR(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const r=c(t,["_self"]);if(r!=null){let f=D0(r);Array.isArray(f)&&(f=f.map(p=>qf(p))),d(i,["models"],f)}return i}function NR(t,e){const i={},o=c(t,["maskMode"]);o!=null&&d(i,["maskMode"],o);const a=c(t,["segmentationClasses"]);a!=null&&d(i,["maskClasses"],a);const r=c(t,["maskDilation"]);return r!=null&&d(i,["dilation"],r),i}function Hf(t,e){const i={},o=c(t,["name"]);o!=null&&d(i,["name"],o);const a=c(t,["displayName"]);a!=null&&d(i,["displayName"],a);const r=c(t,["description"]);r!=null&&d(i,["description"],r);const f=c(t,["version"]);f!=null&&d(i,["version"],f);const p=c(t,["_self"]);p!=null&&d(i,["tunedModelInfo"],$R(p));const y=c(t,["inputTokenLimit"]);y!=null&&d(i,["inputTokenLimit"],y);const m=c(t,["outputTokenLimit"]);m!=null&&d(i,["outputTokenLimit"],m);const v=c(t,["supportedGenerationMethods"]);v!=null&&d(i,["supportedActions"],v);const _=c(t,["temperature"]);_!=null&&d(i,["temperature"],_);const T=c(t,["maxTemperature"]);T!=null&&d(i,["maxTemperature"],T);const A=c(t,["topP"]);A!=null&&d(i,["topP"],A);const x=c(t,["topK"]);x!=null&&d(i,["topK"],x);const w=c(t,["thinking"]);return w!=null&&d(i,["thinking"],w),i}function qf(t,e){const i={},o=c(t,["name"]);o!=null&&d(i,["name"],o);const a=c(t,["displayName"]);a!=null&&d(i,["displayName"],a);const r=c(t,["description"]);r!=null&&d(i,["description"],r);const f=c(t,["versionId"]);f!=null&&d(i,["version"],f);const p=c(t,["deployedModels"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(A=>Vw(A))),d(i,["endpoints"],T)}const y=c(t,["labels"]);y!=null&&d(i,["labels"],y);const m=c(t,["_self"]);m!=null&&d(i,["tunedModelInfo"],JR(m));const v=c(t,["defaultCheckpointId"]);v!=null&&d(i,["defaultCheckpointId"],v);const _=c(t,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>A)),d(i,["checkpoints"],T)}return i}function MR(t,e){const i={},o=c(t,["mediaResolution"]);o!=null&&d(i,["mediaResolution"],o);const a=c(t,["codeExecutionResult"]);a!=null&&d(i,["codeExecutionResult"],a);const r=c(t,["executableCode"]);r!=null&&d(i,["executableCode"],r);const f=c(t,["fileData"]);f!=null&&d(i,["fileData"],zw(f));const p=c(t,["functionCall"]);p!=null&&d(i,["functionCall"],Fw(p));const y=c(t,["functionResponse"]);y!=null&&d(i,["functionResponse"],y);const m=c(t,["inlineData"]);m!=null&&d(i,["inlineData"],mw(m));const v=c(t,["text"]);v!=null&&d(i,["text"],v);const _=c(t,["thought"]);_!=null&&d(i,["thought"],_);const T=c(t,["thoughtSignature"]);T!=null&&d(i,["thoughtSignature"],T);const A=c(t,["videoMetadata"]);return A!=null&&d(i,["videoMetadata"],A),i}function IR(t,e){const i={},o=c(t,["productImage"]);return o!=null&&d(i,["image"],Tn(o)),i}function DR(t,e,i){const o={},a=c(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const r=c(t,["baseSteps"]);e!==void 0&&r!=null&&d(e,["parameters","baseSteps"],r);const f=c(t,["outputGcsUri"]);e!==void 0&&f!=null&&d(e,["parameters","storageUri"],f);const p=c(t,["seed"]);e!==void 0&&p!=null&&d(e,["parameters","seed"],p);const y=c(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&d(e,["parameters","safetySetting"],y);const m=c(t,["personGeneration"]);e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m);const v=c(t,["addWatermark"]);e!==void 0&&v!=null&&d(e,["parameters","addWatermark"],v);const _=c(t,["outputMimeType"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","mimeType"],_);const T=c(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","compressionQuality"],T);const A=c(t,["enhancePrompt"]);e!==void 0&&A!=null&&d(e,["parameters","enhancePrompt"],A);const x=c(t,["labels"]);return e!==void 0&&x!=null&&d(e,["labels"],x),o}function UR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["source"]);r!=null&&OR(r,o);const f=c(e,["config"]);return f!=null&&DR(f,o),o}function LR(t,e){const i={},o=c(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>Gr(r))),d(i,["generatedImages"],a)}return i}function OR(t,e,i){const o={},a=c(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const r=c(t,["personImage"]);e!==void 0&&r!=null&&d(e,["instances[0]","personImage","image"],Tn(r));const f=c(t,["productImages"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(y=>IR(y))),d(e,["instances[0]","productImages"],p)}return o}function GR(t,e){const i={},o=c(t,["referenceImage"]);o!=null&&d(i,["referenceImage"],Tn(o));const a=c(t,["referenceId"]);a!=null&&d(i,["referenceId"],a);const r=c(t,["referenceType"]);r!=null&&d(i,["referenceType"],r);const f=c(t,["maskImageConfig"]);f!=null&&d(i,["maskImageConfig"],NR(f));const p=c(t,["controlImageConfig"]);p!=null&&d(i,["controlImageConfig"],Ew(p));const y=c(t,["styleImageConfig"]);y!=null&&d(i,["styleImageConfig"],y);const m=c(t,["subjectImageConfig"]);return m!=null&&d(i,["subjectImageConfig"],m),i}function H0(t,e){const i={},o=c(t,["safetyAttributes","categories"]);o!=null&&d(i,["categories"],o);const a=c(t,["safetyAttributes","scores"]);a!=null&&d(i,["scores"],a);const r=c(t,["contentType"]);return r!=null&&d(i,["contentType"],r),i}function q0(t,e){const i={},o=c(t,["safetyAttributes","categories"]);o!=null&&d(i,["categories"],o);const a=c(t,["safetyAttributes","scores"]);a!=null&&d(i,["scores"],a);const r=c(t,["contentType"]);return r!=null&&d(i,["contentType"],r),i}function PR(t,e){const i={},o=c(t,["category"]);if(o!=null&&d(i,["category"],o),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(t,["threshold"]);return a!=null&&d(i,["threshold"],a),i}function kR(t,e){const i={},o=c(t,["image"]);return o!=null&&d(i,["image"],Tn(o)),i}function HR(t,e,i){const o={},a=c(t,["mode"]);e!==void 0&&a!=null&&d(e,["parameters","mode"],a);const r=c(t,["maxPredictions"]);e!==void 0&&r!=null&&d(e,["parameters","maxPredictions"],r);const f=c(t,["confidenceThreshold"]);e!==void 0&&f!=null&&d(e,["parameters","confidenceThreshold"],f);const p=c(t,["maskDilation"]);e!==void 0&&p!=null&&d(e,["parameters","maskDilation"],p);const y=c(t,["binaryColorThreshold"]);e!==void 0&&y!=null&&d(e,["parameters","binaryColorThreshold"],y);const m=c(t,["labels"]);return e!==void 0&&m!=null&&d(e,["labels"],m),o}function qR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["source"]);r!=null&&VR(r,o);const f=c(e,["config"]);return f!=null&&HR(f,o),o}function BR(t,e){const i={},o=c(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>dR(r))),d(i,["generatedMasks"],a)}return i}function VR(t,e,i){const o={},a=c(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const r=c(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Tn(r));const f=c(t,["scribbleImage"]);return e!==void 0&&f!=null&&d(e,["instances[0]","scribble"],kR(f)),o}function zR(t,e){const i={},o=c(t,["retrievalConfig"]);o!=null&&d(i,["retrievalConfig"],o);const a=c(t,["functionCallingConfig"]);return a!=null&&d(i,["functionCallingConfig"],$w(a)),i}function FR(t,e){const i={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(t,["computerUse"]);o!=null&&d(i,["computerUse"],o);const a=c(t,["fileSearch"]);a!=null&&d(i,["fileSearch"],a);const r=c(t,["codeExecution"]);if(r!=null&&d(i,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=c(t,["functionDeclarations"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(T=>T)),d(i,["functionDeclarations"],_)}const p=c(t,["googleMaps"]);p!=null&&d(i,["googleMaps"],vR(p));const y=c(t,["googleSearch"]);y!=null&&d(i,["googleSearch"],_R(y));const m=c(t,["googleSearchRetrieval"]);m!=null&&d(i,["googleSearchRetrieval"],m);const v=c(t,["urlContext"]);return v!=null&&d(i,["urlContext"],v),i}function B0(t,e){const i={},o=c(t,["retrieval"]);o!=null&&d(i,["retrieval"],o);const a=c(t,["computerUse"]);if(a!=null&&d(i,["computerUse"],a),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&d(i,["codeExecution"],r);const f=c(t,["enterpriseWebSearch"]);f!=null&&d(i,["enterpriseWebSearch"],f);const p=c(t,["functionDeclarations"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(A=>Jw(A))),d(i,["functionDeclarations"],T)}const y=c(t,["googleMaps"]);y!=null&&d(i,["googleMaps"],y);const m=c(t,["googleSearch"]);m!=null&&d(i,["googleSearch"],m);const v=c(t,["googleSearchRetrieval"]);v!=null&&d(i,["googleSearchRetrieval"],v);const _=c(t,["urlContext"]);return _!=null&&d(i,["urlContext"],_),i}function $R(t,e){const i={},o=c(t,["baseModel"]);o!=null&&d(i,["baseModel"],o);const a=c(t,["createTime"]);a!=null&&d(i,["createTime"],a);const r=c(t,["updateTime"]);return r!=null&&d(i,["updateTime"],r),i}function JR(t,e){const i={},o=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&d(i,["baseModel"],o);const a=c(t,["createTime"]);a!=null&&d(i,["createTime"],a);const r=c(t,["updateTime"]);return r!=null&&d(i,["updateTime"],r),i}function YR(t,e,i){const o={},a=c(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const r=c(t,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const f=c(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&d(e,["defaultCheckpointId"],f),o}function KR(t,e,i){const o={},a=c(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const r=c(t,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const f=c(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&d(e,["defaultCheckpointId"],f),o}function XR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","name"],Le(t,a));const r=c(e,["config"]);return r!=null&&YR(r,o),o}function QR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["config"]);return r!=null&&KR(r,o),o}function ZR(t,e,i){const o={},a=c(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const r=c(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&d(e,["parameters","safetySetting"],r);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const p=c(t,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const y=c(t,["outputMimeType"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","mimeType"],y);const m=c(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","compressionQuality"],m);const v=c(t,["enhanceInputImage"]);e!==void 0&&v!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],v);const _=c(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=c(t,["labels"]);e!==void 0&&T!=null&&d(e,["labels"],T);const A=c(t,["numberOfImages"]);e!==void 0&&A!=null&&d(e,["parameters","sampleCount"],A);const x=c(t,["mode"]);return e!==void 0&&x!=null&&d(e,["parameters","mode"],x),o}function WR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],Le(t,a));const r=c(e,["image"]);r!=null&&d(o,["instances[0]","image"],Tn(r));const f=c(e,["upscaleFactor"]);f!=null&&d(o,["parameters","upscaleConfig","upscaleFactor"],f);const p=c(e,["config"]);return p!=null&&ZR(p,o),o}function jR(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>Gr(f))),d(i,["generatedImages"],r)}return i}function eN(t,e){const i={},o=c(t,["uri"]);o!=null&&d(i,["uri"],o);const a=c(t,["encodedVideo"]);a!=null&&d(i,["videoBytes"],Ni(a));const r=c(t,["encoding"]);return r!=null&&d(i,["mimeType"],r),i}function tN(t,e){const i={},o=c(t,["gcsUri"]);o!=null&&d(i,["uri"],o);const a=c(t,["bytesBase64Encoded"]);a!=null&&d(i,["videoBytes"],Ni(a));const r=c(t,["mimeType"]);return r!=null&&d(i,["mimeType"],r),i}function nN(t,e){const i={},o=c(t,["image"]);o!=null&&d(i,["_self"],Tn(o));const a=c(t,["maskMode"]);return a!=null&&d(i,["maskMode"],a),i}function iN(t,e){const i={},o=c(t,["image"]);o!=null&&d(i,["image"],Pr(o));const a=c(t,["referenceType"]);return a!=null&&d(i,["referenceType"],a),i}function sN(t,e){const i={},o=c(t,["image"]);o!=null&&d(i,["image"],Tn(o));const a=c(t,["referenceType"]);return a!=null&&d(i,["referenceType"],a),i}function V0(t,e){const i={},o=c(t,["uri"]);o!=null&&d(i,["uri"],o);const a=c(t,["videoBytes"]);a!=null&&d(i,["encodedVideo"],Ni(a));const r=c(t,["mimeType"]);return r!=null&&d(i,["encoding"],r),i}function z0(t,e){const i={},o=c(t,["uri"]);o!=null&&d(i,["gcsUri"],o);const a=c(t,["videoBytes"]);a!=null&&d(i,["bytesBase64Encoded"],Ni(a));const r=c(t,["mimeType"]);return r!=null&&d(i,["mimeType"],r),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oN(t,e){const i={},o=c(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["displayName"],o),i}function lN(t){const e={},i=c(t,["config"]);return i!=null&&oN(i,e),e}function aN(t,e){const i={},o=c(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),i}function rN(t){const e={},i=c(t,["name"]);i!=null&&d(e,["_url","name"],i);const o=c(t,["config"]);return o!=null&&aN(o,e),e}function uN(t){const e={},i=c(t,["name"]);return i!=null&&d(e,["_url","name"],i),e}function cN(t,e){const i={},o=c(t,["customMetadata"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["customMetadata"],r)}const a=c(t,["chunkingConfig"]);return e!==void 0&&a!=null&&d(e,["chunkingConfig"],a),i}function fN(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["response"]);return f!=null&&d(e,["response"],hN(f)),e}function dN(t){const e={},i=c(t,["fileSearchStoreName"]);i!=null&&d(e,["_url","file_search_store_name"],i);const o=c(t,["fileName"]);o!=null&&d(e,["fileName"],o);const a=c(t,["config"]);return a!=null&&cN(a,e),e}function hN(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["parent"]);o!=null&&d(e,["parent"],o);const a=c(t,["documentName"]);return a!=null&&d(e,["documentName"],a),e}function pN(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function mN(t){const e={},i=c(t,["config"]);return i!=null&&pN(i,e),e}function gN(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["fileSearchStores"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["fileSearchStores"],r)}return e}function F0(t,e){const i={},o=c(t,["mimeType"]);e!==void 0&&o!=null&&d(e,["mimeType"],o);const a=c(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const r=c(t,["customMetadata"]);if(e!==void 0&&r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>y)),d(e,["customMetadata"],p)}const f=c(t,["chunkingConfig"]);return e!==void 0&&f!=null&&d(e,["chunkingConfig"],f),i}function yN(t){const e={},i=c(t,["fileSearchStoreName"]);i!=null&&d(e,["_url","file_search_store_name"],i);const o=c(t,["config"]);return o!=null&&F0(o,e),e}function vN(t){const e={},i=c(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _N="Content-Type",SN="X-Server-Timeout",TN="User-Agent",Bf="x-goog-api-client",EN="1.40.0",CN=`google-genai-sdk/${EN}`,AN="v1beta1",xN="v1beta";class bN{constructor(e){var i,o,a;this.clientOptions=Object.assign({},e),this.customBaseUrl=(i=e.httpOptions)===null||i===void 0?void 0:i.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const r={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const p=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!p?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:AN}else{if(!this.clientOptions.apiKey)throw new Al({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:xN,r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const a=[this.getRequestUrlInternal(i)];return o&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e,i){return!(i.baseUrl&&i.baseUrlResourceScope===Of.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,i),a=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[f,p]of Object.entries(e.queryParams))a.searchParams.append(f,String(p));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,i,a.toString(),e.abortSignal),this.unaryApiCall(a,r,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[a,r]of Object.entries(i))typeof r=="object"?o[a]=Object.assign(Object.assign({},o[a]),r):r!==void 0&&(o[a]=r);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,i),a=this.constructUrl(e.path,i,o);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,i,a.toString(),e.abortSignal),this.streamApiCall(a,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o,a){if(i&&i.timeout||a){const r=new AbortController,f=r.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const p=setTimeout(()=>r.abort(),i.timeout);p&&typeof p.unref=="function"&&p.unref()}a&&a.addEventListener("abort",()=>{r.abort()}),e.signal=f}return i&&i.extraBody!==null&&wN(e,i.extraBody),e.headers=await this.getHeadersInternal(i,o),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async a=>(await Sv(a),new Gf(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async a=>(await Sv(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return _n(this,arguments,function*(){var o;const a=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),r=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let f="";const p="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield ge(a.read());if(m){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=r.decode(v,{stream:!0});try{const x=JSON.parse(_);if("error"in x){const w=JSON.parse(JSON.stringify(x.error)),b=w.status,H=w.code,G=`got status: ${b}. ${JSON.stringify(x)}`;if(H>=400&&H<600)throw new Al({message:G,status:H})}}catch(x){if(x.name==="ApiError")throw x}f+=_;let T=-1,A=0;for(;;){T=-1,A=0;for(const b of y){const H=f.indexOf(b);H!==-1&&(T===-1||H<T)&&(T=H,A=b.length)}if(T===-1)break;const x=f.substring(0,T);f=f.substring(T+A);const w=x.trim();if(w.startsWith(p)){const b=w.substring(p.length).trim();try{const H=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ge(new Gf(H))}catch(H){throw new Error(`exception parsing stream chunk ${b}. ${H}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=CN+" "+this.clientOptions.userAgentExtra;return e[TN]=i,e[Bf]=i,e[_N]="application/json",e}async getHeadersInternal(e,i){const o=new Headers;if(e&&e.headers){for(const[a,r]of Object.entries(e.headers))o.append(a,r);e.timeout&&e.timeout>0&&o.append(SN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,i),o}getFileName(e){var i;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(i=o.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),o}async uploadFile(e,i){var o;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const r=this.clientOptions.uploader,f=await r.stat(e);a.sizeBytes=String(f.size);const p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:f.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=p;const y={file:a},m=this.getFileName(e),v=ee("upload/v1beta/files",y._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,m,y,i==null?void 0:i.httpOptions);return r.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,o){var a;const r=this.clientOptions.uploader,f=await r.stat(i),p=String(f.size),y=(a=o==null?void 0:o.mimeType)!==null&&a!==void 0?a:f.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};o!=null&&F0(o,_);const T=await this.fetchUploadUrl(m,p,y,v,_,o==null?void 0:o.httpOptions);return r.uploadToFileSearchStore(i,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,o,a,r,f){var p;let y={};f?y=f:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${o}`},a?{"X-Goog-Upload-File-Name":a}:{})};const m=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:y});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(p=m==null?void 0:m.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Sv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(o);throw i>=400&&i<600?new Al({message:a,status:i}):new Error(a)}}function wN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))i=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(r,f){const p=Object.assign({},r);for(const y in f)if(Object.prototype.hasOwnProperty.call(f,y)){const m=f[y],v=p[y];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?p[y]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),p[y]=m)}return p}const a=o(i,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RN="mcp_used/unknown";let NN=!1;function $0(t){for(const e of t)if(MN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return NN}function J0(t){var e;const i=(e=t[Bf])!==null&&e!==void 0?e:"";t[Bf]=(i+` ${RN}`).trimStart()}function MN(t){return t!==null&&typeof t=="object"&&t instanceof yd}function IN(t){return _n(this,arguments,function*(i,o=100){let a,r=0;for(;r<o;){const f=yield ge(i.listTools({cursor:a}));for(const p of f.tools)yield yield ge(p),r++;if(!f.nextCursor)break;a=f.nextCursor}})}class yd{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new yd(e,i)}async initialize(){var e,i,o,a;if(this.mcpTools.length>0)return;const r={},f=[];for(const v of this.mcpClients)try{for(var p=!0,y=(i=void 0,Sn(IN(v))),m;m=await y.next(),e=m.done,!e;p=!0){a=m.value,p=!1;const _=a;f.push(_);const T=_.name;if(r[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);r[T]=v}}catch(_){i={error:_}}finally{try{!p&&!e&&(o=y.return)&&await o.call(y)}finally{if(i)throw i.error}}this.mcpTools=f,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),lx(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[o.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const f=await a.callTool({name:o.name,arguments:o.args},void 0,r);i.push({functionResponse:{name:o.name,response:f.isError?{error:f}:f}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function DN(t,e,i){const o=new WA;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data),Object.assign(o,a),e(o)}class UN{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),f=GN(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),y=`${a}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${p}`;let m=()=>{};const v=new Promise(I=>{m=I}),_=e.callbacks,T=function(){m({})},A=this.apiClient,x={onopen:T,onmessage:I=>{DN(A,_.onmessage,I)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(I){},onclose:(o=_==null?void 0:_.onclose)!==null&&o!==void 0?o:function(I){}},w=this.webSocketFactory.create(y,ON(f),x);w.connect(),await v;const G={setup:{model:Le(this.apiClient,e.model)}};return w.send(JSON.stringify(G)),new LN(w,this.apiClient)}}class LN{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=ow(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=sw(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Qs.PLAY)}pause(){this.sendPlaybackControl(Qs.PAUSE)}stop(){this.sendPlaybackControl(Qs.STOP)}resetContext(){this.sendPlaybackControl(Qs.RESET_CONTEXT)}close(){this.conn.close()}}function ON(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function GN(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function kN(t,e,i){const o=new ZA;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const r=JSON.parse(a);if(t.isVertexAI()){const f=rw(r);Object.assign(o,f)}else Object.assign(o,r);e(o)}class HN{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new UN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,a,r,f,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&$0(e.config.tools)&&J0(_);const T=zN(_);if(this.apiClient.isVertexAI()){const X=this.apiClient.getProject(),ie=this.apiClient.getLocation(),oe=this.apiClient.getApiKey(),Ce=!!X&&!!ie||!!oe;this.apiClient.getCustomBaseUrl()&&!Ce?v=y:(v=`${y}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v))}else{const X=this.apiClient.getApiKey();let ie="BidiGenerateContent",oe="key";X!=null&&X.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ie="BidiGenerateContentConstrained",oe="access_token"),v=`${y}/ws/google.ai.generativelanguage.${m}.GenerativeService.${ie}?${oe}=${X}`}let A=()=>{};const x=new Promise(X=>{A=X}),w=e.callbacks,b=function(){var X;(X=w==null?void 0:w.onopen)===null||X===void 0||X.call(w),A({})},H=this.apiClient,G={onopen:b,onmessage:X=>{kN(H,w.onmessage,X)},onerror:(i=w==null?void 0:w.onerror)!==null&&i!==void 0?i:function(X){},onclose:(o=w==null?void 0:w.onclose)!==null&&o!==void 0?o:function(X){}},I=this.webSocketFactory.create(v,VN(T),G);I.connect(),await x;let O=Le(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const X=this.apiClient.getProject(),ie=this.apiClient.getLocation();X&&ie&&(O=`projects/${X}/locations/${ie}/`+O)}let q={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sr.AUDIO]}:e.config.responseModalities=[Sr.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Q=(p=(f=e.config)===null||f===void 0?void 0:f.tools)!==null&&p!==void 0?p:[],$=[];for(const X of Q)if(this.isCallableTool(X)){const ie=X;$.push(await ie.tool())}else $.push(X);$.length>0&&(e.config.tools=$);const fe={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=iw(this.apiClient,fe):q=nw(this.apiClient,fe),delete q.config,I.send(JSON.stringify(q)),new BN(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const qN={turnComplete:!0};class BN{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=cn(i.turns),e.isVertexAI()||(o=o.map(a=>Or(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const r of o){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(PN)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},qN),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:aw(e)}:i={realtimeInput:lw(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function VN(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function zN(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tv=10;function Ev(t){var e,i,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const f of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(js(f)){a=!0;break}if(!a)return!0;const r=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function js(t){return"callTool"in t&&typeof t.callTool=="function"}function FN(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>js(a)))!==null&&o!==void 0?o:!1}function Cv(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,a)=>{if(js(o))return;const r=o;r.functionDeclarations&&r.functionDeclarations.length>0&&i.push(a)}),i}function Av(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $N=class extends jn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,a,r,f,p;const y=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!FN(i)||Ev(i.config))return await this.generateContentInternal(y);const m=Cv(i);if(m.length>0){const w=m.map(b=>`tools[${b}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let v,_;const T=cn(y.contents),A=(r=(a=(o=y.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:Tv;let x=0;for(;x<A&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const w=v.candidates[0].content,b=[];for(const H of(p=(f=i.config)===null||f===void 0?void 0:f.tools)!==null&&p!==void 0?p:[])if(js(H)){const I=await H.callTool(v.functionCalls);b.push(...I)}x++,_={role:"user",parts:b},y.contents=cn(y.contents),y.contents.push(w),y.contents.push(_),Av(y.config)&&(T.push(w),T.push(_))}return Av(y.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async i=>{var o,a,r,f,p;if(this.maybeMoveToResponseJsonSchem(i),Ev(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const y=Cv(i);if(y.length>0){const _=y.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(r=(a=(o=i==null?void 0:i.config)===null||o===void 0?void 0:o.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,v=(p=(f=i==null?void 0:i.config)===null||f===void 0?void 0:f.automaticFunctionCalling)===null||p===void 0?void 0:p.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var a;let r;const f=[];if(o!=null&&o.generatedImages)for(const y of o.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((a=y==null?void 0:y.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?r=y==null?void 0:y.safetyAttributes:f.push(y);let p;return r?p={generatedImages:f,positivePromptSafetyAttributes:r,sdkHttpResponse:o.sdkHttpResponse}:p={generatedImages:f,sdkHttpResponse:o.sdkHttpResponse},p}),this.list=async i=>{var o;const f={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((o=f.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new is(Wn.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(f),f)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>{var o,a,r,f,p,y;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=i.video)===null||o===void 0)&&o.uri&&(!((a=i.video)===null||a===void 0)&&a.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((f=(r=i.source)===null||r===void 0?void 0:r.video)===null||f===void 0)&&f.uri&&(!((y=(p=i.source)===null||p===void 0?void 0:p.video)===null||y===void 0)&&y.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,a;const r=(i=e.config)===null||i===void 0?void 0:i.tools;if(!r)return e;const f=await Promise.all(r.map(async y=>js(y)?await y.tool():y)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:f})};if(p.config.tools=f,e.config&&e.config.tools&&$0(e.config.tools)){const y=(a=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},y);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),J0(m),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return p}async initAfcToolsMap(e){var i,o,a;const r=new Map;for(const f of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(js(f)){const p=f,y=await p.tool();for(const m of(a=y.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(r.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);r.set(m.name,p)}}return r}async processAfcStream(e){var i,o,a;const r=(a=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:Tv;let f=!1,p=0;const y=await this.initAfcToolsMap(e);return(function(m,v,_){return _n(this,arguments,function*(){for(var T,A,x,w,b,H;p<r;){f&&(p++,f=!1);const q=yield ge(m.processParamsMaybeAddMcpUsage(_)),Q=yield ge(m.generateContentStreamInternal(q)),$=[],fe=[];try{for(var G=!0,I=(A=void 0,Sn(Q)),O;O=yield ge(I.next()),T=O.done,!T;G=!0){w=O.value,G=!1;const X=w;if(yield yield ge(X),X.candidates&&(!((b=X.candidates[0])===null||b===void 0)&&b.content)){fe.push(X.candidates[0].content);for(const ie of(H=X.candidates[0].content.parts)!==null&&H!==void 0?H:[])if(p<r&&ie.functionCall){if(!ie.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ie.functionCall.name)){const oe=yield ge(v.get(ie.functionCall.name).callTool([ie.functionCall]));$.push(...oe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ie.functionCall.name}`)}}}}catch(X){A={error:X}}finally{try{!G&&!T&&(x=I.return)&&(yield ge(x.call(I)))}finally{if(A)throw A.error}}if($.length>0){f=!0;const X=new ol;X.candidates=[{content:{role:"user",parts:$}}],yield yield ge(X);const ie=[];ie.push(...fe),ie.push({role:"user",parts:$});const oe=cn(_.contents).concat(ie);_.contents=oe}else break}})})(this,y,e)}async generateContentInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=yv(this.apiClient,e);return p=ee("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=_v(v),T=new ol;return Object.assign(T,_),T})}else{const m=gv(this.apiClient,e);return p=ee("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=vv(v),T=new ol;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=yv(this.apiClient,e);return p=ee("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),f.then(function(_){return _n(this,arguments,function*(){var T,A,x,w;try{for(var b=!0,H=Sn(_),G;G=yield ge(H.next()),T=G.done,!T;b=!0){w=G.value,b=!1;const I=w,O=_v(yield ge(I.json()),e);O.sdkHttpResponse={headers:I.headers};const q=new ol;Object.assign(q,O),yield yield ge(q)}}catch(I){A={error:I}}finally{try{!b&&!T&&(x=H.return)&&(yield ge(x.call(H)))}finally{if(A)throw A.error}}})})}else{const m=gv(this.apiClient,e);return p=ee("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),f.then(function(_){return _n(this,arguments,function*(){var T,A,x,w;try{for(var b=!0,H=Sn(_),G;G=yield ge(H.next()),T=G.done,!T;b=!0){w=G.value,b=!1;const I=w,O=vv(yield ge(I.json()),e);O.sdkHttpResponse={headers:I.headers};const q=new ol;Object.assign(q,O),yield yield ge(q)}}catch(I){A={error:I}}finally{try{!b&&!T&&(x=H.return)&&(yield ge(x.call(H)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Hw(this.apiClient,e);return p=ee("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Bw(v),T=new jy;return Object.assign(T,_),T})}else{const m=kw(this.apiClient,e);return p=ee("{model}:batchEmbedContents",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=qw(v),T=new jy;return Object.assign(T,_),T})}}async generateImagesInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Ww(this.apiClient,e);return p=ee("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=eR(v),T=new ev;return Object.assign(T,_),T})}else{const m=Zw(this.apiClient,e);return p=ee("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=jw(v),T=new ev;return Object.assign(T,_),T})}}async editImageInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=Lw(this.apiClient,e);return r=ee("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=Ow(y),v=new HA;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=WR(this.apiClient,e);return r=ee("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=jR(y),v=new qA;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=UR(this.apiClient,e);return r=ee("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=LR(y),v=new BA;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=qR(this.apiClient,e);return r=ee("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=BR(y),v=new VA;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=yR(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>qf(v))}else{const m=gR(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>Hf(v))}}async listInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=bR(this.apiClient,e);return p=ee("{models_url}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=RR(v),T=new tv;return Object.assign(T,_),T})}else{const m=xR(this.apiClient,e);return p=ee("{models_url}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=wR(v),T=new tv;return Object.assign(T,_),T})}}async update(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=QR(this.apiClient,e);return p=ee("{model}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>qf(v))}else{const m=XR(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>Hf(v))}}async delete(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Mw(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Dw(v),T=new nv;return Object.assign(T,_),T})}else{const m=Nw(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Iw(v),T=new nv;return Object.assign(T,_),T})}}async countTokens(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=bw(this.apiClient,e);return p=ee("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Rw(v),T=new iv;return Object.assign(T,_),T})}else{const m=xw(this.apiClient,e);return p=ee("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=ww(v),T=new iv;return Object.assign(T,_),T})}}async computeTokens(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=vw(this.apiClient,e);return r=ee("{model}:computeTokens",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=_w(y),v=new zA;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=lR(this.apiClient,e);return p=ee("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>{const _=sR(v),T=new Tr;return Object.assign(T,_),T})}else{const m=oR(this.apiClient,e);return p=ee("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>{const _=iR(v),T=new Tr;return Object.assign(T,_),T})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JN extends jn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:r}});return i._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:r}});return i._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=UA(e);return p=ee("{operationName}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f}else{const m=DA(e);return p=ee("{operationName}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f}}async fetchPredictVideosOperationInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=xA(e);return r=ee("{resourceName}:fetchPredictOperation",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YN(t){const e={},i=c(t,["data"]);if(i!=null&&d(e,["data"],i),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function KN(t){const e={},i=c(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>iM(r))),d(e,["parts"],a)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function XN(t,e,i){const o={},a=c(e,["expireTime"]);i!==void 0&&a!=null&&d(i,["expireTime"],a);const r=c(e,["newSessionExpireTime"]);i!==void 0&&r!=null&&d(i,["newSessionExpireTime"],r);const f=c(e,["uses"]);i!==void 0&&f!=null&&d(i,["uses"],f);const p=c(e,["liveConnectConstraints"]);i!==void 0&&p!=null&&d(i,["bidiGenerateContentSetup"],nM(t,p));const y=c(e,["lockAdditionalFields"]);return i!==void 0&&y!=null&&d(i,["fieldMask"],y),o}function QN(t,e){const i={},o=c(e,["config"]);return o!=null&&d(i,["config"],XN(t,o,i)),i}function ZN(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function WN(t){const e={},i=c(t,["id"]);i!=null&&d(e,["id"],i);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const a=c(t,["name"]);if(a!=null&&d(e,["name"],a),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jN(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function eM(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function tM(t,e){const i={},o=c(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const a=c(t,["responseModalities"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","responseModalities"],a);const r=c(t,["temperature"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","temperature"],r);const f=c(t,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const p=c(t,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const y=c(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=c(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const _=c(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],gd(_));const T=c(t,["thinkingConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","thinkingConfig"],T);const A=c(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],KN(Nt(x)));const w=c(t,["tools"]);if(e!==void 0&&w!=null){let Q=to(w);Array.isArray(Q)&&(Q=Q.map($=>oM(eo($)))),d(e,["setup","tools"],Q)}const b=c(t,["sessionResumption"]);e!==void 0&&b!=null&&d(e,["setup","sessionResumption"],sM(b));const H=c(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&d(e,["setup","inputAudioTranscription"],H);const G=c(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&d(e,["setup","outputAudioTranscription"],G);const I=c(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&d(e,["setup","realtimeInputConfig"],I);const O=c(t,["contextWindowCompression"]);e!==void 0&&O!=null&&d(e,["setup","contextWindowCompression"],O);const q=c(t,["proactivity"]);if(e!==void 0&&q!=null&&d(e,["setup","proactivity"],q),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function nM(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["setup","model"],Le(t,o));const a=c(e,["config"]);return a!=null&&d(i,["config"],tM(a,i)),i}function iM(t){const e={},i=c(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const a=c(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const r=c(t,["fileData"]);r!=null&&d(e,["fileData"],ZN(r));const f=c(t,["functionCall"]);f!=null&&d(e,["functionCall"],WN(f));const p=c(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],YN(y));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const v=c(t,["thought"]);v!=null&&d(e,["thought"],v);const _=c(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const T=c(t,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function sM(t){const e={},i=c(t,["handle"]);if(i!=null&&d(e,["handle"],i),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oM(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],jN(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],eM(p));const y=c(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lM(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const a=Object.keys(o).map(r=>`${i}.${r}`);e.push(...a)}else e.push(i)}return e.join(",")}function aM(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const r=o.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,i=r):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(i){const r=lM(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?t.fieldMask=r:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const f=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];a.length>0&&(p=a.map(m=>f.includes(m)?`generationConfig.${m}`:m));const y=[];r&&y.push(r),p.length>0&&y.push(...p),y.length>0?t.fieldMask=y.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class rM extends jn{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=QN(this.apiClient,e);r=ee("auth_tokens",p._url),f=p._query,delete p.config,delete p._url,delete p._query;const y=aM(p,e.config);return a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uM(t,e){const i={},o=c(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),i}function cM(t){const e={},i=c(t,["name"]);i!=null&&d(e,["_url","name"],i);const o=c(t,["config"]);return o!=null&&uM(o,e),e}function fM(t){const e={},i=c(t,["name"]);return i!=null&&d(e,["_url","name"],i),e}function dM(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function hM(t){const e={},i=c(t,["parent"]);i!=null&&d(e,["_url","parent"],i);const o=c(t,["config"]);return o!=null&&dM(o,e),e}function pM(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["documents"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["documents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mM extends jn{constructor(e){super(),this.apiClient=e,this.list=async i=>new is(Wn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:i.parent,config:o.config}),await this.listInternal(i),i)}async get(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=fM(e);return r=ee("{name}",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var i,o;let a="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cM(e);a=ee("{name}",f._url),r=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:r,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=hM(e);return r=ee("{parent}/documents",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=pM(y),v=new FA;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gM extends jn{constructor(e,i=new mM(e)){super(),this.apiClient=e,this.documents=i,this.list=async(o={})=>new is(Wn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=lN(e);return r=ee("fileSearchStores",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async get(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=uN(e);return r=ee("{name}",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var i,o;let a="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rN(e);a=ee("{name}",f._url),r=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:r,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=mN(e);return r=ee("fileSearchStores",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=gN(y),v=new $A;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=yN(e);return r=ee("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=vN(y),v=new JA;return Object.assign(v,m),v})}}async importFile(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=dN(e);return r=ee("{file_search_store_name}:importFile",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=fN(y),v=new fd;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Y0=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Y0=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^i()&15>>+o/4).toString(16))};const yM=()=>Y0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const zf=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fn extends Error{}let dn=class Ff extends fn{constructor(e,i,o,a){super(`${Ff.makeMessage(e,i,o)}`),this.status=e,this.headers=a,this.error=i}static makeMessage(e,i,o){const a=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):o;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,o,a){if(!e||!a)return new kr({message:o,cause:zf(i)});const r=i;return e===400?new X0(e,r,o,a):e===401?new Q0(e,r,o,a):e===403?new Z0(e,r,o,a):e===404?new W0(e,r,o,a):e===409?new j0(e,r,o,a):e===422?new e_(e,r,o,a):e===429?new t_(e,r,o,a):e>=500?new n_(e,r,o,a):new Ff(e,r,o,a)}},$f=class extends dn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},kr=class extends dn{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}},K0=class extends kr{constructor({message:e}={}){super({message:e??"Request timed out."})}},X0=class extends dn{},Q0=class extends dn{},Z0=class extends dn{},W0=class extends dn{},j0=class extends dn{},e_=class extends dn{},t_=class extends dn{},n_=class extends dn{};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vM=/^[a-z][a-z0-9+.-]*:/i,_M=t=>vM.test(t);let Jf=t=>(Jf=Array.isArray,Jf(t));const SM=Jf;let TM=SM;const xv=TM;function EM(t){if(!t)return!0;for(const e in t)return!1;return!0}function CM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const AM=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new fn(`${t} must be an integer`);if(e<0)throw new fn(`${t} must be a positive integer`);return e},xM=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bM=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $s="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const RM=()=>{var t,e,i,o,a;const r=wM();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$s,"X-Stainless-OS":wv(Deno.build.os),"X-Stainless-Arch":bv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$s,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$s,"X-Stainless-OS":wv((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":bv((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const f=NM();return f?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$s,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${f.browser}`,"X-Stainless-Runtime-Version":f.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":$s,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function NM(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const o=i.exec(navigator.userAgent);if(o){const a=o[1]||0,r=o[2]||0,f=o[3]||0;return{browser:e,version:`${a}.${r}.${f}`}}}return null}const bv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",wv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Za;const MM=()=>Za??(Za=RM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function i_(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function DM(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return i_({start(){},async pull(i){const{done:o,value:a}=await e.next();o?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function s_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function UM(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const o=t.getReader(),a=o.cancel();o.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o_=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Sf(t,e,i){return o_(),new File(t,e??"unknown_file",i)}function OM(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const GM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const l_=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",PM=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&l_(t),kM=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function HM(t,e,i){if(o_(),t=await t,PM(t))return t instanceof File?t:Sf([await t.arrayBuffer()],t.name);if(kM(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Sf(await Yf(a),e,i)}const o=await Yf(t);if(e||(e=OM(t)),!(i!=null&&i.type)){const a=o.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof a=="string"&&(i=Object.assign(Object.assign({},i),{type:a}))}return Sf(o,e,i)}async function Yf(t){var e,i,o,a,r;let f=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)f.push(t);else if(l_(t))f.push(t instanceof Blob?t:await t.arrayBuffer());else if(GM(t))try{for(var p=!0,y=Sn(t),m;m=await y.next(),e=m.done,!e;p=!0){a=m.value,p=!1;const v=a;f.push(...await Yf(v))}}catch(v){i={error:v}}finally{try{!p&&!e&&(o=y.return)&&await o.call(y)}finally{if(i)throw i.error}}else{const v=(r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${qM(t)}`)}return f}function qM(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let a_=class{constructor(e){this._client=e}};a_._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r_(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Rv=Object.freeze(Object.create(null)),BM=(t=r_)=>(function(i,...o){if(i.length===1)return i[0];let a=!1;const r=[],f=i.reduce((v,_,T)=>{var A,x,w;/[?#]/.test(_)&&(a=!0);const b=o[T];let H=(a?encodeURIComponent:t)(""+b);return T!==o.length&&(b==null||typeof b=="object"&&b.toString===((w=Object.getPrototypeOf((x=Object.getPrototypeOf((A=b.hasOwnProperty)!==null&&A!==void 0?A:Rv))!==null&&x!==void 0?x:Rv))===null||w===void 0?void 0:w.toString))&&(H=b+"",r.push({start:v.length+_.length,length:H.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),v+_+(T===o.length?"":H)},""),p=f.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(p))!==null;)r.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(r.sort((v,_)=>v.start-_.start),r.length>0){let v=0;const _=r.reduce((T,A)=>{const x=" ".repeat(A.start-v),w="^".repeat(A.length);return v=A.start+A.length,T+x+w},"");throw new fn(`Path parameters result in path with invalid segments:
${r.map(T=>T.error).join(`
`)}
${f}
${_}`)}return f}),Wa=BM(r_);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u_ extends a_{create(e,i){var o;const{api_version:a=this._client.apiVersion}=e,r=Cr(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new fn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new fn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Wa`/${a}/interactions`,Object.assign(Object.assign({body:r},i),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,i={},o){const{api_version:a=this._client.apiVersion}=i??{};return this._client.delete(Wa`/${a}/interactions/${e}`,o)}cancel(e,i={},o){const{api_version:a=this._client.apiVersion}=i??{};return this._client.post(Wa`/${a}/interactions/${e}/cancel`,o)}get(e,i={},o){var a;const r=i??{},{api_version:f=this._client.apiVersion}=r,p=Cr(r,["api_version"]);return this._client.get(Wa`/${f}/interactions/${e}`,Object.assign(Object.assign({query:p},o),{stream:(a=i==null?void 0:i.stream)!==null&&a!==void 0?a:!1}))}}u_._key=Object.freeze(["interactions"]);class c_ extends u_{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VM(t){let e=0;for(const a of t)e+=a.length;const i=new Uint8Array(e);let o=0;for(const a of t)i.set(a,o),o+=a.length;return i}let ja;function vd(t){let e;return(ja??(e=new globalThis.TextEncoder,ja=e.encode.bind(e)))(t)}let er;function Nv(t){let e;return(er??(e=new globalThis.TextDecoder,er=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Hr=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?vd(e):e;this.buffer=VM([this.buffer,i]);const o=[];let a;for(;(a=zM(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){o.push(Nv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,f=Nv(this.buffer.subarray(0,r));o.push(f),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}};Hr.NEWLINE_CHARS=new Set([`
`,"\r"]);Hr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function zM(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function FM(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ar={off:0,error:200,warn:300,info:400,debug:500},Mv=(t,e,i)=>{if(t){if(CM(Ar,t))return t;Dt(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ar))}`)}};function ul(){}function tr(t,e,i){return!e||Ar[t]>Ar[i]?ul:e[t].bind(e)}const $M={error:ul,warn:ul,info:ul,debug:ul};let Iv=new WeakMap;function Dt(t){var e;const i=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return $M;const a=Iv.get(i);if(a&&a[0]===o)return a[1];const r={error:tr("error",i,o),warn:tr("warn",i,o),info:tr("info",i,o),debug:tr("debug",i,o)};return Iv.set(i,[o,r]),r}const Zi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let JM=class cl{constructor(e,i,o){this.iterator=e,this.controller=i,this.client=o}static fromSSEResponse(e,i,o){let a=!1;const r=o?Dt(o):console;function f(){return _n(this,arguments,function*(){var y,m,v,_;if(a)throw new fn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var A=!0,x=Sn(YM(e,i)),w;w=yield ge(x.next()),y=w.done,!y;A=!0){_=w.value,A=!1;const b=_;if(!T)if(b.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield ge(JSON.parse(b.data))}catch(H){throw r.error("Could not parse message into JSON:",b.data),r.error("From chunk:",b.raw),H}}}catch(b){m={error:b}}finally{try{!A&&!y&&(v=x.return)&&(yield ge(v.call(x)))}finally{if(m)throw m.error}}T=!0}catch(b){if(Vf(b))return yield ge(void 0);throw b}finally{T||i.abort()}})}return new cl(f,i,o)}static fromReadableStream(e,i,o){let a=!1;function r(){return _n(this,arguments,function*(){var y,m,v,_;const T=new Hr,A=s_(e);try{for(var x=!0,w=Sn(A),b;b=yield ge(w.next()),y=b.done,!y;x=!0){_=b.value,x=!1;const H=_;for(const G of T.decode(H))yield yield ge(G)}}catch(H){m={error:H}}finally{try{!x&&!y&&(v=w.return)&&(yield ge(v.call(w)))}finally{if(m)throw m.error}}for(const H of T.flush())yield yield ge(H)})}function f(){return _n(this,arguments,function*(){var y,m,v,_;if(a)throw new fn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var A=!0,x=Sn(r()),w;w=yield ge(x.next()),y=w.done,!y;A=!0){_=w.value,A=!1;const b=_;T||b&&(yield yield ge(JSON.parse(b)))}}catch(b){m={error:b}}finally{try{!A&&!y&&(v=x.return)&&(yield ge(v.call(x)))}finally{if(m)throw m.error}}T=!0}catch(b){if(Vf(b))return yield ge(void 0);throw b}finally{T||i.abort()}})}return new cl(f,i,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],o=this.iterator(),a=r=>({next:()=>{if(r.length===0){const f=o.next();e.push(f),i.push(f)}return r.shift()}});return[new cl(()=>a(e),this.controller,this.client),new cl(()=>a(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return i_({async start(){i=e[Symbol.asyncIterator]()},async pull(o){try{const{value:a,done:r}=await i.next();if(r)return o.close();const f=vd(JSON.stringify(a)+`
`);o.enqueue(f)}catch(a){o.error(a)}},async cancel(){var o;await((o=i.return)===null||o===void 0?void 0:o.call(i))}})}};function YM(t,e){return _n(this,arguments,function*(){var o,a,r,f;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new fn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new fn("Attempted to iterate over a response with no body");const p=new XM,y=new Hr,m=s_(t.body);try{for(var v=!0,_=Sn(KM(m)),T;T=yield ge(_.next()),o=T.done,!o;v=!0){f=T.value,v=!1;const A=f;for(const x of y.decode(A)){const w=p.decode(x);w&&(yield yield ge(w))}}}catch(A){a={error:A}}finally{try{!v&&!o&&(r=_.return)&&(yield ge(r.call(_)))}finally{if(a)throw a.error}}for(const A of y.flush()){const x=p.decode(A);x&&(yield yield ge(x))}})}function KM(t){return _n(this,arguments,function*(){var i,o,a,r;let f=new Uint8Array;try{for(var p=!0,y=Sn(t),m;m=yield ge(y.next()),i=m.done,!i;p=!0){r=m.value,p=!1;const v=r;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?vd(v):v;let T=new Uint8Array(f.length+_.length);T.set(f),T.set(_,f.length),f=T;let A;for(;(A=FM(f))!==-1;)yield yield ge(f.slice(0,A)),f=f.slice(A)}}catch(v){o={error:v}}finally{try{!p&&!i&&(a=y.return)&&(yield ge(a.call(y)))}finally{if(o)throw o.error}}f.length>0&&(yield yield ge(f))})}let XM=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,o,a]=QM(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}};function QM(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ZM(t,e){const{response:i,requestLogID:o,retryOfRequestLogID:a,startTime:r}=e,f=await(async()=>{var p;if(e.options.stream)return Dt(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):JM.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const y=i.headers.get("content-type"),m=(p=y==null?void 0:y.split(";")[0])===null||p===void 0?void 0:p.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?i.headers.get("content-length")==="0"?void 0:await i.json():await i.text()})();return Dt(t).debug(`[${o}] response parsed`,Zi({retryOfRequestLogID:a,url:i.url,status:i.status,body:f,durationMs:Date.now()-r})),f}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let WM=class f_ extends Promise{constructor(e,i,o=ZM){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new f_(this.client,this.responsePromise,async(i,o)=>e(await this.parseResponse(i,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d_=Symbol("brand.privateNullableHeaders");function*jM(t){if(!t)return;if(d_ in t){const{values:o,nulls:a}=t;yield*o.entries();for(const r of a)yield[r,null];return}let e=!1,i;t instanceof Headers?i=t.entries():xv(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let o of i){const a=o[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const r=xv(o[1])?o[1]:[o[1]];let f=!1;for(const p of r)p!==void 0&&(e&&!f&&(f=!0,yield[a,null]),yield[a,p])}}const ll=t=>{const e=new Headers,i=new Set;for(const o of t){const a=new Set;for(const[r,f]of jM(o)){const p=r.toLowerCase();a.has(p)||(e.delete(r),a.add(p)),f===null?(e.delete(r),i.add(p)):(e.append(r,f),i.delete(p))}}return{[d_]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tf=t=>{var e,i,o,a,r,f;if(typeof globalThis.process<"u")return(o=(i=(e=_A)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(f=(r=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||r===void 0?void 0:r.call(a,t))===null||f===void 0?void 0:f.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var h_;class qr{constructor(e){var i,o,a,r,f,p,y,{baseURL:m=Tf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=Tf("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:_="v1beta"}=e,T=Cr(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:v,apiVersion:_},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(o=A.timeout)!==null&&o!==void 0?o:qr.DEFAULT_TIMEOUT,this.logger=(a=A.logger)!==null&&a!==void 0?a:console;const x="warn";this.logLevel=x,this.logLevel=(f=(r=Mv(A.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:Mv(Tf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&f!==void 0?f:x,this.fetchOptions=A.fetchOptions,this.maxRetries=(p=A.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(y=A.fetch)!==null&&y!==void 0?y:IM(),this.encoder=LM,this._options=A,this.apiKey=v,this.apiVersion=_,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=ll([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return ll([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ll([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,o])=>typeof o<"u").map(([i,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(i)}=`;throw new fn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${$s}`}defaultIdempotencyKey(){return`stainless-node-retry-${yM()}`}makeStatusError(e,i,o,a){return dn.generate(e,i,o,a)}buildURL(e,i,o){const a=!this.baseURLOverridden()&&o||this.baseURL,r=_M(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),f=this.defaultQuery();return EM(f)||(i=Object.assign(Object.assign({},f),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(r.search=this.stringifyQuery(i)),r.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:o}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,o){return this.request(Promise.resolve(o).then(a=>Object.assign({method:e,path:i},a)))}request(e,i=null){return new WM(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,o){var a,r,f;const p=await e,y=(a=p.maxRetries)!==null&&a!==void 0?a:this.maxRetries;i==null&&(i=y),await this.prepareOptions(p);const{req:m,url:v,timeout:_}=await this.buildRequest(p,{retryCount:y-i});await this.prepareRequest(m,{url:v,options:p});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=o===void 0?"":`, retryOf: ${o}`,x=Date.now();if(Dt(this).debug(`[${T}] sending request`,Zi({retryOfRequestLogID:o,method:p.method,url:v,options:p,headers:m.headers})),!((r=p.signal)===null||r===void 0)&&r.aborted)throw new $f;const w=new AbortController,b=await this.fetchWithTimeout(v,m,_,w).catch(zf),H=Date.now();if(b instanceof globalThis.Error){const I=`retrying, ${i} attempts remaining`;if(!((f=p.signal)===null||f===void 0)&&f.aborted)throw new $f;const O=Vf(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(i)return Dt(this).info(`[${T}] connection ${O?"timed out":"failed"} - ${I}`),Dt(this).debug(`[${T}] connection ${O?"timed out":"failed"} (${I})`,Zi({retryOfRequestLogID:o,url:v,durationMs:H-x,message:b.message})),this.retryRequest(p,i,o??T);throw Dt(this).info(`[${T}] connection ${O?"timed out":"failed"} - error; no more retries left`),Dt(this).debug(`[${T}] connection ${O?"timed out":"failed"} (error; no more retries left)`,Zi({retryOfRequestLogID:o,url:v,durationMs:H-x,message:b.message})),O?new K0:new kr({cause:b})}const G=`[${T}${A}] ${m.method} ${v} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${H-x}ms`;if(!b.ok){const I=await this.shouldRetry(b);if(i&&I){const X=`retrying, ${i} attempts remaining`;return await UM(b.body),Dt(this).info(`${G} - ${X}`),Dt(this).debug(`[${T}] response error (${X})`,Zi({retryOfRequestLogID:o,url:b.url,status:b.status,headers:b.headers,durationMs:H-x})),this.retryRequest(p,i,o??T,b.headers)}const O=I?"error; no more retries left":"error; not retryable";Dt(this).info(`${G} - ${O}`);const q=await b.text().catch(X=>zf(X).message),Q=xM(q),$=Q?void 0:q;throw Dt(this).debug(`[${T}] response error (${O})`,Zi({retryOfRequestLogID:o,url:b.url,status:b.status,headers:b.headers,message:$,durationMs:Date.now()-x})),this.makeStatusError(b.status,Q,$,b.headers)}return Dt(this).info(G),Dt(this).debug(`[${T}] response start`,Zi({retryOfRequestLogID:o,url:b.url,status:b.status,headers:b.headers,durationMs:H-x})),{response:b,options:p,controller:w,requestLogID:T,retryOfRequestLogID:o,startTime:x}}async fetchWithTimeout(e,i,o,a){const r=i||{},{signal:f,method:p}=r,y=Cr(r,["signal","method"]),m=a.abort.bind(a);f&&f.addEventListener("abort",m,{once:!0});const v=setTimeout(m,o),_=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,T=Object.assign(Object.assign(Object.assign({signal:a.signal},_?{duplex:"half"}:{}),{method:"GET"}),y);p&&(T.method=p.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(v)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,o,a){var r;let f;const p=a==null?void 0:a.get("retry-after-ms");if(p){const m=parseFloat(p);Number.isNaN(m)||(f=m)}const y=a==null?void 0:a.get("retry-after");if(y&&!f){const m=parseFloat(y);Number.isNaN(m)?f=Date.parse(y)-Date.now():f=m*1e3}if(!(f&&0<=f&&f<60*1e3)){const m=(r=e.maxRetries)!==null&&r!==void 0?r:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(i,m)}return await bM(f),this.makeRequest(e,i-1,o)}calculateDefaultRetryTimeoutMillis(e,i){const r=i-e,f=Math.min(.5*Math.pow(2,r),8),p=1-Math.random()*.25;return f*p*1e3}async buildRequest(e,{retryCount:i=0}={}){var o,a,r;const f=Object.assign({},e),{method:p,path:y,query:m,defaultBaseURL:v}=f,_=this.buildURL(y,m,v);"timeout"in f&&AM("timeout",f.timeout),f.timeout=(o=f.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:f}),x=await this.buildHeaders({options:e,method:p,bodyHeaders:T,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:x},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(r=f.fetchOptions)!==null&&r!==void 0?r:{}),url:_,timeout:f.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:o,retryCount:a}){let r={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const f=await this.authHeaders(e);let p=ll([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),MM()),this._options.defaultHeaders,o,e.headers,f]);return this.validateHeaders(p),p.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=ll([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:DM(e)}:this.encoder({body:e,headers:o})}}qr.DEFAULT_TIMEOUT=6e4;class gt extends qr{constructor(){super(...arguments),this.interactions=new c_(this)}}h_=gt;gt.GeminiNextGenAPIClient=h_;gt.GeminiNextGenAPIClientError=fn;gt.APIError=dn;gt.APIConnectionError=kr;gt.APIConnectionTimeoutError=K0;gt.APIUserAbortError=$f;gt.NotFoundError=W0;gt.ConflictError=j0;gt.RateLimitError=t_;gt.BadRequestError=X0;gt.AuthenticationError=Q0;gt.InternalServerError=n_;gt.PermissionDeniedError=Z0;gt.UnprocessableEntityError=e_;gt.toFile=HM;gt.Interactions=c_;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eI(t,e){const i={},o=c(t,["name"]);return o!=null&&d(i,["_url","name"],o),i}function tI(t,e){const i={},o=c(t,["name"]);return o!=null&&d(i,["_url","name"],o),i}function nI(t,e){const i={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(i,["sdkHttpResponse"],o),i}function iI(t,e){const i={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(i,["sdkHttpResponse"],o),i}function sI(t,e,i){const o={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=c(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&d(e,["displayName"],a),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=c(t,["epochCount"]);e!==void 0&&r!=null&&d(e,["tuningTask","hyperparameters","epochCount"],r);const f=c(t,["learningRateMultiplier"]);if(f!=null&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],f),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(c(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(c(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const p=c(t,["batchSize"]);e!==void 0&&p!=null&&d(e,["tuningTask","hyperparameters","batchSize"],p);const y=c(t,["learningRate"]);if(e!==void 0&&y!=null&&d(e,["tuningTask","hyperparameters","learningRate"],y),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(c(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(c(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(c(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(c(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function oI(t,e,i){const o={};let a=c(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const q=c(t,["validationDataset"]);e!==void 0&&q!=null&&d(e,["supervisedTuningSpec"],Ef(q))}else if(a==="PREFERENCE_TUNING"){const q=c(t,["validationDataset"]);e!==void 0&&q!=null&&d(e,["preferenceOptimizationSpec"],Ef(q))}else if(a==="DISTILLATION"){const q=c(t,["validationDataset"]);e!==void 0&&q!=null&&d(e,["distillationSpec"],Ef(q))}const r=c(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&d(e,["tunedModelDisplayName"],r);const f=c(t,["description"]);e!==void 0&&f!=null&&d(e,["description"],f);let p=c(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const q=c(t,["epochCount"]);e!==void 0&&q!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],q)}else if(p==="PREFERENCE_TUNING"){const q=c(t,["epochCount"]);e!==void 0&&q!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],q)}else if(p==="DISTILLATION"){const q=c(t,["epochCount"]);e!==void 0&&q!=null&&d(e,["distillationSpec","hyperParameters","epochCount"],q)}let y=c(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const q=c(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],q)}else if(y==="PREFERENCE_TUNING"){const q=c(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],q)}else if(y==="DISTILLATION"){const q=c(t,["learningRateMultiplier"]);e!==void 0&&q!=null&&d(e,["distillationSpec","hyperParameters","learningRateMultiplier"],q)}let m=c(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const q=c(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],q)}else if(m==="PREFERENCE_TUNING"){const q=c(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],q)}else if(m==="DISTILLATION"){const q=c(t,["exportLastCheckpointOnly"]);e!==void 0&&q!=null&&d(e,["distillationSpec","exportLastCheckpointOnly"],q)}let v=c(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const q=c(t,["adapterSize"]);e!==void 0&&q!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],q)}else if(v==="PREFERENCE_TUNING"){const q=c(t,["adapterSize"]);e!==void 0&&q!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],q)}else if(v==="DISTILLATION"){const q=c(t,["adapterSize"]);e!==void 0&&q!=null&&d(e,["distillationSpec","hyperParameters","adapterSize"],q)}let _=c(i,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const q=c(t,["tuningMode"]);e!==void 0&&q!=null&&d(e,["supervisedTuningSpec","tuningMode"],q)}const T=c(t,["customBaseModel"]);e!==void 0&&T!=null&&d(e,["customBaseModel"],T);let A=c(i,["config","method"]);if(A===void 0&&(A="SUPERVISED_FINE_TUNING"),A==="SUPERVISED_FINE_TUNING"){const q=c(t,["batchSize"]);e!==void 0&&q!=null&&d(e,["supervisedTuningSpec","hyperParameters","batchSize"],q)}let x=c(i,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const q=c(t,["learningRate"]);e!==void 0&&q!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRate"],q)}const w=c(t,["labels"]);e!==void 0&&w!=null&&d(e,["labels"],w);const b=c(t,["beta"]);e!==void 0&&b!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],b);const H=c(t,["baseTeacherModel"]);e!==void 0&&H!=null&&d(e,["distillationSpec","baseTeacherModel"],H);const G=c(t,["tunedTeacherModelSource"]);e!==void 0&&G!=null&&d(e,["distillationSpec","tunedTeacherModelSource"],G);const I=c(t,["sftLossWeightMultiplier"]);e!==void 0&&I!=null&&d(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],I);const O=c(t,["outputUri"]);return e!==void 0&&O!=null&&d(e,["outputUri"],O),o}function lI(t,e){const i={},o=c(t,["baseModel"]);o!=null&&d(i,["baseModel"],o);const a=c(t,["preTunedModel"]);a!=null&&d(i,["preTunedModel"],a);const r=c(t,["trainingDataset"]);r!=null&&yI(r);const f=c(t,["config"]);return f!=null&&sI(f,i),i}function aI(t,e){const i={},o=c(t,["baseModel"]);o!=null&&d(i,["baseModel"],o);const a=c(t,["preTunedModel"]);a!=null&&d(i,["preTunedModel"],a);const r=c(t,["trainingDataset"]);r!=null&&vI(r,i,e);const f=c(t,["config"]);return f!=null&&oI(f,i,e),i}function rI(t,e){const i={},o=c(t,["name"]);return o!=null&&d(i,["_url","name"],o),i}function uI(t,e){const i={},o=c(t,["name"]);return o!=null&&d(i,["_url","name"],o),i}function cI(t,e,i){const o={},a=c(t,["pageSize"]);e!==void 0&&a!=null&&d(e,["_query","pageSize"],a);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const f=c(t,["filter"]);return e!==void 0&&f!=null&&d(e,["_query","filter"],f),o}function fI(t,e,i){const o={},a=c(t,["pageSize"]);e!==void 0&&a!=null&&d(e,["_query","pageSize"],a);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const f=c(t,["filter"]);return e!==void 0&&f!=null&&d(e,["_query","filter"],f),o}function dI(t,e){const i={},o=c(t,["config"]);return o!=null&&cI(o,i),i}function hI(t,e){const i={},o=c(t,["config"]);return o!=null&&fI(o,i),i}function pI(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const r=c(t,["tunedModels"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>p_(p))),d(i,["tuningJobs"],f)}return i}function mI(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const r=c(t,["tuningJobs"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>Kf(p))),d(i,["tuningJobs"],f)}return i}function gI(t,e){const i={},o=c(t,["name"]);o!=null&&d(i,["model"],o);const a=c(t,["name"]);return a!=null&&d(i,["endpoint"],a),i}function yI(t,e){const i={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=c(t,["examples"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(i,["examples","examples"],a)}return i}function vI(t,e,i){const o={};let a=c(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const f=c(t,["gcsUri"]);e!==void 0&&f!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(a==="PREFERENCE_TUNING"){const f=c(t,["gcsUri"]);e!==void 0&&f!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}else if(a==="DISTILLATION"){const f=c(t,["gcsUri"]);e!==void 0&&f!=null&&d(e,["distillationSpec","promptDatasetUri"],f)}let r=c(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const f=c(t,["vertexDatasetResource"]);e!==void 0&&f!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(r==="PREFERENCE_TUNING"){const f=c(t,["vertexDatasetResource"]);e!==void 0&&f!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}else if(r==="DISTILLATION"){const f=c(t,["vertexDatasetResource"]);e!==void 0&&f!=null&&d(e,["distillationSpec","promptDatasetUri"],f)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function p_(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["name"]);a!=null&&d(i,["name"],a);const r=c(t,["state"]);r!=null&&d(i,["state"],N0(r));const f=c(t,["createTime"]);f!=null&&d(i,["createTime"],f);const p=c(t,["tuningTask","startTime"]);p!=null&&d(i,["startTime"],p);const y=c(t,["tuningTask","completeTime"]);y!=null&&d(i,["endTime"],y);const m=c(t,["updateTime"]);m!=null&&d(i,["updateTime"],m);const v=c(t,["description"]);v!=null&&d(i,["description"],v);const _=c(t,["baseModel"]);_!=null&&d(i,["baseModel"],_);const T=c(t,["_self"]);return T!=null&&d(i,["tunedModel"],gI(T)),i}function Kf(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["name"]);a!=null&&d(i,["name"],a);const r=c(t,["state"]);r!=null&&d(i,["state"],N0(r));const f=c(t,["createTime"]);f!=null&&d(i,["createTime"],f);const p=c(t,["startTime"]);p!=null&&d(i,["startTime"],p);const y=c(t,["endTime"]);y!=null&&d(i,["endTime"],y);const m=c(t,["updateTime"]);m!=null&&d(i,["updateTime"],m);const v=c(t,["error"]);v!=null&&d(i,["error"],v);const _=c(t,["description"]);_!=null&&d(i,["description"],_);const T=c(t,["baseModel"]);T!=null&&d(i,["baseModel"],T);const A=c(t,["tunedModel"]);A!=null&&d(i,["tunedModel"],A);const x=c(t,["preTunedModel"]);x!=null&&d(i,["preTunedModel"],x);const w=c(t,["supervisedTuningSpec"]);w!=null&&d(i,["supervisedTuningSpec"],w);const b=c(t,["preferenceOptimizationSpec"]);b!=null&&d(i,["preferenceOptimizationSpec"],b);const H=c(t,["distillationSpec"]);H!=null&&d(i,["distillationSpec"],H);const G=c(t,["tuningDataStats"]);G!=null&&d(i,["tuningDataStats"],G);const I=c(t,["encryptionSpec"]);I!=null&&d(i,["encryptionSpec"],I);const O=c(t,["partnerModelTuningSpec"]);O!=null&&d(i,["partnerModelTuningSpec"],O);const q=c(t,["customBaseModel"]);q!=null&&d(i,["customBaseModel"],q);const Q=c(t,["experiment"]);Q!=null&&d(i,["experiment"],Q);const $=c(t,["labels"]);$!=null&&d(i,["labels"],$);const fe=c(t,["outputUri"]);fe!=null&&d(i,["outputUri"],fe);const X=c(t,["pipelineJob"]);X!=null&&d(i,["pipelineJob"],X);const ie=c(t,["serviceAccount"]);ie!=null&&d(i,["serviceAccount"],ie);const oe=c(t,["tunedModelDisplayName"]);oe!=null&&d(i,["tunedModelDisplayName"],oe);const Ce=c(t,["veoTuningSpec"]);return Ce!=null&&d(i,["veoTuningSpec"],Ce),i}function _I(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["name"]);a!=null&&d(i,["name"],a);const r=c(t,["metadata"]);r!=null&&d(i,["metadata"],r);const f=c(t,["done"]);f!=null&&d(i,["done"],f);const p=c(t,["error"]);return p!=null&&d(i,["error"],p),i}function Ef(t,e){const i={},o=c(t,["gcsUri"]);o!=null&&d(i,["validationDatasetUri"],o);const a=c(t,["vertexDatasetResource"]);return a!=null&&d(i,["validationDatasetUri"],a),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SI extends jn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new is(Wn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var o;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const a={tunedModelName:i.baseModel};!((o=i.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(a.checkpointId=i.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},i),{preTunedModel:a});return r.baseModel=void 0,await this.tuneInternal(r)}else{const a=Object.assign({},i);return await this.tuneInternal(a)}else{const a=Object.assign({},i),r=await this.tuneMldevInternal(a);let f="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?f=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(f=r.name.split("/operations/")[0]),{name:f,state:Lf.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=uI(e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>Kf(v))}else{const m=rI(e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>p_(v))}}async listInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=hI(e);return p=ee("tuningJobs",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=mI(v),T=new sv;return Object.assign(T,_),T})}else{const m=dI(e);return p=ee("tunedModels",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=pI(v),T=new sv;return Object.assign(T,_),T})}}async cancel(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=tI(e);return p=ee("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=iI(v),T=new ov;return Object.assign(T,_),T})}else{const m=eI(e);return p=ee("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=nI(v),T=new ov;return Object.assign(T,_),T})}}async tuneInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=aI(e,e);return r=ee("tuningJobs",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>Kf(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=lI(e);return r=ee("tunedModels",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>_I(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TI{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const EI=1024*1024*8,CI=3,AI=1e3,xI=2,xr="x-goog-upload-status";async function bI(t,e,i){var o;const a=await m_(t,e,i),r=await(a==null?void 0:a.json());if(((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[xr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function wI(t,e,i){var o;const a=await m_(t,e,i),r=await(a==null?void 0:a.json());if(((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[xr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const f=C0(r),p=new dd;return Object.assign(p,f),p}async function m_(t,e,i){var o,a;let r=0,f=0,p=new Gf(new Response),y="upload";for(r=t.size;f<r;){const m=Math.min(EI,r-f),v=t.slice(f,f+m);f+m>=r&&(y+=", finalize");let _=0,T=AI;for(;_<CI&&(p=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(f),"Content-Length":String(m)}}}),!(!((o=p==null?void 0:p.headers)===null||o===void 0)&&o[xr]));)_++,await NI(T),T=T*xI;if(f+=m,((a=p==null?void 0:p.headers)===null||a===void 0?void 0:a[xr])!=="active")break;if(r<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function RI(t){return{size:t.size,type:t.type}}function NI(t){return new Promise(e=>setTimeout(e,t))}class MI{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bI(e,i,o)}async uploadToFileSearchStore(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wI(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RI(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class II{create(e,i,o){return new DI(e,i,o)}}class DI{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dv="x-goog-api-key";class UI{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(Dv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Dv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LI="gl-node/";class OI{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new gt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=CA(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new UI(this.apiKey);this.apiClient=new bN({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:LI+"web",uploader:new MI,downloader:new TI}),this.models=new $N(this.apiClient),this.live=new HN(this.apiClient,a,new II),this.batches=new jx(this.apiClient),this.chats=new Lb(this.models,this.apiClient),this.caches=new Ib(this.apiClient),this.files=new Jb(this.apiClient),this.operations=new JN(this.apiClient),this.authTokens=new rM(this.apiClient),this.tunings=new SI(this.apiClient),this.fileSearchStores=new gM(this.apiClient)}}function he(t,e,i,o,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,i),i}function P(t,e,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(t):o?o.value:e.get(t)}let g_=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return g_=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^i()&15>>+o/4).toString(16))};function Xf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Qf=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class ce extends Error{}class xt extends ce{constructor(e,i,o,a){super(`${xt.makeMessage(e,i,o)}`),this.status=e,this.headers=a,this.requestID=a==null?void 0:a.get("x-request-id"),this.error=i;const r=i;this.code=r==null?void 0:r.code,this.param=r==null?void 0:r.param,this.type=r==null?void 0:r.type}static makeMessage(e,i,o){const a=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):o;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,o,a){if(!e||!a)return new Br({message:o,cause:Qf(i)});const r=i==null?void 0:i.error;return e===400?new y_(e,r,o,a):e===401?new v_(e,r,o,a):e===403?new __(e,r,o,a):e===404?new S_(e,r,o,a):e===409?new T_(e,r,o,a):e===422?new E_(e,r,o,a):e===429?new C_(e,r,o,a):e>=500?new A_(e,r,o,a):new xt(e,r,o,a)}}class un extends xt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Br extends xt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class _d extends Br{constructor({message:e}={}){super({message:e??"Request timed out."})}}class y_ extends xt{}class v_ extends xt{}class __ extends xt{}class S_ extends xt{}class T_ extends xt{}class E_ extends xt{}class C_ extends xt{}class A_ extends xt{}class x_ extends ce{constructor(){super("Could not parse response content as the length limit was reached")}}class b_ extends ce{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class fl extends Error{constructor(e){super(e)}}const GI=/^[a-z][a-z0-9+.-]*:/i,PI=t=>GI.test(t);let Bt=t=>(Bt=Array.isArray,Bt(t)),Uv=Bt;function w_(t){return typeof t!="object"?{}:t??{}}function kI(t){if(!t)return!0;for(const e in t)return!1;return!0}function HI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Cf(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const qI=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ce(`${t} must be an integer`);if(e<0)throw new ce(`${t} must be a positive integer`);return e},BI=t=>{try{return JSON.parse(t)}catch{return}},bl=t=>new Promise(e=>setTimeout(e,t)),Js="6.17.0",VI=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function zI(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const FI=()=>{var i;const t=zI();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":Ov(Deno.build.os),"X-Stainless-Arch":Lv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((i=Deno.version)==null?void 0:i.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":Ov(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Lv(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=$I();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Js,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function $I(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const o=i.exec(navigator.userAgent);if(o){const a=o[1]||0,r=o[2]||0,f=o[3]||0;return{browser:e,version:`${a}.${r}.${f}`}}}return null}const Lv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Ov=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Gv;const JI=()=>Gv??(Gv=FI());function YI(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function R_(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function N_(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return R_({start(){},async pull(i){const{done:o,value:a}=await e.next();o?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)==null?void 0:i.call(e))}})}function M_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function KI(t){var o,a;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((a=(o=t[Symbol.asyncIterator]()).return)==null?void 0:a.call(o));return}const e=t.getReader(),i=e.cancel();e.releaseLock(),await i}const XI=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),I_="RFC3986",D_=t=>String(t),Pv={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:D_},QI="RFC1738";let Zf=(t,e)=>(Zf=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Zf(t,e));const Rn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Af=1024,ZI=(t,e,i,o,a)=>{if(t.length===0)return t;let r=t;if(typeof t=="symbol"?r=Symbol.prototype.toString.call(t):typeof t!="string"&&(r=String(t)),i==="iso-8859-1")return escape(r).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});let f="";for(let p=0;p<r.length;p+=Af){const y=r.length>=Af?r.slice(p,p+Af):r,m=[];for(let v=0;v<y.length;++v){let _=y.charCodeAt(v);if(_===45||_===46||_===95||_===126||_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||a===QI&&(_===40||_===41)){m[m.length]=y.charAt(v);continue}if(_<128){m[m.length]=Rn[_];continue}if(_<2048){m[m.length]=Rn[192|_>>6]+Rn[128|_&63];continue}if(_<55296||_>=57344){m[m.length]=Rn[224|_>>12]+Rn[128|_>>6&63]+Rn[128|_&63];continue}v+=1,_=65536+((_&1023)<<10|y.charCodeAt(v)&1023),m[m.length]=Rn[240|_>>18]+Rn[128|_>>12&63]+Rn[128|_>>6&63]+Rn[128|_&63]}f+=m.join("")}return f};function WI(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function kv(t,e){if(Bt(t)){const i=[];for(let o=0;o<t.length;o+=1)i.push(e(t[o]));return i}return e(t)}const U_={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},L_=function(t,e){Array.prototype.push.apply(t,Bt(e)?e:[e])};let Hv;const dt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:ZI,encodeValuesOnly:!1,format:I_,formatter:D_,indices:!1,serializeDate(t){return(Hv??(Hv=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function jI(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const xf={};function O_(t,e,i,o,a,r,f,p,y,m,v,_,T,A,x,w,b,H){let G=t,I=H,O=0,q=!1;for(;(I=I.get(xf))!==void 0&&!q;){const ie=I.get(t);if(O+=1,typeof ie<"u"){if(ie===O)throw new RangeError("Cyclic object value");q=!0}typeof I.get(xf)>"u"&&(O=0)}if(typeof m=="function"?G=m(e,G):G instanceof Date?G=T==null?void 0:T(G):i==="comma"&&Bt(G)&&(G=kv(G,function(ie){return ie instanceof Date?T==null?void 0:T(ie):ie})),G===null){if(r)return y&&!w?y(e,dt.encoder,b,"key",A):e;G=""}if(jI(G)||WI(G)){if(y){const ie=w?e:y(e,dt.encoder,b,"key",A);return[(x==null?void 0:x(ie))+"="+(x==null?void 0:x(y(G,dt.encoder,b,"value",A)))]}return[(x==null?void 0:x(e))+"="+(x==null?void 0:x(String(G)))]}const Q=[];if(typeof G>"u")return Q;let $;if(i==="comma"&&Bt(G))w&&y&&(G=kv(G,y)),$=[{value:G.length>0?G.join(",")||null:void 0}];else if(Bt(m))$=m;else{const ie=Object.keys(G);$=v?ie.sort(v):ie}const fe=p?String(e).replace(/\./g,"%2E"):String(e),X=o&&Bt(G)&&G.length===1?fe+"[]":fe;if(a&&Bt(G)&&G.length===0)return X+"[]";for(let ie=0;ie<$.length;++ie){const oe=$[ie],Ce=typeof oe=="object"&&typeof oe.value<"u"?oe.value:G[oe];if(f&&Ce===null)continue;const Pe=_&&p?oe.replace(/\./g,"%2E"):oe,Ge=Bt(G)?typeof i=="function"?i(X,Pe):X:X+(_?"."+Pe:"["+Pe+"]");H.set(t,O);const Ke=new WeakMap;Ke.set(xf,H),L_(Q,O_(Ce,Ge,i,o,a,r,f,p,i==="comma"&&w&&Bt(G)?null:y,m,v,_,T,A,x,w,b,Ke))}return Q}function e1(t=dt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||dt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let i=I_;if(typeof t.format<"u"){if(!Zf(Pv,t.format))throw new TypeError("Unknown format option provided.");i=t.format}const o=Pv[i];let a=dt.filter;(typeof t.filter=="function"||Bt(t.filter))&&(a=t.filter);let r;if(t.arrayFormat&&t.arrayFormat in U_?r=t.arrayFormat:"indices"in t?r=t.indices?"indices":"repeat":r=dt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const f=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:dt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:dt.addQueryPrefix,allowDots:f,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:dt.allowEmptyArrays,arrayFormat:r,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:dt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?dt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:dt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:dt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:dt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:dt.encodeValuesOnly,filter:a,format:i,formatter:o,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:dt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:dt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:dt.strictNullHandling}}function t1(t,e={}){let i=t;const o=e1(e);let a,r;typeof o.filter=="function"?(r=o.filter,i=r("",i)):Bt(o.filter)&&(r=o.filter,a=r);const f=[];if(typeof i!="object"||i===null)return"";const p=U_[o.arrayFormat],y=p==="comma"&&o.commaRoundTrip;a||(a=Object.keys(i)),o.sort&&a.sort(o.sort);const m=new WeakMap;for(let T=0;T<a.length;++T){const A=a[T];o.skipNulls&&i[A]===null||L_(f,O_(i[A],A,p,y,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,m))}const v=f.join(o.delimiter);let _=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(o.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),v.length>0?_+v:""}function n1(t){let e=0;for(const a of t)e+=a.length;const i=new Uint8Array(e);let o=0;for(const a of t)i.set(a,o),o+=a.length;return i}let qv;function Sd(t){let e;return(qv??(e=new globalThis.TextEncoder,qv=e.encode.bind(e)))(t)}let Bv;function Vv(t){let e;return(Bv??(e=new globalThis.TextDecoder,Bv=e.decode.bind(e)))(t)}var Xt,Qt;class Vr{constructor(){Xt.set(this,void 0),Qt.set(this,void 0),he(this,Xt,new Uint8Array),he(this,Qt,null)}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Sd(e):e;he(this,Xt,n1([P(this,Xt,"f"),i]));const o=[];let a;for(;(a=i1(P(this,Xt,"f"),P(this,Qt,"f")))!=null;){if(a.carriage&&P(this,Qt,"f")==null){he(this,Qt,a.index);continue}if(P(this,Qt,"f")!=null&&(a.index!==P(this,Qt,"f")+1||a.carriage)){o.push(Vv(P(this,Xt,"f").subarray(0,P(this,Qt,"f")-1))),he(this,Xt,P(this,Xt,"f").subarray(P(this,Qt,"f"))),he(this,Qt,null);continue}const r=P(this,Qt,"f")!==null?a.preceding-1:a.preceding,f=Vv(P(this,Xt,"f").subarray(0,r));o.push(f),he(this,Xt,P(this,Xt,"f").subarray(a.index)),he(this,Qt,null)}return o}flush(){return P(this,Xt,"f").length?this.decode(`
`):[]}}Xt=new WeakMap,Qt=new WeakMap;Vr.NEWLINE_CHARS=new Set([`
`,"\r"]);Vr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function i1(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function s1(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}const br={off:0,error:200,warn:300,info:400,debug:500},zv=(t,e,i)=>{if(t){if(HI(br,t))return t;Ct(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(br))}`)}};function dl(){}function nr(t,e,i){return!e||br[t]>br[i]?dl:e[t].bind(e)}const o1={error:dl,warn:dl,info:dl,debug:dl};let Fv=new WeakMap;function Ct(t){const e=t.logger,i=t.logLevel??"off";if(!e)return o1;const o=Fv.get(e);if(o&&o[0]===i)return o[1];const a={error:nr("error",e,i),warn:nr("warn",e,i),info:nr("info",e,i),debug:nr("debug",e,i)};return Fv.set(e,[i,a]),a}const Wi=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var al;class Mn{constructor(e,i,o){this.iterator=e,al.set(this,void 0),this.controller=i,he(this,al,o)}static fromSSEResponse(e,i,o){let a=!1;const r=o?Ct(o):console;async function*f(){if(a)throw new ce("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let p=!1;try{for await(const y of l1(e,i))if(!p){if(y.data.startsWith("[DONE]")){p=!0;continue}if(y.event===null||!y.event.startsWith("thread.")){let m;try{m=JSON.parse(y.data)}catch(v){throw r.error("Could not parse message into JSON:",y.data),r.error("From chunk:",y.raw),v}if(m&&m.error)throw new xt(void 0,m.error,void 0,e.headers);yield m}else{let m;try{m=JSON.parse(y.data)}catch(v){throw console.error("Could not parse message into JSON:",y.data),console.error("From chunk:",y.raw),v}if(y.event=="error")throw new xt(void 0,m.error,m.message,void 0);yield{event:y.event,data:m}}}p=!0}catch(y){if(Xf(y))return;throw y}finally{p||i.abort()}}return new Mn(f,i,o)}static fromReadableStream(e,i,o){let a=!1;async function*r(){const p=new Vr,y=M_(e);for await(const m of y)for(const v of p.decode(m))yield v;for(const m of p.flush())yield m}async function*f(){if(a)throw new ce("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let p=!1;try{for await(const y of r())p||y&&(yield JSON.parse(y));p=!0}catch(y){if(Xf(y))return;throw y}finally{p||i.abort()}}return new Mn(f,i,o)}[(al=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],i=[],o=this.iterator(),a=r=>({next:()=>{if(r.length===0){const f=o.next();e.push(f),i.push(f)}return r.shift()}});return[new Mn(()=>a(e),this.controller,P(this,al,"f")),new Mn(()=>a(i),this.controller,P(this,al,"f"))]}toReadableStream(){const e=this;let i;return R_({async start(){i=e[Symbol.asyncIterator]()},async pull(o){try{const{value:a,done:r}=await i.next();if(r)return o.close();const f=Sd(JSON.stringify(a)+`
`);o.enqueue(f)}catch(a){o.error(a)}},async cancel(){var o;await((o=i.return)==null?void 0:o.call(i))}})}}async function*l1(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ce("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ce("Attempted to iterate over a response with no body");const i=new r1,o=new Vr,a=M_(t.body);for await(const r of a1(a))for(const f of o.decode(r)){const p=i.decode(f);p&&(yield p)}for(const r of o.flush()){const f=i.decode(r);f&&(yield f)}}async function*a1(t){let e=new Uint8Array;for await(const i of t){if(i==null)continue;const o=i instanceof ArrayBuffer?new Uint8Array(i):typeof i=="string"?Sd(i):i;let a=new Uint8Array(e.length+o.length);a.set(e),a.set(o,e.length),e=a;let r;for(;(r=s1(e))!==-1;)yield e.slice(0,r),e=e.slice(r)}e.length>0&&(yield e)}class r1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,o,a]=u1(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}}function u1(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}async function G_(t,e){const{response:i,requestLogID:o,retryOfRequestLogID:a,startTime:r}=e,f=await(async()=>{var _;if(e.options.stream)return Ct(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):Mn.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const p=i.headers.get("content-type"),y=(_=p==null?void 0:p.split(";")[0])==null?void 0:_.trim();if((y==null?void 0:y.includes("application/json"))||(y==null?void 0:y.endsWith("+json"))){const T=await i.json();return P_(T,i)}return await i.text()})();return Ct(t).debug(`[${o}] response parsed`,Wi({retryOfRequestLogID:a,url:i.url,status:i.status,body:f,durationMs:Date.now()-r})),f}function P_(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var hl;class zr extends Promise{constructor(e,i,o=G_){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=o,hl.set(this,void 0),he(this,hl,e)}_thenUnwrap(e){return new zr(P(this,hl,"f"),this.responsePromise,async(i,o)=>P_(e(await this.parseResponse(i,o),o),o.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i,request_id:i.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(P(this,hl,"f"),e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}hl=new WeakMap;var ir;class Td{constructor(e,i,o,a){ir.set(this,void 0),he(this,ir,e),this.options=a,this.response=i,this.body=o}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new ce("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await P(this,ir,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ir=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const i of e.getPaginatedItems())yield i}}class c1 extends zr{constructor(e,i,o){super(e,i,async(a,r)=>new o(a,r.response,await G_(a,r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const i of e)yield i}}class Fr extends Td{constructor(e,i,o,a){super(e,i,o,a),this.data=o.data||[],this.object=o.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class ut extends Td{constructor(e,i,o,a){super(e,i,o,a),this.data=o.data||[],this.has_more=o.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var o;const e=this.getPaginatedItems(),i=(o=e[e.length-1])==null?void 0:o.id;return i?{...this.options,query:{...w_(this.options.query),after:i}}:null}}class wr extends Td{constructor(e,i,o,a){super(e,i,o,a),this.data=o.data||[],this.has_more=o.has_more||!1,this.last_id=o.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...w_(this.options.query),after:e}}:null}}const k_=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Sl(t,e,i){return k_(),new File(t,e??"unknown_file",i)}function fr(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Ed=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",$v=async(t,e)=>Wf(t.body)?{...t,body:await H_(t.body,e)}:t,ns=async(t,e)=>({...t,body:await H_(t.body,e)}),Jv=new WeakMap;function f1(t){const e=typeof t=="function"?t:t.fetch,i=Jv.get(e);if(i)return i;const o=(async()=>{try{const a="Response"in e?e.Response:(await e("data:,")).constructor,r=new FormData;return r.toString()!==await new a(r).text()}catch{return!0}})();return Jv.set(e,o),o}const H_=async(t,e)=>{if(!await f1(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const i=new FormData;return await Promise.all(Object.entries(t||{}).map(([o,a])=>jf(i,o,a))),i},q_=t=>t instanceof Blob&&"name"in t,d1=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Ed(t)||q_(t)),Wf=t=>{if(d1(t))return!0;if(Array.isArray(t))return t.some(Wf);if(t&&typeof t=="object"){for(const e in t)if(Wf(t[e]))return!0}return!1},jf=async(t,e,i)=>{if(i!==void 0){if(i==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")t.append(e,String(i));else if(i instanceof Response)t.append(e,Sl([await i.blob()],fr(i)));else if(Ed(i))t.append(e,Sl([await new Response(N_(i)).blob()],fr(i)));else if(q_(i))t.append(e,i,fr(i));else if(Array.isArray(i))await Promise.all(i.map(o=>jf(t,e+"[]",o)));else if(typeof i=="object")await Promise.all(Object.entries(i).map(([o,a])=>jf(t,`${e}[${o}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${i} instead`)}},B_=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",h1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&B_(t),p1=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function m1(t,e,i){if(k_(),t=await t,h1(t))return t instanceof File?t:Sl([await t.arrayBuffer()],t.name);if(p1(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Sl(await ed(a),e,i)}const o=await ed(t);if(e||(e=fr(t)),!(i!=null&&i.type)){const a=o.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof a=="string"&&(i={...i,type:a})}return Sl(o,e,i)}async function ed(t){var i;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(B_(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Ed(t))for await(const o of t)e.push(...await ed(o));else{const o=(i=t==null?void 0:t.constructor)==null?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${o?`; constructor: ${o}`:""}${g1(t)}`)}return e}function g1(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}class re{constructor(e){this._client=e}}function V_(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Yv=Object.freeze(Object.create(null)),y1=(t=V_)=>function(i,...o){if(i.length===1)return i[0];let a=!1;const r=[],f=i.reduce((v,_,T)=>{var w;/[?#]/.test(_)&&(a=!0);const A=o[T];let x=(a?encodeURIComponent:t)(""+A);return T!==o.length&&(A==null||typeof A=="object"&&A.toString===((w=Object.getPrototypeOf(Object.getPrototypeOf(A.hasOwnProperty??Yv)??Yv))==null?void 0:w.toString))&&(x=A+"",r.push({start:v.length+_.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),v+_+(T===o.length?"":x)},""),p=f.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(p))!==null;)r.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(r.sort((v,_)=>v.start-_.start),r.length>0){let v=0;const _=r.reduce((T,A)=>{const x=" ".repeat(A.start-v),w="^".repeat(A.length);return v=A.start+A.length,T+x+w},"");throw new ce(`Path parameters result in path with invalid segments:
${r.map(T=>T.error).join(`
`)}
${f}
${_}`)}return f},K=y1(V_);let z_=class extends re{list(e,i={},o){return this._client.getAPIList(K`/chat/completions/${e}/messages`,ut,{query:i,...o})}};function Rr(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Cd(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function wl(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function v1(t,e){return!e||!F_(e)?{...t,choices:t.choices.map(i=>($_(i.message.tool_calls),{...i,message:{...i.message,parsed:null,...i.message.tool_calls?{tool_calls:i.message.tool_calls}:void 0}}))}:Ad(t,e)}function Ad(t,e){const i=t.choices.map(o=>{var a;if(o.finish_reason==="length")throw new x_;if(o.finish_reason==="content_filter")throw new b_;return $_(o.message.tool_calls),{...o,message:{...o.message,...o.message.tool_calls?{tool_calls:((a=o.message.tool_calls)==null?void 0:a.map(r=>S1(e,r)))??void 0}:void 0,parsed:o.message.content&&!o.message.refusal?_1(e,o.message.content):null}}});return{...t,choices:i}}function _1(t,e){var i,o;return((i=t.response_format)==null?void 0:i.type)!=="json_schema"?null:((o=t.response_format)==null?void 0:o.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function S1(t,e){var o;const i=(o=t.tools)==null?void 0:o.find(a=>{var r;return Rr(a)&&((r=a.function)==null?void 0:r.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:wl(i)?i.$parseRaw(e.function.arguments):i!=null&&i.function.strict?JSON.parse(e.function.arguments):null}}}function T1(t,e){var o;if(!t||!("tools"in t)||!t.tools)return!1;const i=(o=t.tools)==null?void 0:o.find(a=>{var r;return Rr(a)&&((r=a.function)==null?void 0:r.name)===e.function.name});return Rr(i)&&(wl(i)||(i==null?void 0:i.function.strict)||!1)}function F_(t){var e;return Cd(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(i=>wl(i)||i.type==="function"&&i.function.strict===!0))??!1}function $_(t){for(const e of t||[])if(e.type!=="function")throw new ce(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function E1(t){for(const e of t??[]){if(e.type!=="function")throw new ce(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ce(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Nr=t=>(t==null?void 0:t.role)==="assistant",J_=t=>(t==null?void 0:t.role)==="tool";var td,dr,hr,pl,ml,pr,gl,Zn,yl,Mr,Ir,Ys,Y_;class xd{constructor(){td.add(this),this.controller=new AbortController,dr.set(this,void 0),hr.set(this,()=>{}),pl.set(this,()=>{}),ml.set(this,void 0),pr.set(this,()=>{}),gl.set(this,()=>{}),Zn.set(this,{}),yl.set(this,!1),Mr.set(this,!1),Ir.set(this,!1),Ys.set(this,!1),he(this,dr,new Promise((e,i)=>{he(this,hr,e,"f"),he(this,pl,i,"f")})),he(this,ml,new Promise((e,i)=>{he(this,pr,e,"f"),he(this,gl,i,"f")})),P(this,dr,"f").catch(()=>{}),P(this,ml,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},P(this,td,"m",Y_).bind(this))},0)}_connected(){this.ended||(P(this,hr,"f").call(this),this._emit("connect"))}get ended(){return P(this,yl,"f")}get errored(){return P(this,Mr,"f")}get aborted(){return P(this,Ir,"f")}abort(){this.controller.abort()}on(e,i){return(P(this,Zn,"f")[e]||(P(this,Zn,"f")[e]=[])).push({listener:i}),this}off(e,i){const o=P(this,Zn,"f")[e];if(!o)return this;const a=o.findIndex(r=>r.listener===i);return a>=0&&o.splice(a,1),this}once(e,i){return(P(this,Zn,"f")[e]||(P(this,Zn,"f")[e]=[])).push({listener:i,once:!0}),this}emitted(e){return new Promise((i,o)=>{he(this,Ys,!0),e!=="error"&&this.once("error",o),this.once(e,i)})}async done(){he(this,Ys,!0),await P(this,ml,"f")}_emit(e,...i){if(P(this,yl,"f"))return;e==="end"&&(he(this,yl,!0),P(this,pr,"f").call(this));const o=P(this,Zn,"f")[e];if(o&&(P(this,Zn,"f")[e]=o.filter(a=>!a.once),o.forEach(({listener:a})=>a(...i))),e==="abort"){const a=i[0];!P(this,Ys,"f")&&!(o!=null&&o.length)&&Promise.reject(a),P(this,pl,"f").call(this,a),P(this,gl,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=i[0];!P(this,Ys,"f")&&!(o!=null&&o.length)&&Promise.reject(a),P(this,pl,"f").call(this,a),P(this,gl,"f").call(this,a),this._emit("end")}}_emitFinal(){}}dr=new WeakMap,hr=new WeakMap,pl=new WeakMap,ml=new WeakMap,pr=new WeakMap,gl=new WeakMap,Zn=new WeakMap,yl=new WeakMap,Mr=new WeakMap,Ir=new WeakMap,Ys=new WeakMap,td=new WeakSet,Y_=function(e){if(he(this,Mr,!0),e instanceof Error&&e.name==="AbortError"&&(e=new un),e instanceof un)return he(this,Ir,!0),this._emit("abort",e);if(e instanceof ce)return this._emit("error",e);if(e instanceof Error){const i=new ce(e.message);return i.cause=e,this._emit("error",i)}return this._emit("error",new ce(String(e)))};function C1(t){return typeof t.parse=="function"}var It,nd,Dr,id,sd,od,K_,X_;const A1=10;class Q_ extends xd{constructor(){super(...arguments),It.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var o;this._chatCompletions.push(e),this._emit("chatCompletion",e);const i=(o=e.choices[0])==null?void 0:o.message;return i&&this._addMessage(i),e}_addMessage(e,i=!0){if("content"in e||(e.content=null),this.messages.push(e),i){if(this._emit("message",e),J_(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Nr(e)&&e.tool_calls)for(const o of e.tool_calls)o.type==="function"&&this._emit("functionToolCall",o.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ce("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),P(this,It,"m",nd).call(this)}async finalMessage(){return await this.done(),P(this,It,"m",Dr).call(this)}async finalFunctionToolCall(){return await this.done(),P(this,It,"m",id).call(this)}async finalFunctionToolCallResult(){return await this.done(),P(this,It,"m",sd).call(this)}async totalUsage(){return await this.done(),P(this,It,"m",od).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const i=P(this,It,"m",Dr).call(this);i&&this._emit("finalMessage",i);const o=P(this,It,"m",nd).call(this);o&&this._emit("finalContent",o);const a=P(this,It,"m",id).call(this);a&&this._emit("finalFunctionToolCall",a);const r=P(this,It,"m",sd).call(this);r!=null&&this._emit("finalFunctionToolCallResult",r),this._chatCompletions.some(f=>f.usage)&&this._emit("totalUsage",P(this,It,"m",od).call(this))}async _createChatCompletion(e,i,o){const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),P(this,It,"m",K_).call(this,i);const r=await e.chat.completions.create({...i,stream:!1},{...o,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Ad(r,i))}async _runChatCompletion(e,i,o){for(const a of i.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,i,o)}async _runTools(e,i,o){var A,x,w;const a="tool",{tool_choice:r="auto",stream:f,...p}=i,y=typeof r!="string"&&r.type==="function"&&((A=r==null?void 0:r.function)==null?void 0:A.name),{maxChatCompletions:m=A1}=o||{},v=i.tools.map(b=>{if(wl(b)){if(!b.$callback)throw new ce("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),_={};for(const b of v)b.type==="function"&&(_[b.function.name||b.function.function.name]=b.function);const T="tools"in i?v.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of i.messages)this._addMessage(b,!1);for(let b=0;b<m;++b){const G=(x=(await this._createChatCompletion(e,{...p,tool_choice:r,tools:T,messages:[...this.messages]},o)).choices[0])==null?void 0:x.message;if(!G)throw new ce("missing message in ChatCompletion response");if(!((w=G.tool_calls)!=null&&w.length))return;for(const I of G.tool_calls){if(I.type!=="function")continue;const O=I.id,{name:q,arguments:Q}=I.function,$=_[q];if($){if(y&&y!==q){const oe=`Invalid tool_call: ${JSON.stringify(q)}. ${JSON.stringify(y)} requested. Please try again`;this._addMessage({role:a,tool_call_id:O,content:oe});continue}}else{const oe=`Invalid tool_call: ${JSON.stringify(q)}. Available options are: ${Object.keys(_).map(Ce=>JSON.stringify(Ce)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:O,content:oe});continue}let fe;try{fe=C1($)?await $.parse(Q):Q}catch(oe){const Ce=oe instanceof Error?oe.message:String(oe);this._addMessage({role:a,tool_call_id:O,content:Ce});continue}const X=await $.function(fe,this),ie=P(this,It,"m",X_).call(this,X);if(this._addMessage({role:a,tool_call_id:O,content:ie}),y)return}}}}It=new WeakSet,nd=function(){return P(this,It,"m",Dr).call(this).content??null},Dr=function(){let e=this.messages.length;for(;e-- >0;){const i=this.messages[e];if(Nr(i))return{...i,content:i.content??null,refusal:i.refusal??null}}throw new ce("stream ended without producing a ChatCompletionMessage with role=assistant")},id=function(){var e,i;for(let o=this.messages.length-1;o>=0;o--){const a=this.messages[o];if(Nr(a)&&((e=a==null?void 0:a.tool_calls)!=null&&e.length))return(i=a.tool_calls.filter(r=>r.type==="function").at(-1))==null?void 0:i.function}},sd=function(){for(let e=this.messages.length-1;e>=0;e--){const i=this.messages[e];if(J_(i)&&i.content!=null&&typeof i.content=="string"&&this.messages.some(o=>{var a;return o.role==="assistant"&&((a=o.tool_calls)==null?void 0:a.some(r=>r.type==="function"&&r.id===i.tool_call_id))}))return i.content}},od=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:i}of this._chatCompletions)i&&(e.completion_tokens+=i.completion_tokens,e.prompt_tokens+=i.prompt_tokens,e.total_tokens+=i.total_tokens);return e},K_=function(e){if(e.n!=null&&e.n>1)throw new ce("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},X_=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class bd extends Q_{static runTools(e,i,o){const a=new bd,r={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,i,r)),a}_addMessage(e,i=!0){super._addMessage(e,i),Nr(e)&&e.content&&this._emit("content",e.content)}}const Z_=1,W_=2,j_=4,eS=8,tS=16,nS=32,iS=64,sS=128,oS=256,lS=sS|oS,aS=tS|nS|lS|iS,rS=Z_|W_|aS,uS=j_|eS,x1=rS|uS,mt={STR:Z_,NUM:W_,ARR:j_,OBJ:eS,NULL:tS,BOOL:nS,NAN:iS,INFINITY:sS,MINUS_INFINITY:oS,INF:lS,SPECIAL:aS,ATOM:rS,COLLECTION:uS,ALL:x1};class b1 extends Error{}class w1 extends Error{}function R1(t,e=mt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return N1(t.trim(),e)}const N1=(t,e)=>{const i=t.length;let o=0;const a=T=>{throw new b1(`${T} at position ${o}`)},r=T=>{throw new w1(`${T} at position ${o}`)},f=()=>(_(),o>=i&&a("Unexpected end of input"),t[o]==='"'?p():t[o]==="{"?y():t[o]==="["?m():t.substring(o,o+4)==="null"||mt.NULL&e&&i-o<4&&"null".startsWith(t.substring(o))?(o+=4,null):t.substring(o,o+4)==="true"||mt.BOOL&e&&i-o<4&&"true".startsWith(t.substring(o))?(o+=4,!0):t.substring(o,o+5)==="false"||mt.BOOL&e&&i-o<5&&"false".startsWith(t.substring(o))?(o+=5,!1):t.substring(o,o+8)==="Infinity"||mt.INFINITY&e&&i-o<8&&"Infinity".startsWith(t.substring(o))?(o+=8,1/0):t.substring(o,o+9)==="-Infinity"||mt.MINUS_INFINITY&e&&1<i-o&&i-o<9&&"-Infinity".startsWith(t.substring(o))?(o+=9,-1/0):t.substring(o,o+3)==="NaN"||mt.NAN&e&&i-o<3&&"NaN".startsWith(t.substring(o))?(o+=3,NaN):v()),p=()=>{const T=o;let A=!1;for(o++;o<i&&(t[o]!=='"'||A&&t[o-1]==="\\");)A=t[o]==="\\"?!A:!1,o++;if(t.charAt(o)=='"')try{return JSON.parse(t.substring(T,++o-Number(A)))}catch(x){r(String(x))}else if(mt.STR&e)try{return JSON.parse(t.substring(T,o-Number(A))+'"')}catch{return JSON.parse(t.substring(T,t.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},y=()=>{o++,_();const T={};try{for(;t[o]!=="}";){if(_(),o>=i&&mt.OBJ&e)return T;const A=p();_(),o++;try{const x=f();Object.defineProperty(T,A,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(mt.OBJ&e)return T;throw x}_(),t[o]===","&&o++}}catch{if(mt.OBJ&e)return T;a("Expected '}' at end of object")}return o++,T},m=()=>{o++;const T=[];try{for(;t[o]!=="]";)T.push(f()),_(),t[o]===","&&o++}catch{if(mt.ARR&e)return T;a("Expected ']' at end of array")}return o++,T},v=()=>{if(o===0){t==="-"&&mt.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t)}catch(A){if(mt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}r(String(A))}}const T=o;for(t[o]==="-"&&o++;t[o]&&!",]}".includes(t[o]);)o++;o==i&&!(mt.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(t.substring(T,o))}catch{t.substring(T,o)==="-"&&mt.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t.substring(T,t.lastIndexOf("e")))}catch(x){r(String(x))}}},_=()=>{for(;o<i&&` 
\r	`.includes(t[o]);)o++};return f()},Kv=t=>R1(t,mt.ALL^mt.NUM);var ft,Qn,Vs,wi,bf,sr,wf,Rf,Nf,or,Mf,Xv;class xl extends Q_{constructor(e){super(),ft.add(this),Qn.set(this,void 0),Vs.set(this,void 0),wi.set(this,void 0),he(this,Qn,e),he(this,Vs,[])}get currentChatCompletionSnapshot(){return P(this,wi,"f")}static fromReadableStream(e){const i=new xl(null);return i._run(()=>i._fromReadableStream(e)),i}static createChatCompletion(e,i,o){const a=new xl(i);return a._run(()=>a._runChatCompletion(e,{...i,stream:!0},{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,i,o){var f;super._createChatCompletion;const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),P(this,ft,"m",bf).call(this);const r=await e.chat.completions.create({...i,stream:!0},{...o,signal:this.controller.signal});this._connected();for await(const p of r)P(this,ft,"m",wf).call(this,p);if((f=r.controller.signal)!=null&&f.aborted)throw new un;return this._addChatCompletion(P(this,ft,"m",or).call(this))}async _fromReadableStream(e,i){var f;const o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),P(this,ft,"m",bf).call(this),this._connected();const a=Mn.fromReadableStream(e,this.controller);let r;for await(const p of a)r&&r!==p.id&&this._addChatCompletion(P(this,ft,"m",or).call(this)),P(this,ft,"m",wf).call(this,p),r=p.id;if((f=a.controller.signal)!=null&&f.aborted)throw new un;return this._addChatCompletion(P(this,ft,"m",or).call(this))}[(Qn=new WeakMap,Vs=new WeakMap,wi=new WeakMap,ft=new WeakSet,bf=function(){this.ended||he(this,wi,void 0)},sr=function(i){let o=P(this,Vs,"f")[i.index];return o||(o={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},P(this,Vs,"f")[i.index]=o,o)},wf=function(i){var a,r,f,p,y,m,v,_,T,A,x,w,b,H,G;if(this.ended)return;const o=P(this,ft,"m",Xv).call(this,i);this._emit("chunk",i,o);for(const I of i.choices){const O=o.choices[I.index];I.delta.content!=null&&((a=O.message)==null?void 0:a.role)==="assistant"&&((r=O.message)!=null&&r.content)&&(this._emit("content",I.delta.content,O.message.content),this._emit("content.delta",{delta:I.delta.content,snapshot:O.message.content,parsed:O.message.parsed})),I.delta.refusal!=null&&((f=O.message)==null?void 0:f.role)==="assistant"&&((p=O.message)!=null&&p.refusal)&&this._emit("refusal.delta",{delta:I.delta.refusal,snapshot:O.message.refusal}),((y=I.logprobs)==null?void 0:y.content)!=null&&((m=O.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(v=I.logprobs)==null?void 0:v.content,snapshot:((_=O.logprobs)==null?void 0:_.content)??[]}),((T=I.logprobs)==null?void 0:T.refusal)!=null&&((A=O.message)==null?void 0:A.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(x=I.logprobs)==null?void 0:x.refusal,snapshot:((w=O.logprobs)==null?void 0:w.refusal)??[]});const q=P(this,ft,"m",sr).call(this,O);O.finish_reason&&(P(this,ft,"m",Nf).call(this,O),q.current_tool_call_index!=null&&P(this,ft,"m",Rf).call(this,O,q.current_tool_call_index));for(const Q of I.delta.tool_calls??[])q.current_tool_call_index!==Q.index&&(P(this,ft,"m",Nf).call(this,O),q.current_tool_call_index!=null&&P(this,ft,"m",Rf).call(this,O,q.current_tool_call_index)),q.current_tool_call_index=Q.index;for(const Q of I.delta.tool_calls??[]){const $=(b=O.message.tool_calls)==null?void 0:b[Q.index];$!=null&&$.type&&(($==null?void 0:$.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(H=$.function)==null?void 0:H.name,index:Q.index,arguments:$.function.arguments,parsed_arguments:$.function.parsed_arguments,arguments_delta:((G=Q.function)==null?void 0:G.arguments)??""}):($==null||$.type,void 0))}}},Rf=function(i,o){var f,p,y;if(P(this,ft,"m",sr).call(this,i).done_tool_calls.has(o))return;const r=(f=i.message.tool_calls)==null?void 0:f[o];if(!r)throw new Error("no tool call snapshot");if(!r.type)throw new Error("tool call snapshot missing `type`");if(r.type==="function"){const m=(y=(p=P(this,Qn,"f"))==null?void 0:p.tools)==null?void 0:y.find(v=>Rr(v)&&v.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:o,arguments:r.function.arguments,parsed_arguments:wl(m)?m.$parseRaw(r.function.arguments):m!=null&&m.function.strict?JSON.parse(r.function.arguments):null})}else r.type},Nf=function(i){var a,r;const o=P(this,ft,"m",sr).call(this,i);if(i.message.content&&!o.content_done){o.content_done=!0;const f=P(this,ft,"m",Mf).call(this);this._emit("content.done",{content:i.message.content,parsed:f?f.$parseRaw(i.message.content):null})}i.message.refusal&&!o.refusal_done&&(o.refusal_done=!0,this._emit("refusal.done",{refusal:i.message.refusal})),(a=i.logprobs)!=null&&a.content&&!o.logprobs_content_done&&(o.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:i.logprobs.content})),(r=i.logprobs)!=null&&r.refusal&&!o.logprobs_refusal_done&&(o.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:i.logprobs.refusal}))},or=function(){if(this.ended)throw new ce("stream has ended, this shouldn't happen");const i=P(this,wi,"f");if(!i)throw new ce("request ended without sending any chunks");return he(this,wi,void 0),he(this,Vs,[]),M1(i,P(this,Qn,"f"))},Mf=function(){var o;const i=(o=P(this,Qn,"f"))==null?void 0:o.response_format;return Cd(i)?i:null},Xv=function(i){var o,a,r,f;let p=P(this,wi,"f");const{choices:y,...m}=i;p?Object.assign(p,m):p=he(this,wi,{...m,choices:[]});for(const{delta:v,finish_reason:_,index:T,logprobs:A=null,...x}of i.choices){let w=p.choices[T];if(w||(w=p.choices[T]={finish_reason:_,index:T,message:{},logprobs:A,...x}),A)if(!w.logprobs)w.logprobs=Object.assign({},A);else{const{content:Q,refusal:$,...fe}=A;Object.assign(w.logprobs,fe),Q&&((o=w.logprobs).content??(o.content=[]),w.logprobs.content.push(...Q)),$&&((a=w.logprobs).refusal??(a.refusal=[]),w.logprobs.refusal.push(...$))}if(_&&(w.finish_reason=_,P(this,Qn,"f")&&F_(P(this,Qn,"f")))){if(_==="length")throw new x_;if(_==="content_filter")throw new b_}if(Object.assign(w,x),!v)continue;const{content:b,refusal:H,function_call:G,role:I,tool_calls:O,...q}=v;if(Object.assign(w.message,q),H&&(w.message.refusal=(w.message.refusal||"")+H),I&&(w.message.role=I),G&&(w.message.function_call?(G.name&&(w.message.function_call.name=G.name),G.arguments&&((r=w.message.function_call).arguments??(r.arguments=""),w.message.function_call.arguments+=G.arguments)):w.message.function_call=G),b&&(w.message.content=(w.message.content||"")+b,!w.message.refusal&&P(this,ft,"m",Mf).call(this)&&(w.message.parsed=Kv(w.message.content))),O){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:Q,id:$,type:fe,function:X,...ie}of O){const oe=(f=w.message.tool_calls)[Q]??(f[Q]={});Object.assign(oe,ie),$&&(oe.id=$),fe&&(oe.type=fe),X&&(oe.function??(oe.function={name:X.name??"",arguments:""})),X!=null&&X.name&&(oe.function.name=X.name),X!=null&&X.arguments&&(oe.function.arguments+=X.arguments,T1(P(this,Qn,"f"),oe)&&(oe.function.parsed_arguments=Kv(oe.function.arguments)))}}}return p},Symbol.asyncIterator)](){const e=[],i=[];let o=!1;return this.on("chunk",a=>{const r=i.shift();r?r.resolve(a):e.push(a)}),this.on("end",()=>{o=!0;for(const a of i)a.resolve(void 0);i.length=0}),this.on("abort",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),this.on("error",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((r,f)=>i.push({resolve:r,reject:f})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Mn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function M1(t,e){const{id:i,choices:o,created:a,model:r,system_fingerprint:f,...p}=t,y={...p,id:i,choices:o.map(({message:m,finish_reason:v,index:_,logprobs:T,...A})=>{if(!v)throw new ce(`missing finish_reason for choice ${_}`);const{content:x=null,function_call:w,tool_calls:b,...H}=m,G=m.role;if(!G)throw new ce(`missing role for choice ${_}`);if(w){const{arguments:I,name:O}=w;if(I==null)throw new ce(`missing function_call.arguments for choice ${_}`);if(!O)throw new ce(`missing function_call.name for choice ${_}`);return{...A,message:{content:x,function_call:{arguments:I,name:O},role:G,refusal:m.refusal??null},finish_reason:v,index:_,logprobs:T}}return b?{...A,index:_,finish_reason:v,logprobs:T,message:{...H,role:G,content:x,refusal:m.refusal??null,tool_calls:b.map((I,O)=>{const{function:q,type:Q,id:$,...fe}=I,{arguments:X,name:ie,...oe}=q||{};if($==null)throw new ce(`missing choices[${_}].tool_calls[${O}].id
${lr(t)}`);if(Q==null)throw new ce(`missing choices[${_}].tool_calls[${O}].type
${lr(t)}`);if(ie==null)throw new ce(`missing choices[${_}].tool_calls[${O}].function.name
${lr(t)}`);if(X==null)throw new ce(`missing choices[${_}].tool_calls[${O}].function.arguments
${lr(t)}`);return{...fe,id:$,type:Q,function:{...oe,name:ie,arguments:X}}})}}:{...A,message:{...H,content:x,role:G,refusal:m.refusal??null},finish_reason:v,index:_,logprobs:T}}),created:a,model:r,object:"chat.completion",...f?{system_fingerprint:f}:{}};return v1(y,e)}function lr(t){return JSON.stringify(t)}class Ur extends xl{static fromReadableStream(e){const i=new Ur(null);return i._run(()=>i._fromReadableStream(e)),i}static runTools(e,i,o){const a=new Ur(i),r={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,i,r)),a}}let wd=class extends re{constructor(){super(...arguments),this.messages=new z_(this._client)}create(e,i){return this._client.post("/chat/completions",{body:e,...i,stream:e.stream??!1})}retrieve(e,i){return this._client.get(K`/chat/completions/${e}`,i)}update(e,i,o){return this._client.post(K`/chat/completions/${e}`,{body:i,...o})}list(e={},i){return this._client.getAPIList("/chat/completions",ut,{query:e,...i})}delete(e,i){return this._client.delete(K`/chat/completions/${e}`,i)}parse(e,i){return E1(e.tools),this._client.chat.completions.create(e,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(o=>Ad(o,e))}runTools(e,i){return e.stream?Ur.runTools(this._client,e,i):bd.runTools(this._client,e,i)}stream(e,i){return xl.createChatCompletion(this._client,e,i)}};wd.Messages=z_;class Rd extends re{constructor(){super(...arguments),this.completions=new wd(this._client)}}Rd.Completions=wd;const cS=Symbol("brand.privateNullableHeaders");function*I1(t){if(!t)return;if(cS in t){const{values:o,nulls:a}=t;yield*o.entries();for(const r of a)yield[r,null];return}let e=!1,i;t instanceof Headers?i=t.entries():Uv(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let o of i){const a=o[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const r=Uv(o[1])?o[1]:[o[1]];let f=!1;for(const p of r)p!==void 0&&(e&&!f&&(f=!0,yield[a,null]),yield[a,p])}}const ne=t=>{const e=new Headers,i=new Set;for(const o of t){const a=new Set;for(const[r,f]of I1(o)){const p=r.toLowerCase();a.has(p)||(e.delete(r),a.add(p)),f===null?(e.delete(r),i.add(p)):(e.append(r,f),i.delete(p))}}return{[cS]:!0,values:e,nulls:i}};class fS extends re{create(e,i){return this._client.post("/audio/speech",{body:e,...i,headers:ne([{Accept:"application/octet-stream"},i==null?void 0:i.headers]),__binaryResponse:!0})}}class dS extends re{create(e,i){return this._client.post("/audio/transcriptions",ns({body:e,...i,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class hS extends re{create(e,i){return this._client.post("/audio/translations",ns({body:e,...i,__metadata:{model:e.model}},this._client))}}class Rl extends re{constructor(){super(...arguments),this.transcriptions=new dS(this._client),this.translations=new hS(this._client),this.speech=new fS(this._client)}}Rl.Transcriptions=dS;Rl.Translations=hS;Rl.Speech=fS;class pS extends re{create(e,i){return this._client.post("/batches",{body:e,...i})}retrieve(e,i){return this._client.get(K`/batches/${e}`,i)}list(e={},i){return this._client.getAPIList("/batches",ut,{query:e,...i})}cancel(e,i){return this._client.post(K`/batches/${e}/cancel`,i)}}class mS extends re{create(e,i){return this._client.post("/assistants",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(K`/assistants/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,o){return this._client.post(K`/assistants/${e}`,{body:i,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e={},i){return this._client.getAPIList("/assistants",ut,{query:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(K`/assistants/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}let gS=class extends re{create(e,i){return this._client.post("/realtime/sessions",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}};class yS extends re{create(e,i){return this._client.post("/realtime/transcription_sessions",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}let $r=class extends re{constructor(){super(...arguments),this.sessions=new gS(this._client),this.transcriptionSessions=new yS(this._client)}};$r.Sessions=gS;$r.TranscriptionSessions=yS;class vS extends re{create(e,i){return this._client.post("/chatkit/sessions",{body:e,...i,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}cancel(e,i){return this._client.post(K`/chatkit/sessions/${e}/cancel`,{...i,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}}let _S=class extends re{retrieve(e,i){return this._client.get(K`/chatkit/threads/${e}`,{...i,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}list(e={},i){return this._client.getAPIList("/chatkit/threads",wr,{query:e,...i,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(K`/chatkit/threads/${e}`,{...i,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}listItems(e,i={},o){return this._client.getAPIList(K`/chatkit/threads/${e}/items`,wr,{query:i,...o,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},o==null?void 0:o.headers])})}};class Jr extends re{constructor(){super(...arguments),this.sessions=new vS(this._client),this.threads=new _S(this._client)}}Jr.Sessions=vS;Jr.Threads=_S;class SS extends re{create(e,i,o){return this._client.post(K`/threads/${e}/messages`,{body:i,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}retrieve(e,i,o){const{thread_id:a}=i;return this._client.get(K`/threads/${a}/messages/${e}`,{...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}update(e,i,o){const{thread_id:a,...r}=i;return this._client.post(K`/threads/${a}/messages/${e}`,{body:r,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,i={},o){return this._client.getAPIList(K`/threads/${e}/messages`,ut,{query:i,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}delete(e,i,o){const{thread_id:a}=i;return this._client.delete(K`/threads/${a}/messages/${e}`,{...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}class TS extends re{retrieve(e,i,o){const{thread_id:a,run_id:r,...f}=i;return this._client.get(K`/threads/${a}/runs/${r}/steps/${e}`,{query:f,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,i,o){const{thread_id:a,...r}=i;return this._client.getAPIList(K`/threads/${a}/runs/${e}/steps`,ut,{query:r,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}const D1=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),i=e.length,o=new Uint8Array(i);for(let a=0;a<i;a++)o[a]=e.charCodeAt(a);return Array.from(new Float32Array(o.buffer))}};var If={};const zs=t=>{var e,i,o,a;if(typeof globalThis.process<"u")return((e=If==null?void 0:If[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(a=(o=(i=globalThis.Deno.env)==null?void 0:i.get)==null?void 0:o.call(i,t))==null?void 0:a.trim()};var At,es,ld,Nn,mr,yn,ts,Zs,ji,Lr,Zt,gr,yr,Tl,vl,_l,Qv,Zv,Wv,jv,e0,t0,n0;class El extends xd{constructor(){super(...arguments),At.add(this),ld.set(this,[]),Nn.set(this,{}),mr.set(this,{}),yn.set(this,void 0),ts.set(this,void 0),Zs.set(this,void 0),ji.set(this,void 0),Lr.set(this,void 0),Zt.set(this,void 0),gr.set(this,void 0),yr.set(this,void 0),Tl.set(this,void 0)}[(ld=new WeakMap,Nn=new WeakMap,mr=new WeakMap,yn=new WeakMap,ts=new WeakMap,Zs=new WeakMap,ji=new WeakMap,Lr=new WeakMap,Zt=new WeakMap,gr=new WeakMap,yr=new WeakMap,Tl=new WeakMap,At=new WeakSet,Symbol.asyncIterator)](){const e=[],i=[];let o=!1;return this.on("event",a=>{const r=i.shift();r?r.resolve(a):e.push(a)}),this.on("end",()=>{o=!0;for(const a of i)a.resolve(void 0);i.length=0}),this.on("abort",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),this.on("error",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((r,f)=>i.push({resolve:r,reject:f})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const i=new es;return i._run(()=>i._fromReadableStream(e)),i}async _fromReadableStream(e,i){var r;const o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=Mn.fromReadableStream(e,this.controller);for await(const f of a)P(this,At,"m",vl).call(this,f);if((r=a.controller.signal)!=null&&r.aborted)throw new un;return this._addRun(P(this,At,"m",_l).call(this))}toReadableStream(){return new Mn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,i,o,a){const r=new es;return r._run(()=>r._runToolAssistantStream(e,i,o,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createToolAssistantStream(e,i,o,a){var y;const r=a==null?void 0:a.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const f={...o,stream:!0},p=await e.submitToolOutputs(i,f,{...a,signal:this.controller.signal});this._connected();for await(const m of p)P(this,At,"m",vl).call(this,m);if((y=p.controller.signal)!=null&&y.aborted)throw new un;return this._addRun(P(this,At,"m",_l).call(this))}static createThreadAssistantStream(e,i,o){const a=new es;return a._run(()=>a._threadAssistantStream(e,i,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,i,o,a){const r=new es;return r._run(()=>r._runAssistantStream(e,i,o,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),r}currentEvent(){return P(this,gr,"f")}currentRun(){return P(this,yr,"f")}currentMessageSnapshot(){return P(this,yn,"f")}currentRunStepSnapshot(){return P(this,Tl,"f")}async finalRunSteps(){return await this.done(),Object.values(P(this,Nn,"f"))}async finalMessages(){return await this.done(),Object.values(P(this,mr,"f"))}async finalRun(){if(await this.done(),!P(this,ts,"f"))throw Error("Final run was not received.");return P(this,ts,"f")}async _createThreadAssistantStream(e,i,o){var p;const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const r={...i,stream:!0},f=await e.createAndRun(r,{...o,signal:this.controller.signal});this._connected();for await(const y of f)P(this,At,"m",vl).call(this,y);if((p=f.controller.signal)!=null&&p.aborted)throw new un;return this._addRun(P(this,At,"m",_l).call(this))}async _createAssistantStream(e,i,o,a){var y;const r=a==null?void 0:a.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const f={...o,stream:!0},p=await e.create(i,f,{...a,signal:this.controller.signal});this._connected();for await(const m of p)P(this,At,"m",vl).call(this,m);if((y=p.controller.signal)!=null&&y.aborted)throw new un;return this._addRun(P(this,At,"m",_l).call(this))}static accumulateDelta(e,i){for(const[o,a]of Object.entries(i)){if(!e.hasOwnProperty(o)){e[o]=a;continue}let r=e[o];if(r==null){e[o]=a;continue}if(o==="index"||o==="type"){e[o]=a;continue}if(typeof r=="string"&&typeof a=="string")r+=a;else if(typeof r=="number"&&typeof a=="number")r+=a;else if(Cf(r)&&Cf(a))r=this.accumulateDelta(r,a);else if(Array.isArray(r)&&Array.isArray(a)){if(r.every(f=>typeof f=="string"||typeof f=="number")){r.push(...a);continue}for(const f of a){if(!Cf(f))throw new Error(`Expected array delta entry to be an object but got: ${f}`);const p=f.index;if(p==null)throw console.error(f),new Error("Expected array delta entry to have an `index` property");if(typeof p!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${p}`);const y=r[p];y==null?r.push(f):r[p]=this.accumulateDelta(y,f)}continue}else throw Error(`Unhandled record type: ${o}, deltaValue: ${a}, accValue: ${r}`);e[o]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,i,o){return await this._createThreadAssistantStream(i,e,o)}async _runAssistantStream(e,i,o,a){return await this._createAssistantStream(i,e,o,a)}async _runToolAssistantStream(e,i,o,a){return await this._createToolAssistantStream(i,e,o,a)}}es=El,vl=function(e){if(!this.ended)switch(he(this,gr,e),P(this,At,"m",Wv).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":P(this,At,"m",n0).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":P(this,At,"m",Zv).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":P(this,At,"m",Qv).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_l=function(){if(this.ended)throw new ce("stream has ended, this shouldn't happen");if(!P(this,ts,"f"))throw Error("Final run has not been received");return P(this,ts,"f")},Qv=function(e){const[i,o]=P(this,At,"m",e0).call(this,e,P(this,yn,"f"));he(this,yn,i),P(this,mr,"f")[i.id]=i;for(const a of o){const r=i.content[a.index];(r==null?void 0:r.type)=="text"&&this._emit("textCreated",r.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,i),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let r=a.text,f=i.content[a.index];if(f&&f.type=="text")this._emit("textDelta",r,f.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=P(this,Zs,"f")){if(P(this,ji,"f"))switch(P(this,ji,"f").type){case"text":this._emit("textDone",P(this,ji,"f").text,P(this,yn,"f"));break;case"image_file":this._emit("imageFileDone",P(this,ji,"f").image_file,P(this,yn,"f"));break}he(this,Zs,a.index)}he(this,ji,i.content[a.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(P(this,Zs,"f")!==void 0){const a=e.data.content[P(this,Zs,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,P(this,yn,"f"));break;case"text":this._emit("textDone",a.text,P(this,yn,"f"));break}}P(this,yn,"f")&&this._emit("messageDone",e.data),he(this,yn,void 0)}},Zv=function(e){const i=P(this,At,"m",jv).call(this,e);switch(he(this,Tl,i),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const o=e.data.delta;if(o.step_details&&o.step_details.type=="tool_calls"&&o.step_details.tool_calls&&i.step_details.type=="tool_calls")for(const r of o.step_details.tool_calls)r.index==P(this,Lr,"f")?this._emit("toolCallDelta",r,i.step_details.tool_calls[r.index]):(P(this,Zt,"f")&&this._emit("toolCallDone",P(this,Zt,"f")),he(this,Lr,r.index),he(this,Zt,i.step_details.tool_calls[r.index]),P(this,Zt,"f")&&this._emit("toolCallCreated",P(this,Zt,"f")));this._emit("runStepDelta",e.data.delta,i);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":he(this,Tl,void 0),e.data.step_details.type=="tool_calls"&&P(this,Zt,"f")&&(this._emit("toolCallDone",P(this,Zt,"f")),he(this,Zt,void 0)),this._emit("runStepDone",e.data,i);break}},Wv=function(e){P(this,ld,"f").push(e),this._emit("event",e)},jv=function(e){switch(e.event){case"thread.run.step.created":return P(this,Nn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let i=P(this,Nn,"f")[e.data.id];if(!i)throw Error("Received a RunStepDelta before creation of a snapshot");let o=e.data;if(o.delta){const a=es.accumulateDelta(i,o.delta);P(this,Nn,"f")[e.data.id]=a}return P(this,Nn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":P(this,Nn,"f")[e.data.id]=e.data;break}if(P(this,Nn,"f")[e.data.id])return P(this,Nn,"f")[e.data.id];throw new Error("No snapshot available")},e0=function(e,i){let o=[];switch(e.event){case"thread.message.created":return[e.data,o];case"thread.message.delta":if(!i)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const r of a.delta.content)if(r.index in i.content){let f=i.content[r.index];i.content[r.index]=P(this,At,"m",t0).call(this,r,f)}else i.content[r.index]=r,o.push(r);return[i,o];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(i)return[i,o];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},t0=function(e,i){return es.accumulateDelta(i,e)},n0=function(e){switch(he(this,yr,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":he(this,ts,e.data),P(this,Zt,"f")&&(this._emit("toolCallDone",P(this,Zt,"f")),he(this,Zt,void 0));break}};let Nd=class extends re{constructor(){super(...arguments),this.steps=new TS(this._client)}create(e,i,o){const{include:a,...r}=i;return this._client.post(K`/threads/${e}/runs`,{query:{include:a},body:r,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers]),stream:i.stream??!1})}retrieve(e,i,o){const{thread_id:a}=i;return this._client.get(K`/threads/${a}/runs/${e}`,{...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}update(e,i,o){const{thread_id:a,...r}=i;return this._client.post(K`/threads/${a}/runs/${e}`,{body:r,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,i={},o){return this._client.getAPIList(K`/threads/${e}/runs`,ut,{query:i,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}cancel(e,i,o){const{thread_id:a}=i;return this._client.post(K`/threads/${a}/runs/${e}/cancel`,{...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async createAndPoll(e,i,o){const a=await this.create(e,i,o);return await this.poll(a.id,{thread_id:e},o)}createAndStream(e,i,o){return El.createAssistantStream(e,this._client.beta.threads.runs,i,o)}async poll(e,i,o){var r;const a=ne([o==null?void 0:o.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=o==null?void 0:o.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const{data:f,response:p}=await this.retrieve(e,i,{...o,headers:{...o==null?void 0:o.headers,...a}}).withResponse();switch(f.status){case"queued":case"in_progress":case"cancelling":let y=5e3;if(o!=null&&o.pollIntervalMs)y=o.pollIntervalMs;else{const m=p.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await bl(y);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return f}}}stream(e,i,o){return El.createAssistantStream(e,this._client.beta.threads.runs,i,o)}submitToolOutputs(e,i,o){const{thread_id:a,...r}=i;return this._client.post(K`/threads/${a}/runs/${e}/submit_tool_outputs`,{body:r,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers]),stream:i.stream??!1})}async submitToolOutputsAndPoll(e,i,o){const a=await this.submitToolOutputs(e,i,o);return await this.poll(a.id,i,o)}submitToolOutputsStream(e,i,o){return El.createToolAssistantStream(e,this._client.beta.threads.runs,i,o)}};Nd.Steps=TS;class Yr extends re{constructor(){super(...arguments),this.runs=new Nd(this._client),this.messages=new SS(this._client)}create(e={},i){return this._client.post("/threads",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(K`/threads/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,o){return this._client.post(K`/threads/${e}`,{body:i,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}delete(e,i){return this._client.delete(K`/threads/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}createAndRun(e,i){return this._client.post("/threads/runs",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers]),stream:e.stream??!1})}async createAndRunPoll(e,i){const o=await this.createAndRun(e,i);return await this.runs.poll(o.id,{thread_id:o.thread_id},i)}createAndRunStream(e,i){return El.createThreadAssistantStream(e,this._client.beta.threads,i)}}Yr.Runs=Nd;Yr.Messages=SS;class io extends re{constructor(){super(...arguments),this.realtime=new $r(this._client),this.chatkit=new Jr(this._client),this.assistants=new mS(this._client),this.threads=new Yr(this._client)}}io.Realtime=$r;io.ChatKit=Jr;io.Assistants=mS;io.Threads=Yr;class ES extends re{create(e,i){return this._client.post("/completions",{body:e,...i,stream:e.stream??!1})}}class CS extends re{retrieve(e,i,o){const{container_id:a}=i;return this._client.get(K`/containers/${a}/files/${e}/content`,{...o,headers:ne([{Accept:"application/binary"},o==null?void 0:o.headers]),__binaryResponse:!0})}}let Md=class extends re{constructor(){super(...arguments),this.content=new CS(this._client)}create(e,i,o){return this._client.post(K`/containers/${e}/files`,ns({body:i,...o},this._client))}retrieve(e,i,o){const{container_id:a}=i;return this._client.get(K`/containers/${a}/files/${e}`,o)}list(e,i={},o){return this._client.getAPIList(K`/containers/${e}/files`,ut,{query:i,...o})}delete(e,i,o){const{container_id:a}=i;return this._client.delete(K`/containers/${a}/files/${e}`,{...o,headers:ne([{Accept:"*/*"},o==null?void 0:o.headers])})}};Md.Content=CS;class Id extends re{constructor(){super(...arguments),this.files=new Md(this._client)}create(e,i){return this._client.post("/containers",{body:e,...i})}retrieve(e,i){return this._client.get(K`/containers/${e}`,i)}list(e={},i){return this._client.getAPIList("/containers",ut,{query:e,...i})}delete(e,i){return this._client.delete(K`/containers/${e}`,{...i,headers:ne([{Accept:"*/*"},i==null?void 0:i.headers])})}}Id.Files=Md;class AS extends re{create(e,i,o){const{include:a,...r}=i;return this._client.post(K`/conversations/${e}/items`,{query:{include:a},body:r,...o})}retrieve(e,i,o){const{conversation_id:a,...r}=i;return this._client.get(K`/conversations/${a}/items/${e}`,{query:r,...o})}list(e,i={},o){return this._client.getAPIList(K`/conversations/${e}/items`,wr,{query:i,...o})}delete(e,i,o){const{conversation_id:a}=i;return this._client.delete(K`/conversations/${a}/items/${e}`,o)}}class Dd extends re{constructor(){super(...arguments),this.items=new AS(this._client)}create(e={},i){return this._client.post("/conversations",{body:e,...i})}retrieve(e,i){return this._client.get(K`/conversations/${e}`,i)}update(e,i,o){return this._client.post(K`/conversations/${e}`,{body:i,...o})}delete(e,i){return this._client.delete(K`/conversations/${e}`,i)}}Dd.Items=AS;class xS extends re{create(e,i){const o=!!e.encoding_format;let a=o?e.encoding_format:"base64";o&&Ct(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const r=this._client.post("/embeddings",{body:{...e,encoding_format:a},...i});return o?r:(Ct(this._client).debug("embeddings/decoding base64 embeddings from base64"),r._thenUnwrap(f=>(f&&f.data&&f.data.forEach(p=>{const y=p.embedding;p.embedding=D1(y)}),f)))}}class bS extends re{retrieve(e,i,o){const{eval_id:a,run_id:r}=i;return this._client.get(K`/evals/${a}/runs/${r}/output_items/${e}`,o)}list(e,i,o){const{eval_id:a,...r}=i;return this._client.getAPIList(K`/evals/${a}/runs/${e}/output_items`,ut,{query:r,...o})}}class Ud extends re{constructor(){super(...arguments),this.outputItems=new bS(this._client)}create(e,i,o){return this._client.post(K`/evals/${e}/runs`,{body:i,...o})}retrieve(e,i,o){const{eval_id:a}=i;return this._client.get(K`/evals/${a}/runs/${e}`,o)}list(e,i={},o){return this._client.getAPIList(K`/evals/${e}/runs`,ut,{query:i,...o})}delete(e,i,o){const{eval_id:a}=i;return this._client.delete(K`/evals/${a}/runs/${e}`,o)}cancel(e,i,o){const{eval_id:a}=i;return this._client.post(K`/evals/${a}/runs/${e}`,o)}}Ud.OutputItems=bS;class Ld extends re{constructor(){super(...arguments),this.runs=new Ud(this._client)}create(e,i){return this._client.post("/evals",{body:e,...i})}retrieve(e,i){return this._client.get(K`/evals/${e}`,i)}update(e,i,o){return this._client.post(K`/evals/${e}`,{body:i,...o})}list(e={},i){return this._client.getAPIList("/evals",ut,{query:e,...i})}delete(e,i){return this._client.delete(K`/evals/${e}`,i)}}Ld.Runs=Ud;let wS=class extends re{create(e,i){return this._client.post("/files",ns({body:e,...i},this._client))}retrieve(e,i){return this._client.get(K`/files/${e}`,i)}list(e={},i){return this._client.getAPIList("/files",ut,{query:e,...i})}delete(e,i){return this._client.delete(K`/files/${e}`,i)}content(e,i){return this._client.get(K`/files/${e}/content`,{...i,headers:ne([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:i=5e3,maxWait:o=1800*1e3}={}){const a=new Set(["processed","error","deleted"]),r=Date.now();let f=await this.retrieve(e);for(;!f.status||!a.has(f.status);)if(await bl(i),f=await this.retrieve(e),Date.now()-r>o)throw new _d({message:`Giving up on waiting for file ${e} to finish processing after ${o} milliseconds.`});return f}};class RS extends re{}let NS=class extends re{run(e,i){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...i})}validate(e,i){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...i})}};class Od extends re{constructor(){super(...arguments),this.graders=new NS(this._client)}}Od.Graders=NS;class MS extends re{create(e,i,o){return this._client.getAPIList(K`/fine_tuning/checkpoints/${e}/permissions`,Fr,{body:i,method:"post",...o})}retrieve(e,i={},o){return this._client.get(K`/fine_tuning/checkpoints/${e}/permissions`,{query:i,...o})}delete(e,i,o){const{fine_tuned_model_checkpoint:a}=i;return this._client.delete(K`/fine_tuning/checkpoints/${a}/permissions/${e}`,o)}}let Gd=class extends re{constructor(){super(...arguments),this.permissions=new MS(this._client)}};Gd.Permissions=MS;class IS extends re{list(e,i={},o){return this._client.getAPIList(K`/fine_tuning/jobs/${e}/checkpoints`,ut,{query:i,...o})}}class Pd extends re{constructor(){super(...arguments),this.checkpoints=new IS(this._client)}create(e,i){return this._client.post("/fine_tuning/jobs",{body:e,...i})}retrieve(e,i){return this._client.get(K`/fine_tuning/jobs/${e}`,i)}list(e={},i){return this._client.getAPIList("/fine_tuning/jobs",ut,{query:e,...i})}cancel(e,i){return this._client.post(K`/fine_tuning/jobs/${e}/cancel`,i)}listEvents(e,i={},o){return this._client.getAPIList(K`/fine_tuning/jobs/${e}/events`,ut,{query:i,...o})}pause(e,i){return this._client.post(K`/fine_tuning/jobs/${e}/pause`,i)}resume(e,i){return this._client.post(K`/fine_tuning/jobs/${e}/resume`,i)}}Pd.Checkpoints=IS;class so extends re{constructor(){super(...arguments),this.methods=new RS(this._client),this.jobs=new Pd(this._client),this.checkpoints=new Gd(this._client),this.alpha=new Od(this._client)}}so.Methods=RS;so.Jobs=Pd;so.Checkpoints=Gd;so.Alpha=Od;class DS extends re{}class kd extends re{constructor(){super(...arguments),this.graderModels=new DS(this._client)}}kd.GraderModels=DS;class US extends re{createVariation(e,i){return this._client.post("/images/variations",ns({body:e,...i},this._client))}edit(e,i){return this._client.post("/images/edits",ns({body:e,...i,stream:e.stream??!1},this._client))}generate(e,i){return this._client.post("/images/generations",{body:e,...i,stream:e.stream??!1})}}class LS extends re{retrieve(e,i){return this._client.get(K`/models/${e}`,i)}list(e){return this._client.getAPIList("/models",Fr,e)}delete(e,i){return this._client.delete(K`/models/${e}`,i)}}class OS extends re{create(e,i){return this._client.post("/moderations",{body:e,...i})}}class GS extends re{accept(e,i,o){return this._client.post(K`/realtime/calls/${e}/accept`,{body:i,...o,headers:ne([{Accept:"*/*"},o==null?void 0:o.headers])})}hangup(e,i){return this._client.post(K`/realtime/calls/${e}/hangup`,{...i,headers:ne([{Accept:"*/*"},i==null?void 0:i.headers])})}refer(e,i,o){return this._client.post(K`/realtime/calls/${e}/refer`,{body:i,...o,headers:ne([{Accept:"*/*"},o==null?void 0:o.headers])})}reject(e,i={},o){return this._client.post(K`/realtime/calls/${e}/reject`,{body:i,...o,headers:ne([{Accept:"*/*"},o==null?void 0:o.headers])})}}class PS extends re{create(e,i){return this._client.post("/realtime/client_secrets",{body:e,...i})}}class Kr extends re{constructor(){super(...arguments),this.clientSecrets=new PS(this._client),this.calls=new GS(this._client)}}Kr.ClientSecrets=PS;Kr.Calls=GS;function U1(t,e){return!e||!O1(e)?{...t,output_parsed:null,output:t.output.map(i=>i.type==="function_call"?{...i,parsed_arguments:null}:i.type==="message"?{...i,content:i.content.map(o=>({...o,parsed:null}))}:i)}:kS(t,e)}function kS(t,e){const i=t.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:k1(e,a)};if(a.type==="message"){const r=a.content.map(f=>f.type==="output_text"?{...f,parsed:L1(e,f.text)}:f);return{...a,content:r}}return a}),o=Object.assign({},t,{output:i});return Object.getOwnPropertyDescriptor(t,"output_text")||ad(o),Object.defineProperty(o,"output_parsed",{enumerable:!0,get(){for(const a of o.output)if(a.type==="message"){for(const r of a.content)if(r.type==="output_text"&&r.parsed!==null)return r.parsed}return null}}),o}function L1(t,e){var i,o,a,r;return((o=(i=t.text)==null?void 0:i.format)==null?void 0:o.type)!=="json_schema"?null:"$parseRaw"in((a=t.text)==null?void 0:a.format)?((r=t.text)==null?void 0:r.format).$parseRaw(e):JSON.parse(e)}function O1(t){var e;return!!Cd((e=t.text)==null?void 0:e.format)}function G1(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function P1(t,e){return t.find(i=>i.type==="function"&&i.name===e)}function k1(t,e){const i=P1(t.tools??[],e.name);return{...e,...e,parsed_arguments:G1(i)?i.$parseRaw(e.arguments):i!=null&&i.strict?JSON.parse(e.arguments):null}}function ad(t){const e=[];for(const i of t.output)if(i.type==="message")for(const o of i.content)o.type==="output_text"&&e.push(o.text);t.output_text=e.join("")}var Fs,ar,Ri,rr,i0,s0,o0,l0;class Hd extends xd{constructor(e){super(),Fs.add(this),ar.set(this,void 0),Ri.set(this,void 0),rr.set(this,void 0),he(this,ar,e)}static createResponse(e,i,o){const a=new Hd(i);return a._run(()=>a._createOrRetrieveResponse(e,i,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createOrRetrieveResponse(e,i,o){var p;const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),P(this,Fs,"m",i0).call(this);let r,f=null;"response_id"in i?(r=await e.responses.retrieve(i.response_id,{stream:!0},{...o,signal:this.controller.signal,stream:!0}),f=i.starting_after??null):r=await e.responses.create({...i,stream:!0},{...o,signal:this.controller.signal}),this._connected();for await(const y of r)P(this,Fs,"m",s0).call(this,y,f);if((p=r.controller.signal)!=null&&p.aborted)throw new un;return P(this,Fs,"m",o0).call(this)}[(ar=new WeakMap,Ri=new WeakMap,rr=new WeakMap,Fs=new WeakSet,i0=function(){this.ended||he(this,Ri,void 0)},s0=function(i,o){if(this.ended)return;const a=(f,p)=>{(o==null||p.sequence_number>o)&&this._emit(f,p)},r=P(this,Fs,"m",l0).call(this,i);switch(a("event",i),i.type){case"response.output_text.delta":{const f=r.output[i.output_index];if(!f)throw new ce(`missing output at index ${i.output_index}`);if(f.type==="message"){const p=f.content[i.content_index];if(!p)throw new ce(`missing content at index ${i.content_index}`);if(p.type!=="output_text")throw new ce(`expected content to be 'output_text', got ${p.type}`);a("response.output_text.delta",{...i,snapshot:p.text})}break}case"response.function_call_arguments.delta":{const f=r.output[i.output_index];if(!f)throw new ce(`missing output at index ${i.output_index}`);f.type==="function_call"&&a("response.function_call_arguments.delta",{...i,snapshot:f.arguments});break}default:a(i.type,i);break}},o0=function(){if(this.ended)throw new ce("stream has ended, this shouldn't happen");const i=P(this,Ri,"f");if(!i)throw new ce("request ended without sending any events");he(this,Ri,void 0);const o=H1(i,P(this,ar,"f"));return he(this,rr,o),o},l0=function(i){var a;let o=P(this,Ri,"f");if(!o){if(i.type!=="response.created")throw new ce(`When snapshot hasn't been set yet, expected 'response.created' event, got ${i.type}`);return o=he(this,Ri,i.response),o}switch(i.type){case"response.output_item.added":{o.output.push(i.item);break}case"response.content_part.added":{const r=o.output[i.output_index];if(!r)throw new ce(`missing output at index ${i.output_index}`);const f=r.type,p=i.part;f==="message"&&p.type!=="reasoning_text"?r.content.push(p):f==="reasoning"&&p.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(p));break}case"response.output_text.delta":{const r=o.output[i.output_index];if(!r)throw new ce(`missing output at index ${i.output_index}`);if(r.type==="message"){const f=r.content[i.content_index];if(!f)throw new ce(`missing content at index ${i.content_index}`);if(f.type!=="output_text")throw new ce(`expected content to be 'output_text', got ${f.type}`);f.text+=i.delta}break}case"response.function_call_arguments.delta":{const r=o.output[i.output_index];if(!r)throw new ce(`missing output at index ${i.output_index}`);r.type==="function_call"&&(r.arguments+=i.delta);break}case"response.reasoning_text.delta":{const r=o.output[i.output_index];if(!r)throw new ce(`missing output at index ${i.output_index}`);if(r.type==="reasoning"){const f=(a=r.content)==null?void 0:a[i.content_index];if(!f)throw new ce(`missing content at index ${i.content_index}`);if(f.type!=="reasoning_text")throw new ce(`expected content to be 'reasoning_text', got ${f.type}`);f.text+=i.delta}break}case"response.completed":{he(this,Ri,i.response);break}}return o},Symbol.asyncIterator)](){const e=[],i=[];let o=!1;return this.on("event",a=>{const r=i.shift();r?r.resolve(a):e.push(a)}),this.on("end",()=>{o=!0;for(const a of i)a.resolve(void 0);i.length=0}),this.on("abort",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),this.on("error",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((r,f)=>i.push({resolve:r,reject:f})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=P(this,rr,"f");if(!e)throw new ce("stream ended without producing a ChatCompletion");return e}}function H1(t,e){return U1(t,e)}class HS extends re{list(e,i={},o){return this._client.getAPIList(K`/responses/${e}/input_items`,ut,{query:i,...o})}}class qS extends re{count(e={},i){return this._client.post("/responses/input_tokens",{body:e,...i})}}class Xr extends re{constructor(){super(...arguments),this.inputItems=new HS(this._client),this.inputTokens=new qS(this._client)}create(e,i){return this._client.post("/responses",{body:e,...i,stream:e.stream??!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&ad(o),o))}retrieve(e,i={},o){return this._client.get(K`/responses/${e}`,{query:i,...o,stream:(i==null?void 0:i.stream)??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&ad(a),a))}delete(e,i){return this._client.delete(K`/responses/${e}`,{...i,headers:ne([{Accept:"*/*"},i==null?void 0:i.headers])})}parse(e,i){return this._client.responses.create(e,i)._thenUnwrap(o=>kS(o,e))}stream(e,i){return Hd.createResponse(this._client,e,i)}cancel(e,i){return this._client.post(K`/responses/${e}/cancel`,i)}compact(e,i){return this._client.post("/responses/compact",{body:e,...i})}}Xr.InputItems=HS;Xr.InputTokens=qS;class BS extends re{create(e,i,o){return this._client.post(K`/uploads/${e}/parts`,ns({body:i,...o},this._client))}}class qd extends re{constructor(){super(...arguments),this.parts=new BS(this._client)}create(e,i){return this._client.post("/uploads",{body:e,...i})}cancel(e,i){return this._client.post(K`/uploads/${e}/cancel`,i)}complete(e,i,o){return this._client.post(K`/uploads/${e}/complete`,{body:i,...o})}}qd.Parts=BS;const q1=async t=>{const e=await Promise.allSettled(t),i=e.filter(a=>a.status==="rejected");if(i.length){for(const a of i)console.error(a.reason);throw new Error(`${i.length} promise(s) failed - see the above errors`)}const o=[];for(const a of e)a.status==="fulfilled"&&o.push(a.value);return o};class VS extends re{create(e,i,o){return this._client.post(K`/vector_stores/${e}/file_batches`,{body:i,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}retrieve(e,i,o){const{vector_store_id:a}=i;return this._client.get(K`/vector_stores/${a}/file_batches/${e}`,{...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}cancel(e,i,o){const{vector_store_id:a}=i;return this._client.post(K`/vector_stores/${a}/file_batches/${e}/cancel`,{...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async createAndPoll(e,i,o){const a=await this.create(e,i);return await this.poll(e,a.id,o)}listFiles(e,i,o){const{vector_store_id:a,...r}=i;return this._client.getAPIList(K`/vector_stores/${a}/file_batches/${e}/files`,ut,{query:r,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async poll(e,i,o){var r;const a=ne([o==null?void 0:o.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=o==null?void 0:o.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const{data:f,response:p}=await this.retrieve(i,{vector_store_id:e},{...o,headers:a}).withResponse();switch(f.status){case"in_progress":let y=5e3;if(o!=null&&o.pollIntervalMs)y=o.pollIntervalMs;else{const m=p.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await bl(y);break;case"failed":case"cancelled":case"completed":return f}}}async uploadAndPoll(e,{files:i,fileIds:o=[]},a){if(i==null||i.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const r=(a==null?void 0:a.maxConcurrency)??5,f=Math.min(r,i.length),p=this._client,y=i.values(),m=[...o];async function v(T){for(let A of T){const x=await p.files.create({file:A,purpose:"assistants"},a);m.push(x.id)}}const _=Array(f).fill(y).map(v);return await q1(_),await this.createAndPoll(e,{file_ids:m})}}class zS extends re{create(e,i,o){return this._client.post(K`/vector_stores/${e}/files`,{body:i,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}retrieve(e,i,o){const{vector_store_id:a}=i;return this._client.get(K`/vector_stores/${a}/files/${e}`,{...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}update(e,i,o){const{vector_store_id:a,...r}=i;return this._client.post(K`/vector_stores/${a}/files/${e}`,{body:r,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,i={},o){return this._client.getAPIList(K`/vector_stores/${e}/files`,ut,{query:i,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}delete(e,i,o){const{vector_store_id:a}=i;return this._client.delete(K`/vector_stores/${a}/files/${e}`,{...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async createAndPoll(e,i,o){const a=await this.create(e,i,o);return await this.poll(e,a.id,o)}async poll(e,i,o){var r;const a=ne([o==null?void 0:o.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=o==null?void 0:o.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const f=await this.retrieve(i,{vector_store_id:e},{...o,headers:a}).withResponse(),p=f.data;switch(p.status){case"in_progress":let y=5e3;if(o!=null&&o.pollIntervalMs)y=o.pollIntervalMs;else{const m=f.response.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await bl(y);break;case"failed":case"completed":return p}}}async upload(e,i,o){const a=await this._client.files.create({file:i,purpose:"assistants"},o);return this.create(e,{file_id:a.id},o)}async uploadAndPoll(e,i,o){const a=await this.upload(e,i,o);return await this.poll(e,a.id,o)}content(e,i,o){const{vector_store_id:a}=i;return this._client.getAPIList(K`/vector_stores/${a}/files/${e}/content`,Fr,{...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}class Qr extends re{constructor(){super(...arguments),this.files=new zS(this._client),this.fileBatches=new VS(this._client)}create(e,i){return this._client.post("/vector_stores",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(K`/vector_stores/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,o){return this._client.post(K`/vector_stores/${e}`,{body:i,...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e={},i){return this._client.getAPIList("/vector_stores",ut,{query:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(K`/vector_stores/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}search(e,i,o){return this._client.getAPIList(K`/vector_stores/${e}/search`,Fr,{body:i,method:"post",...o,headers:ne([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}Qr.Files=zS;Qr.FileBatches=VS;class FS extends re{create(e,i){return this._client.post("/videos",$v({body:e,...i},this._client))}retrieve(e,i){return this._client.get(K`/videos/${e}`,i)}list(e={},i){return this._client.getAPIList("/videos",wr,{query:e,...i})}delete(e,i){return this._client.delete(K`/videos/${e}`,i)}downloadContent(e,i={},o){return this._client.get(K`/videos/${e}/content`,{query:i,...o,headers:ne([{Accept:"application/binary"},o==null?void 0:o.headers]),__binaryResponse:!0})}remix(e,i,o){return this._client.post(K`/videos/${e}/remix`,$v({body:i,...o},this._client))}}var Ks,$S,vr;class JS extends re{constructor(){super(...arguments),Ks.add(this)}async unwrap(e,i,o=this._client.webhookSecret,a=300){return await this.verifySignature(e,i,o,a),JSON.parse(e)}async verifySignature(e,i,o=this._client.webhookSecret,a=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");P(this,Ks,"m",$S).call(this,o);const r=ne([i]).values,f=P(this,Ks,"m",vr).call(this,r,"webhook-signature"),p=P(this,Ks,"m",vr).call(this,r,"webhook-timestamp"),y=P(this,Ks,"m",vr).call(this,r,"webhook-id"),m=parseInt(p,10);if(isNaN(m))throw new fl("Invalid webhook timestamp format");const v=Math.floor(Date.now()/1e3);if(v-m>a)throw new fl("Webhook timestamp is too old");if(m>v+a)throw new fl("Webhook timestamp is too new");const _=f.split(" ").map(w=>w.startsWith("v1,")?w.substring(3):w),T=o.startsWith("whsec_")?Buffer.from(o.replace("whsec_",""),"base64"):Buffer.from(o,"utf-8"),A=y?`${y}.${p}.${e}`:`${p}.${e}`,x=await crypto.subtle.importKey("raw",T,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const w of _)try{const b=Buffer.from(w,"base64");if(await crypto.subtle.verify("HMAC",x,b,new TextEncoder().encode(A)))return}catch{continue}throw new fl("The given webhook signature does not match the expected signature")}}Ks=new WeakSet,$S=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},vr=function(e,i){if(!e)throw new Error("Headers are required");const o=e.get(i);if(o==null)throw new Error(`Missing required header: ${i}`);return o};var rd,Bd,_r,YS;class Te{constructor({baseURL:e=zs("OPENAI_BASE_URL"),apiKey:i=zs("OPENAI_API_KEY"),organization:o=zs("OPENAI_ORG_ID")??null,project:a=zs("OPENAI_PROJECT_ID")??null,webhookSecret:r=zs("OPENAI_WEBHOOK_SECRET")??null,...f}={}){if(rd.add(this),_r.set(this,void 0),this.completions=new ES(this),this.chat=new Rd(this),this.embeddings=new xS(this),this.files=new wS(this),this.images=new US(this),this.audio=new Rl(this),this.moderations=new OS(this),this.models=new LS(this),this.fineTuning=new so(this),this.graders=new kd(this),this.vectorStores=new Qr(this),this.webhooks=new JS(this),this.beta=new io(this),this.batches=new pS(this),this.uploads=new qd(this),this.responses=new Xr(this),this.realtime=new Kr(this),this.conversations=new Dd(this),this.evals=new Ld(this),this.containers=new Id(this),this.videos=new FS(this),i===void 0)throw new ce("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const p={apiKey:i,organization:o,project:a,webhookSecret:r,...f,baseURL:e||"https://api.openai.com/v1"};if(!p.dangerouslyAllowBrowser&&VI())throw new ce(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=p.baseURL,this.timeout=p.timeout??Bd.DEFAULT_TIMEOUT,this.logger=p.logger??console;const y="warn";this.logLevel=y,this.logLevel=zv(p.logLevel,"ClientOptions.logLevel",this)??zv(zs("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??y,this.fetchOptions=p.fetchOptions,this.maxRetries=p.maxRetries??2,this.fetch=p.fetch??YI(),he(this,_r,XI),this._options=p,this.apiKey=typeof i=="string"?i:"Missing Key",this.organization=o,this.project=a,this.webhookSecret=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){}async authHeaders(e){return ne([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return t1(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Js}`}defaultIdempotencyKey(){return`stainless-node-retry-${g_()}`}makeStatusError(e,i,o,a){return xt.generate(e,i,o,a)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let i;try{i=await e()}catch(o){throw o instanceof ce?o:new ce(`Failed to get token from 'apiKey' function: ${o.message}`,{cause:o})}if(typeof i!="string"||!i)throw new ce(`Expected 'apiKey' function argument to return a string but it returned ${i}`);return this.apiKey=i,!0}buildURL(e,i,o){const a=!P(this,rd,"m",YS).call(this)&&o||this.baseURL,r=PI(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),f=this.defaultQuery();return kI(f)||(i={...f,...i}),typeof i=="object"&&i&&!Array.isArray(i)&&(r.search=this.stringifyQuery(i)),r.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:i,options:o}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,o){return this.request(Promise.resolve(o).then(a=>({method:e,path:i,...a})))}request(e,i=null){return new zr(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,o){var H,G;const a=await e,r=a.maxRetries??this.maxRetries;i==null&&(i=r),await this.prepareOptions(a);const{req:f,url:p,timeout:y}=await this.buildRequest(a,{retryCount:r-i});await this.prepareRequest(f,{url:p,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=o===void 0?"":`, retryOf: ${o}`,_=Date.now();if(Ct(this).debug(`[${m}] sending request`,Wi({retryOfRequestLogID:o,method:a.method,url:p,options:a,headers:f.headers})),(H=a.signal)!=null&&H.aborted)throw new un;const T=new AbortController,A=await this.fetchWithTimeout(p,f,y,T).catch(Qf),x=Date.now();if(A instanceof globalThis.Error){const I=`retrying, ${i} attempts remaining`;if((G=a.signal)!=null&&G.aborted)throw new un;const O=Xf(A)||/timed? ?out/i.test(String(A)+("cause"in A?String(A.cause):""));if(i)return Ct(this).info(`[${m}] connection ${O?"timed out":"failed"} - ${I}`),Ct(this).debug(`[${m}] connection ${O?"timed out":"failed"} (${I})`,Wi({retryOfRequestLogID:o,url:p,durationMs:x-_,message:A.message})),this.retryRequest(a,i,o??m);throw Ct(this).info(`[${m}] connection ${O?"timed out":"failed"} - error; no more retries left`),Ct(this).debug(`[${m}] connection ${O?"timed out":"failed"} (error; no more retries left)`,Wi({retryOfRequestLogID:o,url:p,durationMs:x-_,message:A.message})),O?new _d:new Br({cause:A})}const w=[...A.headers.entries()].filter(([I])=>I==="x-request-id").map(([I,O])=>", "+I+": "+JSON.stringify(O)).join(""),b=`[${m}${v}${w}] ${f.method} ${p} ${A.ok?"succeeded":"failed"} with status ${A.status} in ${x-_}ms`;if(!A.ok){const I=await this.shouldRetry(A);if(i&&I){const X=`retrying, ${i} attempts remaining`;return await KI(A.body),Ct(this).info(`${b} - ${X}`),Ct(this).debug(`[${m}] response error (${X})`,Wi({retryOfRequestLogID:o,url:A.url,status:A.status,headers:A.headers,durationMs:x-_})),this.retryRequest(a,i,o??m,A.headers)}const O=I?"error; no more retries left":"error; not retryable";Ct(this).info(`${b} - ${O}`);const q=await A.text().catch(X=>Qf(X).message),Q=BI(q),$=Q?void 0:q;throw Ct(this).debug(`[${m}] response error (${O})`,Wi({retryOfRequestLogID:o,url:A.url,status:A.status,headers:A.headers,message:$,durationMs:Date.now()-_})),this.makeStatusError(A.status,Q,$,A.headers)}return Ct(this).info(b),Ct(this).debug(`[${m}] response start`,Wi({retryOfRequestLogID:o,url:A.url,status:A.status,headers:A.headers,durationMs:x-_})),{response:A,options:a,controller:T,requestLogID:m,retryOfRequestLogID:o,startTime:_}}getAPIList(e,i,o){return this.requestAPIList(i,{method:"get",path:e,...o})}requestAPIList(e,i){const o=this.makeRequest(i,null,void 0);return new c1(this,o,e)}async fetchWithTimeout(e,i,o,a){const{signal:r,method:f,...p}=i||{};r&&r.addEventListener("abort",()=>a.abort());const y=setTimeout(()=>a.abort(),o),m=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,v={signal:a.signal,...m?{duplex:"half"}:{},method:"GET",...p};f&&(v.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(y)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,o,a){let r;const f=a==null?void 0:a.get("retry-after-ms");if(f){const y=parseFloat(f);Number.isNaN(y)||(r=y)}const p=a==null?void 0:a.get("retry-after");if(p&&!r){const y=parseFloat(p);Number.isNaN(y)?r=Date.parse(p)-Date.now():r=y*1e3}if(!(r&&0<=r&&r<60*1e3)){const y=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(i,y)}return await bl(r),this.makeRequest(e,i-1,o)}calculateDefaultRetryTimeoutMillis(e,i){const r=i-e,f=Math.min(.5*Math.pow(2,r),8),p=1-Math.random()*.25;return f*p*1e3}async buildRequest(e,{retryCount:i=0}={}){const o={...e},{method:a,path:r,query:f,defaultBaseURL:p}=o,y=this.buildURL(r,f,p);"timeout"in o&&qI("timeout",o.timeout),o.timeout=o.timeout??this.timeout;const{bodyHeaders:m,body:v}=this.buildBody({options:o}),_=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:i});return{req:{method:a,headers:_,...o.signal&&{signal:o.signal},...globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"},...v&&{body:v},...this.fetchOptions??{},...o.fetchOptions??{}},url:y,timeout:o.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:o,retryCount:a}){let r={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const f=ne([r,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...JI(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,o,e.headers]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=ne([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:N_(e)}:P(this,_r,"f").call(this,{body:e,headers:o})}}Bd=Te,_r=new WeakMap,rd=new WeakSet,YS=function(){return this.baseURL!=="https://api.openai.com/v1"};Te.OpenAI=Bd;Te.DEFAULT_TIMEOUT=6e5;Te.OpenAIError=ce;Te.APIError=xt;Te.APIConnectionError=Br;Te.APIConnectionTimeoutError=_d;Te.APIUserAbortError=un;Te.NotFoundError=S_;Te.ConflictError=T_;Te.RateLimitError=C_;Te.BadRequestError=y_;Te.AuthenticationError=v_;Te.InternalServerError=A_;Te.PermissionDeniedError=__;Te.UnprocessableEntityError=E_;Te.InvalidWebhookSignatureError=fl;Te.toFile=m1;Te.Completions=ES;Te.Chat=Rd;Te.Embeddings=xS;Te.Files=wS;Te.Images=US;Te.Audio=Rl;Te.Moderations=OS;Te.Models=LS;Te.FineTuning=so;Te.Graders=kd;Te.VectorStores=Qr;Te.Webhooks=JS;Te.Beta=io;Te.Batches=pS;Te.Uploads=qd;Te.Responses=Xr;Te.Realtime=Kr;Te.Conversations=Dd;Te.Evals=Ld;Te.Containers=Id;Te.Videos=FS;const a0='You should always follow the instructions and output a valid JSON object.\nThe structure of the JSON object you can found in the instructions.\n\nAnd you should always end the block with a "```" to indicate the end of the JSON object.\n\nIMPORTANT: You must output exactly one top-level JSON object inside a single fenced code block that starts with ```json and ends with ```. You must only output one such fenced code block per response, without any additional code blocks or text outside it.\n\n<instructions>\n',r0=`Output:
</instructions>

`;function B1(t){if(!t||t.trim().length===0)throw new Error("Empty response from AI");const e=/```(?:json\s*)?([\s\S]*?)```/,i=t.match(e);if(i&&i[1]){const p=i[1].trim();if(p.startsWith("{")||p.startsWith("["))return p}const o=t.trim();if(o.startsWith("{")||o.startsWith("["))return o;const a=o.indexOf("{"),r=o.indexOf("[");let f=-1;if(a!==-1&&r!==-1?f=Math.min(a,r):a!==-1?f=a:r!==-1&&(f=r),f!==-1){let p=0,y=0,m=!1,v=!1;for(let _=f;_<o.length;_++){const T=o[_];if(v){v=!1;continue}if(T==="\\"){v=!0;continue}if(T==='"'){m=!m;continue}if(!m&&(T==="{"&&p++,T==="}"&&p--,T==="["&&y++,T==="]"&&y--,p===0&&y===0&&_>f))return o.substring(f,_+1)}return o.substring(f)}throw new Error(`Could not extract valid JSON from response. Response preview: ${t.substring(0,200)}...`)}function V1(t){try{return JSON.parse(t)}catch(e){let i=t.replace(/^\uFEFF/,"").replace(/,(\s*[}\]])/g,"$1").replace(/'/g,'"').replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*/g,"").replace(/([{,]\s*)([a-zA-Z_][a-zA-Z0-9_]*)(\s*:)/g,'$1"$2"$3');try{return JSON.parse(i)}catch(o){throw new Error(`Failed to parse JSON even after repair attempts. Original error: ${e}. Repaired error: ${o}`)}}}function z1(t){const e=B1(t);return V1(e)}function F1(t){var e,i;if(t.provider==="openai"){if(!((e=t.openai)!=null&&e.apiKey))throw new Error("OpenAI API Key is missing in settings.")}else if(t.provider==="gemini"&&!((i=t.gemini)!=null&&i.apiKey))throw new Error("Gemini API Key is missing (process.env.API_KEY).")}function KS(t,e=0){var o,a;const i="  ".repeat(e);if(t.type===j.OBJECT&&t.properties){let r=`{
`;for(const[f,p]of Object.entries(t.properties)){const y=p,m=(o=t.required)!=null&&o.includes(f)?" (required)":" (optional)",v=y.enum?` Enum: ${y.enum.join(", ")}`:"";r+=`${i}  "${f}": ${y.type}${m}${v},
`}return r+=`${i}}`,r}return t.type===j.ARRAY&&t.items?`[
${KS(t.items,e+1)}
${i}]`:((a=t.type)==null?void 0:a.toLowerCase())||"object"}const Nl=async(t,e,i)=>{var o;if(F1(t),t.provider==="gemini"){const a=((o=t.gemini)==null?void 0:o.apiKey)||"",r=new OI({apiKey:a}),f={systemInstruction:e.systemInstruction,...i?{temperature:i.temperature,maxOutputTokens:i.maxOutputTokens,topP:i.topP,topK:i.topK}:{}};e.jsonMode&&(f.responseMimeType="application/json",e.jsonSchema&&(f.responseSchema=e.jsonSchema));try{return(await r.models.generateContent({model:(i==null?void 0:i.geminiModel)||"gemini-2.5-flash-preview-05-20",contents:e.prompt,config:f})).text||""}catch(p){throw console.error("Gemini Error:",p),new Error(`Gemini Error: ${p.message}`)}}if(t.provider==="openai"&&t.openai){const a=new Te({apiKey:t.openai.apiKey,baseURL:t.openai.baseUrl||"https://api.openai.com/v1",dangerouslyAllowBrowser:!0}),r=e.jsonMode&&e.jsonSchema?`

Expected JSON Schema Structure:
${KS(e.jsonSchema)}

Strictly follow the structure above.`:e.jsonMode?`

Output must be a valid JSON object.`:"",f=e.jsonMode?e.systemInstruction?`${a0}${e.systemInstruction}${r}
</instructions>
${r0}`:`${a0}${r}
</instructions>
${r0}`:e.systemInstruction,p=[];f&&p.push({role:"system",content:f}),p.push({role:"user",content:e.prompt});try{const y={messages:p,model:(i==null?void 0:i.openaiModel)||t.openai.model||"gpt-4-turbo-preview",...i?{temperature:i.temperature,max_tokens:i.maxOutputTokens,top_p:i.topP}:{}},m=await a.chat.completions.create(y);if(e.jsonMode){const v=z1(m.choices[0].message.content||"");return JSON.stringify(v)}else return m.choices[0].message.content||""}catch(y){throw console.error("OpenAI Error:",y),new Error(`OpenAI Error: ${y.message}`)}}throw new Error("Invalid Provider Configuration")};async function Zr(t,e){let i=null;for(let o=0;o<=e.maxRetries;o++)try{return await Promise.race([t(),new Promise((r,f)=>setTimeout(()=>f(new Error("Task timeout")),e.timeoutMs))])}catch(a){i=a,o<e.maxRetries&&await new Promise(r=>setTimeout(r,e.retryDelayMs))}throw i||new Error("All retries exhausted")}const $1=`
You are the **Core Logic Engine** and **Narrative Director** for "Chronicles of the Persona".
Your role is to execute the game loop:
1. **Analyze Input**: Evaluate the player's choice against the current World State, Character Stats, and **Active Rules**.
2. **Apply Rules**: Check if any active rules (like "Murphy's Law" or "Equivalent Exchange") are triggered. 
   - If a rule triggers, you MUST apply its consequence (e.g., increase Stress, remove a resource).
   - You can also decide to ADD a new rule (e.g., "Wanted by Guards") or REMOVE an old one.
3. **Generate Output**: 
   - Write the narrative (Simplified Chinese).
   - Calculate numeric changes to stats (Stress, Credibility, Connections).
   - **IMPORTANT**: Report which rules were triggered this turn via the "triggeredRules" field. Each triggered rule must include its ID, title, and a brief reason explaining WHY it triggered based on the player's action.
   - Determine if the game ends (Victory or Death).

**Current Reality Mapping (Stats):**
- **Credibility ()**: < 3 means NPCs are hostile. 0 is Game Over (Exiled).
- **Stress ()**: > 7 means hallucinations/bad decisions. 10 is Game Over (Insanity).
- **Connections ()**: Currency for help. 0 means isolation.

**Output Constraints:**
- Language: **Simplified Chinese ()** ONLY.
- Style: Dark Fantasy, Tarot aesthetics, Gritty.
- Structure: JSON matching the schema.
`,J1={type:j.OBJECT,properties:{text:{type:j.STRING,description:"The narrative segment."},statUpdates:{type:j.OBJECT,properties:{credibility:{type:j.INTEGER,description:"Change amount, e.g., -1"},stress:{type:j.INTEGER,description:"Change amount, e.g., +2"},connections:{type:j.INTEGER,description:"Change amount, e.g., -1"}}},ruleUpdates:{type:j.OBJECT,properties:{add:{type:j.ARRAY,items:{type:j.OBJECT,properties:{id:{type:j.STRING},title:{type:j.STRING},type:{type:j.STRING,enum:["CONSTRAINT","BONUS","RISK","REALITY"]},description:{type:j.STRING},active:{type:j.BOOLEAN}}}},removeIds:{type:j.ARRAY,items:{type:j.STRING}}}},isGameOver:{type:j.BOOLEAN},gameSummary:{type:j.STRING,description:"Only if isGameOver is true."},triggeredRules:{type:j.ARRAY,description:"List of rules that triggered this turn with reasons.",items:{type:j.OBJECT,properties:{ruleId:{type:j.STRING,description:"The ID of the triggered rule"},ruleTitle:{type:j.STRING,description:"The title of the triggered rule"},reason:{type:j.STRING,description:"Brief explanation of WHY this rule triggered based on the player action"}}}},choices:{type:j.ARRAY,items:{type:j.OBJECT,properties:{id:{type:j.STRING},text:{type:j.STRING},consequence:{type:j.STRING},cost:{type:j.STRING},risk:{type:j.STRING}}}}}},Y1=async(t,e,i,o,a,r,f,p)=>{var _,T;const y=r>=f,m=`
    [GAME STATE]
    Turn: ${r} / ${f}
    Character: ${t.name} (${t.title}) - Weakness: ${t.weakness}
    Current Stats: Credibility=${i.credibility}, Stress=${i.stress}, Connections=${i.connections}
    
    [ACTIVE RULES REGISTRY]
    ${e.map(A=>`(ID: ${A.id}) ${A.title}: ${A.description}`).join(`
`)}
    
    [NARRATIVE CONTEXT]
    Story So Far: ${a}
    **Player Action**: "${o}"
    
    [DIRECTIVES]
    1. Based on the player action and active rules, determine what happens next.
    2. Did any rule trigger? If "Murphy's Law" is active and they tried a complex plan, fail it. You MUST report ALL triggered rules in "triggeredRules" with a brief reason for each.
    3. Update Stats: Did they get hurt? (Stress +). Did they offend someone? (Credibility -).
    4. **Rule Evolution**: If the story shifts significantly, you may Add a Rule (e.g., "Injury") or Remove one.
    5. ${y?"This is the CLIMAX. Ignore choices generation. Set 'isGameOver': true and provide a 'gameSummary'.":"Generate 3 distinct choices for the next step."}
  `,v=p||{provider:"gemini",gemini:{apiKey:""}};try{const A=await Nl(v,{prompt:m,systemInstruction:$1,jsonSchema:J1,jsonMode:!0}),x=JSON.parse(A);return{storyNode:{text:x.text||"...",choices:x.choices||[]},statUpdates:x.statUpdates||{},ruleUpdates:{add:((_=x.ruleUpdates)==null?void 0:_.add)||[],removeIds:((T=x.ruleUpdates)==null?void 0:T.removeIds)||[]},isGameOver:!!x.isGameOver,gameSummary:x.gameSummary,triggeredRules:x.triggeredRules||[]}}catch(A){return console.error("Gemini Engine Error",A),{storyNode:{text:"AI ",choices:[{id:"retry",text:"",consequence:""}]},statUpdates:{},ruleUpdates:{},isGameOver:!1}}},K1=`



1)  +  + //
2) 
3)  JSON
4)  title//
5) 


1) 
2) /()
3) 
4) ////
5) 


- 
-  150-260 
- 
`;async function X1(t,e,i){const o=`
[]
${i.character.name}${i.character.title}
${i.character.weakness}

[]
${i.turnCount}/${i.maxTurns}

[]
${i.activeRules.map(r=>`- ${r.title}: ${r.description}`).join(`
`)}

[]
${i.historySummary}

[]
${i.choiceText}

[]


`;return{narrativeText:(await Zr(()=>Nl({provider:t.provider,gemini:t.gemini,openai:t.openai},{prompt:o,systemInstruction:K1,jsonMode:!1},e),e)).trim()}}const Q1={type:j.OBJECT,properties:{statUpdates:{type:j.OBJECT,properties:{credibility:{type:j.INTEGER},stress:{type:j.INTEGER},connections:{type:j.INTEGER}},required:["credibility","stress","connections"]},statAnalysis:{type:j.ARRAY,items:{type:j.OBJECT,properties:{statKey:{type:j.STRING,enum:["credibility","stress","connections"]},newValue:{type:j.INTEGER},status:{type:j.STRING,enum:["safe","warning","triggered"]},threshold:{type:j.INTEGER},warningMessage:{type:j.STRING},reason:{type:j.STRING}},required:["statKey","newValue","status","warningMessage","reason"]}}},required:["statUpdates","statAnalysis"]},Z1=`




- credibility<3 <5 
- stress>8 >6 
- connections<2 <4 


1) 
2)  statUpdates  [-3, +3]
3) status  newValue 
4) warningMessage  reason 
5)  JSON
`;async function W1(t,e,i){const o=`
[]
${i.character.name}${i.character.title}
${i.character.weakness}

[]
${i.choiceText}

[]
${i.narrativeText}

[]
=${i.stats.credibility}, =${i.stats.stress}, =${i.stats.connections}

[]
${i.activeRules.map(r=>`- ${r.title}: ${r.description}`).join(`
`)}

[]
 statUpdates  statAnalysis
`,a=await Zr(()=>Nl({provider:t.provider,gemini:t.gemini,openai:t.openai},{prompt:o,systemInstruction:Z1,jsonSchema:Q1,jsonMode:!0},e),e);return JSON.parse(a)}const j1={type:j.OBJECT,properties:{triggeredRules:{type:j.ARRAY,items:{type:j.OBJECT,properties:{ruleId:{type:j.STRING},ruleTitle:{type:j.STRING},reason:{type:j.STRING}},required:["ruleId","ruleTitle","reason"]}},ruleUpdates:{type:j.OBJECT,properties:{activate:{type:j.ARRAY,items:{type:j.STRING}},deactivate:{type:j.ARRAY,items:{type:j.STRING}},add:{type:j.ARRAY,items:{type:j.OBJECT}},removeIds:{type:j.ARRAY,items:{type:j.STRING}}},required:["activate","deactivate","add","removeIds"]},ruleStatusMap:{type:j.OBJECT}},required:["triggeredRules","ruleUpdates","ruleStatusMap"]},eD=`




- triggered: 
- active_not_triggered: 
- inactive: 


1)  +  + 
2)  activate  deactivate
3)  add 
4) removeIds 
5) ruleStatusMap  id
6) reason 
7)  JSON
`;async function tD(t,e,i){const o=`
[]
${i.turnCount}

[]
${i.choiceText}

[]
${i.narrativeText}

[]
${i.rules.map(r=>`- id=${r.id}, title=${r.title}, active=${r.active}, desc=${r.description}`).join(`
`)}

[]
 ruleStatusMap
`,a=await Zr(()=>Nl({provider:t.provider,gemini:t.gemini,openai:t.openai},{prompt:o,systemInstruction:eD,jsonSchema:j1,jsonMode:!0},e),e);return JSON.parse(a)}const nD={type:j.OBJECT,properties:{choices:{type:j.ARRAY,items:{type:j.OBJECT,properties:{id:{type:j.STRING},text:{type:j.STRING},consequence:{type:j.STRING},cost:{type:j.STRING},risk:{type:j.STRING}},required:["id","text","consequence"]}}},required:["choices"]},iD=`



-  3 
- /
- //
- 


1) text10-30 
2) consequence
3)  cost/risk
4) 
5)  JSON
`;async function sD(t,e,i){const o=`
[]
${i.narrativeText}

[]
${i.historySummary}

[]
 3 

`,a=await Zr(()=>Nl({provider:t.provider,gemini:t.gemini,openai:t.openai},{prompt:o,systemInstruction:iD,jsonSchema:nD,jsonMode:!0},e),e);return oD(JSON.parse(a))}function oD(t){const e=[...t.choices||[]].slice(0,3);return e.some(i=>i.text.includes("")||i.text.includes("")||i.text.includes(""))||(e.length>=3?e[0]={id:e[0].id||"hold",text:"",consequence:"",risk:""}:e.push({id:"hold",text:"",consequence:"",risk:""})),{choices:e}}const u0=[{id:"retry",text:"",consequence:""},{id:"hold",text:"",consequence:"",risk:""},{id:"risk",text:"",consequence:""}];async function lD(t){var i,o,a,r,f,p;const e=t.config.tasks||rl;try{const m=(i=(await X1(t.config.provider,e.narrative,{character:t.character,choiceText:t.choiceText,historySummary:t.historySummary,activeRules:t.rules.filter(x=>x.active),turnCount:t.turnCount,maxTurns:t.maxTurns})).narrativeText)==null?void 0:i.trim();if(!m)throw new Error("Narrative task returned empty narrative text");const[v,_,T]=await Promise.all([W1(t.config.provider,e.realityMapping,{character:t.character,choiceText:t.choiceText,narrativeText:m,stats:t.realityStats,activeRules:t.rules.filter(x=>x.active)}).catch(()=>({statUpdates:{credibility:0,stress:0,connections:0},statAnalysis:[]})),tD(t.config.provider,e.worldRules,{choiceText:t.choiceText,narrativeText:m,rules:t.rules,turnCount:t.turnCount}).catch(()=>({triggeredRules:[],ruleUpdates:{activate:[],deactivate:[],add:[],removeIds:[]},ruleStatusMap:{}})),sD(t.config.provider,e.choices,{narrativeText:m,historySummary:t.historySummary}).catch(()=>({choices:u0}))]),A=t.turnCount>=t.maxTurns;return{engineResult:{storyNode:{text:m,choices:A?[]:(o=T.choices)!=null&&o.length?T.choices:u0},statUpdates:v.statUpdates||{credibility:0,stress:0,connections:0},ruleUpdates:{add:((a=_.ruleUpdates)==null?void 0:a.add)||[],removeIds:((r=_.ruleUpdates)==null?void 0:r.removeIds)||[],activate:((f=_.ruleUpdates)==null?void 0:f.activate)||[],deactivate:((p=_.ruleUpdates)==null?void 0:p.deactivate)||[]},triggeredRules:_.triggeredRules,isGameOver:A,gameSummary:A?"":void 0},realityAnalysis:v.statAnalysis||[],ruleStatusMap:_.ruleStatusMap||{}}}catch{return{engineResult:await Y1(t.character,t.rules.filter(m=>m.active),t.realityStats,t.choiceText,t.historySummary,t.turnCount,t.maxTurns,t.config.provider),realityAnalysis:[],ruleStatusMap:{}}}}const aD={credibility:"",stress:"",connections:""},rD={r2:[{statKey:"credibility",threshold:3,direction:"below",warningMessage:" NPC "},{statKey:"stress",threshold:8,direction:"above",warningMessage:""}],r3:[{statKey:"stress",threshold:null,direction:"none",warningMessage:""}],r6:[{statKey:"credibility",threshold:null,direction:"none",warningMessage:""}],r10:[{statKey:"connections",threshold:null,direction:"none",warningMessage:""}],r11:[{statKey:"stress",threshold:null,direction:"none",warningMessage:""}]},uD=(t,e)=>t.map(i=>{const o=e[i.statKey],a=i.threshold!==null?i.direction==="below"?o<i.threshold:o>i.threshold:!1;return{statKey:i.statKey,statLabel:aD[i.statKey],currentValue:o,threshold:i.threshold,direction:i.direction,isTriggered:a,warningMessage:i.warningMessage}}),cD=(t,e)=>t.map(i=>{const o=rD[i.id]??[],a=uD(o,e);return{rule:i,linkedStats:a,isAnyTriggered:a.some(r=>r.isTriggered)}}),fD=t=>{const e=new Map;return t.forEach(i=>{e.has(i.ruleId)||e.set(i.ruleId,i)}),Array.from(e.values())},dD=({activeRules:t,newStats:e,aiTriggeredRules:i})=>{const o=[...i],a=new Map(i.map(f=>[f.ruleId,f])),r=t.find(f=>f.id==="r2");return r&&!a.has("r2")&&(e.credibility<3?o.push({ruleId:"r2",ruleTitle:r.title,reason:` ${e.credibility} 3NPC `}):e.stress>8&&o.push({ruleId:"r2",ruleTitle:r.title,reason:` ${e.stress} 8`})),fD(o)},hD=()=>{const t=IC(),e=DC(),i=UC(),o=LC(),a=h0(),r=GC(),f=p0(),p=m0(),y=PC(),m=kC(),v=HC(),_=g0(),T=y0(),A=v0(),x=T0(),w=_0(),b=BC(),H=qC(),G=VC(),I=S0(),O=$C(),q=JC(),Q=YC(),$=KC(),fe=XC(),X=QC(),ie=ZC(),oe=WC(),Ce=jC(),Pe=eA(),Ge=iA(),Ke=nA(),V=oA(),Z=tA(),le=sA(),Re=lA(),ke=E0(),M=aA(),Y=rA(),W=We.useRef(null),[se,me]=We.useState(!1),[Ee,Ie]=We.useState(0),[yt,Qe]=We.useState(0),[Mi,Ii]=We.useState(null),ti=We.useMemo(()=>cD(i,r),[i,r]),Ml=We.useMemo(()=>new Map(ti.map(st=>[st.rule.id,st])),[ti]);We.useEffect(()=>{W.current&&(W.current.scrollTop=W.current.scrollHeight)},[o,a,m]),We.useEffect(()=>{v.length>0&&Qe(st=>st+1)},[v]);const In=st=>{O(st),ke(st.id)},oo=()=>{e&&Y(e)},lo=async(st,En)=>{var wt,hn;if(!e||!a)return;Ce(!0),Z(!0),Ke(!0),le(!0),Re(!0);const ve=o.map(Me=>Me.text).join(" ").slice(-1e3),je={provider:_,gemini:T?{apiKey:T}:void 0,openai:_==="openai"?A:void 0};let $e=null;try{const Me=await lD({character:e,rules:i,realityStats:r,choiceText:En,historySummary:ve,turnCount:f,maxTurns:p,config:{provider:je,tasks:w}});$e=Me.engineResult,Ge(Me.realityAnalysis),V(Me.ruleStatusMap)}finally{Z(!1),Ke(!1),le(!1),Re(!1),Ce(!1)}if(!$e)return;const Cn={...r},Ze={...r};$e.statUpdates.credibility&&(Ze.credibility+=$e.statUpdates.credibility),$e.statUpdates.stress&&(Ze.stress+=$e.statUpdates.stress),$e.statUpdates.connections&&(Ze.connections+=$e.statUpdates.connections),Ze.credibility=Math.max(0,Math.min(10,Ze.credibility)),Ze.stress=Math.max(0,Math.min(10,Ze.stress)),Ze.connections=Math.max(0,Math.min(10,Ze.connections));let bt=[...i];if((wt=$e.ruleUpdates.deactivate)!=null&&wt.length){const Me=new Set($e.ruleUpdates.deactivate);bt=bt.map(Ut=>Me.has(Ut.id)?{...Ut,active:!1}:Ut)}if((hn=$e.ruleUpdates.activate)!=null&&hn.length){const Me=new Set($e.ruleUpdates.activate);bt=bt.map(Ut=>Me.has(Ut.id)?{...Ut,active:!0}:Ut)}if($e.ruleUpdates.removeIds&&(bt=bt.filter(Me=>{var Ut;return!((Ut=$e.ruleUpdates.removeIds)!=null&&Ut.includes(Me.id))})),$e.ruleUpdates.add){const Me=new Set(bt.map(co=>co.id)),Ut=$e.ruleUpdates.add.filter(co=>!Me.has(co.id));bt=[...bt,...Ut]}let uo=$e.isGameOver,ni=$e.gameSummary||"";Ze.stress>=10&&(uo=!0,ni=ni||""),Ze.credibility<=0&&(uo=!0,ni=ni||"");const Dl=f;X(Ze),q(bt),$($e.storyNode),Q(Me=>[...Me,$e.storyNode]),ie(f+1);const Ul=dD({activeRules:bt.filter(Me=>Me.active),newStats:Ze,aiTriggeredRules:$e.triggeredRules||[]});Pe(Ul);const Di=a.text.length>80?`${a.text.slice(0,80)}`:a.text;fe(Me=>[...Me,{turn:Dl,sceneTextPreview:Di,chosenOptionText:En,chosenOptionId:st,triggeredRules:Ul,statSnapshot:Ze,statDelta:{credibility:Ze.credibility-Cn.credibility,stress:Ze.stress-Cn.stress,connections:Ze.connections-Cn.connections}}]),uo?(I(vn.GAME_OVER),oe(ni)):(Ie(Dl),me(!0))},Wr=()=>{M()},Il=()=>C.jsxs("div",{className:"h-screen w-full flex flex-col items-center bg-velvet-red relative overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle,transparent_20%,#000000_100%)] opacity-80 fixed"}),C.jsx("button",{onClick:()=>x(!0),className:"fixed top-6 right-6 z-30 p-4 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:C.jsx("i",{className:"fa-solid fa-cog text-xl group-hover:rotate-90 transition-transform duration-300"})}),C.jsxs("div",{className:"z-10 text-center mb-6 mt-6 shrink-0 animate-float",children:[C.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-gold-flow mb-2 drop-shadow-lg font-display",children:""}),C.jsx("p",{className:"text-paper text-base font-serif italic opacity-80 max-w-2xl mx-auto border-b border-gold pb-3",children:'""'})]}),C.jsx("div",{className:"z-20 flex flex-col items-center gap-3 mb-4 shrink-0",children:C.jsxs("button",{disabled:!e,onClick:oo,className:`
                px-10 py-3 text-lg font-bold font-display tracking-widest uppercase transition-all duration-500
                border-2 border-gold relative overflow-hidden group shadow-2xl
                ${e?"bg-velvet-red text-gold shadow-[0_0_30px_#D4AF37] hover:scale-110":"bg-gray-900 text-gray-600 cursor-not-allowed border-gray-700"}
              `,children:[C.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e?` ${e.name}`:"",C.jsx("i",{className:"fa-solid fa-scroll"})]}),C.jsx("div",{className:"absolute inset-0 bg-gold transform -translate-x-full group-hover:translate-x-0 transition-transform duration-500 opacity-20"})]})}),C.jsx("div",{className:"z-10 flex-1 overflow-y-auto w-full px-4 pb-6",children:C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-[1600px] mx-auto",children:c0.map(st=>C.jsx("div",{className:"flex justify-center",children:C.jsx(Xg,{character:st,isSelected:(e==null?void 0:e.id)===st.id,onSelect:In})},st.id))})})]}),ao=()=>C.jsxs("div",{className:"h-screen w-full bg-black flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-20"}),C.jsx("button",{onClick:()=>x(!0),className:"fixed top-6 right-6 z-30 p-4 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:C.jsx("i",{className:"fa-solid fa-cog text-xl group-hover:rotate-90 transition-transform duration-300"})}),C.jsxs("div",{className:"z-10 max-w-2xl text-center border-[6px] border-double border-gold p-12 bg-[#1a0f0f] shadow-[0_0_100px_rgba(139,0,0,0.5)] transform animate-fade-in-up",children:[C.jsx("h1",{className:"text-6xl font-display text-velvet-red mb-6 uppercase tracking-widest",children:f>=p?"":""}),C.jsx("div",{className:"w-full h-1 bg-gold mb-8"}),C.jsxs("div",{className:"mb-8 font-serif text-2xl text-paper italic leading-relaxed",children:['"',y||"...",'"']}),C.jsxs("div",{className:"grid grid-cols-3 gap-8 mb-12 opacity-80",children:[C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-gold font-display text-3xl",children:r.credibility})]}),C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-gold font-display text-3xl",children:10-r.stress})]}),C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-gold font-display text-3xl",children:f})]})]}),C.jsx("button",{onClick:Wr,className:"px-8 py-3 bg-gold text-black font-bold hover:bg-white transition-colors duration-300 font-display uppercase tracking-widest",children:""})]})]}),ro=()=>{if(!a)return null;const st=ve=>["I","II","III","IV","V","VI","VII","VIII","IX","X"][ve-1]||ve,En=new Map;return v.forEach(ve=>En.set(ve.ruleId,ve)),C.jsxs("div",{className:"h-screen w-full bg-[#1a0505] flex flex-col md:flex-row text-paper overflow-hidden relative",children:[C.jsx("button",{onClick:()=>x(!0),className:"fixed top-6 right-6 z-30 p-3 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:C.jsx("i",{className:"fa-solid fa-cog text-lg group-hover:rotate-90 transition-transform duration-300"})}),C.jsx("div",{className:"hidden md:flex flex-col w-1/4 bg-[#0f0303] border-r-4 border-brown-600 relative shadow-2xl z-10 h-screen overflow-y-auto scrollbar-hide",children:C.jsxs("div",{className:"p-6",children:[C.jsx("h2",{className:"text-gold font-display text-xl mb-4 border-b border-brown pb-2 text-center",children:""}),e&&C.jsx("div",{className:"flex justify-center transform scale-[0.6] origin-top mb-[-120px]",children:C.jsx(Xg,{character:e,isSelected:!0})}),C.jsxs("div",{className:"mt-20",children:[C.jsxs("h2",{className:"text-gold font-display text-lg mb-3 border-b border-brown pb-2 flex items-center gap-2",children:[C.jsx("i",{className:"fa-solid fa-map text-sm"}),""]}),C.jsx(ey,{rules:i,realityStats:r,parsedMappings:ti,triggeredMap:En,aiAnalysis:b,loading:H})]})]})}),C.jsxs("div",{className:"flex-1 flex flex-col relative h-screen bg-paper/5",children:[C.jsxs("div",{className:"shrink-0 h-12 bg-gradient-to-b from-black to-transparent z-20 flex items-center justify-center relative",children:[C.jsxs("span",{className:"text-gold opacity-50 font-display tracking-[0.5em] text-sm",children:["ACT ",st(f)," / ",st(p)]}),C.jsx("button",{onClick:()=>I(vn.DECISION_MAP),className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 border border-gold/60 text-gold rounded-full hover:bg-gold/10 transition-colors",title:"",children:C.jsx("i",{className:"fa-solid fa-route text-sm"})})]}),C.jsx("div",{className:"mx-4 md:hidden mt-3",children:C.jsx(ey,{rules:i,realityStats:r,parsedMappings:ti,triggeredMap:En,aiAnalysis:b,loading:H,isMobile:!0})}),v.length>0&&!m&&C.jsx("div",{className:"shrink-0 mx-4 md:mx-8 mb-2 p-2 bg-yellow-900/20 border border-yellow-600/40 rounded-lg",children:C.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[C.jsxs("span",{className:"text-yellow-400 text-xs font-bold flex items-center gap-1",children:[C.jsx("i",{className:"fa-solid fa-bolt text-[10px]"}),":"]}),v.map((ve,je)=>C.jsxs("span",{className:"group relative inline-flex items-center text-xs bg-yellow-800/40 text-yellow-200 px-2 py-0.5 rounded border border-yellow-600/30 cursor-help",onMouseEnter:()=>Ii(ve.ruleId),onMouseLeave:()=>Ii(null),children:[ve.ruleTitle,C.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-[#1a0505] border border-yellow-500/50 rounded text-[10px] text-paper leading-snug opacity-0 group-hover:opacity-100 transition-opacity duration-200 delay-150 z-50 shadow-xl",children:[C.jsx("span",{className:"text-yellow-400 font-bold block mb-0.5",children:":"}),ve.reason,C.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-[#1a0505] border-r border-b border-yellow-500/50 transform rotate-45"})]})]},je))]})}),C.jsxs("div",{ref:W,className:"flex-1 overflow-y-auto px-6 md:px-12 py-4 scrollbar-hide scroll-smooth",children:[o.slice(0,-1).map((ve,je)=>C.jsx("div",{className:"mb-8 opacity-50 text-sm font-serif border-l-4 border-brown-600 pl-4 italic hover:opacity-100 transition-opacity",children:C.jsx("p",{children:ve.text})},je)),C.jsxs("div",{className:"animate-fade-in-up pb-8",children:[C.jsxs("div",{className:"flex items-center justify-center mb-6 text-gold opacity-80",children:[C.jsx("div",{className:"h-[1px] w-12 bg-gold"}),C.jsx("i",{className:"fa-solid fa-diamond text-sm mx-4 animate-spin-slow"}),C.jsx("span",{className:"uppercase tracking-[0.3em] text-sm font-display",children:f===1?"":""}),C.jsx("i",{className:"fa-solid fa-diamond text-sm mx-4 animate-spin-slow"}),C.jsx("div",{className:"h-[1px] w-12 bg-gold"})]}),C.jsx("p",{className:"font-serif text-xl md:text-2xl leading-relaxed mb-8 drop-shadow-md text-justify text-paper first-letter:text-5xl first-letter:font-display first-letter:text-gold first-letter:mr-2 first-letter:float-left",children:a.text}),m?C.jsxs("div",{className:"flex flex-col justify-center items-center py-8 gap-3",children:[C.jsxs("div",{className:"relative",children:[C.jsx("i",{className:"fa-solid fa-sun fa-spin text-5xl text-gold opacity-20"}),C.jsx("i",{className:"fa-solid fa-eye absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xl text-gold animate-pulse"})]}),C.jsx("span",{className:"font-serif italic text-lg text-stone-gray animate-pulse",children:"..."}),C.jsxs("div",{className:"text-xs text-brown font-mono mt-1",children:["Checking: ",i.filter(ve=>ve.active).map(ve=>ve.title).slice(0,3).join(", "),"..."]})]}):C.jsx("div",{className:"grid gap-4 max-w-3xl mx-auto",children:a.choices.map(ve=>C.jsxs("button",{onClick:()=>lo(ve.id,ve.text),className:"group relative p-5 bg-[#2c1810] border-2 border-brown text-left hover:bg-[#3d2216] hover:border-gold transition-all duration-300 rounded-xl overflow-hidden shadow-lg",children:[C.jsx("div",{className:"absolute inset-0 bg-gold opacity-0 group-hover:opacity-5 transition-opacity"}),C.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-gold transform scale-y-0 group-hover:scale-y-100 transition-transform origin-bottom duration-300"}),C.jsxs("div",{className:"flex items-start gap-3",children:[C.jsx("div",{className:"mt-1 text-gold opacity-50 group-hover:opacity-100",children:C.jsx("i",{className:"fa-solid fa-chevron-right"})}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-bold text-lg mb-1.5 group-hover:text-gold transition-colors font-display",children:ve.text}),C.jsxs("div",{className:"flex flex-wrap gap-3 text-sm opacity-70 font-serif",children:[ve.cost&&C.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[C.jsx("i",{className:"fa-solid fa-coins"})," ",ve.cost]}),ve.risk&&C.jsxs("span",{className:"text-orange-400 flex items-center gap-1",children:[C.jsx("i",{className:"fa-solid fa-triangle-exclamation"})," ",ve.risk]}),C.jsx("span",{className:"text-stone-gray italic border-l border-stone-gray pl-3",children:ve.consequence})]})]})]})]},ve.id))})]})]})]}),C.jsxs("div",{className:"hidden md:flex flex-col w-1/4 bg-[#140404] border-l-4 border-brown-600 p-4 shadow-2xl z-10 h-screen",children:[C.jsxs("h2",{className:"text-gold font-display text-lg mb-4 border-b border-brown pb-2 flex justify-between items-center shrink-0",children:[C.jsx("span",{children:""}),C.jsxs("div",{className:"flex items-center gap-2",children:[v.length>0&&C.jsxs("span",{className:"text-[10px] bg-yellow-600 px-1.5 py-0.5 rounded text-black font-bold border border-yellow-400",children:[C.jsx("i",{className:"fa-solid fa-bolt mr-0.5"}),v.length," "]}),C.jsxs("span",{className:"text-xs bg-velvet-red px-2 py-0.5 rounded text-gold border border-gold",children:[i.filter(ve=>ve.active).length," "]})]})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto pr-1 scrollbar-hide space-y-3",children:[[...i].sort((ve,je)=>{const $e=Cn=>{const Ze=G[Cn.id];return Ze==="triggered"||En.has(Cn.id)?3:Ze==="active_not_triggered"||Cn.active?2:1};return $e(je)-$e(ve)}).map(ve=>C.jsx(TC,{rule:ve,triggeredInfo:En.get(ve.id),parsedMapping:Ml.get(ve.id),autoShowToken:yt,isHighlighted:Mi===ve.id,statusOverride:G[ve.id]},ve.id)),i.some(ve=>!ve.active)&&C.jsx("div",{className:"text-center p-3 border border-dashed border-brown-600 opacity-50 rounded-lg",children:C.jsx("p",{className:"text-xs text-stone-gray",children:"..."})})]}),C.jsxs("div",{className:"mt-4 p-3 bg-brown-800/20 rounded border border-brown text-center shrink-0",children:[C.jsx("i",{className:"fa-solid fa-gear text-xl text-brown mb-1 animate-spin-slow opacity-50"}),C.jsx("p",{className:"text-[10px] text-stone-gray italic",children:'""'}),C.jsxs("button",{onClick:M,className:"mt-2 text-xs text-paper/60 hover:text-gold transition-colors duration-300 underline underline-offset-2 decoration-dotted",children:[C.jsx("i",{className:"fa-solid fa-rotate-right mr-1"}),""]})]})]})]})};return C.jsxs(C.Fragment,{children:[t===vn.SELECTION&&Il(),t===vn.GAMEPLAY&&ro(),t===vn.DECISION_MAP&&C.jsx(mA,{}),t===vn.GAME_OVER&&ao(),C.jsx(gA,{isOpen:se,turnNumber:Ee,onViewDecision:()=>I(vn.DECISION_MAP),onDismiss:()=>me(!1)}),C.jsx(pA,{})]})},pD=document.getElementById("root"),mD=_C.createRoot(pD);mD.render(C.jsx(hD,{}));
