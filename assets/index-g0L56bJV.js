(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function i(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=i(a);fetch(a.href,r)}})();function cA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hf={exports:{}},ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function fA(){if(Hg)return ll;Hg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,a,r){var f=null;if(r!==void 0&&(f=""+r),a.key!==void 0&&(f=""+a.key),"key"in a){r={};for(var p in a)p!=="key"&&(r[p]=a[p])}else r=a;return a=r.ref,{$$typeof:t,type:o,key:f,ref:a!==void 0?a:null,props:r}}return ll.Fragment=e,ll.jsx=i,ll.jsxs=i,ll}var qg;function dA(){return qg||(qg=1,hf.exports=fA()),hf.exports}var E=dA(),pf={exports:{}},al={},mf={exports:{}},gf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function hA(){return Bg||(Bg=1,(function(t){function e(V,W){var ae=V.length;V.push(W);e:for(;0<ae;){var we=ae-1>>>1,Ge=V[we];if(0<a(Ge,W))V[we]=W,V[ae]=Ge,ae=we;else break e}}function i(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var W=V[0],ae=V.pop();if(ae!==W){V[0]=ae;e:for(var we=0,Ge=V.length,M=Ge>>>1;we<M;){var Y=2*(we+1)-1,j=V[Y],oe=Y+1,me=V[oe];if(0>a(j,ae))oe<Ge&&0>a(me,j)?(V[we]=me,V[oe]=ae,we=oe):(V[we]=j,V[Y]=ae,we=Y);else if(oe<Ge&&0>a(me,ae))V[we]=me,V[oe]=ae,we=oe;else break e}}return W}function a(V,W){var ae=V.sortIndex-W.sortIndex;return ae!==0?ae:V.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var f=Date,p=f.now();t.unstable_now=function(){return f.now()-p}}var y=[],m=[],v=1,_=null,T=3,A=!1,x=!1,b=!1,w=!1,q=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function k(V){for(var W=i(m);W!==null;){if(W.callback===null)o(m);else if(W.startTime<=V)o(m),W.sortIndex=W.expirationTime,e(y,W);else break;W=i(m)}}function L(V){if(b=!1,k(V),!x)if(i(y)!==null)x=!0,Z||(Z=!0,Ee());else{var W=i(m);W!==null&&Ye(L,W.startTime-V)}}var Z=!1,$=-1,K=5,X=-1;function se(){return w?!0:!(t.unstable_now()-X<K)}function le(){if(w=!1,Z){var V=t.unstable_now();X=V;var W=!0;try{e:{x=!1,b&&(b=!1,G($),$=-1),A=!0;var ae=T;try{t:{for(k(V),_=i(y);_!==null&&!(_.expirationTime>V&&se());){var we=_.callback;if(typeof we=="function"){_.callback=null,T=_.priorityLevel;var Ge=we(_.expirationTime<=V);if(V=t.unstable_now(),typeof Ge=="function"){_.callback=Ge,k(V),W=!0;break t}_===i(y)&&o(y),k(V)}else o(y);_=i(y)}if(_!==null)W=!0;else{var M=i(m);M!==null&&Ye(L,M.startTime-V),W=!1}}break e}finally{_=null,T=ae,A=!1}W=void 0}}finally{W?Ee():Z=!1}}}var Ee;if(typeof H=="function")Ee=function(){H(le)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Le=Oe.port2;Oe.port1.onmessage=le,Ee=function(){Le.postMessage(null)}}else Ee=function(){q(le,0)};function Ye(V,W){$=q(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_next=function(V){switch(T){case 1:case 2:case 3:var W=3;break;default:W=T}var ae=T;T=W;try{return V()}finally{T=ae}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ae=T;T=V;try{return W()}finally{T=ae}},t.unstable_scheduleCallback=function(V,W,ae){var we=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?we+ae:we):ae=we,V){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=ae+Ge,V={id:v++,callback:W,priorityLevel:V,startTime:ae,expirationTime:Ge,sortIndex:-1},ae>we?(V.sortIndex=ae,e(m,V),i(y)===null&&V===i(m)&&(b?(G($),$=-1):b=!0,Ye(L,ae-we))):(V.sortIndex=Ge,e(y,V),x||A||(x=!0,Z||(Z=!0,Ee()))),V},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(V){var W=T;return function(){var ae=T;T=W;try{return V.apply(this,arguments)}finally{T=ae}}}})(gf)),gf}var Vg;function pA(){return Vg||(Vg=1,mf.exports=hA()),mf.exports}var yf={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function mA(){if(zg)return ye;zg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function q(M,Y,j){this.props=M,this.context=Y,this.refs=w,this.updater=j||x}q.prototype.isReactComponent={},q.prototype.setState=function(M,Y){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Y,"setState")},q.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function G(){}G.prototype=q.prototype;function H(M,Y,j){this.props=M,this.context=Y,this.refs=w,this.updater=j||x}var k=H.prototype=new G;k.constructor=H,b(k,q.prototype),k.isPureReactComponent=!0;var L=Array.isArray;function Z(){}var $={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function X(M,Y,j){var oe=j.ref;return{$$typeof:t,type:M,key:Y,ref:oe!==void 0?oe:null,props:j}}function se(M,Y){return X(M.type,Y,M.props)}function le(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function Ee(M){var Y={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(j){return Y[j]})}var Oe=/\/+/g;function Le(M,Y){return typeof M=="object"&&M!==null&&M.key!=null?Ee(""+M.key):Y.toString(36)}function Ye(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Z,Z):(M.status="pending",M.then(function(Y){M.status==="pending"&&(M.status="fulfilled",M.value=Y)},function(Y){M.status==="pending"&&(M.status="rejected",M.reason=Y)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function V(M,Y,j,oe,me){var Te=typeof M;(Te==="undefined"||Te==="boolean")&&(M=null);var Ne=!1;if(M===null)Ne=!0;else switch(Te){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(M.$$typeof){case t:case e:Ne=!0;break;case v:return Ne=M._init,V(Ne(M._payload),Y,j,oe,me)}}if(Ne)return me=me(M),Ne=oe===""?"."+Le(M,0):oe,L(me)?(j="",Ne!=null&&(j=Ne.replace(Oe,"$&/")+"/"),V(me,Y,j,"",function(ti){return ti})):me!=null&&(le(me)&&(me=se(me,j+(me.key==null||M&&M.key===me.key?"":(""+me.key).replace(Oe,"$&/")+"/")+Ne)),Y.push(me)),1;Ne=0;var dt=oe===""?".":oe+":";if(L(M))for(var Qe=0;Qe<M.length;Qe++)oe=M[Qe],Te=dt+Le(oe,Qe),Ne+=V(oe,Y,j,Te,me);else if(Qe=A(M),typeof Qe=="function")for(M=Qe.call(M),Qe=0;!(oe=M.next()).done;)oe=oe.value,Te=dt+Le(oe,Qe++),Ne+=V(oe,Y,j,Te,me);else if(Te==="object"){if(typeof M.then=="function")return V(Ye(M),Y,j,oe,me);throw Y=String(M),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function W(M,Y,j){if(M==null)return M;var oe=[],me=0;return V(M,oe,"","",function(Te){return Y.call(j,Te,me++)}),oe}function ae(M){if(M._status===-1){var Y=M._result;Y=Y(),Y.then(function(j){(M._status===0||M._status===-1)&&(M._status=1,M._result=j)},function(j){(M._status===0||M._status===-1)&&(M._status=2,M._result=j)}),M._status===-1&&(M._status=0,M._result=Y)}if(M._status===1)return M._result.default;throw M._result}var we=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ge={map:W,forEach:function(M,Y,j){W(M,function(){Y.apply(this,arguments)},j)},count:function(M){var Y=0;return W(M,function(){Y++}),Y},toArray:function(M){return W(M,function(Y){return Y})||[]},only:function(M){if(!le(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return ye.Activity=_,ye.Children=Ge,ye.Component=q,ye.Fragment=i,ye.Profiler=a,ye.PureComponent=H,ye.StrictMode=o,ye.Suspense=y,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,ye.__COMPILER_RUNTIME={__proto__:null,c:function(M){return $.H.useMemoCache(M)}},ye.cache=function(M){return function(){return M.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(M,Y,j){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var oe=b({},M.props),me=M.key;if(Y!=null)for(Te in Y.key!==void 0&&(me=""+Y.key),Y)!K.call(Y,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&Y.ref===void 0||(oe[Te]=Y[Te]);var Te=arguments.length-2;if(Te===1)oe.children=j;else if(1<Te){for(var Ne=Array(Te),dt=0;dt<Te;dt++)Ne[dt]=arguments[dt+2];oe.children=Ne}return X(M.type,me,oe)},ye.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:r,_context:M},M},ye.createElement=function(M,Y,j){var oe,me={},Te=null;if(Y!=null)for(oe in Y.key!==void 0&&(Te=""+Y.key),Y)K.call(Y,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(me[oe]=Y[oe]);var Ne=arguments.length-2;if(Ne===1)me.children=j;else if(1<Ne){for(var dt=Array(Ne),Qe=0;Qe<Ne;Qe++)dt[Qe]=arguments[Qe+2];me.children=dt}if(M&&M.defaultProps)for(oe in Ne=M.defaultProps,Ne)me[oe]===void 0&&(me[oe]=Ne[oe]);return X(M,Te,me)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(M){return{$$typeof:p,render:M}},ye.isValidElement=le,ye.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:ae}},ye.memo=function(M,Y){return{$$typeof:m,type:M,compare:Y===void 0?null:Y}},ye.startTransition=function(M){var Y=$.T,j={};$.T=j;try{var oe=M(),me=$.S;me!==null&&me(j,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(Z,we)}catch(Te){we(Te)}finally{Y!==null&&j.types!==null&&(Y.types=j.types),$.T=Y}},ye.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},ye.use=function(M){return $.H.use(M)},ye.useActionState=function(M,Y,j){return $.H.useActionState(M,Y,j)},ye.useCallback=function(M,Y){return $.H.useCallback(M,Y)},ye.useContext=function(M){return $.H.useContext(M)},ye.useDebugValue=function(){},ye.useDeferredValue=function(M,Y){return $.H.useDeferredValue(M,Y)},ye.useEffect=function(M,Y){return $.H.useEffect(M,Y)},ye.useEffectEvent=function(M){return $.H.useEffectEvent(M)},ye.useId=function(){return $.H.useId()},ye.useImperativeHandle=function(M,Y,j){return $.H.useImperativeHandle(M,Y,j)},ye.useInsertionEffect=function(M,Y){return $.H.useInsertionEffect(M,Y)},ye.useLayoutEffect=function(M,Y){return $.H.useLayoutEffect(M,Y)},ye.useMemo=function(M,Y){return $.H.useMemo(M,Y)},ye.useOptimistic=function(M,Y){return $.H.useOptimistic(M,Y)},ye.useReducer=function(M,Y,j){return $.H.useReducer(M,Y,j)},ye.useRef=function(M){return $.H.useRef(M)},ye.useState=function(M){return $.H.useState(M)},ye.useSyncExternalStore=function(M,Y,j){return $.H.useSyncExternalStore(M,Y,j)},ye.useTransition=function(){return $.H.useTransition()},ye.version="19.2.4",ye}var Fg;function cd(){return Fg||(Fg=1,yf.exports=mA()),yf.exports}var vf={exports:{}},Rt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function gA(){if($g)return Rt;$g=1;var t=cd();function e(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function r(y,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:y,containerInfo:m,implementation:v}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Rt.createPortal=function(y,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return r(y,m,null,v)},Rt.flushSync=function(y){var m=f.T,v=o.p;try{if(f.T=null,o.p=2,y)return y()}finally{f.T=m,o.p=v,o.d.f()}},Rt.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(y,m))},Rt.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},Rt.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:A}):v==="script"&&o.d.X(y,{crossOrigin:_,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Rt.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);o.d.M(y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(y)},Rt.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin);o.d.L(y,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Rt.preloadModule=function(y,m){if(typeof y=="string")if(m){var v=p(m.as,m.crossOrigin);o.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(y)},Rt.requestFormReset=function(y){o.d.r(y)},Rt.unstable_batchedUpdates=function(y,m){return y(m)},Rt.useFormState=function(y,m,v){return f.H.useFormState(y,m,v)},Rt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Rt.version="19.2.4",Rt}var Jg;function yA(){if(Jg)return vf.exports;Jg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vf.exports=gA(),vf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function vA(){if(Yg)return al;Yg=1;var t=pA(),e=cd(),i=yA();function o(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function r(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function f(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function y(n){if(r(n)!==n)throw Error(o(188))}function m(n){var s=n.alternate;if(!s){if(s=r(n),s===null)throw Error(o(188));return s!==n?null:n}for(var l=n,u=s;;){var h=l.return;if(h===null)break;var g=h.alternate;if(g===null){if(u=h.return,u!==null){l=u;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===l)return y(h),n;if(g===u)return y(h),s;g=g.sibling}throw Error(o(188))}if(l.return!==u.return)l=h,u=g;else{for(var S=!1,C=h.child;C;){if(C===l){S=!0,l=h,u=g;break}if(C===u){S=!0,u=h,l=g;break}C=C.sibling}if(!S){for(C=g.child;C;){if(C===l){S=!0,l=g,u=h;break}if(C===u){S=!0,u=g,l=h;break}C=C.sibling}if(!S)throw Error(o(189))}}if(l.alternate!==u)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),H=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function Ee(n){return n===null||typeof n!="object"?null:(n=le&&n[le]||n["@@iterator"],typeof n=="function"?n:null)}var Oe=Symbol.for("react.client.reference");function Le(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Oe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case q:return"Profiler";case w:return"StrictMode";case L:return"Suspense";case Z:return"SuspenseList";case X:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case H:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case k:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $:return s=n.displayName||null,s!==null?s:Le(n.type)||"Memo";case K:s=n._payload,n=n._init;try{return Le(n(s))}catch{}}return null}var Ye=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},we=[],Ge=-1;function M(n){return{current:n}}function Y(n){0>Ge||(n.current=we[Ge],we[Ge]=null,Ge--)}function j(n,s){Ge++,we[Ge]=n.current,n.current=s}var oe=M(null),me=M(null),Te=M(null),Ne=M(null);function dt(n,s){switch(j(Te,s),j(me,n),j(oe,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?rg(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=rg(s),n=ug(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Y(oe),j(oe,n)}function Qe(){Y(oe),Y(me),Y(Te)}function ti(n){n.memoizedState!==null&&j(Ne,n);var s=oe.current,l=ug(s,n.type);s!==l&&(j(me,n),j(oe,l))}function Di(n){me.current===n&&(Y(oe),Y(me)),Ne.current===n&&(Y(Ne),nl._currentValue=ae)}var ro,Ui;function jt(n){if(ro===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);ro=s&&s[1]||"",Ui=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ro+n+Ui}var ls=!1;function uo(n,s){if(!n||ls)return"";ls=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(B){var P=B}Reflect.construct(n,[],J)}else{try{J.call()}catch(B){P=B}n.call(J.prototype)}}else{try{throw Error()}catch(B){P=B}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(B){if(B&&P&&typeof B.stack=="string")return[B.stack,P.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),S=g[0],C=g[1];if(S&&C){var R=S.split(`
`),U=C.split(`
`);for(h=u=0;u<R.length&&!R[u].includes("DetermineComponentFrameRoot");)u++;for(;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;if(u===R.length||h===U.length)for(u=R.length-1,h=U.length-1;1<=u&&0<=h&&R[u]!==U[h];)h--;for(;1<=u&&0<=h;u--,h--)if(R[u]!==U[h]){if(u!==1||h!==1)do if(u--,h--,0>h||R[u]!==U[h]){var z=`
`+R[u].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=u&&0<=h);break}}}finally{ls=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?jt(l):""}function Wr(n,s){switch(n.tag){case 26:case 27:case 5:return jt(n.type);case 16:return jt("Lazy");case 13:return n.child!==s&&s!==null?jt("Suspense Fallback"):jt("Suspense");case 19:return jt("SuspenseList");case 0:case 15:return uo(n.type,!1);case 11:return uo(n.type.render,!1);case 1:return uo(n.type,!0);case 31:return jt("Activity");default:return""}}function Ul(n){try{var s="",l=null;do s+=Wr(n,l),l=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var co=Object.prototype.hasOwnProperty,fo=t.unstable_scheduleCallback,ho=t.unstable_cancelCallback,jr=t.unstable_shouldYield,ht=t.unstable_requestPaint,Ze=t.unstable_now,Pe=t.unstable_getCurrentPriorityLevel,In=t.unstable_ImmediatePriority,Ke=t.unstable_UserBlockingPriority,ni=t.unstable_NormalPriority,rt=t.unstable_LowPriority,Ut=t.unstable_IdlePriority,po=t.log,Li=t.unstable_setDisableYieldValue,ii=null,bt=null;function An(n){if(typeof po=="function"&&Li(n),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(ii,n)}catch{}}var wt=Math.clz32?Math.clz32:Lt,Ll=Math.log,et=Math.LN2;function Lt(n){return n>>>=0,n===0?32:31-(Ll(n)/et|0)|0}var si=256,Ol=262144,Gl=4194304;function Oi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Pl(n,s,l){var u=n.pendingLanes;if(u===0)return 0;var h=0,g=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var C=u&134217727;return C!==0?(u=C&~g,u!==0?h=Oi(u):(S&=C,S!==0?h=Oi(S):l||(l=C&~n,l!==0&&(h=Oi(l))))):(C=u&~g,C!==0?h=Oi(C):S!==0?h=Oi(S):l||(l=u&~n,l!==0&&(h=Oi(l)))),h===0?0:s!==0&&s!==h&&(s&g)===0&&(g=h&-h,l=s&-s,g>=l||g===32&&(l&4194048)!==0)?s:h}function mo(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function ZS(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zd(){var n=Gl;return Gl<<=1,(Gl&62914560)===0&&(Gl=4194304),n}function eu(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function go(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function WS(n,s,l,u,h,g){var S=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var C=n.entanglements,R=n.expirationTimes,U=n.hiddenUpdates;for(l=S&~l;0<l;){var z=31-wt(l),J=1<<z;C[z]=0,R[z]=-1;var P=U[z];if(P!==null)for(U[z]=null,z=0;z<P.length;z++){var B=P[z];B!==null&&(B.lane&=-536870913)}l&=~J}u!==0&&Fd(n,u,0),g!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=g&~(S&~s))}function Fd(n,s,l){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-wt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|l&261930}function $d(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var u=31-wt(l),h=1<<u;h&s|n[u]&s&&(n[u]|=s),l&=~h}}function Jd(n,s){var l=s&-s;return l=(l&42)!==0?1:tu(l),(l&(n.suspendedLanes|s))!==0?0:l}function tu(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function nu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Yd(){var n=W.p;return n!==0?n:(n=window.event,n===void 0?32:Dg(n.type))}function Kd(n,s){var l=W.p;try{return W.p=n,s()}finally{W.p=l}}var oi=Math.random().toString(36).slice(2),vt="__reactFiber$"+oi,Ot="__reactProps$"+oi,as="__reactContainer$"+oi,iu="__reactEvents$"+oi,jS="__reactListeners$"+oi,eT="__reactHandles$"+oi,Xd="__reactResources$"+oi,yo="__reactMarker$"+oi;function su(n){delete n[vt],delete n[Ot],delete n[iu],delete n[jS],delete n[eT]}function rs(n){var s=n[vt];if(s)return s;for(var l=n.parentNode;l;){if(s=l[as]||l[vt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=gg(n);n!==null;){if(l=n[vt])return l;n=gg(n)}return s}n=l,l=n.parentNode}return null}function us(n){if(n=n[vt]||n[as]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function vo(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(o(33))}function cs(n){var s=n[Xd];return s||(s=n[Xd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function pt(n){n[yo]=!0}var Qd=new Set,Zd={};function Gi(n,s){fs(n,s),fs(n+"Capture",s)}function fs(n,s){for(Zd[n]=s,n=0;n<s.length;n++)Qd.add(s[n])}var tT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wd={},jd={};function nT(n){return co.call(jd,n)?!0:co.call(Wd,n)?!1:tT.test(n)?jd[n]=!0:(Wd[n]=!0,!1)}function kl(n,s,l){if(nT(s))if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+l)}}function Hl(n,s,l){if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+l)}}function Dn(n,s,l,u){if(u===null)n.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(s,l,""+u)}}function en(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function eh(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function iT(n,s,l){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var h=u.get,g=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(S){l=""+S,g.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ou(n){if(!n._valueTracker){var s=eh(n)?"checked":"value";n._valueTracker=iT(n,s,""+n[s])}}function th(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return n&&(u=eh(n)?n.checked?"true":"false":n.value),n=u,n!==l?(s.setValue(n),!0):!1}function ql(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var sT=/[\n"\\]/g;function tn(n){return n.replace(sT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function lu(n,s,l,u,h,g,S,C){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),s!=null?S==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+en(s)):n.value!==""+en(s)&&(n.value=""+en(s)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),s!=null?au(n,S,en(s)):l!=null?au(n,S,en(l)):u!=null&&n.removeAttribute("value"),h==null&&g!=null&&(n.defaultChecked=!!g),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+en(C):n.removeAttribute("name")}function nh(n,s,l,u,h,g,S,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){ou(n);return}l=l!=null?""+en(l):"",s=s!=null?""+en(s):l,C||s===n.value||(n.value=s),n.defaultValue=s}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=C?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),ou(n)}function au(n,s,l){s==="number"&&ql(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function ds(n,s,l,u){if(n=n.options,s){s={};for(var h=0;h<l.length;h++)s["$"+l[h]]=!0;for(l=0;l<n.length;l++)h=s.hasOwnProperty("$"+n[l].value),n[l].selected!==h&&(n[l].selected=h),h&&u&&(n[l].defaultSelected=!0)}else{for(l=""+en(l),s=null,h=0;h<n.length;h++){if(n[h].value===l){n[h].selected=!0,u&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function ih(n,s,l){if(s!=null&&(s=""+en(s),s!==n.value&&(n.value=s),l==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=l!=null?""+en(l):""}function sh(n,s,l,u){if(s==null){if(u!=null){if(l!=null)throw Error(o(92));if(Ye(u)){if(1<u.length)throw Error(o(93));u=u[0]}l=u}l==null&&(l=""),s=l}l=en(s),n.defaultValue=l,u=n.textContent,u===l&&u!==""&&u!==null&&(n.value=u),ou(n)}function hs(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var oT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oh(n,s,l){var u=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,l):typeof l!="number"||l===0||oT.has(s)?s==="float"?n.cssFloat=l:n[s]=(""+l).trim():n[s]=l+"px"}function lh(n,s,l){if(s!=null&&typeof s!="object")throw Error(o(62));if(n=n.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var h in s)u=s[h],s.hasOwnProperty(h)&&l[h]!==u&&oh(n,h,u)}else for(var g in s)s.hasOwnProperty(g)&&oh(n,g,s[g])}function ru(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),aT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bl(n){return aT.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Un(){}var uu=null;function cu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ps=null,ms=null;function ah(n){var s=us(n);if(s&&(n=s.stateNode)){var l=n[Ot]||null;e:switch(n=s.stateNode,s.type){case"input":if(lu(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+tn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==n&&u.form===n.form){var h=u[Ot]||null;if(!h)throw Error(o(90));lu(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<l.length;s++)u=l[s],u.form===n.form&&th(u)}break e;case"textarea":ih(n,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&ds(n,!!l.multiple,s,!1)}}}var fu=!1;function rh(n,s,l){if(fu)return n(s,l);fu=!0;try{var u=n(s);return u}finally{if(fu=!1,(ps!==null||ms!==null)&&(Ra(),ps&&(s=ps,n=ms,ms=ps=null,ah(s),n)))for(s=0;s<n.length;s++)ah(n[s])}}function _o(n,s){var l=n.stateNode;if(l===null)return null;var u=l[Ot]||null;if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(o(231,s,typeof l));return l}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),du=!1;if(Ln)try{var So={};Object.defineProperty(So,"passive",{get:function(){du=!0}}),window.addEventListener("test",So,So),window.removeEventListener("test",So,So)}catch{du=!1}var li=null,hu=null,Vl=null;function uh(){if(Vl)return Vl;var n,s=hu,l=s.length,u,h="value"in li?li.value:li.textContent,g=h.length;for(n=0;n<l&&s[n]===h[n];n++);var S=l-n;for(u=1;u<=S&&s[l-u]===h[g-u];u++);return Vl=h.slice(n,1<u?1-u:void 0)}function zl(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Fl(){return!0}function ch(){return!1}function Gt(n){function s(l,u,h,g,S){this._reactName=l,this._targetInst=h,this.type=u,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(l=n[C],this[C]=l?l(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Fl:ch,this.isPropagationStopped=ch,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),s}var Pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$l=Gt(Pi),To=_({},Pi,{view:0,detail:0}),rT=Gt(To),pu,mu,Eo,Jl=_({},To,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Eo&&(Eo&&n.type==="mousemove"?(pu=n.screenX-Eo.screenX,mu=n.screenY-Eo.screenY):mu=pu=0,Eo=n),pu)},movementY:function(n){return"movementY"in n?n.movementY:mu}}),fh=Gt(Jl),uT=_({},Jl,{dataTransfer:0}),cT=Gt(uT),fT=_({},To,{relatedTarget:0}),gu=Gt(fT),dT=_({},Pi,{animationName:0,elapsedTime:0,pseudoElement:0}),hT=Gt(dT),pT=_({},Pi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),mT=Gt(pT),gT=_({},Pi,{data:0}),dh=Gt(gT),yT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_T={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ST(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=_T[n])?!!s[n]:!1}function yu(){return ST}var TT=_({},To,{key:function(n){if(n.key){var s=yT[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=zl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?vT[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yu,charCode:function(n){return n.type==="keypress"?zl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ET=Gt(TT),AT=_({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hh=Gt(AT),CT=_({},To,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yu}),xT=Gt(CT),bT=_({},Pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),wT=Gt(bT),RT=_({},Jl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),NT=Gt(RT),MT=_({},Pi,{newState:0,oldState:0}),IT=Gt(MT),DT=[9,13,27,32],vu=Ln&&"CompositionEvent"in window,Ao=null;Ln&&"documentMode"in document&&(Ao=document.documentMode);var UT=Ln&&"TextEvent"in window&&!Ao,ph=Ln&&(!vu||Ao&&8<Ao&&11>=Ao),mh=" ",gh=!1;function yh(n,s){switch(n){case"keyup":return DT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vh(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var gs=!1;function LT(n,s){switch(n){case"compositionend":return vh(s);case"keypress":return s.which!==32?null:(gh=!0,mh);case"textInput":return n=s.data,n===mh&&gh?null:n;default:return null}}function OT(n,s){if(gs)return n==="compositionend"||!vu&&yh(n,s)?(n=uh(),Vl=hu=li=null,gs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ph&&s.locale!=="ko"?null:s.data;default:return null}}var GT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _h(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!GT[n.type]:s==="textarea"}function Sh(n,s,l,u){ps?ms?ms.push(u):ms=[u]:ps=u,s=Oa(s,"onChange"),0<s.length&&(l=new $l("onChange","change",null,l,u),n.push({event:l,listeners:s}))}var Co=null,xo=null;function PT(n){ng(n,0)}function Yl(n){var s=vo(n);if(th(s))return n}function Th(n,s){if(n==="change")return s}var Eh=!1;if(Ln){var _u;if(Ln){var Su="oninput"in document;if(!Su){var Ah=document.createElement("div");Ah.setAttribute("oninput","return;"),Su=typeof Ah.oninput=="function"}_u=Su}else _u=!1;Eh=_u&&(!document.documentMode||9<document.documentMode)}function Ch(){Co&&(Co.detachEvent("onpropertychange",xh),xo=Co=null)}function xh(n){if(n.propertyName==="value"&&Yl(xo)){var s=[];Sh(s,xo,n,cu(n)),rh(PT,s)}}function kT(n,s,l){n==="focusin"?(Ch(),Co=s,xo=l,Co.attachEvent("onpropertychange",xh)):n==="focusout"&&Ch()}function HT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Yl(xo)}function qT(n,s){if(n==="click")return Yl(s)}function BT(n,s){if(n==="input"||n==="change")return Yl(s)}function VT(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var zt=typeof Object.is=="function"?Object.is:VT;function bo(n,s){if(zt(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var h=l[u];if(!co.call(s,h)||!zt(n[h],s[h]))return!1}return!0}function bh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function wh(n,s){var l=bh(n);n=0;for(var u;l;){if(l.nodeType===3){if(u=n+l.textContent.length,n<=s&&u>=s)return{node:l,offset:s-n};n=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=bh(l)}}function Rh(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Rh(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Nh(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ql(n.document);s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=ql(n.document)}return s}function Tu(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var zT=Ln&&"documentMode"in document&&11>=document.documentMode,ys=null,Eu=null,wo=null,Au=!1;function Mh(n,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Au||ys==null||ys!==ql(u)||(u=ys,"selectionStart"in u&&Tu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),wo&&bo(wo,u)||(wo=u,u=Oa(Eu,"onSelect"),0<u.length&&(s=new $l("onSelect","select",null,s,l),n.push({event:s,listeners:u}),s.target=ys)))}function ki(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var vs={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionrun:ki("Transition","TransitionRun"),transitionstart:ki("Transition","TransitionStart"),transitioncancel:ki("Transition","TransitionCancel"),transitionend:ki("Transition","TransitionEnd")},Cu={},Ih={};Ln&&(Ih=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Hi(n){if(Cu[n])return Cu[n];if(!vs[n])return n;var s=vs[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Ih)return Cu[n]=s[l];return n}var Dh=Hi("animationend"),Uh=Hi("animationiteration"),Lh=Hi("animationstart"),FT=Hi("transitionrun"),$T=Hi("transitionstart"),JT=Hi("transitioncancel"),Oh=Hi("transitionend"),Gh=new Map,xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xu.push("scrollEnd");function gn(n,s){Gh.set(n,s),Gi(s,[n])}var Kl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},nn=[],_s=0,bu=0;function Xl(){for(var n=_s,s=bu=_s=0;s<n;){var l=nn[s];nn[s++]=null;var u=nn[s];nn[s++]=null;var h=nn[s];nn[s++]=null;var g=nn[s];if(nn[s++]=null,u!==null&&h!==null){var S=u.pending;S===null?h.next=h:(h.next=S.next,S.next=h),u.pending=h}g!==0&&Ph(l,h,g)}}function Ql(n,s,l,u){nn[_s++]=n,nn[_s++]=s,nn[_s++]=l,nn[_s++]=u,bu|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function wu(n,s,l,u){return Ql(n,s,l,u),Zl(n)}function qi(n,s){return Ql(n,null,null,s),Zl(n)}function Ph(n,s,l){n.lanes|=l;var u=n.alternate;u!==null&&(u.lanes|=l);for(var h=!1,g=n.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(h=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,h&&s!==null&&(h=31-wt(l),n=g.hiddenUpdates,u=n[h],u===null?n[h]=[s]:u.push(s),s.lane=l|536870912),g):null}function Zl(n){if(50<Xo)throw Xo=0,Gc=null,Error(o(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ss={};function YT(n,s,l,u){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(n,s,l,u){return new YT(n,s,l,u)}function Ru(n){return n=n.prototype,!(!n||!n.isReactComponent)}function On(n,s){var l=n.alternate;return l===null?(l=Ft(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function kh(n,s){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,s=l.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Wl(n,s,l,u,h,g){var S=0;if(u=n,typeof n=="function")Ru(n)&&(S=1);else if(typeof n=="string")S=WE(n,l,oe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case X:return n=Ft(31,l,s,h),n.elementType=X,n.lanes=g,n;case b:return Bi(l.children,h,g,s);case w:S=8,h|=24;break;case q:return n=Ft(12,l,s,h|2),n.elementType=q,n.lanes=g,n;case L:return n=Ft(13,l,s,h),n.elementType=L,n.lanes=g,n;case Z:return n=Ft(19,l,s,h),n.elementType=Z,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H:S=10;break e;case G:S=9;break e;case k:S=11;break e;case $:S=14;break e;case K:S=16,u=null;break e}S=29,l=Error(o(130,n===null?"null":typeof n,"")),u=null}return s=Ft(S,l,s,h),s.elementType=n,s.type=u,s.lanes=g,s}function Bi(n,s,l,u){return n=Ft(7,n,u,s),n.lanes=l,n}function Nu(n,s,l){return n=Ft(6,n,null,s),n.lanes=l,n}function Hh(n){var s=Ft(18,null,null,0);return s.stateNode=n,s}function Mu(n,s,l){return s=Ft(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var qh=new WeakMap;function sn(n,s){if(typeof n=="object"&&n!==null){var l=qh.get(n);return l!==void 0?l:(s={value:n,source:s,stack:Ul(s)},qh.set(n,s),s)}return{value:n,source:s,stack:Ul(s)}}var Ts=[],Es=0,jl=null,Ro=0,on=[],ln=0,ai=null,Cn=1,xn="";function Gn(n,s){Ts[Es++]=Ro,Ts[Es++]=jl,jl=n,Ro=s}function Bh(n,s,l){on[ln++]=Cn,on[ln++]=xn,on[ln++]=ai,ai=n;var u=Cn;n=xn;var h=32-wt(u)-1;u&=~(1<<h),l+=1;var g=32-wt(s)+h;if(30<g){var S=h-h%5;g=(u&(1<<S)-1).toString(32),u>>=S,h-=S,Cn=1<<32-wt(s)+h|l<<h|u,xn=g+n}else Cn=1<<g|l<<h|u,xn=n}function Iu(n){n.return!==null&&(Gn(n,1),Bh(n,1,0))}function Du(n){for(;n===jl;)jl=Ts[--Es],Ts[Es]=null,Ro=Ts[--Es],Ts[Es]=null;for(;n===ai;)ai=on[--ln],on[ln]=null,xn=on[--ln],on[ln]=null,Cn=on[--ln],on[ln]=null}function Vh(n,s){on[ln++]=Cn,on[ln++]=xn,on[ln++]=ai,Cn=s.id,xn=s.overflow,ai=n}var _t=null,$e=null,Re=!1,ri=null,an=!1,Uu=Error(o(519));function ui(n){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw No(sn(s,n)),Uu}function zh(n){var s=n.stateNode,l=n.type,u=n.memoizedProps;switch(s[vt]=n,s[Ot]=u,l){case"dialog":Ce("cancel",s),Ce("close",s);break;case"iframe":case"object":case"embed":Ce("load",s);break;case"video":case"audio":for(l=0;l<Zo.length;l++)Ce(Zo[l],s);break;case"source":Ce("error",s);break;case"img":case"image":case"link":Ce("error",s),Ce("load",s);break;case"details":Ce("toggle",s);break;case"input":Ce("invalid",s),nh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ce("invalid",s);break;case"textarea":Ce("invalid",s),sh(s,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||u.suppressHydrationWarning===!0||lg(s.textContent,l)?(u.popover!=null&&(Ce("beforetoggle",s),Ce("toggle",s)),u.onScroll!=null&&Ce("scroll",s),u.onScrollEnd!=null&&Ce("scrollend",s),u.onClick!=null&&(s.onclick=Un),s=!0):s=!1,s||ui(n,!0)}function Fh(n){for(_t=n.return;_t;)switch(_t.tag){case 5:case 31:case 13:an=!1;return;case 27:case 3:an=!0;return;default:_t=_t.return}}function As(n){if(n!==_t)return!1;if(!Re)return Fh(n),Re=!0,!1;var s=n.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Zc(n.type,n.memoizedProps)),l=!l),l&&$e&&ui(n),Fh(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));$e=mg(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));$e=mg(n)}else s===27?(s=$e,Ai(n.type)?(n=nf,nf=null,$e=n):$e=s):$e=_t?un(n.stateNode.nextSibling):null;return!0}function Vi(){$e=_t=null,Re=!1}function Lu(){var n=ri;return n!==null&&(qt===null?qt=n:qt.push.apply(qt,n),ri=null),n}function No(n){ri===null?ri=[n]:ri.push(n)}var Ou=M(null),zi=null,Pn=null;function ci(n,s,l){j(Ou,s._currentValue),s._currentValue=l}function kn(n){n._currentValue=Ou.current,Y(Ou)}function Gu(n,s,l){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===l)break;n=n.return}}function Pu(n,s,l,u){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var g=h.dependencies;if(g!==null){var S=h.child;g=g.firstContext;e:for(;g!==null;){var C=g;g=h;for(var R=0;R<s.length;R++)if(C.context===s[R]){g.lanes|=l,C=g.alternate,C!==null&&(C.lanes|=l),Gu(g.return,l,n),u||(S=null);break e}g=C.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(o(341));S.lanes|=l,g=S.alternate,g!==null&&(g.lanes|=l),Gu(S,l,n),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===n){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function Cs(n,s,l,u){n=null;for(var h=s,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var C=h.type;zt(h.pendingProps.value,S.value)||(n!==null?n.push(C):n=[C])}}else if(h===Ne.current){if(S=h.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(nl):n=[nl])}h=h.return}n!==null&&Pu(s,n,l,u),s.flags|=262144}function ea(n){for(n=n.firstContext;n!==null;){if(!zt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Fi(n){zi=n,Pn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function St(n){return $h(zi,n)}function ta(n,s){return zi===null&&Fi(n),$h(n,s)}function $h(n,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Pn===null){if(n===null)throw Error(o(308));Pn=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Pn=Pn.next=s;return l}var KT=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(l,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(l){return l()})}},XT=t.unstable_scheduleCallback,QT=t.unstable_NormalPriority,it={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ku(){return{controller:new KT,data:new Map,refCount:0}}function Mo(n){n.refCount--,n.refCount===0&&XT(QT,function(){n.controller.abort()})}var Io=null,Hu=0,xs=0,bs=null;function ZT(n,s){if(Io===null){var l=Io=[];Hu=0,xs=Vc(),bs={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Hu++,s.then(Jh,Jh),s}function Jh(){if(--Hu===0&&Io!==null){bs!==null&&(bs.status="fulfilled");var n=Io;Io=null,xs=0,bs=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function WT(n,s){var l=[],u={status:"pending",value:null,reason:null,then:function(h){l.push(h)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var h=0;h<l.length;h++)(0,l[h])(s)},function(h){for(u.status="rejected",u.reason=h,h=0;h<l.length;h++)(0,l[h])(void 0)}),u}var Yh=V.S;V.S=function(n,s){Mm=Ze(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&ZT(n,s),Yh!==null&&Yh(n,s)};var $i=M(null);function qu(){var n=$i.current;return n!==null?n:ze.pooledCache}function na(n,s){s===null?j($i,$i.current):j($i,s.pool)}function Kh(){var n=qu();return n===null?null:{parent:it._currentValue,pool:n}}var ws=Error(o(460)),Bu=Error(o(474)),ia=Error(o(542)),sa={then:function(){}};function Xh(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Qh(n,s,l){switch(l=n[l],l===void 0?n.push(s):l!==s&&(s.then(Un,Un),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Wh(n),n;default:if(typeof s.status=="string")s.then(Un,Un);else{if(n=ze,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=u}},function(u){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Wh(n),n}throw Yi=s,ws}}function Ji(n){try{var s=n._init;return s(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Yi=l,ws):l}}var Yi=null;function Zh(){if(Yi===null)throw Error(o(459));var n=Yi;return Yi=null,n}function Wh(n){if(n===ws||n===ia)throw Error(o(483))}var Rs=null,Do=0;function oa(n){var s=Do;return Do+=1,Rs===null&&(Rs=[]),Qh(Rs,n,s)}function Uo(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function la(n,s){throw s.$$typeof===T?Error(o(525)):(n=Object.prototype.toString.call(s),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function jh(n){function s(I,N){if(n){var D=I.deletions;D===null?(I.deletions=[N],I.flags|=16):D.push(N)}}function l(I,N){if(!n)return null;for(;N!==null;)s(I,N),N=N.sibling;return null}function u(I){for(var N=new Map;I!==null;)I.key!==null?N.set(I.key,I):N.set(I.index,I),I=I.sibling;return N}function h(I,N){return I=On(I,N),I.index=0,I.sibling=null,I}function g(I,N,D){return I.index=D,n?(D=I.alternate,D!==null?(D=D.index,D<N?(I.flags|=67108866,N):D):(I.flags|=67108866,N)):(I.flags|=1048576,N)}function S(I){return n&&I.alternate===null&&(I.flags|=67108866),I}function C(I,N,D,F){return N===null||N.tag!==6?(N=Nu(D,I.mode,F),N.return=I,N):(N=h(N,D),N.return=I,N)}function R(I,N,D,F){var ce=D.type;return ce===b?z(I,N,D.props.children,F,D.key):N!==null&&(N.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===K&&Ji(ce)===N.type)?(N=h(N,D.props),Uo(N,D),N.return=I,N):(N=Wl(D.type,D.key,D.props,null,I.mode,F),Uo(N,D),N.return=I,N)}function U(I,N,D,F){return N===null||N.tag!==4||N.stateNode.containerInfo!==D.containerInfo||N.stateNode.implementation!==D.implementation?(N=Mu(D,I.mode,F),N.return=I,N):(N=h(N,D.children||[]),N.return=I,N)}function z(I,N,D,F,ce){return N===null||N.tag!==7?(N=Bi(D,I.mode,F,ce),N.return=I,N):(N=h(N,D),N.return=I,N)}function J(I,N,D){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Nu(""+N,I.mode,D),N.return=I,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case A:return D=Wl(N.type,N.key,N.props,null,I.mode,D),Uo(D,N),D.return=I,D;case x:return N=Mu(N,I.mode,D),N.return=I,N;case K:return N=Ji(N),J(I,N,D)}if(Ye(N)||Ee(N))return N=Bi(N,I.mode,D,null),N.return=I,N;if(typeof N.then=="function")return J(I,oa(N),D);if(N.$$typeof===H)return J(I,ta(I,N),D);la(I,N)}return null}function P(I,N,D,F){var ce=N!==null?N.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return ce!==null?null:C(I,N,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case A:return D.key===ce?R(I,N,D,F):null;case x:return D.key===ce?U(I,N,D,F):null;case K:return D=Ji(D),P(I,N,D,F)}if(Ye(D)||Ee(D))return ce!==null?null:z(I,N,D,F,null);if(typeof D.then=="function")return P(I,N,oa(D),F);if(D.$$typeof===H)return P(I,N,ta(I,D),F);la(I,D)}return null}function B(I,N,D,F,ce){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return I=I.get(D)||null,C(N,I,""+F,ce);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return I=I.get(F.key===null?D:F.key)||null,R(N,I,F,ce);case x:return I=I.get(F.key===null?D:F.key)||null,U(N,I,F,ce);case K:return F=Ji(F),B(I,N,D,F,ce)}if(Ye(F)||Ee(F))return I=I.get(D)||null,z(N,I,F,ce,null);if(typeof F.then=="function")return B(I,N,D,oa(F),ce);if(F.$$typeof===H)return B(I,N,D,ta(N,F),ce);la(N,F)}return null}function ne(I,N,D,F){for(var ce=null,Me=null,re=N,_e=N=0,be=null;re!==null&&_e<D.length;_e++){re.index>_e?(be=re,re=null):be=re.sibling;var Ie=P(I,re,D[_e],F);if(Ie===null){re===null&&(re=be);break}n&&re&&Ie.alternate===null&&s(I,re),N=g(Ie,N,_e),Me===null?ce=Ie:Me.sibling=Ie,Me=Ie,re=be}if(_e===D.length)return l(I,re),Re&&Gn(I,_e),ce;if(re===null){for(;_e<D.length;_e++)re=J(I,D[_e],F),re!==null&&(N=g(re,N,_e),Me===null?ce=re:Me.sibling=re,Me=re);return Re&&Gn(I,_e),ce}for(re=u(re);_e<D.length;_e++)be=B(re,I,_e,D[_e],F),be!==null&&(n&&be.alternate!==null&&re.delete(be.key===null?_e:be.key),N=g(be,N,_e),Me===null?ce=be:Me.sibling=be,Me=be);return n&&re.forEach(function(Ri){return s(I,Ri)}),Re&&Gn(I,_e),ce}function de(I,N,D,F){if(D==null)throw Error(o(151));for(var ce=null,Me=null,re=N,_e=N=0,be=null,Ie=D.next();re!==null&&!Ie.done;_e++,Ie=D.next()){re.index>_e?(be=re,re=null):be=re.sibling;var Ri=P(I,re,Ie.value,F);if(Ri===null){re===null&&(re=be);break}n&&re&&Ri.alternate===null&&s(I,re),N=g(Ri,N,_e),Me===null?ce=Ri:Me.sibling=Ri,Me=Ri,re=be}if(Ie.done)return l(I,re),Re&&Gn(I,_e),ce;if(re===null){for(;!Ie.done;_e++,Ie=D.next())Ie=J(I,Ie.value,F),Ie!==null&&(N=g(Ie,N,_e),Me===null?ce=Ie:Me.sibling=Ie,Me=Ie);return Re&&Gn(I,_e),ce}for(re=u(re);!Ie.done;_e++,Ie=D.next())Ie=B(re,I,_e,Ie.value,F),Ie!==null&&(n&&Ie.alternate!==null&&re.delete(Ie.key===null?_e:Ie.key),N=g(Ie,N,_e),Me===null?ce=Ie:Me.sibling=Ie,Me=Ie);return n&&re.forEach(function(uA){return s(I,uA)}),Re&&Gn(I,_e),ce}function Ve(I,N,D,F){if(typeof D=="object"&&D!==null&&D.type===b&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case A:e:{for(var ce=D.key;N!==null;){if(N.key===ce){if(ce=D.type,ce===b){if(N.tag===7){l(I,N.sibling),F=h(N,D.props.children),F.return=I,I=F;break e}}else if(N.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===K&&Ji(ce)===N.type){l(I,N.sibling),F=h(N,D.props),Uo(F,D),F.return=I,I=F;break e}l(I,N);break}else s(I,N);N=N.sibling}D.type===b?(F=Bi(D.props.children,I.mode,F,D.key),F.return=I,I=F):(F=Wl(D.type,D.key,D.props,null,I.mode,F),Uo(F,D),F.return=I,I=F)}return S(I);case x:e:{for(ce=D.key;N!==null;){if(N.key===ce)if(N.tag===4&&N.stateNode.containerInfo===D.containerInfo&&N.stateNode.implementation===D.implementation){l(I,N.sibling),F=h(N,D.children||[]),F.return=I,I=F;break e}else{l(I,N);break}else s(I,N);N=N.sibling}F=Mu(D,I.mode,F),F.return=I,I=F}return S(I);case K:return D=Ji(D),Ve(I,N,D,F)}if(Ye(D))return ne(I,N,D,F);if(Ee(D)){if(ce=Ee(D),typeof ce!="function")throw Error(o(150));return D=ce.call(D),de(I,N,D,F)}if(typeof D.then=="function")return Ve(I,N,oa(D),F);if(D.$$typeof===H)return Ve(I,N,ta(I,D),F);la(I,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,N!==null&&N.tag===6?(l(I,N.sibling),F=h(N,D),F.return=I,I=F):(l(I,N),F=Nu(D,I.mode,F),F.return=I,I=F),S(I)):l(I,N)}return function(I,N,D,F){try{Do=0;var ce=Ve(I,N,D,F);return Rs=null,ce}catch(re){if(re===ws||re===ia)throw re;var Me=Ft(29,re,null,I.mode);return Me.lanes=F,Me.return=I,Me}finally{}}}var Ki=jh(!0),ep=jh(!1),fi=!1;function Vu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function di(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function hi(n,s,l){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ue&2)!==0){var h=u.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),u.pending=s,s=Zl(n),Ph(n,null,l),s}return Ql(n,u,s,l),Zl(n)}function Lo(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,l|=u,s.lanes=l,$d(n,l)}}function Fu(n,s){var l=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var h=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?h=g=S:g=g.next=S,l=l.next}while(l!==null);g===null?h=g=s:g=g.next=s}else h=g=s;l={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}var $u=!1;function Oo(){if($u){var n=bs;if(n!==null)throw n}}function Go(n,s,l,u){$u=!1;var h=n.updateQueue;fi=!1;var g=h.firstBaseUpdate,S=h.lastBaseUpdate,C=h.shared.pending;if(C!==null){h.shared.pending=null;var R=C,U=R.next;R.next=null,S===null?g=U:S.next=U,S=R;var z=n.alternate;z!==null&&(z=z.updateQueue,C=z.lastBaseUpdate,C!==S&&(C===null?z.firstBaseUpdate=U:C.next=U,z.lastBaseUpdate=R))}if(g!==null){var J=h.baseState;S=0,z=U=R=null,C=g;do{var P=C.lane&-536870913,B=P!==C.lane;if(B?(xe&P)===P:(u&P)===P){P!==0&&P===xs&&($u=!0),z!==null&&(z=z.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var ne=n,de=C;P=s;var Ve=l;switch(de.tag){case 1:if(ne=de.payload,typeof ne=="function"){J=ne.call(Ve,J,P);break e}J=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=de.payload,P=typeof ne=="function"?ne.call(Ve,J,P):ne,P==null)break e;J=_({},J,P);break e;case 2:fi=!0}}P=C.callback,P!==null&&(n.flags|=64,B&&(n.flags|=8192),B=h.callbacks,B===null?h.callbacks=[P]:B.push(P))}else B={lane:P,tag:C.tag,payload:C.payload,callback:C.callback,next:null},z===null?(U=z=B,R=J):z=z.next=B,S|=P;if(C=C.next,C===null){if(C=h.shared.pending,C===null)break;B=C,C=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);z===null&&(R=J),h.baseState=R,h.firstBaseUpdate=U,h.lastBaseUpdate=z,g===null&&(h.shared.lanes=0),vi|=S,n.lanes=S,n.memoizedState=J}}function tp(n,s){if(typeof n!="function")throw Error(o(191,n));n.call(s)}function np(n,s){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)tp(l[n],s)}var Ns=M(null),aa=M(0);function ip(n,s){n=Yn,j(aa,n),j(Ns,s),Yn=n|s.baseLanes}function Ju(){j(aa,Yn),j(Ns,Ns.current)}function Yu(){Yn=aa.current,Y(Ns),Y(aa)}var $t=M(null),rn=null;function pi(n){var s=n.alternate;j(tt,tt.current&1),j($t,n),rn===null&&(s===null||Ns.current!==null||s.memoizedState!==null)&&(rn=n)}function Ku(n){j(tt,tt.current),j($t,n),rn===null&&(rn=n)}function sp(n){n.tag===22?(j(tt,tt.current),j($t,n),rn===null&&(rn=n)):mi()}function mi(){j(tt,tt.current),j($t,$t.current)}function Jt(n){Y($t),rn===n&&(rn=null),Y(tt)}var tt=M(0);function ra(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ef(l)||tf(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Hn=0,ve=null,qe=null,st=null,ua=!1,Ms=!1,Xi=!1,ca=0,Po=0,Is=null,jT=0;function We(){throw Error(o(321))}function Xu(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!zt(n[l],s[l]))return!1;return!0}function Qu(n,s,l,u,h,g){return Hn=g,ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,V.H=n===null||n.memoizedState===null?Bp:fc,Xi=!1,g=l(u,h),Xi=!1,Ms&&(g=lp(s,l,u,h)),op(n),g}function op(n){V.H=qo;var s=qe!==null&&qe.next!==null;if(Hn=0,st=qe=ve=null,ua=!1,Po=0,Is=null,s)throw Error(o(300));n===null||ot||(n=n.dependencies,n!==null&&ea(n)&&(ot=!0))}function lp(n,s,l,u){ve=n;var h=0;do{if(Ms&&(Is=null),Po=0,Ms=!1,25<=h)throw Error(o(301));if(h+=1,st=qe=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}V.H=Vp,g=s(l,u)}while(Ms);return g}function eE(){var n=V.H,s=n.useState()[0];return s=typeof s.then=="function"?ko(s):s,n=n.useState()[0],(qe!==null?qe.memoizedState:null)!==n&&(ve.flags|=1024),s}function Zu(){var n=ca!==0;return ca=0,n}function Wu(n,s,l){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~l}function ju(n){if(ua){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ua=!1}Hn=0,st=qe=ve=null,Ms=!1,Po=ca=0,Is=null}function Mt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?ve.memoizedState=st=n:st=st.next=n,st}function nt(){if(qe===null){var n=ve.alternate;n=n!==null?n.memoizedState:null}else n=qe.next;var s=st===null?ve.memoizedState:st.next;if(s!==null)st=s,qe=n;else{if(n===null)throw ve.alternate===null?Error(o(467)):Error(o(310));qe=n,n={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},st===null?ve.memoizedState=st=n:st=st.next=n}return st}function fa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ko(n){var s=Po;return Po+=1,Is===null&&(Is=[]),n=Qh(Is,n,s),s=ve,(st===null?s.memoizedState:st.next)===null&&(s=s.alternate,V.H=s===null||s.memoizedState===null?Bp:fc),n}function da(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ko(n);if(n.$$typeof===H)return St(n)}throw Error(o(438,String(n)))}function ec(n){var s=null,l=ve.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var u=ve.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=fa(),ve.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(n),u=0;u<n;u++)l[u]=se;return s.index++,l}function qn(n,s){return typeof s=="function"?s(n):s}function ha(n){var s=nt();return tc(s,qe,n)}function tc(n,s,l){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=l;var h=n.baseQueue,g=u.pending;if(g!==null){if(h!==null){var S=h.next;h.next=g.next,g.next=S}s.baseQueue=h=g,u.pending=null}if(g=n.baseState,h===null)n.memoizedState=g;else{s=h.next;var C=S=null,R=null,U=s,z=!1;do{var J=U.lane&-536870913;if(J!==U.lane?(xe&J)===J:(Hn&J)===J){var P=U.revertLane;if(P===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),J===xs&&(z=!0);else if((Hn&P)===P){U=U.next,P===xs&&(z=!0);continue}else J={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},R===null?(C=R=J,S=g):R=R.next=J,ve.lanes|=P,vi|=P;J=U.action,Xi&&l(g,J),g=U.hasEagerState?U.eagerState:l(g,J)}else P={lane:J,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},R===null?(C=R=P,S=g):R=R.next=P,ve.lanes|=J,vi|=J;U=U.next}while(U!==null&&U!==s);if(R===null?S=g:R.next=C,!zt(g,n.memoizedState)&&(ot=!0,z&&(l=bs,l!==null)))throw l;n.memoizedState=g,n.baseState=S,n.baseQueue=R,u.lastRenderedState=g}return h===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function nc(n){var s=nt(),l=s.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=n;var u=l.dispatch,h=l.pending,g=s.memoizedState;if(h!==null){l.pending=null;var S=h=h.next;do g=n(g,S.action),S=S.next;while(S!==h);zt(g,s.memoizedState)||(ot=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,u]}function ap(n,s,l){var u=ve,h=nt(),g=Re;if(g){if(l===void 0)throw Error(o(407));l=l()}else l=s();var S=!zt((qe||h).memoizedState,l);if(S&&(h.memoizedState=l,ot=!0),h=h.queue,oc(cp.bind(null,u,h,n),[n]),h.getSnapshot!==s||S||st!==null&&st.memoizedState.tag&1){if(u.flags|=2048,Ds(9,{destroy:void 0},up.bind(null,u,h,l,s),null),ze===null)throw Error(o(349));g||(Hn&127)!==0||rp(u,s,l)}return l}function rp(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=ve.updateQueue,s===null?(s=fa(),ve.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function up(n,s,l,u){s.value=l,s.getSnapshot=u,fp(s)&&dp(n)}function cp(n,s,l){return l(function(){fp(s)&&dp(n)})}function fp(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!zt(n,l)}catch{return!0}}function dp(n){var s=qi(n,2);s!==null&&Bt(s,n,2)}function ic(n){var s=Mt();if(typeof n=="function"){var l=n;if(n=l(),Xi){An(!0);try{l()}finally{An(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:n},s}function hp(n,s,l,u){return n.baseState=l,tc(n,qe,typeof u=="function"?u:qn)}function tE(n,s,l,u,h){if(ga(n))throw Error(o(485));if(n=s.action,n!==null){var g={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};V.T!==null?l(!0):g.isTransition=!1,u(g),l=s.pending,l===null?(g.next=s.pending=g,pp(s,g)):(g.next=l.next,s.pending=l.next=g)}}function pp(n,s){var l=s.action,u=s.payload,h=n.state;if(s.isTransition){var g=V.T,S={};V.T=S;try{var C=l(h,u),R=V.S;R!==null&&R(S,C),mp(n,s,C)}catch(U){sc(n,s,U)}finally{g!==null&&S.types!==null&&(g.types=S.types),V.T=g}}else try{g=l(h,u),mp(n,s,g)}catch(U){sc(n,s,U)}}function mp(n,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){gp(n,s,u)},function(u){return sc(n,s,u)}):gp(n,s,l)}function gp(n,s,l){s.status="fulfilled",s.value=l,yp(s),n.state=l,s=n.pending,s!==null&&(l=s.next,l===s?n.pending=null:(l=l.next,s.next=l,pp(n,l)))}function sc(n,s,l){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=l,yp(s),s=s.next;while(s!==u)}n.action=null}function yp(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function vp(n,s){return s}function _p(n,s){if(Re){var l=ze.formState;if(l!==null){e:{var u=ve;if(Re){if($e){t:{for(var h=$e,g=an;h.nodeType!==8;){if(!g){h=null;break t}if(h=un(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){$e=un(h.nextSibling),u=h.data==="F!";break e}}ui(u)}u=!1}u&&(s=l[0])}}return l=Mt(),l.memoizedState=l.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vp,lastRenderedState:s},l.queue=u,l=kp.bind(null,ve,u),u.dispatch=l,u=ic(!1),g=cc.bind(null,ve,!1,u.queue),u=Mt(),h={state:s,dispatch:null,action:n,pending:null},u.queue=h,l=tE.bind(null,ve,h,g,l),h.dispatch=l,u.memoizedState=n,[s,l,!1]}function Sp(n){var s=nt();return Tp(s,qe,n)}function Tp(n,s,l){if(s=tc(n,s,vp)[0],n=ha(qn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=ko(s)}catch(S){throw S===ws?ia:S}else u=s;s=nt();var h=s.queue,g=h.dispatch;return l!==s.memoizedState&&(ve.flags|=2048,Ds(9,{destroy:void 0},nE.bind(null,h,l),null)),[u,g,n]}function nE(n,s){n.action=s}function Ep(n){var s=nt(),l=qe;if(l!==null)return Tp(s,l,n);nt(),s=s.memoizedState,l=nt();var u=l.queue.dispatch;return l.memoizedState=n,[s,u,!1]}function Ds(n,s,l,u){return n={tag:n,create:l,deps:u,inst:s,next:null},s=ve.updateQueue,s===null&&(s=fa(),ve.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=n.next=n:(u=l.next,l.next=n,n.next=u,s.lastEffect=n),n}function Ap(){return nt().memoizedState}function pa(n,s,l,u){var h=Mt();ve.flags|=n,h.memoizedState=Ds(1|s,{destroy:void 0},l,u===void 0?null:u)}function ma(n,s,l,u){var h=nt();u=u===void 0?null:u;var g=h.memoizedState.inst;qe!==null&&u!==null&&Xu(u,qe.memoizedState.deps)?h.memoizedState=Ds(s,g,l,u):(ve.flags|=n,h.memoizedState=Ds(1|s,g,l,u))}function Cp(n,s){pa(8390656,8,n,s)}function oc(n,s){ma(2048,8,n,s)}function iE(n){ve.flags|=4;var s=ve.updateQueue;if(s===null)s=fa(),ve.updateQueue=s,s.events=[n];else{var l=s.events;l===null?s.events=[n]:l.push(n)}}function xp(n){var s=nt().memoizedState;return iE({ref:s,nextImpl:n}),function(){if((Ue&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function bp(n,s){return ma(4,2,n,s)}function wp(n,s){return ma(4,4,n,s)}function Rp(n,s){if(typeof s=="function"){n=n();var l=s(n);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Np(n,s,l){l=l!=null?l.concat([n]):null,ma(4,4,Rp.bind(null,s,n),l)}function lc(){}function Mp(n,s){var l=nt();s=s===void 0?null:s;var u=l.memoizedState;return s!==null&&Xu(s,u[1])?u[0]:(l.memoizedState=[n,s],n)}function Ip(n,s){var l=nt();s=s===void 0?null:s;var u=l.memoizedState;if(s!==null&&Xu(s,u[1]))return u[0];if(u=n(),Xi){An(!0);try{n()}finally{An(!1)}}return l.memoizedState=[u,s],u}function ac(n,s,l){return l===void 0||(Hn&1073741824)!==0&&(xe&261930)===0?n.memoizedState=s:(n.memoizedState=l,n=Dm(),ve.lanes|=n,vi|=n,l)}function Dp(n,s,l,u){return zt(l,s)?l:Ns.current!==null?(n=ac(n,l,u),zt(n,s)||(ot=!0),n):(Hn&42)===0||(Hn&1073741824)!==0&&(xe&261930)===0?(ot=!0,n.memoizedState=l):(n=Dm(),ve.lanes|=n,vi|=n,s)}function Up(n,s,l,u,h){var g=W.p;W.p=g!==0&&8>g?g:8;var S=V.T,C={};V.T=C,cc(n,!1,s,l);try{var R=h(),U=V.S;if(U!==null&&U(C,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var z=WT(R,u);Ho(n,s,z,Xt(n))}else Ho(n,s,u,Xt(n))}catch(J){Ho(n,s,{then:function(){},status:"rejected",reason:J},Xt())}finally{W.p=g,S!==null&&C.types!==null&&(S.types=C.types),V.T=S}}function sE(){}function rc(n,s,l,u){if(n.tag!==5)throw Error(o(476));var h=Lp(n).queue;Up(n,h,s,ae,l===null?sE:function(){return Op(n),l(u)})}function Lp(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:ae},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:l},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Op(n){var s=Lp(n);s.next===null&&(s=n.alternate.memoizedState),Ho(n,s.next.queue,{},Xt())}function uc(){return St(nl)}function Gp(){return nt().memoizedState}function Pp(){return nt().memoizedState}function oE(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var l=Xt();n=di(l);var u=hi(s,n,l);u!==null&&(Bt(u,s,l),Lo(u,s,l)),s={cache:ku()},n.payload=s;return}s=s.return}}function lE(n,s,l){var u=Xt();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ga(n)?Hp(s,l):(l=wu(n,s,l,u),l!==null&&(Bt(l,n,u),qp(l,s,u)))}function kp(n,s,l){var u=Xt();Ho(n,s,l,u)}function Ho(n,s,l,u){var h={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(ga(n))Hp(s,h);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var S=s.lastRenderedState,C=g(S,l);if(h.hasEagerState=!0,h.eagerState=C,zt(C,S))return Ql(n,s,h,0),ze===null&&Xl(),!1}catch{}finally{}if(l=wu(n,s,h,u),l!==null)return Bt(l,n,u),qp(l,s,u),!0}return!1}function cc(n,s,l,u){if(u={lane:2,revertLane:Vc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ga(n)){if(s)throw Error(o(479))}else s=wu(n,l,u,2),s!==null&&Bt(s,n,2)}function ga(n){var s=n.alternate;return n===ve||s!==null&&s===ve}function Hp(n,s){Ms=ua=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function qp(n,s,l){if((l&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,l|=u,s.lanes=l,$d(n,l)}}var qo={readContext:St,use:da,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};qo.useEffectEvent=We;var Bp={readContext:St,use:da,useCallback:function(n,s){return Mt().memoizedState=[n,s===void 0?null:s],n},useContext:St,useEffect:Cp,useImperativeHandle:function(n,s,l){l=l!=null?l.concat([n]):null,pa(4194308,4,Rp.bind(null,s,n),l)},useLayoutEffect:function(n,s){return pa(4194308,4,n,s)},useInsertionEffect:function(n,s){pa(4,2,n,s)},useMemo:function(n,s){var l=Mt();s=s===void 0?null:s;var u=n();if(Xi){An(!0);try{n()}finally{An(!1)}}return l.memoizedState=[u,s],u},useReducer:function(n,s,l){var u=Mt();if(l!==void 0){var h=l(s);if(Xi){An(!0);try{l(s)}finally{An(!1)}}}else h=s;return u.memoizedState=u.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},u.queue=n,n=n.dispatch=lE.bind(null,ve,n),[u.memoizedState,n]},useRef:function(n){var s=Mt();return n={current:n},s.memoizedState=n},useState:function(n){n=ic(n);var s=n.queue,l=kp.bind(null,ve,s);return s.dispatch=l,[n.memoizedState,l]},useDebugValue:lc,useDeferredValue:function(n,s){var l=Mt();return ac(l,n,s)},useTransition:function(){var n=ic(!1);return n=Up.bind(null,ve,n.queue,!0,!1),Mt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,l){var u=ve,h=Mt();if(Re){if(l===void 0)throw Error(o(407));l=l()}else{if(l=s(),ze===null)throw Error(o(349));(xe&127)!==0||rp(u,s,l)}h.memoizedState=l;var g={value:l,getSnapshot:s};return h.queue=g,Cp(cp.bind(null,u,g,n),[n]),u.flags|=2048,Ds(9,{destroy:void 0},up.bind(null,u,g,l,s),null),l},useId:function(){var n=Mt(),s=ze.identifierPrefix;if(Re){var l=xn,u=Cn;l=(u&~(1<<32-wt(u)-1)).toString(32)+l,s="_"+s+"R_"+l,l=ca++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=jT++,s="_"+s+"r_"+l.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:uc,useFormState:_p,useActionState:_p,useOptimistic:function(n){var s=Mt();s.memoizedState=s.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=cc.bind(null,ve,!0,l),l.dispatch=s,[n,s]},useMemoCache:ec,useCacheRefresh:function(){return Mt().memoizedState=oE.bind(null,ve)},useEffectEvent:function(n){var s=Mt(),l={impl:n};return s.memoizedState=l,function(){if((Ue&2)!==0)throw Error(o(440));return l.impl.apply(void 0,arguments)}}},fc={readContext:St,use:da,useCallback:Mp,useContext:St,useEffect:oc,useImperativeHandle:Np,useInsertionEffect:bp,useLayoutEffect:wp,useMemo:Ip,useReducer:ha,useRef:Ap,useState:function(){return ha(qn)},useDebugValue:lc,useDeferredValue:function(n,s){var l=nt();return Dp(l,qe.memoizedState,n,s)},useTransition:function(){var n=ha(qn)[0],s=nt().memoizedState;return[typeof n=="boolean"?n:ko(n),s]},useSyncExternalStore:ap,useId:Gp,useHostTransitionStatus:uc,useFormState:Sp,useActionState:Sp,useOptimistic:function(n,s){var l=nt();return hp(l,qe,n,s)},useMemoCache:ec,useCacheRefresh:Pp};fc.useEffectEvent=xp;var Vp={readContext:St,use:da,useCallback:Mp,useContext:St,useEffect:oc,useImperativeHandle:Np,useInsertionEffect:bp,useLayoutEffect:wp,useMemo:Ip,useReducer:nc,useRef:Ap,useState:function(){return nc(qn)},useDebugValue:lc,useDeferredValue:function(n,s){var l=nt();return qe===null?ac(l,n,s):Dp(l,qe.memoizedState,n,s)},useTransition:function(){var n=nc(qn)[0],s=nt().memoizedState;return[typeof n=="boolean"?n:ko(n),s]},useSyncExternalStore:ap,useId:Gp,useHostTransitionStatus:uc,useFormState:Ep,useActionState:Ep,useOptimistic:function(n,s){var l=nt();return qe!==null?hp(l,qe,n,s):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:ec,useCacheRefresh:Pp};Vp.useEffectEvent=xp;function dc(n,s,l,u){s=n.memoizedState,l=l(u,s),l=l==null?s:_({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var hc={enqueueSetState:function(n,s,l){n=n._reactInternals;var u=Xt(),h=di(u);h.payload=s,l!=null&&(h.callback=l),s=hi(n,h,u),s!==null&&(Bt(s,n,u),Lo(s,n,u))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var u=Xt(),h=di(u);h.tag=1,h.payload=s,l!=null&&(h.callback=l),s=hi(n,h,u),s!==null&&(Bt(s,n,u),Lo(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=Xt(),u=di(l);u.tag=2,s!=null&&(u.callback=s),s=hi(n,u,l),s!==null&&(Bt(s,n,l),Lo(s,n,l))}};function zp(n,s,l,u,h,g,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,S):s.prototype&&s.prototype.isPureReactComponent?!bo(l,u)||!bo(h,g):!0}function Fp(n,s,l,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==n&&hc.enqueueReplaceState(s,s.state,null)}function Qi(n,s){var l=s;if("ref"in s){l={};for(var u in s)u!=="ref"&&(l[u]=s[u])}if(n=n.defaultProps){l===s&&(l=_({},l));for(var h in n)l[h]===void 0&&(l[h]=n[h])}return l}function $p(n){Kl(n)}function Jp(n){console.error(n)}function Yp(n){Kl(n)}function ya(n,s){try{var l=n.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Kp(n,s,l){try{var u=n.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function pc(n,s,l){return l=di(l),l.tag=3,l.payload={element:null},l.callback=function(){ya(n,s)},l}function Xp(n){return n=di(n),n.tag=3,n}function Qp(n,s,l,u){var h=l.type.getDerivedStateFromError;if(typeof h=="function"){var g=u.value;n.payload=function(){return h(g)},n.callback=function(){Kp(s,l,u)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){Kp(s,l,u),typeof h!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function aE(n,s,l,u,h){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=l.alternate,s!==null&&Cs(s,l,h,!0),l=$t.current,l!==null){switch(l.tag){case 31:case 13:return rn===null?Na():l.alternate===null&&je===0&&(je=3),l.flags&=-257,l.flags|=65536,l.lanes=h,u===sa?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([u]):s.add(u),Hc(n,u,h)),!1;case 22:return l.flags|=65536,u===sa?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([u]):l.add(u)),Hc(n,u,h)),!1}throw Error(o(435,l.tag))}return Hc(n,u,h),Na(),!1}if(Re)return s=$t.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,u!==Uu&&(n=Error(o(422),{cause:u}),No(sn(n,l)))):(u!==Uu&&(s=Error(o(423),{cause:u}),No(sn(s,l))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,u=sn(u,l),h=pc(n.stateNode,u,h),Fu(n,h),je!==4&&(je=2)),!1;var g=Error(o(520),{cause:u});if(g=sn(g,l),Ko===null?Ko=[g]:Ko.push(g),je!==4&&(je=2),s===null)return!0;u=sn(u,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,n=h&-h,l.lanes|=n,n=pc(l.stateNode,u,n),Fu(l,n),!1;case 1:if(s=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(_i===null||!_i.has(g))))return l.flags|=65536,h&=-h,l.lanes|=h,h=Xp(h),Qp(h,n,l,u),Fu(l,h),!1}l=l.return}while(l!==null);return!1}var mc=Error(o(461)),ot=!1;function Tt(n,s,l,u){s.child=n===null?ep(s,null,l,u):Ki(s,n.child,l,u)}function Zp(n,s,l,u,h){l=l.render;var g=s.ref;if("ref"in u){var S={};for(var C in u)C!=="ref"&&(S[C]=u[C])}else S=u;return Fi(s),u=Qu(n,s,l,S,g,h),C=Zu(),n!==null&&!ot?(Wu(n,s,h),Bn(n,s,h)):(Re&&C&&Iu(s),s.flags|=1,Tt(n,s,u,h),s.child)}function Wp(n,s,l,u,h){if(n===null){var g=l.type;return typeof g=="function"&&!Ru(g)&&g.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=g,jp(n,s,g,u,h)):(n=Wl(l.type,null,u,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!Ac(n,h)){var S=g.memoizedProps;if(l=l.compare,l=l!==null?l:bo,l(S,u)&&n.ref===s.ref)return Bn(n,s,h)}return s.flags|=1,n=On(g,u),n.ref=s.ref,n.return=s,s.child=n}function jp(n,s,l,u,h){if(n!==null){var g=n.memoizedProps;if(bo(g,u)&&n.ref===s.ref)if(ot=!1,s.pendingProps=u=g,Ac(n,h))(n.flags&131072)!==0&&(ot=!0);else return s.lanes=n.lanes,Bn(n,s,h)}return gc(n,s,l,u,h)}function em(n,s,l,u){var h=u.children,g=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,n!==null){for(u=s.child=n.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;u=h&~g}else u=0,s.child=null;return tm(n,s,g,l,u)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&na(s,g!==null?g.cachePool:null),g!==null?ip(s,g):Ju(),sp(s);else return u=s.lanes=536870912,tm(n,s,g!==null?g.baseLanes|l:l,l,u)}else g!==null?(na(s,g.cachePool),ip(s,g),mi(),s.memoizedState=null):(n!==null&&na(s,null),Ju(),mi());return Tt(n,s,h,l),s.child}function Bo(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function tm(n,s,l,u,h){var g=qu();return g=g===null?null:{parent:it._currentValue,pool:g},s.memoizedState={baseLanes:l,cachePool:g},n!==null&&na(s,null),Ju(),sp(s),n!==null&&Cs(n,s,u,!0),s.childLanes=h,null}function va(n,s){return s=Sa({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function nm(n,s,l){return Ki(s,n.child,null,l),n=va(s,s.pendingProps),n.flags|=2,Jt(s),s.memoizedState=null,n}function rE(n,s,l){var u=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Re){if(u.mode==="hidden")return n=va(s,u),s.lanes=536870912,Bo(null,n);if(Ku(s),(n=$e)?(n=pg(n,an),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ai!==null?{id:Cn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},l=Hh(n),l.return=s,s.child=l,_t=s,$e=null)):n=null,n===null)throw ui(s);return s.lanes=536870912,null}return va(s,u)}var g=n.memoizedState;if(g!==null){var S=g.dehydrated;if(Ku(s),h)if(s.flags&256)s.flags&=-257,s=nm(n,s,l);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(o(558));else if(ot||Cs(n,s,l,!1),h=(l&n.childLanes)!==0,ot||h){if(u=ze,u!==null&&(S=Jd(u,l),S!==0&&S!==g.retryLane))throw g.retryLane=S,qi(n,S),Bt(u,n,S),mc;Na(),s=nm(n,s,l)}else n=g.treeContext,$e=un(S.nextSibling),_t=s,Re=!0,ri=null,an=!1,n!==null&&Vh(s,n),s=va(s,u),s.flags|=4096;return s}return n=On(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function _a(n,s){var l=s.ref;if(l===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(o(284));(n===null||n.ref!==l)&&(s.flags|=4194816)}}function gc(n,s,l,u,h){return Fi(s),l=Qu(n,s,l,u,void 0,h),u=Zu(),n!==null&&!ot?(Wu(n,s,h),Bn(n,s,h)):(Re&&u&&Iu(s),s.flags|=1,Tt(n,s,l,h),s.child)}function im(n,s,l,u,h,g){return Fi(s),s.updateQueue=null,l=lp(s,u,l,h),op(n),u=Zu(),n!==null&&!ot?(Wu(n,s,g),Bn(n,s,g)):(Re&&u&&Iu(s),s.flags|=1,Tt(n,s,l,g),s.child)}function sm(n,s,l,u,h){if(Fi(s),s.stateNode===null){var g=Ss,S=l.contextType;typeof S=="object"&&S!==null&&(g=St(S)),g=new l(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=hc,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},Vu(s),S=l.contextType,g.context=typeof S=="object"&&S!==null?St(S):Ss,g.state=s.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(dc(s,l,S,u),g.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&hc.enqueueReplaceState(g,g.state,null),Go(s,u,g,h),Oo(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){g=s.stateNode;var C=s.memoizedProps,R=Qi(l,C);g.props=R;var U=g.context,z=l.contextType;S=Ss,typeof z=="object"&&z!==null&&(S=St(z));var J=l.getDerivedStateFromProps;z=typeof J=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||U!==S)&&Fp(s,g,u,S),fi=!1;var P=s.memoizedState;g.state=P,Go(s,u,g,h),Oo(),U=s.memoizedState,C||P!==U||fi?(typeof J=="function"&&(dc(s,l,J,u),U=s.memoizedState),(R=fi||zp(s,l,R,u,P,U,S))?(z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=U),g.props=u,g.state=U,g.context=S,u=R):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,zu(n,s),S=s.memoizedProps,z=Qi(l,S),g.props=z,J=s.pendingProps,P=g.context,U=l.contextType,R=Ss,typeof U=="object"&&U!==null&&(R=St(U)),C=l.getDerivedStateFromProps,(U=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==J||P!==R)&&Fp(s,g,u,R),fi=!1,P=s.memoizedState,g.state=P,Go(s,u,g,h),Oo();var B=s.memoizedState;S!==J||P!==B||fi||n!==null&&n.dependencies!==null&&ea(n.dependencies)?(typeof C=="function"&&(dc(s,l,C,u),B=s.memoizedState),(z=fi||zp(s,l,z,u,P,B,R)||n!==null&&n.dependencies!==null&&ea(n.dependencies))?(U||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,B,R),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,B,R)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===n.memoizedProps&&P===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&P===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=B),g.props=u,g.state=B,g.context=R,u=z):(typeof g.componentDidUpdate!="function"||S===n.memoizedProps&&P===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&P===n.memoizedState||(s.flags|=1024),u=!1)}return g=u,_a(n,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&u?(s.child=Ki(s,n.child,null,h),s.child=Ki(s,null,l,h)):Tt(n,s,l,h),s.memoizedState=g.state,n=s.child):n=Bn(n,s,h),n}function om(n,s,l,u){return Vi(),s.flags|=256,Tt(n,s,l,u),s.child}var yc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vc(n){return{baseLanes:n,cachePool:Kh()}}function _c(n,s,l){return n=n!==null?n.childLanes&~l:0,s&&(n|=Kt),n}function lm(n,s,l){var u=s.pendingProps,h=!1,g=(s.flags&128)!==0,S;if((S=g)||(S=n!==null&&n.memoizedState===null?!1:(tt.current&2)!==0),S&&(h=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,n===null){if(Re){if(h?pi(s):mi(),(n=$e)?(n=pg(n,an),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ai!==null?{id:Cn,overflow:xn}:null,retryLane:536870912,hydrationErrors:null},l=Hh(n),l.return=s,s.child=l,_t=s,$e=null)):n=null,n===null)throw ui(s);return tf(n)?s.lanes=32:s.lanes=536870912,null}var C=u.children;return u=u.fallback,h?(mi(),h=s.mode,C=Sa({mode:"hidden",children:C},h),u=Bi(u,h,l,null),C.return=s,u.return=s,C.sibling=u,s.child=C,u=s.child,u.memoizedState=vc(l),u.childLanes=_c(n,S,l),s.memoizedState=yc,Bo(null,u)):(pi(s),Sc(s,C))}var R=n.memoizedState;if(R!==null&&(C=R.dehydrated,C!==null)){if(g)s.flags&256?(pi(s),s.flags&=-257,s=Tc(n,s,l)):s.memoizedState!==null?(mi(),s.child=n.child,s.flags|=128,s=null):(mi(),C=u.fallback,h=s.mode,u=Sa({mode:"visible",children:u.children},h),C=Bi(C,h,l,null),C.flags|=2,u.return=s,C.return=s,u.sibling=C,s.child=u,Ki(s,n.child,null,l),u=s.child,u.memoizedState=vc(l),u.childLanes=_c(n,S,l),s.memoizedState=yc,s=Bo(null,u));else if(pi(s),tf(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var U=S.dgst;S=U,u=Error(o(419)),u.stack="",u.digest=S,No({value:u,source:null,stack:null}),s=Tc(n,s,l)}else if(ot||Cs(n,s,l,!1),S=(l&n.childLanes)!==0,ot||S){if(S=ze,S!==null&&(u=Jd(S,l),u!==0&&u!==R.retryLane))throw R.retryLane=u,qi(n,u),Bt(S,n,u),mc;ef(C)||Na(),s=Tc(n,s,l)}else ef(C)?(s.flags|=192,s.child=n.child,s=null):(n=R.treeContext,$e=un(C.nextSibling),_t=s,Re=!0,ri=null,an=!1,n!==null&&Vh(s,n),s=Sc(s,u.children),s.flags|=4096);return s}return h?(mi(),C=u.fallback,h=s.mode,R=n.child,U=R.sibling,u=On(R,{mode:"hidden",children:u.children}),u.subtreeFlags=R.subtreeFlags&65011712,U!==null?C=On(U,C):(C=Bi(C,h,l,null),C.flags|=2),C.return=s,u.return=s,u.sibling=C,s.child=u,Bo(null,u),u=s.child,C=n.child.memoizedState,C===null?C=vc(l):(h=C.cachePool,h!==null?(R=it._currentValue,h=h.parent!==R?{parent:R,pool:R}:h):h=Kh(),C={baseLanes:C.baseLanes|l,cachePool:h}),u.memoizedState=C,u.childLanes=_c(n,S,l),s.memoizedState=yc,Bo(n.child,u)):(pi(s),l=n.child,n=l.sibling,l=On(l,{mode:"visible",children:u.children}),l.return=s,l.sibling=null,n!==null&&(S=s.deletions,S===null?(s.deletions=[n],s.flags|=16):S.push(n)),s.child=l,s.memoizedState=null,l)}function Sc(n,s){return s=Sa({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Sa(n,s){return n=Ft(22,n,null,s),n.lanes=0,n}function Tc(n,s,l){return Ki(s,n.child,null,l),n=Sc(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function am(n,s,l){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Gu(n.return,s,l)}function Ec(n,s,l,u,h,g){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:h,treeForkCount:g}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=l,S.tailMode=h,S.treeForkCount=g)}function rm(n,s,l){var u=s.pendingProps,h=u.revealOrder,g=u.tail;u=u.children;var S=tt.current,C=(S&2)!==0;if(C?(S=S&1|2,s.flags|=128):S&=1,j(tt,S),Tt(n,s,u,l),u=Re?Ro:0,!C&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&am(n,l,s);else if(n.tag===19)am(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(h){case"forwards":for(l=s.child,h=null;l!==null;)n=l.alternate,n!==null&&ra(n)===null&&(h=l),l=l.sibling;l=h,l===null?(h=s.child,s.child=null):(h=l.sibling,l.sibling=null),Ec(s,!1,h,l,g,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&ra(n)===null){s.child=h;break}n=h.sibling,h.sibling=l,l=h,h=n}Ec(s,!0,l,null,g,u);break;case"together":Ec(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Bn(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),vi|=s.lanes,(l&s.childLanes)===0)if(n!==null){if(Cs(n,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(o(153));if(s.child!==null){for(n=s.child,l=On(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=On(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function Ac(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&ea(n)))}function uE(n,s,l){switch(s.tag){case 3:dt(s,s.stateNode.containerInfo),ci(s,it,n.memoizedState.cache),Vi();break;case 27:case 5:ti(s);break;case 4:dt(s,s.stateNode.containerInfo);break;case 10:ci(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ku(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(pi(s),s.flags|=128,null):(l&s.child.childLanes)!==0?lm(n,s,l):(pi(s),n=Bn(n,s,l),n!==null?n.sibling:null);pi(s);break;case 19:var h=(n.flags&128)!==0;if(u=(l&s.childLanes)!==0,u||(Cs(n,s,l,!1),u=(l&s.childLanes)!==0),h){if(u)return rm(n,s,l);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),j(tt,tt.current),u)break;return null;case 22:return s.lanes=0,em(n,s,l,s.pendingProps);case 24:ci(s,it,n.memoizedState.cache)}return Bn(n,s,l)}function um(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps)ot=!0;else{if(!Ac(n,l)&&(s.flags&128)===0)return ot=!1,uE(n,s,l);ot=(n.flags&131072)!==0}else ot=!1,Re&&(s.flags&1048576)!==0&&Bh(s,Ro,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(n=Ji(s.elementType),s.type=n,typeof n=="function")Ru(n)?(u=Qi(n,u),s.tag=1,s=sm(null,s,n,u,l)):(s.tag=0,s=gc(null,s,n,u,l));else{if(n!=null){var h=n.$$typeof;if(h===k){s.tag=11,s=Zp(null,s,n,u,l);break e}else if(h===$){s.tag=14,s=Wp(null,s,n,u,l);break e}}throw s=Le(n)||n,Error(o(306,s,""))}}return s;case 0:return gc(n,s,s.type,s.pendingProps,l);case 1:return u=s.type,h=Qi(u,s.pendingProps),sm(n,s,u,h,l);case 3:e:{if(dt(s,s.stateNode.containerInfo),n===null)throw Error(o(387));u=s.pendingProps;var g=s.memoizedState;h=g.element,zu(n,s),Go(s,u,null,l);var S=s.memoizedState;if(u=S.cache,ci(s,it,u),u!==g.cache&&Pu(s,[it],l,!0),Oo(),u=S.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=om(n,s,u,l);break e}else if(u!==h){h=sn(Error(o(424)),s),No(h),s=om(n,s,u,l);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for($e=un(n.firstChild),_t=s,Re=!0,ri=null,an=!0,l=ep(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Vi(),u===h){s=Bn(n,s,l);break e}Tt(n,s,u,l)}s=s.child}return s;case 26:return _a(n,s),n===null?(l=Sg(s.type,null,s.pendingProps,null))?s.memoizedState=l:Re||(l=s.type,n=s.pendingProps,u=Ga(Te.current).createElement(l),u[vt]=s,u[Ot]=n,Et(u,l,n),pt(u),s.stateNode=u):s.memoizedState=Sg(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ti(s),n===null&&Re&&(u=s.stateNode=yg(s.type,s.pendingProps,Te.current),_t=s,an=!0,h=$e,Ai(s.type)?(nf=h,$e=un(u.firstChild)):$e=h),Tt(n,s,s.pendingProps.children,l),_a(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Re&&((h=u=$e)&&(u=HE(u,s.type,s.pendingProps,an),u!==null?(s.stateNode=u,_t=s,$e=un(u.firstChild),an=!1,h=!0):h=!1),h||ui(s)),ti(s),h=s.type,g=s.pendingProps,S=n!==null?n.memoizedProps:null,u=g.children,Zc(h,g)?u=null:S!==null&&Zc(h,S)&&(s.flags|=32),s.memoizedState!==null&&(h=Qu(n,s,eE,null,null,l),nl._currentValue=h),_a(n,s),Tt(n,s,u,l),s.child;case 6:return n===null&&Re&&((n=l=$e)&&(l=qE(l,s.pendingProps,an),l!==null?(s.stateNode=l,_t=s,$e=null,n=!0):n=!1),n||ui(s)),null;case 13:return lm(n,s,l);case 4:return dt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Ki(s,null,u,l):Tt(n,s,u,l),s.child;case 11:return Zp(n,s,s.type,s.pendingProps,l);case 7:return Tt(n,s,s.pendingProps,l),s.child;case 8:return Tt(n,s,s.pendingProps.children,l),s.child;case 12:return Tt(n,s,s.pendingProps.children,l),s.child;case 10:return u=s.pendingProps,ci(s,s.type,u.value),Tt(n,s,u.children,l),s.child;case 9:return h=s.type._context,u=s.pendingProps.children,Fi(s),h=St(h),u=u(h),s.flags|=1,Tt(n,s,u,l),s.child;case 14:return Wp(n,s,s.type,s.pendingProps,l);case 15:return jp(n,s,s.type,s.pendingProps,l);case 19:return rm(n,s,l);case 31:return rE(n,s,l);case 22:return em(n,s,l,s.pendingProps);case 24:return Fi(s),u=St(it),n===null?(h=qu(),h===null&&(h=ze,g=ku(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=l),h=g),s.memoizedState={parent:u,cache:h},Vu(s),ci(s,it,h)):((n.lanes&l)!==0&&(zu(n,s),Go(s,null,null,l),Oo()),h=n.memoizedState,g=s.memoizedState,h.parent!==u?(h={parent:u,cache:u},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),ci(s,it,u)):(u=g.cache,ci(s,it,u),u!==h.cache&&Pu(s,[it],l,!0))),Tt(n,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Vn(n){n.flags|=4}function Cc(n,s,l,u,h){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(h&335544128)===h)if(n.stateNode.complete)n.flags|=8192;else if(Gm())n.flags|=8192;else throw Yi=sa,Bu}else n.flags&=-16777217}function cm(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!xg(s))if(Gm())n.flags|=8192;else throw Yi=sa,Bu}function Ta(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?zd():536870912,n.lanes|=s,Gs|=s)}function Vo(n,s){if(!Re)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Je(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,u=0;if(s)for(var h=n.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=u,n.childLanes=l,s}function cE(n,s,l){var u=s.pendingProps;switch(Du(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(s),null;case 1:return Je(s),null;case 3:return l=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),kn(it),Qe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(As(s)?Vn(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Lu())),Je(s),null;case 26:var h=s.type,g=s.memoizedState;return n===null?(Vn(s),g!==null?(Je(s),cm(s,g)):(Je(s),Cc(s,h,null,u,l))):g?g!==n.memoizedState?(Vn(s),Je(s),cm(s,g)):(Je(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Vn(s),Je(s),Cc(s,h,n,u,l)),null;case 27:if(Di(s),l=Te.current,h=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Vn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Je(s),null}n=oe.current,As(s)?zh(s):(n=yg(h,u,l),s.stateNode=n,Vn(s))}return Je(s),null;case 5:if(Di(s),h=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Vn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Je(s),null}if(g=oe.current,As(s))zh(s);else{var S=Ga(Te.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?S.createElement(h,{is:u.is}):S.createElement(h)}}g[vt]=s,g[Ot]=u;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=g;e:switch(Et(g,h,u),h){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Vn(s)}}return Je(s),Cc(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,l),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Vn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(n=Te.current,As(s)){if(n=s.stateNode,l=s.memoizedProps,u=null,h=_t,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}n[vt]=s,n=!!(n.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||lg(n.nodeValue,l)),n||ui(s,!0)}else n=Ga(n).createTextNode(u),n[vt]=s,s.stateNode=n}return Je(s),null;case 31:if(l=s.memoizedState,n===null||n.memoizedState!==null){if(u=As(s),l!==null){if(n===null){if(!u)throw Error(o(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[vt]=s}else Vi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Je(s),n=!1}else l=Lu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return s.flags&256?(Jt(s),s):(Jt(s),null);if((s.flags&128)!==0)throw Error(o(558))}return Je(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=As(s),u!==null&&u.dehydrated!==null){if(n===null){if(!h)throw Error(o(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));h[vt]=s}else Vi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Je(s),h=!1}else h=Lu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Jt(s),s):(Jt(s),null)}return Jt(s),(s.flags&128)!==0?(s.lanes=l,s):(l=u!==null,n=n!==null&&n.memoizedState!==null,l&&(u=s.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==h&&(u.flags|=2048)),l!==n&&l&&(s.child.flags|=8192),Ta(s,s.updateQueue),Je(s),null);case 4:return Qe(),n===null&&Jc(s.stateNode.containerInfo),Je(s),null;case 10:return kn(s.type),Je(s),null;case 19:if(Y(tt),u=s.memoizedState,u===null)return Je(s),null;if(h=(s.flags&128)!==0,g=u.rendering,g===null)if(h)Vo(u,!1);else{if(je!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=ra(n),g!==null){for(s.flags|=128,Vo(u,!1),n=g.updateQueue,s.updateQueue=n,Ta(s,n),s.subtreeFlags=0,n=l,l=s.child;l!==null;)kh(l,n),l=l.sibling;return j(tt,tt.current&1|2),Re&&Gn(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Ze()>ba&&(s.flags|=128,h=!0,Vo(u,!1),s.lanes=4194304)}else{if(!h)if(n=ra(g),n!==null){if(s.flags|=128,h=!0,n=n.updateQueue,s.updateQueue=n,Ta(s,n),Vo(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Re)return Je(s),null}else 2*Ze()-u.renderingStartTime>ba&&l!==536870912&&(s.flags|=128,h=!0,Vo(u,!1),s.lanes=4194304);u.isBackwards?(g.sibling=s.child,s.child=g):(n=u.last,n!==null?n.sibling=g:s.child=g,u.last=g)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Ze(),n.sibling=null,l=tt.current,j(tt,h?l&1|2:l&1),Re&&Gn(s,u.treeForkCount),n):(Je(s),null);case 22:case 23:return Jt(s),Yu(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(l&536870912)!==0&&(s.flags&128)===0&&(Je(s),s.subtreeFlags&6&&(s.flags|=8192)):Je(s),l=s.updateQueue,l!==null&&Ta(s,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048),n!==null&&Y($i),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),kn(it),Je(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function fE(n,s){switch(Du(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return kn(it),Qe(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Di(s),null;case 31:if(s.memoizedState!==null){if(Jt(s),s.alternate===null)throw Error(o(340));Vi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Jt(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Vi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Y(tt),null;case 4:return Qe(),null;case 10:return kn(s.type),null;case 22:case 23:return Jt(s),Yu(),n!==null&&Y($i),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return kn(it),null;case 25:return null;default:return null}}function fm(n,s){switch(Du(s),s.tag){case 3:kn(it),Qe();break;case 26:case 27:case 5:Di(s);break;case 4:Qe();break;case 31:s.memoizedState!==null&&Jt(s);break;case 13:Jt(s);break;case 19:Y(tt);break;case 10:kn(s.type);break;case 22:case 23:Jt(s),Yu(),n!==null&&Y($i);break;case 24:kn(it)}}function zo(n,s){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var h=u.next;l=h;do{if((l.tag&n)===n){u=void 0;var g=l.create,S=l.inst;u=g(),S.destroy=u}l=l.next}while(l!==h)}}catch(C){He(s,s.return,C)}}function gi(n,s,l){try{var u=s.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var g=h.next;u=g;do{if((u.tag&n)===n){var S=u.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,h=s;var R=l,U=C;try{U()}catch(z){He(h,R,z)}}}u=u.next}while(u!==g)}}catch(z){He(s,s.return,z)}}function dm(n){var s=n.updateQueue;if(s!==null){var l=n.stateNode;try{np(s,l)}catch(u){He(n,n.return,u)}}}function hm(n,s,l){l.props=Qi(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(u){He(n,s,u)}}function Fo(n,s){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof l=="function"?n.refCleanup=l(u):l.current=u}}catch(h){He(n,s,h)}}function bn(n,s){var l=n.ref,u=n.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(h){He(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(h){He(n,s,h)}else l.current=null}function pm(n){var s=n.type,l=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(h){He(n,n.return,h)}}function xc(n,s,l){try{var u=n.stateNode;UE(u,n.type,l,s),u[Ot]=s}catch(h){He(n,n.return,h)}}function mm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ai(n.type)||n.tag===4}function bc(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ai(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wc(n,s,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(n),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Un));else if(u!==4&&(u===27&&Ai(n.type)&&(l=n.stateNode,s=null),n=n.child,n!==null))for(wc(n,s,l),n=n.sibling;n!==null;)wc(n,s,l),n=n.sibling}function Ea(n,s,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(u!==4&&(u===27&&Ai(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Ea(n,s,l),n=n.sibling;n!==null;)Ea(n,s,l),n=n.sibling}function gm(n){var s=n.stateNode,l=n.memoizedProps;try{for(var u=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Et(s,u,l),s[vt]=n,s[Ot]=l}catch(g){He(n,n.return,g)}}var zn=!1,lt=!1,Rc=!1,ym=typeof WeakSet=="function"?WeakSet:Set,mt=null;function dE(n,s){if(n=n.containerInfo,Xc=za,n=Nh(n),Tu(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var h=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var S=0,C=-1,R=-1,U=0,z=0,J=n,P=null;t:for(;;){for(var B;J!==l||h!==0&&J.nodeType!==3||(C=S+h),J!==g||u!==0&&J.nodeType!==3||(R=S+u),J.nodeType===3&&(S+=J.nodeValue.length),(B=J.firstChild)!==null;)P=J,J=B;for(;;){if(J===n)break t;if(P===l&&++U===h&&(C=S),P===g&&++z===u&&(R=S),(B=J.nextSibling)!==null)break;J=P,P=J.parentNode}J=B}l=C===-1||R===-1?null:{start:C,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(Qc={focusedElem:n,selectionRange:l},za=!1,mt=s;mt!==null;)if(s=mt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,mt=n;else for(;mt!==null;){switch(s=mt,g=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)h=n[l],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,l=s,h=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var ne=Qi(l.type,h);n=u.getSnapshotBeforeUpdate(ne,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(de){He(l,l.return,de)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,l=n.nodeType,l===9)jc(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":jc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=s.sibling,n!==null){n.return=s.return,mt=n;break}mt=s.return}}function vm(n,s,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:$n(n,l),u&4&&zo(5,l);break;case 1:if($n(n,l),u&4)if(n=l.stateNode,s===null)try{n.componentDidMount()}catch(S){He(l,l.return,S)}else{var h=Qi(l.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(S){He(l,l.return,S)}}u&64&&dm(l),u&512&&Fo(l,l.return);break;case 3:if($n(n,l),u&64&&(n=l.updateQueue,n!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{np(n,s)}catch(S){He(l,l.return,S)}}break;case 27:s===null&&u&4&&gm(l);case 26:case 5:$n(n,l),s===null&&u&4&&pm(l),u&512&&Fo(l,l.return);break;case 12:$n(n,l);break;case 31:$n(n,l),u&4&&Tm(n,l);break;case 13:$n(n,l),u&4&&Em(n,l),u&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=TE.bind(null,l),BE(n,l))));break;case 22:if(u=l.memoizedState!==null||zn,!u){s=s!==null&&s.memoizedState!==null||lt,h=zn;var g=lt;zn=u,(lt=s)&&!g?Jn(n,l,(l.subtreeFlags&8772)!==0):$n(n,l),zn=h,lt=g}break;case 30:break;default:$n(n,l)}}function _m(n){var s=n.alternate;s!==null&&(n.alternate=null,_m(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&su(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Xe=null,Pt=!1;function Fn(n,s,l){for(l=l.child;l!==null;)Sm(n,s,l),l=l.sibling}function Sm(n,s,l){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(ii,l)}catch{}switch(l.tag){case 26:lt||bn(l,s),Fn(n,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:lt||bn(l,s);var u=Xe,h=Pt;Ai(l.type)&&(Xe=l.stateNode,Pt=!1),Fn(n,s,l),jo(l.stateNode),Xe=u,Pt=h;break;case 5:lt||bn(l,s);case 6:if(u=Xe,h=Pt,Xe=null,Fn(n,s,l),Xe=u,Pt=h,Xe!==null)if(Pt)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(l.stateNode)}catch(g){He(l,s,g)}else try{Xe.removeChild(l.stateNode)}catch(g){He(l,s,g)}break;case 18:Xe!==null&&(Pt?(n=Xe,dg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),Fs(n)):dg(Xe,l.stateNode));break;case 4:u=Xe,h=Pt,Xe=l.stateNode.containerInfo,Pt=!0,Fn(n,s,l),Xe=u,Pt=h;break;case 0:case 11:case 14:case 15:gi(2,l,s),lt||gi(4,l,s),Fn(n,s,l);break;case 1:lt||(bn(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"&&hm(l,s,u)),Fn(n,s,l);break;case 21:Fn(n,s,l);break;case 22:lt=(u=lt)||l.memoizedState!==null,Fn(n,s,l),lt=u;break;default:Fn(n,s,l)}}function Tm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Fs(n)}catch(l){He(s,s.return,l)}}}function Em(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Fs(n)}catch(l){He(s,s.return,l)}}function hE(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new ym),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new ym),s;default:throw Error(o(435,n.tag))}}function Aa(n,s){var l=hE(n);s.forEach(function(u){if(!l.has(u)){l.add(u);var h=EE.bind(null,n,u);u.then(h,h)}})}function kt(n,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var h=l[u],g=n,S=s,C=S;e:for(;C!==null;){switch(C.tag){case 27:if(Ai(C.type)){Xe=C.stateNode,Pt=!1;break e}break;case 5:Xe=C.stateNode,Pt=!1;break e;case 3:case 4:Xe=C.stateNode.containerInfo,Pt=!0;break e}C=C.return}if(Xe===null)throw Error(o(160));Sm(g,S,h),Xe=null,Pt=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Am(s,n),s=s.sibling}var yn=null;function Am(n,s){var l=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:kt(s,n),Ht(n),u&4&&(gi(3,n,n.return),zo(3,n),gi(5,n,n.return));break;case 1:kt(s,n),Ht(n),u&512&&(lt||l===null||bn(l,l.return)),u&64&&zn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var h=yn;if(kt(s,n),Ht(n),u&512&&(lt||l===null||bn(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=n.memoizedState,l===null)if(u===null)if(n.stateNode===null){e:{u=n.type,l=n.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":g=h.getElementsByTagName("title")[0],(!g||g[yo]||g[vt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(u),h.head.insertBefore(g,h.querySelector("head > title"))),Et(g,u,l),g[vt]=n,pt(g),u=g;break e;case"link":var S=Ag("link","href",h).get(u+(l.href||""));if(S){for(var C=0;C<S.length;C++)if(g=S[C],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(C,1);break t}}g=h.createElement(u),Et(g,u,l),h.head.appendChild(g);break;case"meta":if(S=Ag("meta","content",h).get(u+(l.content||""))){for(C=0;C<S.length;C++)if(g=S[C],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(C,1);break t}}g=h.createElement(u),Et(g,u,l),h.head.appendChild(g);break;default:throw Error(o(468,u))}g[vt]=n,pt(g),u=g}n.stateNode=u}else Cg(h,n.type,n.stateNode);else n.stateNode=Eg(h,u,n.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?Cg(h,n.type,n.stateNode):Eg(h,u,n.memoizedProps)):u===null&&n.stateNode!==null&&xc(n,n.memoizedProps,l.memoizedProps)}break;case 27:kt(s,n),Ht(n),u&512&&(lt||l===null||bn(l,l.return)),l!==null&&u&4&&xc(n,n.memoizedProps,l.memoizedProps);break;case 5:if(kt(s,n),Ht(n),u&512&&(lt||l===null||bn(l,l.return)),n.flags&32){h=n.stateNode;try{hs(h,"")}catch(ne){He(n,n.return,ne)}}u&4&&n.stateNode!=null&&(h=n.memoizedProps,xc(n,h,l!==null?l.memoizedProps:h)),u&1024&&(Rc=!0);break;case 6:if(kt(s,n),Ht(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,l=n.stateNode;try{l.nodeValue=u}catch(ne){He(n,n.return,ne)}}break;case 3:if(Ha=null,h=yn,yn=Pa(s.containerInfo),kt(s,n),yn=h,Ht(n),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Fs(s.containerInfo)}catch(ne){He(n,n.return,ne)}Rc&&(Rc=!1,Cm(n));break;case 4:u=yn,yn=Pa(n.stateNode.containerInfo),kt(s,n),Ht(n),yn=u;break;case 12:kt(s,n),Ht(n);break;case 31:kt(s,n),Ht(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Aa(n,u)));break;case 13:kt(s,n),Ht(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(xa=Ze()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Aa(n,u)));break;case 22:h=n.memoizedState!==null;var R=l!==null&&l.memoizedState!==null,U=zn,z=lt;if(zn=U||h,lt=z||R,kt(s,n),lt=z,zn=U,Ht(n),u&8192)e:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(l===null||R||zn||lt||Zi(n)),l=null,s=n;;){if(s.tag===5||s.tag===26){if(l===null){R=l=s;try{if(g=R.stateNode,h)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=R.stateNode;var J=R.memoizedProps.style,P=J!=null&&J.hasOwnProperty("display")?J.display:null;C.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(ne){He(R,R.return,ne)}}}else if(s.tag===6){if(l===null){R=s;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(ne){He(R,R.return,ne)}}}else if(s.tag===18){if(l===null){R=s;try{var B=R.stateNode;h?hg(B,!0):hg(R.stateNode,!1)}catch(ne){He(R,R.return,ne)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Aa(n,l))));break;case 19:kt(s,n),Ht(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Aa(n,u)));break;case 30:break;case 21:break;default:kt(s,n),Ht(n)}}function Ht(n){var s=n.flags;if(s&2){try{for(var l,u=n.return;u!==null;){if(mm(u)){l=u;break}u=u.return}if(l==null)throw Error(o(160));switch(l.tag){case 27:var h=l.stateNode,g=bc(n);Ea(n,g,h);break;case 5:var S=l.stateNode;l.flags&32&&(hs(S,""),l.flags&=-33);var C=bc(n);Ea(n,C,S);break;case 3:case 4:var R=l.stateNode.containerInfo,U=bc(n);wc(n,U,R);break;default:throw Error(o(161))}}catch(z){He(n,n.return,z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Cm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Cm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function $n(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)vm(n,s.alternate,s),s=s.sibling}function Zi(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:gi(4,s,s.return),Zi(s);break;case 1:bn(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&hm(s,s.return,l),Zi(s);break;case 27:jo(s.stateNode);case 26:case 5:bn(s,s.return),Zi(s);break;case 22:s.memoizedState===null&&Zi(s);break;case 30:Zi(s);break;default:Zi(s)}n=n.sibling}}function Jn(n,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,h=n,g=s,S=g.flags;switch(g.tag){case 0:case 11:case 15:Jn(h,g,l),zo(4,g);break;case 1:if(Jn(h,g,l),u=g,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(U){He(u,u.return,U)}if(u=g,h=u.updateQueue,h!==null){var C=u.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)tp(R[h],C)}catch(U){He(u,u.return,U)}}l&&S&64&&dm(g),Fo(g,g.return);break;case 27:gm(g);case 26:case 5:Jn(h,g,l),l&&u===null&&S&4&&pm(g),Fo(g,g.return);break;case 12:Jn(h,g,l);break;case 31:Jn(h,g,l),l&&S&4&&Tm(h,g);break;case 13:Jn(h,g,l),l&&S&4&&Em(h,g);break;case 22:g.memoizedState===null&&Jn(h,g,l),Fo(g,g.return);break;case 30:break;default:Jn(h,g,l)}s=s.sibling}}function Nc(n,s){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Mo(l))}function Mc(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Mo(n))}function vn(n,s,l,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)xm(n,s,l,u),s=s.sibling}function xm(n,s,l,u){var h=s.flags;switch(s.tag){case 0:case 11:case 15:vn(n,s,l,u),h&2048&&zo(9,s);break;case 1:vn(n,s,l,u);break;case 3:vn(n,s,l,u),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Mo(n)));break;case 12:if(h&2048){vn(n,s,l,u),n=s.stateNode;try{var g=s.memoizedProps,S=g.id,C=g.onPostCommit;typeof C=="function"&&C(S,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){He(s,s.return,R)}}else vn(n,s,l,u);break;case 31:vn(n,s,l,u);break;case 13:vn(n,s,l,u);break;case 23:break;case 22:g=s.stateNode,S=s.alternate,s.memoizedState!==null?g._visibility&2?vn(n,s,l,u):$o(n,s):g._visibility&2?vn(n,s,l,u):(g._visibility|=2,Us(n,s,l,u,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Nc(S,s);break;case 24:vn(n,s,l,u),h&2048&&Mc(s.alternate,s);break;default:vn(n,s,l,u)}}function Us(n,s,l,u,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=n,S=s,C=l,R=u,U=S.flags;switch(S.tag){case 0:case 11:case 15:Us(g,S,C,R,h),zo(8,S);break;case 23:break;case 22:var z=S.stateNode;S.memoizedState!==null?z._visibility&2?Us(g,S,C,R,h):$o(g,S):(z._visibility|=2,Us(g,S,C,R,h)),h&&U&2048&&Nc(S.alternate,S);break;case 24:Us(g,S,C,R,h),h&&U&2048&&Mc(S.alternate,S);break;default:Us(g,S,C,R,h)}s=s.sibling}}function $o(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=n,u=s,h=u.flags;switch(u.tag){case 22:$o(l,u),h&2048&&Nc(u.alternate,u);break;case 24:$o(l,u),h&2048&&Mc(u.alternate,u);break;default:$o(l,u)}s=s.sibling}}var Jo=8192;function Ls(n,s,l){if(n.subtreeFlags&Jo)for(n=n.child;n!==null;)bm(n,s,l),n=n.sibling}function bm(n,s,l){switch(n.tag){case 26:Ls(n,s,l),n.flags&Jo&&n.memoizedState!==null&&jE(l,yn,n.memoizedState,n.memoizedProps);break;case 5:Ls(n,s,l);break;case 3:case 4:var u=yn;yn=Pa(n.stateNode.containerInfo),Ls(n,s,l),yn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Jo,Jo=16777216,Ls(n,s,l),Jo=u):Ls(n,s,l));break;default:Ls(n,s,l)}}function wm(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Yo(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];mt=u,Nm(u,n)}wm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rm(n),n=n.sibling}function Rm(n){switch(n.tag){case 0:case 11:case 15:Yo(n),n.flags&2048&&gi(9,n,n.return);break;case 3:Yo(n);break;case 12:Yo(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Ca(n)):Yo(n);break;default:Yo(n)}}function Ca(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];mt=u,Nm(u,n)}wm(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:gi(8,s,s.return),Ca(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Ca(s));break;default:Ca(s)}n=n.sibling}}function Nm(n,s){for(;mt!==null;){var l=mt;switch(l.tag){case 0:case 11:case 15:gi(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Mo(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,mt=u;else e:for(l=n;mt!==null;){u=mt;var h=u.sibling,g=u.return;if(_m(u),u===l){mt=null;break e}if(h!==null){h.return=g,mt=h;break e}mt=g}}}var pE={getCacheForType:function(n){var s=St(it),l=s.data.get(n);return l===void 0&&(l=n(),s.data.set(n,l)),l},cacheSignal:function(){return St(it).controller.signal}},mE=typeof WeakMap=="function"?WeakMap:Map,Ue=0,ze=null,Ae=null,xe=0,ke=0,Yt=null,yi=!1,Os=!1,Ic=!1,Yn=0,je=0,vi=0,Wi=0,Dc=0,Kt=0,Gs=0,Ko=null,qt=null,Uc=!1,xa=0,Mm=0,ba=1/0,wa=null,_i=null,ut=0,Si=null,Ps=null,Kn=0,Lc=0,Oc=null,Im=null,Xo=0,Gc=null;function Xt(){return(Ue&2)!==0&&xe!==0?xe&-xe:V.T!==null?Vc():Yd()}function Dm(){if(Kt===0)if((xe&536870912)===0||Re){var n=Ol;Ol<<=1,(Ol&3932160)===0&&(Ol=262144),Kt=n}else Kt=536870912;return n=$t.current,n!==null&&(n.flags|=32),Kt}function Bt(n,s,l){(n===ze&&(ke===2||ke===9)||n.cancelPendingCommit!==null)&&(ks(n,0),Ti(n,xe,Kt,!1)),go(n,l),((Ue&2)===0||n!==ze)&&(n===ze&&((Ue&2)===0&&(Wi|=l),je===4&&Ti(n,xe,Kt,!1)),wn(n))}function Um(n,s,l){if((Ue&6)!==0)throw Error(o(327));var u=!l&&(s&127)===0&&(s&n.expiredLanes)===0||mo(n,s),h=u?vE(n,s):kc(n,s,!0),g=u;do{if(h===0){Os&&!u&&Ti(n,s,0,!1);break}else{if(l=n.current.alternate,g&&!gE(l)){h=kc(n,s,!1),g=!1;continue}if(h===2){if(g=s,n.errorRecoveryDisabledLanes&g)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var C=n;h=Ko;var R=C.current.memoizedState.isDehydrated;if(R&&(ks(C,S).flags|=256),S=kc(C,S,!1),S!==2){if(Ic&&!R){C.errorRecoveryDisabledLanes|=g,Wi|=g,h=4;break e}g=qt,qt=h,g!==null&&(qt===null?qt=g:qt.push.apply(qt,g))}h=S}if(g=!1,h!==2)continue}}if(h===1){ks(n,0),Ti(n,s,0,!0);break}e:{switch(u=n,g=h,g){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Ti(u,s,Kt,!yi);break e;case 2:qt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(h=xa+300-Ze(),10<h)){if(Ti(u,s,Kt,!yi),Pl(u,0,!0)!==0)break e;Kn=s,u.timeoutHandle=cg(Lm.bind(null,u,l,qt,wa,Uc,s,Kt,Wi,Gs,yi,g,"Throttled",-0,0),h);break e}Lm(u,l,qt,wa,Uc,s,Kt,Wi,Gs,yi,g,null,-0,0)}}break}while(!0);wn(n)}function Lm(n,s,l,u,h,g,S,C,R,U,z,J,P,B){if(n.timeoutHandle=-1,J=s.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Un},bm(s,g,J);var ne=(g&62914560)===g?xa-Ze():(g&4194048)===g?Mm-Ze():0;if(ne=eA(J,ne),ne!==null){Kn=g,n.cancelPendingCommit=ne(Vm.bind(null,n,s,g,l,u,h,S,C,R,z,J,null,P,B)),Ti(n,g,S,!U);return}}Vm(n,s,g,l,u,h,S,C,R)}function gE(n){for(var s=n;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var h=l[u],g=h.getSnapshot;h=h.value;try{if(!zt(g(),h))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ti(n,s,l,u){s&=~Dc,s&=~Wi,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var h=s;0<h;){var g=31-wt(h),S=1<<g;u[g]=-1,h&=~S}l!==0&&Fd(n,l,s)}function Ra(){return(Ue&6)===0?(Qo(0),!1):!0}function Pc(){if(Ae!==null){if(ke===0)var n=Ae.return;else n=Ae,Pn=zi=null,ju(n),Rs=null,Do=0,n=Ae;for(;n!==null;)fm(n.alternate,n),n=n.return;Ae=null}}function ks(n,s){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,GE(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Kn=0,Pc(),ze=n,Ae=l=On(n.current,null),xe=s,ke=0,Yt=null,yi=!1,Os=mo(n,s),Ic=!1,Gs=Kt=Dc=Wi=vi=je=0,qt=Ko=null,Uc=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var h=31-wt(u),g=1<<h;s|=n[h],u&=~g}return Yn=s,Xl(),l}function Om(n,s){ve=null,V.H=qo,s===ws||s===ia?(s=Zh(),ke=3):s===Bu?(s=Zh(),ke=4):ke=s===mc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Yt=s,Ae===null&&(je=1,ya(n,sn(s,n.current)))}function Gm(){var n=$t.current;return n===null?!0:(xe&4194048)===xe?rn===null:(xe&62914560)===xe||(xe&536870912)!==0?n===rn:!1}function Pm(){var n=V.H;return V.H=qo,n===null?qo:n}function km(){var n=V.A;return V.A=pE,n}function Na(){je=4,yi||(xe&4194048)!==xe&&$t.current!==null||(Os=!0),(vi&134217727)===0&&(Wi&134217727)===0||ze===null||Ti(ze,xe,Kt,!1)}function kc(n,s,l){var u=Ue;Ue|=2;var h=Pm(),g=km();(ze!==n||xe!==s)&&(wa=null,ks(n,s)),s=!1;var S=je;e:do try{if(ke!==0&&Ae!==null){var C=Ae,R=Yt;switch(ke){case 8:Pc(),S=6;break e;case 3:case 2:case 9:case 6:$t.current===null&&(s=!0);var U=ke;if(ke=0,Yt=null,Hs(n,C,R,U),l&&Os){S=0;break e}break;default:U=ke,ke=0,Yt=null,Hs(n,C,R,U)}}yE(),S=je;break}catch(z){Om(n,z)}while(!0);return s&&n.shellSuspendCounter++,Pn=zi=null,Ue=u,V.H=h,V.A=g,Ae===null&&(ze=null,xe=0,Xl()),S}function yE(){for(;Ae!==null;)Hm(Ae)}function vE(n,s){var l=Ue;Ue|=2;var u=Pm(),h=km();ze!==n||xe!==s?(wa=null,ba=Ze()+500,ks(n,s)):Os=mo(n,s);e:do try{if(ke!==0&&Ae!==null){s=Ae;var g=Yt;t:switch(ke){case 1:ke=0,Yt=null,Hs(n,s,g,1);break;case 2:case 9:if(Xh(g)){ke=0,Yt=null,qm(s);break}s=function(){ke!==2&&ke!==9||ze!==n||(ke=7),wn(n)},g.then(s,s);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:Xh(g)?(ke=0,Yt=null,qm(s)):(ke=0,Yt=null,Hs(n,s,g,7));break;case 5:var S=null;switch(Ae.tag){case 26:S=Ae.memoizedState;case 5:case 27:var C=Ae;if(S?xg(S):C.stateNode.complete){ke=0,Yt=null;var R=C.sibling;if(R!==null)Ae=R;else{var U=C.return;U!==null?(Ae=U,Ma(U)):Ae=null}break t}}ke=0,Yt=null,Hs(n,s,g,5);break;case 6:ke=0,Yt=null,Hs(n,s,g,6);break;case 8:Pc(),je=6;break e;default:throw Error(o(462))}}_E();break}catch(z){Om(n,z)}while(!0);return Pn=zi=null,V.H=u,V.A=h,Ue=l,Ae!==null?0:(ze=null,xe=0,Xl(),je)}function _E(){for(;Ae!==null&&!jr();)Hm(Ae)}function Hm(n){var s=um(n.alternate,n,Yn);n.memoizedProps=n.pendingProps,s===null?Ma(n):Ae=s}function qm(n){var s=n,l=s.alternate;switch(s.tag){case 15:case 0:s=im(l,s,s.pendingProps,s.type,void 0,xe);break;case 11:s=im(l,s,s.pendingProps,s.type.render,s.ref,xe);break;case 5:ju(s);default:fm(l,s),s=Ae=kh(s,Yn),s=um(l,s,Yn)}n.memoizedProps=n.pendingProps,s===null?Ma(n):Ae=s}function Hs(n,s,l,u){Pn=zi=null,ju(s),Rs=null,Do=0;var h=s.return;try{if(aE(n,h,s,l,xe)){je=1,ya(n,sn(l,n.current)),Ae=null;return}}catch(g){if(h!==null)throw Ae=h,g;je=1,ya(n,sn(l,n.current)),Ae=null;return}s.flags&32768?(Re||u===1?n=!0:Os||(xe&536870912)!==0?n=!1:(yi=n=!0,(u===2||u===9||u===3||u===6)&&(u=$t.current,u!==null&&u.tag===13&&(u.flags|=16384))),Bm(s,n)):Ma(s)}function Ma(n){var s=n;do{if((s.flags&32768)!==0){Bm(s,yi);return}n=s.return;var l=cE(s.alternate,s,Yn);if(l!==null){Ae=l;return}if(s=s.sibling,s!==null){Ae=s;return}Ae=s=n}while(s!==null);je===0&&(je=5)}function Bm(n,s){do{var l=fE(n.alternate,n);if(l!==null){l.flags&=32767,Ae=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(n=n.sibling,n!==null)){Ae=n;return}Ae=n=l}while(n!==null);je=6,Ae=null}function Vm(n,s,l,u,h,g,S,C,R){n.cancelPendingCommit=null;do Ia();while(ut!==0);if((Ue&6)!==0)throw Error(o(327));if(s!==null){if(s===n.current)throw Error(o(177));if(g=s.lanes|s.childLanes,g|=bu,WS(n,l,g,S,C,R),n===ze&&(Ae=ze=null,xe=0),Ps=s,Si=n,Kn=l,Lc=g,Oc=h,Im=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,AE(ni,function(){return Ym(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=V.T,V.T=null,h=W.p,W.p=2,S=Ue,Ue|=4;try{dE(n,s,l)}finally{Ue=S,W.p=h,V.T=u}}ut=1,zm(),Fm(),$m()}}function zm(){if(ut===1){ut=0;var n=Si,s=Ps,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=V.T,V.T=null;var u=W.p;W.p=2;var h=Ue;Ue|=4;try{Am(s,n);var g=Qc,S=Nh(n.containerInfo),C=g.focusedElem,R=g.selectionRange;if(S!==C&&C&&C.ownerDocument&&Rh(C.ownerDocument.documentElement,C)){if(R!==null&&Tu(C)){var U=R.start,z=R.end;if(z===void 0&&(z=U),"selectionStart"in C)C.selectionStart=U,C.selectionEnd=Math.min(z,C.value.length);else{var J=C.ownerDocument||document,P=J&&J.defaultView||window;if(P.getSelection){var B=P.getSelection(),ne=C.textContent.length,de=Math.min(R.start,ne),Ve=R.end===void 0?de:Math.min(R.end,ne);!B.extend&&de>Ve&&(S=Ve,Ve=de,de=S);var I=wh(C,de),N=wh(C,Ve);if(I&&N&&(B.rangeCount!==1||B.anchorNode!==I.node||B.anchorOffset!==I.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var D=J.createRange();D.setStart(I.node,I.offset),B.removeAllRanges(),de>Ve?(B.addRange(D),B.extend(N.node,N.offset)):(D.setEnd(N.node,N.offset),B.addRange(D))}}}}for(J=[],B=C;B=B.parentNode;)B.nodeType===1&&J.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<J.length;C++){var F=J[C];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}za=!!Xc,Qc=Xc=null}finally{Ue=h,W.p=u,V.T=l}}n.current=s,ut=2}}function Fm(){if(ut===2){ut=0;var n=Si,s=Ps,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=V.T,V.T=null;var u=W.p;W.p=2;var h=Ue;Ue|=4;try{vm(n,s.alternate,s)}finally{Ue=h,W.p=u,V.T=l}}ut=3}}function $m(){if(ut===4||ut===3){ut=0,ht();var n=Si,s=Ps,l=Kn,u=Im;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ut=5:(ut=0,Ps=Si=null,Jm(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(_i=null),nu(l),s=s.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(ii,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=V.T,h=W.p,W.p=2,V.T=null;try{for(var g=n.onRecoverableError,S=0;S<u.length;S++){var C=u[S];g(C.value,{componentStack:C.stack})}}finally{V.T=s,W.p=h}}(Kn&3)!==0&&Ia(),wn(n),h=n.pendingLanes,(l&261930)!==0&&(h&42)!==0?n===Gc?Xo++:(Xo=0,Gc=n):Xo=0,Qo(0)}}function Jm(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Mo(s)))}function Ia(){return zm(),Fm(),$m(),Ym()}function Ym(){if(ut!==5)return!1;var n=Si,s=Lc;Lc=0;var l=nu(Kn),u=V.T,h=W.p;try{W.p=32>l?32:l,V.T=null,l=Oc,Oc=null;var g=Si,S=Kn;if(ut=0,Ps=Si=null,Kn=0,(Ue&6)!==0)throw Error(o(331));var C=Ue;if(Ue|=4,Rm(g.current),xm(g,g.current,S,l),Ue=C,Qo(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(ii,g)}catch{}return!0}finally{W.p=h,V.T=u,Jm(n,s)}}function Km(n,s,l){s=sn(l,s),s=pc(n.stateNode,s,2),n=hi(n,s,2),n!==null&&(go(n,2),wn(n))}function He(n,s,l){if(n.tag===3)Km(n,n,l);else for(;s!==null;){if(s.tag===3){Km(s,n,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(_i===null||!_i.has(u))){n=sn(l,n),l=Xp(2),u=hi(s,l,2),u!==null&&(Qp(l,u,s,n),go(u,2),wn(u));break}}s=s.return}}function Hc(n,s,l){var u=n.pingCache;if(u===null){u=n.pingCache=new mE;var h=new Set;u.set(s,h)}else h=u.get(s),h===void 0&&(h=new Set,u.set(s,h));h.has(l)||(Ic=!0,h.add(l),n=SE.bind(null,n,s,l),s.then(n,n))}function SE(n,s,l){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,ze===n&&(xe&l)===l&&(je===4||je===3&&(xe&62914560)===xe&&300>Ze()-xa?(Ue&2)===0&&ks(n,0):Dc|=l,Gs===xe&&(Gs=0)),wn(n)}function Xm(n,s){s===0&&(s=zd()),n=qi(n,s),n!==null&&(go(n,s),wn(n))}function TE(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),Xm(n,l)}function EE(n,s){var l=0;switch(n.tag){case 31:case 13:var u=n.stateNode,h=n.memoizedState;h!==null&&(l=h.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Xm(n,l)}function AE(n,s){return fo(n,s)}var Da=null,qs=null,qc=!1,Ua=!1,Bc=!1,Ei=0;function wn(n){n!==qs&&n.next===null&&(qs===null?Da=qs=n:qs=qs.next=n),Ua=!0,qc||(qc=!0,xE())}function Qo(n,s){if(!Bc&&Ua){Bc=!0;do for(var l=!1,u=Da;u!==null;){if(n!==0){var h=u.pendingLanes;if(h===0)var g=0;else{var S=u.suspendedLanes,C=u.pingedLanes;g=(1<<31-wt(42|n)+1)-1,g&=h&~(S&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,jm(u,g))}else g=xe,g=Pl(u,u===ze?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||mo(u,g)||(l=!0,jm(u,g));u=u.next}while(l);Bc=!1}}function CE(){Qm()}function Qm(){Ua=qc=!1;var n=0;Ei!==0&&OE()&&(n=Ei);for(var s=Ze(),l=null,u=Da;u!==null;){var h=u.next,g=Zm(u,s);g===0?(u.next=null,l===null?Da=h:l.next=h,h===null&&(qs=l)):(l=u,(n!==0||(g&3)!==0)&&(Ua=!0)),u=h}ut!==0&&ut!==5||Qo(n),Ei!==0&&(Ei=0)}function Zm(n,s){for(var l=n.suspendedLanes,u=n.pingedLanes,h=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var S=31-wt(g),C=1<<S,R=h[S];R===-1?((C&l)===0||(C&u)!==0)&&(h[S]=ZS(C,s)):R<=s&&(n.expiredLanes|=C),g&=~C}if(s=ze,l=xe,l=Pl(n,n===s?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,l===0||n===s&&(ke===2||ke===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&ho(u),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||mo(n,l)){if(s=l&-l,s===n.callbackPriority)return s;switch(u!==null&&ho(u),nu(l)){case 2:case 8:l=Ke;break;case 32:l=ni;break;case 268435456:l=Ut;break;default:l=ni}return u=Wm.bind(null,n),l=fo(l,u),n.callbackPriority=s,n.callbackNode=l,s}return u!==null&&u!==null&&ho(u),n.callbackPriority=2,n.callbackNode=null,2}function Wm(n,s){if(ut!==0&&ut!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Ia()&&n.callbackNode!==l)return null;var u=xe;return u=Pl(n,n===ze?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Um(n,u,s),Zm(n,Ze()),n.callbackNode!=null&&n.callbackNode===l?Wm.bind(null,n):null)}function jm(n,s){if(Ia())return null;Um(n,s,!0)}function xE(){PE(function(){(Ue&6)!==0?fo(In,CE):Qm()})}function Vc(){if(Ei===0){var n=xs;n===0&&(n=si,si<<=1,(si&261888)===0&&(si=256)),Ei=n}return Ei}function eg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Bl(""+n)}function tg(n,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,n.id&&l.setAttribute("form",n.id),s.parentNode.insertBefore(l,s),n=new FormData(n),l.parentNode.removeChild(l),n}function bE(n,s,l,u,h){if(s==="submit"&&l&&l.stateNode===h){var g=eg((h[Ot]||null).action),S=u.submitter;S&&(s=(s=S[Ot]||null)?eg(s.formAction):S.getAttribute("formAction"),s!==null&&(g=s,S=null));var C=new $l("action","action",null,u,h);n.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ei!==0){var R=S?tg(h,S):new FormData(h);rc(l,{pending:!0,data:R,method:h.method,action:g},null,R)}}else typeof g=="function"&&(C.preventDefault(),R=S?tg(h,S):new FormData(h),rc(l,{pending:!0,data:R,method:h.method,action:g},g,R))},currentTarget:h}]})}}for(var zc=0;zc<xu.length;zc++){var Fc=xu[zc],wE=Fc.toLowerCase(),RE=Fc[0].toUpperCase()+Fc.slice(1);gn(wE,"on"+RE)}gn(Dh,"onAnimationEnd"),gn(Uh,"onAnimationIteration"),gn(Lh,"onAnimationStart"),gn("dblclick","onDoubleClick"),gn("focusin","onFocus"),gn("focusout","onBlur"),gn(FT,"onTransitionRun"),gn($T,"onTransitionStart"),gn(JT,"onTransitionCancel"),gn(Oh,"onTransitionEnd"),fs("onMouseEnter",["mouseout","mouseover"]),fs("onMouseLeave",["mouseout","mouseover"]),fs("onPointerEnter",["pointerout","pointerover"]),fs("onPointerLeave",["pointerout","pointerover"]),Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zo));function ng(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var u=n[l],h=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var S=u.length-1;0<=S;S--){var C=u[S],R=C.instance,U=C.currentTarget;if(C=C.listener,R!==g&&h.isPropagationStopped())break e;g=C,h.currentTarget=U;try{g(h)}catch(z){Kl(z)}h.currentTarget=null,g=R}else for(S=0;S<u.length;S++){if(C=u[S],R=C.instance,U=C.currentTarget,C=C.listener,R!==g&&h.isPropagationStopped())break e;g=C,h.currentTarget=U;try{g(h)}catch(z){Kl(z)}h.currentTarget=null,g=R}}}}function Ce(n,s){var l=s[iu];l===void 0&&(l=s[iu]=new Set);var u=n+"__bubble";l.has(u)||(ig(s,n,2,!1),l.add(u))}function $c(n,s,l){var u=0;s&&(u|=4),ig(l,n,u,s)}var La="_reactListening"+Math.random().toString(36).slice(2);function Jc(n){if(!n[La]){n[La]=!0,Qd.forEach(function(l){l!=="selectionchange"&&(NE.has(l)||$c(l,!1,n),$c(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[La]||(s[La]=!0,$c("selectionchange",!1,s))}}function ig(n,s,l,u){switch(Dg(s)){case 2:var h=iA;break;case 8:h=sA;break;default:h=rf}l=h.bind(null,s,l,n),h=void 0,!du||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),u?h!==void 0?n.addEventListener(s,l,{capture:!0,passive:h}):n.addEventListener(s,l,!0):h!==void 0?n.addEventListener(s,l,{passive:h}):n.addEventListener(s,l,!1)}function Yc(n,s,l,u,h){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var C=u.stateNode.containerInfo;if(C===h)break;if(S===4)for(S=u.return;S!==null;){var R=S.tag;if((R===3||R===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;C!==null;){if(S=rs(C),S===null)return;if(R=S.tag,R===5||R===6||R===26||R===27){u=g=S;continue e}C=C.parentNode}}u=u.return}rh(function(){var U=g,z=cu(l),J=[];e:{var P=Gh.get(n);if(P!==void 0){var B=$l,ne=n;switch(n){case"keypress":if(zl(l)===0)break e;case"keydown":case"keyup":B=ET;break;case"focusin":ne="focus",B=gu;break;case"focusout":ne="blur",B=gu;break;case"beforeblur":case"afterblur":B=gu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=cT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=xT;break;case Dh:case Uh:case Lh:B=hT;break;case Oh:B=wT;break;case"scroll":case"scrollend":B=rT;break;case"wheel":B=NT;break;case"copy":case"cut":case"paste":B=mT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=hh;break;case"toggle":case"beforetoggle":B=IT}var de=(s&4)!==0,Ve=!de&&(n==="scroll"||n==="scrollend"),I=de?P!==null?P+"Capture":null:P;de=[];for(var N=U,D;N!==null;){var F=N;if(D=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||D===null||I===null||(F=_o(N,I),F!=null&&de.push(Wo(N,F,D))),Ve)break;N=N.return}0<de.length&&(P=new B(P,ne,null,l,z),J.push({event:P,listeners:de}))}}if((s&7)===0){e:{if(P=n==="mouseover"||n==="pointerover",B=n==="mouseout"||n==="pointerout",P&&l!==uu&&(ne=l.relatedTarget||l.fromElement)&&(rs(ne)||ne[as]))break e;if((B||P)&&(P=z.window===z?z:(P=z.ownerDocument)?P.defaultView||P.parentWindow:window,B?(ne=l.relatedTarget||l.toElement,B=U,ne=ne?rs(ne):null,ne!==null&&(Ve=r(ne),de=ne.tag,ne!==Ve||de!==5&&de!==27&&de!==6)&&(ne=null)):(B=null,ne=U),B!==ne)){if(de=fh,F="onMouseLeave",I="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(de=hh,F="onPointerLeave",I="onPointerEnter",N="pointer"),Ve=B==null?P:vo(B),D=ne==null?P:vo(ne),P=new de(F,N+"leave",B,l,z),P.target=Ve,P.relatedTarget=D,F=null,rs(z)===U&&(de=new de(I,N+"enter",ne,l,z),de.target=D,de.relatedTarget=Ve,F=de),Ve=F,B&&ne)t:{for(de=ME,I=B,N=ne,D=0,F=I;F;F=de(F))D++;F=0;for(var ce=N;ce;ce=de(ce))F++;for(;0<D-F;)I=de(I),D--;for(;0<F-D;)N=de(N),F--;for(;D--;){if(I===N||N!==null&&I===N.alternate){de=I;break t}I=de(I),N=de(N)}de=null}else de=null;B!==null&&sg(J,P,B,de,!1),ne!==null&&Ve!==null&&sg(J,Ve,ne,de,!0)}}e:{if(P=U?vo(U):window,B=P.nodeName&&P.nodeName.toLowerCase(),B==="select"||B==="input"&&P.type==="file")var Me=Th;else if(_h(P))if(Eh)Me=BT;else{Me=HT;var re=kT}else B=P.nodeName,!B||B.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?U&&ru(U.elementType)&&(Me=Th):Me=qT;if(Me&&(Me=Me(n,U))){Sh(J,Me,l,z);break e}re&&re(n,P,U),n==="focusout"&&U&&P.type==="number"&&U.memoizedProps.value!=null&&au(P,"number",P.value)}switch(re=U?vo(U):window,n){case"focusin":(_h(re)||re.contentEditable==="true")&&(ys=re,Eu=U,wo=null);break;case"focusout":wo=Eu=ys=null;break;case"mousedown":Au=!0;break;case"contextmenu":case"mouseup":case"dragend":Au=!1,Mh(J,l,z);break;case"selectionchange":if(zT)break;case"keydown":case"keyup":Mh(J,l,z)}var _e;if(vu)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else gs?yh(n,l)&&(be="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(be="onCompositionStart");be&&(ph&&l.locale!=="ko"&&(gs||be!=="onCompositionStart"?be==="onCompositionEnd"&&gs&&(_e=uh()):(li=z,hu="value"in li?li.value:li.textContent,gs=!0)),re=Oa(U,be),0<re.length&&(be=new dh(be,n,null,l,z),J.push({event:be,listeners:re}),_e?be.data=_e:(_e=vh(l),_e!==null&&(be.data=_e)))),(_e=UT?LT(n,l):OT(n,l))&&(be=Oa(U,"onBeforeInput"),0<be.length&&(re=new dh("onBeforeInput","beforeinput",null,l,z),J.push({event:re,listeners:be}),re.data=_e)),bE(J,n,U,l,z)}ng(J,s)})}function Wo(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Oa(n,s){for(var l=s+"Capture",u=[];n!==null;){var h=n,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=_o(n,l),h!=null&&u.unshift(Wo(n,h,g)),h=_o(n,s),h!=null&&u.push(Wo(n,h,g))),n.tag===3)return u;n=n.return}return[]}function ME(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function sg(n,s,l,u,h){for(var g=s._reactName,S=[];l!==null&&l!==u;){var C=l,R=C.alternate,U=C.stateNode;if(C=C.tag,R!==null&&R===u)break;C!==5&&C!==26&&C!==27||U===null||(R=U,h?(U=_o(l,g),U!=null&&S.unshift(Wo(l,U,R))):h||(U=_o(l,g),U!=null&&S.push(Wo(l,U,R)))),l=l.return}S.length!==0&&n.push({event:s,listeners:S})}var IE=/\r\n?/g,DE=/\u0000|\uFFFD/g;function og(n){return(typeof n=="string"?n:""+n).replace(IE,`
`).replace(DE,"")}function lg(n,s){return s=og(s),og(n)===s}function Be(n,s,l,u,h,g){switch(l){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||hs(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&hs(n,""+u);break;case"className":Hl(n,"class",u);break;case"tabIndex":Hl(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Hl(n,l,u);break;case"style":lh(n,u,g);break;case"data":if(s!=="object"){Hl(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||l!=="href")){n.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=Bl(""+u),n.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(s!=="input"&&Be(n,s,"name",h.name,h,null),Be(n,s,"formEncType",h.formEncType,h,null),Be(n,s,"formMethod",h.formMethod,h,null),Be(n,s,"formTarget",h.formTarget,h,null)):(Be(n,s,"encType",h.encType,h,null),Be(n,s,"method",h.method,h,null),Be(n,s,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=Bl(""+u),n.setAttribute(l,u);break;case"onClick":u!=null&&(n.onclick=Un);break;case"onScroll":u!=null&&Ce("scroll",n);break;case"onScrollEnd":u!=null&&Ce("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(l=u.__html,l!=null){if(h.children!=null)throw Error(o(60));n.innerHTML=l}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}l=Bl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""+u):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":u===!0?n.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,u):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(l,u):n.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(l):n.setAttribute(l,u);break;case"popover":Ce("beforetoggle",n),Ce("toggle",n),kl(n,"popover",u);break;case"xlinkActuate":Dn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Dn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Dn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Dn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Dn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Dn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Dn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Dn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Dn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":kl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=lT.get(l)||l,kl(n,l,u))}}function Kc(n,s,l,u,h,g){switch(l){case"style":lh(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(l=u.__html,l!=null){if(h.children!=null)throw Error(o(60));n.innerHTML=l}}break;case"children":typeof u=="string"?hs(n,u):(typeof u=="number"||typeof u=="bigint")&&hs(n,""+u);break;case"onScroll":u!=null&&Ce("scroll",n);break;case"onScrollEnd":u!=null&&Ce("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Un);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zd.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(h=l.endsWith("Capture"),s=l.slice(2,h?l.length-7:void 0),g=n[Ot]||null,g=g!=null?g[l]:null,typeof g=="function"&&n.removeEventListener(s,g,h),typeof u=="function")){typeof g!="function"&&g!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(s,u,h);break e}l in n?n[l]=u:u===!0?n.setAttribute(l,""):kl(n,l,u)}}}function Et(n,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",n),Ce("load",n);var u=!1,h=!1,g;for(g in l)if(l.hasOwnProperty(g)){var S=l[g];if(S!=null)switch(g){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Be(n,s,g,S,l,null)}}h&&Be(n,s,"srcSet",l.srcSet,l,null),u&&Be(n,s,"src",l.src,l,null);return;case"input":Ce("invalid",n);var C=g=S=h=null,R=null,U=null;for(u in l)if(l.hasOwnProperty(u)){var z=l[u];if(z!=null)switch(u){case"name":h=z;break;case"type":S=z;break;case"checked":R=z;break;case"defaultChecked":U=z;break;case"value":g=z;break;case"defaultValue":C=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(o(137,s));break;default:Be(n,s,u,z,l,null)}}nh(n,g,C,R,U,S,h,!1);return;case"select":Ce("invalid",n),u=S=g=null;for(h in l)if(l.hasOwnProperty(h)&&(C=l[h],C!=null))switch(h){case"value":g=C;break;case"defaultValue":S=C;break;case"multiple":u=C;default:Be(n,s,h,C,l,null)}s=g,l=S,n.multiple=!!u,s!=null?ds(n,!!u,s,!1):l!=null&&ds(n,!!u,l,!0);return;case"textarea":Ce("invalid",n),g=h=u=null;for(S in l)if(l.hasOwnProperty(S)&&(C=l[S],C!=null))switch(S){case"value":u=C;break;case"defaultValue":h=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(91));break;default:Be(n,s,S,C,l,null)}sh(n,u,h,g);return;case"option":for(R in l)if(l.hasOwnProperty(R)&&(u=l[R],u!=null))switch(R){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Be(n,s,R,u,l,null)}return;case"dialog":Ce("beforetoggle",n),Ce("toggle",n),Ce("cancel",n),Ce("close",n);break;case"iframe":case"object":Ce("load",n);break;case"video":case"audio":for(u=0;u<Zo.length;u++)Ce(Zo[u],n);break;case"image":Ce("error",n),Ce("load",n);break;case"details":Ce("toggle",n);break;case"embed":case"source":case"link":Ce("error",n),Ce("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in l)if(l.hasOwnProperty(U)&&(u=l[U],u!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Be(n,s,U,u,l,null)}return;default:if(ru(s)){for(z in l)l.hasOwnProperty(z)&&(u=l[z],u!==void 0&&Kc(n,s,z,u,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(u=l[C],u!=null&&Be(n,s,C,u,l,null))}function UE(n,s,l,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,S=null,C=null,R=null,U=null,z=null;for(B in l){var J=l[B];if(l.hasOwnProperty(B)&&J!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":R=J;default:u.hasOwnProperty(B)||Be(n,s,B,null,u,J)}}for(var P in u){var B=u[P];if(J=l[P],u.hasOwnProperty(P)&&(B!=null||J!=null))switch(P){case"type":g=B;break;case"name":h=B;break;case"checked":U=B;break;case"defaultChecked":z=B;break;case"value":S=B;break;case"defaultValue":C=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(o(137,s));break;default:B!==J&&Be(n,s,P,B,u,J)}}lu(n,S,C,R,U,z,g,h);return;case"select":B=S=C=P=null;for(g in l)if(R=l[g],l.hasOwnProperty(g)&&R!=null)switch(g){case"value":break;case"multiple":B=R;default:u.hasOwnProperty(g)||Be(n,s,g,null,u,R)}for(h in u)if(g=u[h],R=l[h],u.hasOwnProperty(h)&&(g!=null||R!=null))switch(h){case"value":P=g;break;case"defaultValue":C=g;break;case"multiple":S=g;default:g!==R&&Be(n,s,h,g,u,R)}s=C,l=S,u=B,P!=null?ds(n,!!l,P,!1):!!u!=!!l&&(s!=null?ds(n,!!l,s,!0):ds(n,!!l,l?[]:"",!1));return;case"textarea":B=P=null;for(C in l)if(h=l[C],l.hasOwnProperty(C)&&h!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Be(n,s,C,null,u,h)}for(S in u)if(h=u[S],g=l[S],u.hasOwnProperty(S)&&(h!=null||g!=null))switch(S){case"value":P=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(o(91));break;default:h!==g&&Be(n,s,S,h,u,g)}ih(n,P,B);return;case"option":for(var ne in l)if(P=l[ne],l.hasOwnProperty(ne)&&P!=null&&!u.hasOwnProperty(ne))switch(ne){case"selected":n.selected=!1;break;default:Be(n,s,ne,null,u,P)}for(R in u)if(P=u[R],B=l[R],u.hasOwnProperty(R)&&P!==B&&(P!=null||B!=null))switch(R){case"selected":n.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Be(n,s,R,P,u,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in l)P=l[de],l.hasOwnProperty(de)&&P!=null&&!u.hasOwnProperty(de)&&Be(n,s,de,null,u,P);for(U in u)if(P=u[U],B=l[U],u.hasOwnProperty(U)&&P!==B&&(P!=null||B!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(137,s));break;default:Be(n,s,U,P,u,B)}return;default:if(ru(s)){for(var Ve in l)P=l[Ve],l.hasOwnProperty(Ve)&&P!==void 0&&!u.hasOwnProperty(Ve)&&Kc(n,s,Ve,void 0,u,P);for(z in u)P=u[z],B=l[z],!u.hasOwnProperty(z)||P===B||P===void 0&&B===void 0||Kc(n,s,z,P,u,B);return}}for(var I in l)P=l[I],l.hasOwnProperty(I)&&P!=null&&!u.hasOwnProperty(I)&&Be(n,s,I,null,u,P);for(J in u)P=u[J],B=l[J],!u.hasOwnProperty(J)||P===B||P==null&&B==null||Be(n,s,J,P,u,B)}function ag(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function LE(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var h=l[u],g=h.transferSize,S=h.initiatorType,C=h.duration;if(g&&C&&ag(S)){for(S=0,C=h.responseEnd,u+=1;u<l.length;u++){var R=l[u],U=R.startTime;if(U>C)break;var z=R.transferSize,J=R.initiatorType;z&&ag(J)&&(R=R.responseEnd,S+=z*(R<C?1:(C-U)/(R-U)))}if(--u,s+=8*(g+S)/(h.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Xc=null,Qc=null;function Ga(n){return n.nodeType===9?n:n.ownerDocument}function rg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ug(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Zc(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Wc=null;function OE(){var n=window.event;return n&&n.type==="popstate"?n===Wc?!1:(Wc=n,!0):(Wc=null,!1)}var cg=typeof setTimeout=="function"?setTimeout:void 0,GE=typeof clearTimeout=="function"?clearTimeout:void 0,fg=typeof Promise=="function"?Promise:void 0,PE=typeof queueMicrotask=="function"?queueMicrotask:typeof fg<"u"?function(n){return fg.resolve(null).then(n).catch(kE)}:cg;function kE(n){setTimeout(function(){throw n})}function Ai(n){return n==="head"}function dg(n,s){var l=s,u=0;do{var h=l.nextSibling;if(n.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"||l==="/&"){if(u===0){n.removeChild(h),Fs(s);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")jo(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,jo(l);for(var g=l.firstChild;g;){var S=g.nextSibling,C=g.nodeName;g[yo]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=S}}else l==="body"&&jo(n.ownerDocument.body);l=h}while(l);Fs(s)}function hg(n,s){var l=n;n=0;do{var u=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=u}while(l)}function jc(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":jc(l),su(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function HE(n,s,l,u){for(;n.nodeType===1;){var h=l;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[yo])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=un(n.nextSibling),n===null)break}return null}function qE(n,s,l){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=un(n.nextSibling),n===null))return null;return n}function pg(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=un(n.nextSibling),n===null))return null;return n}function ef(n){return n.data==="$?"||n.data==="$~"}function tf(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function BE(n,s){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||l.readyState!=="loading")s();else{var u=function(){s(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function un(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var nf=null;function mg(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(s===0)return un(n.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}n=n.nextSibling}return null}function gg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return n;s--}else l!=="/$"&&l!=="/&"||s++}n=n.previousSibling}return null}function yg(n,s,l){switch(s=Ga(l),n){case"html":if(n=s.documentElement,!n)throw Error(o(452));return n;case"head":if(n=s.head,!n)throw Error(o(453));return n;case"body":if(n=s.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function jo(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);su(n)}var cn=new Map,vg=new Set;function Pa(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Xn=W.d;W.d={f:VE,r:zE,D:FE,C:$E,L:JE,m:YE,X:XE,S:KE,M:QE};function VE(){var n=Xn.f(),s=Ra();return n||s}function zE(n){var s=us(n);s!==null&&s.tag===5&&s.type==="form"?Op(s):Xn.r(n)}var Bs=typeof document>"u"?null:document;function _g(n,s,l){var u=Bs;if(u&&typeof s=="string"&&s){var h=tn(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof l=="string"&&(h+='[crossorigin="'+l+'"]'),vg.has(h)||(vg.add(h),n={rel:n,crossOrigin:l,href:s},u.querySelector(h)===null&&(s=u.createElement("link"),Et(s,"link",n),pt(s),u.head.appendChild(s)))}}function FE(n){Xn.D(n),_g("dns-prefetch",n,null)}function $E(n,s){Xn.C(n,s),_g("preconnect",n,s)}function JE(n,s,l){Xn.L(n,s,l);var u=Bs;if(u&&n&&s){var h='link[rel="preload"][as="'+tn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(h+='[imagesrcset="'+tn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(h+='[imagesizes="'+tn(l.imageSizes)+'"]')):h+='[href="'+tn(n)+'"]';var g=h;switch(s){case"style":g=Vs(n);break;case"script":g=zs(n)}cn.has(g)||(n=_({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:n,as:s},l),cn.set(g,n),u.querySelector(h)!==null||s==="style"&&u.querySelector(el(g))||s==="script"&&u.querySelector(tl(g))||(s=u.createElement("link"),Et(s,"link",n),pt(s),u.head.appendChild(s)))}}function YE(n,s){Xn.m(n,s);var l=Bs;if(l&&n){var u=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+tn(u)+'"][href="'+tn(n)+'"]',g=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=zs(n)}if(!cn.has(g)&&(n=_({rel:"modulepreload",href:n},s),cn.set(g,n),l.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(tl(g)))return}u=l.createElement("link"),Et(u,"link",n),pt(u),l.head.appendChild(u)}}}function KE(n,s,l){Xn.S(n,s,l);var u=Bs;if(u&&n){var h=cs(u).hoistableStyles,g=Vs(n);s=s||"default";var S=h.get(g);if(!S){var C={loading:0,preload:null};if(S=u.querySelector(el(g)))C.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},l),(l=cn.get(g))&&sf(n,l);var R=S=u.createElement("link");pt(R),Et(R,"link",n),R._p=new Promise(function(U,z){R.onload=U,R.onerror=z}),R.addEventListener("load",function(){C.loading|=1}),R.addEventListener("error",function(){C.loading|=2}),C.loading|=4,ka(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:C},h.set(g,S)}}}function XE(n,s){Xn.X(n,s);var l=Bs;if(l&&n){var u=cs(l).hoistableScripts,h=zs(n),g=u.get(h);g||(g=l.querySelector(tl(h)),g||(n=_({src:n,async:!0},s),(s=cn.get(h))&&of(n,s),g=l.createElement("script"),pt(g),Et(g,"link",n),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(h,g))}}function QE(n,s){Xn.M(n,s);var l=Bs;if(l&&n){var u=cs(l).hoistableScripts,h=zs(n),g=u.get(h);g||(g=l.querySelector(tl(h)),g||(n=_({src:n,async:!0,type:"module"},s),(s=cn.get(h))&&of(n,s),g=l.createElement("script"),pt(g),Et(g,"link",n),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(h,g))}}function Sg(n,s,l,u){var h=(h=Te.current)?Pa(h):null;if(!h)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Vs(l.href),l=cs(h).hoistableStyles,u=l.get(s),u||(u={type:"style",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Vs(l.href);var g=cs(h).hoistableStyles,S=g.get(n);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,S),(g=h.querySelector(el(n)))&&!g._p&&(S.instance=g,S.state.loading=5),cn.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},cn.set(n,l),g||ZE(h,n,l,S.state))),s&&u===null)throw Error(o(528,""));return S}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=zs(l),l=cs(h).hoistableScripts,u=l.get(s),u||(u={type:"script",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function Vs(n){return'href="'+tn(n)+'"'}function el(n){return'link[rel="stylesheet"]['+n+"]"}function Tg(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function ZE(n,s,l,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Et(s,"link",l),pt(s),n.head.appendChild(s))}function zs(n){return'[src="'+tn(n)+'"]'}function tl(n){return"script[async]"+n}function Eg(n,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+tn(l.href)+'"]');if(u)return s.instance=u,pt(u),u;var h=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),pt(u),Et(u,"style",h),ka(u,l.precedence,n),s.instance=u;case"stylesheet":h=Vs(l.href);var g=n.querySelector(el(h));if(g)return s.state.loading|=4,s.instance=g,pt(g),g;u=Tg(l),(h=cn.get(h))&&sf(u,h),g=(n.ownerDocument||n).createElement("link"),pt(g);var S=g;return S._p=new Promise(function(C,R){S.onload=C,S.onerror=R}),Et(g,"link",u),s.state.loading|=4,ka(g,l.precedence,n),s.instance=g;case"script":return g=zs(l.src),(h=n.querySelector(tl(g)))?(s.instance=h,pt(h),h):(u=l,(h=cn.get(g))&&(u=_({},l),of(u,h)),n=n.ownerDocument||n,h=n.createElement("script"),pt(h),Et(h,"link",u),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ka(u,l.precedence,n));return s.instance}function ka(n,s,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,g=h,S=0;S<u.length;S++){var C=u[S];if(C.dataset.precedence===s)g=C;else if(g!==h)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(n,s.firstChild))}function sf(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function of(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Ha=null;function Ag(n,s,l){if(Ha===null){var u=new Map,h=Ha=new Map;h.set(l,u)}else h=Ha,u=h.get(l),u||(u=new Map,h.set(l,u));if(u.has(n))return u;for(u.set(n,null),l=l.getElementsByTagName(n),h=0;h<l.length;h++){var g=l[h];if(!(g[yo]||g[vt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(s)||"";S=n+S;var C=u.get(S);C?C.push(g):u.set(S,[g])}}return u}function Cg(n,s,l){n=n.ownerDocument||n,n.head.insertBefore(l,s==="title"?n.querySelector("head > title"):null)}function WE(n,s,l){if(l===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function xg(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function jE(n,s,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var h=Vs(u.href),g=s.querySelector(el(h));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=qa.bind(n),s.then(n,n)),l.state.loading|=4,l.instance=g,pt(g);return}g=s.ownerDocument||s,u=Tg(u),(h=cn.get(h))&&sf(u,h),g=g.createElement("link"),pt(g);var S=g;S._p=new Promise(function(C,R){S.onload=C,S.onerror=R}),Et(g,"link",u),l.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=qa.bind(n),s.addEventListener("load",l),s.addEventListener("error",l))}}var lf=0;function eA(n,s){return n.stylesheets&&n.count===0&&Va(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var u=setTimeout(function(){if(n.stylesheets&&Va(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+s);0<n.imgBytes&&lf===0&&(lf=62500*LE());var h=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Va(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>lf?50:800)+s);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(h)}}:null}function qa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Va(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ba=null;function Va(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ba=new Map,s.forEach(tA,n),Ba=null,qa.call(n))}function tA(n,s){if(!(s.state.loading&4)){var l=Ba.get(n);if(l)var u=l.get(null);else{l=new Map,Ba.set(n,l);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var S=h[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),u=S)}u&&l.set(null,u)}h=s.instance,S=h.getAttribute("data-precedence"),g=l.get(S)||u,g===u&&l.set(null,h),l.set(S,h),this.count++,u=qa.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),g?g.parentNode.insertBefore(h,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var nl={$$typeof:H,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function nA(n,s,l,u,h,g,S,C,R){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eu(0),this.hiddenUpdates=eu(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function bg(n,s,l,u,h,g,S,C,R,U,z,J){return n=new nA(n,s,l,S,R,U,z,J,C),s=1,g===!0&&(s|=24),g=Ft(3,null,null,s),n.current=g,g.stateNode=n,s=ku(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:s},Vu(g),n}function wg(n){return n?(n=Ss,n):Ss}function Rg(n,s,l,u,h,g){h=wg(h),u.context===null?u.context=h:u.pendingContext=h,u=di(s),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=hi(n,u,s),l!==null&&(Bt(l,n,s),Lo(l,n,s))}function Ng(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function af(n,s){Ng(n,s),(n=n.alternate)&&Ng(n,s)}function Mg(n){if(n.tag===13||n.tag===31){var s=qi(n,67108864);s!==null&&Bt(s,n,67108864),af(n,67108864)}}function Ig(n){if(n.tag===13||n.tag===31){var s=Xt();s=tu(s);var l=qi(n,s);l!==null&&Bt(l,n,s),af(n,s)}}var za=!0;function iA(n,s,l,u){var h=V.T;V.T=null;var g=W.p;try{W.p=2,rf(n,s,l,u)}finally{W.p=g,V.T=h}}function sA(n,s,l,u){var h=V.T;V.T=null;var g=W.p;try{W.p=8,rf(n,s,l,u)}finally{W.p=g,V.T=h}}function rf(n,s,l,u){if(za){var h=uf(u);if(h===null)Yc(n,s,u,Fa,l),Ug(n,u);else if(lA(h,n,s,l,u))u.stopPropagation();else if(Ug(n,u),s&4&&-1<oA.indexOf(n)){for(;h!==null;){var g=us(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=Oi(g.pendingLanes);if(S!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var R=1<<31-wt(S);C.entanglements[1]|=R,S&=~R}wn(g),(Ue&6)===0&&(ba=Ze()+500,Qo(0))}}break;case 31:case 13:C=qi(g,2),C!==null&&Bt(C,g,2),Ra(),af(g,2)}if(g=uf(u),g===null&&Yc(n,s,u,Fa,l),g===h)break;h=g}h!==null&&u.stopPropagation()}else Yc(n,s,u,null,l)}}function uf(n){return n=cu(n),cf(n)}var Fa=null;function cf(n){if(Fa=null,n=rs(n),n!==null){var s=r(n);if(s===null)n=null;else{var l=s.tag;if(l===13){if(n=f(s),n!==null)return n;n=null}else if(l===31){if(n=p(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Fa=n,null}function Dg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pe()){case In:return 2;case Ke:return 8;case ni:case rt:return 32;case Ut:return 268435456;default:return 32}default:return 32}}var ff=!1,Ci=null,xi=null,bi=null,il=new Map,sl=new Map,wi=[],oA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ug(n,s){switch(n){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":il.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(s.pointerId)}}function ol(n,s,l,u,h,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[h]},s!==null&&(s=us(s),s!==null&&Mg(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function lA(n,s,l,u,h){switch(s){case"focusin":return Ci=ol(Ci,n,s,l,u,h),!0;case"dragenter":return xi=ol(xi,n,s,l,u,h),!0;case"mouseover":return bi=ol(bi,n,s,l,u,h),!0;case"pointerover":var g=h.pointerId;return il.set(g,ol(il.get(g)||null,n,s,l,u,h)),!0;case"gotpointercapture":return g=h.pointerId,sl.set(g,ol(sl.get(g)||null,n,s,l,u,h)),!0}return!1}function Lg(n){var s=rs(n.target);if(s!==null){var l=r(s);if(l!==null){if(s=l.tag,s===13){if(s=f(l),s!==null){n.blockedOn=s,Kd(n.priority,function(){Ig(l)});return}}else if(s===31){if(s=p(l),s!==null){n.blockedOn=s,Kd(n.priority,function(){Ig(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $a(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=uf(n.nativeEvent);if(l===null){l=n.nativeEvent;var u=new l.constructor(l.type,l);uu=u,l.target.dispatchEvent(u),uu=null}else return s=us(l),s!==null&&Mg(s),n.blockedOn=l,!1;s.shift()}return!0}function Og(n,s,l){$a(n)&&l.delete(s)}function aA(){ff=!1,Ci!==null&&$a(Ci)&&(Ci=null),xi!==null&&$a(xi)&&(xi=null),bi!==null&&$a(bi)&&(bi=null),il.forEach(Og),sl.forEach(Og)}function Ja(n,s){n.blockedOn===s&&(n.blockedOn=null,ff||(ff=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,aA)))}var Ya=null;function Gg(n){Ya!==n&&(Ya=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ya===n&&(Ya=null);for(var s=0;s<n.length;s+=3){var l=n[s],u=n[s+1],h=n[s+2];if(typeof u!="function"){if(cf(u||l)===null)continue;break}var g=us(l);g!==null&&(n.splice(s,3),s-=3,rc(g,{pending:!0,data:h,method:l.method,action:u},u,h))}}))}function Fs(n){function s(R){return Ja(R,n)}Ci!==null&&Ja(Ci,n),xi!==null&&Ja(xi,n),bi!==null&&Ja(bi,n),il.forEach(s),sl.forEach(s);for(var l=0;l<wi.length;l++){var u=wi[l];u.blockedOn===n&&(u.blockedOn=null)}for(;0<wi.length&&(l=wi[0],l.blockedOn===null);)Lg(l),l.blockedOn===null&&wi.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var h=l[u],g=l[u+1],S=h[Ot]||null;if(typeof g=="function")S||Gg(l);else if(S){var C=null;if(g&&g.hasAttribute("formAction")){if(h=g,S=g[Ot]||null)C=S.formAction;else if(cf(h)!==null)continue}else C=S.action;typeof C=="function"?l[u+1]=C:(l.splice(u,3),u-=3),Gg(l)}}}function Pg(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,h=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function df(n){this._internalRoot=n}Ka.prototype.render=df.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(o(409));var l=s.current,u=Xt();Rg(l,u,n,s,null,null)},Ka.prototype.unmount=df.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Rg(n.current,2,null,n,null,null),Ra(),s[as]=null}};function Ka(n){this._internalRoot=n}Ka.prototype.unstable_scheduleHydration=function(n){if(n){var s=Yd();n={blockedOn:null,target:n,priority:s};for(var l=0;l<wi.length&&s!==0&&s<wi[l].priority;l++);wi.splice(l,0,n),l===0&&Lg(n)}};var kg=e.version;if(kg!=="19.2.4")throw Error(o(527,kg,"19.2.4"));W.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=m(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var rA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{ii=Xa.inject(rA),bt=Xa}catch{}}return al.createRoot=function(n,s){if(!a(n))throw Error(o(299));var l=!1,u="",h=$p,g=Jp,S=Yp;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=bg(n,1,!1,null,null,l,u,null,h,g,S,Pg),n[as]=s.current,Jc(n),new df(s)},al.hydrateRoot=function(n,s,l){if(!a(n))throw Error(o(299));var u=!1,h="",g=$p,S=Jp,C=Yp,R=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(R=l.formState)),s=bg(n,1,!0,s,l??null,u,h,R,g,S,C,Pg),s.context=wg(null),l=s.current,u=Xt(),u=tu(u),h=di(u),h.callback=null,hi(l,h,u),l=u,s.current.lanes=l,go(s,l),wn(s),n[as]=s.current,Jc(n),new Ka(s)},al.version="19.2.4",al}var Kg;function _A(){if(Kg)return pf.exports;Kg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pf.exports=vA(),pf.exports}var SA=_A(),Fe=cd();const Qa=cA(Fe);var fn=(t=>(t.SELECTION="SELECTION",t.LOADING="LOADING",t.GAMEPLAY="GAMEPLAY",t.DECISION_MAP="DECISION_MAP",t.GAME_OVER="GAME_OVER",t))(fn||{});const d0=[{id:"c1",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1560706560-59f7df8da891?q=80&w=1200&auto=format&fit=crop",stats:{strength:8,wits:7,charm:5},traits:["","",""],weakness:""},{id:"c2",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1535581652167-3d6693c0326e?q=80&w=1200&auto=format&fit=crop",stats:{strength:9,wits:5,charm:3},traits:["","",""],weakness:""},{id:"c3",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1509316975850-ff9c5deb0cd9?q=80&w=1200&auto=format&fit=crop",stats:{strength:3,wits:9,charm:8},traits:["","",""],weakness:""},{id:"c4",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1519074069444-1ba4fff66d16?q=80&w=1200&auto=format&fit=crop",stats:{strength:4,wits:8,charm:6},traits:["","",""],weakness:""},{id:"c5",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1636217989679-2c70092c7251?q=80&w=1200&auto=format&fit=crop",stats:{strength:9,wits:4,charm:6},traits:["","",""],weakness:""},{id:"c6",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop",stats:{strength:3,wits:7,charm:10},traits:["","",""],weakness:""},{id:"c7",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1605806616949-1e87b487bc2a?q=80&w=1200&auto=format&fit=crop",stats:{strength:7,wits:8,charm:2},traits:["","",""],weakness:""},{id:"c8",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1601362840469-51e4d8d58785?q=80&w=1200&auto=format&fit=crop",stats:{strength:2,wits:10,charm:4},traits:["","",""],weakness:""}],h0=[{id:"r1",title:"",type:"CONSTRAINT",description:"",active:!0},{id:"r2",title:"",type:"REALITY",description:"<3NPC>8",active:!0},{id:"r3",title:"",type:"RISK",description:"",active:!0},{id:"r4",title:"",type:"RISK",description:"23",active:!0},{id:"r5",title:"",type:"BONUS",description:"1",active:!0},{id:"r6",title:"",type:"REALITY",description:"",active:!1},{id:"r7",title:"",type:"CONSTRAINT",description:"",active:!1},{id:"r8",title:"",type:"CONSTRAINT",description:"",active:!0},{id:"r9",title:"",type:"BONUS",description:"50%",active:!1},{id:"r10",title:"",type:"REALITY",description:"10%",active:!1},{id:"r11",title:"",type:"RISK",description:"",active:!0},{id:"r12",title:"",type:"BONUS",description:"",active:!1}],Xg={text:"",choices:[{id:"opt1",text:"",consequence:"",cost:"",risk:""},{id:"opt2",text:"",consequence:"",risk:""},{id:"opt3",text:"",consequence:"",cost:"",risk:""}]},fl={narrative:{geminiModel:"gemini-2.5-flash-preview-05-20",openaiModel:"gpt-4.1-mini",temperature:.75,maxOutputTokens:1024,topP:.95,jsonMode:!1,streaming:!0,timeoutMs:3e4,maxRetries:1,retryDelayMs:1e3},realityMapping:{geminiModel:"gemini-2.5-flash-preview-05-20",openaiModel:"gpt-4.1-mini",temperature:.3,maxOutputTokens:512,topP:.85,jsonMode:!0,streaming:!1,timeoutMs:15e3,maxRetries:2,retryDelayMs:800},worldRules:{geminiModel:"gemini-2.5-flash-preview-05-20",openaiModel:"gpt-4.1-mini",temperature:.3,maxOutputTokens:768,topP:.85,jsonMode:!0,streaming:!1,timeoutMs:15e3,maxRetries:2,retryDelayMs:800},choices:{geminiModel:"gemini-2.5-flash-preview-05-20",openaiModel:"gpt-4.1-mini",temperature:.9,maxOutputTokens:512,topP:.95,jsonMode:!0,streaming:!1,timeoutMs:15e3,maxRetries:2,retryDelayMs:800}},TA=t=>({1:"I",2:"II",3:"III",4:"IV",5:"V",6:"VI",7:"VII",8:"VIII"})[t]||"X",Qg=({character:t,onSelect:e,isSelected:i})=>{const o=parseInt(t.id.replace("c",""));return E.jsxs("div",{onClick:()=>e&&e(t),className:`
        relative w-72 h-[450px] rounded-xl overflow-hidden cursor-pointer transition-all duration-500 transform group
        ${i?"scale-105 ring-4 ring-[#D4AF37] shadow-[0_0_50px_rgba(212,175,55,0.4)] z-20":"hover:scale-105 hover:shadow-2xl hover:z-10"}
        border-[6px] border-[#D4AF37] bg-[#1a0f0f]
      `,children:[E.jsx("div",{className:"absolute top-0 w-full h-12 flex justify-center items-center z-20 pointer-events-none",children:E.jsx("div",{className:"bg-[#D4AF37] text-[#1a0f0f] px-4 pt-1 pb-2 rounded-b-lg font-display font-bold text-sm tracking-widest shadow-md",children:TA(o)})}),E.jsxs("div",{className:"absolute inset-0 bg-gray-900",children:[E.jsx("img",{src:t.imageUrl,alt:t.name,className:`
                    w-full h-full object-cover transition-transform duration-1000
                    ${i?"scale-110 grayscale-0":"grayscale-[0.5] sepia-[0.3] group-hover:grayscale-0 group-hover:scale-110"}
                `}),E.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/old-map.png')] opacity-30 mix-blend-overlay pointer-events-none"}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1a0505] via-transparent to-[#1a0505] opacity-90 pointer-events-none"})]}),E.jsx("div",{className:"absolute top-2 left-2 text-[#D4AF37] z-20 opacity-80",children:E.jsx("i",{className:"fa-solid fa-star-of-life text-xs"})}),E.jsx("div",{className:"absolute top-2 right-2 text-[#D4AF37] z-20 opacity-80",children:E.jsx("i",{className:"fa-solid fa-star-of-life text-xs"})}),E.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 w-[90%] flex flex-col items-center justify-center z-20",children:E.jsxs("div",{className:"border-t border-b border-[#D4AF37] py-2 w-full text-center backdrop-blur-sm bg-black/40",children:[E.jsx("h3",{className:"text-xl font-bold font-display text-[#f0e6d2] uppercase tracking-wider",children:t.name}),E.jsx("p",{className:"text-[10px] uppercase font-bold tracking-[0.2em] text-[#D4AF37] mt-1",children:t.title})]})}),E.jsxs("div",{className:"absolute inset-0 bg-[#1a0505]/95 translate-y-full group-hover:translate-y-0 transition-transform duration-500 z-30 flex flex-col items-center justify-center text-paper p-6 text-center border-t-2 border-[#D4AF37]",children:[E.jsx("i",{className:"fa-solid fa-eye text-[#D4AF37] mb-2 text-xl"}),E.jsxs("p",{className:"italic font-serif text-sm mb-6 leading-relaxed opacity-90",children:['"',t.description,'"']}),E.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full border-t border-[#D4AF37]/30 pt-4",children:[E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),E.jsx("span",{className:"text-lg font-display",children:t.stats.strength})]}),E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),E.jsx("span",{className:"text-lg font-display",children:t.stats.wits})]}),E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),E.jsx("span",{className:"text-lg font-display",children:t.stats.charm})]})]}),E.jsxs("div",{className:"mt-6 w-full text-left",children:[E.jsx("span",{className:"text-[10px] text-red-500 uppercase tracking-widest block mb-1",children:""}),E.jsx("span",{className:"text-xs text-stone-gray block font-serif italic",children:t.weakness})]})]})]})},Zg=t=>{let e;const i=new Set,o=(m,v)=>{const _=typeof m=="function"?m(e):m;if(!Object.is(_,e)){const T=e;e=v??(typeof _!="object"||_===null)?_:Object.assign({},e,_),i.forEach(A=>A(e,T))}},a=()=>e,p={setState:o,getState:a,getInitialState:()=>y,subscribe:m=>(i.add(m),()=>i.delete(m))},y=e=t(o,a,p);return p},EA=(t=>t?Zg(t):Zg),AA=t=>t;function CA(t,e=AA){const i=Qa.useSyncExternalStore(t.subscribe,Qa.useCallback(()=>e(t.getState()),[t,e]),Qa.useCallback(()=>e(t.getInitialState()),[t,e]));return Qa.useDebugValue(i),i}const xA=t=>{const e=EA(t),i=o=>CA(e,o);return Object.assign(i,e),i},bA=(t=>xA);function p0(t,e){let i;try{i=t()}catch{return}return{getItem:a=>{var r;const f=y=>y===null?null:JSON.parse(y,void 0),p=(r=i.getItem(a))!=null?r:null;return p instanceof Promise?p.then(f):f(p)},setItem:(a,r)=>i.setItem(a,JSON.stringify(r,void 0)),removeItem:a=>i.removeItem(a)}}const Uf=t=>e=>{try{const i=t(e);return i instanceof Promise?i:{then(o){return Uf(o)(i)},catch(o){return this}}}catch(i){return{then(o){return this},catch(o){return Uf(o)(i)}}}},wA=(t,e)=>(i,o,a)=>{let r={storage:p0(()=>window.localStorage),partialize:w=>w,version:0,merge:(w,q)=>({...q,...w}),...e},f=!1,p=0;const y=new Set,m=new Set;let v=r.storage;if(!v)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),i(...w)},o,a);const _=()=>{const w=r.partialize({...o()});return v.setItem(r.name,{state:w,version:r.version})},T=a.setState;a.setState=(w,q)=>(T(w,q),_());const A=t((...w)=>(i(...w),_()),o,a);a.getInitialState=()=>A;let x;const b=()=>{var w,q;if(!v)return;const G=++p;f=!1,y.forEach(k=>{var L;return k((L=o())!=null?L:A)});const H=((q=r.onRehydrateStorage)==null?void 0:q.call(r,(w=o())!=null?w:A))||void 0;return Uf(v.getItem.bind(v))(r.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==r.version){if(r.migrate){const L=r.migrate(k.state,k.version);return L instanceof Promise?L.then(Z=>[!0,Z]):[!0,L]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var L;if(G!==p)return;const[Z,$]=k;if(x=r.merge($,(L=o())!=null?L:A),i(x,!0),Z)return _()}).then(()=>{G===p&&(H==null||H(x,void 0),x=o(),f=!0,m.forEach(k=>k(x)))}).catch(k=>{G===p&&(H==null||H(void 0,k))})};return a.persist={setOptions:w=>{r={...r,...w},w.storage&&(v=w.storage)},clearStorage:()=>{v==null||v.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>b(),hasHydrated:()=>f,onHydrate:w=>(y.add(w),()=>{y.delete(w)}),onFinishHydration:w=>(m.add(w),()=>{m.delete(w)})},r.skipHydration||b(),x||A},RA=wA,NA=p0(()=>localStorage),bl="__default__",Ws=()=>({narrative:{...fl.narrative},realityMapping:{...fl.realityMapping},worldRules:{...fl.worldRules},choices:{...fl.choices}}),Wg={phase:fn.SELECTION,character:null,rules:h0,storyLog:[],currentStory:null,decisionHistory:[],realityStats:{credibility:5,stress:2,connections:3},turnCount:0,maxTurns:10,finalSummary:void 0,loading:!1,currentTriggeredRules:[],narrativeLoading:!1,narrativeStreamBuffer:"",realityAnalysisLoading:!1,realityAnalysis:null,worldRulesLoading:!1,ruleStatusMap:{},choicesLoading:!1,showAiSettings:!1,provider:"gemini",geminiKey:"",openaiConfig:{apiKey:"",baseUrl:"https://api.openai.com/v1",model:"gpt-4-turbo-preview"},taskConfigScopeId:bl,taskConfigsByCharacter:{[bl]:Ws()}},MA=t=>{var i;const e=t.taskConfigScopeId||((i=t.character)==null?void 0:i.id)||bl;return t.taskConfigsByCharacter[e]||t.taskConfigsByCharacter[bl]||Ws()},pe=bA()(RA(t=>({...Wg,setPhase:e=>t({phase:e}),setCharacter:e=>t({character:e}),setRules:e=>t(i=>({rules:typeof e=="function"?e(i.rules):e})),setStoryLog:e=>t(i=>({storyLog:typeof e=="function"?e(i.storyLog):e})),setCurrentStory:e=>t({currentStory:e}),setDecisionHistory:e=>t(i=>({decisionHistory:typeof e=="function"?e(i.decisionHistory):e})),setRealityStats:e=>t(i=>({realityStats:typeof e=="function"?e(i.realityStats):e})),setTurnCount:e=>t({turnCount:e}),setMaxTurns:e=>t({maxTurns:e}),setFinalSummary:e=>t({finalSummary:e}),setLoading:e=>t({loading:e}),setCurrentTriggeredRules:e=>t({currentTriggeredRules:e}),setNarrativeLoading:e=>t({narrativeLoading:e}),setNarrativeStreamBuffer:e=>t({narrativeStreamBuffer:e}),setRealityAnalysisLoading:e=>t({realityAnalysisLoading:e}),setRealityAnalysis:e=>t({realityAnalysis:e}),setWorldRulesLoading:e=>t({worldRulesLoading:e}),setRuleStatusMap:e=>t({ruleStatusMap:e}),setChoicesLoading:e=>t({choicesLoading:e}),updateGameState:e=>t(i=>e(i)),resetGame:()=>t(e=>({...Wg,showAiSettings:!1,provider:e.provider,geminiKey:e.geminiKey,openaiConfig:e.openaiConfig,taskConfigScopeId:e.taskConfigScopeId,taskConfigsByCharacter:e.taskConfigsByCharacter})),startNewGame:e=>t({phase:fn.GAMEPLAY,character:e,currentStory:Xg,storyLog:[Xg],decisionHistory:[],turnCount:1,realityStats:{credibility:5,stress:2,connections:3},rules:h0,finalSummary:void 0,loading:!1,currentTriggeredRules:[],narrativeLoading:!1,narrativeStreamBuffer:"",realityAnalysisLoading:!1,realityAnalysis:null,worldRulesLoading:!1,ruleStatusMap:{},choicesLoading:!1}),setShowAiSettings:e=>t({showAiSettings:e}),setProvider:e=>t({provider:e}),setGeminiKey:e=>t({geminiKey:e}),setOpenaiConfig:e=>t(i=>({openaiConfig:typeof e=="function"?e(i.openaiConfig):e})),setTaskConfigScopeId:e=>t(i=>({taskConfigScopeId:e,taskConfigsByCharacter:i.taskConfigsByCharacter[e]?i.taskConfigsByCharacter:{...i.taskConfigsByCharacter,[e]:Ws()}})),setTaskConfigs:e=>t(i=>({taskConfigsByCharacter:{...i.taskConfigsByCharacter,[i.taskConfigScopeId]:e}})),updateTaskConfig:(e,i)=>t(o=>{var a;return{taskConfigsByCharacter:{...o.taskConfigsByCharacter,[o.taskConfigScopeId]:{...o.taskConfigsByCharacter[o.taskConfigScopeId]||Ws(),[e]:{...((a=o.taskConfigsByCharacter[o.taskConfigScopeId])==null?void 0:a[e])||Ws()[e],...i}}}}}),resetTaskConfigs:()=>t(e=>({taskConfigsByCharacter:{...e.taskConfigsByCharacter,[e.taskConfigScopeId]:Ws()}}))}),{name:"character-card-game-store",storage:NA,partialize:t=>({phase:t.phase,character:t.character,rules:t.rules,storyLog:t.storyLog,currentStory:t.currentStory,decisionHistory:t.decisionHistory,realityStats:t.realityStats,turnCount:t.turnCount,maxTurns:t.maxTurns,finalSummary:t.finalSummary,provider:t.provider,geminiKey:t.geminiKey,openaiConfig:t.openaiConfig,taskConfigScopeId:t.taskConfigScopeId,taskConfigsByCharacter:t.taskConfigsByCharacter})})),IA=()=>pe(t=>t.phase),DA=()=>pe(t=>t.character),UA=()=>pe(t=>t.rules),LA=()=>pe(t=>t.storyLog),m0=()=>pe(t=>t.currentStory),OA=()=>pe(t=>t.decisionHistory),GA=()=>pe(t=>t.realityStats),g0=()=>pe(t=>t.turnCount),y0=()=>pe(t=>t.maxTurns),PA=()=>pe(t=>t.finalSummary),kA=()=>pe(t=>t.loading),HA=()=>pe(t=>t.currentTriggeredRules),qA=()=>pe(t=>t.realityAnalysisLoading),BA=()=>pe(t=>t.realityAnalysis),VA=()=>pe(t=>t.ruleStatusMap),zA=()=>pe(t=>t.showAiSettings),v0=()=>pe(t=>t.provider),_0=()=>pe(t=>t.geminiKey),S0=()=>pe(t=>t.openaiConfig),FA=()=>pe(t=>t.taskConfigScopeId),T0=()=>pe(t=>MA(t)),E0=()=>pe(t=>t.setPhase),$A=()=>pe(t=>t.setCharacter),JA=()=>pe(t=>t.setRules),YA=()=>pe(t=>t.setStoryLog),KA=()=>pe(t=>t.setCurrentStory),XA=()=>pe(t=>t.setDecisionHistory),QA=()=>pe(t=>t.setRealityStats),ZA=()=>pe(t=>t.setTurnCount),WA=()=>pe(t=>t.setFinalSummary),jA=()=>pe(t=>t.setLoading),eC=()=>pe(t=>t.setCurrentTriggeredRules),tC=()=>pe(t=>t.setNarrativeLoading),nC=()=>pe(t=>t.setRealityAnalysisLoading),iC=()=>pe(t=>t.setRealityAnalysis),sC=()=>pe(t=>t.setWorldRulesLoading),oC=()=>pe(t=>t.setRuleStatusMap),lC=()=>pe(t=>t.setChoicesLoading),aC=()=>pe(t=>t.resetGame),rC=()=>pe(t=>t.startNewGame),A0=()=>pe(t=>t.setShowAiSettings),uC=()=>pe(t=>t.setProvider),cC=()=>pe(t=>t.setGeminiKey),fC=()=>pe(t=>t.setOpenaiConfig),C0=()=>pe(t=>t.setTaskConfigScopeId),dC=()=>pe(t=>t.updateTaskConfig),hC=()=>pe(t=>t.resetTaskConfigs),jg={narrative:"",realityMapping:"",worldRules:"",choices:""},pC=()=>{var $;const t=zA(),e=A0(),i=v0(),o=uC(),a=_0(),r=cC(),f=S0(),p=fC(),y=FA(),m=C0(),v=T0(),_=dC(),T=hC(),[A,x]=Fe.useState("narrative"),[b,w]=Fe.useState(!1),[q,G]=Fe.useState(!1),H=Fe.useMemo(()=>[{id:bl,label:""},...d0.map(K=>({id:K.id,label:`${K.name}${K.title}`}))],[]),k=()=>e(!1);if(!t)return null;const L=v[A],Z=K=>{_(A,{provider:K||void 0})};return E.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:E.jsxs("div",{className:"bg-[#1a0f0f] border-4 border-double border-gold rounded-lg w-full max-w-2xl shadow-[0_0_50px_rgba(212,175,55,0.3)] overflow-hidden animate-fade-in",children:[E.jsxs("div",{className:"p-4 border-b border-gold/30 flex items-center justify-between bg-velvet-red/20",children:[E.jsxs("h3",{className:"font-display text-2xl text-gold",children:[E.jsx("i",{className:"fa-solid fa-cog mr-2"}),"AI "]}),E.jsx("button",{onClick:k,className:"text-gold/60 hover:text-gold",children:E.jsx("i",{className:"fa-solid fa-times text-xl"})})]}),E.jsxs("div",{className:"p-6 space-y-5 bg-[#0f0303] max-h-[80vh] overflow-y-auto",children:[E.jsxs("div",{children:[E.jsx("label",{className:"text-xs text-gold mb-1 block",children:""}),E.jsx("select",{value:y,onChange:K=>m(K.target.value),className:"w-full px-3 py-2 bg-brown-800/40 border border-brown-600 rounded",children:H.map(K=>E.jsx("option",{value:K.id,children:K.label},K.id))})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("label",{className:"p-3 border rounded cursor-pointer",children:[E.jsx("input",{type:"radio",checked:i==="gemini",onChange:()=>o("gemini"),className:"mr-2"}),"Gemini"]}),E.jsxs("label",{className:"p-3 border rounded cursor-pointer",children:[E.jsx("input",{type:"radio",checked:i==="openai",onChange:()=>o("openai"),className:"mr-2"}),"OpenAI"]})]}),i==="gemini"?E.jsx("input",{type:"password",value:a,onChange:K=>r(K.target.value),placeholder:"Gemini API Key",className:"w-full px-3 py-2 bg-brown-800/40 border"}):E.jsxs("div",{className:"grid gap-2",children:[E.jsx("input",{type:"text",value:f.baseUrl,onChange:K=>p(X=>({...X,baseUrl:K.target.value})),placeholder:"Base URL",className:"w-full px-3 py-2 bg-brown-800/40 border"}),E.jsx("input",{type:"password",value:f.apiKey,onChange:K=>p(X=>({...X,apiKey:K.target.value})),placeholder:"API Key",className:"w-full px-3 py-2 bg-brown-800/40 border"}),E.jsx("input",{type:"text",value:f.model,onChange:K=>p(X=>({...X,model:K.target.value})),placeholder:"Model",className:"w-full px-3 py-2 bg-brown-800/40 border"})]}),E.jsxs("div",{children:[E.jsxs("div",{className:"text-xs text-stone-gray mb-2",children:["",(($=H.find(K=>K.id===y))==null?void 0:$.label)||""]}),E.jsx("div",{className:"flex gap-2 flex-wrap mb-3",children:Object.keys(jg).map(K=>E.jsx("button",{onClick:()=>x(K),className:`px-3 py-1 border rounded ${A===K?"border-gold text-gold":"border-brown-600 text-stone-gray"}`,children:jg[K]},K))}),E.jsxs("div",{className:"text-xs rounded border border-gold/30 bg-gold/5 text-paper/80 px-3 py-2 mb-3 leading-5",children:[E.jsx("div",{className:"font-semibold text-gold",children:""}),E.jsx("div",{children:""})]}),E.jsx("div",{className:"grid grid-cols-1 gap-3 mb-3",children:E.jsxs("label",{className:"text-xs",children:[" Provider",E.jsxs("select",{value:L.provider||"",onChange:K=>Z(K.target.value),className:"w-full px-2 py-1 bg-brown-800/40 border",children:[E.jsx("option",{value:"",children:""}),E.jsx("option",{value:"gemini",children:"Gemini"}),E.jsx("option",{value:"openai",children:"OpenAI"})]})]})}),(L.provider||i)==="openai"?E.jsxs("div",{className:"grid gap-2 mb-3",children:[E.jsx("input",{type:"text",value:L.openaiBaseUrl||"",onChange:K=>_(A,{openaiBaseUrl:K.target.value||void 0}),placeholder:"OpenAI Base URL",className:"w-full px-2 py-1 bg-brown-800/40 border"}),E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("span",{className:"text-xs",children:"OpenAI API Key"}),E.jsx("button",{type:"button",onClick:()=>w(K=>!K),className:"text-[11px] underline text-paper/70",children:b?" key":" key"})]}),E.jsx("input",{type:b?"text":"password",value:L.openaiApiKey||"",onChange:K=>_(A,{openaiApiKey:K.target.value||void 0}),placeholder:" OpenAI Key",className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),E.jsx("input",{type:"text",value:L.openaiModel||"",onChange:K=>_(A,{openaiModel:K.target.value||void 0}),placeholder:"OpenAI Model",className:"w-full px-2 py-1 bg-brown-800/40 border"})]}):E.jsxs("div",{className:"grid gap-2 mb-3",children:[E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("span",{className:"text-xs",children:"Gemini API Key"}),E.jsx("button",{type:"button",onClick:()=>G(K=>!K),className:"text-[11px] underline text-paper/70",children:q?" key":" key"})]}),E.jsx("input",{type:q?"text":"password",value:L.geminiApiKey||"",onChange:K=>_(A,{geminiApiKey:K.target.value||void 0}),placeholder:" Gemini Key",className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),E.jsx("input",{type:"text",value:L.geminiModel||"",onChange:K=>_(A,{geminiModel:K.target.value||void 0}),placeholder:"Gemini Model",className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("label",{className:"text-xs",children:["Temperature",E.jsx("input",{type:"number",step:"0.05",value:L.temperature,onChange:K=>_(A,{temperature:Number(K.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),E.jsxs("label",{className:"text-xs",children:["Max Tokens",E.jsx("input",{type:"number",value:L.maxOutputTokens,onChange:K=>_(A,{maxOutputTokens:Number(K.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),E.jsxs("label",{className:"text-xs",children:["Timeout(ms)",E.jsx("input",{type:"number",value:L.timeoutMs,onChange:K=>_(A,{timeoutMs:Number(K.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),E.jsxs("label",{className:"text-xs",children:["",E.jsx("input",{type:"number",value:L.maxRetries,onChange:K=>_(A,{maxRetries:Number(K.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),E.jsxs("label",{className:"text-xs",children:["Top P",E.jsx("input",{type:"number",step:"0.01",value:L.topP??"",onChange:K=>_(A,{topP:K.target.value===""?void 0:Number(K.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]}),E.jsxs("label",{className:"text-xs",children:["(ms)",E.jsx("input",{type:"number",value:L.retryDelayMs,onChange:K=>_(A,{retryDelayMs:Number(K.target.value)}),className:"w-full px-2 py-1 bg-brown-800/40 border"})]})]}),E.jsx("button",{onClick:T,className:"mt-3 text-xs underline text-paper/70",children:""})]})]}),E.jsx("div",{className:"p-4 bg-velvet-red/20 border-t border-gold/30 flex justify-end",children:E.jsx("button",{onClick:k,className:"px-6 py-2 bg-gold text-black font-bold",children:""})})]})})},_f=t=>["I","II","III","IV","V","VI","VII","VIII","IX","X"][t-1]||t,ey=(t,e=80)=>t.length<=e?t:`${t.slice(0,e)}`,Sf=(t,e,i)=>{const o=t>0?"fa-arrow-up":t<0?"fa-arrow-down":"fa-minus",a=t>0?`+${t}`:`${t}`;return E.jsxs("span",{className:`inline-flex items-center gap-1 text-xs font-serif ${i}`,children:[E.jsx("i",{className:`fa-solid ${o}`}),e," ",a]})},mC=()=>{const t=m0(),e=OA(),i=E0(),o=g0(),a=y0();return E.jsxs("div",{className:"min-h-screen w-full bg-[#0f0303] text-paper relative overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle,transparent_20%,#000000_100%)] opacity-80"}),E.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[E.jsxs("header",{className:"flex items-center justify-between px-6 py-4 border-b border-brown-700 bg-[#1a0505]/80",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"font-display text-2xl text-gold",children:""}),E.jsxs("p",{className:"text-xs font-serif text-paper/70",children:["ACT ",_f(o)," / ",_f(a)]})]}),E.jsxs("button",{onClick:()=>i(fn.GAMEPLAY),className:"inline-flex items-center gap-2 px-4 py-2 border border-gold text-gold bg-black/40 hover:bg-gold/10 transition-colors rounded-full font-display text-sm",children:[E.jsx("i",{className:"fa-solid fa-arrow-left"}),""]})]}),E.jsxs("main",{className:"flex-1 grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-6 p-6",children:[E.jsxs("section",{className:"bg-[#1a0b0b]/60 border border-brown-700 rounded-2xl p-6 shadow-[0_0_30px_rgba(0,0,0,0.4)]",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h2",{className:"font-display text-xl text-gold",children:""}),E.jsxs("span",{className:"text-xs text-paper/50 font-serif",children:[" ",e.length," "]})]}),e.length===0?E.jsx("div",{className:"text-center py-16 text-paper/60 font-serif",children:""}):E.jsx("div",{className:"space-y-8",children:e.map((r,f)=>{const p=f===e.length-1;return E.jsxs("div",{className:"relative pl-10",children:[f!==e.length-1&&E.jsx("span",{className:"absolute left-[18px] top-6 bottom-[-24px] w-px bg-gold/30"}),E.jsx("span",{className:"absolute left-[10px] top-6 w-4 h-4 rounded-full border border-gold bg-[#2c1810]"}),E.jsxs("div",{className:`rounded-xl border-2 bg-[#2c1810]/70 p-5 shadow-lg transition-colors ${p?"border-gold animate-pulse":"border-gold/60"}`,children:[E.jsxs("div",{className:"flex flex-wrap items-center gap-3 justify-between",children:[E.jsxs("h3",{className:"font-display text-lg text-gold",children:["ACT ",_f(r.turn)]}),E.jsx("span",{className:"text-xs font-serif text-paper/60",children:ey(r.sceneTextPreview)})]}),E.jsxs("div",{className:"mt-3",children:[E.jsx("p",{className:"text-sm font-serif text-paper/80",children:""}),E.jsx("p",{className:"text-sm font-serif text-paper/60 italic",children:ey(r.sceneTextPreview)})]}),E.jsxs("div",{className:"mt-4",children:[E.jsx("p",{className:"text-xs uppercase tracking-widest text-paper/60 mb-1",children:""}),E.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 border border-gold bg-gold/10 rounded-full text-gold text-sm font-display",children:[E.jsx("i",{className:"fa-solid fa-route"}),r.chosenOptionText]})]}),E.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[Sf(r.statDelta.credibility,"","text-green-300"),Sf(r.statDelta.stress,"","text-red-300"),Sf(r.statDelta.connections,"","text-blue-300")]}),E.jsxs("div",{className:"mt-4",children:[E.jsx("p",{className:"text-xs uppercase tracking-widest text-paper/60 mb-1",children:""}),r.triggeredRules.length===0?E.jsx("p",{className:"text-xs text-paper/40 font-serif",children:""}):E.jsx("div",{className:"flex flex-wrap gap-2",children:r.triggeredRules.map(y=>E.jsx("span",{className:"text-xs px-2 py-1 bg-purple-900/40 border border-purple-500/60 rounded-full text-purple-200",children:y.ruleTitle},y.ruleId))})]}),E.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3 text-xs font-serif text-paper/70",children:[E.jsxs("span",{children:["",r.statSnapshot.credibility]}),E.jsxs("span",{children:["",r.statSnapshot.stress]}),E.jsxs("span",{children:["",r.statSnapshot.connections]})]})]})]},r.chosenOptionId)})})]}),E.jsxs("section",{className:"bg-[#1a0b0b]/60 border border-brown-700 rounded-2xl p-6 shadow-[0_0_30px_rgba(0,0,0,0.4)]",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h2",{className:"font-display text-xl text-gold",children:""}),E.jsx("span",{className:"text-xs font-serif text-paper/50",children:""})]}),E.jsx("div",{className:"space-y-4",children:t==null?void 0:t.choices.map(r=>E.jsxs("div",{className:"group relative overflow-hidden rounded-xl border border-dashed border-gold/60 bg-black/40 p-4",children:[E.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(212,175,55,0.15),_transparent_70%)] opacity-60"}),E.jsxs("div",{className:"relative z-10 flex items-start gap-3",children:[E.jsx("div",{className:"text-gold/70 text-lg",children:E.jsx("i",{className:"fa-solid fa-question"})}),E.jsxs("div",{className:"flex-1",children:[E.jsx("p",{className:"text-sm font-display text-paper/70",children:""}),E.jsx("p",{className:"text-xs text-paper/40 font-serif",children:""})]})]}),E.jsxs("div",{className:"absolute inset-0 bg-black/80 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-center px-4",children:[E.jsx("p",{className:"text-sm font-display text-gold mb-1",children:r.text}),E.jsx("p",{className:"text-xs font-serif text-paper/70",children:r.consequence})]})]},r.id))}),E.jsxs("div",{className:"mt-6 text-xs text-paper/50 font-serif flex items-center gap-2",children:[E.jsx("span",{className:"w-6 h-px bg-gold/40"}),""]})]})]})]})]})},gC=({isOpen:t,turnNumber:e,onViewDecision:i,onDismiss:o})=>{const[a,r]=Fe.useState(!1);return Fe.useEffect(()=>{if(!t)return;const f=window.setTimeout(()=>{r(!0)},5e3);return()=>window.clearTimeout(f)},[t]),Fe.useEffect(()=>{if(!a)return;const f=window.setTimeout(()=>{r(!1),o()},300);return()=>window.clearTimeout(f)},[a,o]),t?E.jsx("div",{className:"fixed inset-x-0 bottom-6 z-50 flex justify-center pointer-events-none",children:E.jsxs("div",{className:`pointer-events-auto w-[min(90vw,520px)] rounded-2xl border border-gold bg-black/70 px-5 py-4 shadow-[0_0_25px_rgba(212,175,55,0.35)] backdrop-blur transition-all duration-300 ${a?"opacity-0 translate-y-3":"opacity-100 translate-y-0 animate-fade-in-up"}`,children:[E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"text-gold text-xl",children:E.jsx("i",{className:"fa-solid fa-scroll"})}),E.jsxs("div",{className:"flex-1",children:[E.jsxs("p",{className:"font-display text-gold text-lg",children:[" ",e,"   "]}),E.jsx("p",{className:"text-xs font-serif text-paper/60 mt-1",children:""})]})]}),E.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[E.jsx("button",{onClick:()=>{r(!0),i()},className:"px-4 py-2 text-sm font-display border border-gold text-gold rounded-full hover:bg-gold/10 transition-colors",children:""}),E.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 text-sm font-display border border-brown-600 text-paper/70 rounded-full hover:text-paper hover:border-gold/60 transition-colors",children:""})]})]})}):null},yC=({label:t,icon:e,value:i,max:o=10,barColor:a,linkedRules:r})=>{const f=r.some(p=>p.link.isTriggered&&p.isActive);return E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"flex justify-between text-xs font-bold text-stone-gray",children:[E.jsxs("span",{children:[E.jsx("i",{className:`fa-solid ${e} mr-1.5`}),t]}),E.jsxs("span",{className:f?"text-red-400 animate-pulse":"",children:[i,"/",o]})]}),E.jsxs("div",{className:"w-full bg-[#2c1810] h-2.5 rounded-full overflow-hidden border border-brown-600 relative",children:[E.jsx("div",{className:`${a} h-full transition-all duration-1000`,style:{width:`${i/o*100}%`}}),r.filter(p=>p.link.threshold!==null).map(p=>E.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500/60",style:{left:`${p.link.threshold/o*100}%`},title:`: ${p.link.threshold}`},`${p.rule.id}-${p.link.threshold}`))]}),E.jsxs("div",{className:"space-y-1",children:[r.length===0&&E.jsx("div",{className:"text-[10px] text-stone-gray italic",children:""}),r.map(p=>{const{link:y,rule:m,isActive:v,triggeredInfo:_}=p,T=y.isTriggered&&v,A=y.threshold===null?null:Math.abs(y.currentValue-y.threshold),x=v&&y.threshold!==null&&!T&&A!==null&&A<=2,b=v?T?"text-red-300 bg-red-900/30 border-red-700/60 animate-pulse":x?"text-yellow-300 bg-yellow-900/20 border-yellow-700/60":y.threshold===null?"text-purple-200 bg-purple-900/20 border-purple-700/40":"text-green-300 bg-green-900/20 border-green-700/50":"text-stone-gray bg-brown-800/30 border-brown-700/60",w=v?T?` ${_?`${_.reason}`:""}`:x?`  ${A}`:y.threshold===null?" ":" ":"";return E.jsxs("div",{className:`flex items-start justify-between gap-2 rounded border px-2 py-1 text-[10px] ${b}`,children:[E.jsxs("div",{children:[E.jsx("span",{className:"font-semibold",children:m.title}),E.jsxs("span",{className:"ml-1 text-[9px] opacity-80",children:["(",m.type,")"]}),E.jsx("p",{className:"text-[10px] opacity-80",children:y.warningMessage})]}),E.jsx("span",{className:"text-right min-w-[90px]",children:w})]},`${m.id}-${y.statKey}-${y.warningMessage}`)})]})]})},vC=[{key:"credibility",label:"",icon:"fa-scale-balanced",barColor:"bg-forest-green"},{key:"stress",label:"",icon:"fa-brain",barColor:"bg-orange-700"},{key:"connections",label:"",icon:"fa-handshake",barColor:"bg-blue-700"}],ty=({rules:t,realityStats:e,parsedMappings:i,triggeredMap:o,className:a,isMobile:r=!1,aiAnalysis:f=null,loading:p=!1})=>{const[y,m]=Fe.useState(!0),v=Fe.useMemo(()=>vC.map(b=>{const w=i.flatMap(q=>q.linkedStats.filter(G=>G.statKey===b.key).map(G=>({rule:q.rule,link:G,isActive:q.rule.active,triggeredInfo:o.get(q.rule.id)})));return{...b,linkedRules:w}}),[i,o]),_=Fe.useMemo(()=>{const b=new Map;return(f||[]).forEach(w=>b.set(w.statKey,{status:w.status,warningMessage:w.warningMessage,reason:w.reason})),b},[f]),T=Fe.useMemo(()=>{const b=new Set(i.filter(w=>w.linkedStats.length>0).map(w=>w.rule.id));return t.filter(w=>w.active&&!b.has(w.id))},[i,t]),A=E.jsx("div",{className:"grid grid-cols-3 gap-2",children:v.map(b=>{var G;const q=((G=_.get(b.key))==null?void 0:G.status)==="triggered"||b.linkedRules.some(H=>H.isActive&&H.link.isTriggered);return E.jsxs("div",{className:"rounded border border-brown-700/60 p-2 bg-brown-900/30",children:[E.jsxs("div",{className:"flex items-center justify-between text-[10px] text-stone-gray",children:[E.jsx("span",{children:b.label}),q&&E.jsx("i",{className:"fa-solid fa-triangle-exclamation text-red-400"})]}),E.jsx("div",{className:"mt-1 w-full bg-[#2c1810] h-1.5 rounded-full overflow-hidden",children:E.jsx("div",{className:`${b.barColor} h-full`,style:{width:`${e[b.key]/10*100}%`}})})]},b.key)})}),x=E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"space-y-4 bg-brown-800/30 p-3 rounded-lg border border-brown",children:[p&&E.jsx("div",{className:"text-xs text-stone-gray",children:"..."}),!p&&f&&f.length>0&&E.jsx("div",{className:"space-y-1 text-xs",children:f.map(b=>E.jsxs("div",{className:"text-paper/80",children:[E.jsx("span",{className:"text-gold mr-1",children:b.statKey}),E.jsx("span",{children:b.warningMessage||b.reason})]},b.statKey))}),v.map(b=>E.jsx(yC,{label:b.label,icon:b.icon,value:e[b.key],barColor:b.barColor,linkedRules:b.linkedRules},b.key))]}),E.jsxs("div",{children:[E.jsxs("h3",{className:"text-purple-400 text-xs font-bold uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[E.jsx("i",{className:"fa-solid fa-bolt text-[10px]"}),""]}),T.length===0?E.jsx("p",{className:"text-[10px] text-stone-gray italic",children:""}):E.jsx("div",{className:"space-y-2",children:T.map(b=>E.jsxs("div",{className:"rounded border border-brown-700/60 bg-[#1a0a0a] p-2 text-[11px]",children:[E.jsxs("div",{className:"flex items-center gap-1 text-gold",children:[E.jsx("span",{className:"font-semibold",children:b.title}),E.jsxs("span",{className:"text-[9px] text-stone-gray",children:["(",b.type,")"]})]}),E.jsx("p",{className:"text-stone-gray mt-1",children:b.description})]},b.id))})]})]});return r?E.jsxs("div",{className:`md:hidden rounded-xl border border-brown-700/60 bg-[#0f0303] p-3 ${a??""}`,children:[E.jsxs("button",{type:"button",onClick:()=>m(b=>!b),className:"w-full flex items-center justify-between text-gold font-display text-sm mb-3",children:[E.jsxs("span",{className:"flex items-center gap-2",children:[E.jsx("i",{className:"fa-solid fa-map text-[10px]"}),""]}),E.jsxs("span",{className:"text-xs text-stone-gray",children:[y?"":"",E.jsx("i",{className:`fa-solid fa-chevron-${y?"down":"up"} ml-2`})]})]}),y?A:x]}):E.jsx("div",{className:a,children:x})},_C=({rule:t,triggeredInfo:e,parsedMapping:i,autoShowToken:o=0,isHighlighted:a=!1,statusOverride:r})=>{const[f,p]=Fe.useState(!1),[y,m]=Fe.useState(!1),v=!!e;Fe.useEffect(()=>{if(o>0&&v){m(!0);const G=setTimeout(()=>m(!1),3e3);return()=>clearTimeout(G)}},[o,v]);const _=f||y,T=()=>{if(v)return"border-yellow-400";switch(t.type){case"CONSTRAINT":return"border-red-800";case"BONUS":return"border-green-700";case"RISK":return"border-orange-600";case"REALITY":return"border-purple-800";default:return"border-gray-800"}},A=()=>{switch(t.type){case"CONSTRAINT":return"";case"BONUS":return"";case"RISK":return"";case"REALITY":return"";default:return""}},x=()=>{switch(t.type){case"CONSTRAINT":return"fa-lock";case"BONUS":return"fa-gift";case"RISK":return"fa-dice-d20";case"REALITY":return"fa-scale-balanced"}},b=r==="inactive"?"inactive":r==="triggered"?"triggered":t.active?v||r==="active_not_triggered"?r==="active_not_triggered"?"active":"triggered":"active":"inactive",w=Fe.useMemo(()=>(i==null?void 0:i.linkedStats)??[],[i]),q=()=>{switch(b){case"triggered":return E.jsx("span",{className:"text-[10px] bg-yellow-500 text-black px-1.5 py-0.5 rounded",children:""});case"active":return E.jsx("span",{className:"text-[10px] bg-green-700 text-white px-1.5 py-0.5 rounded",children:""});case"inactive":return E.jsx("span",{className:"text-[10px] bg-stone-gray/40 text-stone-gray px-1.5 py-0.5 rounded",children:""});default:return null}};return E.jsxs("div",{className:`
        relative w-full mb-3 bg-[#F5DEB3] rounded-lg p-3 border-l-4 shadow-md 
        transform hover:-translate-y-1 transition-all duration-300
        ${T()}
        ${v?"ring-2 ring-yellow-400/60 shadow-[0_0_12px_rgba(250,204,21,0.3)] animate-pulse-once":""}
        ${a?"ring-2 ring-yellow-300 animate-pulse":""}
      `,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[E.jsxs("div",{className:"flex justify-between items-start mb-1",children:[E.jsxs("h4",{className:"font-bold text-[#4a0404] text-sm uppercase tracking-wider flex items-center gap-1.5",children:[t.title,v&&E.jsxs("span",{className:"inline-flex items-center text-[10px] bg-yellow-500 text-black px-1.5 py-0.5 rounded-full font-bold normal-case tracking-normal",children:[E.jsx("i",{className:"fa-solid fa-bolt mr-0.5 text-[8px]"}),""]})]}),E.jsx("i",{className:`fa-solid ${x()} text-[#8B4513] opacity-50`})]}),E.jsx("p",{className:"text-xs text-[#5c4033] leading-snug",children:t.description}),t.type==="REALITY"&&!v&&E.jsx("div",{className:"absolute -right-1 -top-1 w-3 h-3 bg-purple-600 rounded-full animate-pulse"}),_&&E.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-64 z-50",children:E.jsxs("div",{className:"bg-[#1a0505] border border-yellow-500/60 rounded-lg p-3 shadow-2xl text-left text-paper text-xs",children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsxs("span",{className:"flex items-center gap-1.5 text-yellow-400 uppercase tracking-wider text-[10px]",children:[E.jsx("i",{className:`fa-solid ${x()} text-[10px]`}),A()]}),q()]}),w.length>0&&E.jsxs("div",{className:"mb-2",children:[E.jsx("div",{className:"text-[10px] text-stone-gray uppercase tracking-wider mb-1",children:""}),E.jsx("div",{className:"space-y-1",children:w.map(G=>{const H=G.threshold===null?null:Math.abs(G.currentValue-G.threshold),k=G.threshold===null?"":G.isTriggered?"":`: ${H}`;return E.jsxs("div",{className:"flex justify-between text-[11px]",children:[E.jsx("span",{children:G.statLabel}),E.jsxs("span",{className:"text-stone-gray",children:[G.currentValue,"/10 ",G.threshold!==null?`( ${G.threshold})`:""]}),E.jsx("span",{className:"text-yellow-300",children:k})]},`${t.id}-${G.statKey}`)})})]}),E.jsx("div",{className:"border-t border-brown-700/60 pt-2 mt-2",children:b==="triggered"&&e?E.jsxs("div",{children:[E.jsx("div",{className:"text-yellow-400 font-bold text-[10px] uppercase tracking-wider mb-1",children:""}),E.jsx("p",{className:"text-paper text-xs leading-relaxed",children:e.reason})]}):b==="active"?E.jsxs("div",{className:"text-stone-gray",children:["",w.length===0?"":""]}):E.jsx("div",{className:"text-stone-gray",children:""})}),E.jsx("div",{className:"absolute -bottom-1.5 left-6 w-3 h-3 bg-[#1a0505] border-r border-b border-yellow-500/60 transform rotate-45"})]})})]})},ny=({rules:t,currentTriggeredRules:e,triggeredMap:i,parsedMappingMap:o,autoTooltipToken:a,hoveredTriggeredRuleId:r,ruleStatusMap:f,onResetGame:p,className:y,contentClassName:m})=>{const v=[...t].sort((_,T)=>{const A=x=>{const b=f[x.id];return b==="triggered"||i.has(x.id)?3:b==="active_not_triggered"||x.active?2:1};return A(T)-A(_)});return E.jsxs("div",{className:`flex flex-col bg-[#140404] border-l-4 border-brown-600 p-4 shadow-2xl z-10 ${y??""}`,children:[E.jsxs("h2",{className:"text-gold font-display text-lg mb-4 border-b border-brown pb-2 flex justify-between items-center shrink-0",children:[E.jsx("span",{children:""}),E.jsxs("div",{className:"flex items-center gap-2",children:[e.length>0&&E.jsxs("span",{className:"text-[10px] bg-yellow-600 px-1.5 py-0.5 rounded text-black font-bold border border-yellow-400",children:[E.jsx("i",{className:"fa-solid fa-bolt mr-0.5"}),e.length," "]}),E.jsxs("span",{className:"text-xs bg-velvet-red px-2 py-0.5 rounded text-gold border border-gold",children:[t.filter(_=>_.active).length," "]})]})]}),E.jsxs("div",{className:`flex-1 pr-1 scrollbar-hide space-y-3 overflow-y-auto ${m??""}`,children:[v.map(_=>E.jsx(_C,{rule:_,triggeredInfo:i.get(_.id),parsedMapping:o.get(_.id),autoShowToken:a,isHighlighted:r===_.id,statusOverride:f[_.id]},_.id)),t.some(_=>!_.active)&&E.jsx("div",{className:"text-center p-3 border border-dashed border-brown-600 opacity-50 rounded-lg",children:E.jsx("p",{className:"text-xs text-stone-gray",children:"..."})})]}),E.jsxs("div",{className:"mt-4 p-3 bg-brown-800/20 rounded border border-brown text-center shrink-0",children:[E.jsx("i",{className:"fa-solid fa-gear text-xl text-brown mb-1 animate-spin-slow opacity-50"}),E.jsx("p",{className:"text-[10px] text-stone-gray italic",children:'""'}),E.jsxs("button",{onClick:p,className:"mt-2 text-xs text-paper/60 hover:text-gold transition-colors duration-300 underline underline-offset-2 decoration-dotted",children:[E.jsx("i",{className:"fa-solid fa-rotate-right mr-1"}),""]})]})]})};var SC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let TC,EC;function AC(){return{geminiUrl:TC,vertexUrl:EC}}function CC(t,e,i,o){var a,r;if(!(t!=null&&t.baseUrl)){const f=AC();return e?(a=f.vertexUrl)!==null&&a!==void 0?a:i:(r=f.geminiUrl)!==null&&r!==void 0?r:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jn{}function te(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(o,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const r=e[a];return r!=null?String(r):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function d(t,e,i){for(let r=0;r<e.length-1;r++){const f=e[r];if(f.endsWith("[]")){const p=f.slice(0,-2);if(!(p in t))if(Array.isArray(i))t[p]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(t[p])){const y=t[p];if(Array.isArray(i))for(let m=0;m<y.length;m++){const v=y[m];d(v,e.slice(r+1),i[m])}else for(const m of y)d(m,e.slice(r+1),i)}return}else if(f.endsWith("[0]")){const p=f.slice(0,-3);p in t||(t[p]=[{}]);const y=t[p];d(y[0],e.slice(r+1),i);return}(!t[f]||typeof t[f]!="object")&&(t[f]={}),t=t[f]}const o=e[e.length-1],a=t[o];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[o]=i}function c(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return i;const a=e[o];if(a.endsWith("[]")){const r=a.slice(0,-2);if(r in t){const f=t[r];return Array.isArray(f)?f.map(p=>c(p,e.slice(o+1),i)):i}else return i}else t=t[a]}return t}catch(o){if(o instanceof TypeError)return i;throw o}}function xC(t,e){for(const[i,o]of Object.entries(e)){const a=i.split("."),r=o.split("."),f=new Set;let p=-1;for(let y=0;y<a.length;y++)if(a[y]==="*"){p=y;break}if(p!==-1&&r.length>p)for(let y=p;y<r.length;y++){const m=r[y];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&f.add(m)}Lf(t,a,r,0,f)}}function Lf(t,e,i,o,a){if(o>=e.length||typeof t!="object"||t===null)return;const r=e[o];if(r.endsWith("[]")){const f=r.slice(0,-2),p=t;if(f in p&&Array.isArray(p[f]))for(const y of p[f])Lf(y,e,i,o+1,a)}else if(r==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const f=t,p=Object.keys(f).filter(m=>!m.startsWith("_")&&!a.has(m)),y={};for(const m of p)y[m]=f[m];for(const[m,v]of Object.entries(y)){const _=[];for(const T of i.slice(o))T==="*"?_.push(m):_.push(T);d(f,_,v)}for(const m of p)delete f[m]}}else{const f=t;r in f&&Lf(f[r],e,i,o+1,a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bC(t){const e={},i=c(t,["operationName"]);i!=null&&d(e,["operationName"],i);const o=c(t,["resourceName"]);return o!=null&&d(e,["_url","resourceName"],o),e}function wC(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["response","generateVideoResponse"]);return f!=null&&d(e,["response"],NC(f)),e}function RC(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["response"]);return f!=null&&d(e,["response"],MC(f)),e}function NC(t){const e={},i=c(t,["generatedSamples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(f=>IC(f))),d(e,["generatedVideos"],r)}const o=c(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const a=c(t,["raiMediaFilteredReasons"]);return a!=null&&d(e,["raiMediaFilteredReasons"],a),e}function MC(t){const e={},i=c(t,["videos"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(f=>DC(f))),d(e,["generatedVideos"],r)}const o=c(t,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const a=c(t,["raiMediaFilteredReasons"]);return a!=null&&d(e,["raiMediaFilteredReasons"],a),e}function IC(t){const e={},i=c(t,["video"]);return i!=null&&d(e,["video"],kC(i)),e}function DC(t){const e={},i=c(t,["_self"]);return i!=null&&d(e,["video"],HC(i)),e}function UC(t){const e={},i=c(t,["operationName"]);return i!=null&&d(e,["_url","operationName"],i),e}function LC(t){const e={},i=c(t,["operationName"]);return i!=null&&d(e,["_url","operationName"],i),e}function OC(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["response"]);return f!=null&&d(e,["response"],GC(f)),e}function GC(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["parent"]);o!=null&&d(e,["parent"],o);const a=c(t,["documentName"]);return a!=null&&d(e,["documentName"],a),e}function x0(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["response"]);return f!=null&&d(e,["response"],PC(f)),e}function PC(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["parent"]);o!=null&&d(e,["parent"],o);const a=c(t,["documentName"]);return a!=null&&d(e,["documentName"],a),e}function kC(t){const e={},i=c(t,["uri"]);i!=null&&d(e,["uri"],i);const o=c(t,["encodedVideo"]);o!=null&&d(e,["videoBytes"],fd(o));const a=c(t,["encoding"]);return a!=null&&d(e,["mimeType"],a),e}function HC(t){const e={},i=c(t,["gcsUri"]);i!=null&&d(e,["uri"],i);const o=c(t,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],fd(o));const a=c(t,["mimeType"]);return a!=null&&d(e,["mimeType"],a),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var iy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(iy||(iy={}));var sy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(sy||(sy={}));var oy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(oy||(oy={}));var ee;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ee||(ee={}));var ly;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ly||(ly={}));var ay;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ay||(ay={}));var ry;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ry||(ry={}));var uy;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(uy||(uy={}));var cy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(cy||(cy={}));var fy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fy||(fy={}));var dy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(dy||(dy={}));var hy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(hy||(hy={}));var py;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(py||(py={}));var my;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(my||(my={}));var gy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(gy||(gy={}));var yy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(yy||(yy={}));var vy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(vy||(vy={}));var _y;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(_y||(_y={}));var Sy;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Sy||(Sy={}));var Ty;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Ty||(Ty={}));var Ey;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ey||(Ey={}));var Sr;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Sr||(Sr={}));var Ay;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ay||(Ay={}));var Cy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Cy||(Cy={}));var xy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(xy||(xy={}));var Of;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Of||(Of={}));var by;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(by||(by={}));var wy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(wy||(wy={}));var Gf;(function(t){t.COLLECTION="COLLECTION"})(Gf||(Gf={}));var Ry;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Ry||(Ry={}));var Ny;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ny||(Ny={}));var My;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(My||(My={}));var Iy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Iy||(Iy={}));var Dy;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Dy||(Dy={}));var Uy;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Uy||(Uy={}));var Ly;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ly||(Ly={}));var Oy;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Oy||(Oy={}));var Gy;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Gy||(Gy={}));var Py;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Py||(Py={}));var ky;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ky||(ky={}));var Hy;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Hy||(Hy={}));var qy;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(qy||(qy={}));var By;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(By||(By={}));var Vy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Vy||(Vy={}));var zy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(zy||(zy={}));var Fy;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Fy||(Fy={}));var $y;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})($y||($y={}));var Jy;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Jy||(Jy={}));var Yy;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Yy||(Yy={}));var Ky;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Ky||(Ky={}));var Xy;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Xy||(Xy={}));var Qy;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Qy||(Qy={}));var Zy;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Zy||(Zy={}));var Wy;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Wy||(Wy={}));var jy;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(jy||(jy={}));var ev;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(ev||(ev={}));var js;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(js||(js={}));class Pf{constructor(e){const i={};for(const o of e.headers.entries())i[o[0]]=o[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class rl{get text(){var e,i,o,a,r,f,p,y;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const T of(y=(p=(f=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[A,x]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(x!==null||x!==void 0)&&_.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,m+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,i,o,a,r,f,p,y;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(y=(p=(f=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[T,A]of Object.entries(_))T!=="inlineData"&&(A!==null||A!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,i,o,a,r,f,p,y;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(y=(p=(f=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,i,o,a,r,f,p,y,m;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(p=(f=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,i,o,a,r,f,p,y,m;if(((a=(o=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(p=(f=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class tv{}class nv{}class qC{}class BC{}class VC{}class zC{}class iv{}class sv{}class ov{}class FC{}class Tr{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new Tr;let a;const r=e;return i?a=RC(r):a=wC(r),Object.assign(o,a),o}}class lv{}class av{}class rv{}class uv{}class $C{}class JC{}class YC{}class dd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new dd,r=OC(e);return Object.assign(o,r),o}}class KC{}class XC{}class QC{}class ZC{}class cv{}class WC{get text(){var e,i,o;let a="",r=!1;const f=[];for(const p of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[y,m]of Object.entries(p))y!=="text"&&y!=="thought"&&m!==null&&f.push(y);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;r=!0,a+=p.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?a:void 0}get data(){var e,i,o;let a="";const r=[];for(const f of(o=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&o!==void 0?o:[]){for(const[p,y]of Object.entries(f))p!=="inlineData"&&y!==null&&r.push(p);f.inlineData&&typeof f.inlineData.data=="string"&&(a+=atob(f.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class jC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class hd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const o=new hd,r=x0(e);return Object.assign(o,r),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function De(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function b0(t,e){const i=De(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function w0(t){return Array.isArray(t)?t.map(e=>Er(e)):[Er(t)]}function Er(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function R0(t){const e=Er(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function N0(t){const e=Er(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function M0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>fv(e)):[fv(t)]}function kf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function dv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function hv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Nt(t){if(t==null)throw new Error("ContentUnion is required");return kf(t)?t:{role:"user",parts:M0(t)}}function pd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const o=Nt(i);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const i=Nt(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Nt(i)):[Nt(e)]}function hn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(dv(t)||hv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Nt(t)]}const e=[],i=[],o=kf(t[0]);for(const a of t){const r=kf(a);if(r!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(a);else{if(dv(a)||hv(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return o||e.push({role:"user",parts:M0(i)}),e}function ex(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(o=>o!=="null");if(i.length===1)e.type=Object.values(ee).includes(i[0].toUpperCase())?i[0].toUpperCase():ee.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of i)e.anyOf.push({type:Object.values(ee).includes(o.toUpperCase())?o.toUpperCase():ee.TYPE_UNSPECIFIED})}}function to(t){const e={},i=["items"],o=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&ex(t.type,e);for(const[f,p]of Object.entries(t))if(p!=null)if(f=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(ee).includes(p.toUpperCase())?p.toUpperCase():ee.TYPE_UNSPECIFIED}else if(i.includes(f))e[f]=to(p);else if(o.includes(f)){const y=[];for(const m of p){if(m.type=="null"){e.nullable=!0;continue}y.push(to(m))}e[f]=y}else if(a.includes(f)){const y={};for(const[m,v]of Object.entries(p))y[m]=to(v);e[f]=y}else{if(f==="additionalProperties")continue;e[f]=p}return e}function md(t){return to(t)}function gd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function yd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function io(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=to(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=to(e.response));return t}function so(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function tx(t,e,i,o=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function ei(t,e){if(typeof e!="string")throw new Error("name must be a string");return tx(t,e,"cachedContents")}function I0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ii(t){return fd(t)}function nx(t){return t!=null&&typeof t=="object"&&"name"in t}function ix(t){return t!=null&&typeof t=="object"&&"video"in t}function sx(t){return t!=null&&typeof t=="object"&&"uri"in t}function D0(t){var e;let i;if(nx(t)&&(i=t.name),!(sx(t)&&(i=t.uri,i===void 0))&&!(ix(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function U0(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function L0(t){for(const e of["models","tunedModels","publisherModels"])if(ox(t,e))return t[e];return[]}function ox(t,e){return t!==null&&typeof t=="object"&&e in t}function lx(t,e={}){const i=t,o={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(o.responseJsonSchema=i.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function ax(t,e={}){const i=[],o=new Set;for(const a of t){const r=a.name;if(o.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);o.add(r);const f=lx(a,e);f.functionDeclarations&&i.push(...f.functionDeclarations)}return{functionDeclarations:i}}function O0(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const o=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,a=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function rx(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function G0(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const a=i.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let r=!1;for(const f of a){if(typeof f!="object"||f===null)continue;const y=f.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function oo(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function P0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ux(t){const e={},i=c(t,["responsesFile"]);i!=null&&d(e,["fileName"],i);const o=c(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(f=>zx(f))),d(e,["inlinedResponses"],r)}const a=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["inlinedEmbedContentResponses"],r)}return e}function cx(t){const e={},i=c(t,["predictionsFormat"]);i!=null&&d(e,["format"],i);const o=c(t,["gcsDestination","outputUriPrefix"]);o!=null&&d(e,["gcsUri"],o);const a=c(t,["bigqueryDestination","outputUri"]);return a!=null&&d(e,["bigqueryUri"],a),e}function fx(t){const e={},i=c(t,["format"]);i!=null&&d(e,["predictionsFormat"],i);const o=c(t,["gcsUri"]);o!=null&&d(e,["gcsDestination","outputUriPrefix"],o);const a=c(t,["bigqueryUri"]);if(a!=null&&d(e,["bigqueryDestination","outputUri"],a),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ur(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata","displayName"]);o!=null&&d(e,["displayName"],o);const a=c(t,["metadata","state"]);a!=null&&d(e,["state"],P0(a));const r=c(t,["metadata","createTime"]);r!=null&&d(e,["createTime"],r);const f=c(t,["metadata","endTime"]);f!=null&&d(e,["endTime"],f);const p=c(t,["metadata","updateTime"]);p!=null&&d(e,["updateTime"],p);const y=c(t,["metadata","model"]);y!=null&&d(e,["model"],y);const m=c(t,["metadata","output"]);return m!=null&&d(e,["dest"],ux(G0(m))),e}function Hf(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["displayName"]);o!=null&&d(e,["displayName"],o);const a=c(t,["state"]);a!=null&&d(e,["state"],P0(a));const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["createTime"]);f!=null&&d(e,["createTime"],f);const p=c(t,["startTime"]);p!=null&&d(e,["startTime"],p);const y=c(t,["endTime"]);y!=null&&d(e,["endTime"],y);const m=c(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const v=c(t,["model"]);v!=null&&d(e,["model"],v);const _=c(t,["inputConfig"]);_!=null&&d(e,["src"],dx(_));const T=c(t,["outputConfig"]);T!=null&&d(e,["dest"],cx(G0(T)));const A=c(t,["completionStats"]);return A!=null&&d(e,["completionStats"],A),e}function dx(t){const e={},i=c(t,["instancesFormat"]);i!=null&&d(e,["format"],i);const o=c(t,["gcsSource","uris"]);o!=null&&d(e,["gcsUri"],o);const a=c(t,["bigquerySource","inputUri"]);return a!=null&&d(e,["bigqueryUri"],a),e}function hx(t,e){const i={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=c(e,["fileName"]);o!=null&&d(i,["fileName"],o);const a=c(e,["inlinedRequests"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>Vx(t,f))),d(i,["requests","requests"],r)}return i}function px(t){const e={},i=c(t,["format"]);i!=null&&d(e,["instancesFormat"],i);const o=c(t,["gcsUri"]);o!=null&&d(e,["gcsSource","uris"],o);const a=c(t,["bigqueryUri"]);if(a!=null&&d(e,["bigquerySource","inputUri"],a),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function mx(t){const e={},i=c(t,["data"]);if(i!=null&&d(e,["data"],i),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function gx(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],oo(t,o)),i}function yx(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],oo(t,o)),i}function vx(t){const e={},i=c(t,["content"]);i!=null&&d(e,["content"],i);const o=c(t,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],_x(o));const a=c(t,["tokenCount"]);a!=null&&d(e,["tokenCount"],a);const r=c(t,["finishReason"]);r!=null&&d(e,["finishReason"],r);const f=c(t,["avgLogprobs"]);f!=null&&d(e,["avgLogprobs"],f);const p=c(t,["groundingMetadata"]);p!=null&&d(e,["groundingMetadata"],p);const y=c(t,["index"]);y!=null&&d(e,["index"],y);const m=c(t,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const v=c(t,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),d(e,["safetyRatings"],T)}const _=c(t,["urlContextMetadata"]);return _!=null&&d(e,["urlContextMetadata"],_),e}function _x(t){const e={},i=c(t,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),d(e,["citations"],o)}return e}function k0(t){const e={},i=c(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>Qx(r))),d(e,["parts"],a)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function Sx(t,e){const i={},o=c(t,["displayName"]);if(e!==void 0&&o!=null&&d(e,["batch","displayName"],o),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function Tx(t,e){const i={},o=c(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const a=c(t,["dest"]);return e!==void 0&&a!=null&&d(e,["outputConfig"],fx(rx(a))),i}function pv(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["_url","model"],De(t,o));const a=c(e,["src"]);a!=null&&d(i,["batch","inputConfig"],hx(t,O0(t,a)));const r=c(e,["config"]);return r!=null&&Sx(r,i),i}function Ex(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["model"],De(t,o));const a=c(e,["src"]);a!=null&&d(i,["inputConfig"],px(O0(t,a)));const r=c(e,["config"]);return r!=null&&Tx(r,i),i}function Ax(t,e){const i={},o=c(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["batch","displayName"],o),i}function Cx(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["_url","model"],De(t,o));const a=c(e,["src"]);a!=null&&d(i,["batch","inputConfig"],Ix(t,a));const r=c(e,["config"]);return r!=null&&Ax(r,i),i}function xx(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],oo(t,o)),i}function bx(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],oo(t,o)),i}function wx(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);return r!=null&&d(e,["error"],r),e}function Rx(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);return r!=null&&d(e,["error"],r),e}function Nx(t,e){const i={},o=c(e,["contents"]);if(o!=null){let r=pd(t,o);Array.isArray(r)&&(r=r.map(f=>f)),d(i,["requests[]","request","content"],r)}const a=c(e,["config"]);return a!=null&&(d(i,["_self"],Mx(a,i)),xC(i,{"requests[].*":"requests[].request.*"})),i}function Mx(t,e){const i={},o=c(t,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const a=c(t,["title"]);e!==void 0&&a!=null&&d(e,["requests[]","title"],a);const r=c(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&d(e,["requests[]","outputDimensionality"],r),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Ix(t,e){const i={},o=c(e,["fileName"]);o!=null&&d(i,["file_name"],o);const a=c(e,["inlinedRequests"]);return a!=null&&d(i,["requests"],Nx(t,a)),i}function Dx(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Ux(t){const e={},i=c(t,["id"]);i!=null&&d(e,["id"],i);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const a=c(t,["name"]);if(a!=null&&d(e,["name"],a),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Lx(t){const e={},i=c(t,["allowedFunctionNames"]);i!=null&&d(e,["allowedFunctionNames"],i);const o=c(t,["mode"]);if(o!=null&&d(e,["mode"],o),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ox(t,e,i){const o={},a=c(e,["systemInstruction"]);i!==void 0&&a!=null&&d(i,["systemInstruction"],k0(Nt(a)));const r=c(e,["temperature"]);r!=null&&d(o,["temperature"],r);const f=c(e,["topP"]);f!=null&&d(o,["topP"],f);const p=c(e,["topK"]);p!=null&&d(o,["topK"],p);const y=c(e,["candidateCount"]);y!=null&&d(o,["candidateCount"],y);const m=c(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const v=c(e,["stopSequences"]);v!=null&&d(o,["stopSequences"],v);const _=c(e,["responseLogprobs"]);_!=null&&d(o,["responseLogprobs"],_);const T=c(e,["logprobs"]);T!=null&&d(o,["logprobs"],T);const A=c(e,["presencePenalty"]);A!=null&&d(o,["presencePenalty"],A);const x=c(e,["frequencyPenalty"]);x!=null&&d(o,["frequencyPenalty"],x);const b=c(e,["seed"]);b!=null&&d(o,["seed"],b);const w=c(e,["responseMimeType"]);w!=null&&d(o,["responseMimeType"],w);const q=c(e,["responseSchema"]);q!=null&&d(o,["responseSchema"],md(q));const G=c(e,["responseJsonSchema"]);if(G!=null&&d(o,["responseJsonSchema"],G),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=c(e,["safetySettings"]);if(i!==void 0&&H!=null){let Oe=H;Array.isArray(Oe)&&(Oe=Oe.map(Le=>Zx(Le))),d(i,["safetySettings"],Oe)}const k=c(e,["tools"]);if(i!==void 0&&k!=null){let Oe=so(k);Array.isArray(Oe)&&(Oe=Oe.map(Le=>jx(io(Le)))),d(i,["tools"],Oe)}const L=c(e,["toolConfig"]);if(i!==void 0&&L!=null&&d(i,["toolConfig"],Wx(L)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Z=c(e,["cachedContent"]);i!==void 0&&Z!=null&&d(i,["cachedContent"],ei(t,Z));const $=c(e,["responseModalities"]);$!=null&&d(o,["responseModalities"],$);const K=c(e,["mediaResolution"]);K!=null&&d(o,["mediaResolution"],K);const X=c(e,["speechConfig"]);if(X!=null&&d(o,["speechConfig"],gd(X)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const se=c(e,["thinkingConfig"]);se!=null&&d(o,["thinkingConfig"],se);const le=c(e,["imageConfig"]);le!=null&&d(o,["imageConfig"],Bx(le));const Ee=c(e,["enableEnhancedCivicAnswers"]);if(Ee!=null&&d(o,["enableEnhancedCivicAnswers"],Ee),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function Gx(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>vx(m))),d(e,["candidates"],y)}const a=c(t,["modelVersion"]);a!=null&&d(e,["modelVersion"],a);const r=c(t,["promptFeedback"]);r!=null&&d(e,["promptFeedback"],r);const f=c(t,["responseId"]);f!=null&&d(e,["responseId"],f);const p=c(t,["usageMetadata"]);return p!=null&&d(e,["usageMetadata"],p),e}function Px(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],oo(t,o)),i}function kx(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],oo(t,o)),i}function Hx(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function qx(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function Bx(t){const e={},i=c(t,["aspectRatio"]);i!=null&&d(e,["aspectRatio"],i);const o=c(t,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Vx(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["request","model"],De(t,o));const a=c(e,["contents"]);if(a!=null){let p=hn(a);Array.isArray(p)&&(p=p.map(y=>k0(y))),d(i,["request","contents"],p)}const r=c(e,["metadata"]);r!=null&&d(i,["metadata"],r);const f=c(e,["config"]);return f!=null&&d(i,["request","generationConfig"],Ox(t,f,c(i,["request"],{}))),i}function zx(t){const e={},i=c(t,["response"]);i!=null&&d(e,["response"],Gx(i));const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["error"]);return a!=null&&d(e,["error"],a),e}function Fx(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);if(e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function $x(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);e!==void 0&&a!=null&&d(e,["_query","pageToken"],a);const r=c(t,["filter"]);return e!==void 0&&r!=null&&d(e,["_query","filter"],r),i}function Jx(t){const e={},i=c(t,["config"]);return i!=null&&Fx(i,e),e}function Yx(t){const e={},i=c(t,["config"]);return i!=null&&$x(i,e),e}function Kx(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["operations"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>ur(f))),d(e,["batchJobs"],r)}return e}function Xx(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["batchPredictionJobs"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>Hf(f))),d(e,["batchJobs"],r)}return e}function Qx(t){const e={},i=c(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const a=c(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const r=c(t,["fileData"]);r!=null&&d(e,["fileData"],Dx(r));const f=c(t,["functionCall"]);f!=null&&d(e,["functionCall"],Ux(f));const p=c(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],mx(y));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const v=c(t,["thought"]);v!=null&&d(e,["thought"],v);const _=c(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const T=c(t,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function Zx(t){const e={},i=c(t,["category"]);if(i!=null&&d(e,["category"],i),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=c(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function Wx(t){const e={},i=c(t,["retrievalConfig"]);i!=null&&d(e,["retrievalConfig"],i);const o=c(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],Lx(o)),e}function jx(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],Hx(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],qx(p));const y=c(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Wn||(Wn={}));class os{constructor(e,i,o,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,o,a)}init(e,i,o){var a,r;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let f={config:{}};!o||Object.keys(o).length===0?f={config:{}}:typeof o=="object"?f=Object.assign({},o):f=o,f.config&&(f.config.pageToken=i.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(r=(a=f.config)===null||a===void 0?void 0:a.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eb=class extends jn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new os(Wn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=pv(this.apiClient,e),o=i._url,a=te("{model}:batchGenerateContent",o),p=i.batch.inputConfig.requests,y=p.requests,m=[];for(const v of y){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const A=_.request;A.systemInstruction=T,_.request=A}m.push(_)}return p.requests=m,delete i.config,delete i._url,delete i._query,{path:a,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const o=i?Object.assign({},i):{},a=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${a}`),o.dest===void 0){const r=this.getGcsUri(e),f=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?o.dest=`${r.slice(0,-6)}/dest`:o.dest=`${r}_dest_${a}`;else if(f)o.dest=`${f}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Ex(this.apiClient,e);return p=te("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>Hf(v))}else{const m=pv(this.apiClient,e);return p=te("{model}:batchGenerateContent",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>ur(v))}}async createEmbeddingsInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Cx(this.apiClient,e);return r=te("{model}:asyncBatchEmbedContent",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>ur(y))}}async get(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=kx(this.apiClient,e);return p=te("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>Hf(v))}else{const m=Px(this.apiClient,e);return p=te("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>ur(v))}}async cancel(e){var i,o,a,r;let f="",p={};if(this.apiClient.isVertexAI()){const y=yx(this.apiClient,e);f=te("batchPredictionJobs/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=gx(this.apiClient,e);f=te("batches/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Yx(e);return p=te("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Xx(v),T=new cv;return Object.assign(T,_),T})}else{const m=Jx(e);return p=te("batches",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Kx(v),T=new cv;return Object.assign(T,_),T})}}async delete(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=bx(this.apiClient,e);return p=te("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>Rx(v))}else{const m=xx(this.apiClient,e);return p=te("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>wx(v))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tb(t){const e={},i=c(t,["data"]);if(i!=null&&d(e,["data"],i),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function mv(t){const e={},i=c(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>Cb(r))),d(e,["parts"],a)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function nb(t,e){const i={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const a=c(t,["expireTime"]);e!==void 0&&a!=null&&d(e,["expireTime"],a);const r=c(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const f=c(t,["contents"]);if(e!==void 0&&f!=null){let v=hn(f);Array.isArray(v)&&(v=v.map(_=>mv(_))),d(e,["contents"],v)}const p=c(t,["systemInstruction"]);e!==void 0&&p!=null&&d(e,["systemInstruction"],mv(Nt(p)));const y=c(t,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(_=>bb(_))),d(e,["tools"],v)}const m=c(t,["toolConfig"]);if(e!==void 0&&m!=null&&d(e,["toolConfig"],xb(m)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function ib(t,e){const i={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const a=c(t,["expireTime"]);e!==void 0&&a!=null&&d(e,["expireTime"],a);const r=c(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const f=c(t,["contents"]);if(e!==void 0&&f!=null){let _=hn(f);Array.isArray(_)&&(_=_.map(T=>T)),d(e,["contents"],_)}const p=c(t,["systemInstruction"]);e!==void 0&&p!=null&&d(e,["systemInstruction"],Nt(p));const y=c(t,["tools"]);if(e!==void 0&&y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>wb(T))),d(e,["tools"],_)}const m=c(t,["toolConfig"]);e!==void 0&&m!=null&&d(e,["toolConfig"],m);const v=c(t,["kmsKeyName"]);return e!==void 0&&v!=null&&d(e,["encryption_spec","kmsKeyName"],v),i}function sb(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["model"],b0(t,o));const a=c(e,["config"]);return a!=null&&nb(a,i),i}function ob(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["model"],b0(t,o));const a=c(e,["config"]);return a!=null&&ib(a,i),i}function lb(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],ei(t,o)),i}function ab(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],ei(t,o)),i}function rb(t){const e={},i=c(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function ub(t){const e={},i=c(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function cb(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function fb(t){const e={},i=c(t,["id"]);i!=null&&d(e,["id"],i);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const a=c(t,["name"]);if(a!=null&&d(e,["name"],a),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function db(t){const e={},i=c(t,["allowedFunctionNames"]);i!=null&&d(e,["allowedFunctionNames"],i);const o=c(t,["mode"]);if(o!=null&&d(e,["mode"],o),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hb(t){const e={},i=c(t,["description"]);i!=null&&d(e,["description"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["parameters"]);a!=null&&d(e,["parameters"],a);const r=c(t,["parametersJsonSchema"]);r!=null&&d(e,["parametersJsonSchema"],r);const f=c(t,["response"]);f!=null&&d(e,["response"],f);const p=c(t,["responseJsonSchema"]);if(p!=null&&d(e,["responseJsonSchema"],p),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function pb(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],ei(t,o)),i}function mb(t,e){const i={},o=c(e,["name"]);return o!=null&&d(i,["_url","name"],ei(t,o)),i}function gb(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function yb(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function vb(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function _b(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function Sb(t){const e={},i=c(t,["config"]);return i!=null&&vb(i,e),e}function Tb(t){const e={},i=c(t,["config"]);return i!=null&&_b(i,e),e}function Eb(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["cachedContents"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["cachedContents"],r)}return e}function Ab(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["cachedContents"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["cachedContents"],r)}return e}function Cb(t){const e={},i=c(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const a=c(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const r=c(t,["fileData"]);r!=null&&d(e,["fileData"],cb(r));const f=c(t,["functionCall"]);f!=null&&d(e,["functionCall"],fb(f));const p=c(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],tb(y));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const v=c(t,["thought"]);v!=null&&d(e,["thought"],v);const _=c(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const T=c(t,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function xb(t){const e={},i=c(t,["retrievalConfig"]);i!=null&&d(e,["retrievalConfig"],i);const o=c(t,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],db(o)),e}function bb(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],gb(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],yb(p));const y=c(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function wb(t){const e={},i=c(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const o=c(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&d(e,["codeExecution"],a);const r=c(t,["enterpriseWebSearch"]);r!=null&&d(e,["enterpriseWebSearch"],r);const f=c(t,["functionDeclarations"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(T=>hb(T))),d(e,["functionDeclarations"],_)}const p=c(t,["googleMaps"]);p!=null&&d(e,["googleMaps"],p);const y=c(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],y);const m=c(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const v=c(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function Rb(t,e){const i={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const a=c(t,["expireTime"]);return e!==void 0&&a!=null&&d(e,["expireTime"],a),i}function Nb(t,e){const i={},o=c(t,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const a=c(t,["expireTime"]);return e!==void 0&&a!=null&&d(e,["expireTime"],a),i}function Mb(t,e){const i={},o=c(e,["name"]);o!=null&&d(i,["_url","name"],ei(t,o));const a=c(e,["config"]);return a!=null&&Rb(a,i),i}function Ib(t,e){const i={},o=c(e,["name"]);o!=null&&d(i,["_url","name"],ei(t,o));const a=c(e,["config"]);return a!=null&&Nb(a,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Db extends jn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new os(Wn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(i),i)}async create(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=ob(this.apiClient,e);return p=te("cachedContents",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const m=sb(this.apiClient,e);return p=te("cachedContents",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async get(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=mb(this.apiClient,e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const m=pb(this.apiClient,e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async delete(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=ab(this.apiClient,e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=ub(v),T=new rv;return Object.assign(T,_),T})}else{const m=lb(this.apiClient,e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=rb(v),T=new rv;return Object.assign(T,_),T})}}async update(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Ib(this.apiClient,e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const m=Mb(this.apiClient,e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async listInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Tb(e);return p=te("cachedContents",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Ab(v),T=new uv;return Object.assign(T,_),T})}else{const m=Sb(e);return p=te("cachedContents",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Eb(v),T=new uv;return Object.assign(T,_),T})}}}function Ar(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(t);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(t,o[a])&&(i[o[a]]=t[o[a]]);return i}function gv(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ge(t){return this instanceof ge?(this.v=t,this):new ge(t)}function Sn(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(t,e||[]),a,r=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",f),a[Symbol.asyncIterator]=function(){return this},a;function f(A){return function(x){return Promise.resolve(x).then(A,_)}}function p(A,x){o[A]&&(a[A]=function(b){return new Promise(function(w,q){r.push([A,b,w,q])>1||y(A,b)})},x&&(a[A]=x(a[A])))}function y(A,x){try{m(o[A](x))}catch(b){T(r[0][3],b)}}function m(A){A.value instanceof ge?Promise.resolve(A.value.v).then(v,_):T(r[0][2],A)}function v(A){y("next",A)}function _(A){y("throw",A)}function T(A,x){A(x),r.shift(),r.length&&y(r[0][0],r[0][1])}}function Tn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof gv=="function"?gv(t):t[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(r){i[r]=t[r]&&function(f){return new Promise(function(p,y){f=t[r](f),a(p,y,f.done,f.value)})}}function a(r,f,p,y){Promise.resolve(y).then(function(m){r({value:m,done:p})},f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ub(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:H0(i)}function H0(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Lb(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function yv(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let o=0;for(;o<i;)if(t[o].role==="user")e.push(t[o]),o++;else{const a=[];let r=!0;for(;o<i&&t[o].role==="model";)a.push(t[o]),r&&!H0(t[o])&&(r=!1),o++;r?e.push(...a):e.pop()}return e}class Ob{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new Gb(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let Gb=class{constructor(e,i,o,a={},r=[]){this.apiClient=e,this.modelsModule=i,this.model=o,this.config=a,this.history=r,this.sendPromise=Promise.resolve(),Lb(r)}async sendMessage(e){var i;await this.sendPromise;const o=Nt(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var r,f,p;const y=await a,m=(f=(r=y.candidates)===null||r===void 0?void 0:r[0])===null||f===void 0?void 0:f.content,v=y.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(p=v.slice(_))!==null&&p!==void 0?p:[]);const A=m?[m]:[];this.recordHistory(o,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const o=Nt(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const r=await a;return this.processStreamResponse(r,o)}getHistory(e=!1){const i=e?yv(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return Sn(this,arguments,function*(){var a,r,f,p,y,m;const v=[];try{for(var _=!0,T=Tn(e),A;A=yield ge(T.next()),a=A.done,!a;_=!0){p=A.value,_=!1;const x=p;if(Ub(x)){const b=(m=(y=x.candidates)===null||y===void 0?void 0:y[0])===null||m===void 0?void 0:m.content;b!==void 0&&v.push(b)}yield yield ge(x)}}catch(x){r={error:x}}finally{try{!_&&!a&&(f=T.return)&&(yield ge(f.call(T)))}finally{if(r)throw r.error}}this.recordHistory(i,v)})}recordHistory(e,i,o){let a=[];i.length>0&&i.every(r=>r.role!==void 0)?a=i:a.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...yv(o)):this.history.push(e),this.history.push(...a)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,wl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pb(t){const e={},i=c(t,["file"]);return i!=null&&d(e,["file"],i),e}function kb(t){const e={},i=c(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function Hb(t){const e={},i=c(t,["name"]);return i!=null&&d(e,["_url","file"],D0(i)),e}function qb(t){const e={},i=c(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function Bb(t){const e={},i=c(t,["name"]);return i!=null&&d(e,["_url","file"],D0(i)),e}function Vb(t){const e={},i=c(t,["uris"]);return i!=null&&d(e,["uris"],i),e}function zb(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function Fb(t){const e={},i=c(t,["config"]);return i!=null&&zb(i,e),e}function $b(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["files"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["files"],r)}return e}function Jb(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Yb=class extends jn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new os(Wn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Fb(e);return r=te("files",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=$b(y),v=new KC;return Object.assign(v,m),v})}}async createInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Pb(e);return r=te("upload/v1beta/files",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=kb(y),v=new XC;return Object.assign(v,m),v})}}async get(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Bb(e);return r=te("files/{file}",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Hb(e);return r=te("files/{file}",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=qb(y),v=new QC;return Object.assign(v,m),v})}}async registerFilesInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Vb(e);return r=te("files:register",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=Jb(y),v=new ZC;return Object.assign(v,m),v})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cr(t){const e={},i=c(t,["data"]);if(i!=null&&d(e,["data"],i),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Kb(t){const e={},i=c(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>cw(r))),d(e,["parts"],a)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function Xb(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Qb(t){const e={},i=c(t,["id"]);i!=null&&d(e,["id"],i);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const a=c(t,["name"]);if(a!=null&&d(e,["name"],a),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zb(t){const e={},i=c(t,["description"]);i!=null&&d(e,["description"],i);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const a=c(t,["parameters"]);a!=null&&d(e,["parameters"],a);const r=c(t,["parametersJsonSchema"]);r!=null&&d(e,["parametersJsonSchema"],r);const f=c(t,["response"]);f!=null&&d(e,["response"],f);const p=c(t,["responseJsonSchema"]);if(p!=null&&d(e,["responseJsonSchema"],p),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Wb(t){const e={},i=c(t,["modelSelectionConfig"]);i!=null&&d(e,["modelConfig"],i);const o=c(t,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const a=c(t,["audioTimestamp"]);a!=null&&d(e,["audioTimestamp"],a);const r=c(t,["candidateCount"]);r!=null&&d(e,["candidateCount"],r);const f=c(t,["enableAffectiveDialog"]);f!=null&&d(e,["enableAffectiveDialog"],f);const p=c(t,["frequencyPenalty"]);p!=null&&d(e,["frequencyPenalty"],p);const y=c(t,["logprobs"]);y!=null&&d(e,["logprobs"],y);const m=c(t,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const v=c(t,["mediaResolution"]);v!=null&&d(e,["mediaResolution"],v);const _=c(t,["presencePenalty"]);_!=null&&d(e,["presencePenalty"],_);const T=c(t,["responseLogprobs"]);T!=null&&d(e,["responseLogprobs"],T);const A=c(t,["responseMimeType"]);A!=null&&d(e,["responseMimeType"],A);const x=c(t,["responseModalities"]);x!=null&&d(e,["responseModalities"],x);const b=c(t,["responseSchema"]);b!=null&&d(e,["responseSchema"],b);const w=c(t,["routingConfig"]);w!=null&&d(e,["routingConfig"],w);const q=c(t,["seed"]);q!=null&&d(e,["seed"],q);const G=c(t,["speechConfig"]);G!=null&&d(e,["speechConfig"],G);const H=c(t,["stopSequences"]);H!=null&&d(e,["stopSequences"],H);const k=c(t,["temperature"]);k!=null&&d(e,["temperature"],k);const L=c(t,["thinkingConfig"]);L!=null&&d(e,["thinkingConfig"],L);const Z=c(t,["topK"]);Z!=null&&d(e,["topK"],Z);const $=c(t,["topP"]);if($!=null&&d(e,["topP"],$),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function jb(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function ew(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function tw(t,e){const i={},o=c(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const a=c(t,["responseModalities"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","responseModalities"],a);const r=c(t,["temperature"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","temperature"],r);const f=c(t,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const p=c(t,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const y=c(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=c(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const _=c(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],yd(_));const T=c(t,["thinkingConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","thinkingConfig"],T);const A=c(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],Kb(Nt(x)));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let Z=so(b);Array.isArray(Z)&&(Z=Z.map($=>dw(io($)))),d(e,["setup","tools"],Z)}const w=c(t,["sessionResumption"]);e!==void 0&&w!=null&&d(e,["setup","sessionResumption"],fw(w));const q=c(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","inputAudioTranscription"],q);const G=c(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&d(e,["setup","outputAudioTranscription"],G);const H=c(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&d(e,["setup","realtimeInputConfig"],H);const k=c(t,["contextWindowCompression"]);e!==void 0&&k!=null&&d(e,["setup","contextWindowCompression"],k);const L=c(t,["proactivity"]);if(e!==void 0&&L!=null&&d(e,["setup","proactivity"],L),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function nw(t,e){const i={},o=c(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],Wb(o));const a=c(t,["responseModalities"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","responseModalities"],a);const r=c(t,["temperature"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","temperature"],r);const f=c(t,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const p=c(t,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const y=c(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=c(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const _=c(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],yd(_));const T=c(t,["thinkingConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","thinkingConfig"],T);const A=c(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],Nt(x));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let $=so(b);Array.isArray($)&&($=$.map(K=>hw(io(K)))),d(e,["setup","tools"],$)}const w=c(t,["sessionResumption"]);e!==void 0&&w!=null&&d(e,["setup","sessionResumption"],w);const q=c(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","inputAudioTranscription"],q);const G=c(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&d(e,["setup","outputAudioTranscription"],G);const H=c(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&d(e,["setup","realtimeInputConfig"],H);const k=c(t,["contextWindowCompression"]);e!==void 0&&k!=null&&d(e,["setup","contextWindowCompression"],k);const L=c(t,["proactivity"]);e!==void 0&&L!=null&&d(e,["setup","proactivity"],L);const Z=c(t,["explicitVadSignal"]);return e!==void 0&&Z!=null&&d(e,["setup","explicitVadSignal"],Z),i}function iw(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["setup","model"],De(t,o));const a=c(e,["config"]);return a!=null&&d(i,["config"],tw(a,i)),i}function sw(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["setup","model"],De(t,o));const a=c(e,["config"]);return a!=null&&d(i,["config"],nw(a,i)),i}function ow(t){const e={},i=c(t,["musicGenerationConfig"]);return i!=null&&d(e,["musicGenerationConfig"],i),e}function lw(t){const e={},i=c(t,["weightedPrompts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),d(e,["weightedPrompts"],o)}return e}function aw(t){const e={},i=c(t,["media"]);if(i!=null){let m=w0(i);Array.isArray(m)&&(m=m.map(v=>cr(v))),d(e,["mediaChunks"],m)}const o=c(t,["audio"]);o!=null&&d(e,["audio"],cr(N0(o)));const a=c(t,["audioStreamEnd"]);a!=null&&d(e,["audioStreamEnd"],a);const r=c(t,["video"]);r!=null&&d(e,["video"],cr(R0(r)));const f=c(t,["text"]);f!=null&&d(e,["text"],f);const p=c(t,["activityStart"]);p!=null&&d(e,["activityStart"],p);const y=c(t,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function rw(t){const e={},i=c(t,["media"]);if(i!=null){let m=w0(i);Array.isArray(m)&&(m=m.map(v=>v)),d(e,["mediaChunks"],m)}const o=c(t,["audio"]);o!=null&&d(e,["audio"],N0(o));const a=c(t,["audioStreamEnd"]);a!=null&&d(e,["audioStreamEnd"],a);const r=c(t,["video"]);r!=null&&d(e,["video"],R0(r));const f=c(t,["text"]);f!=null&&d(e,["text"],f);const p=c(t,["activityStart"]);p!=null&&d(e,["activityStart"],p);const y=c(t,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function uw(t){const e={},i=c(t,["setupComplete"]);i!=null&&d(e,["setupComplete"],i);const o=c(t,["serverContent"]);o!=null&&d(e,["serverContent"],o);const a=c(t,["toolCall"]);a!=null&&d(e,["toolCall"],a);const r=c(t,["toolCallCancellation"]);r!=null&&d(e,["toolCallCancellation"],r);const f=c(t,["usageMetadata"]);f!=null&&d(e,["usageMetadata"],pw(f));const p=c(t,["goAway"]);p!=null&&d(e,["goAway"],p);const y=c(t,["sessionResumptionUpdate"]);y!=null&&d(e,["sessionResumptionUpdate"],y);const m=c(t,["voiceActivityDetectionSignal"]);m!=null&&d(e,["voiceActivityDetectionSignal"],m);const v=c(t,["voiceActivity"]);return v!=null&&d(e,["voiceActivity"],mw(v)),e}function cw(t){const e={},i=c(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const a=c(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const r=c(t,["fileData"]);r!=null&&d(e,["fileData"],Xb(r));const f=c(t,["functionCall"]);f!=null&&d(e,["functionCall"],Qb(f));const p=c(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],cr(y));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const v=c(t,["thought"]);v!=null&&d(e,["thought"],v);const _=c(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const T=c(t,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function fw(t){const e={},i=c(t,["handle"]);if(i!=null&&d(e,["handle"],i),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dw(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],jb(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],ew(p));const y=c(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function hw(t){const e={},i=c(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const o=c(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&d(e,["codeExecution"],a);const r=c(t,["enterpriseWebSearch"]);r!=null&&d(e,["enterpriseWebSearch"],r);const f=c(t,["functionDeclarations"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(T=>Zb(T))),d(e,["functionDeclarations"],_)}const p=c(t,["googleMaps"]);p!=null&&d(e,["googleMaps"],p);const y=c(t,["googleSearch"]);y!=null&&d(e,["googleSearch"],y);const m=c(t,["googleSearchRetrieval"]);m!=null&&d(e,["googleSearchRetrieval"],m);const v=c(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function pw(t){const e={},i=c(t,["promptTokenCount"]);i!=null&&d(e,["promptTokenCount"],i);const o=c(t,["cachedContentTokenCount"]);o!=null&&d(e,["cachedContentTokenCount"],o);const a=c(t,["candidatesTokenCount"]);a!=null&&d(e,["responseTokenCount"],a);const r=c(t,["toolUsePromptTokenCount"]);r!=null&&d(e,["toolUsePromptTokenCount"],r);const f=c(t,["thoughtsTokenCount"]);f!=null&&d(e,["thoughtsTokenCount"],f);const p=c(t,["totalTokenCount"]);p!=null&&d(e,["totalTokenCount"],p);const y=c(t,["promptTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(x=>x)),d(e,["promptTokensDetails"],A)}const m=c(t,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(x=>x)),d(e,["cacheTokensDetails"],A)}const v=c(t,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(x=>x)),d(e,["responseTokensDetails"],A)}const _=c(t,["toolUsePromptTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(x=>x)),d(e,["toolUsePromptTokensDetails"],A)}const T=c(t,["trafficType"]);return T!=null&&d(e,["trafficType"],T),e}function mw(t){const e={},i=c(t,["type"]);return i!=null&&d(e,["voiceActivityType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gw(t,e){const i={},o=c(t,["data"]);if(o!=null&&d(i,["data"],o),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=c(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function yw(t,e){const i={},o=c(t,["content"]);o!=null&&d(i,["content"],o);const a=c(t,["citationMetadata"]);a!=null&&d(i,["citationMetadata"],vw(a));const r=c(t,["tokenCount"]);r!=null&&d(i,["tokenCount"],r);const f=c(t,["finishReason"]);f!=null&&d(i,["finishReason"],f);const p=c(t,["avgLogprobs"]);p!=null&&d(i,["avgLogprobs"],p);const y=c(t,["groundingMetadata"]);y!=null&&d(i,["groundingMetadata"],y);const m=c(t,["index"]);m!=null&&d(i,["index"],m);const v=c(t,["logprobsResult"]);v!=null&&d(i,["logprobsResult"],v);const _=c(t,["safetyRatings"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(x=>x)),d(i,["safetyRatings"],A)}const T=c(t,["urlContextMetadata"]);return T!=null&&d(i,["urlContextMetadata"],T),i}function vw(t,e){const i={},o=c(t,["citationSources"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(i,["citations"],a)}return i}function _w(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["contents"]);if(r!=null){let f=hn(r);Array.isArray(f)&&(f=f.map(p=>p)),d(o,["contents"],f)}return o}function Sw(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["tokensInfo"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(i,["tokensInfo"],r)}return i}function Tw(t,e){const i={},o=c(t,["values"]);o!=null&&d(i,["values"],o);const a=c(t,["statistics"]);return a!=null&&d(i,["statistics"],Ew(a)),i}function Ew(t,e){const i={},o=c(t,["truncated"]);o!=null&&d(i,["truncated"],o);const a=c(t,["token_count"]);return a!=null&&d(i,["tokenCount"],a),i}function Or(t,e){const i={},o=c(t,["parts"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(f=>IR(f))),d(i,["parts"],r)}const a=c(t,["role"]);return a!=null&&d(i,["role"],a),i}function Aw(t,e){const i={},o=c(t,["controlType"]);o!=null&&d(i,["controlType"],o);const a=c(t,["enableControlImageComputation"]);return a!=null&&d(i,["computeControl"],a),i}function Cw(t,e){const i={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return i}function xw(t,e,i){const o={},a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],Nt(a));const r=c(t,["tools"]);if(e!==void 0&&r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>z0(y))),d(e,["tools"],p)}const f=c(t,["generationConfig"]);return e!==void 0&&f!=null&&d(e,["generationConfig"],gR(f)),o}function bw(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["contents"]);if(r!=null){let p=hn(r);Array.isArray(p)&&(p=p.map(y=>Or(y))),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&Cw(f),o}function ww(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["contents"]);if(r!=null){let p=hn(r);Array.isArray(p)&&(p=p.map(y=>y)),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&xw(f,o),o}function Rw(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["totalTokens"]);a!=null&&d(i,["totalTokens"],a);const r=c(t,["cachedContentTokenCount"]);return r!=null&&d(i,["cachedContentTokenCount"],r),i}function Nw(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["totalTokens"]);return a!=null&&d(i,["totalTokens"],a),i}function Mw(t,e,i){const o={},a=c(e,["model"]);return a!=null&&d(o,["_url","name"],De(t,a)),o}function Iw(t,e,i){const o={},a=c(e,["model"]);return a!=null&&d(o,["_url","name"],De(t,a)),o}function Dw(t,e){const i={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(i,["sdkHttpResponse"],o),i}function Uw(t,e){const i={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(i,["sdkHttpResponse"],o),i}function Lw(t,e,i){const o={},a=c(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const f=c(t,["numberOfImages"]);e!==void 0&&f!=null&&d(e,["parameters","sampleCount"],f);const p=c(t,["aspectRatio"]);e!==void 0&&p!=null&&d(e,["parameters","aspectRatio"],p);const y=c(t,["guidanceScale"]);e!==void 0&&y!=null&&d(e,["parameters","guidanceScale"],y);const m=c(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const v=c(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&d(e,["parameters","safetySetting"],v);const _=c(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const T=c(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&d(e,["parameters","includeSafetyAttributes"],T);const A=c(t,["includeRaiReason"]);e!==void 0&&A!=null&&d(e,["parameters","includeRaiReason"],A);const x=c(t,["language"]);e!==void 0&&x!=null&&d(e,["parameters","language"],x);const b=c(t,["outputMimeType"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","mimeType"],b);const w=c(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&d(e,["parameters","outputOptions","compressionQuality"],w);const q=c(t,["addWatermark"]);e!==void 0&&q!=null&&d(e,["parameters","addWatermark"],q);const G=c(t,["labels"]);e!==void 0&&G!=null&&d(e,["labels"],G);const H=c(t,["editMode"]);e!==void 0&&H!=null&&d(e,["parameters","editMode"],H);const k=c(t,["baseSteps"]);return e!==void 0&&k!=null&&d(e,["parameters","editConfig","baseSteps"],k),o}function Ow(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const f=c(e,["referenceImages"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(m=>PR(m))),d(o,["instances[0]","referenceImages"],y)}const p=c(e,["config"]);return p!=null&&Lw(p,o),o}function Gw(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>Gr(f))),d(i,["generatedImages"],r)}return i}function Pw(t,e,i){const o={},a=c(t,["taskType"]);e!==void 0&&a!=null&&d(e,["requests[]","taskType"],a);const r=c(t,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const f=c(t,["outputDimensionality"]);if(e!==void 0&&f!=null&&d(e,["requests[]","outputDimensionality"],f),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function kw(t,e,i){const o={},a=c(t,["taskType"]);e!==void 0&&a!=null&&d(e,["instances[]","task_type"],a);const r=c(t,["title"]);e!==void 0&&r!=null&&d(e,["instances[]","title"],r);const f=c(t,["outputDimensionality"]);e!==void 0&&f!=null&&d(e,["parameters","outputDimensionality"],f);const p=c(t,["mimeType"]);e!==void 0&&p!=null&&d(e,["instances[]","mimeType"],p);const y=c(t,["autoTruncate"]);return e!==void 0&&y!=null&&d(e,["parameters","autoTruncate"],y),o}function Hw(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["contents"]);if(r!=null){let y=pd(t,r);Array.isArray(y)&&(y=y.map(m=>m)),d(o,["requests[]","content"],y)}const f=c(e,["config"]);f!=null&&Pw(f,o);const p=c(e,["model"]);return p!==void 0&&d(o,["requests[]","model"],De(t,p)),o}function qw(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["contents"]);if(r!=null){let p=pd(t,r);Array.isArray(p)&&(p=p.map(y=>y)),d(o,["instances[]","content"],p)}const f=c(e,["config"]);return f!=null&&kw(f,o),o}function Bw(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["embeddings"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>p)),d(i,["embeddings"],f)}const r=c(t,["metadata"]);return r!=null&&d(i,["metadata"],r),i}function Vw(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["predictions[]","embeddings"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>Tw(p))),d(i,["embeddings"],f)}const r=c(t,["metadata"]);return r!=null&&d(i,["metadata"],r),i}function zw(t,e){const i={},o=c(t,["endpoint"]);o!=null&&d(i,["name"],o);const a=c(t,["deployedModelId"]);return a!=null&&d(i,["deployedModelId"],a),i}function Fw(t,e){const i={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["fileUri"]);o!=null&&d(i,["fileUri"],o);const a=c(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function $w(t,e){const i={},o=c(t,["id"]);o!=null&&d(i,["id"],o);const a=c(t,["args"]);a!=null&&d(i,["args"],a);const r=c(t,["name"]);if(r!=null&&d(i,["name"],r),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return i}function Jw(t,e){const i={},o=c(t,["allowedFunctionNames"]);o!=null&&d(i,["allowedFunctionNames"],o);const a=c(t,["mode"]);if(a!=null&&d(i,["mode"],a),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return i}function Yw(t,e){const i={},o=c(t,["description"]);o!=null&&d(i,["description"],o);const a=c(t,["name"]);a!=null&&d(i,["name"],a);const r=c(t,["parameters"]);r!=null&&d(i,["parameters"],r);const f=c(t,["parametersJsonSchema"]);f!=null&&d(i,["parametersJsonSchema"],f);const p=c(t,["response"]);p!=null&&d(i,["response"],p);const y=c(t,["responseJsonSchema"]);if(y!=null&&d(i,["responseJsonSchema"],y),c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return i}function Kw(t,e,i,o){const a={},r=c(e,["systemInstruction"]);i!==void 0&&r!=null&&d(i,["systemInstruction"],Or(Nt(r)));const f=c(e,["temperature"]);f!=null&&d(a,["temperature"],f);const p=c(e,["topP"]);p!=null&&d(a,["topP"],p);const y=c(e,["topK"]);y!=null&&d(a,["topK"],y);const m=c(e,["candidateCount"]);m!=null&&d(a,["candidateCount"],m);const v=c(e,["maxOutputTokens"]);v!=null&&d(a,["maxOutputTokens"],v);const _=c(e,["stopSequences"]);_!=null&&d(a,["stopSequences"],_);const T=c(e,["responseLogprobs"]);T!=null&&d(a,["responseLogprobs"],T);const A=c(e,["logprobs"]);A!=null&&d(a,["logprobs"],A);const x=c(e,["presencePenalty"]);x!=null&&d(a,["presencePenalty"],x);const b=c(e,["frequencyPenalty"]);b!=null&&d(a,["frequencyPenalty"],b);const w=c(e,["seed"]);w!=null&&d(a,["seed"],w);const q=c(e,["responseMimeType"]);q!=null&&d(a,["responseMimeType"],q);const G=c(e,["responseSchema"]);G!=null&&d(a,["responseSchema"],md(G));const H=c(e,["responseJsonSchema"]);if(H!=null&&d(a,["responseJsonSchema"],H),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=c(e,["safetySettings"]);if(i!==void 0&&k!=null){let Le=k;Array.isArray(Le)&&(Le=Le.map(Ye=>kR(Ye))),d(i,["safetySettings"],Le)}const L=c(e,["tools"]);if(i!==void 0&&L!=null){let Le=so(L);Array.isArray(Le)&&(Le=Le.map(Ye=>$R(io(Ye)))),d(i,["tools"],Le)}const Z=c(e,["toolConfig"]);if(i!==void 0&&Z!=null&&d(i,["toolConfig"],FR(Z)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=c(e,["cachedContent"]);i!==void 0&&$!=null&&d(i,["cachedContent"],ei(t,$));const K=c(e,["responseModalities"]);K!=null&&d(a,["responseModalities"],K);const X=c(e,["mediaResolution"]);X!=null&&d(a,["mediaResolution"],X);const se=c(e,["speechConfig"]);if(se!=null&&d(a,["speechConfig"],gd(se)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=c(e,["thinkingConfig"]);le!=null&&d(a,["thinkingConfig"],le);const Ee=c(e,["imageConfig"]);Ee!=null&&d(a,["imageConfig"],TR(Ee));const Oe=c(e,["enableEnhancedCivicAnswers"]);if(Oe!=null&&d(a,["enableEnhancedCivicAnswers"],Oe),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return a}function Xw(t,e,i,o){const a={},r=c(e,["systemInstruction"]);i!==void 0&&r!=null&&d(i,["systemInstruction"],Nt(r));const f=c(e,["temperature"]);f!=null&&d(a,["temperature"],f);const p=c(e,["topP"]);p!=null&&d(a,["topP"],p);const y=c(e,["topK"]);y!=null&&d(a,["topK"],y);const m=c(e,["candidateCount"]);m!=null&&d(a,["candidateCount"],m);const v=c(e,["maxOutputTokens"]);v!=null&&d(a,["maxOutputTokens"],v);const _=c(e,["stopSequences"]);_!=null&&d(a,["stopSequences"],_);const T=c(e,["responseLogprobs"]);T!=null&&d(a,["responseLogprobs"],T);const A=c(e,["logprobs"]);A!=null&&d(a,["logprobs"],A);const x=c(e,["presencePenalty"]);x!=null&&d(a,["presencePenalty"],x);const b=c(e,["frequencyPenalty"]);b!=null&&d(a,["frequencyPenalty"],b);const w=c(e,["seed"]);w!=null&&d(a,["seed"],w);const q=c(e,["responseMimeType"]);q!=null&&d(a,["responseMimeType"],q);const G=c(e,["responseSchema"]);G!=null&&d(a,["responseSchema"],md(G));const H=c(e,["responseJsonSchema"]);H!=null&&d(a,["responseJsonSchema"],H);const k=c(e,["routingConfig"]);k!=null&&d(a,["routingConfig"],k);const L=c(e,["modelSelectionConfig"]);L!=null&&d(a,["modelConfig"],L);const Z=c(e,["safetySettings"]);if(i!==void 0&&Z!=null){let ae=Z;Array.isArray(ae)&&(ae=ae.map(we=>we)),d(i,["safetySettings"],ae)}const $=c(e,["tools"]);if(i!==void 0&&$!=null){let ae=so($);Array.isArray(ae)&&(ae=ae.map(we=>z0(io(we)))),d(i,["tools"],ae)}const K=c(e,["toolConfig"]);i!==void 0&&K!=null&&d(i,["toolConfig"],K);const X=c(e,["labels"]);i!==void 0&&X!=null&&d(i,["labels"],X);const se=c(e,["cachedContent"]);i!==void 0&&se!=null&&d(i,["cachedContent"],ei(t,se));const le=c(e,["responseModalities"]);le!=null&&d(a,["responseModalities"],le);const Ee=c(e,["mediaResolution"]);Ee!=null&&d(a,["mediaResolution"],Ee);const Oe=c(e,["speechConfig"]);Oe!=null&&d(a,["speechConfig"],gd(Oe));const Le=c(e,["audioTimestamp"]);Le!=null&&d(a,["audioTimestamp"],Le);const Ye=c(e,["thinkingConfig"]);Ye!=null&&d(a,["thinkingConfig"],Ye);const V=c(e,["imageConfig"]);if(V!=null&&d(a,["imageConfig"],ER(V)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const W=c(e,["modelArmorConfig"]);return i!==void 0&&W!=null&&d(i,["modelArmorConfig"],W),a}function vv(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["contents"]);if(r!=null){let p=hn(r);Array.isArray(p)&&(p=p.map(y=>Or(y))),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&d(o,["generationConfig"],Kw(t,f,o)),o}function _v(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["contents"]);if(r!=null){let p=hn(r);Array.isArray(p)&&(p=p.map(y=>y)),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&d(o,["generationConfig"],Xw(t,f,o)),o}function Sv(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["candidates"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(v=>yw(v))),d(i,["candidates"],m)}const r=c(t,["modelVersion"]);r!=null&&d(i,["modelVersion"],r);const f=c(t,["promptFeedback"]);f!=null&&d(i,["promptFeedback"],f);const p=c(t,["responseId"]);p!=null&&d(i,["responseId"],p);const y=c(t,["usageMetadata"]);return y!=null&&d(i,["usageMetadata"],y),i}function Tv(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(_=>_)),d(i,["candidates"],v)}const r=c(t,["createTime"]);r!=null&&d(i,["createTime"],r);const f=c(t,["modelVersion"]);f!=null&&d(i,["modelVersion"],f);const p=c(t,["promptFeedback"]);p!=null&&d(i,["promptFeedback"],p);const y=c(t,["responseId"]);y!=null&&d(i,["responseId"],y);const m=c(t,["usageMetadata"]);return m!=null&&d(i,["usageMetadata"],m),i}function Qw(t,e,i){const o={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=c(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const r=c(t,["aspectRatio"]);e!==void 0&&r!=null&&d(e,["parameters","aspectRatio"],r);const f=c(t,["guidanceScale"]);if(e!==void 0&&f!=null&&d(e,["parameters","guidanceScale"],f),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=c(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const y=c(t,["personGeneration"]);e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y);const m=c(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);const v=c(t,["includeRaiReason"]);e!==void 0&&v!=null&&d(e,["parameters","includeRaiReason"],v);const _=c(t,["language"]);e!==void 0&&_!=null&&d(e,["parameters","language"],_);const T=c(t,["outputMimeType"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","mimeType"],T);const A=c(t,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&d(e,["parameters","outputOptions","compressionQuality"],A),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=c(t,["imageSize"]);if(e!==void 0&&x!=null&&d(e,["parameters","sampleImageSize"],x),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function Zw(t,e,i){const o={},a=c(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const f=c(t,["numberOfImages"]);e!==void 0&&f!=null&&d(e,["parameters","sampleCount"],f);const p=c(t,["aspectRatio"]);e!==void 0&&p!=null&&d(e,["parameters","aspectRatio"],p);const y=c(t,["guidanceScale"]);e!==void 0&&y!=null&&d(e,["parameters","guidanceScale"],y);const m=c(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const v=c(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&d(e,["parameters","safetySetting"],v);const _=c(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const T=c(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&d(e,["parameters","includeSafetyAttributes"],T);const A=c(t,["includeRaiReason"]);e!==void 0&&A!=null&&d(e,["parameters","includeRaiReason"],A);const x=c(t,["language"]);e!==void 0&&x!=null&&d(e,["parameters","language"],x);const b=c(t,["outputMimeType"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","mimeType"],b);const w=c(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&d(e,["parameters","outputOptions","compressionQuality"],w);const q=c(t,["addWatermark"]);e!==void 0&&q!=null&&d(e,["parameters","addWatermark"],q);const G=c(t,["labels"]);e!==void 0&&G!=null&&d(e,["labels"],G);const H=c(t,["imageSize"]);e!==void 0&&H!=null&&d(e,["parameters","sampleImageSize"],H);const k=c(t,["enhancePrompt"]);return e!==void 0&&k!=null&&d(e,["parameters","enhancePrompt"],k),o}function Ww(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const f=c(e,["config"]);return f!=null&&Qw(f,o),o}function jw(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const f=c(e,["config"]);return f!=null&&Zw(f,o),o}function eR(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["predictions"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>dR(p))),d(i,["generatedImages"],f)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&d(i,["positivePromptSafetyAttributes"],B0(r)),i}function tR(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["predictions"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>Gr(p))),d(i,["generatedImages"],f)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&d(i,["positivePromptSafetyAttributes"],V0(r)),i}function nR(t,e,i){const o={},a=c(t,["numberOfVideos"]);if(e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(t,["durationSeconds"]);if(e!==void 0&&r!=null&&d(e,["parameters","durationSeconds"],r),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=c(t,["aspectRatio"]);e!==void 0&&f!=null&&d(e,["parameters","aspectRatio"],f);const p=c(t,["resolution"]);e!==void 0&&p!=null&&d(e,["parameters","resolution"],p);const y=c(t,["personGeneration"]);if(e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=c(t,["negativePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","negativePrompt"],m);const v=c(t,["enhancePrompt"]);if(e!==void 0&&v!=null&&d(e,["parameters","enhancePrompt"],v),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=c(t,["lastFrame"]);e!==void 0&&_!=null&&d(e,["instances[0]","lastFrame"],Pr(_));const T=c(t,["referenceImages"]);if(e!==void 0&&T!=null){let A=T;Array.isArray(A)&&(A=A.map(x=>sN(x))),d(e,["instances[0]","referenceImages"],A)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function iR(t,e,i){const o={},a=c(t,["numberOfVideos"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const f=c(t,["fps"]);e!==void 0&&f!=null&&d(e,["parameters","fps"],f);const p=c(t,["durationSeconds"]);e!==void 0&&p!=null&&d(e,["parameters","durationSeconds"],p);const y=c(t,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const m=c(t,["aspectRatio"]);e!==void 0&&m!=null&&d(e,["parameters","aspectRatio"],m);const v=c(t,["resolution"]);e!==void 0&&v!=null&&d(e,["parameters","resolution"],v);const _=c(t,["personGeneration"]);e!==void 0&&_!=null&&d(e,["parameters","personGeneration"],_);const T=c(t,["pubsubTopic"]);e!==void 0&&T!=null&&d(e,["parameters","pubsubTopic"],T);const A=c(t,["negativePrompt"]);e!==void 0&&A!=null&&d(e,["parameters","negativePrompt"],A);const x=c(t,["enhancePrompt"]);e!==void 0&&x!=null&&d(e,["parameters","enhancePrompt"],x);const b=c(t,["generateAudio"]);e!==void 0&&b!=null&&d(e,["parameters","generateAudio"],b);const w=c(t,["lastFrame"]);e!==void 0&&w!=null&&d(e,["instances[0]","lastFrame"],En(w));const q=c(t,["referenceImages"]);if(e!==void 0&&q!=null){let k=q;Array.isArray(k)&&(k=k.map(L=>oN(L))),d(e,["instances[0]","referenceImages"],k)}const G=c(t,["mask"]);e!==void 0&&G!=null&&d(e,["instances[0]","mask"],iN(G));const H=c(t,["compressionQuality"]);return e!==void 0&&H!=null&&d(e,["parameters","compressionQuality"],H),o}function sR(t,e){const i={},o=c(t,["name"]);o!=null&&d(i,["name"],o);const a=c(t,["metadata"]);a!=null&&d(i,["metadata"],a);const r=c(t,["done"]);r!=null&&d(i,["done"],r);const f=c(t,["error"]);f!=null&&d(i,["error"],f);const p=c(t,["response","generateVideoResponse"]);return p!=null&&d(i,["response"],rR(p)),i}function oR(t,e){const i={},o=c(t,["name"]);o!=null&&d(i,["name"],o);const a=c(t,["metadata"]);a!=null&&d(i,["metadata"],a);const r=c(t,["done"]);r!=null&&d(i,["done"],r);const f=c(t,["error"]);f!=null&&d(i,["error"],f);const p=c(t,["response"]);return p!=null&&d(i,["response"],uR(p)),i}function lR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const f=c(e,["image"]);f!=null&&d(o,["instances[0]","image"],Pr(f));const p=c(e,["video"]);p!=null&&d(o,["instances[0]","video"],F0(p));const y=c(e,["source"]);y!=null&&cR(y,o);const m=c(e,["config"]);return m!=null&&nR(m,o),o}function aR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["prompt"]);r!=null&&d(o,["instances[0]","prompt"],r);const f=c(e,["image"]);f!=null&&d(o,["instances[0]","image"],En(f));const p=c(e,["video"]);p!=null&&d(o,["instances[0]","video"],$0(p));const y=c(e,["source"]);y!=null&&fR(y,o);const m=c(e,["config"]);return m!=null&&iR(m,o),o}function rR(t,e){const i={},o=c(t,["generatedSamples"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>pR(p))),d(i,["generatedVideos"],f)}const a=c(t,["raiMediaFilteredCount"]);a!=null&&d(i,["raiMediaFilteredCount"],a);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&d(i,["raiMediaFilteredReasons"],r),i}function uR(t,e){const i={},o=c(t,["videos"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>mR(p))),d(i,["generatedVideos"],f)}const a=c(t,["raiMediaFilteredCount"]);a!=null&&d(i,["raiMediaFilteredCount"],a);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&d(i,["raiMediaFilteredReasons"],r),i}function cR(t,e,i){const o={},a=c(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const r=c(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],Pr(r));const f=c(t,["video"]);return e!==void 0&&f!=null&&d(e,["instances[0]","video"],F0(f)),o}function fR(t,e,i){const o={},a=c(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const r=c(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],En(r));const f=c(t,["video"]);return e!==void 0&&f!=null&&d(e,["instances[0]","video"],$0(f)),o}function dR(t,e){const i={},o=c(t,["_self"]);o!=null&&d(i,["image"],AR(o));const a=c(t,["raiFilteredReason"]);a!=null&&d(i,["raiFilteredReason"],a);const r=c(t,["_self"]);return r!=null&&d(i,["safetyAttributes"],B0(r)),i}function Gr(t,e){const i={},o=c(t,["_self"]);o!=null&&d(i,["image"],q0(o));const a=c(t,["raiFilteredReason"]);a!=null&&d(i,["raiFilteredReason"],a);const r=c(t,["_self"]);r!=null&&d(i,["safetyAttributes"],V0(r));const f=c(t,["prompt"]);return f!=null&&d(i,["enhancedPrompt"],f),i}function hR(t,e){const i={},o=c(t,["_self"]);o!=null&&d(i,["mask"],q0(o));const a=c(t,["labels"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(i,["labels"],r)}return i}function pR(t,e){const i={},o=c(t,["video"]);return o!=null&&d(i,["video"],tN(o)),i}function mR(t,e){const i={},o=c(t,["_self"]);return o!=null&&d(i,["video"],nN(o)),i}function gR(t,e){const i={},o=c(t,["modelSelectionConfig"]);o!=null&&d(i,["modelConfig"],o);const a=c(t,["responseJsonSchema"]);a!=null&&d(i,["responseJsonSchema"],a);const r=c(t,["audioTimestamp"]);r!=null&&d(i,["audioTimestamp"],r);const f=c(t,["candidateCount"]);f!=null&&d(i,["candidateCount"],f);const p=c(t,["enableAffectiveDialog"]);p!=null&&d(i,["enableAffectiveDialog"],p);const y=c(t,["frequencyPenalty"]);y!=null&&d(i,["frequencyPenalty"],y);const m=c(t,["logprobs"]);m!=null&&d(i,["logprobs"],m);const v=c(t,["maxOutputTokens"]);v!=null&&d(i,["maxOutputTokens"],v);const _=c(t,["mediaResolution"]);_!=null&&d(i,["mediaResolution"],_);const T=c(t,["presencePenalty"]);T!=null&&d(i,["presencePenalty"],T);const A=c(t,["responseLogprobs"]);A!=null&&d(i,["responseLogprobs"],A);const x=c(t,["responseMimeType"]);x!=null&&d(i,["responseMimeType"],x);const b=c(t,["responseModalities"]);b!=null&&d(i,["responseModalities"],b);const w=c(t,["responseSchema"]);w!=null&&d(i,["responseSchema"],w);const q=c(t,["routingConfig"]);q!=null&&d(i,["routingConfig"],q);const G=c(t,["seed"]);G!=null&&d(i,["seed"],G);const H=c(t,["speechConfig"]);H!=null&&d(i,["speechConfig"],H);const k=c(t,["stopSequences"]);k!=null&&d(i,["stopSequences"],k);const L=c(t,["temperature"]);L!=null&&d(i,["temperature"],L);const Z=c(t,["thinkingConfig"]);Z!=null&&d(i,["thinkingConfig"],Z);const $=c(t,["topK"]);$!=null&&d(i,["topK"],$);const K=c(t,["topP"]);if(K!=null&&d(i,["topP"],K),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function yR(t,e,i){const o={},a=c(e,["model"]);return a!=null&&d(o,["_url","name"],De(t,a)),o}function vR(t,e,i){const o={},a=c(e,["model"]);return a!=null&&d(o,["_url","name"],De(t,a)),o}function _R(t,e){const i={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(t,["enableWidget"]);return o!=null&&d(i,["enableWidget"],o),i}function SR(t,e){const i={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(t,["timeRangeFilter"]);return o!=null&&d(i,["timeRangeFilter"],o),i}function TR(t,e){const i={},o=c(t,["aspectRatio"]);o!=null&&d(i,["aspectRatio"],o);const a=c(t,["imageSize"]);if(a!=null&&d(i,["imageSize"],a),c(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return i}function ER(t,e){const i={},o=c(t,["aspectRatio"]);o!=null&&d(i,["aspectRatio"],o);const a=c(t,["imageSize"]);a!=null&&d(i,["imageSize"],a);const r=c(t,["personGeneration"]);r!=null&&d(i,["personGeneration"],r);const f=c(t,["outputMimeType"]);f!=null&&d(i,["imageOutputOptions","mimeType"],f);const p=c(t,["outputCompressionQuality"]);return p!=null&&d(i,["imageOutputOptions","compressionQuality"],p),i}function AR(t,e){const i={},o=c(t,["bytesBase64Encoded"]);o!=null&&d(i,["imageBytes"],Ii(o));const a=c(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function q0(t,e){const i={},o=c(t,["gcsUri"]);o!=null&&d(i,["gcsUri"],o);const a=c(t,["bytesBase64Encoded"]);a!=null&&d(i,["imageBytes"],Ii(a));const r=c(t,["mimeType"]);return r!=null&&d(i,["mimeType"],r),i}function Pr(t,e){const i={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(t,["imageBytes"]);o!=null&&d(i,["bytesBase64Encoded"],Ii(o));const a=c(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function En(t,e){const i={},o=c(t,["gcsUri"]);o!=null&&d(i,["gcsUri"],o);const a=c(t,["imageBytes"]);a!=null&&d(i,["bytesBase64Encoded"],Ii(a));const r=c(t,["mimeType"]);return r!=null&&d(i,["mimeType"],r),i}function CR(t,e,i,o){const a={},r=c(e,["pageSize"]);i!==void 0&&r!=null&&d(i,["_query","pageSize"],r);const f=c(e,["pageToken"]);i!==void 0&&f!=null&&d(i,["_query","pageToken"],f);const p=c(e,["filter"]);i!==void 0&&p!=null&&d(i,["_query","filter"],p);const y=c(e,["queryBase"]);return i!==void 0&&y!=null&&d(i,["_url","models_url"],U0(t,y)),a}function xR(t,e,i,o){const a={},r=c(e,["pageSize"]);i!==void 0&&r!=null&&d(i,["_query","pageSize"],r);const f=c(e,["pageToken"]);i!==void 0&&f!=null&&d(i,["_query","pageToken"],f);const p=c(e,["filter"]);i!==void 0&&p!=null&&d(i,["_query","filter"],p);const y=c(e,["queryBase"]);return i!==void 0&&y!=null&&d(i,["_url","models_url"],U0(t,y)),a}function bR(t,e,i){const o={},a=c(e,["config"]);return a!=null&&CR(t,a,o),o}function wR(t,e,i){const o={},a=c(e,["config"]);return a!=null&&xR(t,a,o),o}function RR(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const r=c(t,["_self"]);if(r!=null){let f=L0(r);Array.isArray(f)&&(f=f.map(p=>qf(p))),d(i,["models"],f)}return i}function NR(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const r=c(t,["_self"]);if(r!=null){let f=L0(r);Array.isArray(f)&&(f=f.map(p=>Bf(p))),d(i,["models"],f)}return i}function MR(t,e){const i={},o=c(t,["maskMode"]);o!=null&&d(i,["maskMode"],o);const a=c(t,["segmentationClasses"]);a!=null&&d(i,["maskClasses"],a);const r=c(t,["maskDilation"]);return r!=null&&d(i,["dilation"],r),i}function qf(t,e){const i={},o=c(t,["name"]);o!=null&&d(i,["name"],o);const a=c(t,["displayName"]);a!=null&&d(i,["displayName"],a);const r=c(t,["description"]);r!=null&&d(i,["description"],r);const f=c(t,["version"]);f!=null&&d(i,["version"],f);const p=c(t,["_self"]);p!=null&&d(i,["tunedModelInfo"],JR(p));const y=c(t,["inputTokenLimit"]);y!=null&&d(i,["inputTokenLimit"],y);const m=c(t,["outputTokenLimit"]);m!=null&&d(i,["outputTokenLimit"],m);const v=c(t,["supportedGenerationMethods"]);v!=null&&d(i,["supportedActions"],v);const _=c(t,["temperature"]);_!=null&&d(i,["temperature"],_);const T=c(t,["maxTemperature"]);T!=null&&d(i,["maxTemperature"],T);const A=c(t,["topP"]);A!=null&&d(i,["topP"],A);const x=c(t,["topK"]);x!=null&&d(i,["topK"],x);const b=c(t,["thinking"]);return b!=null&&d(i,["thinking"],b),i}function Bf(t,e){const i={},o=c(t,["name"]);o!=null&&d(i,["name"],o);const a=c(t,["displayName"]);a!=null&&d(i,["displayName"],a);const r=c(t,["description"]);r!=null&&d(i,["description"],r);const f=c(t,["versionId"]);f!=null&&d(i,["version"],f);const p=c(t,["deployedModels"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(A=>zw(A))),d(i,["endpoints"],T)}const y=c(t,["labels"]);y!=null&&d(i,["labels"],y);const m=c(t,["_self"]);m!=null&&d(i,["tunedModelInfo"],YR(m));const v=c(t,["defaultCheckpointId"]);v!=null&&d(i,["defaultCheckpointId"],v);const _=c(t,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>A)),d(i,["checkpoints"],T)}return i}function IR(t,e){const i={},o=c(t,["mediaResolution"]);o!=null&&d(i,["mediaResolution"],o);const a=c(t,["codeExecutionResult"]);a!=null&&d(i,["codeExecutionResult"],a);const r=c(t,["executableCode"]);r!=null&&d(i,["executableCode"],r);const f=c(t,["fileData"]);f!=null&&d(i,["fileData"],Fw(f));const p=c(t,["functionCall"]);p!=null&&d(i,["functionCall"],$w(p));const y=c(t,["functionResponse"]);y!=null&&d(i,["functionResponse"],y);const m=c(t,["inlineData"]);m!=null&&d(i,["inlineData"],gw(m));const v=c(t,["text"]);v!=null&&d(i,["text"],v);const _=c(t,["thought"]);_!=null&&d(i,["thought"],_);const T=c(t,["thoughtSignature"]);T!=null&&d(i,["thoughtSignature"],T);const A=c(t,["videoMetadata"]);return A!=null&&d(i,["videoMetadata"],A),i}function DR(t,e){const i={},o=c(t,["productImage"]);return o!=null&&d(i,["image"],En(o)),i}function UR(t,e,i){const o={},a=c(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const r=c(t,["baseSteps"]);e!==void 0&&r!=null&&d(e,["parameters","baseSteps"],r);const f=c(t,["outputGcsUri"]);e!==void 0&&f!=null&&d(e,["parameters","storageUri"],f);const p=c(t,["seed"]);e!==void 0&&p!=null&&d(e,["parameters","seed"],p);const y=c(t,["safetyFilterLevel"]);e!==void 0&&y!=null&&d(e,["parameters","safetySetting"],y);const m=c(t,["personGeneration"]);e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m);const v=c(t,["addWatermark"]);e!==void 0&&v!=null&&d(e,["parameters","addWatermark"],v);const _=c(t,["outputMimeType"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","mimeType"],_);const T=c(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","compressionQuality"],T);const A=c(t,["enhancePrompt"]);e!==void 0&&A!=null&&d(e,["parameters","enhancePrompt"],A);const x=c(t,["labels"]);return e!==void 0&&x!=null&&d(e,["labels"],x),o}function LR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["source"]);r!=null&&GR(r,o);const f=c(e,["config"]);return f!=null&&UR(f,o),o}function OR(t,e){const i={},o=c(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>Gr(r))),d(i,["generatedImages"],a)}return i}function GR(t,e,i){const o={},a=c(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const r=c(t,["personImage"]);e!==void 0&&r!=null&&d(e,["instances[0]","personImage","image"],En(r));const f=c(t,["productImages"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(y=>DR(y))),d(e,["instances[0]","productImages"],p)}return o}function PR(t,e){const i={},o=c(t,["referenceImage"]);o!=null&&d(i,["referenceImage"],En(o));const a=c(t,["referenceId"]);a!=null&&d(i,["referenceId"],a);const r=c(t,["referenceType"]);r!=null&&d(i,["referenceType"],r);const f=c(t,["maskImageConfig"]);f!=null&&d(i,["maskImageConfig"],MR(f));const p=c(t,["controlImageConfig"]);p!=null&&d(i,["controlImageConfig"],Aw(p));const y=c(t,["styleImageConfig"]);y!=null&&d(i,["styleImageConfig"],y);const m=c(t,["subjectImageConfig"]);return m!=null&&d(i,["subjectImageConfig"],m),i}function B0(t,e){const i={},o=c(t,["safetyAttributes","categories"]);o!=null&&d(i,["categories"],o);const a=c(t,["safetyAttributes","scores"]);a!=null&&d(i,["scores"],a);const r=c(t,["contentType"]);return r!=null&&d(i,["contentType"],r),i}function V0(t,e){const i={},o=c(t,["safetyAttributes","categories"]);o!=null&&d(i,["categories"],o);const a=c(t,["safetyAttributes","scores"]);a!=null&&d(i,["scores"],a);const r=c(t,["contentType"]);return r!=null&&d(i,["contentType"],r),i}function kR(t,e){const i={},o=c(t,["category"]);if(o!=null&&d(i,["category"],o),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=c(t,["threshold"]);return a!=null&&d(i,["threshold"],a),i}function HR(t,e){const i={},o=c(t,["image"]);return o!=null&&d(i,["image"],En(o)),i}function qR(t,e,i){const o={},a=c(t,["mode"]);e!==void 0&&a!=null&&d(e,["parameters","mode"],a);const r=c(t,["maxPredictions"]);e!==void 0&&r!=null&&d(e,["parameters","maxPredictions"],r);const f=c(t,["confidenceThreshold"]);e!==void 0&&f!=null&&d(e,["parameters","confidenceThreshold"],f);const p=c(t,["maskDilation"]);e!==void 0&&p!=null&&d(e,["parameters","maskDilation"],p);const y=c(t,["binaryColorThreshold"]);e!==void 0&&y!=null&&d(e,["parameters","binaryColorThreshold"],y);const m=c(t,["labels"]);return e!==void 0&&m!=null&&d(e,["labels"],m),o}function BR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["source"]);r!=null&&zR(r,o);const f=c(e,["config"]);return f!=null&&qR(f,o),o}function VR(t,e){const i={},o=c(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>hR(r))),d(i,["generatedMasks"],a)}return i}function zR(t,e,i){const o={},a=c(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const r=c(t,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],En(r));const f=c(t,["scribbleImage"]);return e!==void 0&&f!=null&&d(e,["instances[0]","scribble"],HR(f)),o}function FR(t,e){const i={},o=c(t,["retrievalConfig"]);o!=null&&d(i,["retrievalConfig"],o);const a=c(t,["functionCallingConfig"]);return a!=null&&d(i,["functionCallingConfig"],Jw(a)),i}function $R(t,e){const i={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(t,["computerUse"]);o!=null&&d(i,["computerUse"],o);const a=c(t,["fileSearch"]);a!=null&&d(i,["fileSearch"],a);const r=c(t,["codeExecution"]);if(r!=null&&d(i,["codeExecution"],r),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=c(t,["functionDeclarations"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(T=>T)),d(i,["functionDeclarations"],_)}const p=c(t,["googleMaps"]);p!=null&&d(i,["googleMaps"],_R(p));const y=c(t,["googleSearch"]);y!=null&&d(i,["googleSearch"],SR(y));const m=c(t,["googleSearchRetrieval"]);m!=null&&d(i,["googleSearchRetrieval"],m);const v=c(t,["urlContext"]);return v!=null&&d(i,["urlContext"],v),i}function z0(t,e){const i={},o=c(t,["retrieval"]);o!=null&&d(i,["retrieval"],o);const a=c(t,["computerUse"]);if(a!=null&&d(i,["computerUse"],a),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(t,["codeExecution"]);r!=null&&d(i,["codeExecution"],r);const f=c(t,["enterpriseWebSearch"]);f!=null&&d(i,["enterpriseWebSearch"],f);const p=c(t,["functionDeclarations"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(A=>Yw(A))),d(i,["functionDeclarations"],T)}const y=c(t,["googleMaps"]);y!=null&&d(i,["googleMaps"],y);const m=c(t,["googleSearch"]);m!=null&&d(i,["googleSearch"],m);const v=c(t,["googleSearchRetrieval"]);v!=null&&d(i,["googleSearchRetrieval"],v);const _=c(t,["urlContext"]);return _!=null&&d(i,["urlContext"],_),i}function JR(t,e){const i={},o=c(t,["baseModel"]);o!=null&&d(i,["baseModel"],o);const a=c(t,["createTime"]);a!=null&&d(i,["createTime"],a);const r=c(t,["updateTime"]);return r!=null&&d(i,["updateTime"],r),i}function YR(t,e){const i={},o=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&d(i,["baseModel"],o);const a=c(t,["createTime"]);a!=null&&d(i,["createTime"],a);const r=c(t,["updateTime"]);return r!=null&&d(i,["updateTime"],r),i}function KR(t,e,i){const o={},a=c(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const r=c(t,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const f=c(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&d(e,["defaultCheckpointId"],f),o}function XR(t,e,i){const o={},a=c(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const r=c(t,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const f=c(t,["defaultCheckpointId"]);return e!==void 0&&f!=null&&d(e,["defaultCheckpointId"],f),o}function QR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","name"],De(t,a));const r=c(e,["config"]);return r!=null&&KR(r,o),o}function ZR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["config"]);return r!=null&&XR(r,o),o}function WR(t,e,i){const o={},a=c(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const r=c(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&d(e,["parameters","safetySetting"],r);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const p=c(t,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const y=c(t,["outputMimeType"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","mimeType"],y);const m=c(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&d(e,["parameters","outputOptions","compressionQuality"],m);const v=c(t,["enhanceInputImage"]);e!==void 0&&v!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],v);const _=c(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=c(t,["labels"]);e!==void 0&&T!=null&&d(e,["labels"],T);const A=c(t,["numberOfImages"]);e!==void 0&&A!=null&&d(e,["parameters","sampleCount"],A);const x=c(t,["mode"]);return e!==void 0&&x!=null&&d(e,["parameters","mode"],x),o}function jR(t,e,i){const o={},a=c(e,["model"]);a!=null&&d(o,["_url","model"],De(t,a));const r=c(e,["image"]);r!=null&&d(o,["instances[0]","image"],En(r));const f=c(e,["upscaleFactor"]);f!=null&&d(o,["parameters","upscaleConfig","upscaleFactor"],f);const p=c(e,["config"]);return p!=null&&WR(p,o),o}function eN(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["predictions"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>Gr(f))),d(i,["generatedImages"],r)}return i}function tN(t,e){const i={},o=c(t,["uri"]);o!=null&&d(i,["uri"],o);const a=c(t,["encodedVideo"]);a!=null&&d(i,["videoBytes"],Ii(a));const r=c(t,["encoding"]);return r!=null&&d(i,["mimeType"],r),i}function nN(t,e){const i={},o=c(t,["gcsUri"]);o!=null&&d(i,["uri"],o);const a=c(t,["bytesBase64Encoded"]);a!=null&&d(i,["videoBytes"],Ii(a));const r=c(t,["mimeType"]);return r!=null&&d(i,["mimeType"],r),i}function iN(t,e){const i={},o=c(t,["image"]);o!=null&&d(i,["_self"],En(o));const a=c(t,["maskMode"]);return a!=null&&d(i,["maskMode"],a),i}function sN(t,e){const i={},o=c(t,["image"]);o!=null&&d(i,["image"],Pr(o));const a=c(t,["referenceType"]);return a!=null&&d(i,["referenceType"],a),i}function oN(t,e){const i={},o=c(t,["image"]);o!=null&&d(i,["image"],En(o));const a=c(t,["referenceType"]);return a!=null&&d(i,["referenceType"],a),i}function F0(t,e){const i={},o=c(t,["uri"]);o!=null&&d(i,["uri"],o);const a=c(t,["videoBytes"]);a!=null&&d(i,["encodedVideo"],Ii(a));const r=c(t,["mimeType"]);return r!=null&&d(i,["encoding"],r),i}function $0(t,e){const i={},o=c(t,["uri"]);o!=null&&d(i,["gcsUri"],o);const a=c(t,["videoBytes"]);a!=null&&d(i,["bytesBase64Encoded"],Ii(a));const r=c(t,["mimeType"]);return r!=null&&d(i,["mimeType"],r),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lN(t,e){const i={},o=c(t,["displayName"]);return e!==void 0&&o!=null&&d(e,["displayName"],o),i}function aN(t){const e={},i=c(t,["config"]);return i!=null&&lN(i,e),e}function rN(t,e){const i={},o=c(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),i}function uN(t){const e={},i=c(t,["name"]);i!=null&&d(e,["_url","name"],i);const o=c(t,["config"]);return o!=null&&rN(o,e),e}function cN(t){const e={},i=c(t,["name"]);return i!=null&&d(e,["_url","name"],i),e}function fN(t,e){const i={},o=c(t,["customMetadata"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["customMetadata"],r)}const a=c(t,["chunkingConfig"]);return e!==void 0&&a!=null&&d(e,["chunkingConfig"],a),i}function dN(t){const e={},i=c(t,["name"]);i!=null&&d(e,["name"],i);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const a=c(t,["done"]);a!=null&&d(e,["done"],a);const r=c(t,["error"]);r!=null&&d(e,["error"],r);const f=c(t,["response"]);return f!=null&&d(e,["response"],pN(f)),e}function hN(t){const e={},i=c(t,["fileSearchStoreName"]);i!=null&&d(e,["_url","file_search_store_name"],i);const o=c(t,["fileName"]);o!=null&&d(e,["fileName"],o);const a=c(t,["config"]);return a!=null&&fN(a,e),e}function pN(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["parent"]);o!=null&&d(e,["parent"],o);const a=c(t,["documentName"]);return a!=null&&d(e,["documentName"],a),e}function mN(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function gN(t){const e={},i=c(t,["config"]);return i!=null&&mN(i,e),e}function yN(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["fileSearchStores"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["fileSearchStores"],r)}return e}function J0(t,e){const i={},o=c(t,["mimeType"]);e!==void 0&&o!=null&&d(e,["mimeType"],o);const a=c(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const r=c(t,["customMetadata"]);if(e!==void 0&&r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>y)),d(e,["customMetadata"],p)}const f=c(t,["chunkingConfig"]);return e!==void 0&&f!=null&&d(e,["chunkingConfig"],f),i}function vN(t){const e={},i=c(t,["fileSearchStoreName"]);i!=null&&d(e,["_url","file_search_store_name"],i);const o=c(t,["config"]);return o!=null&&J0(o,e),e}function _N(t){const e={},i=c(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SN="Content-Type",TN="X-Server-Timeout",EN="User-Agent",Vf="x-goog-api-client",AN="1.40.0",CN=`google-genai-sdk/${AN}`,xN="v1beta1",bN="v1beta";class wN{constructor(e){var i,o,a;this.clientOptions=Object.assign({},e),this.customBaseUrl=(i=e.httpOptions)===null||i===void 0?void 0:i.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const r={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const p=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!p?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:xN}else{if(!this.clientOptions.apiKey)throw new wl({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:bN,r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,o){const a=[this.getRequestUrlInternal(i)];return o&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e,i){return!(i.baseUrl&&i.baseUrlResourceScope===Gf.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,i),a=this.constructUrl(e.path,i,o);if(e.queryParams)for(const[f,p]of Object.entries(e.queryParams))a.searchParams.append(f,String(p));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,i,a.toString(),e.abortSignal),this.unaryApiCall(a,r,e.httpMethod)}patchHttpOptions(e,i){const o=JSON.parse(JSON.stringify(e));for(const[a,r]of Object.entries(i))typeof r=="object"?o[a]=Object.assign(Object.assign({},o[a]),r):r!==void 0&&(o[a]=r);return o}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,i),a=this.constructUrl(e.path,i,o);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,i,a.toString(),e.abortSignal),this.streamApiCall(a,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,o,a){if(i&&i.timeout||a){const r=new AbortController,f=r.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const p=setTimeout(()=>r.abort(),i.timeout);p&&typeof p.unref=="function"&&p.unref()}a&&a.addEventListener("abort",()=>{r.abort()}),e.signal=f}return i&&i.extraBody!==null&&RN(e,i.extraBody),e.headers=await this.getHeadersInternal(i,o),e}async unaryApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async a=>(await Ev(a),new Pf(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:o})).then(async a=>(await Ev(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return Sn(this,arguments,function*(){var o;const a=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),r=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let f="";const p="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield ge(a.read());if(m){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=r.decode(v,{stream:!0});try{const x=JSON.parse(_);if("error"in x){const b=JSON.parse(JSON.stringify(x.error)),w=b.status,q=b.code,G=`got status: ${w}. ${JSON.stringify(x)}`;if(q>=400&&q<600)throw new wl({message:G,status:q})}}catch(x){if(x.name==="ApiError")throw x}f+=_;let T=-1,A=0;for(;;){T=-1,A=0;for(const w of y){const q=f.indexOf(w);q!==-1&&(T===-1||q<T)&&(T=q,A=w.length)}if(T===-1)break;const x=f.substring(0,T);f=f.substring(T+A);const b=x.trim();if(b.startsWith(p)){const w=b.substring(p.length).trim();try{const q=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ge(new Pf(q))}catch(q){throw new Error(`exception parsing stream chunk ${w}. ${q}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},i=CN+" "+this.clientOptions.userAgentExtra;return e[EN]=i,e[Vf]=i,e[SN]="application/json",e}async getHeadersInternal(e,i){const o=new Headers;if(e&&e.headers){for(const[a,r]of Object.entries(e.headers))o.append(a,r);e.timeout&&e.timeout>0&&o.append(TN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,i),o}getFileName(e){var i;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(i=o.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),o}async uploadFile(e,i){var o;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const r=this.clientOptions.uploader,f=await r.stat(e);a.sizeBytes=String(f.size);const p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:f.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=p;const y={file:a},m=this.getFileName(e),v=te("upload/v1beta/files",y._url),_=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,m,y,i==null?void 0:i.httpOptions);return r.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,o){var a;const r=this.clientOptions.uploader,f=await r.stat(i),p=String(f.size),y=(a=o==null?void 0:o.mimeType)!==null&&a!==void 0?a:f.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};o!=null&&J0(o,_);const T=await this.fetchUploadUrl(m,p,y,v,_,o==null?void 0:o.httpOptions);return r.uploadToFileSearchStore(i,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,o,a,r,f){var p;let y={};f?y=f:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${o}`},a?{"X-Goog-Upload-File-Name":a}:{})};const m=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:y});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(p=m==null?void 0:m.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Ev(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(o);throw i>=400&&i<600?new wl({message:a,status:i}):new Error(a)}}function RN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))i=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(r,f){const p=Object.assign({},r);for(const y in f)if(Object.prototype.hasOwnProperty.call(f,y)){const m=f[y],v=p[y];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?p[y]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),p[y]=m)}return p}const a=o(i,e);t.body=JSON.stringify(a)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NN="mcp_used/unknown";let MN=!1;function Y0(t){for(const e of t)if(IN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return MN}function K0(t){var e;const i=(e=t[Vf])!==null&&e!==void 0?e:"";t[Vf]=(i+` ${NN}`).trimStart()}function IN(t){return t!==null&&typeof t=="object"&&t instanceof vd}function DN(t){return Sn(this,arguments,function*(i,o=100){let a,r=0;for(;r<o;){const f=yield ge(i.listTools({cursor:a}));for(const p of f.tools)yield yield ge(p),r++;if(!f.nextCursor)break;a=f.nextCursor}})}class vd{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new vd(e,i)}async initialize(){var e,i,o,a;if(this.mcpTools.length>0)return;const r={},f=[];for(const v of this.mcpClients)try{for(var p=!0,y=(i=void 0,Tn(DN(v))),m;m=await y.next(),e=m.done,!e;p=!0){a=m.value,p=!1;const _=a;f.push(_);const T=_.name;if(r[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);r[T]=v}}catch(_){i={error:_}}finally{try{!p&&!e&&(o=y.return)&&await o.call(y)}finally{if(i)throw i.error}}this.mcpTools=f,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),ax(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[o.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const f=await a.callTool({name:o.name,arguments:o.args},void 0,r);i.push({functionResponse:{name:o.name,response:f.isError?{error:f}:f}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function UN(t,e,i){const o=new jC;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data),Object.assign(o,a),e(o)}class LN{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o}async connect(e){var i,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),f=PN(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),y=`${a}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${p}`;let m=()=>{};const v=new Promise(H=>{m=H}),_=e.callbacks,T=function(){m({})},A=this.apiClient,x={onopen:T,onmessage:H=>{UN(A,_.onmessage,H)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(H){},onclose:(o=_==null?void 0:_.onclose)!==null&&o!==void 0?o:function(H){}},b=this.webSocketFactory.create(y,GN(f),x);b.connect(),await v;const G={setup:{model:De(this.apiClient,e.model)}};return b.send(JSON.stringify(G)),new ON(b,this.apiClient)}}class ON{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=lw(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=ow(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(js.PLAY)}pause(){this.sendPlaybackControl(js.PAUSE)}stop(){this.sendPlaybackControl(js.STOP)}resetContext(){this.sendPlaybackControl(js.RESET_CONTEXT)}close(){this.conn.close()}}function GN(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function PN(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function HN(t,e,i){const o=new WC;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const r=JSON.parse(a);if(t.isVertexAI()){const f=uw(r);Object.assign(o,f)}else Object.assign(o,r);e(o)}class qN{constructor(e,i,o){this.apiClient=e,this.auth=i,this.webSocketFactory=o,this.music=new LN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,o,a,r,f,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&Y0(e.config.tools)&&K0(_);const T=FN(_);if(this.apiClient.isVertexAI()){const X=this.apiClient.getProject(),se=this.apiClient.getLocation(),le=this.apiClient.getApiKey(),Ee=!!X&&!!se||!!le;this.apiClient.getCustomBaseUrl()&&!Ee?v=y:(v=`${y}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v))}else{const X=this.apiClient.getApiKey();let se="BidiGenerateContent",le="key";X!=null&&X.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),se="BidiGenerateContentConstrained",le="access_token"),v=`${y}/ws/google.ai.generativelanguage.${m}.GenerativeService.${se}?${le}=${X}`}let A=()=>{};const x=new Promise(X=>{A=X}),b=e.callbacks,w=function(){var X;(X=b==null?void 0:b.onopen)===null||X===void 0||X.call(b),A({})},q=this.apiClient,G={onopen:w,onmessage:X=>{HN(q,b.onmessage,X)},onerror:(i=b==null?void 0:b.onerror)!==null&&i!==void 0?i:function(X){},onclose:(o=b==null?void 0:b.onclose)!==null&&o!==void 0?o:function(X){}},H=this.webSocketFactory.create(v,zN(T),G);H.connect(),await x;let k=De(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&k.startsWith("publishers/")){const X=this.apiClient.getProject(),se=this.apiClient.getLocation();X&&se&&(k=`projects/${X}/locations/${se}/`+k)}let L={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Sr.AUDIO]}:e.config.responseModalities=[Sr.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Z=(p=(f=e.config)===null||f===void 0?void 0:f.tools)!==null&&p!==void 0?p:[],$=[];for(const X of Z)if(this.isCallableTool(X)){const se=X;$.push(await se.tool())}else $.push(X);$.length>0&&(e.config.tools=$);const K={model:k,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=sw(this.apiClient,K):L=iw(this.apiClient,K),delete L.config,H.send(JSON.stringify(L)),new VN(H,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const BN={turnComplete:!0};class VN{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let o=[];try{o=hn(i.turns),e.isVertexAI()||(o=o.map(a=>Or(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:o,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let o=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?o=i.functionResponses:o=[i.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const r of o){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(kN)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},BN),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:rw(e)}:i={realtimeInput:aw(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function zN(t){const e={};return t.forEach((i,o)=>{e[o]=i}),e}function FN(t){const e=new Headers;for(const[i,o]of Object.entries(t))e.append(i,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Av=10;function Cv(t){var e,i,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const f of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(no(f)){a=!0;break}if(!a)return!0;const r=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function no(t){return"callTool"in t&&typeof t.callTool=="function"}function $N(t){var e,i,o;return(o=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>no(a)))!==null&&o!==void 0?o:!1}function xv(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,a)=>{if(no(o))return;const r=o;r.functionDeclarations&&r.functionDeclarations.length>0&&i.push(a)}),i}function bv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let JN=class extends jn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var o,a,r,f,p;const y=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!$N(i)||Cv(i.config))return await this.generateContentInternal(y);const m=xv(i);if(m.length>0){const b=m.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let v,_;const T=hn(y.contents),A=(r=(a=(o=y.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:Av;let x=0;for(;x<A&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const b=v.candidates[0].content,w=[];for(const q of(p=(f=i.config)===null||f===void 0?void 0:f.tools)!==null&&p!==void 0?p:[])if(no(q)){const H=await q.callTool(v.functionCalls);w.push(...H)}x++,_={role:"user",parts:w},y.contents=hn(y.contents),y.contents.push(b),y.contents.push(_),bv(y.config)&&(T.push(b),T.push(_))}return bv(y.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async i=>{var o,a,r,f,p;if(this.maybeMoveToResponseJsonSchem(i),Cv(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const y=xv(i);if(y.length>0){const _=y.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(r=(a=(o=i==null?void 0:i.config)===null||o===void 0?void 0:o.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,v=(p=(f=i==null?void 0:i.config)===null||f===void 0?void 0:f.automaticFunctionCalling)===null||p===void 0?void 0:p.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(o=>{var a;let r;const f=[];if(o!=null&&o.generatedImages)for(const y of o.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((a=y==null?void 0:y.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?r=y==null?void 0:y.safetyAttributes:f.push(y);let p;return r?p={generatedImages:f,positivePromptSafetyAttributes:r,sdkHttpResponse:o.sdkHttpResponse}:p={generatedImages:f,sdkHttpResponse:o.sdkHttpResponse},p}),this.list=async i=>{var o;const f={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((o=f.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new os(Wn.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(f),f)},this.editImage=async i=>{const o={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(o.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async i=>{let o={numberOfImages:1,mode:"upscale"};i.config&&(o=Object.assign(Object.assign({},o),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:o};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>{var o,a,r,f,p,y;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=i.video)===null||o===void 0)&&o.uri&&(!((a=i.video)===null||a===void 0)&&a.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((f=(r=i.source)===null||r===void 0?void 0:r.video)===null||f===void 0)&&f.uri&&(!((y=(p=i.source)===null||p===void 0?void 0:p.video)===null||y===void 0)&&y.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,o,a;const r=(i=e.config)===null||i===void 0?void 0:i.tools;if(!r)return e;const f=await Promise.all(r.map(async y=>no(y)?await y.tool():y)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:f})};if(p.config.tools=f,e.config&&e.config.tools&&Y0(e.config.tools)){const y=(a=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{};let m=Object.assign({},y);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),K0(m),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return p}async initAfcToolsMap(e){var i,o,a;const r=new Map;for(const f of(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(no(f)){const p=f,y=await p.tool();for(const m of(a=y.functionDeclarations)!==null&&a!==void 0?a:[]){if(!m.name)throw new Error("Function declaration name is required.");if(r.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);r.set(m.name,p)}}return r}async processAfcStream(e){var i,o,a;const r=(a=(o=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:Av;let f=!1,p=0;const y=await this.initAfcToolsMap(e);return(function(m,v,_){return Sn(this,arguments,function*(){for(var T,A,x,b,w,q;p<r;){f&&(p++,f=!1);const L=yield ge(m.processParamsMaybeAddMcpUsage(_)),Z=yield ge(m.generateContentStreamInternal(L)),$=[],K=[];try{for(var G=!0,H=(A=void 0,Tn(Z)),k;k=yield ge(H.next()),T=k.done,!T;G=!0){b=k.value,G=!1;const X=b;if(yield yield ge(X),X.candidates&&(!((w=X.candidates[0])===null||w===void 0)&&w.content)){K.push(X.candidates[0].content);for(const se of(q=X.candidates[0].content.parts)!==null&&q!==void 0?q:[])if(p<r&&se.functionCall){if(!se.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(se.functionCall.name)){const le=yield ge(v.get(se.functionCall.name).callTool([se.functionCall]));$.push(...le)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${se.functionCall.name}`)}}}}catch(X){A={error:X}}finally{try{!G&&!T&&(x=H.return)&&(yield ge(x.call(H)))}finally{if(A)throw A.error}}if($.length>0){f=!0;const X=new rl;X.candidates=[{content:{role:"user",parts:$}}],yield yield ge(X);const se=[];se.push(...K),se.push({role:"user",parts:$});const le=hn(_.contents).concat(se);_.contents=le}else break}})})(this,y,e)}async generateContentInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=_v(this.apiClient,e);return p=te("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Tv(v),T=new rl;return Object.assign(T,_),T})}else{const m=vv(this.apiClient,e);return p=te("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Sv(v),T=new rl;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=_v(this.apiClient,e);return p=te("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),f.then(function(_){return Sn(this,arguments,function*(){var T,A,x,b;try{for(var w=!0,q=Tn(_),G;G=yield ge(q.next()),T=G.done,!T;w=!0){b=G.value,w=!1;const H=b,k=Tv(yield ge(H.json()),e);k.sdkHttpResponse={headers:H.headers};const L=new rl;Object.assign(L,k),yield yield ge(L)}}catch(H){A={error:H}}finally{try{!w&&!T&&(x=q.return)&&(yield ge(x.call(q)))}finally{if(A)throw A.error}}})})}else{const m=vv(this.apiClient,e);return p=te("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),f.then(function(_){return Sn(this,arguments,function*(){var T,A,x,b;try{for(var w=!0,q=Tn(_),G;G=yield ge(q.next()),T=G.done,!T;w=!0){b=G.value,w=!1;const H=b,k=Sv(yield ge(H.json()),e);k.sdkHttpResponse={headers:H.headers};const L=new rl;Object.assign(L,k),yield yield ge(L)}}catch(H){A={error:H}}finally{try{!w&&!T&&(x=q.return)&&(yield ge(x.call(q)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=qw(this.apiClient,e);return p=te("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Vw(v),T=new tv;return Object.assign(T,_),T})}else{const m=Hw(this.apiClient,e);return p=te("{model}:batchEmbedContents",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Bw(v),T=new tv;return Object.assign(T,_),T})}}async generateImagesInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=jw(this.apiClient,e);return p=te("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=tR(v),T=new nv;return Object.assign(T,_),T})}else{const m=Ww(this.apiClient,e);return p=te("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=eR(v),T=new nv;return Object.assign(T,_),T})}}async editImageInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=Ow(this.apiClient,e);return r=te("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=Gw(y),v=new qC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=jR(this.apiClient,e);return r=te("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=eN(y),v=new BC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=LR(this.apiClient,e);return r=te("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=OR(y),v=new VC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=BR(this.apiClient,e);return r=te("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=VR(y),v=new zC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=vR(this.apiClient,e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>Bf(v))}else{const m=yR(this.apiClient,e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>qf(v))}}async listInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=wR(this.apiClient,e);return p=te("{models_url}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=NR(v),T=new iv;return Object.assign(T,_),T})}else{const m=bR(this.apiClient,e);return p=te("{models_url}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=RR(v),T=new iv;return Object.assign(T,_),T})}}async update(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=ZR(this.apiClient,e);return p=te("{model}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>Bf(v))}else{const m=QR(this.apiClient,e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>qf(v))}}async delete(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=Iw(this.apiClient,e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Uw(v),T=new sv;return Object.assign(T,_),T})}else{const m=Mw(this.apiClient,e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Dw(v),T=new sv;return Object.assign(T,_),T})}}async countTokens(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=ww(this.apiClient,e);return p=te("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Nw(v),T=new ov;return Object.assign(T,_),T})}else{const m=bw(this.apiClient,e);return p=te("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=Rw(v),T=new ov;return Object.assign(T,_),T})}}async computeTokens(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=_w(this.apiClient,e);return r=te("{model}:computeTokens",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>{const m=Sw(y),v=new FC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=aR(this.apiClient,e);return p=te("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f.then(v=>{const _=oR(v),T=new Tr;return Object.assign(T,_),T})}else{const m=lR(this.apiClient,e);return p=te("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f.then(v=>{const _=sR(v),T=new Tr;return Object.assign(T,_),T})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YN extends jn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:r}});return i._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const i=e.operation,o=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let r;o&&"httpOptions"in o&&(r=o.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:r}});return i._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:o});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=LC(e);return p=te("{operationName}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),f}else{const m=UC(e);return p=te("{operationName}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),f}}async fetchPredictVideosOperationInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=bC(e);return r=te("{resourceName}:fetchPredictOperation",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KN(t){const e={},i=c(t,["data"]);if(i!=null&&d(e,["data"],i),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function XN(t){const e={},i=c(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>sM(r))),d(e,["parts"],a)}const o=c(t,["role"]);return o!=null&&d(e,["role"],o),e}function QN(t,e,i){const o={},a=c(e,["expireTime"]);i!==void 0&&a!=null&&d(i,["expireTime"],a);const r=c(e,["newSessionExpireTime"]);i!==void 0&&r!=null&&d(i,["newSessionExpireTime"],r);const f=c(e,["uses"]);i!==void 0&&f!=null&&d(i,["uses"],f);const p=c(e,["liveConnectConstraints"]);i!==void 0&&p!=null&&d(i,["bidiGenerateContentSetup"],iM(t,p));const y=c(e,["lockAdditionalFields"]);return i!==void 0&&y!=null&&d(i,["fieldMask"],y),o}function ZN(t,e){const i={},o=c(e,["config"]);return o!=null&&d(i,["config"],QN(t,o,i)),i}function WN(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function jN(t){const e={},i=c(t,["id"]);i!=null&&d(e,["id"],i);const o=c(t,["args"]);o!=null&&d(e,["args"],o);const a=c(t,["name"]);if(a!=null&&d(e,["name"],a),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eM(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function tM(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function nM(t,e){const i={},o=c(t,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const a=c(t,["responseModalities"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","responseModalities"],a);const r=c(t,["temperature"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","temperature"],r);const f=c(t,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const p=c(t,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const y=c(t,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(t,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=c(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const _=c(t,["speechConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","speechConfig"],yd(_));const T=c(t,["thinkingConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","thinkingConfig"],T);const A=c(t,["enableAffectiveDialog"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],A);const x=c(t,["systemInstruction"]);e!==void 0&&x!=null&&d(e,["setup","systemInstruction"],XN(Nt(x)));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let Z=so(b);Array.isArray(Z)&&(Z=Z.map($=>lM(io($)))),d(e,["setup","tools"],Z)}const w=c(t,["sessionResumption"]);e!==void 0&&w!=null&&d(e,["setup","sessionResumption"],oM(w));const q=c(t,["inputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","inputAudioTranscription"],q);const G=c(t,["outputAudioTranscription"]);e!==void 0&&G!=null&&d(e,["setup","outputAudioTranscription"],G);const H=c(t,["realtimeInputConfig"]);e!==void 0&&H!=null&&d(e,["setup","realtimeInputConfig"],H);const k=c(t,["contextWindowCompression"]);e!==void 0&&k!=null&&d(e,["setup","contextWindowCompression"],k);const L=c(t,["proactivity"]);if(e!==void 0&&L!=null&&d(e,["setup","proactivity"],L),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function iM(t,e){const i={},o=c(e,["model"]);o!=null&&d(i,["setup","model"],De(t,o));const a=c(e,["config"]);return a!=null&&d(i,["config"],nM(a,i)),i}function sM(t){const e={},i=c(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const o=c(t,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const a=c(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const r=c(t,["fileData"]);r!=null&&d(e,["fileData"],WN(r));const f=c(t,["functionCall"]);f!=null&&d(e,["functionCall"],jN(f));const p=c(t,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const y=c(t,["inlineData"]);y!=null&&d(e,["inlineData"],KN(y));const m=c(t,["text"]);m!=null&&d(e,["text"],m);const v=c(t,["thought"]);v!=null&&d(e,["thought"],v);const _=c(t,["thoughtSignature"]);_!=null&&d(e,["thoughtSignature"],_);const T=c(t,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function oM(t){const e={},i=c(t,["handle"]);if(i!=null&&d(e,["handle"],i),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lM(t){const e={};if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const a=c(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=c(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),d(e,["functionDeclarations"],v)}const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],eM(f));const p=c(t,["googleSearch"]);p!=null&&d(e,["googleSearch"],tM(p));const y=c(t,["googleSearchRetrieval"]);y!=null&&d(e,["googleSearchRetrieval"],y);const m=c(t,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aM(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const o=t[i];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const a=Object.keys(o).map(r=>`${i}.${r}`);e.push(...a)}else e.push(i)}return e.join(",")}function rM(t,e){let i=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const r=o.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,i=r):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(i){const r=aM(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?t.fieldMask=r:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const f=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];a.length>0&&(p=a.map(m=>f.includes(m)?`generationConfig.${m}`:m));const y=[];r&&y.push(r),p.length>0&&y.push(...p),y.length>0?t.fieldMask=y.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class uM extends jn{constructor(e){super(),this.apiClient=e}async create(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=ZN(this.apiClient,e);r=te("auth_tokens",p._url),f=p._query,delete p.config,delete p._url,delete p._query;const y=rM(p,e.config);return a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),a.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cM(t,e){const i={},o=c(t,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),i}function fM(t){const e={},i=c(t,["name"]);i!=null&&d(e,["_url","name"],i);const o=c(t,["config"]);return o!=null&&cM(o,e),e}function dM(t){const e={},i=c(t,["name"]);return i!=null&&d(e,["_url","name"],i),e}function hM(t,e){const i={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const a=c(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function pM(t){const e={},i=c(t,["parent"]);i!=null&&d(e,["_url","parent"],i);const o=c(t,["config"]);return o!=null&&hM(o,e),e}function mM(t){const e={},i=c(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const o=c(t,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const a=c(t,["documents"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(f=>f)),d(e,["documents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gM extends jn{constructor(e){super(),this.apiClient=e,this.list=async i=>new os(Wn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:i.parent,config:o.config}),await this.listInternal(i),i)}async get(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=dM(e);return r=te("{name}",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var i,o;let a="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=fM(e);a=te("{name}",f._url),r=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:r,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=pM(e);return r=te("{parent}/documents",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=mM(y),v=new $C;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yM extends jn{constructor(e,i=new gM(e)){super(),this.apiClient=e,this.documents=i,this.list=async(o={})=>new os(Wn.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=aN(e);return r=te("fileSearchStores",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async get(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=cN(e);return r=te("{name}",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>y)}}async delete(e){var i,o;let a="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=uN(e);a=te("{name}",f._url),r=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:r,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=gN(e);return r=te("fileSearchStores",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=yN(y),v=new JC;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=vN(e);return r=te("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=_N(y),v=new YC;return Object.assign(v,m),v})}}async importFile(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=hN(e);return r=te("{file_search_store_name}:importFile",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),a.then(y=>{const m=dN(y),v=new dd;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let X0=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return X0=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^i()&15>>+o/4).toString(16))};const vM=()=>X0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Ff=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pn extends Error{}let mn=class $f extends pn{constructor(e,i,o,a){super(`${$f.makeMessage(e,i,o)}`),this.status=e,this.headers=a,this.error=i}static makeMessage(e,i,o){const a=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):o;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,o,a){if(!e||!a)return new kr({message:o,cause:Ff(i)});const r=i;return e===400?new Z0(e,r,o,a):e===401?new W0(e,r,o,a):e===403?new j0(e,r,o,a):e===404?new e_(e,r,o,a):e===409?new t_(e,r,o,a):e===422?new n_(e,r,o,a):e===429?new i_(e,r,o,a):e>=500?new s_(e,r,o,a):new $f(e,r,o,a)}},Jf=class extends mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},kr=class extends mn{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}},Q0=class extends kr{constructor({message:e}={}){super({message:e??"Request timed out."})}},Z0=class extends mn{},W0=class extends mn{},j0=class extends mn{},e_=class extends mn{},t_=class extends mn{},n_=class extends mn{},i_=class extends mn{},s_=class extends mn{};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _M=/^[a-z][a-z0-9+.-]*:/i,SM=t=>_M.test(t);let Yf=t=>(Yf=Array.isArray,Yf(t));const TM=Yf;let EM=TM;const wv=EM;function AM(t){if(!t)return!0;for(const e in t)return!1;return!0}function CM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const xM=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new pn(`${t} must be an integer`);if(e<0)throw new pn(`${t} must be a positive integer`);return e},bM=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wM=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ks="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const NM=()=>{var t,e,i,o,a;const r=RM();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ks,"X-Stainless-OS":Nv(Deno.build.os),"X-Stainless-Arch":Rv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ks,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ks,"X-Stainless-OS":Nv((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":Rv((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const f=MM();return f?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ks,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${f.browser}`,"X-Stainless-Runtime-Version":f.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ks,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function MM(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const o=i.exec(navigator.userAgent);if(o){const a=o[1]||0,r=o[2]||0,f=o[3]||0;return{browser:e,version:`${a}.${r}.${f}`}}}return null}const Rv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Nv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Za;const IM=()=>Za??(Za=NM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function o_(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function UM(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return o_({start(){},async pull(i){const{done:o,value:a}=await e.next();o?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function l_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function LM(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const o=t.getReader(),a=o.cancel();o.releaseLock(),await a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OM=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a_=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Tf(t,e,i){return a_(),new File(t,e??"unknown_file",i)}function GM(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const PM=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r_=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",kM=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&r_(t),HM=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function qM(t,e,i){if(a_(),t=await t,kM(t))return t instanceof File?t:Tf([await t.arrayBuffer()],t.name);if(HM(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Tf(await Kf(a),e,i)}const o=await Kf(t);if(e||(e=GM(t)),!(i!=null&&i.type)){const a=o.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof a=="string"&&(i=Object.assign(Object.assign({},i),{type:a}))}return Tf(o,e,i)}async function Kf(t){var e,i,o,a,r;let f=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)f.push(t);else if(r_(t))f.push(t instanceof Blob?t:await t.arrayBuffer());else if(PM(t))try{for(var p=!0,y=Tn(t),m;m=await y.next(),e=m.done,!e;p=!0){a=m.value,p=!1;const v=a;f.push(...await Kf(v))}}catch(v){i={error:v}}finally{try{!p&&!e&&(o=y.return)&&await o.call(y)}finally{if(i)throw i.error}}else{const v=(r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${BM(t)}`)}return f}function BM(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let u_=class{constructor(e){this._client=e}};u_._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c_(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Mv=Object.freeze(Object.create(null)),VM=(t=c_)=>(function(i,...o){if(i.length===1)return i[0];let a=!1;const r=[],f=i.reduce((v,_,T)=>{var A,x,b;/[?#]/.test(_)&&(a=!0);const w=o[T];let q=(a?encodeURIComponent:t)(""+w);return T!==o.length&&(w==null||typeof w=="object"&&w.toString===((b=Object.getPrototypeOf((x=Object.getPrototypeOf((A=w.hasOwnProperty)!==null&&A!==void 0?A:Mv))!==null&&x!==void 0?x:Mv))===null||b===void 0?void 0:b.toString))&&(q=w+"",r.push({start:v.length+_.length,length:q.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),v+_+(T===o.length?"":q)},""),p=f.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(p))!==null;)r.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(r.sort((v,_)=>v.start-_.start),r.length>0){let v=0;const _=r.reduce((T,A)=>{const x=" ".repeat(A.start-v),b="^".repeat(A.length);return v=A.start+A.length,T+x+b},"");throw new pn(`Path parameters result in path with invalid segments:
${r.map(T=>T.error).join(`
`)}
${f}
${_}`)}return f}),Wa=VM(c_);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f_ extends u_{create(e,i){var o;const{api_version:a=this._client.apiVersion}=e,r=Ar(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new pn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new pn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Wa`/${a}/interactions`,Object.assign(Object.assign({body:r},i),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,i={},o){const{api_version:a=this._client.apiVersion}=i??{};return this._client.delete(Wa`/${a}/interactions/${e}`,o)}cancel(e,i={},o){const{api_version:a=this._client.apiVersion}=i??{};return this._client.post(Wa`/${a}/interactions/${e}/cancel`,o)}get(e,i={},o){var a;const r=i??{},{api_version:f=this._client.apiVersion}=r,p=Ar(r,["api_version"]);return this._client.get(Wa`/${f}/interactions/${e}`,Object.assign(Object.assign({query:p},o),{stream:(a=i==null?void 0:i.stream)!==null&&a!==void 0?a:!1}))}}f_._key=Object.freeze(["interactions"]);class d_ extends f_{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zM(t){let e=0;for(const a of t)e+=a.length;const i=new Uint8Array(e);let o=0;for(const a of t)i.set(a,o),o+=a.length;return i}let ja;function _d(t){let e;return(ja??(e=new globalThis.TextEncoder,ja=e.encode.bind(e)))(t)}let er;function Iv(t){let e;return(er??(e=new globalThis.TextDecoder,er=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Hr=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?_d(e):e;this.buffer=zM([this.buffer,i]);const o=[];let a;for(;(a=FM(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){o.push(Iv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,f=Iv(this.buffer.subarray(0,r));o.push(f),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}};Hr.NEWLINE_CHARS=new Set([`
`,"\r"]);Hr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function FM(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function $M(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cr={off:0,error:200,warn:300,info:400,debug:500},Dv=(t,e,i)=>{if(t){if(CM(Cr,t))return t;Dt(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Cr))}`)}};function dl(){}function tr(t,e,i){return!e||Cr[t]>Cr[i]?dl:e[t].bind(e)}const JM={error:dl,warn:dl,info:dl,debug:dl};let Uv=new WeakMap;function Dt(t){var e;const i=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return JM;const a=Uv.get(i);if(a&&a[0]===o)return a[1];const r={error:tr("error",i,o),warn:tr("warn",i,o),info:tr("info",i,o),debug:tr("debug",i,o)};return Uv.set(i,[o,r]),r}const ji=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let YM=class hl{constructor(e,i,o){this.iterator=e,this.controller=i,this.client=o}static fromSSEResponse(e,i,o){let a=!1;const r=o?Dt(o):console;function f(){return Sn(this,arguments,function*(){var y,m,v,_;if(a)throw new pn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var A=!0,x=Tn(KM(e,i)),b;b=yield ge(x.next()),y=b.done,!y;A=!0){_=b.value,A=!1;const w=_;if(!T)if(w.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield ge(JSON.parse(w.data))}catch(q){throw r.error("Could not parse message into JSON:",w.data),r.error("From chunk:",w.raw),q}}}catch(w){m={error:w}}finally{try{!A&&!y&&(v=x.return)&&(yield ge(v.call(x)))}finally{if(m)throw m.error}}T=!0}catch(w){if(zf(w))return yield ge(void 0);throw w}finally{T||i.abort()}})}return new hl(f,i,o)}static fromReadableStream(e,i,o){let a=!1;function r(){return Sn(this,arguments,function*(){var y,m,v,_;const T=new Hr,A=l_(e);try{for(var x=!0,b=Tn(A),w;w=yield ge(b.next()),y=w.done,!y;x=!0){_=w.value,x=!1;const q=_;for(const G of T.decode(q))yield yield ge(G)}}catch(q){m={error:q}}finally{try{!x&&!y&&(v=b.return)&&(yield ge(v.call(b)))}finally{if(m)throw m.error}}for(const q of T.flush())yield yield ge(q)})}function f(){return Sn(this,arguments,function*(){var y,m,v,_;if(a)throw new pn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let T=!1;try{try{for(var A=!0,x=Tn(r()),b;b=yield ge(x.next()),y=b.done,!y;A=!0){_=b.value,A=!1;const w=_;T||w&&(yield yield ge(JSON.parse(w)))}}catch(w){m={error:w}}finally{try{!A&&!y&&(v=x.return)&&(yield ge(v.call(x)))}finally{if(m)throw m.error}}T=!0}catch(w){if(zf(w))return yield ge(void 0);throw w}finally{T||i.abort()}})}return new hl(f,i,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],o=this.iterator(),a=r=>({next:()=>{if(r.length===0){const f=o.next();e.push(f),i.push(f)}return r.shift()}});return[new hl(()=>a(e),this.controller,this.client),new hl(()=>a(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return o_({async start(){i=e[Symbol.asyncIterator]()},async pull(o){try{const{value:a,done:r}=await i.next();if(r)return o.close();const f=_d(JSON.stringify(a)+`
`);o.enqueue(f)}catch(a){o.error(a)}},async cancel(){var o;await((o=i.return)===null||o===void 0?void 0:o.call(i))}})}};function KM(t,e){return Sn(this,arguments,function*(){var o,a,r,f;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new pn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new pn("Attempted to iterate over a response with no body");const p=new QM,y=new Hr,m=l_(t.body);try{for(var v=!0,_=Tn(XM(m)),T;T=yield ge(_.next()),o=T.done,!o;v=!0){f=T.value,v=!1;const A=f;for(const x of y.decode(A)){const b=p.decode(x);b&&(yield yield ge(b))}}}catch(A){a={error:A}}finally{try{!v&&!o&&(r=_.return)&&(yield ge(r.call(_)))}finally{if(a)throw a.error}}for(const A of y.flush()){const x=p.decode(A);x&&(yield yield ge(x))}})}function XM(t){return Sn(this,arguments,function*(){var i,o,a,r;let f=new Uint8Array;try{for(var p=!0,y=Tn(t),m;m=yield ge(y.next()),i=m.done,!i;p=!0){r=m.value,p=!1;const v=r;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?_d(v):v;let T=new Uint8Array(f.length+_.length);T.set(f),T.set(_,f.length),f=T;let A;for(;(A=$M(f))!==-1;)yield yield ge(f.slice(0,A)),f=f.slice(A)}}catch(v){o={error:v}}finally{try{!p&&!i&&(a=y.return)&&(yield ge(a.call(y)))}finally{if(o)throw o.error}}f.length>0&&(yield yield ge(f))})}let QM=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,o,a]=ZM(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}};function ZM(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function WM(t,e){const{response:i,requestLogID:o,retryOfRequestLogID:a,startTime:r}=e,f=await(async()=>{var p;if(e.options.stream)return Dt(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):YM.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const y=i.headers.get("content-type"),m=(p=y==null?void 0:y.split(";")[0])===null||p===void 0?void 0:p.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?i.headers.get("content-length")==="0"?void 0:await i.json():await i.text()})();return Dt(t).debug(`[${o}] response parsed`,ji({retryOfRequestLogID:a,url:i.url,status:i.status,body:f,durationMs:Date.now()-r})),f}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let jM=class h_ extends Promise{constructor(e,i,o=WM){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new h_(this.client,this.responsePromise,async(i,o)=>e(await this.parseResponse(i,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p_=Symbol("brand.privateNullableHeaders");function*eI(t){if(!t)return;if(p_ in t){const{values:o,nulls:a}=t;yield*o.entries();for(const r of a)yield[r,null];return}let e=!1,i;t instanceof Headers?i=t.entries():wv(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let o of i){const a=o[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const r=wv(o[1])?o[1]:[o[1]];let f=!1;for(const p of r)p!==void 0&&(e&&!f&&(f=!0,yield[a,null]),yield[a,p])}}const ul=t=>{const e=new Headers,i=new Set;for(const o of t){const a=new Set;for(const[r,f]of eI(o)){const p=r.toLowerCase();a.has(p)||(e.delete(r),a.add(p)),f===null?(e.delete(r),i.add(p)):(e.append(r,f),i.delete(p))}}return{[p_]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ef=t=>{var e,i,o,a,r,f;if(typeof globalThis.process<"u")return(o=(i=(e=SC)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(f=(r=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||r===void 0?void 0:r.call(a,t))===null||f===void 0?void 0:f.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var m_;class qr{constructor(e){var i,o,a,r,f,p,y,{baseURL:m=Ef("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=Ef("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:_="v1beta"}=e,T=Ar(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:v,apiVersion:_},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(o=A.timeout)!==null&&o!==void 0?o:qr.DEFAULT_TIMEOUT,this.logger=(a=A.logger)!==null&&a!==void 0?a:console;const x="warn";this.logLevel=x,this.logLevel=(f=(r=Dv(A.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:Dv(Ef("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&f!==void 0?f:x,this.fetchOptions=A.fetchOptions,this.maxRetries=(p=A.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(y=A.fetch)!==null&&y!==void 0?y:DM(),this.encoder=OM,this._options=A,this.apiKey=v,this.apiVersion=_,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=ul([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return ul([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ul([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,o])=>typeof o<"u").map(([i,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(i)}=`;throw new pn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ks}`}defaultIdempotencyKey(){return`stainless-node-retry-${vM()}`}makeStatusError(e,i,o,a){return mn.generate(e,i,o,a)}buildURL(e,i,o){const a=!this.baseURLOverridden()&&o||this.baseURL,r=SM(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),f=this.defaultQuery();return AM(f)||(i=Object.assign(Object.assign({},f),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(r.search=this.stringifyQuery(i)),r.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:o}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,o){return this.request(Promise.resolve(o).then(a=>Object.assign({method:e,path:i},a)))}request(e,i=null){return new jM(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,o){var a,r,f;const p=await e,y=(a=p.maxRetries)!==null&&a!==void 0?a:this.maxRetries;i==null&&(i=y),await this.prepareOptions(p);const{req:m,url:v,timeout:_}=await this.buildRequest(p,{retryCount:y-i});await this.prepareRequest(m,{url:v,options:p});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=o===void 0?"":`, retryOf: ${o}`,x=Date.now();if(Dt(this).debug(`[${T}] sending request`,ji({retryOfRequestLogID:o,method:p.method,url:v,options:p,headers:m.headers})),!((r=p.signal)===null||r===void 0)&&r.aborted)throw new Jf;const b=new AbortController,w=await this.fetchWithTimeout(v,m,_,b).catch(Ff),q=Date.now();if(w instanceof globalThis.Error){const H=`retrying, ${i} attempts remaining`;if(!((f=p.signal)===null||f===void 0)&&f.aborted)throw new Jf;const k=zf(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(i)return Dt(this).info(`[${T}] connection ${k?"timed out":"failed"} - ${H}`),Dt(this).debug(`[${T}] connection ${k?"timed out":"failed"} (${H})`,ji({retryOfRequestLogID:o,url:v,durationMs:q-x,message:w.message})),this.retryRequest(p,i,o??T);throw Dt(this).info(`[${T}] connection ${k?"timed out":"failed"} - error; no more retries left`),Dt(this).debug(`[${T}] connection ${k?"timed out":"failed"} (error; no more retries left)`,ji({retryOfRequestLogID:o,url:v,durationMs:q-x,message:w.message})),k?new Q0:new kr({cause:w})}const G=`[${T}${A}] ${m.method} ${v} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${q-x}ms`;if(!w.ok){const H=await this.shouldRetry(w);if(i&&H){const X=`retrying, ${i} attempts remaining`;return await LM(w.body),Dt(this).info(`${G} - ${X}`),Dt(this).debug(`[${T}] response error (${X})`,ji({retryOfRequestLogID:o,url:w.url,status:w.status,headers:w.headers,durationMs:q-x})),this.retryRequest(p,i,o??T,w.headers)}const k=H?"error; no more retries left":"error; not retryable";Dt(this).info(`${G} - ${k}`);const L=await w.text().catch(X=>Ff(X).message),Z=bM(L),$=Z?void 0:L;throw Dt(this).debug(`[${T}] response error (${k})`,ji({retryOfRequestLogID:o,url:w.url,status:w.status,headers:w.headers,message:$,durationMs:Date.now()-x})),this.makeStatusError(w.status,Z,$,w.headers)}return Dt(this).info(G),Dt(this).debug(`[${T}] response start`,ji({retryOfRequestLogID:o,url:w.url,status:w.status,headers:w.headers,durationMs:q-x})),{response:w,options:p,controller:b,requestLogID:T,retryOfRequestLogID:o,startTime:x}}async fetchWithTimeout(e,i,o,a){const r=i||{},{signal:f,method:p}=r,y=Ar(r,["signal","method"]),m=a.abort.bind(a);f&&f.addEventListener("abort",m,{once:!0});const v=setTimeout(m,o),_=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,T=Object.assign(Object.assign(Object.assign({signal:a.signal},_?{duplex:"half"}:{}),{method:"GET"}),y);p&&(T.method=p.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(v)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,o,a){var r;let f;const p=a==null?void 0:a.get("retry-after-ms");if(p){const m=parseFloat(p);Number.isNaN(m)||(f=m)}const y=a==null?void 0:a.get("retry-after");if(y&&!f){const m=parseFloat(y);Number.isNaN(m)?f=Date.parse(y)-Date.now():f=m*1e3}if(!(f&&0<=f&&f<60*1e3)){const m=(r=e.maxRetries)!==null&&r!==void 0?r:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(i,m)}return await wM(f),this.makeRequest(e,i-1,o)}calculateDefaultRetryTimeoutMillis(e,i){const r=i-e,f=Math.min(.5*Math.pow(2,r),8),p=1-Math.random()*.25;return f*p*1e3}async buildRequest(e,{retryCount:i=0}={}){var o,a,r;const f=Object.assign({},e),{method:p,path:y,query:m,defaultBaseURL:v}=f,_=this.buildURL(y,m,v);"timeout"in f&&xM("timeout",f.timeout),f.timeout=(o=f.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:f}),x=await this.buildHeaders({options:e,method:p,bodyHeaders:T,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:x},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(r=f.fetchOptions)!==null&&r!==void 0?r:{}),url:_,timeout:f.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:o,retryCount:a}){let r={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const f=await this.authHeaders(e);let p=ul([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),IM()),this._options.defaultHeaders,o,e.headers,f]);return this.validateHeaders(p),p.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=ul([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:UM(e)}:this.encoder({body:e,headers:o})}}qr.DEFAULT_TIMEOUT=6e4;class yt extends qr{constructor(){super(...arguments),this.interactions=new d_(this)}}m_=yt;yt.GeminiNextGenAPIClient=m_;yt.GeminiNextGenAPIClientError=pn;yt.APIError=mn;yt.APIConnectionError=kr;yt.APIConnectionTimeoutError=Q0;yt.APIUserAbortError=Jf;yt.NotFoundError=e_;yt.ConflictError=t_;yt.RateLimitError=i_;yt.BadRequestError=Z0;yt.AuthenticationError=W0;yt.InternalServerError=s_;yt.PermissionDeniedError=j0;yt.UnprocessableEntityError=n_;yt.toFile=qM;yt.Interactions=d_;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tI(t,e){const i={},o=c(t,["name"]);return o!=null&&d(i,["_url","name"],o),i}function nI(t,e){const i={},o=c(t,["name"]);return o!=null&&d(i,["_url","name"],o),i}function iI(t,e){const i={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(i,["sdkHttpResponse"],o),i}function sI(t,e){const i={},o=c(t,["sdkHttpResponse"]);return o!=null&&d(i,["sdkHttpResponse"],o),i}function oI(t,e,i){const o={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=c(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&d(e,["displayName"],a),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=c(t,["epochCount"]);e!==void 0&&r!=null&&d(e,["tuningTask","hyperparameters","epochCount"],r);const f=c(t,["learningRateMultiplier"]);if(f!=null&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],f),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(c(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(c(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const p=c(t,["batchSize"]);e!==void 0&&p!=null&&d(e,["tuningTask","hyperparameters","batchSize"],p);const y=c(t,["learningRate"]);if(e!==void 0&&y!=null&&d(e,["tuningTask","hyperparameters","learningRate"],y),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(c(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(c(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(c(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(c(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function lI(t,e,i){const o={};let a=c(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const L=c(t,["validationDataset"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec"],Af(L))}else if(a==="PREFERENCE_TUNING"){const L=c(t,["validationDataset"]);e!==void 0&&L!=null&&d(e,["preferenceOptimizationSpec"],Af(L))}else if(a==="DISTILLATION"){const L=c(t,["validationDataset"]);e!==void 0&&L!=null&&d(e,["distillationSpec"],Af(L))}const r=c(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&d(e,["tunedModelDisplayName"],r);const f=c(t,["description"]);e!==void 0&&f!=null&&d(e,["description"],f);let p=c(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const L=c(t,["epochCount"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],L)}else if(p==="PREFERENCE_TUNING"){const L=c(t,["epochCount"]);e!==void 0&&L!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],L)}else if(p==="DISTILLATION"){const L=c(t,["epochCount"]);e!==void 0&&L!=null&&d(e,["distillationSpec","hyperParameters","epochCount"],L)}let y=c(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const L=c(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],L)}else if(y==="PREFERENCE_TUNING"){const L=c(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],L)}else if(y==="DISTILLATION"){const L=c(t,["learningRateMultiplier"]);e!==void 0&&L!=null&&d(e,["distillationSpec","hyperParameters","learningRateMultiplier"],L)}let m=c(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const L=c(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],L)}else if(m==="PREFERENCE_TUNING"){const L=c(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],L)}else if(m==="DISTILLATION"){const L=c(t,["exportLastCheckpointOnly"]);e!==void 0&&L!=null&&d(e,["distillationSpec","exportLastCheckpointOnly"],L)}let v=c(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const L=c(t,["adapterSize"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],L)}else if(v==="PREFERENCE_TUNING"){const L=c(t,["adapterSize"]);e!==void 0&&L!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],L)}else if(v==="DISTILLATION"){const L=c(t,["adapterSize"]);e!==void 0&&L!=null&&d(e,["distillationSpec","hyperParameters","adapterSize"],L)}let _=c(i,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const L=c(t,["tuningMode"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","tuningMode"],L)}const T=c(t,["customBaseModel"]);e!==void 0&&T!=null&&d(e,["customBaseModel"],T);let A=c(i,["config","method"]);if(A===void 0&&(A="SUPERVISED_FINE_TUNING"),A==="SUPERVISED_FINE_TUNING"){const L=c(t,["batchSize"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","hyperParameters","batchSize"],L)}let x=c(i,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const L=c(t,["learningRate"]);e!==void 0&&L!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRate"],L)}const b=c(t,["labels"]);e!==void 0&&b!=null&&d(e,["labels"],b);const w=c(t,["beta"]);e!==void 0&&w!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],w);const q=c(t,["baseTeacherModel"]);e!==void 0&&q!=null&&d(e,["distillationSpec","baseTeacherModel"],q);const G=c(t,["tunedTeacherModelSource"]);e!==void 0&&G!=null&&d(e,["distillationSpec","tunedTeacherModelSource"],G);const H=c(t,["sftLossWeightMultiplier"]);e!==void 0&&H!=null&&d(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],H);const k=c(t,["outputUri"]);return e!==void 0&&k!=null&&d(e,["outputUri"],k),o}function aI(t,e){const i={},o=c(t,["baseModel"]);o!=null&&d(i,["baseModel"],o);const a=c(t,["preTunedModel"]);a!=null&&d(i,["preTunedModel"],a);const r=c(t,["trainingDataset"]);r!=null&&vI(r);const f=c(t,["config"]);return f!=null&&oI(f,i),i}function rI(t,e){const i={},o=c(t,["baseModel"]);o!=null&&d(i,["baseModel"],o);const a=c(t,["preTunedModel"]);a!=null&&d(i,["preTunedModel"],a);const r=c(t,["trainingDataset"]);r!=null&&_I(r,i,e);const f=c(t,["config"]);return f!=null&&lI(f,i,e),i}function uI(t,e){const i={},o=c(t,["name"]);return o!=null&&d(i,["_url","name"],o),i}function cI(t,e){const i={},o=c(t,["name"]);return o!=null&&d(i,["_url","name"],o),i}function fI(t,e,i){const o={},a=c(t,["pageSize"]);e!==void 0&&a!=null&&d(e,["_query","pageSize"],a);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const f=c(t,["filter"]);return e!==void 0&&f!=null&&d(e,["_query","filter"],f),o}function dI(t,e,i){const o={},a=c(t,["pageSize"]);e!==void 0&&a!=null&&d(e,["_query","pageSize"],a);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const f=c(t,["filter"]);return e!==void 0&&f!=null&&d(e,["_query","filter"],f),o}function hI(t,e){const i={},o=c(t,["config"]);return o!=null&&fI(o,i),i}function pI(t,e){const i={},o=c(t,["config"]);return o!=null&&dI(o,i),i}function mI(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const r=c(t,["tunedModels"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>g_(p))),d(i,["tuningJobs"],f)}return i}function gI(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const r=c(t,["tuningJobs"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>Xf(p))),d(i,["tuningJobs"],f)}return i}function yI(t,e){const i={},o=c(t,["name"]);o!=null&&d(i,["model"],o);const a=c(t,["name"]);return a!=null&&d(i,["endpoint"],a),i}function vI(t,e){const i={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=c(t,["examples"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(r=>r)),d(i,["examples","examples"],a)}return i}function _I(t,e,i){const o={};let a=c(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const f=c(t,["gcsUri"]);e!==void 0&&f!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(a==="PREFERENCE_TUNING"){const f=c(t,["gcsUri"]);e!==void 0&&f!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}else if(a==="DISTILLATION"){const f=c(t,["gcsUri"]);e!==void 0&&f!=null&&d(e,["distillationSpec","promptDatasetUri"],f)}let r=c(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const f=c(t,["vertexDatasetResource"]);e!==void 0&&f!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(r==="PREFERENCE_TUNING"){const f=c(t,["vertexDatasetResource"]);e!==void 0&&f!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}else if(r==="DISTILLATION"){const f=c(t,["vertexDatasetResource"]);e!==void 0&&f!=null&&d(e,["distillationSpec","promptDatasetUri"],f)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function g_(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["name"]);a!=null&&d(i,["name"],a);const r=c(t,["state"]);r!=null&&d(i,["state"],I0(r));const f=c(t,["createTime"]);f!=null&&d(i,["createTime"],f);const p=c(t,["tuningTask","startTime"]);p!=null&&d(i,["startTime"],p);const y=c(t,["tuningTask","completeTime"]);y!=null&&d(i,["endTime"],y);const m=c(t,["updateTime"]);m!=null&&d(i,["updateTime"],m);const v=c(t,["description"]);v!=null&&d(i,["description"],v);const _=c(t,["baseModel"]);_!=null&&d(i,["baseModel"],_);const T=c(t,["_self"]);return T!=null&&d(i,["tunedModel"],yI(T)),i}function Xf(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["name"]);a!=null&&d(i,["name"],a);const r=c(t,["state"]);r!=null&&d(i,["state"],I0(r));const f=c(t,["createTime"]);f!=null&&d(i,["createTime"],f);const p=c(t,["startTime"]);p!=null&&d(i,["startTime"],p);const y=c(t,["endTime"]);y!=null&&d(i,["endTime"],y);const m=c(t,["updateTime"]);m!=null&&d(i,["updateTime"],m);const v=c(t,["error"]);v!=null&&d(i,["error"],v);const _=c(t,["description"]);_!=null&&d(i,["description"],_);const T=c(t,["baseModel"]);T!=null&&d(i,["baseModel"],T);const A=c(t,["tunedModel"]);A!=null&&d(i,["tunedModel"],A);const x=c(t,["preTunedModel"]);x!=null&&d(i,["preTunedModel"],x);const b=c(t,["supervisedTuningSpec"]);b!=null&&d(i,["supervisedTuningSpec"],b);const w=c(t,["preferenceOptimizationSpec"]);w!=null&&d(i,["preferenceOptimizationSpec"],w);const q=c(t,["distillationSpec"]);q!=null&&d(i,["distillationSpec"],q);const G=c(t,["tuningDataStats"]);G!=null&&d(i,["tuningDataStats"],G);const H=c(t,["encryptionSpec"]);H!=null&&d(i,["encryptionSpec"],H);const k=c(t,["partnerModelTuningSpec"]);k!=null&&d(i,["partnerModelTuningSpec"],k);const L=c(t,["customBaseModel"]);L!=null&&d(i,["customBaseModel"],L);const Z=c(t,["experiment"]);Z!=null&&d(i,["experiment"],Z);const $=c(t,["labels"]);$!=null&&d(i,["labels"],$);const K=c(t,["outputUri"]);K!=null&&d(i,["outputUri"],K);const X=c(t,["pipelineJob"]);X!=null&&d(i,["pipelineJob"],X);const se=c(t,["serviceAccount"]);se!=null&&d(i,["serviceAccount"],se);const le=c(t,["tunedModelDisplayName"]);le!=null&&d(i,["tunedModelDisplayName"],le);const Ee=c(t,["veoTuningSpec"]);return Ee!=null&&d(i,["veoTuningSpec"],Ee),i}function SI(t,e){const i={},o=c(t,["sdkHttpResponse"]);o!=null&&d(i,["sdkHttpResponse"],o);const a=c(t,["name"]);a!=null&&d(i,["name"],a);const r=c(t,["metadata"]);r!=null&&d(i,["metadata"],r);const f=c(t,["done"]);f!=null&&d(i,["done"],f);const p=c(t,["error"]);return p!=null&&d(i,["error"],p),i}function Af(t,e){const i={},o=c(t,["gcsUri"]);o!=null&&d(i,["validationDatasetUri"],o);const a=c(t,["vertexDatasetResource"]);return a!=null&&d(i,["validationDatasetUri"],a),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TI extends jn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new os(Wn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var o;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const a={tunedModelName:i.baseModel};!((o=i.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(a.checkpointId=i.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},i),{preTunedModel:a});return r.baseModel=void 0,await this.tuneInternal(r)}else{const a=Object.assign({},i);return await this.tuneInternal(a)}else{const a=Object.assign({},i),r=await this.tuneMldevInternal(a);let f="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?f=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(f=r.name.split("/operations/")[0]),{name:f,state:Of.JOB_STATE_QUEUED}}}}async getInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=cI(e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>Xf(v))}else{const m=uI(e);return p=te("{name}",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>g_(v))}}async listInternal(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=pI(e);return p=te("tuningJobs",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=gI(v),T=new lv;return Object.assign(T,_),T})}else{const m=hI(e);return p=te("tunedModels",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=mI(v),T=new lv;return Object.assign(T,_),T})}}async cancel(e){var i,o,a,r;let f,p="",y={};if(this.apiClient.isVertexAI()){const m=nI(e);return p=te("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=sI(v),T=new av;return Object.assign(T,_),T})}else{const m=tI(e);return p=te("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,f=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),f.then(v=>{const _=iI(v),T=new av;return Object.assign(T,_),T})}}async tuneInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI()){const p=rI(e,e);return r=te("tuningJobs",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>Xf(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,o;let a,r="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=aI(e);return r=te("tunedModels",p._url),f=p._query,delete p._url,delete p._query,a=this.apiClient.request({path:r,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),a.then(y=>SI(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EI{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const AI=1024*1024*8,CI=3,xI=1e3,bI=2,xr="x-goog-upload-status";async function wI(t,e,i){var o;const a=await y_(t,e,i),r=await(a==null?void 0:a.json());if(((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[xr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function RI(t,e,i){var o;const a=await y_(t,e,i),r=await(a==null?void 0:a.json());if(((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[xr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const f=x0(r),p=new hd;return Object.assign(p,f),p}async function y_(t,e,i){var o,a;let r=0,f=0,p=new Pf(new Response),y="upload";for(r=t.size;f<r;){const m=Math.min(AI,r-f),v=t.slice(f,f+m);f+m>=r&&(y+=", finalize");let _=0,T=xI;for(;_<CI&&(p=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(f),"Content-Length":String(m)}}}),!(!((o=p==null?void 0:p.headers)===null||o===void 0)&&o[xr]));)_++,await MI(T),T=T*bI;if(f+=m,((a=p==null?void 0:p.headers)===null||a===void 0?void 0:a[xr])!=="active")break;if(r<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function NI(t){return{size:t.size,type:t.type}}function MI(t){return new Promise(e=>setTimeout(e,t))}class II{async upload(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wI(e,i,o)}async uploadToFileSearchStore(e,i,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RI(e,i,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NI(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DI{create(e,i,o){return new UI(e,i,o)}}class UI{constructor(e,i,o){this.url=e,this.headers=i,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lv="x-goog-api-key";class LI{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(Lv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Lv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OI="gl-node/";class GI{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new yt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const o=CC(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new LI(this.apiKey);this.apiClient=new wN({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:OI+"web",uploader:new II,downloader:new EI}),this.models=new JN(this.apiClient),this.live=new qN(this.apiClient,a,new DI),this.batches=new eb(this.apiClient),this.chats=new Ob(this.models,this.apiClient),this.caches=new Db(this.apiClient),this.files=new Yb(this.apiClient),this.operations=new YN(this.apiClient),this.authTokens=new uM(this.apiClient),this.tunings=new TI(this.apiClient),this.fileSearchStores=new yM(this.apiClient)}}function he(t,e,i,o,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,i),i}function O(t,e,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(t):o?o.value:e.get(t)}let v_=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return v_=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^i()&15>>+o/4).toString(16))};function Qf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Zf=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class fe extends Error{}class xt extends fe{constructor(e,i,o,a){super(`${xt.makeMessage(e,i,o)}`),this.status=e,this.headers=a,this.requestID=a==null?void 0:a.get("x-request-id"),this.error=i;const r=i;this.code=r==null?void 0:r.code,this.param=r==null?void 0:r.param,this.type=r==null?void 0:r.type}static makeMessage(e,i,o){const a=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):o;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,o,a){if(!e||!a)return new Br({message:o,cause:Zf(i)});const r=i==null?void 0:i.error;return e===400?new __(e,r,o,a):e===401?new S_(e,r,o,a):e===403?new T_(e,r,o,a):e===404?new E_(e,r,o,a):e===409?new A_(e,r,o,a):e===422?new C_(e,r,o,a):e===429?new x_(e,r,o,a):e>=500?new b_(e,r,o,a):new xt(e,r,o,a)}}class dn extends xt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Br extends xt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class Sd extends Br{constructor({message:e}={}){super({message:e??"Request timed out."})}}class __ extends xt{}class S_ extends xt{}class T_ extends xt{}class E_ extends xt{}class A_ extends xt{}class C_ extends xt{}class x_ extends xt{}class b_ extends xt{}class w_ extends fe{constructor(){super("Could not parse response content as the length limit was reached")}}class R_ extends fe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class pl extends Error{constructor(e){super(e)}}const PI=/^[a-z][a-z0-9+.-]*:/i,kI=t=>PI.test(t);let Vt=t=>(Vt=Array.isArray,Vt(t)),Ov=Vt;function N_(t){return typeof t!="object"?{}:t??{}}function HI(t){if(!t)return!0;for(const e in t)return!1;return!0}function qI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Cf(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const BI=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new fe(`${t} must be an integer`);if(e<0)throw new fe(`${t} must be a positive integer`);return e},VI=t=>{try{return JSON.parse(t)}catch{return}},Nl=t=>new Promise(e=>setTimeout(e,t)),Xs="6.17.0",zI=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function FI(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const $I=()=>{var i;const t=FI();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xs,"X-Stainless-OS":Pv(Deno.build.os),"X-Stainless-Arch":Gv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((i=Deno.version)==null?void 0:i.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xs,"X-Stainless-OS":Pv(globalThis.process.platform??"unknown"),"X-Stainless-Arch":Gv(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=JI();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Xs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function JI(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const o=i.exec(navigator.userAgent);if(o){const a=o[1]||0,r=o[2]||0,f=o[3]||0;return{browser:e,version:`${a}.${r}.${f}`}}}return null}const Gv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Pv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let kv;const YI=()=>kv??(kv=$I());function KI(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function M_(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function I_(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return M_({start(){},async pull(i){const{done:o,value:a}=await e.next();o?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)==null?void 0:i.call(e))}})}function D_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function XI(t){var o,a;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((a=(o=t[Symbol.asyncIterator]()).return)==null?void 0:a.call(o));return}const e=t.getReader(),i=e.cancel();e.releaseLock(),await i}const QI=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),U_="RFC3986",L_=t=>String(t),Hv={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:L_},ZI="RFC1738";let Wf=(t,e)=>(Wf=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Wf(t,e));const Rn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),xf=1024,WI=(t,e,i,o,a)=>{if(t.length===0)return t;let r=t;if(typeof t=="symbol"?r=Symbol.prototype.toString.call(t):typeof t!="string"&&(r=String(t)),i==="iso-8859-1")return escape(r).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});let f="";for(let p=0;p<r.length;p+=xf){const y=r.length>=xf?r.slice(p,p+xf):r,m=[];for(let v=0;v<y.length;++v){let _=y.charCodeAt(v);if(_===45||_===46||_===95||_===126||_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||a===ZI&&(_===40||_===41)){m[m.length]=y.charAt(v);continue}if(_<128){m[m.length]=Rn[_];continue}if(_<2048){m[m.length]=Rn[192|_>>6]+Rn[128|_&63];continue}if(_<55296||_>=57344){m[m.length]=Rn[224|_>>12]+Rn[128|_>>6&63]+Rn[128|_&63];continue}v+=1,_=65536+((_&1023)<<10|y.charCodeAt(v)&1023),m[m.length]=Rn[240|_>>18]+Rn[128|_>>12&63]+Rn[128|_>>6&63]+Rn[128|_&63]}f+=m.join("")}return f};function jI(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function qv(t,e){if(Vt(t)){const i=[];for(let o=0;o<t.length;o+=1)i.push(e(t[o]));return i}return e(t)}const O_={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},G_=function(t,e){Array.prototype.push.apply(t,Vt(e)?e:[e])};let Bv;const ft={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:WI,encodeValuesOnly:!1,format:U_,formatter:L_,indices:!1,serializeDate(t){return(Bv??(Bv=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function e1(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const bf={};function P_(t,e,i,o,a,r,f,p,y,m,v,_,T,A,x,b,w,q){let G=t,H=q,k=0,L=!1;for(;(H=H.get(bf))!==void 0&&!L;){const se=H.get(t);if(k+=1,typeof se<"u"){if(se===k)throw new RangeError("Cyclic object value");L=!0}typeof H.get(bf)>"u"&&(k=0)}if(typeof m=="function"?G=m(e,G):G instanceof Date?G=T==null?void 0:T(G):i==="comma"&&Vt(G)&&(G=qv(G,function(se){return se instanceof Date?T==null?void 0:T(se):se})),G===null){if(r)return y&&!b?y(e,ft.encoder,w,"key",A):e;G=""}if(e1(G)||jI(G)){if(y){const se=b?e:y(e,ft.encoder,w,"key",A);return[(x==null?void 0:x(se))+"="+(x==null?void 0:x(y(G,ft.encoder,w,"value",A)))]}return[(x==null?void 0:x(e))+"="+(x==null?void 0:x(String(G)))]}const Z=[];if(typeof G>"u")return Z;let $;if(i==="comma"&&Vt(G))b&&y&&(G=qv(G,y)),$=[{value:G.length>0?G.join(",")||null:void 0}];else if(Vt(m))$=m;else{const se=Object.keys(G);$=v?se.sort(v):se}const K=p?String(e).replace(/\./g,"%2E"):String(e),X=o&&Vt(G)&&G.length===1?K+"[]":K;if(a&&Vt(G)&&G.length===0)return X+"[]";for(let se=0;se<$.length;++se){const le=$[se],Ee=typeof le=="object"&&typeof le.value<"u"?le.value:G[le];if(f&&Ee===null)continue;const Oe=_&&p?le.replace(/\./g,"%2E"):le,Le=Vt(G)?typeof i=="function"?i(X,Oe):X:X+(_?"."+Oe:"["+Oe+"]");q.set(t,k);const Ye=new WeakMap;Ye.set(bf,q),G_(Z,P_(Ee,Le,i,o,a,r,f,p,i==="comma"&&b&&Vt(G)?null:y,m,v,_,T,A,x,b,w,Ye))}return Z}function t1(t=ft){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||ft.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let i=U_;if(typeof t.format<"u"){if(!Wf(Hv,t.format))throw new TypeError("Unknown format option provided.");i=t.format}const o=Hv[i];let a=ft.filter;(typeof t.filter=="function"||Vt(t.filter))&&(a=t.filter);let r;if(t.arrayFormat&&t.arrayFormat in O_?r=t.arrayFormat:"indices"in t?r=t.indices?"indices":"repeat":r=ft.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const f=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:ft.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:ft.addQueryPrefix,allowDots:f,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:ft.allowEmptyArrays,arrayFormat:r,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ft.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?ft.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:ft.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:ft.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:ft.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:ft.encodeValuesOnly,filter:a,format:i,formatter:o,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:ft.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:ft.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ft.strictNullHandling}}function n1(t,e={}){let i=t;const o=t1(e);let a,r;typeof o.filter=="function"?(r=o.filter,i=r("",i)):Vt(o.filter)&&(r=o.filter,a=r);const f=[];if(typeof i!="object"||i===null)return"";const p=O_[o.arrayFormat],y=p==="comma"&&o.commaRoundTrip;a||(a=Object.keys(i)),o.sort&&a.sort(o.sort);const m=new WeakMap;for(let T=0;T<a.length;++T){const A=a[T];o.skipNulls&&i[A]===null||G_(f,P_(i[A],A,p,y,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,m))}const v=f.join(o.delimiter);let _=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(o.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),v.length>0?_+v:""}function i1(t){let e=0;for(const a of t)e+=a.length;const i=new Uint8Array(e);let o=0;for(const a of t)i.set(a,o),o+=a.length;return i}let Vv;function Td(t){let e;return(Vv??(e=new globalThis.TextEncoder,Vv=e.encode.bind(e)))(t)}let zv;function Fv(t){let e;return(zv??(e=new globalThis.TextDecoder,zv=e.decode.bind(e)))(t)}var Qt,Zt;class Vr{constructor(){Qt.set(this,void 0),Zt.set(this,void 0),he(this,Qt,new Uint8Array),he(this,Zt,null)}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Td(e):e;he(this,Qt,i1([O(this,Qt,"f"),i]));const o=[];let a;for(;(a=s1(O(this,Qt,"f"),O(this,Zt,"f")))!=null;){if(a.carriage&&O(this,Zt,"f")==null){he(this,Zt,a.index);continue}if(O(this,Zt,"f")!=null&&(a.index!==O(this,Zt,"f")+1||a.carriage)){o.push(Fv(O(this,Qt,"f").subarray(0,O(this,Zt,"f")-1))),he(this,Qt,O(this,Qt,"f").subarray(O(this,Zt,"f"))),he(this,Zt,null);continue}const r=O(this,Zt,"f")!==null?a.preceding-1:a.preceding,f=Fv(O(this,Qt,"f").subarray(0,r));o.push(f),he(this,Qt,O(this,Qt,"f").subarray(a.index)),he(this,Zt,null)}return o}flush(){return O(this,Qt,"f").length?this.decode(`
`):[]}}Qt=new WeakMap,Zt=new WeakMap;Vr.NEWLINE_CHARS=new Set([`
`,"\r"]);Vr.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function s1(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function o1(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}const br={off:0,error:200,warn:300,info:400,debug:500},$v=(t,e,i)=>{if(t){if(qI(br,t))return t;At(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(br))}`)}};function ml(){}function nr(t,e,i){return!e||br[t]>br[i]?ml:e[t].bind(e)}const l1={error:ml,warn:ml,info:ml,debug:ml};let Jv=new WeakMap;function At(t){const e=t.logger,i=t.logLevel??"off";if(!e)return l1;const o=Jv.get(e);if(o&&o[0]===i)return o[1];const a={error:nr("error",e,i),warn:nr("warn",e,i),info:nr("info",e,i),debug:nr("debug",e,i)};return Jv.set(e,[i,a]),a}const es=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var cl;class Mn{constructor(e,i,o){this.iterator=e,cl.set(this,void 0),this.controller=i,he(this,cl,o)}static fromSSEResponse(e,i,o){let a=!1;const r=o?At(o):console;async function*f(){if(a)throw new fe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let p=!1;try{for await(const y of a1(e,i))if(!p){if(y.data.startsWith("[DONE]")){p=!0;continue}if(y.event===null||!y.event.startsWith("thread.")){let m;try{m=JSON.parse(y.data)}catch(v){throw r.error("Could not parse message into JSON:",y.data),r.error("From chunk:",y.raw),v}if(m&&m.error)throw new xt(void 0,m.error,void 0,e.headers);yield m}else{let m;try{m=JSON.parse(y.data)}catch(v){throw console.error("Could not parse message into JSON:",y.data),console.error("From chunk:",y.raw),v}if(y.event=="error")throw new xt(void 0,m.error,m.message,void 0);yield{event:y.event,data:m}}}p=!0}catch(y){if(Qf(y))return;throw y}finally{p||i.abort()}}return new Mn(f,i,o)}static fromReadableStream(e,i,o){let a=!1;async function*r(){const p=new Vr,y=D_(e);for await(const m of y)for(const v of p.decode(m))yield v;for(const m of p.flush())yield m}async function*f(){if(a)throw new fe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let p=!1;try{for await(const y of r())p||y&&(yield JSON.parse(y));p=!0}catch(y){if(Qf(y))return;throw y}finally{p||i.abort()}}return new Mn(f,i,o)}[(cl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],i=[],o=this.iterator(),a=r=>({next:()=>{if(r.length===0){const f=o.next();e.push(f),i.push(f)}return r.shift()}});return[new Mn(()=>a(e),this.controller,O(this,cl,"f")),new Mn(()=>a(i),this.controller,O(this,cl,"f"))]}toReadableStream(){const e=this;let i;return M_({async start(){i=e[Symbol.asyncIterator]()},async pull(o){try{const{value:a,done:r}=await i.next();if(r)return o.close();const f=Td(JSON.stringify(a)+`
`);o.enqueue(f)}catch(a){o.error(a)}},async cancel(){var o;await((o=i.return)==null?void 0:o.call(i))}})}}async function*a1(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new fe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new fe("Attempted to iterate over a response with no body");const i=new u1,o=new Vr,a=D_(t.body);for await(const r of r1(a))for(const f of o.decode(r)){const p=i.decode(f);p&&(yield p)}for(const r of o.flush()){const f=i.decode(r);f&&(yield f)}}async function*r1(t){let e=new Uint8Array;for await(const i of t){if(i==null)continue;const o=i instanceof ArrayBuffer?new Uint8Array(i):typeof i=="string"?Td(i):i;let a=new Uint8Array(e.length+o.length);a.set(e),a.set(o,e.length),e=a;let r;for(;(r=o1(e))!==-1;)yield e.slice(0,r),e=e.slice(r)}e.length>0&&(yield e)}class u1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,o,a]=c1(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}}function c1(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}async function k_(t,e){const{response:i,requestLogID:o,retryOfRequestLogID:a,startTime:r}=e,f=await(async()=>{var _;if(e.options.stream)return At(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):Mn.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const p=i.headers.get("content-type"),y=(_=p==null?void 0:p.split(";")[0])==null?void 0:_.trim();if((y==null?void 0:y.includes("application/json"))||(y==null?void 0:y.endsWith("+json"))){const T=await i.json();return H_(T,i)}return await i.text()})();return At(t).debug(`[${o}] response parsed`,es({retryOfRequestLogID:a,url:i.url,status:i.status,body:f,durationMs:Date.now()-r})),f}function H_(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var gl;class zr extends Promise{constructor(e,i,o=k_){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=o,gl.set(this,void 0),he(this,gl,e)}_thenUnwrap(e){return new zr(O(this,gl,"f"),this.responsePromise,async(i,o)=>H_(e(await this.parseResponse(i,o),o),o.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i,request_id:i.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(O(this,gl,"f"),e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}gl=new WeakMap;var ir;class Ed{constructor(e,i,o,a){ir.set(this,void 0),he(this,ir,e),this.options=a,this.response=i,this.body=o}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new fe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await O(this,ir,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ir=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const i of e.getPaginatedItems())yield i}}class f1 extends zr{constructor(e,i,o){super(e,i,async(a,r)=>new o(a,r.response,await k_(a,r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const i of e)yield i}}class Fr extends Ed{constructor(e,i,o,a){super(e,i,o,a),this.data=o.data||[],this.object=o.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class at extends Ed{constructor(e,i,o,a){super(e,i,o,a),this.data=o.data||[],this.has_more=o.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var o;const e=this.getPaginatedItems(),i=(o=e[e.length-1])==null?void 0:o.id;return i?{...this.options,query:{...N_(this.options.query),after:i}}:null}}class wr extends Ed{constructor(e,i,o,a){super(e,i,o,a),this.data=o.data||[],this.has_more=o.has_more||!1,this.last_id=o.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...N_(this.options.query),after:e}}:null}}const q_=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e==null?void 0:e.versions)==null?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Al(t,e,i){return q_(),new File(t,e??"unknown_file",i)}function fr(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Ad=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Yv=async(t,e)=>jf(t.body)?{...t,body:await B_(t.body,e)}:t,ss=async(t,e)=>({...t,body:await B_(t.body,e)}),Kv=new WeakMap;function d1(t){const e=typeof t=="function"?t:t.fetch,i=Kv.get(e);if(i)return i;const o=(async()=>{try{const a="Response"in e?e.Response:(await e("data:,")).constructor,r=new FormData;return r.toString()!==await new a(r).text()}catch{return!0}})();return Kv.set(e,o),o}const B_=async(t,e)=>{if(!await d1(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const i=new FormData;return await Promise.all(Object.entries(t||{}).map(([o,a])=>ed(i,o,a))),i},V_=t=>t instanceof Blob&&"name"in t,h1=t=>typeof t=="object"&&t!==null&&(t instanceof Response||Ad(t)||V_(t)),jf=t=>{if(h1(t))return!0;if(Array.isArray(t))return t.some(jf);if(t&&typeof t=="object"){for(const e in t)if(jf(t[e]))return!0}return!1},ed=async(t,e,i)=>{if(i!==void 0){if(i==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")t.append(e,String(i));else if(i instanceof Response)t.append(e,Al([await i.blob()],fr(i)));else if(Ad(i))t.append(e,Al([await new Response(I_(i)).blob()],fr(i)));else if(V_(i))t.append(e,i,fr(i));else if(Array.isArray(i))await Promise.all(i.map(o=>ed(t,e+"[]",o)));else if(typeof i=="object")await Promise.all(Object.entries(i).map(([o,a])=>ed(t,`${e}[${o}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${i} instead`)}},z_=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",p1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&z_(t),m1=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function g1(t,e,i){if(q_(),t=await t,p1(t))return t instanceof File?t:Al([await t.arrayBuffer()],t.name);if(m1(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Al(await td(a),e,i)}const o=await td(t);if(e||(e=fr(t)),!(i!=null&&i.type)){const a=o.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof a=="string"&&(i={...i,type:a})}return Al(o,e,i)}async function td(t){var i;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(z_(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(Ad(t))for await(const o of t)e.push(...await td(o));else{const o=(i=t==null?void 0:t.constructor)==null?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${o?`; constructor: ${o}`:""}${y1(t)}`)}return e}function y1(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}class ue{constructor(e){this._client=e}}function F_(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Xv=Object.freeze(Object.create(null)),v1=(t=F_)=>function(i,...o){if(i.length===1)return i[0];let a=!1;const r=[],f=i.reduce((v,_,T)=>{var b;/[?#]/.test(_)&&(a=!0);const A=o[T];let x=(a?encodeURIComponent:t)(""+A);return T!==o.length&&(A==null||typeof A=="object"&&A.toString===((b=Object.getPrototypeOf(Object.getPrototypeOf(A.hasOwnProperty??Xv)??Xv))==null?void 0:b.toString))&&(x=A+"",r.push({start:v.length+_.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),v+_+(T===o.length?"":x)},""),p=f.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(p))!==null;)r.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(r.sort((v,_)=>v.start-_.start),r.length>0){let v=0;const _=r.reduce((T,A)=>{const x=" ".repeat(A.start-v),b="^".repeat(A.length);return v=A.start+A.length,T+x+b},"");throw new fe(`Path parameters result in path with invalid segments:
${r.map(T=>T.error).join(`
`)}
${f}
${_}`)}return f},Q=v1(F_);let $_=class extends ue{list(e,i={},o){return this._client.getAPIList(Q`/chat/completions/${e}/messages`,at,{query:i,...o})}};function Rr(t){return t!==void 0&&"function"in t&&t.function!==void 0}function Cd(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Ml(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function _1(t,e){return!e||!J_(e)?{...t,choices:t.choices.map(i=>(Y_(i.message.tool_calls),{...i,message:{...i.message,parsed:null,...i.message.tool_calls?{tool_calls:i.message.tool_calls}:void 0}}))}:xd(t,e)}function xd(t,e){const i=t.choices.map(o=>{var a;if(o.finish_reason==="length")throw new w_;if(o.finish_reason==="content_filter")throw new R_;return Y_(o.message.tool_calls),{...o,message:{...o.message,...o.message.tool_calls?{tool_calls:((a=o.message.tool_calls)==null?void 0:a.map(r=>T1(e,r)))??void 0}:void 0,parsed:o.message.content&&!o.message.refusal?S1(e,o.message.content):null}}});return{...t,choices:i}}function S1(t,e){var i,o;return((i=t.response_format)==null?void 0:i.type)!=="json_schema"?null:((o=t.response_format)==null?void 0:o.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function T1(t,e){var o;const i=(o=t.tools)==null?void 0:o.find(a=>{var r;return Rr(a)&&((r=a.function)==null?void 0:r.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Ml(i)?i.$parseRaw(e.function.arguments):i!=null&&i.function.strict?JSON.parse(e.function.arguments):null}}}function E1(t,e){var o;if(!t||!("tools"in t)||!t.tools)return!1;const i=(o=t.tools)==null?void 0:o.find(a=>{var r;return Rr(a)&&((r=a.function)==null?void 0:r.name)===e.function.name});return Rr(i)&&(Ml(i)||(i==null?void 0:i.function.strict)||!1)}function J_(t){var e;return Cd(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(i=>Ml(i)||i.type==="function"&&i.function.strict===!0))??!1}function Y_(t){for(const e of t||[])if(e.type!=="function")throw new fe(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function A1(t){for(const e of t??[]){if(e.type!=="function")throw new fe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new fe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Nr=t=>(t==null?void 0:t.role)==="assistant",K_=t=>(t==null?void 0:t.role)==="tool";var nd,dr,hr,yl,vl,pr,_l,Zn,Sl,Mr,Ir,Qs,X_;class bd{constructor(){nd.add(this),this.controller=new AbortController,dr.set(this,void 0),hr.set(this,()=>{}),yl.set(this,()=>{}),vl.set(this,void 0),pr.set(this,()=>{}),_l.set(this,()=>{}),Zn.set(this,{}),Sl.set(this,!1),Mr.set(this,!1),Ir.set(this,!1),Qs.set(this,!1),he(this,dr,new Promise((e,i)=>{he(this,hr,e,"f"),he(this,yl,i,"f")})),he(this,vl,new Promise((e,i)=>{he(this,pr,e,"f"),he(this,_l,i,"f")})),O(this,dr,"f").catch(()=>{}),O(this,vl,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},O(this,nd,"m",X_).bind(this))},0)}_connected(){this.ended||(O(this,hr,"f").call(this),this._emit("connect"))}get ended(){return O(this,Sl,"f")}get errored(){return O(this,Mr,"f")}get aborted(){return O(this,Ir,"f")}abort(){this.controller.abort()}on(e,i){return(O(this,Zn,"f")[e]||(O(this,Zn,"f")[e]=[])).push({listener:i}),this}off(e,i){const o=O(this,Zn,"f")[e];if(!o)return this;const a=o.findIndex(r=>r.listener===i);return a>=0&&o.splice(a,1),this}once(e,i){return(O(this,Zn,"f")[e]||(O(this,Zn,"f")[e]=[])).push({listener:i,once:!0}),this}emitted(e){return new Promise((i,o)=>{he(this,Qs,!0),e!=="error"&&this.once("error",o),this.once(e,i)})}async done(){he(this,Qs,!0),await O(this,vl,"f")}_emit(e,...i){if(O(this,Sl,"f"))return;e==="end"&&(he(this,Sl,!0),O(this,pr,"f").call(this));const o=O(this,Zn,"f")[e];if(o&&(O(this,Zn,"f")[e]=o.filter(a=>!a.once),o.forEach(({listener:a})=>a(...i))),e==="abort"){const a=i[0];!O(this,Qs,"f")&&!(o!=null&&o.length)&&Promise.reject(a),O(this,yl,"f").call(this,a),O(this,_l,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=i[0];!O(this,Qs,"f")&&!(o!=null&&o.length)&&Promise.reject(a),O(this,yl,"f").call(this,a),O(this,_l,"f").call(this,a),this._emit("end")}}_emitFinal(){}}dr=new WeakMap,hr=new WeakMap,yl=new WeakMap,vl=new WeakMap,pr=new WeakMap,_l=new WeakMap,Zn=new WeakMap,Sl=new WeakMap,Mr=new WeakMap,Ir=new WeakMap,Qs=new WeakMap,nd=new WeakSet,X_=function(e){if(he(this,Mr,!0),e instanceof Error&&e.name==="AbortError"&&(e=new dn),e instanceof dn)return he(this,Ir,!0),this._emit("abort",e);if(e instanceof fe)return this._emit("error",e);if(e instanceof Error){const i=new fe(e.message);return i.cause=e,this._emit("error",i)}return this._emit("error",new fe(String(e)))};function C1(t){return typeof t.parse=="function"}var It,id,Dr,sd,od,ld,Q_,Z_;const x1=10;class W_ extends bd{constructor(){super(...arguments),It.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var o;this._chatCompletions.push(e),this._emit("chatCompletion",e);const i=(o=e.choices[0])==null?void 0:o.message;return i&&this._addMessage(i),e}_addMessage(e,i=!0){if("content"in e||(e.content=null),this.messages.push(e),i){if(this._emit("message",e),K_(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Nr(e)&&e.tool_calls)for(const o of e.tool_calls)o.type==="function"&&this._emit("functionToolCall",o.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new fe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),O(this,It,"m",id).call(this)}async finalMessage(){return await this.done(),O(this,It,"m",Dr).call(this)}async finalFunctionToolCall(){return await this.done(),O(this,It,"m",sd).call(this)}async finalFunctionToolCallResult(){return await this.done(),O(this,It,"m",od).call(this)}async totalUsage(){return await this.done(),O(this,It,"m",ld).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const i=O(this,It,"m",Dr).call(this);i&&this._emit("finalMessage",i);const o=O(this,It,"m",id).call(this);o&&this._emit("finalContent",o);const a=O(this,It,"m",sd).call(this);a&&this._emit("finalFunctionToolCall",a);const r=O(this,It,"m",od).call(this);r!=null&&this._emit("finalFunctionToolCallResult",r),this._chatCompletions.some(f=>f.usage)&&this._emit("totalUsage",O(this,It,"m",ld).call(this))}async _createChatCompletion(e,i,o){const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),O(this,It,"m",Q_).call(this,i);const r=await e.chat.completions.create({...i,stream:!1},{...o,signal:this.controller.signal});return this._connected(),this._addChatCompletion(xd(r,i))}async _runChatCompletion(e,i,o){for(const a of i.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,i,o)}async _runTools(e,i,o){var A,x,b;const a="tool",{tool_choice:r="auto",stream:f,...p}=i,y=typeof r!="string"&&r.type==="function"&&((A=r==null?void 0:r.function)==null?void 0:A.name),{maxChatCompletions:m=x1}=o||{},v=i.tools.map(w=>{if(Ml(w)){if(!w.$callback)throw new fe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:w.$callback,name:w.function.name,description:w.function.description||"",parameters:w.function.parameters,parse:w.$parseRaw,strict:!0}}}return w}),_={};for(const w of v)w.type==="function"&&(_[w.function.name||w.function.function.name]=w.function);const T="tools"in i?v.map(w=>w.type==="function"?{type:"function",function:{name:w.function.name||w.function.function.name,parameters:w.function.parameters,description:w.function.description,strict:w.function.strict}}:w):void 0;for(const w of i.messages)this._addMessage(w,!1);for(let w=0;w<m;++w){const G=(x=(await this._createChatCompletion(e,{...p,tool_choice:r,tools:T,messages:[...this.messages]},o)).choices[0])==null?void 0:x.message;if(!G)throw new fe("missing message in ChatCompletion response");if(!((b=G.tool_calls)!=null&&b.length))return;for(const H of G.tool_calls){if(H.type!=="function")continue;const k=H.id,{name:L,arguments:Z}=H.function,$=_[L];if($){if(y&&y!==L){const le=`Invalid tool_call: ${JSON.stringify(L)}. ${JSON.stringify(y)} requested. Please try again`;this._addMessage({role:a,tool_call_id:k,content:le});continue}}else{const le=`Invalid tool_call: ${JSON.stringify(L)}. Available options are: ${Object.keys(_).map(Ee=>JSON.stringify(Ee)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:k,content:le});continue}let K;try{K=C1($)?await $.parse(Z):Z}catch(le){const Ee=le instanceof Error?le.message:String(le);this._addMessage({role:a,tool_call_id:k,content:Ee});continue}const X=await $.function(K,this),se=O(this,It,"m",Z_).call(this,X);if(this._addMessage({role:a,tool_call_id:k,content:se}),y)return}}}}It=new WeakSet,id=function(){return O(this,It,"m",Dr).call(this).content??null},Dr=function(){let e=this.messages.length;for(;e-- >0;){const i=this.messages[e];if(Nr(i))return{...i,content:i.content??null,refusal:i.refusal??null}}throw new fe("stream ended without producing a ChatCompletionMessage with role=assistant")},sd=function(){var e,i;for(let o=this.messages.length-1;o>=0;o--){const a=this.messages[o];if(Nr(a)&&((e=a==null?void 0:a.tool_calls)!=null&&e.length))return(i=a.tool_calls.filter(r=>r.type==="function").at(-1))==null?void 0:i.function}},od=function(){for(let e=this.messages.length-1;e>=0;e--){const i=this.messages[e];if(K_(i)&&i.content!=null&&typeof i.content=="string"&&this.messages.some(o=>{var a;return o.role==="assistant"&&((a=o.tool_calls)==null?void 0:a.some(r=>r.type==="function"&&r.id===i.tool_call_id))}))return i.content}},ld=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:i}of this._chatCompletions)i&&(e.completion_tokens+=i.completion_tokens,e.prompt_tokens+=i.prompt_tokens,e.total_tokens+=i.total_tokens);return e},Q_=function(e){if(e.n!=null&&e.n>1)throw new fe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Z_=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class wd extends W_{static runTools(e,i,o){const a=new wd,r={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,i,r)),a}_addMessage(e,i=!0){super._addMessage(e,i),Nr(e)&&e.content&&this._emit("content",e.content)}}const j_=1,eS=2,tS=4,nS=8,iS=16,sS=32,oS=64,lS=128,aS=256,rS=lS|aS,uS=iS|sS|rS|oS,cS=j_|eS|uS,fS=tS|nS,b1=cS|fS,gt={STR:j_,NUM:eS,ARR:tS,OBJ:nS,NULL:iS,BOOL:sS,NAN:oS,INFINITY:lS,MINUS_INFINITY:aS,INF:rS,SPECIAL:uS,ATOM:cS,COLLECTION:fS,ALL:b1};class w1 extends Error{}class R1 extends Error{}function N1(t,e=gt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return M1(t.trim(),e)}const M1=(t,e)=>{const i=t.length;let o=0;const a=T=>{throw new w1(`${T} at position ${o}`)},r=T=>{throw new R1(`${T} at position ${o}`)},f=()=>(_(),o>=i&&a("Unexpected end of input"),t[o]==='"'?p():t[o]==="{"?y():t[o]==="["?m():t.substring(o,o+4)==="null"||gt.NULL&e&&i-o<4&&"null".startsWith(t.substring(o))?(o+=4,null):t.substring(o,o+4)==="true"||gt.BOOL&e&&i-o<4&&"true".startsWith(t.substring(o))?(o+=4,!0):t.substring(o,o+5)==="false"||gt.BOOL&e&&i-o<5&&"false".startsWith(t.substring(o))?(o+=5,!1):t.substring(o,o+8)==="Infinity"||gt.INFINITY&e&&i-o<8&&"Infinity".startsWith(t.substring(o))?(o+=8,1/0):t.substring(o,o+9)==="-Infinity"||gt.MINUS_INFINITY&e&&1<i-o&&i-o<9&&"-Infinity".startsWith(t.substring(o))?(o+=9,-1/0):t.substring(o,o+3)==="NaN"||gt.NAN&e&&i-o<3&&"NaN".startsWith(t.substring(o))?(o+=3,NaN):v()),p=()=>{const T=o;let A=!1;for(o++;o<i&&(t[o]!=='"'||A&&t[o-1]==="\\");)A=t[o]==="\\"?!A:!1,o++;if(t.charAt(o)=='"')try{return JSON.parse(t.substring(T,++o-Number(A)))}catch(x){r(String(x))}else if(gt.STR&e)try{return JSON.parse(t.substring(T,o-Number(A))+'"')}catch{return JSON.parse(t.substring(T,t.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},y=()=>{o++,_();const T={};try{for(;t[o]!=="}";){if(_(),o>=i&&gt.OBJ&e)return T;const A=p();_(),o++;try{const x=f();Object.defineProperty(T,A,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(gt.OBJ&e)return T;throw x}_(),t[o]===","&&o++}}catch{if(gt.OBJ&e)return T;a("Expected '}' at end of object")}return o++,T},m=()=>{o++;const T=[];try{for(;t[o]!=="]";)T.push(f()),_(),t[o]===","&&o++}catch{if(gt.ARR&e)return T;a("Expected ']' at end of array")}return o++,T},v=()=>{if(o===0){t==="-"&&gt.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t)}catch(A){if(gt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}r(String(A))}}const T=o;for(t[o]==="-"&&o++;t[o]&&!",]}".includes(t[o]);)o++;o==i&&!(gt.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(t.substring(T,o))}catch{t.substring(T,o)==="-"&&gt.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t.substring(T,t.lastIndexOf("e")))}catch(x){r(String(x))}}},_=()=>{for(;o<i&&` 
\r	`.includes(t[o]);)o++};return f()},Qv=t=>N1(t,gt.ALL^gt.NUM);var ct,Qn,$s,Ni,wf,sr,Rf,Nf,Mf,or,If,Zv;class Rl extends W_{constructor(e){super(),ct.add(this),Qn.set(this,void 0),$s.set(this,void 0),Ni.set(this,void 0),he(this,Qn,e),he(this,$s,[])}get currentChatCompletionSnapshot(){return O(this,Ni,"f")}static fromReadableStream(e){const i=new Rl(null);return i._run(()=>i._fromReadableStream(e)),i}static createChatCompletion(e,i,o){const a=new Rl(i);return a._run(()=>a._runChatCompletion(e,{...i,stream:!0},{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,i,o){var f;super._createChatCompletion;const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),O(this,ct,"m",wf).call(this);const r=await e.chat.completions.create({...i,stream:!0},{...o,signal:this.controller.signal});this._connected();for await(const p of r)O(this,ct,"m",Rf).call(this,p);if((f=r.controller.signal)!=null&&f.aborted)throw new dn;return this._addChatCompletion(O(this,ct,"m",or).call(this))}async _fromReadableStream(e,i){var f;const o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),O(this,ct,"m",wf).call(this),this._connected();const a=Mn.fromReadableStream(e,this.controller);let r;for await(const p of a)r&&r!==p.id&&this._addChatCompletion(O(this,ct,"m",or).call(this)),O(this,ct,"m",Rf).call(this,p),r=p.id;if((f=a.controller.signal)!=null&&f.aborted)throw new dn;return this._addChatCompletion(O(this,ct,"m",or).call(this))}[(Qn=new WeakMap,$s=new WeakMap,Ni=new WeakMap,ct=new WeakSet,wf=function(){this.ended||he(this,Ni,void 0)},sr=function(i){let o=O(this,$s,"f")[i.index];return o||(o={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},O(this,$s,"f")[i.index]=o,o)},Rf=function(i){var a,r,f,p,y,m,v,_,T,A,x,b,w,q,G;if(this.ended)return;const o=O(this,ct,"m",Zv).call(this,i);this._emit("chunk",i,o);for(const H of i.choices){const k=o.choices[H.index];H.delta.content!=null&&((a=k.message)==null?void 0:a.role)==="assistant"&&((r=k.message)!=null&&r.content)&&(this._emit("content",H.delta.content,k.message.content),this._emit("content.delta",{delta:H.delta.content,snapshot:k.message.content,parsed:k.message.parsed})),H.delta.refusal!=null&&((f=k.message)==null?void 0:f.role)==="assistant"&&((p=k.message)!=null&&p.refusal)&&this._emit("refusal.delta",{delta:H.delta.refusal,snapshot:k.message.refusal}),((y=H.logprobs)==null?void 0:y.content)!=null&&((m=k.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(v=H.logprobs)==null?void 0:v.content,snapshot:((_=k.logprobs)==null?void 0:_.content)??[]}),((T=H.logprobs)==null?void 0:T.refusal)!=null&&((A=k.message)==null?void 0:A.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(x=H.logprobs)==null?void 0:x.refusal,snapshot:((b=k.logprobs)==null?void 0:b.refusal)??[]});const L=O(this,ct,"m",sr).call(this,k);k.finish_reason&&(O(this,ct,"m",Mf).call(this,k),L.current_tool_call_index!=null&&O(this,ct,"m",Nf).call(this,k,L.current_tool_call_index));for(const Z of H.delta.tool_calls??[])L.current_tool_call_index!==Z.index&&(O(this,ct,"m",Mf).call(this,k),L.current_tool_call_index!=null&&O(this,ct,"m",Nf).call(this,k,L.current_tool_call_index)),L.current_tool_call_index=Z.index;for(const Z of H.delta.tool_calls??[]){const $=(w=k.message.tool_calls)==null?void 0:w[Z.index];$!=null&&$.type&&(($==null?void 0:$.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(q=$.function)==null?void 0:q.name,index:Z.index,arguments:$.function.arguments,parsed_arguments:$.function.parsed_arguments,arguments_delta:((G=Z.function)==null?void 0:G.arguments)??""}):($==null||$.type,void 0))}}},Nf=function(i,o){var f,p,y;if(O(this,ct,"m",sr).call(this,i).done_tool_calls.has(o))return;const r=(f=i.message.tool_calls)==null?void 0:f[o];if(!r)throw new Error("no tool call snapshot");if(!r.type)throw new Error("tool call snapshot missing `type`");if(r.type==="function"){const m=(y=(p=O(this,Qn,"f"))==null?void 0:p.tools)==null?void 0:y.find(v=>Rr(v)&&v.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:o,arguments:r.function.arguments,parsed_arguments:Ml(m)?m.$parseRaw(r.function.arguments):m!=null&&m.function.strict?JSON.parse(r.function.arguments):null})}else r.type},Mf=function(i){var a,r;const o=O(this,ct,"m",sr).call(this,i);if(i.message.content&&!o.content_done){o.content_done=!0;const f=O(this,ct,"m",If).call(this);this._emit("content.done",{content:i.message.content,parsed:f?f.$parseRaw(i.message.content):null})}i.message.refusal&&!o.refusal_done&&(o.refusal_done=!0,this._emit("refusal.done",{refusal:i.message.refusal})),(a=i.logprobs)!=null&&a.content&&!o.logprobs_content_done&&(o.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:i.logprobs.content})),(r=i.logprobs)!=null&&r.refusal&&!o.logprobs_refusal_done&&(o.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:i.logprobs.refusal}))},or=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");const i=O(this,Ni,"f");if(!i)throw new fe("request ended without sending any chunks");return he(this,Ni,void 0),he(this,$s,[]),I1(i,O(this,Qn,"f"))},If=function(){var o;const i=(o=O(this,Qn,"f"))==null?void 0:o.response_format;return Cd(i)?i:null},Zv=function(i){var o,a,r,f;let p=O(this,Ni,"f");const{choices:y,...m}=i;p?Object.assign(p,m):p=he(this,Ni,{...m,choices:[]});for(const{delta:v,finish_reason:_,index:T,logprobs:A=null,...x}of i.choices){let b=p.choices[T];if(b||(b=p.choices[T]={finish_reason:_,index:T,message:{},logprobs:A,...x}),A)if(!b.logprobs)b.logprobs=Object.assign({},A);else{const{content:Z,refusal:$,...K}=A;Object.assign(b.logprobs,K),Z&&((o=b.logprobs).content??(o.content=[]),b.logprobs.content.push(...Z)),$&&((a=b.logprobs).refusal??(a.refusal=[]),b.logprobs.refusal.push(...$))}if(_&&(b.finish_reason=_,O(this,Qn,"f")&&J_(O(this,Qn,"f")))){if(_==="length")throw new w_;if(_==="content_filter")throw new R_}if(Object.assign(b,x),!v)continue;const{content:w,refusal:q,function_call:G,role:H,tool_calls:k,...L}=v;if(Object.assign(b.message,L),q&&(b.message.refusal=(b.message.refusal||"")+q),H&&(b.message.role=H),G&&(b.message.function_call?(G.name&&(b.message.function_call.name=G.name),G.arguments&&((r=b.message.function_call).arguments??(r.arguments=""),b.message.function_call.arguments+=G.arguments)):b.message.function_call=G),w&&(b.message.content=(b.message.content||"")+w,!b.message.refusal&&O(this,ct,"m",If).call(this)&&(b.message.parsed=Qv(b.message.content))),k){b.message.tool_calls||(b.message.tool_calls=[]);for(const{index:Z,id:$,type:K,function:X,...se}of k){const le=(f=b.message.tool_calls)[Z]??(f[Z]={});Object.assign(le,se),$&&(le.id=$),K&&(le.type=K),X&&(le.function??(le.function={name:X.name??"",arguments:""})),X!=null&&X.name&&(le.function.name=X.name),X!=null&&X.arguments&&(le.function.arguments+=X.arguments,E1(O(this,Qn,"f"),le)&&(le.function.parsed_arguments=Qv(le.function.arguments)))}}}return p},Symbol.asyncIterator)](){const e=[],i=[];let o=!1;return this.on("chunk",a=>{const r=i.shift();r?r.resolve(a):e.push(a)}),this.on("end",()=>{o=!0;for(const a of i)a.resolve(void 0);i.length=0}),this.on("abort",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),this.on("error",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((r,f)=>i.push({resolve:r,reject:f})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Mn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function I1(t,e){const{id:i,choices:o,created:a,model:r,system_fingerprint:f,...p}=t,y={...p,id:i,choices:o.map(({message:m,finish_reason:v,index:_,logprobs:T,...A})=>{if(!v)throw new fe(`missing finish_reason for choice ${_}`);const{content:x=null,function_call:b,tool_calls:w,...q}=m,G=m.role;if(!G)throw new fe(`missing role for choice ${_}`);if(b){const{arguments:H,name:k}=b;if(H==null)throw new fe(`missing function_call.arguments for choice ${_}`);if(!k)throw new fe(`missing function_call.name for choice ${_}`);return{...A,message:{content:x,function_call:{arguments:H,name:k},role:G,refusal:m.refusal??null},finish_reason:v,index:_,logprobs:T}}return w?{...A,index:_,finish_reason:v,logprobs:T,message:{...q,role:G,content:x,refusal:m.refusal??null,tool_calls:w.map((H,k)=>{const{function:L,type:Z,id:$,...K}=H,{arguments:X,name:se,...le}=L||{};if($==null)throw new fe(`missing choices[${_}].tool_calls[${k}].id
${lr(t)}`);if(Z==null)throw new fe(`missing choices[${_}].tool_calls[${k}].type
${lr(t)}`);if(se==null)throw new fe(`missing choices[${_}].tool_calls[${k}].function.name
${lr(t)}`);if(X==null)throw new fe(`missing choices[${_}].tool_calls[${k}].function.arguments
${lr(t)}`);return{...K,id:$,type:Z,function:{...le,name:se,arguments:X}}})}}:{...A,message:{...q,content:x,role:G,refusal:m.refusal??null},finish_reason:v,index:_,logprobs:T}}),created:a,model:r,object:"chat.completion",...f?{system_fingerprint:f}:{}};return _1(y,e)}function lr(t){return JSON.stringify(t)}class Ur extends Rl{static fromReadableStream(e){const i=new Ur(null);return i._run(()=>i._fromReadableStream(e)),i}static runTools(e,i,o){const a=new Ur(i),r={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,i,r)),a}}let Rd=class extends ue{constructor(){super(...arguments),this.messages=new $_(this._client)}create(e,i){return this._client.post("/chat/completions",{body:e,...i,stream:e.stream??!1})}retrieve(e,i){return this._client.get(Q`/chat/completions/${e}`,i)}update(e,i,o){return this._client.post(Q`/chat/completions/${e}`,{body:i,...o})}list(e={},i){return this._client.getAPIList("/chat/completions",at,{query:e,...i})}delete(e,i){return this._client.delete(Q`/chat/completions/${e}`,i)}parse(e,i){return A1(e.tools),this._client.chat.completions.create(e,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(o=>xd(o,e))}runTools(e,i){return e.stream?Ur.runTools(this._client,e,i):wd.runTools(this._client,e,i)}stream(e,i){return Rl.createChatCompletion(this._client,e,i)}};Rd.Messages=$_;class Nd extends ue{constructor(){super(...arguments),this.completions=new Rd(this._client)}}Nd.Completions=Rd;const dS=Symbol("brand.privateNullableHeaders");function*D1(t){if(!t)return;if(dS in t){const{values:o,nulls:a}=t;yield*o.entries();for(const r of a)yield[r,null];return}let e=!1,i;t instanceof Headers?i=t.entries():Ov(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let o of i){const a=o[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const r=Ov(o[1])?o[1]:[o[1]];let f=!1;for(const p of r)p!==void 0&&(e&&!f&&(f=!0,yield[a,null]),yield[a,p])}}const ie=t=>{const e=new Headers,i=new Set;for(const o of t){const a=new Set;for(const[r,f]of D1(o)){const p=r.toLowerCase();a.has(p)||(e.delete(r),a.add(p)),f===null?(e.delete(r),i.add(p)):(e.append(r,f),i.delete(p))}}return{[dS]:!0,values:e,nulls:i}};class hS extends ue{create(e,i){return this._client.post("/audio/speech",{body:e,...i,headers:ie([{Accept:"application/octet-stream"},i==null?void 0:i.headers]),__binaryResponse:!0})}}class pS extends ue{create(e,i){return this._client.post("/audio/transcriptions",ss({body:e,...i,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class mS extends ue{create(e,i){return this._client.post("/audio/translations",ss({body:e,...i,__metadata:{model:e.model}},this._client))}}class Il extends ue{constructor(){super(...arguments),this.transcriptions=new pS(this._client),this.translations=new mS(this._client),this.speech=new hS(this._client)}}Il.Transcriptions=pS;Il.Translations=mS;Il.Speech=hS;class gS extends ue{create(e,i){return this._client.post("/batches",{body:e,...i})}retrieve(e,i){return this._client.get(Q`/batches/${e}`,i)}list(e={},i){return this._client.getAPIList("/batches",at,{query:e,...i})}cancel(e,i){return this._client.post(Q`/batches/${e}/cancel`,i)}}class yS extends ue{create(e,i){return this._client.post("/assistants",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(Q`/assistants/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,o){return this._client.post(Q`/assistants/${e}`,{body:i,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e={},i){return this._client.getAPIList("/assistants",at,{query:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(Q`/assistants/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}let vS=class extends ue{create(e,i){return this._client.post("/realtime/sessions",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}};class _S extends ue{create(e,i){return this._client.post("/realtime/transcription_sessions",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}let $r=class extends ue{constructor(){super(...arguments),this.sessions=new vS(this._client),this.transcriptionSessions=new _S(this._client)}};$r.Sessions=vS;$r.TranscriptionSessions=_S;class SS extends ue{create(e,i){return this._client.post("/chatkit/sessions",{body:e,...i,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}cancel(e,i){return this._client.post(Q`/chatkit/sessions/${e}/cancel`,{...i,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}}let TS=class extends ue{retrieve(e,i){return this._client.get(Q`/chatkit/threads/${e}`,{...i,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}list(e={},i){return this._client.getAPIList("/chatkit/threads",wr,{query:e,...i,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(Q`/chatkit/threads/${e}`,{...i,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}listItems(e,i={},o){return this._client.getAPIList(Q`/chatkit/threads/${e}/items`,wr,{query:i,...o,headers:ie([{"OpenAI-Beta":"chatkit_beta=v1"},o==null?void 0:o.headers])})}};class Jr extends ue{constructor(){super(...arguments),this.sessions=new SS(this._client),this.threads=new TS(this._client)}}Jr.Sessions=SS;Jr.Threads=TS;class ES extends ue{create(e,i,o){return this._client.post(Q`/threads/${e}/messages`,{body:i,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}retrieve(e,i,o){const{thread_id:a}=i;return this._client.get(Q`/threads/${a}/messages/${e}`,{...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}update(e,i,o){const{thread_id:a,...r}=i;return this._client.post(Q`/threads/${a}/messages/${e}`,{body:r,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,i={},o){return this._client.getAPIList(Q`/threads/${e}/messages`,at,{query:i,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}delete(e,i,o){const{thread_id:a}=i;return this._client.delete(Q`/threads/${a}/messages/${e}`,{...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}class AS extends ue{retrieve(e,i,o){const{thread_id:a,run_id:r,...f}=i;return this._client.get(Q`/threads/${a}/runs/${r}/steps/${e}`,{query:f,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,i,o){const{thread_id:a,...r}=i;return this._client.getAPIList(Q`/threads/${a}/runs/${e}/steps`,at,{query:r,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}const U1=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),i=e.length,o=new Uint8Array(i);for(let a=0;a<i;a++)o[a]=e.charCodeAt(a);return Array.from(new Float32Array(o.buffer))}};var Df={};const Js=t=>{var e,i,o,a;if(typeof globalThis.process<"u")return((e=Df==null?void 0:Df[t])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(a=(o=(i=globalThis.Deno.env)==null?void 0:i.get)==null?void 0:o.call(i,t))==null?void 0:a.trim()};var Ct,ns,ad,Nn,mr,_n,is,eo,ts,Lr,Wt,gr,yr,Cl,Tl,El,Wv,jv,e0,t0,n0,i0,s0;class xl extends bd{constructor(){super(...arguments),Ct.add(this),ad.set(this,[]),Nn.set(this,{}),mr.set(this,{}),_n.set(this,void 0),is.set(this,void 0),eo.set(this,void 0),ts.set(this,void 0),Lr.set(this,void 0),Wt.set(this,void 0),gr.set(this,void 0),yr.set(this,void 0),Cl.set(this,void 0)}[(ad=new WeakMap,Nn=new WeakMap,mr=new WeakMap,_n=new WeakMap,is=new WeakMap,eo=new WeakMap,ts=new WeakMap,Lr=new WeakMap,Wt=new WeakMap,gr=new WeakMap,yr=new WeakMap,Cl=new WeakMap,Ct=new WeakSet,Symbol.asyncIterator)](){const e=[],i=[];let o=!1;return this.on("event",a=>{const r=i.shift();r?r.resolve(a):e.push(a)}),this.on("end",()=>{o=!0;for(const a of i)a.resolve(void 0);i.length=0}),this.on("abort",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),this.on("error",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((r,f)=>i.push({resolve:r,reject:f})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const i=new ns;return i._run(()=>i._fromReadableStream(e)),i}async _fromReadableStream(e,i){var r;const o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=Mn.fromReadableStream(e,this.controller);for await(const f of a)O(this,Ct,"m",Tl).call(this,f);if((r=a.controller.signal)!=null&&r.aborted)throw new dn;return this._addRun(O(this,Ct,"m",El).call(this))}toReadableStream(){return new Mn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,i,o,a){const r=new ns;return r._run(()=>r._runToolAssistantStream(e,i,o,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createToolAssistantStream(e,i,o,a){var y;const r=a==null?void 0:a.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const f={...o,stream:!0},p=await e.submitToolOutputs(i,f,{...a,signal:this.controller.signal});this._connected();for await(const m of p)O(this,Ct,"m",Tl).call(this,m);if((y=p.controller.signal)!=null&&y.aborted)throw new dn;return this._addRun(O(this,Ct,"m",El).call(this))}static createThreadAssistantStream(e,i,o){const a=new ns;return a._run(()=>a._threadAssistantStream(e,i,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,i,o,a){const r=new ns;return r._run(()=>r._runAssistantStream(e,i,o,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),r}currentEvent(){return O(this,gr,"f")}currentRun(){return O(this,yr,"f")}currentMessageSnapshot(){return O(this,_n,"f")}currentRunStepSnapshot(){return O(this,Cl,"f")}async finalRunSteps(){return await this.done(),Object.values(O(this,Nn,"f"))}async finalMessages(){return await this.done(),Object.values(O(this,mr,"f"))}async finalRun(){if(await this.done(),!O(this,is,"f"))throw Error("Final run was not received.");return O(this,is,"f")}async _createThreadAssistantStream(e,i,o){var p;const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const r={...i,stream:!0},f=await e.createAndRun(r,{...o,signal:this.controller.signal});this._connected();for await(const y of f)O(this,Ct,"m",Tl).call(this,y);if((p=f.controller.signal)!=null&&p.aborted)throw new dn;return this._addRun(O(this,Ct,"m",El).call(this))}async _createAssistantStream(e,i,o,a){var y;const r=a==null?void 0:a.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const f={...o,stream:!0},p=await e.create(i,f,{...a,signal:this.controller.signal});this._connected();for await(const m of p)O(this,Ct,"m",Tl).call(this,m);if((y=p.controller.signal)!=null&&y.aborted)throw new dn;return this._addRun(O(this,Ct,"m",El).call(this))}static accumulateDelta(e,i){for(const[o,a]of Object.entries(i)){if(!e.hasOwnProperty(o)){e[o]=a;continue}let r=e[o];if(r==null){e[o]=a;continue}if(o==="index"||o==="type"){e[o]=a;continue}if(typeof r=="string"&&typeof a=="string")r+=a;else if(typeof r=="number"&&typeof a=="number")r+=a;else if(Cf(r)&&Cf(a))r=this.accumulateDelta(r,a);else if(Array.isArray(r)&&Array.isArray(a)){if(r.every(f=>typeof f=="string"||typeof f=="number")){r.push(...a);continue}for(const f of a){if(!Cf(f))throw new Error(`Expected array delta entry to be an object but got: ${f}`);const p=f.index;if(p==null)throw console.error(f),new Error("Expected array delta entry to have an `index` property");if(typeof p!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${p}`);const y=r[p];y==null?r.push(f):r[p]=this.accumulateDelta(y,f)}continue}else throw Error(`Unhandled record type: ${o}, deltaValue: ${a}, accValue: ${r}`);e[o]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,i,o){return await this._createThreadAssistantStream(i,e,o)}async _runAssistantStream(e,i,o,a){return await this._createAssistantStream(i,e,o,a)}async _runToolAssistantStream(e,i,o,a){return await this._createToolAssistantStream(i,e,o,a)}}ns=xl,Tl=function(e){if(!this.ended)switch(he(this,gr,e),O(this,Ct,"m",e0).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":O(this,Ct,"m",s0).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":O(this,Ct,"m",jv).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":O(this,Ct,"m",Wv).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},El=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");if(!O(this,is,"f"))throw Error("Final run has not been received");return O(this,is,"f")},Wv=function(e){const[i,o]=O(this,Ct,"m",n0).call(this,e,O(this,_n,"f"));he(this,_n,i),O(this,mr,"f")[i.id]=i;for(const a of o){const r=i.content[a.index];(r==null?void 0:r.type)=="text"&&this._emit("textCreated",r.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,i),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let r=a.text,f=i.content[a.index];if(f&&f.type=="text")this._emit("textDelta",r,f.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=O(this,eo,"f")){if(O(this,ts,"f"))switch(O(this,ts,"f").type){case"text":this._emit("textDone",O(this,ts,"f").text,O(this,_n,"f"));break;case"image_file":this._emit("imageFileDone",O(this,ts,"f").image_file,O(this,_n,"f"));break}he(this,eo,a.index)}he(this,ts,i.content[a.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(O(this,eo,"f")!==void 0){const a=e.data.content[O(this,eo,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,O(this,_n,"f"));break;case"text":this._emit("textDone",a.text,O(this,_n,"f"));break}}O(this,_n,"f")&&this._emit("messageDone",e.data),he(this,_n,void 0)}},jv=function(e){const i=O(this,Ct,"m",t0).call(this,e);switch(he(this,Cl,i),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const o=e.data.delta;if(o.step_details&&o.step_details.type=="tool_calls"&&o.step_details.tool_calls&&i.step_details.type=="tool_calls")for(const r of o.step_details.tool_calls)r.index==O(this,Lr,"f")?this._emit("toolCallDelta",r,i.step_details.tool_calls[r.index]):(O(this,Wt,"f")&&this._emit("toolCallDone",O(this,Wt,"f")),he(this,Lr,r.index),he(this,Wt,i.step_details.tool_calls[r.index]),O(this,Wt,"f")&&this._emit("toolCallCreated",O(this,Wt,"f")));this._emit("runStepDelta",e.data.delta,i);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":he(this,Cl,void 0),e.data.step_details.type=="tool_calls"&&O(this,Wt,"f")&&(this._emit("toolCallDone",O(this,Wt,"f")),he(this,Wt,void 0)),this._emit("runStepDone",e.data,i);break}},e0=function(e){O(this,ad,"f").push(e),this._emit("event",e)},t0=function(e){switch(e.event){case"thread.run.step.created":return O(this,Nn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let i=O(this,Nn,"f")[e.data.id];if(!i)throw Error("Received a RunStepDelta before creation of a snapshot");let o=e.data;if(o.delta){const a=ns.accumulateDelta(i,o.delta);O(this,Nn,"f")[e.data.id]=a}return O(this,Nn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":O(this,Nn,"f")[e.data.id]=e.data;break}if(O(this,Nn,"f")[e.data.id])return O(this,Nn,"f")[e.data.id];throw new Error("No snapshot available")},n0=function(e,i){let o=[];switch(e.event){case"thread.message.created":return[e.data,o];case"thread.message.delta":if(!i)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const r of a.delta.content)if(r.index in i.content){let f=i.content[r.index];i.content[r.index]=O(this,Ct,"m",i0).call(this,r,f)}else i.content[r.index]=r,o.push(r);return[i,o];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(i)return[i,o];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},i0=function(e,i){return ns.accumulateDelta(i,e)},s0=function(e){switch(he(this,yr,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":he(this,is,e.data),O(this,Wt,"f")&&(this._emit("toolCallDone",O(this,Wt,"f")),he(this,Wt,void 0));break}};let Md=class extends ue{constructor(){super(...arguments),this.steps=new AS(this._client)}create(e,i,o){const{include:a,...r}=i;return this._client.post(Q`/threads/${e}/runs`,{query:{include:a},body:r,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers]),stream:i.stream??!1})}retrieve(e,i,o){const{thread_id:a}=i;return this._client.get(Q`/threads/${a}/runs/${e}`,{...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}update(e,i,o){const{thread_id:a,...r}=i;return this._client.post(Q`/threads/${a}/runs/${e}`,{body:r,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,i={},o){return this._client.getAPIList(Q`/threads/${e}/runs`,at,{query:i,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}cancel(e,i,o){const{thread_id:a}=i;return this._client.post(Q`/threads/${a}/runs/${e}/cancel`,{...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async createAndPoll(e,i,o){const a=await this.create(e,i,o);return await this.poll(a.id,{thread_id:e},o)}createAndStream(e,i,o){return xl.createAssistantStream(e,this._client.beta.threads.runs,i,o)}async poll(e,i,o){var r;const a=ie([o==null?void 0:o.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=o==null?void 0:o.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const{data:f,response:p}=await this.retrieve(e,i,{...o,headers:{...o==null?void 0:o.headers,...a}}).withResponse();switch(f.status){case"queued":case"in_progress":case"cancelling":let y=5e3;if(o!=null&&o.pollIntervalMs)y=o.pollIntervalMs;else{const m=p.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await Nl(y);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return f}}}stream(e,i,o){return xl.createAssistantStream(e,this._client.beta.threads.runs,i,o)}submitToolOutputs(e,i,o){const{thread_id:a,...r}=i;return this._client.post(Q`/threads/${a}/runs/${e}/submit_tool_outputs`,{body:r,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers]),stream:i.stream??!1})}async submitToolOutputsAndPoll(e,i,o){const a=await this.submitToolOutputs(e,i,o);return await this.poll(a.id,i,o)}submitToolOutputsStream(e,i,o){return xl.createToolAssistantStream(e,this._client.beta.threads.runs,i,o)}};Md.Steps=AS;class Yr extends ue{constructor(){super(...arguments),this.runs=new Md(this._client),this.messages=new ES(this._client)}create(e={},i){return this._client.post("/threads",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(Q`/threads/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,o){return this._client.post(Q`/threads/${e}`,{body:i,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}delete(e,i){return this._client.delete(Q`/threads/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}createAndRun(e,i){return this._client.post("/threads/runs",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers]),stream:e.stream??!1})}async createAndRunPoll(e,i){const o=await this.createAndRun(e,i);return await this.runs.poll(o.id,{thread_id:o.thread_id},i)}createAndRunStream(e,i){return xl.createThreadAssistantStream(e,this._client.beta.threads,i)}}Yr.Runs=Md;Yr.Messages=ES;class lo extends ue{constructor(){super(...arguments),this.realtime=new $r(this._client),this.chatkit=new Jr(this._client),this.assistants=new yS(this._client),this.threads=new Yr(this._client)}}lo.Realtime=$r;lo.ChatKit=Jr;lo.Assistants=yS;lo.Threads=Yr;class CS extends ue{create(e,i){return this._client.post("/completions",{body:e,...i,stream:e.stream??!1})}}class xS extends ue{retrieve(e,i,o){const{container_id:a}=i;return this._client.get(Q`/containers/${a}/files/${e}/content`,{...o,headers:ie([{Accept:"application/binary"},o==null?void 0:o.headers]),__binaryResponse:!0})}}let Id=class extends ue{constructor(){super(...arguments),this.content=new xS(this._client)}create(e,i,o){return this._client.post(Q`/containers/${e}/files`,ss({body:i,...o},this._client))}retrieve(e,i,o){const{container_id:a}=i;return this._client.get(Q`/containers/${a}/files/${e}`,o)}list(e,i={},o){return this._client.getAPIList(Q`/containers/${e}/files`,at,{query:i,...o})}delete(e,i,o){const{container_id:a}=i;return this._client.delete(Q`/containers/${a}/files/${e}`,{...o,headers:ie([{Accept:"*/*"},o==null?void 0:o.headers])})}};Id.Content=xS;class Dd extends ue{constructor(){super(...arguments),this.files=new Id(this._client)}create(e,i){return this._client.post("/containers",{body:e,...i})}retrieve(e,i){return this._client.get(Q`/containers/${e}`,i)}list(e={},i){return this._client.getAPIList("/containers",at,{query:e,...i})}delete(e,i){return this._client.delete(Q`/containers/${e}`,{...i,headers:ie([{Accept:"*/*"},i==null?void 0:i.headers])})}}Dd.Files=Id;class bS extends ue{create(e,i,o){const{include:a,...r}=i;return this._client.post(Q`/conversations/${e}/items`,{query:{include:a},body:r,...o})}retrieve(e,i,o){const{conversation_id:a,...r}=i;return this._client.get(Q`/conversations/${a}/items/${e}`,{query:r,...o})}list(e,i={},o){return this._client.getAPIList(Q`/conversations/${e}/items`,wr,{query:i,...o})}delete(e,i,o){const{conversation_id:a}=i;return this._client.delete(Q`/conversations/${a}/items/${e}`,o)}}class Ud extends ue{constructor(){super(...arguments),this.items=new bS(this._client)}create(e={},i){return this._client.post("/conversations",{body:e,...i})}retrieve(e,i){return this._client.get(Q`/conversations/${e}`,i)}update(e,i,o){return this._client.post(Q`/conversations/${e}`,{body:i,...o})}delete(e,i){return this._client.delete(Q`/conversations/${e}`,i)}}Ud.Items=bS;class wS extends ue{create(e,i){const o=!!e.encoding_format;let a=o?e.encoding_format:"base64";o&&At(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const r=this._client.post("/embeddings",{body:{...e,encoding_format:a},...i});return o?r:(At(this._client).debug("embeddings/decoding base64 embeddings from base64"),r._thenUnwrap(f=>(f&&f.data&&f.data.forEach(p=>{const y=p.embedding;p.embedding=U1(y)}),f)))}}class RS extends ue{retrieve(e,i,o){const{eval_id:a,run_id:r}=i;return this._client.get(Q`/evals/${a}/runs/${r}/output_items/${e}`,o)}list(e,i,o){const{eval_id:a,...r}=i;return this._client.getAPIList(Q`/evals/${a}/runs/${e}/output_items`,at,{query:r,...o})}}class Ld extends ue{constructor(){super(...arguments),this.outputItems=new RS(this._client)}create(e,i,o){return this._client.post(Q`/evals/${e}/runs`,{body:i,...o})}retrieve(e,i,o){const{eval_id:a}=i;return this._client.get(Q`/evals/${a}/runs/${e}`,o)}list(e,i={},o){return this._client.getAPIList(Q`/evals/${e}/runs`,at,{query:i,...o})}delete(e,i,o){const{eval_id:a}=i;return this._client.delete(Q`/evals/${a}/runs/${e}`,o)}cancel(e,i,o){const{eval_id:a}=i;return this._client.post(Q`/evals/${a}/runs/${e}`,o)}}Ld.OutputItems=RS;class Od extends ue{constructor(){super(...arguments),this.runs=new Ld(this._client)}create(e,i){return this._client.post("/evals",{body:e,...i})}retrieve(e,i){return this._client.get(Q`/evals/${e}`,i)}update(e,i,o){return this._client.post(Q`/evals/${e}`,{body:i,...o})}list(e={},i){return this._client.getAPIList("/evals",at,{query:e,...i})}delete(e,i){return this._client.delete(Q`/evals/${e}`,i)}}Od.Runs=Ld;let NS=class extends ue{create(e,i){return this._client.post("/files",ss({body:e,...i},this._client))}retrieve(e,i){return this._client.get(Q`/files/${e}`,i)}list(e={},i){return this._client.getAPIList("/files",at,{query:e,...i})}delete(e,i){return this._client.delete(Q`/files/${e}`,i)}content(e,i){return this._client.get(Q`/files/${e}/content`,{...i,headers:ie([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:i=5e3,maxWait:o=1800*1e3}={}){const a=new Set(["processed","error","deleted"]),r=Date.now();let f=await this.retrieve(e);for(;!f.status||!a.has(f.status);)if(await Nl(i),f=await this.retrieve(e),Date.now()-r>o)throw new Sd({message:`Giving up on waiting for file ${e} to finish processing after ${o} milliseconds.`});return f}};class MS extends ue{}let IS=class extends ue{run(e,i){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...i})}validate(e,i){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...i})}};class Gd extends ue{constructor(){super(...arguments),this.graders=new IS(this._client)}}Gd.Graders=IS;class DS extends ue{create(e,i,o){return this._client.getAPIList(Q`/fine_tuning/checkpoints/${e}/permissions`,Fr,{body:i,method:"post",...o})}retrieve(e,i={},o){return this._client.get(Q`/fine_tuning/checkpoints/${e}/permissions`,{query:i,...o})}delete(e,i,o){const{fine_tuned_model_checkpoint:a}=i;return this._client.delete(Q`/fine_tuning/checkpoints/${a}/permissions/${e}`,o)}}let Pd=class extends ue{constructor(){super(...arguments),this.permissions=new DS(this._client)}};Pd.Permissions=DS;class US extends ue{list(e,i={},o){return this._client.getAPIList(Q`/fine_tuning/jobs/${e}/checkpoints`,at,{query:i,...o})}}class kd extends ue{constructor(){super(...arguments),this.checkpoints=new US(this._client)}create(e,i){return this._client.post("/fine_tuning/jobs",{body:e,...i})}retrieve(e,i){return this._client.get(Q`/fine_tuning/jobs/${e}`,i)}list(e={},i){return this._client.getAPIList("/fine_tuning/jobs",at,{query:e,...i})}cancel(e,i){return this._client.post(Q`/fine_tuning/jobs/${e}/cancel`,i)}listEvents(e,i={},o){return this._client.getAPIList(Q`/fine_tuning/jobs/${e}/events`,at,{query:i,...o})}pause(e,i){return this._client.post(Q`/fine_tuning/jobs/${e}/pause`,i)}resume(e,i){return this._client.post(Q`/fine_tuning/jobs/${e}/resume`,i)}}kd.Checkpoints=US;class ao extends ue{constructor(){super(...arguments),this.methods=new MS(this._client),this.jobs=new kd(this._client),this.checkpoints=new Pd(this._client),this.alpha=new Gd(this._client)}}ao.Methods=MS;ao.Jobs=kd;ao.Checkpoints=Pd;ao.Alpha=Gd;class LS extends ue{}class Hd extends ue{constructor(){super(...arguments),this.graderModels=new LS(this._client)}}Hd.GraderModels=LS;class OS extends ue{createVariation(e,i){return this._client.post("/images/variations",ss({body:e,...i},this._client))}edit(e,i){return this._client.post("/images/edits",ss({body:e,...i,stream:e.stream??!1},this._client))}generate(e,i){return this._client.post("/images/generations",{body:e,...i,stream:e.stream??!1})}}class GS extends ue{retrieve(e,i){return this._client.get(Q`/models/${e}`,i)}list(e){return this._client.getAPIList("/models",Fr,e)}delete(e,i){return this._client.delete(Q`/models/${e}`,i)}}class PS extends ue{create(e,i){return this._client.post("/moderations",{body:e,...i})}}class kS extends ue{accept(e,i,o){return this._client.post(Q`/realtime/calls/${e}/accept`,{body:i,...o,headers:ie([{Accept:"*/*"},o==null?void 0:o.headers])})}hangup(e,i){return this._client.post(Q`/realtime/calls/${e}/hangup`,{...i,headers:ie([{Accept:"*/*"},i==null?void 0:i.headers])})}refer(e,i,o){return this._client.post(Q`/realtime/calls/${e}/refer`,{body:i,...o,headers:ie([{Accept:"*/*"},o==null?void 0:o.headers])})}reject(e,i={},o){return this._client.post(Q`/realtime/calls/${e}/reject`,{body:i,...o,headers:ie([{Accept:"*/*"},o==null?void 0:o.headers])})}}class HS extends ue{create(e,i){return this._client.post("/realtime/client_secrets",{body:e,...i})}}class Kr extends ue{constructor(){super(...arguments),this.clientSecrets=new HS(this._client),this.calls=new kS(this._client)}}Kr.ClientSecrets=HS;Kr.Calls=kS;function L1(t,e){return!e||!G1(e)?{...t,output_parsed:null,output:t.output.map(i=>i.type==="function_call"?{...i,parsed_arguments:null}:i.type==="message"?{...i,content:i.content.map(o=>({...o,parsed:null}))}:i)}:qS(t,e)}function qS(t,e){const i=t.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:H1(e,a)};if(a.type==="message"){const r=a.content.map(f=>f.type==="output_text"?{...f,parsed:O1(e,f.text)}:f);return{...a,content:r}}return a}),o=Object.assign({},t,{output:i});return Object.getOwnPropertyDescriptor(t,"output_text")||rd(o),Object.defineProperty(o,"output_parsed",{enumerable:!0,get(){for(const a of o.output)if(a.type==="message"){for(const r of a.content)if(r.type==="output_text"&&r.parsed!==null)return r.parsed}return null}}),o}function O1(t,e){var i,o,a,r;return((o=(i=t.text)==null?void 0:i.format)==null?void 0:o.type)!=="json_schema"?null:"$parseRaw"in((a=t.text)==null?void 0:a.format)?((r=t.text)==null?void 0:r.format).$parseRaw(e):JSON.parse(e)}function G1(t){var e;return!!Cd((e=t.text)==null?void 0:e.format)}function P1(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function k1(t,e){return t.find(i=>i.type==="function"&&i.name===e)}function H1(t,e){const i=k1(t.tools??[],e.name);return{...e,...e,parsed_arguments:P1(i)?i.$parseRaw(e.arguments):i!=null&&i.strict?JSON.parse(e.arguments):null}}function rd(t){const e=[];for(const i of t.output)if(i.type==="message")for(const o of i.content)o.type==="output_text"&&e.push(o.text);t.output_text=e.join("")}var Ys,ar,Mi,rr,o0,l0,a0,r0;class qd extends bd{constructor(e){super(),Ys.add(this),ar.set(this,void 0),Mi.set(this,void 0),rr.set(this,void 0),he(this,ar,e)}static createResponse(e,i,o){const a=new qd(i);return a._run(()=>a._createOrRetrieveResponse(e,i,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createOrRetrieveResponse(e,i,o){var p;const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),O(this,Ys,"m",o0).call(this);let r,f=null;"response_id"in i?(r=await e.responses.retrieve(i.response_id,{stream:!0},{...o,signal:this.controller.signal,stream:!0}),f=i.starting_after??null):r=await e.responses.create({...i,stream:!0},{...o,signal:this.controller.signal}),this._connected();for await(const y of r)O(this,Ys,"m",l0).call(this,y,f);if((p=r.controller.signal)!=null&&p.aborted)throw new dn;return O(this,Ys,"m",a0).call(this)}[(ar=new WeakMap,Mi=new WeakMap,rr=new WeakMap,Ys=new WeakSet,o0=function(){this.ended||he(this,Mi,void 0)},l0=function(i,o){if(this.ended)return;const a=(f,p)=>{(o==null||p.sequence_number>o)&&this._emit(f,p)},r=O(this,Ys,"m",r0).call(this,i);switch(a("event",i),i.type){case"response.output_text.delta":{const f=r.output[i.output_index];if(!f)throw new fe(`missing output at index ${i.output_index}`);if(f.type==="message"){const p=f.content[i.content_index];if(!p)throw new fe(`missing content at index ${i.content_index}`);if(p.type!=="output_text")throw new fe(`expected content to be 'output_text', got ${p.type}`);a("response.output_text.delta",{...i,snapshot:p.text})}break}case"response.function_call_arguments.delta":{const f=r.output[i.output_index];if(!f)throw new fe(`missing output at index ${i.output_index}`);f.type==="function_call"&&a("response.function_call_arguments.delta",{...i,snapshot:f.arguments});break}default:a(i.type,i);break}},a0=function(){if(this.ended)throw new fe("stream has ended, this shouldn't happen");const i=O(this,Mi,"f");if(!i)throw new fe("request ended without sending any events");he(this,Mi,void 0);const o=q1(i,O(this,ar,"f"));return he(this,rr,o),o},r0=function(i){var a;let o=O(this,Mi,"f");if(!o){if(i.type!=="response.created")throw new fe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${i.type}`);return o=he(this,Mi,i.response),o}switch(i.type){case"response.output_item.added":{o.output.push(i.item);break}case"response.content_part.added":{const r=o.output[i.output_index];if(!r)throw new fe(`missing output at index ${i.output_index}`);const f=r.type,p=i.part;f==="message"&&p.type!=="reasoning_text"?r.content.push(p):f==="reasoning"&&p.type==="reasoning_text"&&(r.content||(r.content=[]),r.content.push(p));break}case"response.output_text.delta":{const r=o.output[i.output_index];if(!r)throw new fe(`missing output at index ${i.output_index}`);if(r.type==="message"){const f=r.content[i.content_index];if(!f)throw new fe(`missing content at index ${i.content_index}`);if(f.type!=="output_text")throw new fe(`expected content to be 'output_text', got ${f.type}`);f.text+=i.delta}break}case"response.function_call_arguments.delta":{const r=o.output[i.output_index];if(!r)throw new fe(`missing output at index ${i.output_index}`);r.type==="function_call"&&(r.arguments+=i.delta);break}case"response.reasoning_text.delta":{const r=o.output[i.output_index];if(!r)throw new fe(`missing output at index ${i.output_index}`);if(r.type==="reasoning"){const f=(a=r.content)==null?void 0:a[i.content_index];if(!f)throw new fe(`missing content at index ${i.content_index}`);if(f.type!=="reasoning_text")throw new fe(`expected content to be 'reasoning_text', got ${f.type}`);f.text+=i.delta}break}case"response.completed":{he(this,Mi,i.response);break}}return o},Symbol.asyncIterator)](){const e=[],i=[];let o=!1;return this.on("event",a=>{const r=i.shift();r?r.resolve(a):e.push(a)}),this.on("end",()=>{o=!0;for(const a of i)a.resolve(void 0);i.length=0}),this.on("abort",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),this.on("error",a=>{o=!0;for(const r of i)r.reject(a);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((r,f)=>i.push({resolve:r,reject:f})).then(r=>r?{value:r,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=O(this,rr,"f");if(!e)throw new fe("stream ended without producing a ChatCompletion");return e}}function q1(t,e){return L1(t,e)}class BS extends ue{list(e,i={},o){return this._client.getAPIList(Q`/responses/${e}/input_items`,at,{query:i,...o})}}class VS extends ue{count(e={},i){return this._client.post("/responses/input_tokens",{body:e,...i})}}class Xr extends ue{constructor(){super(...arguments),this.inputItems=new BS(this._client),this.inputTokens=new VS(this._client)}create(e,i){return this._client.post("/responses",{body:e,...i,stream:e.stream??!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&rd(o),o))}retrieve(e,i={},o){return this._client.get(Q`/responses/${e}`,{query:i,...o,stream:(i==null?void 0:i.stream)??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&rd(a),a))}delete(e,i){return this._client.delete(Q`/responses/${e}`,{...i,headers:ie([{Accept:"*/*"},i==null?void 0:i.headers])})}parse(e,i){return this._client.responses.create(e,i)._thenUnwrap(o=>qS(o,e))}stream(e,i){return qd.createResponse(this._client,e,i)}cancel(e,i){return this._client.post(Q`/responses/${e}/cancel`,i)}compact(e,i){return this._client.post("/responses/compact",{body:e,...i})}}Xr.InputItems=BS;Xr.InputTokens=VS;class zS extends ue{create(e,i,o){return this._client.post(Q`/uploads/${e}/parts`,ss({body:i,...o},this._client))}}class Bd extends ue{constructor(){super(...arguments),this.parts=new zS(this._client)}create(e,i){return this._client.post("/uploads",{body:e,...i})}cancel(e,i){return this._client.post(Q`/uploads/${e}/cancel`,i)}complete(e,i,o){return this._client.post(Q`/uploads/${e}/complete`,{body:i,...o})}}Bd.Parts=zS;const B1=async t=>{const e=await Promise.allSettled(t),i=e.filter(a=>a.status==="rejected");if(i.length){for(const a of i)console.error(a.reason);throw new Error(`${i.length} promise(s) failed - see the above errors`)}const o=[];for(const a of e)a.status==="fulfilled"&&o.push(a.value);return o};class FS extends ue{create(e,i,o){return this._client.post(Q`/vector_stores/${e}/file_batches`,{body:i,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}retrieve(e,i,o){const{vector_store_id:a}=i;return this._client.get(Q`/vector_stores/${a}/file_batches/${e}`,{...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}cancel(e,i,o){const{vector_store_id:a}=i;return this._client.post(Q`/vector_stores/${a}/file_batches/${e}/cancel`,{...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async createAndPoll(e,i,o){const a=await this.create(e,i);return await this.poll(e,a.id,o)}listFiles(e,i,o){const{vector_store_id:a,...r}=i;return this._client.getAPIList(Q`/vector_stores/${a}/file_batches/${e}/files`,at,{query:r,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async poll(e,i,o){var r;const a=ie([o==null?void 0:o.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=o==null?void 0:o.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const{data:f,response:p}=await this.retrieve(i,{vector_store_id:e},{...o,headers:a}).withResponse();switch(f.status){case"in_progress":let y=5e3;if(o!=null&&o.pollIntervalMs)y=o.pollIntervalMs;else{const m=p.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await Nl(y);break;case"failed":case"cancelled":case"completed":return f}}}async uploadAndPoll(e,{files:i,fileIds:o=[]},a){if(i==null||i.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const r=(a==null?void 0:a.maxConcurrency)??5,f=Math.min(r,i.length),p=this._client,y=i.values(),m=[...o];async function v(T){for(let A of T){const x=await p.files.create({file:A,purpose:"assistants"},a);m.push(x.id)}}const _=Array(f).fill(y).map(v);return await B1(_),await this.createAndPoll(e,{file_ids:m})}}class $S extends ue{create(e,i,o){return this._client.post(Q`/vector_stores/${e}/files`,{body:i,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}retrieve(e,i,o){const{vector_store_id:a}=i;return this._client.get(Q`/vector_stores/${a}/files/${e}`,{...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}update(e,i,o){const{vector_store_id:a,...r}=i;return this._client.post(Q`/vector_stores/${a}/files/${e}`,{body:r,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e,i={},o){return this._client.getAPIList(Q`/vector_stores/${e}/files`,at,{query:i,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}delete(e,i,o){const{vector_store_id:a}=i;return this._client.delete(Q`/vector_stores/${a}/files/${e}`,{...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}async createAndPoll(e,i,o){const a=await this.create(e,i,o);return await this.poll(e,a.id,o)}async poll(e,i,o){var r;const a=ie([o==null?void 0:o.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((r=o==null?void 0:o.pollIntervalMs)==null?void 0:r.toString())??void 0}]);for(;;){const f=await this.retrieve(i,{vector_store_id:e},{...o,headers:a}).withResponse(),p=f.data;switch(p.status){case"in_progress":let y=5e3;if(o!=null&&o.pollIntervalMs)y=o.pollIntervalMs;else{const m=f.response.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await Nl(y);break;case"failed":case"completed":return p}}}async upload(e,i,o){const a=await this._client.files.create({file:i,purpose:"assistants"},o);return this.create(e,{file_id:a.id},o)}async uploadAndPoll(e,i,o){const a=await this.upload(e,i,o);return await this.poll(e,a.id,o)}content(e,i,o){const{vector_store_id:a}=i;return this._client.getAPIList(Q`/vector_stores/${a}/files/${e}/content`,Fr,{...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}class Qr extends ue{constructor(){super(...arguments),this.files=new $S(this._client),this.fileBatches=new FS(this._client)}create(e,i){return this._client.post("/vector_stores",{body:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(Q`/vector_stores/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,o){return this._client.post(Q`/vector_stores/${e}`,{body:i,...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}list(e={},i){return this._client.getAPIList("/vector_stores",at,{query:e,...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(Q`/vector_stores/${e}`,{...i,headers:ie([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}search(e,i,o){return this._client.getAPIList(Q`/vector_stores/${e}/search`,Fr,{body:i,method:"post",...o,headers:ie([{"OpenAI-Beta":"assistants=v2"},o==null?void 0:o.headers])})}}Qr.Files=$S;Qr.FileBatches=FS;class JS extends ue{create(e,i){return this._client.post("/videos",Yv({body:e,...i},this._client))}retrieve(e,i){return this._client.get(Q`/videos/${e}`,i)}list(e={},i){return this._client.getAPIList("/videos",wr,{query:e,...i})}delete(e,i){return this._client.delete(Q`/videos/${e}`,i)}downloadContent(e,i={},o){return this._client.get(Q`/videos/${e}/content`,{query:i,...o,headers:ie([{Accept:"application/binary"},o==null?void 0:o.headers]),__binaryResponse:!0})}remix(e,i,o){return this._client.post(Q`/videos/${e}/remix`,Yv({body:i,...o},this._client))}}var Zs,YS,vr;class KS extends ue{constructor(){super(...arguments),Zs.add(this)}async unwrap(e,i,o=this._client.webhookSecret,a=300){return await this.verifySignature(e,i,o,a),JSON.parse(e)}async verifySignature(e,i,o=this._client.webhookSecret,a=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");O(this,Zs,"m",YS).call(this,o);const r=ie([i]).values,f=O(this,Zs,"m",vr).call(this,r,"webhook-signature"),p=O(this,Zs,"m",vr).call(this,r,"webhook-timestamp"),y=O(this,Zs,"m",vr).call(this,r,"webhook-id"),m=parseInt(p,10);if(isNaN(m))throw new pl("Invalid webhook timestamp format");const v=Math.floor(Date.now()/1e3);if(v-m>a)throw new pl("Webhook timestamp is too old");if(m>v+a)throw new pl("Webhook timestamp is too new");const _=f.split(" ").map(b=>b.startsWith("v1,")?b.substring(3):b),T=o.startsWith("whsec_")?Buffer.from(o.replace("whsec_",""),"base64"):Buffer.from(o,"utf-8"),A=y?`${y}.${p}.${e}`:`${p}.${e}`,x=await crypto.subtle.importKey("raw",T,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const b of _)try{const w=Buffer.from(b,"base64");if(await crypto.subtle.verify("HMAC",x,w,new TextEncoder().encode(A)))return}catch{continue}throw new pl("The given webhook signature does not match the expected signature")}}Zs=new WeakSet,YS=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},vr=function(e,i){if(!e)throw new Error("Headers are required");const o=e.get(i);if(o==null)throw new Error(`Missing required header: ${i}`);return o};var ud,Vd,_r,XS;class Se{constructor({baseURL:e=Js("OPENAI_BASE_URL"),apiKey:i=Js("OPENAI_API_KEY"),organization:o=Js("OPENAI_ORG_ID")??null,project:a=Js("OPENAI_PROJECT_ID")??null,webhookSecret:r=Js("OPENAI_WEBHOOK_SECRET")??null,...f}={}){if(ud.add(this),_r.set(this,void 0),this.completions=new CS(this),this.chat=new Nd(this),this.embeddings=new wS(this),this.files=new NS(this),this.images=new OS(this),this.audio=new Il(this),this.moderations=new PS(this),this.models=new GS(this),this.fineTuning=new ao(this),this.graders=new Hd(this),this.vectorStores=new Qr(this),this.webhooks=new KS(this),this.beta=new lo(this),this.batches=new gS(this),this.uploads=new Bd(this),this.responses=new Xr(this),this.realtime=new Kr(this),this.conversations=new Ud(this),this.evals=new Od(this),this.containers=new Dd(this),this.videos=new JS(this),i===void 0)throw new fe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const p={apiKey:i,organization:o,project:a,webhookSecret:r,...f,baseURL:e||"https://api.openai.com/v1"};if(!p.dangerouslyAllowBrowser&&zI())throw new fe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=p.baseURL,this.timeout=p.timeout??Vd.DEFAULT_TIMEOUT,this.logger=p.logger??console;const y="warn";this.logLevel=y,this.logLevel=$v(p.logLevel,"ClientOptions.logLevel",this)??$v(Js("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??y,this.fetchOptions=p.fetchOptions,this.maxRetries=p.maxRetries??2,this.fetch=p.fetch??KI(),he(this,_r,QI),this._options=p,this.apiKey=typeof i=="string"?i:"Missing Key",this.organization=o,this.project=a,this.webhookSecret=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){}async authHeaders(e){return ie([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return n1(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Xs}`}defaultIdempotencyKey(){return`stainless-node-retry-${v_()}`}makeStatusError(e,i,o,a){return xt.generate(e,i,o,a)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let i;try{i=await e()}catch(o){throw o instanceof fe?o:new fe(`Failed to get token from 'apiKey' function: ${o.message}`,{cause:o})}if(typeof i!="string"||!i)throw new fe(`Expected 'apiKey' function argument to return a string but it returned ${i}`);return this.apiKey=i,!0}buildURL(e,i,o){const a=!O(this,ud,"m",XS).call(this)&&o||this.baseURL,r=kI(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),f=this.defaultQuery();return HI(f)||(i={...f,...i}),typeof i=="object"&&i&&!Array.isArray(i)&&(r.search=this.stringifyQuery(i)),r.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:i,options:o}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,o){return this.request(Promise.resolve(o).then(a=>({method:e,path:i,...a})))}request(e,i=null){return new zr(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,o){var q,G;const a=await e,r=a.maxRetries??this.maxRetries;i==null&&(i=r),await this.prepareOptions(a);const{req:f,url:p,timeout:y}=await this.buildRequest(a,{retryCount:r-i});await this.prepareRequest(f,{url:p,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=o===void 0?"":`, retryOf: ${o}`,_=Date.now();if(At(this).debug(`[${m}] sending request`,es({retryOfRequestLogID:o,method:a.method,url:p,options:a,headers:f.headers})),(q=a.signal)!=null&&q.aborted)throw new dn;const T=new AbortController,A=await this.fetchWithTimeout(p,f,y,T).catch(Zf),x=Date.now();if(A instanceof globalThis.Error){const H=`retrying, ${i} attempts remaining`;if((G=a.signal)!=null&&G.aborted)throw new dn;const k=Qf(A)||/timed? ?out/i.test(String(A)+("cause"in A?String(A.cause):""));if(i)return At(this).info(`[${m}] connection ${k?"timed out":"failed"} - ${H}`),At(this).debug(`[${m}] connection ${k?"timed out":"failed"} (${H})`,es({retryOfRequestLogID:o,url:p,durationMs:x-_,message:A.message})),this.retryRequest(a,i,o??m);throw At(this).info(`[${m}] connection ${k?"timed out":"failed"} - error; no more retries left`),At(this).debug(`[${m}] connection ${k?"timed out":"failed"} (error; no more retries left)`,es({retryOfRequestLogID:o,url:p,durationMs:x-_,message:A.message})),k?new Sd:new Br({cause:A})}const b=[...A.headers.entries()].filter(([H])=>H==="x-request-id").map(([H,k])=>", "+H+": "+JSON.stringify(k)).join(""),w=`[${m}${v}${b}] ${f.method} ${p} ${A.ok?"succeeded":"failed"} with status ${A.status} in ${x-_}ms`;if(!A.ok){const H=await this.shouldRetry(A);if(i&&H){const X=`retrying, ${i} attempts remaining`;return await XI(A.body),At(this).info(`${w} - ${X}`),At(this).debug(`[${m}] response error (${X})`,es({retryOfRequestLogID:o,url:A.url,status:A.status,headers:A.headers,durationMs:x-_})),this.retryRequest(a,i,o??m,A.headers)}const k=H?"error; no more retries left":"error; not retryable";At(this).info(`${w} - ${k}`);const L=await A.text().catch(X=>Zf(X).message),Z=VI(L),$=Z?void 0:L;throw At(this).debug(`[${m}] response error (${k})`,es({retryOfRequestLogID:o,url:A.url,status:A.status,headers:A.headers,message:$,durationMs:Date.now()-_})),this.makeStatusError(A.status,Z,$,A.headers)}return At(this).info(w),At(this).debug(`[${m}] response start`,es({retryOfRequestLogID:o,url:A.url,status:A.status,headers:A.headers,durationMs:x-_})),{response:A,options:a,controller:T,requestLogID:m,retryOfRequestLogID:o,startTime:_}}getAPIList(e,i,o){return this.requestAPIList(i,{method:"get",path:e,...o})}requestAPIList(e,i){const o=this.makeRequest(i,null,void 0);return new f1(this,o,e)}async fetchWithTimeout(e,i,o,a){const{signal:r,method:f,...p}=i||{};r&&r.addEventListener("abort",()=>a.abort());const y=setTimeout(()=>a.abort(),o),m=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,v={signal:a.signal,...m?{duplex:"half"}:{},method:"GET",...p};f&&(v.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(y)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,o,a){let r;const f=a==null?void 0:a.get("retry-after-ms");if(f){const y=parseFloat(f);Number.isNaN(y)||(r=y)}const p=a==null?void 0:a.get("retry-after");if(p&&!r){const y=parseFloat(p);Number.isNaN(y)?r=Date.parse(p)-Date.now():r=y*1e3}if(!(r&&0<=r&&r<60*1e3)){const y=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(i,y)}return await Nl(r),this.makeRequest(e,i-1,o)}calculateDefaultRetryTimeoutMillis(e,i){const r=i-e,f=Math.min(.5*Math.pow(2,r),8),p=1-Math.random()*.25;return f*p*1e3}async buildRequest(e,{retryCount:i=0}={}){const o={...e},{method:a,path:r,query:f,defaultBaseURL:p}=o,y=this.buildURL(r,f,p);"timeout"in o&&BI("timeout",o.timeout),o.timeout=o.timeout??this.timeout;const{bodyHeaders:m,body:v}=this.buildBody({options:o}),_=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:i});return{req:{method:a,headers:_,...o.signal&&{signal:o.signal},...globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"},...v&&{body:v},...this.fetchOptions??{},...o.fetchOptions??{}},url:y,timeout:o.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:o,retryCount:a}){let r={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const f=ie([r,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...YI(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,o,e.headers]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=ie([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:I_(e)}:O(this,_r,"f").call(this,{body:e,headers:o})}}Vd=Se,_r=new WeakMap,ud=new WeakSet,XS=function(){return this.baseURL!=="https://api.openai.com/v1"};Se.OpenAI=Vd;Se.DEFAULT_TIMEOUT=6e5;Se.OpenAIError=fe;Se.APIError=xt;Se.APIConnectionError=Br;Se.APIConnectionTimeoutError=Sd;Se.APIUserAbortError=dn;Se.NotFoundError=E_;Se.ConflictError=A_;Se.RateLimitError=x_;Se.BadRequestError=__;Se.AuthenticationError=S_;Se.InternalServerError=b_;Se.PermissionDeniedError=T_;Se.UnprocessableEntityError=C_;Se.InvalidWebhookSignatureError=pl;Se.toFile=g1;Se.Completions=CS;Se.Chat=Nd;Se.Embeddings=wS;Se.Files=NS;Se.Images=OS;Se.Audio=Il;Se.Moderations=PS;Se.Models=GS;Se.FineTuning=ao;Se.Graders=Hd;Se.VectorStores=Qr;Se.Webhooks=KS;Se.Beta=lo;Se.Batches=gS;Se.Uploads=Bd;Se.Responses=Xr;Se.Realtime=Kr;Se.Conversations=Ud;Se.Evals=Od;Se.Containers=Dd;Se.Videos=JS;const u0='You should always follow the instructions and output a valid JSON object.\nThe structure of the JSON object you can found in the instructions.\n\nAnd you should always end the block with a "```" to indicate the end of the JSON object.\n\nIMPORTANT: You must output exactly one top-level JSON object inside a single fenced code block that starts with ```json and ends with ```. You must only output one such fenced code block per response, without any additional code blocks or text outside it.\n\n<instructions>\n',c0=`Output:
</instructions>

`;function V1(t){if(!t||t.trim().length===0)throw new Error("Empty response from AI");const e=/```(?:json\s*)?([\s\S]*?)```/,i=t.match(e);if(i&&i[1]){const p=i[1].trim();if(p.startsWith("{")||p.startsWith("["))return p}const o=t.trim();if(o.startsWith("{")||o.startsWith("["))return o;const a=o.indexOf("{"),r=o.indexOf("[");let f=-1;if(a!==-1&&r!==-1?f=Math.min(a,r):a!==-1?f=a:r!==-1&&(f=r),f!==-1){let p=0,y=0,m=!1,v=!1;for(let _=f;_<o.length;_++){const T=o[_];if(v){v=!1;continue}if(T==="\\"){v=!0;continue}if(T==='"'){m=!m;continue}if(!m&&(T==="{"&&p++,T==="}"&&p--,T==="["&&y++,T==="]"&&y--,p===0&&y===0&&_>f))return o.substring(f,_+1)}return o.substring(f)}throw new Error(`Could not extract valid JSON from response. Response preview: ${t.substring(0,200)}...`)}function z1(t){try{return JSON.parse(t)}catch(e){let i=t.replace(/^\uFEFF/,"").replace(/,(\s*[}\]])/g,"$1").replace(/'/g,'"').replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*/g,"").replace(/([{,]\s*)([a-zA-Z_][a-zA-Z0-9_]*)(\s*:)/g,'$1"$2"$3');try{return JSON.parse(i)}catch(o){throw new Error(`Failed to parse JSON even after repair attempts. Original error: ${e}. Repaired error: ${o}`)}}}function F1(t){const e=V1(t);return z1(e)}function $1(t,e){if(t==="openai"&&!e.openaiApiKey)throw new Error("OpenAI API Key is missing in settings.");if(t==="gemini"&&!e.geminiApiKey)throw new Error("Gemini API Key is missing (process.env.API_KEY).")}function QS(t,e=0){var o,a;const i="  ".repeat(e);if(t.type===ee.OBJECT&&t.properties){let r=`{
`;for(const[f,p]of Object.entries(t.properties)){const y=p,m=(o=t.required)!=null&&o.includes(f)?" (required)":" (optional)",v=y.enum?` Enum: ${y.enum.join(", ")}`:"";r+=`${i}  "${f}": ${y.type}${m}${v},
`}return r+=`${i}}`,r}return t.type===ee.ARRAY&&t.items?`[
${QS(t.items,e+1)}
${i}]`:((a=t.type)==null?void 0:a.toLowerCase())||"object"}const Dl=async(t,e,i)=>{var f,p,y,m;const o=(i==null?void 0:i.provider)||t.provider,a=(i==null?void 0:i.geminiApiKey)||((f=t.gemini)==null?void 0:f.apiKey),r=(i==null?void 0:i.openaiApiKey)||((p=t.openai)==null?void 0:p.apiKey);if($1(o,{geminiApiKey:a,openaiApiKey:r}),o==="gemini"){const v=a||"",_=new GI({apiKey:v}),T={systemInstruction:e.systemInstruction,...i?{temperature:i.temperature,maxOutputTokens:i.maxOutputTokens,topP:i.topP,topK:i.topK}:{}};e.jsonMode&&(T.responseMimeType="application/json",e.jsonSchema&&(T.responseSchema=e.jsonSchema));try{return(await _.models.generateContent({model:(i==null?void 0:i.geminiModel)||"gemini-2.5-flash-preview-05-20",contents:e.prompt,config:T})).text||""}catch(A){throw console.error("Gemini Error:",A),new Error(`Gemini Error: ${A.message}`)}}if(o==="openai"){const v=new Se({apiKey:r||"",baseURL:(i==null?void 0:i.openaiBaseUrl)||((y=t.openai)==null?void 0:y.baseUrl)||"https://api.openai.com/v1",dangerouslyAllowBrowser:!0}),_=e.jsonMode&&e.jsonSchema?`

Expected JSON Schema Structure:
${QS(e.jsonSchema)}

Strictly follow the structure above.`:e.jsonMode?`

Output must be a valid JSON object.`:"",T=e.jsonMode?e.systemInstruction?`${u0}${e.systemInstruction}${_}
</instructions>
${c0}`:`${u0}${_}
</instructions>
${c0}`:e.systemInstruction,A=[];T&&A.push({role:"system",content:T}),A.push({role:"user",content:e.prompt});try{const x={messages:A,model:(i==null?void 0:i.openaiModel)||((m=t.openai)==null?void 0:m.model)||"gpt-4-turbo-preview",...i?{temperature:i.temperature,max_tokens:i.maxOutputTokens,top_p:i.topP}:{}},b=await v.chat.completions.create(x);if(e.jsonMode){const w=F1(b.choices[0].message.content||"");return JSON.stringify(w)}else return b.choices[0].message.content||""}catch(x){throw console.error("OpenAI Error:",x),new Error(`OpenAI Error: ${x.message}`)}}throw new Error("Invalid Provider Configuration")};async function Zr(t,e){let i=null;for(let o=0;o<=e.maxRetries;o++)try{return await Promise.race([t(),new Promise((r,f)=>setTimeout(()=>f(new Error("Task timeout")),e.timeoutMs))])}catch(a){i=a,o<e.maxRetries&&await new Promise(r=>setTimeout(r,e.retryDelayMs))}throw i||new Error("All retries exhausted")}const J1=`
You are the **Core Logic Engine** and **Narrative Director** for "Chronicles of the Persona".
Your role is to execute the game loop:
1. **Analyze Input**: Evaluate the player's choice against the current World State, Character Stats, and **Active Rules**.
2. **Apply Rules**: Check if any active rules (like "Murphy's Law" or "Equivalent Exchange") are triggered. 
   - If a rule triggers, you MUST apply its consequence (e.g., increase Stress, remove a resource).
   - You can also decide to ADD a new rule (e.g., "Wanted by Guards") or REMOVE an old one.
3. **Generate Output**: 
   - Write the narrative (Simplified Chinese).
   - Calculate numeric changes to stats (Stress, Credibility, Connections).
   - **IMPORTANT**: Report which rules were triggered this turn via the "triggeredRules" field. Each triggered rule must include its ID, title, and a brief reason explaining WHY it triggered based on the player's action.
   - Determine if the game ends (Victory or Death).

**Current Reality Mapping (Stats):**
- **Credibility ()**: < 3 means NPCs are hostile. 0 is Game Over (Exiled).
- **Stress ()**: > 7 means hallucinations/bad decisions. 10 is Game Over (Insanity).
- **Connections ()**: Currency for help. 0 means isolation.

**Output Constraints:**
- Language: **Simplified Chinese ()** ONLY.
- Style: Dark Fantasy, Tarot aesthetics, Gritty.
- Structure: JSON matching the schema.
`,Y1={type:ee.OBJECT,properties:{text:{type:ee.STRING,description:"The narrative segment."},statUpdates:{type:ee.OBJECT,properties:{credibility:{type:ee.INTEGER,description:"Change amount, e.g., -1"},stress:{type:ee.INTEGER,description:"Change amount, e.g., +2"},connections:{type:ee.INTEGER,description:"Change amount, e.g., -1"}}},ruleUpdates:{type:ee.OBJECT,properties:{add:{type:ee.ARRAY,items:{type:ee.OBJECT,properties:{id:{type:ee.STRING},title:{type:ee.STRING},type:{type:ee.STRING,enum:["CONSTRAINT","BONUS","RISK","REALITY"]},description:{type:ee.STRING},active:{type:ee.BOOLEAN}}}},removeIds:{type:ee.ARRAY,items:{type:ee.STRING}}}},isGameOver:{type:ee.BOOLEAN},gameSummary:{type:ee.STRING,description:"Only if isGameOver is true."},triggeredRules:{type:ee.ARRAY,description:"List of rules that triggered this turn with reasons.",items:{type:ee.OBJECT,properties:{ruleId:{type:ee.STRING,description:"The ID of the triggered rule"},ruleTitle:{type:ee.STRING,description:"The title of the triggered rule"},reason:{type:ee.STRING,description:"Brief explanation of WHY this rule triggered based on the player action"}}}},choices:{type:ee.ARRAY,items:{type:ee.OBJECT,properties:{id:{type:ee.STRING},text:{type:ee.STRING},consequence:{type:ee.STRING},cost:{type:ee.STRING},risk:{type:ee.STRING}}}}}},K1=async(t,e,i,o,a,r,f,p)=>{var _,T;const y=r>=f,m=`
    [GAME STATE]
    Turn: ${r} / ${f}
    Character: ${t.name} (${t.title}) - Weakness: ${t.weakness}
    Current Stats: Credibility=${i.credibility}, Stress=${i.stress}, Connections=${i.connections}
    
    [ACTIVE RULES REGISTRY]
    ${e.map(A=>`(ID: ${A.id}) ${A.title}: ${A.description}`).join(`
`)}
    
    [NARRATIVE CONTEXT]
    Story So Far: ${a}
    **Player Action**: "${o}"
    
    [DIRECTIVES]
    1. Based on the player action and active rules, determine what happens next.
    2. Did any rule trigger? If "Murphy's Law" is active and they tried a complex plan, fail it. You MUST report ALL triggered rules in "triggeredRules" with a brief reason for each.
    3. Update Stats: Did they get hurt? (Stress +). Did they offend someone? (Credibility -).
    4. **Rule Evolution**: If the story shifts significantly, you may Add a Rule (e.g., "Injury") or Remove one.
    5. ${y?"This is the CLIMAX. Ignore choices generation. Set 'isGameOver': true and provide a 'gameSummary'.":"Generate 3 distinct choices for the next step."}
  `,v=p||{provider:"gemini",gemini:{apiKey:""}};try{const A=await Dl(v,{prompt:m,systemInstruction:J1,jsonSchema:Y1,jsonMode:!0}),x=JSON.parse(A);return{storyNode:{text:x.text||"...",choices:x.choices||[]},statUpdates:x.statUpdates||{},ruleUpdates:{add:((_=x.ruleUpdates)==null?void 0:_.add)||[],removeIds:((T=x.ruleUpdates)==null?void 0:T.removeIds)||[]},isGameOver:!!x.isGameOver,gameSummary:x.gameSummary,triggeredRules:x.triggeredRules||[]}}catch(A){return console.error("Gemini Engine Error",A),{storyNode:{text:"AI ",choices:[{id:"retry",text:"",consequence:""}]},statUpdates:{},ruleUpdates:{},isGameOver:!1}}},X1=`



1)  +  + //
2) 
3)  JSON
4)  title//
5) 


1) 
2) /()
3) 
4) ////
5) 


- 
-  150-260 
- 
`;async function Q1(t,e,i){const o=`
[]
${i.character.name}${i.character.title}
${i.character.weakness}

[]
${i.turnCount}/${i.maxTurns}

[]
${i.activeRules.map(r=>`- ${r.title}: ${r.description}`).join(`
`)}

[]
${i.historySummary}

[]
${i.choiceText}

[]


`;return{narrativeText:(await Zr(()=>Dl({provider:t.provider,gemini:t.gemini,openai:t.openai},{prompt:o,systemInstruction:X1,jsonMode:!1},e),e)).trim()}}const Z1={type:ee.OBJECT,properties:{statUpdates:{type:ee.OBJECT,properties:{credibility:{type:ee.INTEGER},stress:{type:ee.INTEGER},connections:{type:ee.INTEGER}},required:["credibility","stress","connections"]},statAnalysis:{type:ee.ARRAY,items:{type:ee.OBJECT,properties:{statKey:{type:ee.STRING,enum:["credibility","stress","connections"]},newValue:{type:ee.INTEGER},status:{type:ee.STRING,enum:["safe","warning","triggered"]},threshold:{type:ee.INTEGER},warningMessage:{type:ee.STRING},reason:{type:ee.STRING}},required:["statKey","newValue","status","warningMessage","reason"]}}},required:["statUpdates","statAnalysis"]},W1=`




- credibility<3 <5 
- stress>8 >6 
- connections<2 <4 


1) 
2)  statUpdates  [-3, +3]
3) status  newValue 
4) warningMessage  reason 
5)  JSON
`;async function j1(t,e,i){const o=`
[]
${i.character.name}${i.character.title}
${i.character.weakness}

[]
${i.choiceText}

[]
${i.narrativeText}

[]
=${i.stats.credibility}, =${i.stats.stress}, =${i.stats.connections}

[]
${i.activeRules.map(r=>`- ${r.title}: ${r.description}`).join(`
`)}

[]
 statUpdates  statAnalysis
`,a=await Zr(()=>Dl({provider:t.provider,gemini:t.gemini,openai:t.openai},{prompt:o,systemInstruction:W1,jsonSchema:Z1,jsonMode:!0},e),e);return JSON.parse(a)}const eD={type:ee.OBJECT,properties:{triggeredRules:{type:ee.ARRAY,items:{type:ee.OBJECT,properties:{ruleId:{type:ee.STRING},ruleTitle:{type:ee.STRING},reason:{type:ee.STRING}},required:["ruleId","ruleTitle","reason"]}},ruleUpdates:{type:ee.OBJECT,properties:{activate:{type:ee.ARRAY,items:{type:ee.STRING}},deactivate:{type:ee.ARRAY,items:{type:ee.STRING}},add:{type:ee.ARRAY,items:{type:ee.OBJECT}},removeIds:{type:ee.ARRAY,items:{type:ee.STRING}}},required:["activate","deactivate","add","removeIds"]},ruleStatusMap:{type:ee.OBJECT}},required:["triggeredRules","ruleUpdates","ruleStatusMap"]},tD=`




- triggered: 
- active_not_triggered: 
- inactive: 


1)  +  + 
2)  activate  deactivate
3)  add 
4) removeIds 
5) ruleStatusMap  id
6) reason 
7)  JSON
`;async function nD(t,e,i){const o=`
[]
${i.turnCount}

[]
${i.choiceText}

[]
${i.narrativeText}

[]
${i.rules.map(r=>`- id=${r.id}, title=${r.title}, active=${r.active}, desc=${r.description}`).join(`
`)}

[]
 ruleStatusMap
`,a=await Zr(()=>Dl({provider:t.provider,gemini:t.gemini,openai:t.openai},{prompt:o,systemInstruction:tD,jsonSchema:eD,jsonMode:!0},e),e);return JSON.parse(a)}const iD={type:ee.OBJECT,properties:{choices:{type:ee.ARRAY,items:{type:ee.OBJECT,properties:{id:{type:ee.STRING},text:{type:ee.STRING},consequence:{type:ee.STRING},cost:{type:ee.STRING},risk:{type:ee.STRING}},required:["id","text","consequence"]}}},required:["choices"]},sD=`



-  3 
- /
- //
- 


1) text10-30 
2) consequence
3)  cost/risk
4) 
5)  JSON
`;async function oD(t,e,i){const o=`
[]
${i.narrativeText}

[]
${i.historySummary}

[]
 3 

`,a=await Zr(()=>Dl({provider:t.provider,gemini:t.gemini,openai:t.openai},{prompt:o,systemInstruction:sD,jsonSchema:iD,jsonMode:!0},e),e);return lD(JSON.parse(a))}function lD(t){const e=[...t.choices||[]].slice(0,3);return e.some(i=>i.text.includes("")||i.text.includes("")||i.text.includes(""))||(e.length>=3?e[0]={id:e[0].id||"hold",text:"",consequence:"",risk:""}:e.push({id:"hold",text:"",consequence:"",risk:""})),{choices:e}}const f0=[{id:"retry",text:"",consequence:""},{id:"hold",text:"",consequence:"",risk:""},{id:"risk",text:"",consequence:""}];async function aD(t){var i,o,a,r,f,p;const e=t.config.tasks||fl;try{const m=(i=(await Q1(t.config.provider,e.narrative,{character:t.character,choiceText:t.choiceText,historySummary:t.historySummary,activeRules:t.rules.filter(x=>x.active),turnCount:t.turnCount,maxTurns:t.maxTurns})).narrativeText)==null?void 0:i.trim();if(!m)throw new Error("Narrative task returned empty narrative text");const[v,_,T]=await Promise.all([j1(t.config.provider,e.realityMapping,{character:t.character,choiceText:t.choiceText,narrativeText:m,stats:t.realityStats,activeRules:t.rules.filter(x=>x.active)}).catch(()=>({statUpdates:{credibility:0,stress:0,connections:0},statAnalysis:[]})),nD(t.config.provider,e.worldRules,{choiceText:t.choiceText,narrativeText:m,rules:t.rules,turnCount:t.turnCount}).catch(()=>({triggeredRules:[],ruleUpdates:{activate:[],deactivate:[],add:[],removeIds:[]},ruleStatusMap:{}})),oD(t.config.provider,e.choices,{narrativeText:m,historySummary:t.historySummary}).catch(()=>({choices:f0}))]),A=t.turnCount>=t.maxTurns;return{engineResult:{storyNode:{text:m,choices:A?[]:(o=T.choices)!=null&&o.length?T.choices:f0},statUpdates:v.statUpdates||{credibility:0,stress:0,connections:0},ruleUpdates:{add:((a=_.ruleUpdates)==null?void 0:a.add)||[],removeIds:((r=_.ruleUpdates)==null?void 0:r.removeIds)||[],activate:((f=_.ruleUpdates)==null?void 0:f.activate)||[],deactivate:((p=_.ruleUpdates)==null?void 0:p.deactivate)||[]},triggeredRules:_.triggeredRules,isGameOver:A,gameSummary:A?"":void 0},realityAnalysis:v.statAnalysis||[],ruleStatusMap:_.ruleStatusMap||{}}}catch{return{engineResult:await K1(t.character,t.rules.filter(m=>m.active),t.realityStats,t.choiceText,t.historySummary,t.turnCount,t.maxTurns,t.config.provider),realityAnalysis:[],ruleStatusMap:{}}}}const rD={credibility:"",stress:"",connections:""},uD={r2:[{statKey:"credibility",threshold:3,direction:"below",warningMessage:" NPC "},{statKey:"stress",threshold:8,direction:"above",warningMessage:""}],r3:[{statKey:"stress",threshold:null,direction:"none",warningMessage:""}],r6:[{statKey:"credibility",threshold:null,direction:"none",warningMessage:""}],r10:[{statKey:"connections",threshold:null,direction:"none",warningMessage:""}],r11:[{statKey:"stress",threshold:null,direction:"none",warningMessage:""}]},cD=(t,e)=>t.map(i=>{const o=e[i.statKey],a=i.threshold!==null?i.direction==="below"?o<i.threshold:o>i.threshold:!1;return{statKey:i.statKey,statLabel:rD[i.statKey],currentValue:o,threshold:i.threshold,direction:i.direction,isTriggered:a,warningMessage:i.warningMessage}}),fD=(t,e)=>t.map(i=>{const o=uD[i.id]??[],a=cD(o,e);return{rule:i,linkedStats:a,isAnyTriggered:a.some(r=>r.isTriggered)}}),dD=t=>{const e=new Map;return t.forEach(i=>{e.has(i.ruleId)||e.set(i.ruleId,i)}),Array.from(e.values())},hD=({activeRules:t,newStats:e,aiTriggeredRules:i})=>{const o=[...i],a=new Map(i.map(f=>[f.ruleId,f])),r=t.find(f=>f.id==="r2");return r&&!a.has("r2")&&(e.credibility<3?o.push({ruleId:"r2",ruleTitle:r.title,reason:` ${e.credibility} 3NPC `}):e.stress>8&&o.push({ruleId:"r2",ruleTitle:r.title,reason:` ${e.stress} 8`})),dD(o)},pD=()=>{const t=IA(),e=DA(),i=UA(),o=LA(),a=m0(),r=GA(),f=g0(),p=y0(),y=PA(),m=kA(),v=HA(),_=v0(),T=_0(),A=S0(),x=A0(),b=T0(),w=BA(),q=qA(),G=VA(),H=E0(),k=$A(),L=JA(),Z=YA(),$=KA(),K=XA(),X=QA(),se=ZA(),le=WA(),Ee=jA(),Oe=eC(),Le=iC(),Ye=nC(),V=oC(),W=tC(),ae=sC(),we=lC(),Ge=C0(),M=aC(),Y=rC(),j=Fe.useRef(null),[oe,me]=Fe.useState(!1),[Te,Ne]=Fe.useState(0),[dt,Qe]=Fe.useState(0),[ti,Di]=Fe.useState(null),[ro,Ui]=Fe.useState(!1),jt=Fe.useMemo(()=>fD(i,r),[i,r]),ls=Fe.useMemo(()=>new Map(jt.map(ht=>[ht.rule.id,ht])),[jt]);Fe.useEffect(()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight)},[o,a,m]),Fe.useEffect(()=>{v.length>0&&Qe(ht=>ht+1)},[v]),Fe.useEffect(()=>{t!==fn.GAMEPLAY&&Ui(!1)},[t]);const uo=ht=>{k(ht),Ge(ht.id)},Wr=()=>{e&&Y(e)},Ul=async(ht,Ze)=>{var wt,Ll;if(!e||!a)return;Ee(!0),W(!0),Ye(!0),ae(!0),we(!0);const Pe=o.map(et=>et.text).join(" ").slice(-1e3),In={provider:_,gemini:T?{apiKey:T}:void 0,openai:A};let Ke=null;try{const et=await aD({character:e,rules:i,realityStats:r,choiceText:Ze,historySummary:Pe,turnCount:f,maxTurns:p,config:{provider:In,tasks:b}});Ke=et.engineResult,Le(et.realityAnalysis),V(et.ruleStatusMap)}finally{W(!1),Ye(!1),ae(!1),we(!1),Ee(!1)}if(!Ke)return;const ni={...r},rt={...r};Ke.statUpdates.credibility&&(rt.credibility+=Ke.statUpdates.credibility),Ke.statUpdates.stress&&(rt.stress+=Ke.statUpdates.stress),Ke.statUpdates.connections&&(rt.connections+=Ke.statUpdates.connections),rt.credibility=Math.max(0,Math.min(10,rt.credibility)),rt.stress=Math.max(0,Math.min(10,rt.stress)),rt.connections=Math.max(0,Math.min(10,rt.connections));let Ut=[...i];if((wt=Ke.ruleUpdates.deactivate)!=null&&wt.length){const et=new Set(Ke.ruleUpdates.deactivate);Ut=Ut.map(Lt=>et.has(Lt.id)?{...Lt,active:!1}:Lt)}if((Ll=Ke.ruleUpdates.activate)!=null&&Ll.length){const et=new Set(Ke.ruleUpdates.activate);Ut=Ut.map(Lt=>et.has(Lt.id)?{...Lt,active:!0}:Lt)}if(Ke.ruleUpdates.removeIds&&(Ut=Ut.filter(et=>{var Lt;return!((Lt=Ke.ruleUpdates.removeIds)!=null&&Lt.includes(et.id))})),Ke.ruleUpdates.add){const et=new Set(Ut.map(si=>si.id)),Lt=Ke.ruleUpdates.add.filter(si=>!et.has(si.id));Ut=[...Ut,...Lt]}let po=Ke.isGameOver,Li=Ke.gameSummary||"";rt.stress>=10&&(po=!0,Li=Li||""),rt.credibility<=0&&(po=!0,Li=Li||"");const ii=f;X(rt),L(Ut),$(Ke.storyNode),Z(et=>[...et,Ke.storyNode]),se(f+1);const bt=hD({activeRules:Ut.filter(et=>et.active),newStats:rt,aiTriggeredRules:Ke.triggeredRules||[]});Oe(bt);const An=a.text.length>80?`${a.text.slice(0,80)}`:a.text;K(et=>[...et,{turn:ii,sceneTextPreview:An,chosenOptionText:Ze,chosenOptionId:ht,triggeredRules:bt,statSnapshot:rt,statDelta:{credibility:rt.credibility-ni.credibility,stress:rt.stress-ni.stress,connections:rt.connections-ni.connections}}]),po?(H(fn.GAME_OVER),le(Li)):(Ne(ii),me(!0))},co=()=>{M()},fo=()=>E.jsxs("div",{className:"h-screen w-full flex flex-col items-center bg-velvet-red relative overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle,transparent_20%,#000000_100%)] opacity-80 fixed"}),E.jsx("button",{onClick:()=>x(!0),className:"fixed top-6 right-6 z-30 p-4 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:E.jsx("i",{className:"fa-solid fa-cog text-xl group-hover:rotate-90 transition-transform duration-300"})}),E.jsxs("div",{className:"z-10 text-center mb-6 mt-6 shrink-0 animate-float",children:[E.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-gold-flow mb-2 drop-shadow-lg font-display",children:""}),E.jsx("p",{className:"text-paper text-base font-serif italic opacity-80 max-w-2xl mx-auto border-b border-gold pb-3",children:'""'})]}),E.jsx("div",{className:"z-20 flex flex-col items-center gap-3 mb-4 shrink-0",children:E.jsxs("button",{disabled:!e,onClick:Wr,className:`
                px-10 py-3 text-lg font-bold font-display tracking-widest uppercase transition-all duration-500
                border-2 border-gold relative overflow-hidden group shadow-2xl
                ${e?"bg-velvet-red text-gold shadow-[0_0_30px_#D4AF37] hover:scale-110":"bg-gray-900 text-gray-600 cursor-not-allowed border-gray-700"}
              `,children:[E.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e?` ${e.name}`:"",E.jsx("i",{className:"fa-solid fa-scroll"})]}),E.jsx("div",{className:"absolute inset-0 bg-gold transform -translate-x-full group-hover:translate-x-0 transition-transform duration-500 opacity-20"})]})}),E.jsx("div",{className:"z-10 flex-1 overflow-y-auto w-full px-4 pb-6",children:E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-[1600px] mx-auto",children:d0.map(ht=>E.jsx("div",{className:"flex justify-center",children:E.jsx(Qg,{character:ht,isSelected:(e==null?void 0:e.id)===ht.id,onSelect:uo})},ht.id))})})]}),ho=()=>E.jsxs("div",{className:"h-screen w-full bg-black flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-20"}),E.jsx("button",{onClick:()=>x(!0),className:"fixed top-6 right-6 z-30 p-4 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:E.jsx("i",{className:"fa-solid fa-cog text-xl group-hover:rotate-90 transition-transform duration-300"})}),E.jsxs("div",{className:"z-10 max-w-2xl text-center border-[6px] border-double border-gold p-12 bg-[#1a0f0f] shadow-[0_0_100px_rgba(139,0,0,0.5)] transform animate-fade-in-up",children:[E.jsx("h1",{className:"text-6xl font-display text-velvet-red mb-6 uppercase tracking-widest",children:f>=p?"":""}),E.jsx("div",{className:"w-full h-1 bg-gold mb-8"}),E.jsxs("div",{className:"mb-8 font-serif text-2xl text-paper italic leading-relaxed",children:['"',y||"...",'"']}),E.jsxs("div",{className:"grid grid-cols-3 gap-8 mb-12 opacity-80",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),E.jsx("span",{className:"text-gold font-display text-3xl",children:r.credibility})]}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),E.jsx("span",{className:"text-gold font-display text-3xl",children:10-r.stress})]}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),E.jsx("span",{className:"text-gold font-display text-3xl",children:f})]})]}),E.jsx("button",{onClick:co,className:"px-8 py-3 bg-gold text-black font-bold hover:bg-white transition-colors duration-300 font-display uppercase tracking-widest",children:""})]})]}),jr=()=>{if(!a)return null;const ht=Pe=>["I","II","III","IV","V","VI","VII","VIII","IX","X"][Pe-1]||Pe,Ze=new Map;return v.forEach(Pe=>Ze.set(Pe.ruleId,Pe)),E.jsxs("div",{className:"h-screen w-full bg-[#1a0505] flex flex-col md:flex-row text-paper overflow-hidden relative",children:[E.jsx("button",{onClick:()=>x(!0),className:"fixed top-6 right-6 z-30 p-3 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:E.jsx("i",{className:"fa-solid fa-cog text-lg group-hover:rotate-90 transition-transform duration-300"})}),E.jsx("div",{className:"hidden md:flex flex-col w-1/4 bg-[#0f0303] border-r-4 border-brown-600 relative shadow-2xl z-10 h-screen overflow-y-auto scrollbar-hide",children:E.jsxs("div",{className:"p-6",children:[E.jsx("h2",{className:"text-gold font-display text-xl mb-4 border-b border-brown pb-2 text-center",children:""}),e&&E.jsx("div",{className:"flex justify-center transform scale-[0.6] origin-top mb-[-120px]",children:E.jsx(Qg,{character:e,isSelected:!0})}),E.jsxs("div",{className:"mt-20",children:[E.jsxs("h2",{className:"text-gold font-display text-lg mb-3 border-b border-brown pb-2 flex items-center gap-2",children:[E.jsx("i",{className:"fa-solid fa-map text-sm"}),""]}),E.jsx(ty,{rules:i,realityStats:r,parsedMappings:jt,triggeredMap:Ze,aiAnalysis:w,loading:q})]})]})}),E.jsxs("div",{className:"flex-1 flex flex-col relative h-screen bg-paper/5",children:[E.jsxs("div",{className:"shrink-0 h-12 bg-gradient-to-b from-black to-transparent z-20 flex items-center justify-center relative",children:[E.jsxs("span",{className:"text-gold opacity-50 font-display tracking-[0.5em] text-sm",children:["ACT ",ht(f)," / ",ht(p)]}),E.jsx("button",{onClick:()=>H(fn.DECISION_MAP),className:"absolute right-16 top-1/2 -translate-y-1/2 p-2 border border-gold/60 text-gold rounded-full hover:bg-gold/10 transition-colors",title:"",children:E.jsx("i",{className:"fa-solid fa-route text-sm"})}),E.jsx("button",{onClick:()=>Ui(!0),className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 border border-gold/60 text-gold rounded-full hover:bg-gold/10 transition-colors md:hidden",title:"",children:E.jsx("i",{className:"fa-solid fa-book text-sm"})})]}),E.jsx("div",{className:"mx-4 md:hidden mt-3",children:E.jsx(ty,{rules:i,realityStats:r,parsedMappings:jt,triggeredMap:Ze,aiAnalysis:w,loading:q,isMobile:!0})}),v.length>0&&!m&&E.jsx("div",{className:"shrink-0 mx-4 md:mx-8 mb-2 p-2 bg-yellow-900/20 border border-yellow-600/40 rounded-lg",children:E.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[E.jsxs("span",{className:"text-yellow-400 text-xs font-bold flex items-center gap-1",children:[E.jsx("i",{className:"fa-solid fa-bolt text-[10px]"}),":"]}),v.map((Pe,In)=>E.jsxs("span",{className:"group relative inline-flex items-center text-xs bg-yellow-800/40 text-yellow-200 px-2 py-0.5 rounded border border-yellow-600/30 cursor-help",onMouseEnter:()=>Di(Pe.ruleId),onMouseLeave:()=>Di(null),children:[Pe.ruleTitle,E.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-[#1a0505] border border-yellow-500/50 rounded text-[10px] text-paper leading-snug opacity-0 group-hover:opacity-100 transition-opacity duration-200 delay-150 z-50 shadow-xl",children:[E.jsx("span",{className:"text-yellow-400 font-bold block mb-0.5",children:":"}),Pe.reason,E.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-[#1a0505] border-r border-b border-yellow-500/50 transform rotate-45"})]})]},In))]})}),E.jsxs("div",{ref:j,className:"flex-1 overflow-y-auto px-6 md:px-12 py-4 scrollbar-hide scroll-smooth",children:[o.slice(0,-1).map((Pe,In)=>E.jsx("div",{className:"mb-8 opacity-50 text-sm font-serif border-l-4 border-brown-600 pl-4 italic hover:opacity-100 transition-opacity",children:E.jsx("p",{children:Pe.text})},In)),E.jsxs("div",{className:"animate-fade-in-up pb-8",children:[E.jsxs("div",{className:"flex items-center justify-center mb-6 text-gold opacity-80",children:[E.jsx("div",{className:"h-[1px] w-12 bg-gold"}),E.jsx("i",{className:"fa-solid fa-diamond text-sm mx-4 animate-spin-slow"}),E.jsx("span",{className:"uppercase tracking-[0.3em] text-sm font-display",children:f===1?"":""}),E.jsx("i",{className:"fa-solid fa-diamond text-sm mx-4 animate-spin-slow"}),E.jsx("div",{className:"h-[1px] w-12 bg-gold"})]}),E.jsx("p",{className:"font-serif text-xl md:text-2xl leading-relaxed mb-8 drop-shadow-md text-justify text-paper first-letter:text-5xl first-letter:font-display first-letter:text-gold first-letter:mr-2 first-letter:float-left",children:a.text}),m?E.jsxs("div",{className:"flex flex-col justify-center items-center py-8 gap-3",children:[E.jsxs("div",{className:"relative",children:[E.jsx("i",{className:"fa-solid fa-sun fa-spin text-5xl text-gold opacity-20"}),E.jsx("i",{className:"fa-solid fa-eye absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xl text-gold animate-pulse"})]}),E.jsx("span",{className:"font-serif italic text-lg text-stone-gray animate-pulse",children:"..."}),E.jsxs("div",{className:"text-xs text-brown font-mono mt-1",children:["Checking: ",i.filter(Pe=>Pe.active).map(Pe=>Pe.title).slice(0,3).join(", "),"..."]})]}):E.jsx("div",{className:"grid gap-4 max-w-3xl mx-auto",children:a.choices.map(Pe=>E.jsxs("button",{onClick:()=>Ul(Pe.id,Pe.text),className:"group relative p-5 bg-[#2c1810] border-2 border-brown text-left hover:bg-[#3d2216] hover:border-gold transition-all duration-300 rounded-xl overflow-hidden shadow-lg",children:[E.jsx("div",{className:"absolute inset-0 bg-gold opacity-0 group-hover:opacity-5 transition-opacity"}),E.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-gold transform scale-y-0 group-hover:scale-y-100 transition-transform origin-bottom duration-300"}),E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"mt-1 text-gold opacity-50 group-hover:opacity-100",children:E.jsx("i",{className:"fa-solid fa-chevron-right"})}),E.jsxs("div",{children:[E.jsx("h4",{className:"font-bold text-lg mb-1.5 group-hover:text-gold transition-colors font-display",children:Pe.text}),E.jsxs("div",{className:"flex flex-wrap gap-3 text-sm opacity-70 font-serif",children:[Pe.cost&&E.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[E.jsx("i",{className:"fa-solid fa-coins"})," ",Pe.cost]}),Pe.risk&&E.jsxs("span",{className:"text-orange-400 flex items-center gap-1",children:[E.jsx("i",{className:"fa-solid fa-triangle-exclamation"})," ",Pe.risk]}),E.jsx("span",{className:"text-stone-gray italic border-l border-stone-gray pl-3",children:Pe.consequence})]})]})]})]},Pe.id))})]})]})]}),E.jsx(ny,{className:"hidden md:flex w-1/4 h-screen",rules:i,currentTriggeredRules:v,triggeredMap:Ze,parsedMappingMap:ls,autoTooltipToken:dt,hoveredTriggeredRuleId:ti,ruleStatusMap:G,onResetGame:M}),ro&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 md:hidden",onClick:()=>Ui(!1),"aria-hidden":"true"}),E.jsxs("div",{className:"fixed inset-x-0 bottom-0 max-h-[75vh] z-50 md:hidden bg-[#140404] border-t-4 border-brown-600 rounded-t-2xl shadow-2xl overflow-hidden",children:[E.jsxs("div",{className:"px-4 py-3 flex items-center justify-between border-b border-brown-700/60",children:[E.jsx("h3",{className:"text-gold font-display tracking-wide",children:""}),E.jsx("button",{onClick:()=>Ui(!1),className:"p-2 border border-gold/60 text-gold rounded-full hover:bg-gold/10 transition-colors",title:"",children:E.jsx("i",{className:"fa-solid fa-xmark"})})]}),E.jsx(ny,{className:"h-[calc(75vh-56px)]",contentClassName:"overflow-y-auto",rules:i,currentTriggeredRules:v,triggeredMap:Ze,parsedMappingMap:ls,autoTooltipToken:dt,hoveredTriggeredRuleId:ti,ruleStatusMap:G,onResetGame:M})]})]})]})};return E.jsxs(E.Fragment,{children:[t===fn.SELECTION&&fo(),t===fn.GAMEPLAY&&jr(),t===fn.DECISION_MAP&&E.jsx(mC,{}),t===fn.GAME_OVER&&ho(),E.jsx(gC,{isOpen:oe,turnNumber:Te,onViewDecision:()=>H(fn.DECISION_MAP),onDismiss:()=>me(!1)}),E.jsx(pC,{})]})},mD=document.getElementById("root"),gD=SA.createRoot(mD);gD.render(E.jsx(pD,{}));
