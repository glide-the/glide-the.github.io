(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(r){if(r.ep)return;r.ep=!0;const u=i(r);fetch(r.href,u)}})();function FE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jc={exports:{}},ks={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function $E(){if(Ag)return ks;Ag=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,r,u){var d=null;if(u!==void 0&&(d=""+u),r.key!==void 0&&(d=""+r.key),"key"in r){u={};for(var p in r)p!=="key"&&(u[p]=r[p])}else u=r;return r=u.ref,{$$typeof:n,type:s,key:d,ref:r!==void 0?r:null,props:u}}return ks.Fragment=e,ks.jsx=i,ks.jsxs=i,ks}var Cg;function JE(){return Cg||(Cg=1,Jc.exports=$E()),Jc.exports}var C=JE(),Yc={exports:{}},Hs={},Kc={exports:{}},Xc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function YE(){return bg||(bg=1,(function(n){function e(z,j){var le=z.length;z.push(j);e:for(;0<le;){var ge=le-1>>>1,Ne=z[ge];if(0<r(Ne,j))z[ge]=j,z[le]=Ne,le=ge;else break e}}function i(z){return z.length===0?null:z[0]}function s(z){if(z.length===0)return null;var j=z[0],le=z.pop();if(le!==j){z[0]=le;e:for(var ge=0,Ne=z.length,N=Ne>>>1;ge<N;){var Y=2*(ge+1)-1,Q=z[Y],q=Y+1,re=z[q];if(0>r(Q,le))q<Ne&&0>r(re,Q)?(z[ge]=re,z[q]=le,ge=q):(z[ge]=Q,z[Y]=le,ge=Y);else if(q<Ne&&0>r(re,le))z[ge]=re,z[q]=le,ge=q;else break e}}return j}function r(z,j){var le=z.sortIndex-j.sortIndex;return le!==0?le:z.id-j.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();n.unstable_now=function(){return d.now()-p}}var y=[],m=[],v=1,_=null,T=3,A=!1,b=!1,I=!1,x=!1,B=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function G(z){for(var j=i(m);j!==null;){if(j.callback===null)s(m);else if(j.startTime<=z)s(m),j.sortIndex=j.expirationTime,e(y,j);else break;j=i(m)}}function P(z){if(I=!1,G(z),!b)if(i(y)!==null)b=!0,W||(W=!0,Ee());else{var j=i(m);j!==null&&Ye(P,j.startTime-z)}}var W=!1,J=-1,fe=5,Z=-1;function ie(){return x?!0:!(n.unstable_now()-Z<fe)}function oe(){if(x=!1,W){var z=n.unstable_now();Z=z;var j=!0;try{e:{b=!1,I&&(I=!1,V(J),J=-1),A=!0;var le=T;try{t:{for(G(z),_=i(y);_!==null&&!(_.expirationTime>z&&ie());){var ge=_.callback;if(typeof ge=="function"){_.callback=null,T=_.priorityLevel;var Ne=ge(_.expirationTime<=z);if(z=n.unstable_now(),typeof Ne=="function"){_.callback=Ne,G(z),j=!0;break t}_===i(y)&&s(y),G(z)}else s(y);_=i(y)}if(_!==null)j=!0;else{var N=i(m);N!==null&&Ye(P,N.startTime-z),j=!1}}break e}finally{_=null,T=le,A=!1}j=void 0}}finally{j?Ee():W=!1}}}var Ee;if(typeof H=="function")Ee=function(){H(oe)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,Oe=Ge.port2;Ge.port1.onmessage=oe,Ee=function(){Oe.postMessage(null)}}else Ee=function(){B(oe,0)};function Ye(z,j){J=B(function(){z(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(z){switch(T){case 1:case 2:case 3:var j=3;break;default:j=T}var le=T;T=j;try{return z()}finally{T=le}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(z,j){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var le=T;T=z;try{return j()}finally{T=le}},n.unstable_scheduleCallback=function(z,j,le){var ge=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ge+le:ge):le=ge,z){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=le+Ne,z={id:v++,callback:j,priorityLevel:z,startTime:le,expirationTime:Ne,sortIndex:-1},le>ge?(z.sortIndex=le,e(m,z),i(y)===null&&z===i(m)&&(I?(V(J),J=-1):I=!0,Ye(P,le-ge))):(z.sortIndex=Ne,e(y,z),b||A||(b=!0,W||(W=!0,Ee()))),z},n.unstable_shouldYield=ie,n.unstable_wrapCallback=function(z){var j=T;return function(){var le=T;T=j;try{return z.apply(this,arguments)}finally{T=le}}}})(Xc)),Xc}var wg;function KE(){return wg||(wg=1,Kc.exports=YE()),Kc.exports}var Qc={exports:{}},me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function XE(){if(xg)return me;xg=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function A(N){return N===null||typeof N!="object"?null:(N=T&&N[T]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,x={};function B(N,Y,Q){this.props=N,this.context=Y,this.refs=x,this.updater=Q||b}B.prototype.isReactComponent={},B.prototype.setState=function(N,Y){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Y,"setState")},B.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function V(){}V.prototype=B.prototype;function H(N,Y,Q){this.props=N,this.context=Y,this.refs=x,this.updater=Q||b}var G=H.prototype=new V;G.constructor=H,I(G,B.prototype),G.isPureReactComponent=!0;var P=Array.isArray;function W(){}var J={H:null,A:null,T:null,S:null},fe=Object.prototype.hasOwnProperty;function Z(N,Y,Q){var q=Q.ref;return{$$typeof:n,type:N,key:Y,ref:q!==void 0?q:null,props:Q}}function ie(N,Y){return Z(N.type,Y,N.props)}function oe(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function Ee(N){var Y={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(Q){return Y[Q]})}var Ge=/\/+/g;function Oe(N,Y){return typeof N=="object"&&N!==null&&N.key!=null?Ee(""+N.key):Y.toString(36)}function Ye(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(W,W):(N.status="pending",N.then(function(Y){N.status==="pending"&&(N.status="fulfilled",N.value=Y)},function(Y){N.status==="pending"&&(N.status="rejected",N.reason=Y)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function z(N,Y,Q,q,re){var ve=typeof N;(ve==="undefined"||ve==="boolean")&&(N=null);var be=!1;if(N===null)be=!0;else switch(ve){case"bigint":case"string":case"number":be=!0;break;case"object":switch(N.$$typeof){case n:case e:be=!0;break;case v:return be=N._init,z(be(N._payload),Y,Q,q,re)}}if(be)return re=re(N),be=q===""?"."+Oe(N,0):q,P(re)?(Q="",be!=null&&(Q=be.replace(Ge,"$&/")+"/"),z(re,Y,Q,"",function($o){return $o})):re!=null&&(oe(re)&&(re=ie(re,Q+(re.key==null||N&&N.key===re.key?"":(""+re.key).replace(Ge,"$&/")+"/")+be)),Y.push(re)),1;be=0;var Ke=q===""?".":q+":";if(P(N))for(var $e=0;$e<N.length;$e++)q=N[$e],ve=Ke+Oe(q,$e),be+=z(q,Y,Q,ve,re);else if($e=A(N),typeof $e=="function")for(N=$e.call(N),$e=0;!(q=N.next()).done;)q=q.value,ve=Ke+Oe(q,$e++),be+=z(q,Y,Q,ve,re);else if(ve==="object"){if(typeof N.then=="function")return z(Ye(N),Y,Q,q,re);throw Y=String(N),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return be}function j(N,Y,Q){if(N==null)return N;var q=[],re=0;return z(N,q,"","",function(ve){return Y.call(Q,ve,re++)}),q}function le(N){if(N._status===-1){var Y=N._result;Y=Y(),Y.then(function(Q){(N._status===0||N._status===-1)&&(N._status=1,N._result=Q)},function(Q){(N._status===0||N._status===-1)&&(N._status=2,N._result=Q)}),N._status===-1&&(N._status=0,N._result=Y)}if(N._status===1)return N._result.default;throw N._result}var ge=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Ne={map:j,forEach:function(N,Y,Q){j(N,function(){Y.apply(this,arguments)},Q)},count:function(N){var Y=0;return j(N,function(){Y++}),Y},toArray:function(N){return j(N,function(Y){return Y})||[]},only:function(N){if(!oe(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return me.Activity=_,me.Children=Ne,me.Component=B,me.Fragment=i,me.Profiler=r,me.PureComponent=H,me.StrictMode=s,me.Suspense=y,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,me.__COMPILER_RUNTIME={__proto__:null,c:function(N){return J.H.useMemoCache(N)}},me.cache=function(N){return function(){return N.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(N,Y,Q){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var q=I({},N.props),re=N.key;if(Y!=null)for(ve in Y.key!==void 0&&(re=""+Y.key),Y)!fe.call(Y,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&Y.ref===void 0||(q[ve]=Y[ve]);var ve=arguments.length-2;if(ve===1)q.children=Q;else if(1<ve){for(var be=Array(ve),Ke=0;Ke<ve;Ke++)be[Ke]=arguments[Ke+2];q.children=be}return Z(N.type,re,q)},me.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},me.createElement=function(N,Y,Q){var q,re={},ve=null;if(Y!=null)for(q in Y.key!==void 0&&(ve=""+Y.key),Y)fe.call(Y,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(re[q]=Y[q]);var be=arguments.length-2;if(be===1)re.children=Q;else if(1<be){for(var Ke=Array(be),$e=0;$e<be;$e++)Ke[$e]=arguments[$e+2];re.children=Ke}if(N&&N.defaultProps)for(q in be=N.defaultProps,be)re[q]===void 0&&(re[q]=be[q]);return Z(N,ve,re)},me.createRef=function(){return{current:null}},me.forwardRef=function(N){return{$$typeof:p,render:N}},me.isValidElement=oe,me.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:le}},me.memo=function(N,Y){return{$$typeof:m,type:N,compare:Y===void 0?null:Y}},me.startTransition=function(N){var Y=J.T,Q={};J.T=Q;try{var q=N(),re=J.S;re!==null&&re(Q,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(W,ge)}catch(ve){ge(ve)}finally{Y!==null&&Q.types!==null&&(Y.types=Q.types),J.T=Y}},me.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},me.use=function(N){return J.H.use(N)},me.useActionState=function(N,Y,Q){return J.H.useActionState(N,Y,Q)},me.useCallback=function(N,Y){return J.H.useCallback(N,Y)},me.useContext=function(N){return J.H.useContext(N)},me.useDebugValue=function(){},me.useDeferredValue=function(N,Y){return J.H.useDeferredValue(N,Y)},me.useEffect=function(N,Y){return J.H.useEffect(N,Y)},me.useEffectEvent=function(N){return J.H.useEffectEvent(N)},me.useId=function(){return J.H.useId()},me.useImperativeHandle=function(N,Y,Q){return J.H.useImperativeHandle(N,Y,Q)},me.useInsertionEffect=function(N,Y){return J.H.useInsertionEffect(N,Y)},me.useLayoutEffect=function(N,Y){return J.H.useLayoutEffect(N,Y)},me.useMemo=function(N,Y){return J.H.useMemo(N,Y)},me.useOptimistic=function(N,Y){return J.H.useOptimistic(N,Y)},me.useReducer=function(N,Y,Q){return J.H.useReducer(N,Y,Q)},me.useRef=function(N){return J.H.useRef(N)},me.useState=function(N){return J.H.useState(N)},me.useSyncExternalStore=function(N,Y,Q){return J.H.useSyncExternalStore(N,Y,Q)},me.useTransition=function(){return J.H.useTransition()},me.version="19.2.4",me}var Rg;function zf(){return Rg||(Rg=1,Qc.exports=XE()),Qc.exports}var Zc={exports:{}},_t={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function QE(){if(Ng)return _t;Ng=1;var n=zf();function e(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(y,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:y,containerInfo:m,implementation:v}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return _t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,_t.createPortal=function(y,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return u(y,m,null,v)},_t.flushSync=function(y){var m=d.T,v=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=m,s.p=v,s.d.f()}},_t.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(y,m))},_t.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},_t.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:A}):v==="script"&&s.d.X(y,{crossOrigin:_,integrity:T,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},_t.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);s.d.M(y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(y)},_t.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin);s.d.L(y,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},_t.preloadModule=function(y,m){if(typeof y=="string")if(m){var v=p(m.as,m.crossOrigin);s.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(y)},_t.requestFormReset=function(y){s.d.r(y)},_t.unstable_batchedUpdates=function(y,m){return y(m)},_t.useFormState=function(y,m,v){return d.H.useFormState(y,m,v)},_t.useFormStatus=function(){return d.H.useHostTransitionStatus()},_t.version="19.2.4",_t}var Ig;function ZE(){if(Ig)return Zc.exports;Ig=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zc.exports=QE(),Zc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function WE(){if(Mg)return Hs;Mg=1;var n=KE(),e=zf(),i=ZE();function s(t){var o="https://react.dev/errors/"+t;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var o=t,l=t;if(t.alternate)for(;o.return;)o=o.return;else{t=o;do o=t,(o.flags&4098)!==0&&(l=o.return),t=o.return;while(t)}return o.tag===3?l:null}function d(t){if(t.tag===13){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function p(t){if(t.tag===31){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(s(188))}function m(t){var o=t.alternate;if(!o){if(o=u(t),o===null)throw Error(s(188));return o!==t?null:t}for(var l=t,a=o;;){var h=l.return;if(h===null)break;var g=h.alternate;if(g===null){if(a=h.return,a!==null){l=a;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===l)return y(h),t;if(g===a)return y(h),o;g=g.sibling}throw Error(s(188))}if(l.return!==a.return)l=h,a=g;else{for(var S=!1,E=h.child;E;){if(E===l){S=!0,l=h,a=g;break}if(E===a){S=!0,a=h,l=g;break}E=E.sibling}if(!S){for(E=g.child;E;){if(E===l){S=!0,l=g,a=h;break}if(E===a){S=!0,a=g,l=h;break}E=E.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==a)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?t:o}function v(t){var o=t.tag;if(o===5||o===26||o===27||o===6)return t;for(t=t.child;t!==null;){if(o=v(t),o!==null)return o;t=t.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),V=Symbol.for("react.consumer"),H=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function Ee(t){return t===null||typeof t!="object"?null:(t=oe&&t[oe]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Symbol.for("react.client.reference");function Oe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Ge?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case I:return"Fragment";case B:return"Profiler";case x:return"StrictMode";case P:return"Suspense";case W:return"SuspenseList";case Z:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case b:return"Portal";case H:return t.displayName||"Context";case V:return(t._context.displayName||"Context")+".Consumer";case G:var o=t.render;return t=t.displayName,t||(t=o.displayName||o.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J:return o=t.displayName||null,o!==null?o:Oe(t.type)||"Memo";case fe:o=t._payload,t=t._init;try{return Oe(t(o))}catch{}}return null}var Ye=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},ge=[],Ne=-1;function N(t){return{current:t}}function Y(t){0>Ne||(t.current=ge[Ne],ge[Ne]=null,Ne--)}function Q(t,o){Ne++,ge[Ne]=t.current,t.current=o}var q=N(null),re=N(null),ve=N(null),be=N(null);function Ke(t,o){switch(Q(ve,o),Q(re,t),Q(q,null),o.nodeType){case 9:case 11:t=(t=o.documentElement)&&(t=t.namespaceURI)?Jm(t):0;break;default:if(t=o.tagName,o=o.namespaceURI)o=Jm(o),t=Ym(o,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(q),Q(q,t)}function $e(){Y(q),Y(re),Y(ve)}function $o(t){t.memoizedState!==null&&Q(be,t);var o=q.current,l=Ym(o,t.type);o!==l&&(Q(re,t),Q(q,l))}function al(t){re.current===t&&(Y(q),Y(re)),be.current===t&&(Y(be),Ls._currentValue=le)}var Ra,Ed;function vi(t){if(Ra===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Ra=o&&o[1]||"",Ed=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ra+t+Ed}var Na=!1;function Ia(t,o){if(!t||Na)return"";Na=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(o){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(k){var O=k}Reflect.construct(t,[],K)}else{try{K.call()}catch(k){O=k}t.call(K.prototype)}}else{try{throw Error()}catch(k){O=k}(K=t())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(k){if(k&&O&&typeof k.stack=="string")return[k.stack,O.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=a.DetermineComponentFrameRoot(),S=g[0],E=g[1];if(S&&E){var w=S.split(`
`),U=E.split(`
`);for(h=a=0;a<w.length&&!w[a].includes("DetermineComponentFrameRoot");)a++;for(;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;if(a===w.length||h===U.length)for(a=w.length-1,h=U.length-1;1<=a&&0<=h&&w[a]!==U[h];)h--;for(;1<=a&&0<=h;a--,h--)if(w[a]!==U[h]){if(a!==1||h!==1)do if(a--,h--,0>h||w[a]!==U[h]){var F=`
`+w[a].replace(" at new "," at ");return t.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",t.displayName)),F}while(1<=a&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?vi(l):""}function TS(t,o){switch(t.tag){case 26:case 27:case 5:return vi(t.type);case 16:return vi("Lazy");case 13:return t.child!==o&&o!==null?vi("Suspense Fallback"):vi("Suspense");case 19:return vi("SuspenseList");case 0:case 15:return Ia(t.type,!1);case 11:return Ia(t.type.render,!1);case 1:return Ia(t.type,!0);case 31:return vi("Activity");default:return""}}function Ad(t){try{var o="",l=null;do o+=TS(t,l),l=t,t=t.return;while(t);return o}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Ma=Object.prototype.hasOwnProperty,Da=n.unstable_scheduleCallback,Ua=n.unstable_cancelCallback,ES=n.unstable_shouldYield,AS=n.unstable_requestPaint,Dt=n.unstable_now,CS=n.unstable_getCurrentPriorityLevel,Cd=n.unstable_ImmediatePriority,bd=n.unstable_UserBlockingPriority,ul=n.unstable_NormalPriority,bS=n.unstable_LowPriority,wd=n.unstable_IdlePriority,wS=n.log,xS=n.unstable_setDisableYieldValue,Jo=null,Ut=null;function zn(t){if(typeof wS=="function"&&xS(t),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Jo,t)}catch{}}var Lt=Math.clz32?Math.clz32:IS,RS=Math.log,NS=Math.LN2;function IS(t){return t>>>=0,t===0?32:31-(RS(t)/NS|0)|0}var cl=256,fl=262144,dl=4194304;function _i(t){var o=t&42;if(o!==0)return o;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function hl(t,o,l){var a=t.pendingLanes;if(a===0)return 0;var h=0,g=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var E=a&134217727;return E!==0?(a=E&~g,a!==0?h=_i(a):(S&=E,S!==0?h=_i(S):l||(l=E&~t,l!==0&&(h=_i(l))))):(E=a&~g,E!==0?h=_i(E):S!==0?h=_i(S):l||(l=a&~t,l!==0&&(h=_i(l)))),h===0?0:o!==0&&o!==h&&(o&g)===0&&(g=h&-h,l=o&-o,g>=l||g===32&&(l&4194048)!==0)?o:h}function Yo(t,o){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&o)===0}function MS(t,o){switch(t){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xd(){var t=dl;return dl<<=1,(dl&62914560)===0&&(dl=4194304),t}function La(t){for(var o=[],l=0;31>l;l++)o.push(t);return o}function Ko(t,o){t.pendingLanes|=o,o!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function DS(t,o,l,a,h,g){var S=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var E=t.entanglements,w=t.expirationTimes,U=t.hiddenUpdates;for(l=S&~l;0<l;){var F=31-Lt(l),K=1<<F;E[F]=0,w[F]=-1;var O=U[F];if(O!==null)for(U[F]=null,F=0;F<O.length;F++){var k=O[F];k!==null&&(k.lane&=-536870913)}l&=~K}a!==0&&Rd(t,a,0),g!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=g&~(S&~o))}function Rd(t,o,l){t.pendingLanes|=o,t.suspendedLanes&=~o;var a=31-Lt(o);t.entangledLanes|=o,t.entanglements[a]=t.entanglements[a]|1073741824|l&261930}function Nd(t,o){var l=t.entangledLanes|=o;for(t=t.entanglements;l;){var a=31-Lt(l),h=1<<a;h&o|t[a]&o&&(t[a]|=o),l&=~h}}function Id(t,o){var l=o&-o;return l=(l&42)!==0?1:Oa(l),(l&(t.suspendedLanes|o))!==0?0:l}function Oa(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ga(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Md(){var t=j.p;return t!==0?t:(t=window.event,t===void 0?32:gg(t.type))}function Dd(t,o){var l=j.p;try{return j.p=t,o()}finally{j.p=l}}var Fn=Math.random().toString(36).slice(2),ft="__reactFiber$"+Fn,Ct="__reactProps$"+Fn,Fi="__reactContainer$"+Fn,Pa="__reactEvents$"+Fn,US="__reactListeners$"+Fn,LS="__reactHandles$"+Fn,Ud="__reactResources$"+Fn,Xo="__reactMarker$"+Fn;function ka(t){delete t[ft],delete t[Ct],delete t[Pa],delete t[US],delete t[LS]}function $i(t){var o=t[ft];if(o)return o;for(var l=t.parentNode;l;){if(o=l[Fi]||l[ft]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(t=eg(t);t!==null;){if(l=t[ft])return l;t=eg(t)}return o}t=l,l=t.parentNode}return null}function Ji(t){if(t=t[ft]||t[Fi]){var o=t.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return t}return null}function Qo(t){var o=t.tag;if(o===5||o===26||o===27||o===6)return t.stateNode;throw Error(s(33))}function Yi(t){var o=t[Ud];return o||(o=t[Ud]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function rt(t){t[Xo]=!0}var Ld=new Set,Od={};function Si(t,o){Ki(t,o),Ki(t+"Capture",o)}function Ki(t,o){for(Od[t]=o,t=0;t<o.length;t++)Ld.add(o[t])}var OS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gd={},Pd={};function GS(t){return Ma.call(Pd,t)?!0:Ma.call(Gd,t)?!1:OS.test(t)?Pd[t]=!0:(Gd[t]=!0,!1)}function pl(t,o,l){if(GS(o))if(l===null)t.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(o);return;case"boolean":var a=o.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(o);return}}t.setAttribute(o,""+l)}}function ml(t,o,l){if(l===null)t.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttribute(o,""+l)}}function Sn(t,o,l,a){if(a===null)t.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(o,l,""+a)}}function $t(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kd(t){var o=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function PS(t,o,l){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,o);if(!t.hasOwnProperty(o)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,g=a.set;return Object.defineProperty(t,o,{configurable:!0,get:function(){return h.call(this)},set:function(S){l=""+S,g.call(this,S)}}),Object.defineProperty(t,o,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){t._valueTracker=null,delete t[o]}}}}function Ha(t){if(!t._valueTracker){var o=kd(t)?"checked":"value";t._valueTracker=PS(t,o,""+t[o])}}function Hd(t){if(!t)return!1;var o=t._valueTracker;if(!o)return!0;var l=o.getValue(),a="";return t&&(a=kd(t)?t.checked?"true":"false":t.value),t=a,t!==l?(o.setValue(t),!0):!1}function gl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var kS=/[\n"\\]/g;function Jt(t){return t.replace(kS,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function qa(t,o,l,a,h,g,S,E){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),o!=null?S==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+$t(o)):t.value!==""+$t(o)&&(t.value=""+$t(o)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),o!=null?Ba(t,S,$t(o)):l!=null?Ba(t,S,$t(l)):a!=null&&t.removeAttribute("value"),h==null&&g!=null&&(t.defaultChecked=!!g),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+$t(E):t.removeAttribute("name")}function qd(t,o,l,a,h,g,S,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),o!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||o!=null)){Ha(t);return}l=l!=null?""+$t(l):"",o=o!=null?""+$t(o):l,E||o===t.value||(t.value=o),t.defaultValue=o}a=a??h,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=E?t.checked:!!a,t.defaultChecked=!!a,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S),Ha(t)}function Ba(t,o,l){o==="number"&&gl(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Xi(t,o,l,a){if(t=t.options,o){o={};for(var h=0;h<l.length;h++)o["$"+l[h]]=!0;for(l=0;l<t.length;l++)h=o.hasOwnProperty("$"+t[l].value),t[l].selected!==h&&(t[l].selected=h),h&&a&&(t[l].defaultSelected=!0)}else{for(l=""+$t(l),o=null,h=0;h<t.length;h++){if(t[h].value===l){t[h].selected=!0,a&&(t[h].defaultSelected=!0);return}o!==null||t[h].disabled||(o=t[h])}o!==null&&(o.selected=!0)}}function Bd(t,o,l){if(o!=null&&(o=""+$t(o),o!==t.value&&(t.value=o),l==null)){t.defaultValue!==o&&(t.defaultValue=o);return}t.defaultValue=l!=null?""+$t(l):""}function Vd(t,o,l,a){if(o==null){if(a!=null){if(l!=null)throw Error(s(92));if(Ye(a)){if(1<a.length)throw Error(s(93));a=a[0]}l=a}l==null&&(l=""),o=l}l=$t(o),t.defaultValue=l,a=t.textContent,a===l&&a!==""&&a!==null&&(t.value=a),Ha(t)}function Qi(t,o){if(o){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=o;return}}t.textContent=o}var HS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zd(t,o,l){var a=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="":a?t.setProperty(o,l):typeof l!="number"||l===0||HS.has(o)?o==="float"?t.cssFloat=l:t[o]=(""+l).trim():t[o]=l+"px"}function Fd(t,o,l){if(o!=null&&typeof o!="object")throw Error(s(62));if(t=t.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||o!=null&&o.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var h in o)a=o[h],o.hasOwnProperty(h)&&l[h]!==a&&zd(t,h,a)}else for(var g in o)o.hasOwnProperty(g)&&zd(t,g,o[g])}function Va(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),BS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yl(t){return BS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Tn(){}var za=null;function Fa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zi=null,Wi=null;function $d(t){var o=Ji(t);if(o&&(t=o.stateNode)){var l=t[Ct]||null;e:switch(t=o.stateNode,o.type){case"input":if(qa(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Jt(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var a=l[o];if(a!==t&&a.form===t.form){var h=a[Ct]||null;if(!h)throw Error(s(90));qa(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(o=0;o<l.length;o++)a=l[o],a.form===t.form&&Hd(a)}break e;case"textarea":Bd(t,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Xi(t,!!l.multiple,o,!1)}}}var $a=!1;function Jd(t,o,l){if($a)return t(o,l);$a=!0;try{var a=t(o);return a}finally{if($a=!1,(Zi!==null||Wi!==null)&&(or(),Zi&&(o=Zi,t=Wi,Wi=Zi=null,$d(o),t)))for(o=0;o<t.length;o++)$d(t[o])}}function Zo(t,o){var l=t.stateNode;if(l===null)return null;var a=l[Ct]||null;if(a===null)return null;l=a[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(s(231,o,typeof l));return l}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ja=!1;if(En)try{var Wo={};Object.defineProperty(Wo,"passive",{get:function(){Ja=!0}}),window.addEventListener("test",Wo,Wo),window.removeEventListener("test",Wo,Wo)}catch{Ja=!1}var $n=null,Ya=null,vl=null;function Yd(){if(vl)return vl;var t,o=Ya,l=o.length,a,h="value"in $n?$n.value:$n.textContent,g=h.length;for(t=0;t<l&&o[t]===h[t];t++);var S=l-t;for(a=1;a<=S&&o[l-a]===h[g-a];a++);return vl=h.slice(t,1<a?1-a:void 0)}function _l(t){var o=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&o===13&&(t=13)):t=o,t===10&&(t=13),32<=t||t===13?t:0}function Sl(){return!0}function Kd(){return!1}function bt(t){function o(l,a,h,g,S){this._reactName=l,this._targetInst=h,this.type=a,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(l=t[E],this[E]=l?l(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Sl:Kd,this.isPropagationStopped=Kd,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),o}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tl=bt(Ti),jo=_({},Ti,{view:0,detail:0}),VS=bt(jo),Ka,Xa,es,El=_({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Za,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==es&&(es&&t.type==="mousemove"?(Ka=t.screenX-es.screenX,Xa=t.screenY-es.screenY):Xa=Ka=0,es=t),Ka)},movementY:function(t){return"movementY"in t?t.movementY:Xa}}),Xd=bt(El),zS=_({},El,{dataTransfer:0}),FS=bt(zS),$S=_({},jo,{relatedTarget:0}),Qa=bt($S),JS=_({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),YS=bt(JS),KS=_({},Ti,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XS=bt(KS),QS=_({},Ti,{data:0}),Qd=bt(QS),ZS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eT(t){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(t):(t=jS[t])?!!o[t]:!1}function Za(){return eT}var tT=_({},jo,{key:function(t){if(t.key){var o=ZS[t.key]||t.key;if(o!=="Unidentified")return o}return t.type==="keypress"?(t=_l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Za,charCode:function(t){return t.type==="keypress"?_l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nT=bt(tT),iT=_({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zd=bt(iT),oT=_({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Za}),sT=bt(oT),lT=_({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),rT=bt(lT),aT=_({},El,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uT=bt(aT),cT=_({},Ti,{newState:0,oldState:0}),fT=bt(cT),dT=[9,13,27,32],Wa=En&&"CompositionEvent"in window,ts=null;En&&"documentMode"in document&&(ts=document.documentMode);var hT=En&&"TextEvent"in window&&!ts,Wd=En&&(!Wa||ts&&8<ts&&11>=ts),jd=" ",eh=!1;function th(t,o){switch(t){case"keyup":return dT.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ji=!1;function pT(t,o){switch(t){case"compositionend":return nh(o);case"keypress":return o.which!==32?null:(eh=!0,jd);case"textInput":return t=o.data,t===jd&&eh?null:t;default:return null}}function mT(t,o){if(ji)return t==="compositionend"||!Wa&&th(t,o)?(t=Yd(),vl=Ya=$n=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Wd&&o.locale!=="ko"?null:o.data;default:return null}}var gT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ih(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o==="input"?!!gT[t.type]:o==="textarea"}function oh(t,o,l,a){Zi?Wi?Wi.push(a):Wi=[a]:Zi=a,o=fr(o,"onChange"),0<o.length&&(l=new Tl("onChange","change",null,l,a),t.push({event:l,listeners:o}))}var ns=null,is=null;function yT(t){qm(t,0)}function Al(t){var o=Qo(t);if(Hd(o))return t}function sh(t,o){if(t==="change")return o}var lh=!1;if(En){var ja;if(En){var eu="oninput"in document;if(!eu){var rh=document.createElement("div");rh.setAttribute("oninput","return;"),eu=typeof rh.oninput=="function"}ja=eu}else ja=!1;lh=ja&&(!document.documentMode||9<document.documentMode)}function ah(){ns&&(ns.detachEvent("onpropertychange",uh),is=ns=null)}function uh(t){if(t.propertyName==="value"&&Al(is)){var o=[];oh(o,is,t,Fa(t)),Jd(yT,o)}}function vT(t,o,l){t==="focusin"?(ah(),ns=o,is=l,ns.attachEvent("onpropertychange",uh)):t==="focusout"&&ah()}function _T(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Al(is)}function ST(t,o){if(t==="click")return Al(o)}function TT(t,o){if(t==="input"||t==="change")return Al(o)}function ET(t,o){return t===o&&(t!==0||1/t===1/o)||t!==t&&o!==o}var Ot=typeof Object.is=="function"?Object.is:ET;function os(t,o){if(Ot(t,o))return!0;if(typeof t!="object"||t===null||typeof o!="object"||o===null)return!1;var l=Object.keys(t),a=Object.keys(o);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var h=l[a];if(!Ma.call(o,h)||!Ot(t[h],o[h]))return!1}return!0}function ch(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fh(t,o){var l=ch(t);t=0;for(var a;l;){if(l.nodeType===3){if(a=t+l.textContent.length,t<=o&&a>=o)return{node:l,offset:o-t};t=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ch(l)}}function dh(t,o){return t&&o?t===o?!0:t&&t.nodeType===3?!1:o&&o.nodeType===3?dh(t,o.parentNode):"contains"in t?t.contains(o):t.compareDocumentPosition?!!(t.compareDocumentPosition(o)&16):!1:!1}function hh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var o=gl(t.document);o instanceof t.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)t=o.contentWindow;else break;o=gl(t.document)}return o}function tu(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o&&(o==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||o==="textarea"||t.contentEditable==="true")}var AT=En&&"documentMode"in document&&11>=document.documentMode,eo=null,nu=null,ss=null,iu=!1;function ph(t,o,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;iu||eo==null||eo!==gl(a)||(a=eo,"selectionStart"in a&&tu(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ss&&os(ss,a)||(ss=a,a=fr(nu,"onSelect"),0<a.length&&(o=new Tl("onSelect","select",null,o,l),t.push({event:o,listeners:a}),o.target=eo)))}function Ei(t,o){var l={};return l[t.toLowerCase()]=o.toLowerCase(),l["Webkit"+t]="webkit"+o,l["Moz"+t]="moz"+o,l}var to={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionrun:Ei("Transition","TransitionRun"),transitionstart:Ei("Transition","TransitionStart"),transitioncancel:Ei("Transition","TransitionCancel"),transitionend:Ei("Transition","TransitionEnd")},ou={},mh={};En&&(mh=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function Ai(t){if(ou[t])return ou[t];if(!to[t])return t;var o=to[t],l;for(l in o)if(o.hasOwnProperty(l)&&l in mh)return ou[t]=o[l];return t}var gh=Ai("animationend"),yh=Ai("animationiteration"),vh=Ai("animationstart"),CT=Ai("transitionrun"),bT=Ai("transitionstart"),wT=Ai("transitioncancel"),_h=Ai("transitionend"),Sh=new Map,su="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");su.push("scrollEnd");function ln(t,o){Sh.set(t,o),Si(o,[t])}var Cl=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Yt=[],no=0,lu=0;function bl(){for(var t=no,o=lu=no=0;o<t;){var l=Yt[o];Yt[o++]=null;var a=Yt[o];Yt[o++]=null;var h=Yt[o];Yt[o++]=null;var g=Yt[o];if(Yt[o++]=null,a!==null&&h!==null){var S=a.pending;S===null?h.next=h:(h.next=S.next,S.next=h),a.pending=h}g!==0&&Th(l,h,g)}}function wl(t,o,l,a){Yt[no++]=t,Yt[no++]=o,Yt[no++]=l,Yt[no++]=a,lu|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function ru(t,o,l,a){return wl(t,o,l,a),xl(t)}function Ci(t,o){return wl(t,null,null,o),xl(t)}function Th(t,o,l){t.lanes|=l;var a=t.alternate;a!==null&&(a.lanes|=l);for(var h=!1,g=t.return;g!==null;)g.childLanes|=l,a=g.alternate,a!==null&&(a.childLanes|=l),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(h=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,h&&o!==null&&(h=31-Lt(l),t=g.hiddenUpdates,a=t[h],a===null?t[h]=[o]:a.push(o),o.lane=l|536870912),g):null}function xl(t){if(50<xs)throw xs=0,gc=null,Error(s(185));for(var o=t.return;o!==null;)t=o,o=t.return;return t.tag===3?t.stateNode:null}var io={};function xT(t,o,l,a){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,o,l,a){return new xT(t,o,l,a)}function au(t){return t=t.prototype,!(!t||!t.isReactComponent)}function An(t,o){var l=t.alternate;return l===null?(l=Gt(t.tag,o,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=o,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,o=t.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Eh(t,o){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=o,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,o=l.dependencies,t.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),t}function Rl(t,o,l,a,h,g){var S=0;if(a=t,typeof t=="function")au(t)&&(S=1);else if(typeof t=="string")S=DE(t,l,q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Z:return t=Gt(31,l,o,h),t.elementType=Z,t.lanes=g,t;case I:return bi(l.children,h,g,o);case x:S=8,h|=24;break;case B:return t=Gt(12,l,o,h|2),t.elementType=B,t.lanes=g,t;case P:return t=Gt(13,l,o,h),t.elementType=P,t.lanes=g,t;case W:return t=Gt(19,l,o,h),t.elementType=W,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case H:S=10;break e;case V:S=9;break e;case G:S=11;break e;case J:S=14;break e;case fe:S=16,a=null;break e}S=29,l=Error(s(130,t===null?"null":typeof t,"")),a=null}return o=Gt(S,l,o,h),o.elementType=t,o.type=a,o.lanes=g,o}function bi(t,o,l,a){return t=Gt(7,t,a,o),t.lanes=l,t}function uu(t,o,l){return t=Gt(6,t,null,o),t.lanes=l,t}function Ah(t){var o=Gt(18,null,null,0);return o.stateNode=t,o}function cu(t,o,l){return o=Gt(4,t.children!==null?t.children:[],t.key,o),o.lanes=l,o.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},o}var Ch=new WeakMap;function Kt(t,o){if(typeof t=="object"&&t!==null){var l=Ch.get(t);return l!==void 0?l:(o={value:t,source:o,stack:Ad(o)},Ch.set(t,o),o)}return{value:t,source:o,stack:Ad(o)}}var oo=[],so=0,Nl=null,ls=0,Xt=[],Qt=0,Jn=null,hn=1,pn="";function Cn(t,o){oo[so++]=ls,oo[so++]=Nl,Nl=t,ls=o}function bh(t,o,l){Xt[Qt++]=hn,Xt[Qt++]=pn,Xt[Qt++]=Jn,Jn=t;var a=hn;t=pn;var h=32-Lt(a)-1;a&=~(1<<h),l+=1;var g=32-Lt(o)+h;if(30<g){var S=h-h%5;g=(a&(1<<S)-1).toString(32),a>>=S,h-=S,hn=1<<32-Lt(o)+h|l<<h|a,pn=g+t}else hn=1<<g|l<<h|a,pn=t}function fu(t){t.return!==null&&(Cn(t,1),bh(t,1,0))}function du(t){for(;t===Nl;)Nl=oo[--so],oo[so]=null,ls=oo[--so],oo[so]=null;for(;t===Jn;)Jn=Xt[--Qt],Xt[Qt]=null,pn=Xt[--Qt],Xt[Qt]=null,hn=Xt[--Qt],Xt[Qt]=null}function wh(t,o){Xt[Qt++]=hn,Xt[Qt++]=pn,Xt[Qt++]=Jn,hn=o.id,pn=o.overflow,Jn=t}var dt=null,ze=null,Re=!1,Yn=null,Zt=!1,hu=Error(s(519));function Kn(t){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rs(Kt(o,t)),hu}function xh(t){var o=t.stateNode,l=t.type,a=t.memoizedProps;switch(o[ft]=t,o[Ct]=a,l){case"dialog":Ce("cancel",o),Ce("close",o);break;case"iframe":case"object":case"embed":Ce("load",o);break;case"video":case"audio":for(l=0;l<Ns.length;l++)Ce(Ns[l],o);break;case"source":Ce("error",o);break;case"img":case"image":case"link":Ce("error",o),Ce("load",o);break;case"details":Ce("toggle",o);break;case"input":Ce("invalid",o),qd(o,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Ce("invalid",o);break;case"textarea":Ce("invalid",o),Vd(o,a.value,a.defaultValue,a.children)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||a.suppressHydrationWarning===!0||Fm(o.textContent,l)?(a.popover!=null&&(Ce("beforetoggle",o),Ce("toggle",o)),a.onScroll!=null&&Ce("scroll",o),a.onScrollEnd!=null&&Ce("scrollend",o),a.onClick!=null&&(o.onclick=Tn),o=!0):o=!1,o||Kn(t,!0)}function Rh(t){for(dt=t.return;dt;)switch(dt.tag){case 5:case 31:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:dt=dt.return}}function lo(t){if(t!==dt)return!1;if(!Re)return Rh(t),Re=!0,!1;var o=t.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Mc(t.type,t.memoizedProps)),l=!l),l&&ze&&Kn(t),Rh(t),o===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ze=jm(t)}else if(o===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ze=jm(t)}else o===27?(o=ze,ai(t.type)?(t=Gc,Gc=null,ze=t):ze=o):ze=dt?jt(t.stateNode.nextSibling):null;return!0}function wi(){ze=dt=null,Re=!1}function pu(){var t=Yn;return t!==null&&(Nt===null?Nt=t:Nt.push.apply(Nt,t),Yn=null),t}function rs(t){Yn===null?Yn=[t]:Yn.push(t)}var mu=N(null),xi=null,bn=null;function Xn(t,o,l){Q(mu,o._currentValue),o._currentValue=l}function wn(t){t._currentValue=mu.current,Y(mu)}function gu(t,o,l){for(;t!==null;){var a=t.alternate;if((t.childLanes&o)!==o?(t.childLanes|=o,a!==null&&(a.childLanes|=o)):a!==null&&(a.childLanes&o)!==o&&(a.childLanes|=o),t===l)break;t=t.return}}function yu(t,o,l,a){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var g=h.dependencies;if(g!==null){var S=h.child;g=g.firstContext;e:for(;g!==null;){var E=g;g=h;for(var w=0;w<o.length;w++)if(E.context===o[w]){g.lanes|=l,E=g.alternate,E!==null&&(E.lanes|=l),gu(g.return,l,t),a||(S=null);break e}g=E.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(s(341));S.lanes|=l,g=S.alternate,g!==null&&(g.lanes|=l),gu(S,l,t),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===t){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function ro(t,o,l,a){t=null;for(var h=o,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var E=h.type;Ot(h.pendingProps.value,S.value)||(t!==null?t.push(E):t=[E])}}else if(h===be.current){if(S=h.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Ls):t=[Ls])}h=h.return}t!==null&&yu(o,t,l,a),o.flags|=262144}function Il(t){for(t=t.firstContext;t!==null;){if(!Ot(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ri(t){xi=t,bn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ht(t){return Nh(xi,t)}function Ml(t,o){return xi===null&&Ri(t),Nh(t,o)}function Nh(t,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},bn===null){if(t===null)throw Error(s(308));bn=o,t.dependencies={lanes:0,firstContext:o},t.flags|=524288}else bn=bn.next=o;return l}var RT=typeof AbortController<"u"?AbortController:function(){var t=[],o=this.signal={aborted:!1,addEventListener:function(l,a){t.push(a)}};this.abort=function(){o.aborted=!0,t.forEach(function(l){return l()})}},NT=n.unstable_scheduleCallback,IT=n.unstable_NormalPriority,je={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vu(){return{controller:new RT,data:new Map,refCount:0}}function as(t){t.refCount--,t.refCount===0&&NT(IT,function(){t.controller.abort()})}var us=null,_u=0,ao=0,uo=null;function MT(t,o){if(us===null){var l=us=[];_u=0,ao=Ec(),uo={status:"pending",value:void 0,then:function(a){l.push(a)}}}return _u++,o.then(Ih,Ih),o}function Ih(){if(--_u===0&&us!==null){uo!==null&&(uo.status="fulfilled");var t=us;us=null,ao=0,uo=null;for(var o=0;o<t.length;o++)(0,t[o])()}}function DT(t,o){var l=[],a={status:"pending",value:null,reason:null,then:function(h){l.push(h)}};return t.then(function(){a.status="fulfilled",a.value=o;for(var h=0;h<l.length;h++)(0,l[h])(o)},function(h){for(a.status="rejected",a.reason=h,h=0;h<l.length;h++)(0,l[h])(void 0)}),a}var Mh=z.S;z.S=function(t,o){pm=Dt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&MT(t,o),Mh!==null&&Mh(t,o)};var Ni=N(null);function Su(){var t=Ni.current;return t!==null?t:Ve.pooledCache}function Dl(t,o){o===null?Q(Ni,Ni.current):Q(Ni,o.pool)}function Dh(){var t=Su();return t===null?null:{parent:je._currentValue,pool:t}}var co=Error(s(460)),Tu=Error(s(474)),Ul=Error(s(542)),Ll={then:function(){}};function Uh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Lh(t,o,l){switch(l=t[l],l===void 0?t.push(o):l!==o&&(o.then(Tn,Tn),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw t=o.reason,Gh(t),t;default:if(typeof o.status=="string")o.then(Tn,Tn);else{if(t=Ve,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=o,t.status="pending",t.then(function(a){if(o.status==="pending"){var h=o;h.status="fulfilled",h.value=a}},function(a){if(o.status==="pending"){var h=o;h.status="rejected",h.reason=a}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw t=o.reason,Gh(t),t}throw Mi=o,co}}function Ii(t){try{var o=t._init;return o(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Mi=l,co):l}}var Mi=null;function Oh(){if(Mi===null)throw Error(s(459));var t=Mi;return Mi=null,t}function Gh(t){if(t===co||t===Ul)throw Error(s(483))}var fo=null,cs=0;function Ol(t){var o=cs;return cs+=1,fo===null&&(fo=[]),Lh(fo,t,o)}function fs(t,o){o=o.props.ref,t.ref=o!==void 0?o:null}function Gl(t,o){throw o.$$typeof===T?Error(s(525)):(t=Object.prototype.toString.call(o),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":t)))}function Ph(t){function o(M,R){if(t){var D=M.deletions;D===null?(M.deletions=[R],M.flags|=16):D.push(R)}}function l(M,R){if(!t)return null;for(;R!==null;)o(M,R),R=R.sibling;return null}function a(M){for(var R=new Map;M!==null;)M.key!==null?R.set(M.key,M):R.set(M.index,M),M=M.sibling;return R}function h(M,R){return M=An(M,R),M.index=0,M.sibling=null,M}function g(M,R,D){return M.index=D,t?(D=M.alternate,D!==null?(D=D.index,D<R?(M.flags|=67108866,R):D):(M.flags|=67108866,R)):(M.flags|=1048576,R)}function S(M){return t&&M.alternate===null&&(M.flags|=67108866),M}function E(M,R,D,$){return R===null||R.tag!==6?(R=uu(D,M.mode,$),R.return=M,R):(R=h(R,D),R.return=M,R)}function w(M,R,D,$){var ue=D.type;return ue===I?F(M,R,D.props.children,$,D.key):R!==null&&(R.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===fe&&Ii(ue)===R.type)?(R=h(R,D.props),fs(R,D),R.return=M,R):(R=Rl(D.type,D.key,D.props,null,M.mode,$),fs(R,D),R.return=M,R)}function U(M,R,D,$){return R===null||R.tag!==4||R.stateNode.containerInfo!==D.containerInfo||R.stateNode.implementation!==D.implementation?(R=cu(D,M.mode,$),R.return=M,R):(R=h(R,D.children||[]),R.return=M,R)}function F(M,R,D,$,ue){return R===null||R.tag!==7?(R=bi(D,M.mode,$,ue),R.return=M,R):(R=h(R,D),R.return=M,R)}function K(M,R,D){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=uu(""+R,M.mode,D),R.return=M,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case A:return D=Rl(R.type,R.key,R.props,null,M.mode,D),fs(D,R),D.return=M,D;case b:return R=cu(R,M.mode,D),R.return=M,R;case fe:return R=Ii(R),K(M,R,D)}if(Ye(R)||Ee(R))return R=bi(R,M.mode,D,null),R.return=M,R;if(typeof R.then=="function")return K(M,Ol(R),D);if(R.$$typeof===H)return K(M,Ml(M,R),D);Gl(M,R)}return null}function O(M,R,D,$){var ue=R!==null?R.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return ue!==null?null:E(M,R,""+D,$);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case A:return D.key===ue?w(M,R,D,$):null;case b:return D.key===ue?U(M,R,D,$):null;case fe:return D=Ii(D),O(M,R,D,$)}if(Ye(D)||Ee(D))return ue!==null?null:F(M,R,D,$,null);if(typeof D.then=="function")return O(M,R,Ol(D),$);if(D.$$typeof===H)return O(M,R,Ml(M,D),$);Gl(M,D)}return null}function k(M,R,D,$,ue){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return M=M.get(D)||null,E(R,M,""+$,ue);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return M=M.get($.key===null?D:$.key)||null,w(R,M,$,ue);case b:return M=M.get($.key===null?D:$.key)||null,U(R,M,$,ue);case fe:return $=Ii($),k(M,R,D,$,ue)}if(Ye($)||Ee($))return M=M.get(D)||null,F(R,M,$,ue,null);if(typeof $.then=="function")return k(M,R,D,Ol($),ue);if($.$$typeof===H)return k(M,R,D,Ml(R,$),ue);Gl(R,$)}return null}function te(M,R,D,$){for(var ue=null,Ie=null,se=R,_e=R=0,xe=null;se!==null&&_e<D.length;_e++){se.index>_e?(xe=se,se=null):xe=se.sibling;var Me=O(M,se,D[_e],$);if(Me===null){se===null&&(se=xe);break}t&&se&&Me.alternate===null&&o(M,se),R=g(Me,R,_e),Ie===null?ue=Me:Ie.sibling=Me,Ie=Me,se=xe}if(_e===D.length)return l(M,se),Re&&Cn(M,_e),ue;if(se===null){for(;_e<D.length;_e++)se=K(M,D[_e],$),se!==null&&(R=g(se,R,_e),Ie===null?ue=se:Ie.sibling=se,Ie=se);return Re&&Cn(M,_e),ue}for(se=a(se);_e<D.length;_e++)xe=k(se,M,_e,D[_e],$),xe!==null&&(t&&xe.alternate!==null&&se.delete(xe.key===null?_e:xe.key),R=g(xe,R,_e),Ie===null?ue=xe:Ie.sibling=xe,Ie=xe);return t&&se.forEach(function(hi){return o(M,hi)}),Re&&Cn(M,_e),ue}function de(M,R,D,$){if(D==null)throw Error(s(151));for(var ue=null,Ie=null,se=R,_e=R=0,xe=null,Me=D.next();se!==null&&!Me.done;_e++,Me=D.next()){se.index>_e?(xe=se,se=null):xe=se.sibling;var hi=O(M,se,Me.value,$);if(hi===null){se===null&&(se=xe);break}t&&se&&hi.alternate===null&&o(M,se),R=g(hi,R,_e),Ie===null?ue=hi:Ie.sibling=hi,Ie=hi,se=xe}if(Me.done)return l(M,se),Re&&Cn(M,_e),ue;if(se===null){for(;!Me.done;_e++,Me=D.next())Me=K(M,Me.value,$),Me!==null&&(R=g(Me,R,_e),Ie===null?ue=Me:Ie.sibling=Me,Ie=Me);return Re&&Cn(M,_e),ue}for(se=a(se);!Me.done;_e++,Me=D.next())Me=k(se,M,_e,Me.value,$),Me!==null&&(t&&Me.alternate!==null&&se.delete(Me.key===null?_e:Me.key),R=g(Me,R,_e),Ie===null?ue=Me:Ie.sibling=Me,Ie=Me);return t&&se.forEach(function(zE){return o(M,zE)}),Re&&Cn(M,_e),ue}function Be(M,R,D,$){if(typeof D=="object"&&D!==null&&D.type===I&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case A:e:{for(var ue=D.key;R!==null;){if(R.key===ue){if(ue=D.type,ue===I){if(R.tag===7){l(M,R.sibling),$=h(R,D.props.children),$.return=M,M=$;break e}}else if(R.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===fe&&Ii(ue)===R.type){l(M,R.sibling),$=h(R,D.props),fs($,D),$.return=M,M=$;break e}l(M,R);break}else o(M,R);R=R.sibling}D.type===I?($=bi(D.props.children,M.mode,$,D.key),$.return=M,M=$):($=Rl(D.type,D.key,D.props,null,M.mode,$),fs($,D),$.return=M,M=$)}return S(M);case b:e:{for(ue=D.key;R!==null;){if(R.key===ue)if(R.tag===4&&R.stateNode.containerInfo===D.containerInfo&&R.stateNode.implementation===D.implementation){l(M,R.sibling),$=h(R,D.children||[]),$.return=M,M=$;break e}else{l(M,R);break}else o(M,R);R=R.sibling}$=cu(D,M.mode,$),$.return=M,M=$}return S(M);case fe:return D=Ii(D),Be(M,R,D,$)}if(Ye(D))return te(M,R,D,$);if(Ee(D)){if(ue=Ee(D),typeof ue!="function")throw Error(s(150));return D=ue.call(D),de(M,R,D,$)}if(typeof D.then=="function")return Be(M,R,Ol(D),$);if(D.$$typeof===H)return Be(M,R,Ml(M,D),$);Gl(M,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,R!==null&&R.tag===6?(l(M,R.sibling),$=h(R,D),$.return=M,M=$):(l(M,R),$=uu(D,M.mode,$),$.return=M,M=$),S(M)):l(M,R)}return function(M,R,D,$){try{cs=0;var ue=Be(M,R,D,$);return fo=null,ue}catch(se){if(se===co||se===Ul)throw se;var Ie=Gt(29,se,null,M.mode);return Ie.lanes=$,Ie.return=M,Ie}finally{}}}var Di=Ph(!0),kh=Ph(!1),Qn=!1;function Eu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Au(t,o){t=t.updateQueue,o.updateQueue===t&&(o.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Zn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Wn(t,o,l){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(Ue&2)!==0){var h=a.pending;return h===null?o.next=o:(o.next=h.next,h.next=o),a.pending=o,o=xl(t),Th(t,null,l),o}return wl(t,a,o,l),xl(t)}function ds(t,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var a=o.lanes;a&=t.pendingLanes,l|=a,o.lanes=l,Nd(t,l)}}function Cu(t,o){var l=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var h=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?h=g=S:g=g.next=S,l=l.next}while(l!==null);g===null?h=g=o:g=g.next=o}else h=g=o;l={baseState:a.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:a.shared,callbacks:a.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=o:t.next=o,l.lastBaseUpdate=o}var bu=!1;function hs(){if(bu){var t=uo;if(t!==null)throw t}}function ps(t,o,l,a){bu=!1;var h=t.updateQueue;Qn=!1;var g=h.firstBaseUpdate,S=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var w=E,U=w.next;w.next=null,S===null?g=U:S.next=U,S=w;var F=t.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==S&&(E===null?F.firstBaseUpdate=U:E.next=U,F.lastBaseUpdate=w))}if(g!==null){var K=h.baseState;S=0,F=U=w=null,E=g;do{var O=E.lane&-536870913,k=O!==E.lane;if(k?(we&O)===O:(a&O)===O){O!==0&&O===ao&&(bu=!0),F!==null&&(F=F.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var te=t,de=E;O=o;var Be=l;switch(de.tag){case 1:if(te=de.payload,typeof te=="function"){K=te.call(Be,K,O);break e}K=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=de.payload,O=typeof te=="function"?te.call(Be,K,O):te,O==null)break e;K=_({},K,O);break e;case 2:Qn=!0}}O=E.callback,O!==null&&(t.flags|=64,k&&(t.flags|=8192),k=h.callbacks,k===null?h.callbacks=[O]:k.push(O))}else k={lane:O,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(U=F=k,w=K):F=F.next=k,S|=O;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;k=E,E=k.next,k.next=null,h.lastBaseUpdate=k,h.shared.pending=null}}while(!0);F===null&&(w=K),h.baseState=w,h.firstBaseUpdate=U,h.lastBaseUpdate=F,g===null&&(h.shared.lanes=0),ii|=S,t.lanes=S,t.memoizedState=K}}function Hh(t,o){if(typeof t!="function")throw Error(s(191,t));t.call(o)}function qh(t,o){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Hh(l[t],o)}var ho=N(null),Pl=N(0);function Bh(t,o){t=On,Q(Pl,t),Q(ho,o),On=t|o.baseLanes}function wu(){Q(Pl,On),Q(ho,ho.current)}function xu(){On=Pl.current,Y(ho),Y(Pl)}var Pt=N(null),Wt=null;function jn(t){var o=t.alternate;Q(Ze,Ze.current&1),Q(Pt,t),Wt===null&&(o===null||ho.current!==null||o.memoizedState!==null)&&(Wt=t)}function Ru(t){Q(Ze,Ze.current),Q(Pt,t),Wt===null&&(Wt=t)}function Vh(t){t.tag===22?(Q(Ze,Ze.current),Q(Pt,t),Wt===null&&(Wt=t)):ei()}function ei(){Q(Ze,Ze.current),Q(Pt,Pt.current)}function kt(t){Y(Pt),Wt===t&&(Wt=null),Y(Ze)}var Ze=N(0);function kl(t){for(var o=t;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Lc(l)||Oc(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var xn=0,ye=null,He=null,et=null,Hl=!1,po=!1,Ui=!1,ql=0,ms=0,mo=null,UT=0;function Xe(){throw Error(s(321))}function Nu(t,o){if(o===null)return!1;for(var l=0;l<o.length&&l<t.length;l++)if(!Ot(t[l],o[l]))return!1;return!0}function Iu(t,o,l,a,h,g){return xn=g,ye=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,z.H=t===null||t.memoizedState===null?bp:$u,Ui=!1,g=l(a,h),Ui=!1,po&&(g=Fh(o,l,a,h)),zh(t),g}function zh(t){z.H=vs;var o=He!==null&&He.next!==null;if(xn=0,et=He=ye=null,Hl=!1,ms=0,mo=null,o)throw Error(s(300));t===null||tt||(t=t.dependencies,t!==null&&Il(t)&&(tt=!0))}function Fh(t,o,l,a){ye=t;var h=0;do{if(po&&(mo=null),ms=0,po=!1,25<=h)throw Error(s(301));if(h+=1,et=He=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}z.H=wp,g=o(l,a)}while(po);return g}function LT(){var t=z.H,o=t.useState()[0];return o=typeof o.then=="function"?gs(o):o,t=t.useState()[0],(He!==null?He.memoizedState:null)!==t&&(ye.flags|=1024),o}function Mu(){var t=ql!==0;return ql=0,t}function Du(t,o,l){o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~l}function Uu(t){if(Hl){for(t=t.memoizedState;t!==null;){var o=t.queue;o!==null&&(o.pending=null),t=t.next}Hl=!1}xn=0,et=He=ye=null,po=!1,ms=ql=0,mo=null}function Tt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?ye.memoizedState=et=t:et=et.next=t,et}function We(){if(He===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var o=et===null?ye.memoizedState:et.next;if(o!==null)et=o,He=t;else{if(t===null)throw ye.alternate===null?Error(s(467)):Error(s(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},et===null?ye.memoizedState=et=t:et=et.next=t}return et}function Bl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gs(t){var o=ms;return ms+=1,mo===null&&(mo=[]),t=Lh(mo,t,o),o=ye,(et===null?o.memoizedState:et.next)===null&&(o=o.alternate,z.H=o===null||o.memoizedState===null?bp:$u),t}function Vl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gs(t);if(t.$$typeof===H)return ht(t)}throw Error(s(438,String(t)))}function Lu(t){var o=null,l=ye.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var a=ye.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(o={data:a.data.map(function(h){return h.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Bl(),ye.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(t),a=0;a<t;a++)l[a]=ie;return o.index++,l}function Rn(t,o){return typeof o=="function"?o(t):o}function zl(t){var o=We();return Ou(o,He,t)}function Ou(t,o,l){var a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=l;var h=t.baseQueue,g=a.pending;if(g!==null){if(h!==null){var S=h.next;h.next=g.next,g.next=S}o.baseQueue=h=g,a.pending=null}if(g=t.baseState,h===null)t.memoizedState=g;else{o=h.next;var E=S=null,w=null,U=o,F=!1;do{var K=U.lane&-536870913;if(K!==U.lane?(we&K)===K:(xn&K)===K){var O=U.revertLane;if(O===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),K===ao&&(F=!0);else if((xn&O)===O){U=U.next,O===ao&&(F=!0);continue}else K={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},w===null?(E=w=K,S=g):w=w.next=K,ye.lanes|=O,ii|=O;K=U.action,Ui&&l(g,K),g=U.hasEagerState?U.eagerState:l(g,K)}else O={lane:K,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},w===null?(E=w=O,S=g):w=w.next=O,ye.lanes|=K,ii|=K;U=U.next}while(U!==null&&U!==o);if(w===null?S=g:w.next=E,!Ot(g,t.memoizedState)&&(tt=!0,F&&(l=uo,l!==null)))throw l;t.memoizedState=g,t.baseState=S,t.baseQueue=w,a.lastRenderedState=g}return h===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function Gu(t){var o=We(),l=o.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=t;var a=l.dispatch,h=l.pending,g=o.memoizedState;if(h!==null){l.pending=null;var S=h=h.next;do g=t(g,S.action),S=S.next;while(S!==h);Ot(g,o.memoizedState)||(tt=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),l.lastRenderedState=g}return[g,a]}function $h(t,o,l){var a=ye,h=We(),g=Re;if(g){if(l===void 0)throw Error(s(407));l=l()}else l=o();var S=!Ot((He||h).memoizedState,l);if(S&&(h.memoizedState=l,tt=!0),h=h.queue,Hu(Kh.bind(null,a,h,t),[t]),h.getSnapshot!==o||S||et!==null&&et.memoizedState.tag&1){if(a.flags|=2048,go(9,{destroy:void 0},Yh.bind(null,a,h,l,o),null),Ve===null)throw Error(s(349));g||(xn&127)!==0||Jh(a,o,l)}return l}function Jh(t,o,l){t.flags|=16384,t={getSnapshot:o,value:l},o=ye.updateQueue,o===null?(o=Bl(),ye.updateQueue=o,o.stores=[t]):(l=o.stores,l===null?o.stores=[t]:l.push(t))}function Yh(t,o,l,a){o.value=l,o.getSnapshot=a,Xh(o)&&Qh(t)}function Kh(t,o,l){return l(function(){Xh(o)&&Qh(t)})}function Xh(t){var o=t.getSnapshot;t=t.value;try{var l=o();return!Ot(t,l)}catch{return!0}}function Qh(t){var o=Ci(t,2);o!==null&&It(o,t,2)}function Pu(t){var o=Tt();if(typeof t=="function"){var l=t;if(t=l(),Ui){zn(!0);try{l()}finally{zn(!1)}}}return o.memoizedState=o.baseState=t,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:t},o}function Zh(t,o,l,a){return t.baseState=l,Ou(t,He,typeof a=="function"?a:Rn)}function OT(t,o,l,a,h){if(Jl(t))throw Error(s(485));if(t=o.action,t!==null){var g={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};z.T!==null?l(!0):g.isTransition=!1,a(g),l=o.pending,l===null?(g.next=o.pending=g,Wh(o,g)):(g.next=l.next,o.pending=l.next=g)}}function Wh(t,o){var l=o.action,a=o.payload,h=t.state;if(o.isTransition){var g=z.T,S={};z.T=S;try{var E=l(h,a),w=z.S;w!==null&&w(S,E),jh(t,o,E)}catch(U){ku(t,o,U)}finally{g!==null&&S.types!==null&&(g.types=S.types),z.T=g}}else try{g=l(h,a),jh(t,o,g)}catch(U){ku(t,o,U)}}function jh(t,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){ep(t,o,a)},function(a){return ku(t,o,a)}):ep(t,o,l)}function ep(t,o,l){o.status="fulfilled",o.value=l,tp(o),t.state=l,o=t.pending,o!==null&&(l=o.next,l===o?t.pending=null:(l=l.next,o.next=l,Wh(t,l)))}function ku(t,o,l){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do o.status="rejected",o.reason=l,tp(o),o=o.next;while(o!==a)}t.action=null}function tp(t){t=t.listeners;for(var o=0;o<t.length;o++)(0,t[o])()}function np(t,o){return o}function ip(t,o){if(Re){var l=Ve.formState;if(l!==null){e:{var a=ye;if(Re){if(ze){t:{for(var h=ze,g=Zt;h.nodeType!==8;){if(!g){h=null;break t}if(h=jt(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){ze=jt(h.nextSibling),a=h.data==="F!";break e}}Kn(a)}a=!1}a&&(o=l[0])}}return l=Tt(),l.memoizedState=l.baseState=o,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:np,lastRenderedState:o},l.queue=a,l=Ep.bind(null,ye,a),a.dispatch=l,a=Pu(!1),g=Fu.bind(null,ye,!1,a.queue),a=Tt(),h={state:o,dispatch:null,action:t,pending:null},a.queue=h,l=OT.bind(null,ye,h,g,l),h.dispatch=l,a.memoizedState=t,[o,l,!1]}function op(t){var o=We();return sp(o,He,t)}function sp(t,o,l){if(o=Ou(t,o,np)[0],t=zl(Rn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var a=gs(o)}catch(S){throw S===co?Ul:S}else a=o;o=We();var h=o.queue,g=h.dispatch;return l!==o.memoizedState&&(ye.flags|=2048,go(9,{destroy:void 0},GT.bind(null,h,l),null)),[a,g,t]}function GT(t,o){t.action=o}function lp(t){var o=We(),l=He;if(l!==null)return sp(o,l,t);We(),o=o.memoizedState,l=We();var a=l.queue.dispatch;return l.memoizedState=t,[o,a,!1]}function go(t,o,l,a){return t={tag:t,create:l,deps:a,inst:o,next:null},o=ye.updateQueue,o===null&&(o=Bl(),ye.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=t.next=t:(a=l.next,l.next=t,t.next=a,o.lastEffect=t),t}function rp(){return We().memoizedState}function Fl(t,o,l,a){var h=Tt();ye.flags|=t,h.memoizedState=go(1|o,{destroy:void 0},l,a===void 0?null:a)}function $l(t,o,l,a){var h=We();a=a===void 0?null:a;var g=h.memoizedState.inst;He!==null&&a!==null&&Nu(a,He.memoizedState.deps)?h.memoizedState=go(o,g,l,a):(ye.flags|=t,h.memoizedState=go(1|o,g,l,a))}function ap(t,o){Fl(8390656,8,t,o)}function Hu(t,o){$l(2048,8,t,o)}function PT(t){ye.flags|=4;var o=ye.updateQueue;if(o===null)o=Bl(),ye.updateQueue=o,o.events=[t];else{var l=o.events;l===null?o.events=[t]:l.push(t)}}function up(t){var o=We().memoizedState;return PT({ref:o,nextImpl:t}),function(){if((Ue&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function cp(t,o){return $l(4,2,t,o)}function fp(t,o){return $l(4,4,t,o)}function dp(t,o){if(typeof o=="function"){t=t();var l=o(t);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return t=t(),o.current=t,function(){o.current=null}}function hp(t,o,l){l=l!=null?l.concat([t]):null,$l(4,4,dp.bind(null,o,t),l)}function qu(){}function pp(t,o){var l=We();o=o===void 0?null:o;var a=l.memoizedState;return o!==null&&Nu(o,a[1])?a[0]:(l.memoizedState=[t,o],t)}function mp(t,o){var l=We();o=o===void 0?null:o;var a=l.memoizedState;if(o!==null&&Nu(o,a[1]))return a[0];if(a=t(),Ui){zn(!0);try{t()}finally{zn(!1)}}return l.memoizedState=[a,o],a}function Bu(t,o,l){return l===void 0||(xn&1073741824)!==0&&(we&261930)===0?t.memoizedState=o:(t.memoizedState=l,t=gm(),ye.lanes|=t,ii|=t,l)}function gp(t,o,l,a){return Ot(l,o)?l:ho.current!==null?(t=Bu(t,l,a),Ot(t,o)||(tt=!0),t):(xn&42)===0||(xn&1073741824)!==0&&(we&261930)===0?(tt=!0,t.memoizedState=l):(t=gm(),ye.lanes|=t,ii|=t,o)}function yp(t,o,l,a,h){var g=j.p;j.p=g!==0&&8>g?g:8;var S=z.T,E={};z.T=E,Fu(t,!1,o,l);try{var w=h(),U=z.S;if(U!==null&&U(E,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var F=DT(w,a);ys(t,o,F,Bt(t))}else ys(t,o,a,Bt(t))}catch(K){ys(t,o,{then:function(){},status:"rejected",reason:K},Bt())}finally{j.p=g,S!==null&&E.types!==null&&(S.types=E.types),z.T=S}}function kT(){}function Vu(t,o,l,a){if(t.tag!==5)throw Error(s(476));var h=vp(t).queue;yp(t,h,o,le,l===null?kT:function(){return _p(t),l(a)})}function vp(t){var o=t.memoizedState;if(o!==null)return o;o={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:le},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:l},next:null},t.memoizedState=o,t=t.alternate,t!==null&&(t.memoizedState=o),o}function _p(t){var o=vp(t);o.next===null&&(o=t.alternate.memoizedState),ys(t,o.next.queue,{},Bt())}function zu(){return ht(Ls)}function Sp(){return We().memoizedState}function Tp(){return We().memoizedState}function HT(t){for(var o=t.return;o!==null;){switch(o.tag){case 24:case 3:var l=Bt();t=Zn(l);var a=Wn(o,t,l);a!==null&&(It(a,o,l),ds(a,o,l)),o={cache:vu()},t.payload=o;return}o=o.return}}function qT(t,o,l){var a=Bt();l={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Jl(t)?Ap(o,l):(l=ru(t,o,l,a),l!==null&&(It(l,t,a),Cp(l,o,a)))}function Ep(t,o,l){var a=Bt();ys(t,o,l,a)}function ys(t,o,l,a){var h={lane:a,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jl(t))Ap(o,h);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var S=o.lastRenderedState,E=g(S,l);if(h.hasEagerState=!0,h.eagerState=E,Ot(E,S))return wl(t,o,h,0),Ve===null&&bl(),!1}catch{}finally{}if(l=ru(t,o,h,a),l!==null)return It(l,t,a),Cp(l,o,a),!0}return!1}function Fu(t,o,l,a){if(a={lane:2,revertLane:Ec(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Jl(t)){if(o)throw Error(s(479))}else o=ru(t,l,a,2),o!==null&&It(o,t,2)}function Jl(t){var o=t.alternate;return t===ye||o!==null&&o===ye}function Ap(t,o){po=Hl=!0;var l=t.pending;l===null?o.next=o:(o.next=l.next,l.next=o),t.pending=o}function Cp(t,o,l){if((l&4194048)!==0){var a=o.lanes;a&=t.pendingLanes,l|=a,o.lanes=l,Nd(t,l)}}var vs={readContext:ht,use:Vl,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};vs.useEffectEvent=Xe;var bp={readContext:ht,use:Vl,useCallback:function(t,o){return Tt().memoizedState=[t,o===void 0?null:o],t},useContext:ht,useEffect:ap,useImperativeHandle:function(t,o,l){l=l!=null?l.concat([t]):null,Fl(4194308,4,dp.bind(null,o,t),l)},useLayoutEffect:function(t,o){return Fl(4194308,4,t,o)},useInsertionEffect:function(t,o){Fl(4,2,t,o)},useMemo:function(t,o){var l=Tt();o=o===void 0?null:o;var a=t();if(Ui){zn(!0);try{t()}finally{zn(!1)}}return l.memoizedState=[a,o],a},useReducer:function(t,o,l){var a=Tt();if(l!==void 0){var h=l(o);if(Ui){zn(!0);try{l(o)}finally{zn(!1)}}}else h=o;return a.memoizedState=a.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},a.queue=t,t=t.dispatch=qT.bind(null,ye,t),[a.memoizedState,t]},useRef:function(t){var o=Tt();return t={current:t},o.memoizedState=t},useState:function(t){t=Pu(t);var o=t.queue,l=Ep.bind(null,ye,o);return o.dispatch=l,[t.memoizedState,l]},useDebugValue:qu,useDeferredValue:function(t,o){var l=Tt();return Bu(l,t,o)},useTransition:function(){var t=Pu(!1);return t=yp.bind(null,ye,t.queue,!0,!1),Tt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,o,l){var a=ye,h=Tt();if(Re){if(l===void 0)throw Error(s(407));l=l()}else{if(l=o(),Ve===null)throw Error(s(349));(we&127)!==0||Jh(a,o,l)}h.memoizedState=l;var g={value:l,getSnapshot:o};return h.queue=g,ap(Kh.bind(null,a,g,t),[t]),a.flags|=2048,go(9,{destroy:void 0},Yh.bind(null,a,g,l,o),null),l},useId:function(){var t=Tt(),o=Ve.identifierPrefix;if(Re){var l=pn,a=hn;l=(a&~(1<<32-Lt(a)-1)).toString(32)+l,o="_"+o+"R_"+l,l=ql++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=UT++,o="_"+o+"r_"+l.toString(32)+"_";return t.memoizedState=o},useHostTransitionStatus:zu,useFormState:ip,useActionState:ip,useOptimistic:function(t){var o=Tt();o.memoizedState=o.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Fu.bind(null,ye,!0,l),l.dispatch=o,[t,o]},useMemoCache:Lu,useCacheRefresh:function(){return Tt().memoizedState=HT.bind(null,ye)},useEffectEvent:function(t){var o=Tt(),l={impl:t};return o.memoizedState=l,function(){if((Ue&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},$u={readContext:ht,use:Vl,useCallback:pp,useContext:ht,useEffect:Hu,useImperativeHandle:hp,useInsertionEffect:cp,useLayoutEffect:fp,useMemo:mp,useReducer:zl,useRef:rp,useState:function(){return zl(Rn)},useDebugValue:qu,useDeferredValue:function(t,o){var l=We();return gp(l,He.memoizedState,t,o)},useTransition:function(){var t=zl(Rn)[0],o=We().memoizedState;return[typeof t=="boolean"?t:gs(t),o]},useSyncExternalStore:$h,useId:Sp,useHostTransitionStatus:zu,useFormState:op,useActionState:op,useOptimistic:function(t,o){var l=We();return Zh(l,He,t,o)},useMemoCache:Lu,useCacheRefresh:Tp};$u.useEffectEvent=up;var wp={readContext:ht,use:Vl,useCallback:pp,useContext:ht,useEffect:Hu,useImperativeHandle:hp,useInsertionEffect:cp,useLayoutEffect:fp,useMemo:mp,useReducer:Gu,useRef:rp,useState:function(){return Gu(Rn)},useDebugValue:qu,useDeferredValue:function(t,o){var l=We();return He===null?Bu(l,t,o):gp(l,He.memoizedState,t,o)},useTransition:function(){var t=Gu(Rn)[0],o=We().memoizedState;return[typeof t=="boolean"?t:gs(t),o]},useSyncExternalStore:$h,useId:Sp,useHostTransitionStatus:zu,useFormState:lp,useActionState:lp,useOptimistic:function(t,o){var l=We();return He!==null?Zh(l,He,t,o):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Lu,useCacheRefresh:Tp};wp.useEffectEvent=up;function Ju(t,o,l,a){o=t.memoizedState,l=l(a,o),l=l==null?o:_({},o,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var Yu={enqueueSetState:function(t,o,l){t=t._reactInternals;var a=Bt(),h=Zn(a);h.payload=o,l!=null&&(h.callback=l),o=Wn(t,h,a),o!==null&&(It(o,t,a),ds(o,t,a))},enqueueReplaceState:function(t,o,l){t=t._reactInternals;var a=Bt(),h=Zn(a);h.tag=1,h.payload=o,l!=null&&(h.callback=l),o=Wn(t,h,a),o!==null&&(It(o,t,a),ds(o,t,a))},enqueueForceUpdate:function(t,o){t=t._reactInternals;var l=Bt(),a=Zn(l);a.tag=2,o!=null&&(a.callback=o),o=Wn(t,a,l),o!==null&&(It(o,t,l),ds(o,t,l))}};function xp(t,o,l,a,h,g,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,g,S):o.prototype&&o.prototype.isPureReactComponent?!os(l,a)||!os(h,g):!0}function Rp(t,o,l,a){t=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,a),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,a),o.state!==t&&Yu.enqueueReplaceState(o,o.state,null)}function Li(t,o){var l=o;if("ref"in o){l={};for(var a in o)a!=="ref"&&(l[a]=o[a])}if(t=t.defaultProps){l===o&&(l=_({},l));for(var h in t)l[h]===void 0&&(l[h]=t[h])}return l}function Np(t){Cl(t)}function Ip(t){console.error(t)}function Mp(t){Cl(t)}function Yl(t,o){try{var l=t.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(a){setTimeout(function(){throw a})}}function Dp(t,o,l){try{var a=t.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Ku(t,o,l){return l=Zn(l),l.tag=3,l.payload={element:null},l.callback=function(){Yl(t,o)},l}function Up(t){return t=Zn(t),t.tag=3,t}function Lp(t,o,l,a){var h=l.type.getDerivedStateFromError;if(typeof h=="function"){var g=a.value;t.payload=function(){return h(g)},t.callback=function(){Dp(o,l,a)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){Dp(o,l,a),typeof h!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var E=a.stack;this.componentDidCatch(a.value,{componentStack:E!==null?E:""})})}function BT(t,o,l,a,h){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(o=l.alternate,o!==null&&ro(o,l,h,!0),l=Pt.current,l!==null){switch(l.tag){case 31:case 13:return Wt===null?sr():l.alternate===null&&Qe===0&&(Qe=3),l.flags&=-257,l.flags|=65536,l.lanes=h,a===Ll?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([a]):o.add(a),_c(t,a,h)),!1;case 22:return l.flags|=65536,a===Ll?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([a]):l.add(a)),_c(t,a,h)),!1}throw Error(s(435,l.tag))}return _c(t,a,h),sr(),!1}if(Re)return o=Pt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=h,a!==hu&&(t=Error(s(422),{cause:a}),rs(Kt(t,l)))):(a!==hu&&(o=Error(s(423),{cause:a}),rs(Kt(o,l))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,a=Kt(a,l),h=Ku(t.stateNode,a,h),Cu(t,h),Qe!==4&&(Qe=2)),!1;var g=Error(s(520),{cause:a});if(g=Kt(g,l),ws===null?ws=[g]:ws.push(g),Qe!==4&&(Qe=2),o===null)return!0;a=Kt(a,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,t=h&-h,l.lanes|=t,t=Ku(l.stateNode,a,t),Cu(l,t),!1;case 1:if(o=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(oi===null||!oi.has(g))))return l.flags|=65536,h&=-h,l.lanes|=h,h=Up(h),Lp(h,t,l,a),Cu(l,h),!1}l=l.return}while(l!==null);return!1}var Xu=Error(s(461)),tt=!1;function pt(t,o,l,a){o.child=t===null?kh(o,null,l,a):Di(o,t.child,l,a)}function Op(t,o,l,a,h){l=l.render;var g=o.ref;if("ref"in a){var S={};for(var E in a)E!=="ref"&&(S[E]=a[E])}else S=a;return Ri(o),a=Iu(t,o,l,S,g,h),E=Mu(),t!==null&&!tt?(Du(t,o,h),Nn(t,o,h)):(Re&&E&&fu(o),o.flags|=1,pt(t,o,a,h),o.child)}function Gp(t,o,l,a,h){if(t===null){var g=l.type;return typeof g=="function"&&!au(g)&&g.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=g,Pp(t,o,g,a,h)):(t=Rl(l.type,null,a,o,o.mode,h),t.ref=o.ref,t.return=o,o.child=t)}if(g=t.child,!ic(t,h)){var S=g.memoizedProps;if(l=l.compare,l=l!==null?l:os,l(S,a)&&t.ref===o.ref)return Nn(t,o,h)}return o.flags|=1,t=An(g,a),t.ref=o.ref,t.return=o,o.child=t}function Pp(t,o,l,a,h){if(t!==null){var g=t.memoizedProps;if(os(g,a)&&t.ref===o.ref)if(tt=!1,o.pendingProps=a=g,ic(t,h))(t.flags&131072)!==0&&(tt=!0);else return o.lanes=t.lanes,Nn(t,o,h)}return Qu(t,o,l,a,h)}function kp(t,o,l,a){var h=a.children,g=t!==null?t.memoizedState:null;if(t===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((o.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,t!==null){for(a=o.child=t.child,h=0;a!==null;)h=h|a.lanes|a.childLanes,a=a.sibling;a=h&~g}else a=0,o.child=null;return Hp(t,o,g,l,a)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},t!==null&&Dl(o,g!==null?g.cachePool:null),g!==null?Bh(o,g):wu(),Vh(o);else return a=o.lanes=536870912,Hp(t,o,g!==null?g.baseLanes|l:l,l,a)}else g!==null?(Dl(o,g.cachePool),Bh(o,g),ei(),o.memoizedState=null):(t!==null&&Dl(o,null),wu(),ei());return pt(t,o,h,l),o.child}function _s(t,o){return t!==null&&t.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Hp(t,o,l,a,h){var g=Su();return g=g===null?null:{parent:je._currentValue,pool:g},o.memoizedState={baseLanes:l,cachePool:g},t!==null&&Dl(o,null),wu(),Vh(o),t!==null&&ro(t,o,a,!0),o.childLanes=h,null}function Kl(t,o){return o=Ql({mode:o.mode,children:o.children},t.mode),o.ref=t.ref,t.child=o,o.return=t,o}function qp(t,o,l){return Di(o,t.child,null,l),t=Kl(o,o.pendingProps),t.flags|=2,kt(o),o.memoizedState=null,t}function VT(t,o,l){var a=o.pendingProps,h=(o.flags&128)!==0;if(o.flags&=-129,t===null){if(Re){if(a.mode==="hidden")return t=Kl(o,a),o.lanes=536870912,_s(null,t);if(Ru(o),(t=ze)?(t=Wm(t,Zt),t=t!==null&&t.data==="&"?t:null,t!==null&&(o.memoizedState={dehydrated:t,treeContext:Jn!==null?{id:hn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},l=Ah(t),l.return=o,o.child=l,dt=o,ze=null)):t=null,t===null)throw Kn(o);return o.lanes=536870912,null}return Kl(o,a)}var g=t.memoizedState;if(g!==null){var S=g.dehydrated;if(Ru(o),h)if(o.flags&256)o.flags&=-257,o=qp(t,o,l);else if(o.memoizedState!==null)o.child=t.child,o.flags|=128,o=null;else throw Error(s(558));else if(tt||ro(t,o,l,!1),h=(l&t.childLanes)!==0,tt||h){if(a=Ve,a!==null&&(S=Id(a,l),S!==0&&S!==g.retryLane))throw g.retryLane=S,Ci(t,S),It(a,t,S),Xu;sr(),o=qp(t,o,l)}else t=g.treeContext,ze=jt(S.nextSibling),dt=o,Re=!0,Yn=null,Zt=!1,t!==null&&wh(o,t),o=Kl(o,a),o.flags|=4096;return o}return t=An(t.child,{mode:a.mode,children:a.children}),t.ref=o.ref,o.child=t,t.return=o,t}function Xl(t,o){var l=o.ref;if(l===null)t!==null&&t.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(t===null||t.ref!==l)&&(o.flags|=4194816)}}function Qu(t,o,l,a,h){return Ri(o),l=Iu(t,o,l,a,void 0,h),a=Mu(),t!==null&&!tt?(Du(t,o,h),Nn(t,o,h)):(Re&&a&&fu(o),o.flags|=1,pt(t,o,l,h),o.child)}function Bp(t,o,l,a,h,g){return Ri(o),o.updateQueue=null,l=Fh(o,a,l,h),zh(t),a=Mu(),t!==null&&!tt?(Du(t,o,g),Nn(t,o,g)):(Re&&a&&fu(o),o.flags|=1,pt(t,o,l,g),o.child)}function Vp(t,o,l,a,h){if(Ri(o),o.stateNode===null){var g=io,S=l.contextType;typeof S=="object"&&S!==null&&(g=ht(S)),g=new l(a,g),o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Yu,o.stateNode=g,g._reactInternals=o,g=o.stateNode,g.props=a,g.state=o.memoizedState,g.refs={},Eu(o),S=l.contextType,g.context=typeof S=="object"&&S!==null?ht(S):io,g.state=o.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Ju(o,l,S,a),g.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Yu.enqueueReplaceState(g,g.state,null),ps(o,a,g,h),hs(),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308),a=!0}else if(t===null){g=o.stateNode;var E=o.memoizedProps,w=Li(l,E);g.props=w;var U=g.context,F=l.contextType;S=io,typeof F=="object"&&F!==null&&(S=ht(F));var K=l.getDerivedStateFromProps;F=typeof K=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=o.pendingProps!==E,F||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||U!==S)&&Rp(o,g,a,S),Qn=!1;var O=o.memoizedState;g.state=O,ps(o,a,g,h),hs(),U=o.memoizedState,E||O!==U||Qn?(typeof K=="function"&&(Ju(o,l,K,a),U=o.memoizedState),(w=Qn||xp(o,l,w,a,O,U,S))?(F||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(o.flags|=4194308)):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=a,o.memoizedState=U),g.props=a,g.state=U,g.context=S,a=w):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),a=!1)}else{g=o.stateNode,Au(t,o),S=o.memoizedProps,F=Li(l,S),g.props=F,K=o.pendingProps,O=g.context,U=l.contextType,w=io,typeof U=="object"&&U!==null&&(w=ht(U)),E=l.getDerivedStateFromProps,(U=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==K||O!==w)&&Rp(o,g,a,w),Qn=!1,O=o.memoizedState,g.state=O,ps(o,a,g,h),hs();var k=o.memoizedState;S!==K||O!==k||Qn||t!==null&&t.dependencies!==null&&Il(t.dependencies)?(typeof E=="function"&&(Ju(o,l,E,a),k=o.memoizedState),(F=Qn||xp(o,l,F,a,O,k,w)||t!==null&&t.dependencies!==null&&Il(t.dependencies))?(U||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,k,w),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,k,w)),typeof g.componentDidUpdate=="function"&&(o.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(o.flags|=1024),o.memoizedProps=a,o.memoizedState=k),g.props=a,g.state=k,g.context=w,a=F):(typeof g.componentDidUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&O===t.memoizedState||(o.flags|=1024),a=!1)}return g=a,Xl(t,o),a=(o.flags&128)!==0,g||a?(g=o.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:g.render(),o.flags|=1,t!==null&&a?(o.child=Di(o,t.child,null,h),o.child=Di(o,null,l,h)):pt(t,o,l,h),o.memoizedState=g.state,t=o.child):t=Nn(t,o,h),t}function zp(t,o,l,a){return wi(),o.flags|=256,pt(t,o,l,a),o.child}var Zu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wu(t){return{baseLanes:t,cachePool:Dh()}}function ju(t,o,l){return t=t!==null?t.childLanes&~l:0,o&&(t|=qt),t}function Fp(t,o,l){var a=o.pendingProps,h=!1,g=(o.flags&128)!==0,S;if((S=g)||(S=t!==null&&t.memoizedState===null?!1:(Ze.current&2)!==0),S&&(h=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,t===null){if(Re){if(h?jn(o):ei(),(t=ze)?(t=Wm(t,Zt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(o.memoizedState={dehydrated:t,treeContext:Jn!==null?{id:hn,overflow:pn}:null,retryLane:536870912,hydrationErrors:null},l=Ah(t),l.return=o,o.child=l,dt=o,ze=null)):t=null,t===null)throw Kn(o);return Oc(t)?o.lanes=32:o.lanes=536870912,null}var E=a.children;return a=a.fallback,h?(ei(),h=o.mode,E=Ql({mode:"hidden",children:E},h),a=bi(a,h,l,null),E.return=o,a.return=o,E.sibling=a,o.child=E,a=o.child,a.memoizedState=Wu(l),a.childLanes=ju(t,S,l),o.memoizedState=Zu,_s(null,a)):(jn(o),ec(o,E))}var w=t.memoizedState;if(w!==null&&(E=w.dehydrated,E!==null)){if(g)o.flags&256?(jn(o),o.flags&=-257,o=tc(t,o,l)):o.memoizedState!==null?(ei(),o.child=t.child,o.flags|=128,o=null):(ei(),E=a.fallback,h=o.mode,a=Ql({mode:"visible",children:a.children},h),E=bi(E,h,l,null),E.flags|=2,a.return=o,E.return=o,a.sibling=E,o.child=a,Di(o,t.child,null,l),a=o.child,a.memoizedState=Wu(l),a.childLanes=ju(t,S,l),o.memoizedState=Zu,o=_s(null,a));else if(jn(o),Oc(E)){if(S=E.nextSibling&&E.nextSibling.dataset,S)var U=S.dgst;S=U,a=Error(s(419)),a.stack="",a.digest=S,rs({value:a,source:null,stack:null}),o=tc(t,o,l)}else if(tt||ro(t,o,l,!1),S=(l&t.childLanes)!==0,tt||S){if(S=Ve,S!==null&&(a=Id(S,l),a!==0&&a!==w.retryLane))throw w.retryLane=a,Ci(t,a),It(S,t,a),Xu;Lc(E)||sr(),o=tc(t,o,l)}else Lc(E)?(o.flags|=192,o.child=t.child,o=null):(t=w.treeContext,ze=jt(E.nextSibling),dt=o,Re=!0,Yn=null,Zt=!1,t!==null&&wh(o,t),o=ec(o,a.children),o.flags|=4096);return o}return h?(ei(),E=a.fallback,h=o.mode,w=t.child,U=w.sibling,a=An(w,{mode:"hidden",children:a.children}),a.subtreeFlags=w.subtreeFlags&65011712,U!==null?E=An(U,E):(E=bi(E,h,l,null),E.flags|=2),E.return=o,a.return=o,a.sibling=E,o.child=a,_s(null,a),a=o.child,E=t.child.memoizedState,E===null?E=Wu(l):(h=E.cachePool,h!==null?(w=je._currentValue,h=h.parent!==w?{parent:w,pool:w}:h):h=Dh(),E={baseLanes:E.baseLanes|l,cachePool:h}),a.memoizedState=E,a.childLanes=ju(t,S,l),o.memoizedState=Zu,_s(t.child,a)):(jn(o),l=t.child,t=l.sibling,l=An(l,{mode:"visible",children:a.children}),l.return=o,l.sibling=null,t!==null&&(S=o.deletions,S===null?(o.deletions=[t],o.flags|=16):S.push(t)),o.child=l,o.memoizedState=null,l)}function ec(t,o){return o=Ql({mode:"visible",children:o},t.mode),o.return=t,t.child=o}function Ql(t,o){return t=Gt(22,t,null,o),t.lanes=0,t}function tc(t,o,l){return Di(o,t.child,null,l),t=ec(o,o.pendingProps.children),t.flags|=2,o.memoizedState=null,t}function $p(t,o,l){t.lanes|=o;var a=t.alternate;a!==null&&(a.lanes|=o),gu(t.return,o,l)}function nc(t,o,l,a,h,g){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:h,treeForkCount:g}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=a,S.tail=l,S.tailMode=h,S.treeForkCount=g)}function Jp(t,o,l){var a=o.pendingProps,h=a.revealOrder,g=a.tail;a=a.children;var S=Ze.current,E=(S&2)!==0;if(E?(S=S&1|2,o.flags|=128):S&=1,Q(Ze,S),pt(t,o,a,l),a=Re?ls:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=o.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$p(t,l,o);else if(t.tag===19)$p(t,l,o);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===o)break e;for(;t.sibling===null;){if(t.return===null||t.return===o)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(l=o.child,h=null;l!==null;)t=l.alternate,t!==null&&kl(t)===null&&(h=l),l=l.sibling;l=h,l===null?(h=o.child,o.child=null):(h=l.sibling,l.sibling=null),nc(o,!1,h,l,g,a);break;case"backwards":case"unstable_legacy-backwards":for(l=null,h=o.child,o.child=null;h!==null;){if(t=h.alternate,t!==null&&kl(t)===null){o.child=h;break}t=h.sibling,h.sibling=l,l=h,h=t}nc(o,!0,l,null,g,a);break;case"together":nc(o,!1,null,null,void 0,a);break;default:o.memoizedState=null}return o.child}function Nn(t,o,l){if(t!==null&&(o.dependencies=t.dependencies),ii|=o.lanes,(l&o.childLanes)===0)if(t!==null){if(ro(t,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(t!==null&&o.child!==t.child)throw Error(s(153));if(o.child!==null){for(t=o.child,l=An(t,t.pendingProps),o.child=l,l.return=o;t.sibling!==null;)t=t.sibling,l=l.sibling=An(t,t.pendingProps),l.return=o;l.sibling=null}return o.child}function ic(t,o){return(t.lanes&o)!==0?!0:(t=t.dependencies,!!(t!==null&&Il(t)))}function zT(t,o,l){switch(o.tag){case 3:Ke(o,o.stateNode.containerInfo),Xn(o,je,t.memoizedState.cache),wi();break;case 27:case 5:$o(o);break;case 4:Ke(o,o.stateNode.containerInfo);break;case 10:Xn(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Ru(o),null;break;case 13:var a=o.memoizedState;if(a!==null)return a.dehydrated!==null?(jn(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Fp(t,o,l):(jn(o),t=Nn(t,o,l),t!==null?t.sibling:null);jn(o);break;case 19:var h=(t.flags&128)!==0;if(a=(l&o.childLanes)!==0,a||(ro(t,o,l,!1),a=(l&o.childLanes)!==0),h){if(a)return Jp(t,o,l);o.flags|=128}if(h=o.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Q(Ze,Ze.current),a)break;return null;case 22:return o.lanes=0,kp(t,o,l,o.pendingProps);case 24:Xn(o,je,t.memoizedState.cache)}return Nn(t,o,l)}function Yp(t,o,l){if(t!==null)if(t.memoizedProps!==o.pendingProps)tt=!0;else{if(!ic(t,l)&&(o.flags&128)===0)return tt=!1,zT(t,o,l);tt=(t.flags&131072)!==0}else tt=!1,Re&&(o.flags&1048576)!==0&&bh(o,ls,o.index);switch(o.lanes=0,o.tag){case 16:e:{var a=o.pendingProps;if(t=Ii(o.elementType),o.type=t,typeof t=="function")au(t)?(a=Li(t,a),o.tag=1,o=Vp(null,o,t,a,l)):(o.tag=0,o=Qu(null,o,t,a,l));else{if(t!=null){var h=t.$$typeof;if(h===G){o.tag=11,o=Op(null,o,t,a,l);break e}else if(h===J){o.tag=14,o=Gp(null,o,t,a,l);break e}}throw o=Oe(t)||t,Error(s(306,o,""))}}return o;case 0:return Qu(t,o,o.type,o.pendingProps,l);case 1:return a=o.type,h=Li(a,o.pendingProps),Vp(t,o,a,h,l);case 3:e:{if(Ke(o,o.stateNode.containerInfo),t===null)throw Error(s(387));a=o.pendingProps;var g=o.memoizedState;h=g.element,Au(t,o),ps(o,a,null,l);var S=o.memoizedState;if(a=S.cache,Xn(o,je,a),a!==g.cache&&yu(o,[je],l,!0),hs(),a=S.element,g.isDehydrated)if(g={element:a,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){o=zp(t,o,a,l);break e}else if(a!==h){h=Kt(Error(s(424)),o),rs(h),o=zp(t,o,a,l);break e}else{switch(t=o.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ze=jt(t.firstChild),dt=o,Re=!0,Yn=null,Zt=!0,l=kh(o,null,a,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(wi(),a===h){o=Nn(t,o,l);break e}pt(t,o,a,l)}o=o.child}return o;case 26:return Xl(t,o),t===null?(l=og(o.type,null,o.pendingProps,null))?o.memoizedState=l:Re||(l=o.type,t=o.pendingProps,a=dr(ve.current).createElement(l),a[ft]=o,a[Ct]=t,mt(a,l,t),rt(a),o.stateNode=a):o.memoizedState=og(o.type,t.memoizedProps,o.pendingProps,t.memoizedState),null;case 27:return $o(o),t===null&&Re&&(a=o.stateNode=tg(o.type,o.pendingProps,ve.current),dt=o,Zt=!0,h=ze,ai(o.type)?(Gc=h,ze=jt(a.firstChild)):ze=h),pt(t,o,o.pendingProps.children,l),Xl(t,o),t===null&&(o.flags|=4194304),o.child;case 5:return t===null&&Re&&((h=a=ze)&&(a=_E(a,o.type,o.pendingProps,Zt),a!==null?(o.stateNode=a,dt=o,ze=jt(a.firstChild),Zt=!1,h=!0):h=!1),h||Kn(o)),$o(o),h=o.type,g=o.pendingProps,S=t!==null?t.memoizedProps:null,a=g.children,Mc(h,g)?a=null:S!==null&&Mc(h,S)&&(o.flags|=32),o.memoizedState!==null&&(h=Iu(t,o,LT,null,null,l),Ls._currentValue=h),Xl(t,o),pt(t,o,a,l),o.child;case 6:return t===null&&Re&&((t=l=ze)&&(l=SE(l,o.pendingProps,Zt),l!==null?(o.stateNode=l,dt=o,ze=null,t=!0):t=!1),t||Kn(o)),null;case 13:return Fp(t,o,l);case 4:return Ke(o,o.stateNode.containerInfo),a=o.pendingProps,t===null?o.child=Di(o,null,a,l):pt(t,o,a,l),o.child;case 11:return Op(t,o,o.type,o.pendingProps,l);case 7:return pt(t,o,o.pendingProps,l),o.child;case 8:return pt(t,o,o.pendingProps.children,l),o.child;case 12:return pt(t,o,o.pendingProps.children,l),o.child;case 10:return a=o.pendingProps,Xn(o,o.type,a.value),pt(t,o,a.children,l),o.child;case 9:return h=o.type._context,a=o.pendingProps.children,Ri(o),h=ht(h),a=a(h),o.flags|=1,pt(t,o,a,l),o.child;case 14:return Gp(t,o,o.type,o.pendingProps,l);case 15:return Pp(t,o,o.type,o.pendingProps,l);case 19:return Jp(t,o,l);case 31:return VT(t,o,l);case 22:return kp(t,o,l,o.pendingProps);case 24:return Ri(o),a=ht(je),t===null?(h=Su(),h===null&&(h=Ve,g=vu(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=l),h=g),o.memoizedState={parent:a,cache:h},Eu(o),Xn(o,je,h)):((t.lanes&l)!==0&&(Au(t,o),ps(o,null,null,l),hs()),h=t.memoizedState,g=o.memoizedState,h.parent!==a?(h={parent:a,cache:a},o.memoizedState=h,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=h),Xn(o,je,a)):(a=g.cache,Xn(o,je,a),a!==h.cache&&yu(o,[je],l,!0))),pt(t,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function In(t){t.flags|=4}function oc(t,o,l,a,h){if((o=(t.mode&32)!==0)&&(o=!1),o){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Sm())t.flags|=8192;else throw Mi=Ll,Tu}else t.flags&=-16777217}function Kp(t,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ug(o))if(Sm())t.flags|=8192;else throw Mi=Ll,Tu}function Zl(t,o){o!==null&&(t.flags|=4),t.flags&16384&&(o=t.tag!==22?xd():536870912,t.lanes|=o,So|=o)}function Ss(t,o){if(!Re)switch(t.tailMode){case"hidden":o=t.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?o||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Fe(t){var o=t.alternate!==null&&t.alternate.child===t.child,l=0,a=0;if(o)for(var h=t.child;h!==null;)l|=h.lanes|h.childLanes,a|=h.subtreeFlags&65011712,a|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)l|=h.lanes|h.childLanes,a|=h.subtreeFlags,a|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=a,t.childLanes=l,o}function FT(t,o,l){var a=o.pendingProps;switch(du(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(o),null;case 1:return Fe(o),null;case 3:return l=o.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),wn(je),$e(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(lo(o)?In(o):t===null||t.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,pu())),Fe(o),null;case 26:var h=o.type,g=o.memoizedState;return t===null?(In(o),g!==null?(Fe(o),Kp(o,g)):(Fe(o),oc(o,h,null,a,l))):g?g!==t.memoizedState?(In(o),Fe(o),Kp(o,g)):(Fe(o),o.flags&=-16777217):(t=t.memoizedProps,t!==a&&In(o),Fe(o),oc(o,h,t,a,l)),null;case 27:if(al(o),l=ve.current,h=o.type,t!==null&&o.stateNode!=null)t.memoizedProps!==a&&In(o);else{if(!a){if(o.stateNode===null)throw Error(s(166));return Fe(o),null}t=q.current,lo(o)?xh(o):(t=tg(h,a,l),o.stateNode=t,In(o))}return Fe(o),null;case 5:if(al(o),h=o.type,t!==null&&o.stateNode!=null)t.memoizedProps!==a&&In(o);else{if(!a){if(o.stateNode===null)throw Error(s(166));return Fe(o),null}if(g=q.current,lo(o))xh(o);else{var S=dr(ve.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof a.is=="string"?S.createElement("select",{is:a.is}):S.createElement("select"),a.multiple?g.multiple=!0:a.size&&(g.size=a.size);break;default:g=typeof a.is=="string"?S.createElement(h,{is:a.is}):S.createElement(h)}}g[ft]=o,g[Ct]=a;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=g;e:switch(mt(g,h,a),h){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&In(o)}}return Fe(o),oc(o,o.type,t===null?null:t.memoizedProps,o.pendingProps,l),null;case 6:if(t&&o.stateNode!=null)t.memoizedProps!==a&&In(o);else{if(typeof a!="string"&&o.stateNode===null)throw Error(s(166));if(t=ve.current,lo(o)){if(t=o.stateNode,l=o.memoizedProps,a=null,h=dt,h!==null)switch(h.tag){case 27:case 5:a=h.memoizedProps}t[ft]=o,t=!!(t.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||Fm(t.nodeValue,l)),t||Kn(o,!0)}else t=dr(t).createTextNode(a),t[ft]=o,o.stateNode=t}return Fe(o),null;case 31:if(l=o.memoizedState,t===null||t.memoizedState!==null){if(a=lo(o),l!==null){if(t===null){if(!a)throw Error(s(318));if(t=o.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[ft]=o}else wi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Fe(o),t=!1}else l=pu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return o.flags&256?(kt(o),o):(kt(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Fe(o),null;case 13:if(a=o.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=lo(o),a!==null&&a.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=o.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[ft]=o}else wi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Fe(o),h=!1}else h=pu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return o.flags&256?(kt(o),o):(kt(o),null)}return kt(o),(o.flags&128)!==0?(o.lanes=l,o):(l=a!==null,t=t!==null&&t.memoizedState!==null,l&&(a=o.child,h=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(h=a.alternate.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==h&&(a.flags|=2048)),l!==t&&l&&(o.child.flags|=8192),Zl(o,o.updateQueue),Fe(o),null);case 4:return $e(),t===null&&wc(o.stateNode.containerInfo),Fe(o),null;case 10:return wn(o.type),Fe(o),null;case 19:if(Y(Ze),a=o.memoizedState,a===null)return Fe(o),null;if(h=(o.flags&128)!==0,g=a.rendering,g===null)if(h)Ss(a,!1);else{if(Qe!==0||t!==null&&(t.flags&128)!==0)for(t=o.child;t!==null;){if(g=kl(t),g!==null){for(o.flags|=128,Ss(a,!1),t=g.updateQueue,o.updateQueue=t,Zl(o,t),o.subtreeFlags=0,t=l,l=o.child;l!==null;)Eh(l,t),l=l.sibling;return Q(Ze,Ze.current&1|2),Re&&Cn(o,a.treeForkCount),o.child}t=t.sibling}a.tail!==null&&Dt()>nr&&(o.flags|=128,h=!0,Ss(a,!1),o.lanes=4194304)}else{if(!h)if(t=kl(g),t!==null){if(o.flags|=128,h=!0,t=t.updateQueue,o.updateQueue=t,Zl(o,t),Ss(a,!0),a.tail===null&&a.tailMode==="hidden"&&!g.alternate&&!Re)return Fe(o),null}else 2*Dt()-a.renderingStartTime>nr&&l!==536870912&&(o.flags|=128,h=!0,Ss(a,!1),o.lanes=4194304);a.isBackwards?(g.sibling=o.child,o.child=g):(t=a.last,t!==null?t.sibling=g:o.child=g,a.last=g)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Dt(),t.sibling=null,l=Ze.current,Q(Ze,h?l&1|2:l&1),Re&&Cn(o,a.treeForkCount),t):(Fe(o),null);case 22:case 23:return kt(o),xu(),a=o.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(o.flags|=8192):a&&(o.flags|=8192),a?(l&536870912)!==0&&(o.flags&128)===0&&(Fe(o),o.subtreeFlags&6&&(o.flags|=8192)):Fe(o),l=o.updateQueue,l!==null&&Zl(o,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==l&&(o.flags|=2048),t!==null&&Y(Ni),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),wn(je),Fe(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function $T(t,o){switch(du(o),o.tag){case 1:return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 3:return wn(je),$e(),t=o.flags,(t&65536)!==0&&(t&128)===0?(o.flags=t&-65537|128,o):null;case 26:case 27:case 5:return al(o),null;case 31:if(o.memoizedState!==null){if(kt(o),o.alternate===null)throw Error(s(340));wi()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 13:if(kt(o),t=o.memoizedState,t!==null&&t.dehydrated!==null){if(o.alternate===null)throw Error(s(340));wi()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 19:return Y(Ze),null;case 4:return $e(),null;case 10:return wn(o.type),null;case 22:case 23:return kt(o),xu(),t!==null&&Y(Ni),t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 24:return wn(je),null;case 25:return null;default:return null}}function Xp(t,o){switch(du(o),o.tag){case 3:wn(je),$e();break;case 26:case 27:case 5:al(o);break;case 4:$e();break;case 31:o.memoizedState!==null&&kt(o);break;case 13:kt(o);break;case 19:Y(Ze);break;case 10:wn(o.type);break;case 22:case 23:kt(o),xu(),t!==null&&Y(Ni);break;case 24:wn(je)}}function Ts(t,o){try{var l=o.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var h=a.next;l=h;do{if((l.tag&t)===t){a=void 0;var g=l.create,S=l.inst;a=g(),S.destroy=a}l=l.next}while(l!==h)}}catch(E){ke(o,o.return,E)}}function ti(t,o,l){try{var a=o.updateQueue,h=a!==null?a.lastEffect:null;if(h!==null){var g=h.next;a=g;do{if((a.tag&t)===t){var S=a.inst,E=S.destroy;if(E!==void 0){S.destroy=void 0,h=o;var w=l,U=E;try{U()}catch(F){ke(h,w,F)}}}a=a.next}while(a!==g)}}catch(F){ke(o,o.return,F)}}function Qp(t){var o=t.updateQueue;if(o!==null){var l=t.stateNode;try{qh(o,l)}catch(a){ke(t,t.return,a)}}}function Zp(t,o,l){l.props=Li(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(a){ke(t,o,a)}}function Es(t,o){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof l=="function"?t.refCleanup=l(a):l.current=a}}catch(h){ke(t,o,h)}}function mn(t,o){var l=t.ref,a=t.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(h){ke(t,o,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(h){ke(t,o,h)}else l.current=null}function Wp(t){var o=t.type,l=t.memoizedProps,a=t.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(h){ke(t,t.return,h)}}function sc(t,o,l){try{var a=t.stateNode;hE(a,t.type,l,o),a[Ct]=o}catch(h){ke(t,t.return,h)}}function jp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ai(t.type)||t.tag===4}function lc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ai(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rc(t,o,l){var a=t.tag;if(a===5||a===6)t=t.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(t),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Tn));else if(a!==4&&(a===27&&ai(t.type)&&(l=t.stateNode,o=null),t=t.child,t!==null))for(rc(t,o,l),t=t.sibling;t!==null;)rc(t,o,l),t=t.sibling}function Wl(t,o,l){var a=t.tag;if(a===5||a===6)t=t.stateNode,o?l.insertBefore(t,o):l.appendChild(t);else if(a!==4&&(a===27&&ai(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(Wl(t,o,l),t=t.sibling;t!==null;)Wl(t,o,l),t=t.sibling}function em(t){var o=t.stateNode,l=t.memoizedProps;try{for(var a=t.type,h=o.attributes;h.length;)o.removeAttributeNode(h[0]);mt(o,a,l),o[ft]=t,o[Ct]=l}catch(g){ke(t,t.return,g)}}var Mn=!1,nt=!1,ac=!1,tm=typeof WeakSet=="function"?WeakSet:Set,at=null;function JT(t,o){if(t=t.containerInfo,Nc=_r,t=hh(t),tu(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var h=a.anchorOffset,g=a.focusNode;a=a.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var S=0,E=-1,w=-1,U=0,F=0,K=t,O=null;t:for(;;){for(var k;K!==l||h!==0&&K.nodeType!==3||(E=S+h),K!==g||a!==0&&K.nodeType!==3||(w=S+a),K.nodeType===3&&(S+=K.nodeValue.length),(k=K.firstChild)!==null;)O=K,K=k;for(;;){if(K===t)break t;if(O===l&&++U===h&&(E=S),O===g&&++F===a&&(w=S),(k=K.nextSibling)!==null)break;K=O,O=K.parentNode}K=k}l=E===-1||w===-1?null:{start:E,end:w}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ic={focusedElem:t,selectionRange:l},_r=!1,at=o;at!==null;)if(o=at,t=o.child,(o.subtreeFlags&1028)!==0&&t!==null)t.return=o,at=t;else for(;at!==null;){switch(o=at,g=o.alternate,t=o.flags,o.tag){case 0:if((t&4)!==0&&(t=o.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)h=t[l],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,l=o,h=g.memoizedProps,g=g.memoizedState,a=l.stateNode;try{var te=Li(l.type,h);t=a.getSnapshotBeforeUpdate(te,g),a.__reactInternalSnapshotBeforeUpdate=t}catch(de){ke(l,l.return,de)}}break;case 3:if((t&1024)!==0){if(t=o.stateNode.containerInfo,l=t.nodeType,l===9)Uc(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Uc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=o.sibling,t!==null){t.return=o.return,at=t;break}at=o.return}}function nm(t,o,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:Un(t,l),a&4&&Ts(5,l);break;case 1:if(Un(t,l),a&4)if(t=l.stateNode,o===null)try{t.componentDidMount()}catch(S){ke(l,l.return,S)}else{var h=Li(l.type,o.memoizedProps);o=o.memoizedState;try{t.componentDidUpdate(h,o,t.__reactInternalSnapshotBeforeUpdate)}catch(S){ke(l,l.return,S)}}a&64&&Qp(l),a&512&&Es(l,l.return);break;case 3:if(Un(t,l),a&64&&(t=l.updateQueue,t!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{qh(t,o)}catch(S){ke(l,l.return,S)}}break;case 27:o===null&&a&4&&em(l);case 26:case 5:Un(t,l),o===null&&a&4&&Wp(l),a&512&&Es(l,l.return);break;case 12:Un(t,l);break;case 31:Un(t,l),a&4&&sm(t,l);break;case 13:Un(t,l),a&4&&lm(t,l),a&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=tE.bind(null,l),TE(t,l))));break;case 22:if(a=l.memoizedState!==null||Mn,!a){o=o!==null&&o.memoizedState!==null||nt,h=Mn;var g=nt;Mn=a,(nt=o)&&!g?Ln(t,l,(l.subtreeFlags&8772)!==0):Un(t,l),Mn=h,nt=g}break;case 30:break;default:Un(t,l)}}function im(t){var o=t.alternate;o!==null&&(t.alternate=null,im(o)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(o=t.stateNode,o!==null&&ka(o)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Je=null,wt=!1;function Dn(t,o,l){for(l=l.child;l!==null;)om(t,o,l),l=l.sibling}function om(t,o,l){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Jo,l)}catch{}switch(l.tag){case 26:nt||mn(l,o),Dn(t,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:nt||mn(l,o);var a=Je,h=wt;ai(l.type)&&(Je=l.stateNode,wt=!1),Dn(t,o,l),Ms(l.stateNode),Je=a,wt=h;break;case 5:nt||mn(l,o);case 6:if(a=Je,h=wt,Je=null,Dn(t,o,l),Je=a,wt=h,Je!==null)if(wt)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(l.stateNode)}catch(g){ke(l,o,g)}else try{Je.removeChild(l.stateNode)}catch(g){ke(l,o,g)}break;case 18:Je!==null&&(wt?(t=Je,Qm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),Ro(t)):Qm(Je,l.stateNode));break;case 4:a=Je,h=wt,Je=l.stateNode.containerInfo,wt=!0,Dn(t,o,l),Je=a,wt=h;break;case 0:case 11:case 14:case 15:ti(2,l,o),nt||ti(4,l,o),Dn(t,o,l);break;case 1:nt||(mn(l,o),a=l.stateNode,typeof a.componentWillUnmount=="function"&&Zp(l,o,a)),Dn(t,o,l);break;case 21:Dn(t,o,l);break;case 22:nt=(a=nt)||l.memoizedState!==null,Dn(t,o,l),nt=a;break;default:Dn(t,o,l)}}function sm(t,o){if(o.memoizedState===null&&(t=o.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ro(t)}catch(l){ke(o,o.return,l)}}}function lm(t,o){if(o.memoizedState===null&&(t=o.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ro(t)}catch(l){ke(o,o.return,l)}}function YT(t){switch(t.tag){case 31:case 13:case 19:var o=t.stateNode;return o===null&&(o=t.stateNode=new tm),o;case 22:return t=t.stateNode,o=t._retryCache,o===null&&(o=t._retryCache=new tm),o;default:throw Error(s(435,t.tag))}}function jl(t,o){var l=YT(t);o.forEach(function(a){if(!l.has(a)){l.add(a);var h=nE.bind(null,t,a);a.then(h,h)}})}function xt(t,o){var l=o.deletions;if(l!==null)for(var a=0;a<l.length;a++){var h=l[a],g=t,S=o,E=S;e:for(;E!==null;){switch(E.tag){case 27:if(ai(E.type)){Je=E.stateNode,wt=!1;break e}break;case 5:Je=E.stateNode,wt=!1;break e;case 3:case 4:Je=E.stateNode.containerInfo,wt=!0;break e}E=E.return}if(Je===null)throw Error(s(160));om(g,S,h),Je=null,wt=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)rm(o,t),o=o.sibling}var rn=null;function rm(t,o){var l=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:xt(o,t),Rt(t),a&4&&(ti(3,t,t.return),Ts(3,t),ti(5,t,t.return));break;case 1:xt(o,t),Rt(t),a&512&&(nt||l===null||mn(l,l.return)),a&64&&Mn&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var h=rn;if(xt(o,t),Rt(t),a&512&&(nt||l===null||mn(l,l.return)),a&4){var g=l!==null?l.memoizedState:null;if(a=t.memoizedState,l===null)if(a===null)if(t.stateNode===null){e:{a=t.type,l=t.memoizedProps,h=h.ownerDocument||h;t:switch(a){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Xo]||g[ft]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(a),h.head.insertBefore(g,h.querySelector("head > title"))),mt(g,a,l),g[ft]=t,rt(g),a=g;break e;case"link":var S=rg("link","href",h).get(a+(l.href||""));if(S){for(var E=0;E<S.length;E++)if(g=S[E],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(E,1);break t}}g=h.createElement(a),mt(g,a,l),h.head.appendChild(g);break;case"meta":if(S=rg("meta","content",h).get(a+(l.content||""))){for(E=0;E<S.length;E++)if(g=S[E],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(E,1);break t}}g=h.createElement(a),mt(g,a,l),h.head.appendChild(g);break;default:throw Error(s(468,a))}g[ft]=t,rt(g),a=g}t.stateNode=a}else ag(h,t.type,t.stateNode);else t.stateNode=lg(h,a,t.memoizedProps);else g!==a?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,a===null?ag(h,t.type,t.stateNode):lg(h,a,t.memoizedProps)):a===null&&t.stateNode!==null&&sc(t,t.memoizedProps,l.memoizedProps)}break;case 27:xt(o,t),Rt(t),a&512&&(nt||l===null||mn(l,l.return)),l!==null&&a&4&&sc(t,t.memoizedProps,l.memoizedProps);break;case 5:if(xt(o,t),Rt(t),a&512&&(nt||l===null||mn(l,l.return)),t.flags&32){h=t.stateNode;try{Qi(h,"")}catch(te){ke(t,t.return,te)}}a&4&&t.stateNode!=null&&(h=t.memoizedProps,sc(t,h,l!==null?l.memoizedProps:h)),a&1024&&(ac=!0);break;case 6:if(xt(o,t),Rt(t),a&4){if(t.stateNode===null)throw Error(s(162));a=t.memoizedProps,l=t.stateNode;try{l.nodeValue=a}catch(te){ke(t,t.return,te)}}break;case 3:if(mr=null,h=rn,rn=hr(o.containerInfo),xt(o,t),rn=h,Rt(t),a&4&&l!==null&&l.memoizedState.isDehydrated)try{Ro(o.containerInfo)}catch(te){ke(t,t.return,te)}ac&&(ac=!1,am(t));break;case 4:a=rn,rn=hr(t.stateNode.containerInfo),xt(o,t),Rt(t),rn=a;break;case 12:xt(o,t),Rt(t);break;case 31:xt(o,t),Rt(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,jl(t,a)));break;case 13:xt(o,t),Rt(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(tr=Dt()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,jl(t,a)));break;case 22:h=t.memoizedState!==null;var w=l!==null&&l.memoizedState!==null,U=Mn,F=nt;if(Mn=U||h,nt=F||w,xt(o,t),nt=F,Mn=U,Rt(t),a&8192)e:for(o=t.stateNode,o._visibility=h?o._visibility&-2:o._visibility|1,h&&(l===null||w||Mn||nt||Oi(t)),l=null,o=t;;){if(o.tag===5||o.tag===26){if(l===null){w=l=o;try{if(g=w.stateNode,h)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{E=w.stateNode;var K=w.memoizedProps.style,O=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(te){ke(w,w.return,te)}}}else if(o.tag===6){if(l===null){w=o;try{w.stateNode.nodeValue=h?"":w.memoizedProps}catch(te){ke(w,w.return,te)}}}else if(o.tag===18){if(l===null){w=o;try{var k=w.stateNode;h?Zm(k,!0):Zm(w.stateNode,!1)}catch(te){ke(w,w.return,te)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===t)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}a&4&&(a=t.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,jl(t,l))));break;case 19:xt(o,t),Rt(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,jl(t,a)));break;case 30:break;case 21:break;default:xt(o,t),Rt(t)}}function Rt(t){var o=t.flags;if(o&2){try{for(var l,a=t.return;a!==null;){if(jp(a)){l=a;break}a=a.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var h=l.stateNode,g=lc(t);Wl(t,g,h);break;case 5:var S=l.stateNode;l.flags&32&&(Qi(S,""),l.flags&=-33);var E=lc(t);Wl(t,E,S);break;case 3:case 4:var w=l.stateNode.containerInfo,U=lc(t);rc(t,U,w);break;default:throw Error(s(161))}}catch(F){ke(t,t.return,F)}t.flags&=-3}o&4096&&(t.flags&=-4097)}function am(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var o=t;am(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),t=t.sibling}}function Un(t,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)nm(t,o.alternate,o),o=o.sibling}function Oi(t){for(t=t.child;t!==null;){var o=t;switch(o.tag){case 0:case 11:case 14:case 15:ti(4,o,o.return),Oi(o);break;case 1:mn(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Zp(o,o.return,l),Oi(o);break;case 27:Ms(o.stateNode);case 26:case 5:mn(o,o.return),Oi(o);break;case 22:o.memoizedState===null&&Oi(o);break;case 30:Oi(o);break;default:Oi(o)}t=t.sibling}}function Ln(t,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var a=o.alternate,h=t,g=o,S=g.flags;switch(g.tag){case 0:case 11:case 15:Ln(h,g,l),Ts(4,g);break;case 1:if(Ln(h,g,l),a=g,h=a.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(U){ke(a,a.return,U)}if(a=g,h=a.updateQueue,h!==null){var E=a.stateNode;try{var w=h.shared.hiddenCallbacks;if(w!==null)for(h.shared.hiddenCallbacks=null,h=0;h<w.length;h++)Hh(w[h],E)}catch(U){ke(a,a.return,U)}}l&&S&64&&Qp(g),Es(g,g.return);break;case 27:em(g);case 26:case 5:Ln(h,g,l),l&&a===null&&S&4&&Wp(g),Es(g,g.return);break;case 12:Ln(h,g,l);break;case 31:Ln(h,g,l),l&&S&4&&sm(h,g);break;case 13:Ln(h,g,l),l&&S&4&&lm(h,g);break;case 22:g.memoizedState===null&&Ln(h,g,l),Es(g,g.return);break;case 30:break;default:Ln(h,g,l)}o=o.sibling}}function uc(t,o){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(t=o.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&as(l))}function cc(t,o){t=null,o.alternate!==null&&(t=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==t&&(o.refCount++,t!=null&&as(t))}function an(t,o,l,a){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)um(t,o,l,a),o=o.sibling}function um(t,o,l,a){var h=o.flags;switch(o.tag){case 0:case 11:case 15:an(t,o,l,a),h&2048&&Ts(9,o);break;case 1:an(t,o,l,a);break;case 3:an(t,o,l,a),h&2048&&(t=null,o.alternate!==null&&(t=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==t&&(o.refCount++,t!=null&&as(t)));break;case 12:if(h&2048){an(t,o,l,a),t=o.stateNode;try{var g=o.memoizedProps,S=g.id,E=g.onPostCommit;typeof E=="function"&&E(S,o.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(w){ke(o,o.return,w)}}else an(t,o,l,a);break;case 31:an(t,o,l,a);break;case 13:an(t,o,l,a);break;case 23:break;case 22:g=o.stateNode,S=o.alternate,o.memoizedState!==null?g._visibility&2?an(t,o,l,a):As(t,o):g._visibility&2?an(t,o,l,a):(g._visibility|=2,yo(t,o,l,a,(o.subtreeFlags&10256)!==0||!1)),h&2048&&uc(S,o);break;case 24:an(t,o,l,a),h&2048&&cc(o.alternate,o);break;default:an(t,o,l,a)}}function yo(t,o,l,a,h){for(h=h&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var g=t,S=o,E=l,w=a,U=S.flags;switch(S.tag){case 0:case 11:case 15:yo(g,S,E,w,h),Ts(8,S);break;case 23:break;case 22:var F=S.stateNode;S.memoizedState!==null?F._visibility&2?yo(g,S,E,w,h):As(g,S):(F._visibility|=2,yo(g,S,E,w,h)),h&&U&2048&&uc(S.alternate,S);break;case 24:yo(g,S,E,w,h),h&&U&2048&&cc(S.alternate,S);break;default:yo(g,S,E,w,h)}o=o.sibling}}function As(t,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=t,a=o,h=a.flags;switch(a.tag){case 22:As(l,a),h&2048&&uc(a.alternate,a);break;case 24:As(l,a),h&2048&&cc(a.alternate,a);break;default:As(l,a)}o=o.sibling}}var Cs=8192;function vo(t,o,l){if(t.subtreeFlags&Cs)for(t=t.child;t!==null;)cm(t,o,l),t=t.sibling}function cm(t,o,l){switch(t.tag){case 26:vo(t,o,l),t.flags&Cs&&t.memoizedState!==null&&UE(l,rn,t.memoizedState,t.memoizedProps);break;case 5:vo(t,o,l);break;case 3:case 4:var a=rn;rn=hr(t.stateNode.containerInfo),vo(t,o,l),rn=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Cs,Cs=16777216,vo(t,o,l),Cs=a):vo(t,o,l));break;default:vo(t,o,l)}}function fm(t){var o=t.alternate;if(o!==null&&(t=o.child,t!==null)){o.child=null;do o=t.sibling,t.sibling=null,t=o;while(t!==null)}}function bs(t){var o=t.deletions;if((t.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var a=o[l];at=a,hm(a,t)}fm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dm(t),t=t.sibling}function dm(t){switch(t.tag){case 0:case 11:case 15:bs(t),t.flags&2048&&ti(9,t,t.return);break;case 3:bs(t);break;case 12:bs(t);break;case 22:var o=t.stateNode;t.memoizedState!==null&&o._visibility&2&&(t.return===null||t.return.tag!==13)?(o._visibility&=-3,er(t)):bs(t);break;default:bs(t)}}function er(t){var o=t.deletions;if((t.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var a=o[l];at=a,hm(a,t)}fm(t)}for(t=t.child;t!==null;){switch(o=t,o.tag){case 0:case 11:case 15:ti(8,o,o.return),er(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,er(o));break;default:er(o)}t=t.sibling}}function hm(t,o){for(;at!==null;){var l=at;switch(l.tag){case 0:case 11:case 15:ti(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:as(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,at=a;else e:for(l=t;at!==null;){a=at;var h=a.sibling,g=a.return;if(im(a),a===l){at=null;break e}if(h!==null){h.return=g,at=h;break e}at=g}}}var KT={getCacheForType:function(t){var o=ht(je),l=o.data.get(t);return l===void 0&&(l=t(),o.data.set(t,l)),l},cacheSignal:function(){return ht(je).controller.signal}},XT=typeof WeakMap=="function"?WeakMap:Map,Ue=0,Ve=null,Ae=null,we=0,Pe=0,Ht=null,ni=!1,_o=!1,fc=!1,On=0,Qe=0,ii=0,Gi=0,dc=0,qt=0,So=0,ws=null,Nt=null,hc=!1,tr=0,pm=0,nr=1/0,ir=null,oi=null,ot=0,si=null,To=null,Gn=0,pc=0,mc=null,mm=null,xs=0,gc=null;function Bt(){return(Ue&2)!==0&&we!==0?we&-we:z.T!==null?Ec():Md()}function gm(){if(qt===0)if((we&536870912)===0||Re){var t=fl;fl<<=1,(fl&3932160)===0&&(fl=262144),qt=t}else qt=536870912;return t=Pt.current,t!==null&&(t.flags|=32),qt}function It(t,o,l){(t===Ve&&(Pe===2||Pe===9)||t.cancelPendingCommit!==null)&&(Eo(t,0),li(t,we,qt,!1)),Ko(t,l),((Ue&2)===0||t!==Ve)&&(t===Ve&&((Ue&2)===0&&(Gi|=l),Qe===4&&li(t,we,qt,!1)),gn(t))}function ym(t,o,l){if((Ue&6)!==0)throw Error(s(327));var a=!l&&(o&127)===0&&(o&t.expiredLanes)===0||Yo(t,o),h=a?WT(t,o):vc(t,o,!0),g=a;do{if(h===0){_o&&!a&&li(t,o,0,!1);break}else{if(l=t.current.alternate,g&&!QT(l)){h=vc(t,o,!1),g=!1;continue}if(h===2){if(g=o,t.errorRecoveryDisabledLanes&g)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var E=t;h=ws;var w=E.current.memoizedState.isDehydrated;if(w&&(Eo(E,S).flags|=256),S=vc(E,S,!1),S!==2){if(fc&&!w){E.errorRecoveryDisabledLanes|=g,Gi|=g,h=4;break e}g=Nt,Nt=h,g!==null&&(Nt===null?Nt=g:Nt.push.apply(Nt,g))}h=S}if(g=!1,h!==2)continue}}if(h===1){Eo(t,0),li(t,o,0,!0);break}e:{switch(a=t,g=h,g){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:li(a,o,qt,!ni);break e;case 2:Nt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(h=tr+300-Dt(),10<h)){if(li(a,o,qt,!ni),hl(a,0,!0)!==0)break e;Gn=o,a.timeoutHandle=Km(vm.bind(null,a,l,Nt,ir,hc,o,qt,Gi,So,ni,g,"Throttled",-0,0),h);break e}vm(a,l,Nt,ir,hc,o,qt,Gi,So,ni,g,null,-0,0)}}break}while(!0);gn(t)}function vm(t,o,l,a,h,g,S,E,w,U,F,K,O,k){if(t.timeoutHandle=-1,K=o.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tn},cm(o,g,K);var te=(g&62914560)===g?tr-Dt():(g&4194048)===g?pm-Dt():0;if(te=LE(K,te),te!==null){Gn=g,t.cancelPendingCommit=te(wm.bind(null,t,o,g,l,a,h,S,E,w,F,K,null,O,k)),li(t,g,S,!U);return}}wm(t,o,g,l,a,h,S,E,w)}function QT(t){for(var o=t;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var h=l[a],g=h.getSnapshot;h=h.value;try{if(!Ot(g(),h))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function li(t,o,l,a){o&=~dc,o&=~Gi,t.suspendedLanes|=o,t.pingedLanes&=~o,a&&(t.warmLanes|=o),a=t.expirationTimes;for(var h=o;0<h;){var g=31-Lt(h),S=1<<g;a[g]=-1,h&=~S}l!==0&&Rd(t,l,o)}function or(){return(Ue&6)===0?(Rs(0),!1):!0}function yc(){if(Ae!==null){if(Pe===0)var t=Ae.return;else t=Ae,bn=xi=null,Uu(t),fo=null,cs=0,t=Ae;for(;t!==null;)Xp(t.alternate,t),t=t.return;Ae=null}}function Eo(t,o){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,gE(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Gn=0,yc(),Ve=t,Ae=l=An(t.current,null),we=o,Pe=0,Ht=null,ni=!1,_o=Yo(t,o),fc=!1,So=qt=dc=Gi=ii=Qe=0,Nt=ws=null,hc=!1,(o&8)!==0&&(o|=o&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=o;0<a;){var h=31-Lt(a),g=1<<h;o|=t[h],a&=~g}return On=o,bl(),l}function _m(t,o){ye=null,z.H=vs,o===co||o===Ul?(o=Oh(),Pe=3):o===Tu?(o=Oh(),Pe=4):Pe=o===Xu?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ht=o,Ae===null&&(Qe=1,Yl(t,Kt(o,t.current)))}function Sm(){var t=Pt.current;return t===null?!0:(we&4194048)===we?Wt===null:(we&62914560)===we||(we&536870912)!==0?t===Wt:!1}function Tm(){var t=z.H;return z.H=vs,t===null?vs:t}function Em(){var t=z.A;return z.A=KT,t}function sr(){Qe=4,ni||(we&4194048)!==we&&Pt.current!==null||(_o=!0),(ii&134217727)===0&&(Gi&134217727)===0||Ve===null||li(Ve,we,qt,!1)}function vc(t,o,l){var a=Ue;Ue|=2;var h=Tm(),g=Em();(Ve!==t||we!==o)&&(ir=null,Eo(t,o)),o=!1;var S=Qe;e:do try{if(Pe!==0&&Ae!==null){var E=Ae,w=Ht;switch(Pe){case 8:yc(),S=6;break e;case 3:case 2:case 9:case 6:Pt.current===null&&(o=!0);var U=Pe;if(Pe=0,Ht=null,Ao(t,E,w,U),l&&_o){S=0;break e}break;default:U=Pe,Pe=0,Ht=null,Ao(t,E,w,U)}}ZT(),S=Qe;break}catch(F){_m(t,F)}while(!0);return o&&t.shellSuspendCounter++,bn=xi=null,Ue=a,z.H=h,z.A=g,Ae===null&&(Ve=null,we=0,bl()),S}function ZT(){for(;Ae!==null;)Am(Ae)}function WT(t,o){var l=Ue;Ue|=2;var a=Tm(),h=Em();Ve!==t||we!==o?(ir=null,nr=Dt()+500,Eo(t,o)):_o=Yo(t,o);e:do try{if(Pe!==0&&Ae!==null){o=Ae;var g=Ht;t:switch(Pe){case 1:Pe=0,Ht=null,Ao(t,o,g,1);break;case 2:case 9:if(Uh(g)){Pe=0,Ht=null,Cm(o);break}o=function(){Pe!==2&&Pe!==9||Ve!==t||(Pe=7),gn(t)},g.then(o,o);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:Uh(g)?(Pe=0,Ht=null,Cm(o)):(Pe=0,Ht=null,Ao(t,o,g,7));break;case 5:var S=null;switch(Ae.tag){case 26:S=Ae.memoizedState;case 5:case 27:var E=Ae;if(S?ug(S):E.stateNode.complete){Pe=0,Ht=null;var w=E.sibling;if(w!==null)Ae=w;else{var U=E.return;U!==null?(Ae=U,lr(U)):Ae=null}break t}}Pe=0,Ht=null,Ao(t,o,g,5);break;case 6:Pe=0,Ht=null,Ao(t,o,g,6);break;case 8:yc(),Qe=6;break e;default:throw Error(s(462))}}jT();break}catch(F){_m(t,F)}while(!0);return bn=xi=null,z.H=a,z.A=h,Ue=l,Ae!==null?0:(Ve=null,we=0,bl(),Qe)}function jT(){for(;Ae!==null&&!ES();)Am(Ae)}function Am(t){var o=Yp(t.alternate,t,On);t.memoizedProps=t.pendingProps,o===null?lr(t):Ae=o}function Cm(t){var o=t,l=o.alternate;switch(o.tag){case 15:case 0:o=Bp(l,o,o.pendingProps,o.type,void 0,we);break;case 11:o=Bp(l,o,o.pendingProps,o.type.render,o.ref,we);break;case 5:Uu(o);default:Xp(l,o),o=Ae=Eh(o,On),o=Yp(l,o,On)}t.memoizedProps=t.pendingProps,o===null?lr(t):Ae=o}function Ao(t,o,l,a){bn=xi=null,Uu(o),fo=null,cs=0;var h=o.return;try{if(BT(t,h,o,l,we)){Qe=1,Yl(t,Kt(l,t.current)),Ae=null;return}}catch(g){if(h!==null)throw Ae=h,g;Qe=1,Yl(t,Kt(l,t.current)),Ae=null;return}o.flags&32768?(Re||a===1?t=!0:_o||(we&536870912)!==0?t=!1:(ni=t=!0,(a===2||a===9||a===3||a===6)&&(a=Pt.current,a!==null&&a.tag===13&&(a.flags|=16384))),bm(o,t)):lr(o)}function lr(t){var o=t;do{if((o.flags&32768)!==0){bm(o,ni);return}t=o.return;var l=FT(o.alternate,o,On);if(l!==null){Ae=l;return}if(o=o.sibling,o!==null){Ae=o;return}Ae=o=t}while(o!==null);Qe===0&&(Qe=5)}function bm(t,o){do{var l=$T(t.alternate,t);if(l!==null){l.flags&=32767,Ae=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(t=t.sibling,t!==null)){Ae=t;return}Ae=t=l}while(t!==null);Qe=6,Ae=null}function wm(t,o,l,a,h,g,S,E,w){t.cancelPendingCommit=null;do rr();while(ot!==0);if((Ue&6)!==0)throw Error(s(327));if(o!==null){if(o===t.current)throw Error(s(177));if(g=o.lanes|o.childLanes,g|=lu,DS(t,l,g,S,E,w),t===Ve&&(Ae=Ve=null,we=0),To=o,si=t,Gn=l,pc=g,mc=h,mm=a,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,iE(ul,function(){return Mm(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||a){a=z.T,z.T=null,h=j.p,j.p=2,S=Ue,Ue|=4;try{JT(t,o,l)}finally{Ue=S,j.p=h,z.T=a}}ot=1,xm(),Rm(),Nm()}}function xm(){if(ot===1){ot=0;var t=si,o=To,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=z.T,z.T=null;var a=j.p;j.p=2;var h=Ue;Ue|=4;try{rm(o,t);var g=Ic,S=hh(t.containerInfo),E=g.focusedElem,w=g.selectionRange;if(S!==E&&E&&E.ownerDocument&&dh(E.ownerDocument.documentElement,E)){if(w!==null&&tu(E)){var U=w.start,F=w.end;if(F===void 0&&(F=U),"selectionStart"in E)E.selectionStart=U,E.selectionEnd=Math.min(F,E.value.length);else{var K=E.ownerDocument||document,O=K&&K.defaultView||window;if(O.getSelection){var k=O.getSelection(),te=E.textContent.length,de=Math.min(w.start,te),Be=w.end===void 0?de:Math.min(w.end,te);!k.extend&&de>Be&&(S=Be,Be=de,de=S);var M=fh(E,de),R=fh(E,Be);if(M&&R&&(k.rangeCount!==1||k.anchorNode!==M.node||k.anchorOffset!==M.offset||k.focusNode!==R.node||k.focusOffset!==R.offset)){var D=K.createRange();D.setStart(M.node,M.offset),k.removeAllRanges(),de>Be?(k.addRange(D),k.extend(R.node,R.offset)):(D.setEnd(R.node,R.offset),k.addRange(D))}}}}for(K=[],k=E;k=k.parentNode;)k.nodeType===1&&K.push({element:k,left:k.scrollLeft,top:k.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var $=K[E];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}_r=!!Nc,Ic=Nc=null}finally{Ue=h,j.p=a,z.T=l}}t.current=o,ot=2}}function Rm(){if(ot===2){ot=0;var t=si,o=To,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=z.T,z.T=null;var a=j.p;j.p=2;var h=Ue;Ue|=4;try{nm(t,o.alternate,o)}finally{Ue=h,j.p=a,z.T=l}}ot=3}}function Nm(){if(ot===4||ot===3){ot=0,AS();var t=si,o=To,l=Gn,a=mm;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ot=5:(ot=0,To=si=null,Im(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(oi=null),Ga(l),o=o.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Jo,o,void 0,(o.current.flags&128)===128)}catch{}if(a!==null){o=z.T,h=j.p,j.p=2,z.T=null;try{for(var g=t.onRecoverableError,S=0;S<a.length;S++){var E=a[S];g(E.value,{componentStack:E.stack})}}finally{z.T=o,j.p=h}}(Gn&3)!==0&&rr(),gn(t),h=t.pendingLanes,(l&261930)!==0&&(h&42)!==0?t===gc?xs++:(xs=0,gc=t):xs=0,Rs(0)}}function Im(t,o){(t.pooledCacheLanes&=o)===0&&(o=t.pooledCache,o!=null&&(t.pooledCache=null,as(o)))}function rr(){return xm(),Rm(),Nm(),Mm()}function Mm(){if(ot!==5)return!1;var t=si,o=pc;pc=0;var l=Ga(Gn),a=z.T,h=j.p;try{j.p=32>l?32:l,z.T=null,l=mc,mc=null;var g=si,S=Gn;if(ot=0,To=si=null,Gn=0,(Ue&6)!==0)throw Error(s(331));var E=Ue;if(Ue|=4,dm(g.current),um(g,g.current,S,l),Ue=E,Rs(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Jo,g)}catch{}return!0}finally{j.p=h,z.T=a,Im(t,o)}}function Dm(t,o,l){o=Kt(l,o),o=Ku(t.stateNode,o,2),t=Wn(t,o,2),t!==null&&(Ko(t,2),gn(t))}function ke(t,o,l){if(t.tag===3)Dm(t,t,l);else for(;o!==null;){if(o.tag===3){Dm(o,t,l);break}else if(o.tag===1){var a=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(oi===null||!oi.has(a))){t=Kt(l,t),l=Up(2),a=Wn(o,l,2),a!==null&&(Lp(l,a,o,t),Ko(a,2),gn(a));break}}o=o.return}}function _c(t,o,l){var a=t.pingCache;if(a===null){a=t.pingCache=new XT;var h=new Set;a.set(o,h)}else h=a.get(o),h===void 0&&(h=new Set,a.set(o,h));h.has(l)||(fc=!0,h.add(l),t=eE.bind(null,t,o,l),o.then(t,t))}function eE(t,o,l){var a=t.pingCache;a!==null&&a.delete(o),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,Ve===t&&(we&l)===l&&(Qe===4||Qe===3&&(we&62914560)===we&&300>Dt()-tr?(Ue&2)===0&&Eo(t,0):dc|=l,So===we&&(So=0)),gn(t)}function Um(t,o){o===0&&(o=xd()),t=Ci(t,o),t!==null&&(Ko(t,o),gn(t))}function tE(t){var o=t.memoizedState,l=0;o!==null&&(l=o.retryLane),Um(t,l)}function nE(t,o){var l=0;switch(t.tag){case 31:case 13:var a=t.stateNode,h=t.memoizedState;h!==null&&(l=h.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(o),Um(t,l)}function iE(t,o){return Da(t,o)}var ar=null,Co=null,Sc=!1,ur=!1,Tc=!1,ri=0;function gn(t){t!==Co&&t.next===null&&(Co===null?ar=Co=t:Co=Co.next=t),ur=!0,Sc||(Sc=!0,sE())}function Rs(t,o){if(!Tc&&ur){Tc=!0;do for(var l=!1,a=ar;a!==null;){if(t!==0){var h=a.pendingLanes;if(h===0)var g=0;else{var S=a.suspendedLanes,E=a.pingedLanes;g=(1<<31-Lt(42|t)+1)-1,g&=h&~(S&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Pm(a,g))}else g=we,g=hl(a,a===Ve?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(g&3)===0||Yo(a,g)||(l=!0,Pm(a,g));a=a.next}while(l);Tc=!1}}function oE(){Lm()}function Lm(){ur=Sc=!1;var t=0;ri!==0&&mE()&&(t=ri);for(var o=Dt(),l=null,a=ar;a!==null;){var h=a.next,g=Om(a,o);g===0?(a.next=null,l===null?ar=h:l.next=h,h===null&&(Co=l)):(l=a,(t!==0||(g&3)!==0)&&(ur=!0)),a=h}ot!==0&&ot!==5||Rs(t),ri!==0&&(ri=0)}function Om(t,o){for(var l=t.suspendedLanes,a=t.pingedLanes,h=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var S=31-Lt(g),E=1<<S,w=h[S];w===-1?((E&l)===0||(E&a)!==0)&&(h[S]=MS(E,o)):w<=o&&(t.expiredLanes|=E),g&=~E}if(o=Ve,l=we,l=hl(t,t===o?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,l===0||t===o&&(Pe===2||Pe===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&Ua(a),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Yo(t,l)){if(o=l&-l,o===t.callbackPriority)return o;switch(a!==null&&Ua(a),Ga(l)){case 2:case 8:l=bd;break;case 32:l=ul;break;case 268435456:l=wd;break;default:l=ul}return a=Gm.bind(null,t),l=Da(l,a),t.callbackPriority=o,t.callbackNode=l,o}return a!==null&&a!==null&&Ua(a),t.callbackPriority=2,t.callbackNode=null,2}function Gm(t,o){if(ot!==0&&ot!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(rr()&&t.callbackNode!==l)return null;var a=we;return a=hl(t,t===Ve?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(ym(t,a,o),Om(t,Dt()),t.callbackNode!=null&&t.callbackNode===l?Gm.bind(null,t):null)}function Pm(t,o){if(rr())return null;ym(t,o,!0)}function sE(){yE(function(){(Ue&6)!==0?Da(Cd,oE):Lm()})}function Ec(){if(ri===0){var t=ao;t===0&&(t=cl,cl<<=1,(cl&261888)===0&&(cl=256)),ri=t}return ri}function km(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yl(""+t)}function Hm(t,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,t.id&&l.setAttribute("form",t.id),o.parentNode.insertBefore(l,o),t=new FormData(t),l.parentNode.removeChild(l),t}function lE(t,o,l,a,h){if(o==="submit"&&l&&l.stateNode===h){var g=km((h[Ct]||null).action),S=a.submitter;S&&(o=(o=S[Ct]||null)?km(o.formAction):S.getAttribute("formAction"),o!==null&&(g=o,S=null));var E=new Tl("action","action",null,a,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(ri!==0){var w=S?Hm(h,S):new FormData(h);Vu(l,{pending:!0,data:w,method:h.method,action:g},null,w)}}else typeof g=="function"&&(E.preventDefault(),w=S?Hm(h,S):new FormData(h),Vu(l,{pending:!0,data:w,method:h.method,action:g},g,w))},currentTarget:h}]})}}for(var Ac=0;Ac<su.length;Ac++){var Cc=su[Ac],rE=Cc.toLowerCase(),aE=Cc[0].toUpperCase()+Cc.slice(1);ln(rE,"on"+aE)}ln(gh,"onAnimationEnd"),ln(yh,"onAnimationIteration"),ln(vh,"onAnimationStart"),ln("dblclick","onDoubleClick"),ln("focusin","onFocus"),ln("focusout","onBlur"),ln(CT,"onTransitionRun"),ln(bT,"onTransitionStart"),ln(wT,"onTransitionCancel"),ln(_h,"onTransitionEnd"),Ki("onMouseEnter",["mouseout","mouseover"]),Ki("onMouseLeave",["mouseout","mouseover"]),Ki("onPointerEnter",["pointerout","pointerover"]),Ki("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ns));function qm(t,o){o=(o&4)!==0;for(var l=0;l<t.length;l++){var a=t[l],h=a.event;a=a.listeners;e:{var g=void 0;if(o)for(var S=a.length-1;0<=S;S--){var E=a[S],w=E.instance,U=E.currentTarget;if(E=E.listener,w!==g&&h.isPropagationStopped())break e;g=E,h.currentTarget=U;try{g(h)}catch(F){Cl(F)}h.currentTarget=null,g=w}else for(S=0;S<a.length;S++){if(E=a[S],w=E.instance,U=E.currentTarget,E=E.listener,w!==g&&h.isPropagationStopped())break e;g=E,h.currentTarget=U;try{g(h)}catch(F){Cl(F)}h.currentTarget=null,g=w}}}}function Ce(t,o){var l=o[Pa];l===void 0&&(l=o[Pa]=new Set);var a=t+"__bubble";l.has(a)||(Bm(o,t,2,!1),l.add(a))}function bc(t,o,l){var a=0;o&&(a|=4),Bm(l,t,a,o)}var cr="_reactListening"+Math.random().toString(36).slice(2);function wc(t){if(!t[cr]){t[cr]=!0,Ld.forEach(function(l){l!=="selectionchange"&&(uE.has(l)||bc(l,!1,t),bc(l,!0,t))});var o=t.nodeType===9?t:t.ownerDocument;o===null||o[cr]||(o[cr]=!0,bc("selectionchange",!1,o))}}function Bm(t,o,l,a){switch(gg(o)){case 2:var h=PE;break;case 8:h=kE;break;default:h=Bc}l=h.bind(null,o,l,t),h=void 0,!Ja||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(h=!0),a?h!==void 0?t.addEventListener(o,l,{capture:!0,passive:h}):t.addEventListener(o,l,!0):h!==void 0?t.addEventListener(o,l,{passive:h}):t.addEventListener(o,l,!1)}function xc(t,o,l,a,h){var g=a;if((o&1)===0&&(o&2)===0&&a!==null)e:for(;;){if(a===null)return;var S=a.tag;if(S===3||S===4){var E=a.stateNode.containerInfo;if(E===h)break;if(S===4)for(S=a.return;S!==null;){var w=S.tag;if((w===3||w===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;E!==null;){if(S=$i(E),S===null)return;if(w=S.tag,w===5||w===6||w===26||w===27){a=g=S;continue e}E=E.parentNode}}a=a.return}Jd(function(){var U=g,F=Fa(l),K=[];e:{var O=Sh.get(t);if(O!==void 0){var k=Tl,te=t;switch(t){case"keypress":if(_l(l)===0)break e;case"keydown":case"keyup":k=nT;break;case"focusin":te="focus",k=Qa;break;case"focusout":te="blur",k=Qa;break;case"beforeblur":case"afterblur":k=Qa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=FS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=sT;break;case gh:case yh:case vh:k=YS;break;case _h:k=rT;break;case"scroll":case"scrollend":k=VS;break;case"wheel":k=uT;break;case"copy":case"cut":case"paste":k=XS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Zd;break;case"toggle":case"beforetoggle":k=fT}var de=(o&4)!==0,Be=!de&&(t==="scroll"||t==="scrollend"),M=de?O!==null?O+"Capture":null:O;de=[];for(var R=U,D;R!==null;){var $=R;if(D=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||D===null||M===null||($=Zo(R,M),$!=null&&de.push(Is(R,$,D))),Be)break;R=R.return}0<de.length&&(O=new k(O,te,null,l,F),K.push({event:O,listeners:de}))}}if((o&7)===0){e:{if(O=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",O&&l!==za&&(te=l.relatedTarget||l.fromElement)&&($i(te)||te[Fi]))break e;if((k||O)&&(O=F.window===F?F:(O=F.ownerDocument)?O.defaultView||O.parentWindow:window,k?(te=l.relatedTarget||l.toElement,k=U,te=te?$i(te):null,te!==null&&(Be=u(te),de=te.tag,te!==Be||de!==5&&de!==27&&de!==6)&&(te=null)):(k=null,te=U),k!==te)){if(de=Xd,$="onMouseLeave",M="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(de=Zd,$="onPointerLeave",M="onPointerEnter",R="pointer"),Be=k==null?O:Qo(k),D=te==null?O:Qo(te),O=new de($,R+"leave",k,l,F),O.target=Be,O.relatedTarget=D,$=null,$i(F)===U&&(de=new de(M,R+"enter",te,l,F),de.target=D,de.relatedTarget=Be,$=de),Be=$,k&&te)t:{for(de=cE,M=k,R=te,D=0,$=M;$;$=de($))D++;$=0;for(var ue=R;ue;ue=de(ue))$++;for(;0<D-$;)M=de(M),D--;for(;0<$-D;)R=de(R),$--;for(;D--;){if(M===R||R!==null&&M===R.alternate){de=M;break t}M=de(M),R=de(R)}de=null}else de=null;k!==null&&Vm(K,O,k,de,!1),te!==null&&Be!==null&&Vm(K,Be,te,de,!0)}}e:{if(O=U?Qo(U):window,k=O.nodeName&&O.nodeName.toLowerCase(),k==="select"||k==="input"&&O.type==="file")var Ie=sh;else if(ih(O))if(lh)Ie=TT;else{Ie=_T;var se=vT}else k=O.nodeName,!k||k.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?U&&Va(U.elementType)&&(Ie=sh):Ie=ST;if(Ie&&(Ie=Ie(t,U))){oh(K,Ie,l,F);break e}se&&se(t,O,U),t==="focusout"&&U&&O.type==="number"&&U.memoizedProps.value!=null&&Ba(O,"number",O.value)}switch(se=U?Qo(U):window,t){case"focusin":(ih(se)||se.contentEditable==="true")&&(eo=se,nu=U,ss=null);break;case"focusout":ss=nu=eo=null;break;case"mousedown":iu=!0;break;case"contextmenu":case"mouseup":case"dragend":iu=!1,ph(K,l,F);break;case"selectionchange":if(AT)break;case"keydown":case"keyup":ph(K,l,F)}var _e;if(Wa)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else ji?th(t,l)&&(xe="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(Wd&&l.locale!=="ko"&&(ji||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&ji&&(_e=Yd()):($n=F,Ya="value"in $n?$n.value:$n.textContent,ji=!0)),se=fr(U,xe),0<se.length&&(xe=new Qd(xe,t,null,l,F),K.push({event:xe,listeners:se}),_e?xe.data=_e:(_e=nh(l),_e!==null&&(xe.data=_e)))),(_e=hT?pT(t,l):mT(t,l))&&(xe=fr(U,"onBeforeInput"),0<xe.length&&(se=new Qd("onBeforeInput","beforeinput",null,l,F),K.push({event:se,listeners:xe}),se.data=_e)),lE(K,t,U,l,F)}qm(K,o)})}function Is(t,o,l){return{instance:t,listener:o,currentTarget:l}}function fr(t,o){for(var l=o+"Capture",a=[];t!==null;){var h=t,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Zo(t,l),h!=null&&a.unshift(Is(t,h,g)),h=Zo(t,o),h!=null&&a.push(Is(t,h,g))),t.tag===3)return a;t=t.return}return[]}function cE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Vm(t,o,l,a,h){for(var g=o._reactName,S=[];l!==null&&l!==a;){var E=l,w=E.alternate,U=E.stateNode;if(E=E.tag,w!==null&&w===a)break;E!==5&&E!==26&&E!==27||U===null||(w=U,h?(U=Zo(l,g),U!=null&&S.unshift(Is(l,U,w))):h||(U=Zo(l,g),U!=null&&S.push(Is(l,U,w)))),l=l.return}S.length!==0&&t.push({event:o,listeners:S})}var fE=/\r\n?/g,dE=/\u0000|\uFFFD/g;function zm(t){return(typeof t=="string"?t:""+t).replace(fE,`
`).replace(dE,"")}function Fm(t,o){return o=zm(o),zm(t)===o}function qe(t,o,l,a,h,g){switch(l){case"children":typeof a=="string"?o==="body"||o==="textarea"&&a===""||Qi(t,a):(typeof a=="number"||typeof a=="bigint")&&o!=="body"&&Qi(t,""+a);break;case"className":ml(t,"class",a);break;case"tabIndex":ml(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":ml(t,l,a);break;case"style":Fd(t,a,g);break;case"data":if(o!=="object"){ml(t,"data",a);break}case"src":case"href":if(a===""&&(o!=="a"||l!=="href")){t.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(l);break}a=yl(""+a),t.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(o!=="input"&&qe(t,o,"name",h.name,h,null),qe(t,o,"formEncType",h.formEncType,h,null),qe(t,o,"formMethod",h.formMethod,h,null),qe(t,o,"formTarget",h.formTarget,h,null)):(qe(t,o,"encType",h.encType,h,null),qe(t,o,"method",h.method,h,null),qe(t,o,"target",h.target,h,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(l);break}a=yl(""+a),t.setAttribute(l,a);break;case"onClick":a!=null&&(t.onclick=Tn);break;case"onScroll":a!=null&&Ce("scroll",t);break;case"onScrollEnd":a!=null&&Ce("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}l=yl(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(l,""+a):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":a===!0?t.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(l,a):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(l,a):t.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(l):t.setAttribute(l,a);break;case"popover":Ce("beforetoggle",t),Ce("toggle",t),pl(t,"popover",a);break;case"xlinkActuate":Sn(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Sn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Sn(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Sn(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Sn(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Sn(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Sn(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":pl(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=qS.get(l)||l,pl(t,l,a))}}function Rc(t,o,l,a,h,g){switch(l){case"style":Fd(t,a,g);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(l=a.__html,l!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"children":typeof a=="string"?Qi(t,a):(typeof a=="number"||typeof a=="bigint")&&Qi(t,""+a);break;case"onScroll":a!=null&&Ce("scroll",t);break;case"onScrollEnd":a!=null&&Ce("scrollend",t);break;case"onClick":a!=null&&(t.onclick=Tn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Od.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(h=l.endsWith("Capture"),o=l.slice(2,h?l.length-7:void 0),g=t[Ct]||null,g=g!=null?g[l]:null,typeof g=="function"&&t.removeEventListener(o,g,h),typeof a=="function")){typeof g!="function"&&g!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(o,a,h);break e}l in t?t[l]=a:a===!0?t.setAttribute(l,""):pl(t,l,a)}}}function mt(t,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",t),Ce("load",t);var a=!1,h=!1,g;for(g in l)if(l.hasOwnProperty(g)){var S=l[g];if(S!=null)switch(g){case"src":a=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:qe(t,o,g,S,l,null)}}h&&qe(t,o,"srcSet",l.srcSet,l,null),a&&qe(t,o,"src",l.src,l,null);return;case"input":Ce("invalid",t);var E=g=S=h=null,w=null,U=null;for(a in l)if(l.hasOwnProperty(a)){var F=l[a];if(F!=null)switch(a){case"name":h=F;break;case"type":S=F;break;case"checked":w=F;break;case"defaultChecked":U=F;break;case"value":g=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,o));break;default:qe(t,o,a,F,l,null)}}qd(t,g,E,w,U,S,h,!1);return;case"select":Ce("invalid",t),a=S=g=null;for(h in l)if(l.hasOwnProperty(h)&&(E=l[h],E!=null))switch(h){case"value":g=E;break;case"defaultValue":S=E;break;case"multiple":a=E;default:qe(t,o,h,E,l,null)}o=g,l=S,t.multiple=!!a,o!=null?Xi(t,!!a,o,!1):l!=null&&Xi(t,!!a,l,!0);return;case"textarea":Ce("invalid",t),g=h=a=null;for(S in l)if(l.hasOwnProperty(S)&&(E=l[S],E!=null))switch(S){case"value":a=E;break;case"defaultValue":h=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:qe(t,o,S,E,l,null)}Vd(t,a,h,g);return;case"option":for(w in l)if(l.hasOwnProperty(w)&&(a=l[w],a!=null))switch(w){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:qe(t,o,w,a,l,null)}return;case"dialog":Ce("beforetoggle",t),Ce("toggle",t),Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":Ce("load",t);break;case"video":case"audio":for(a=0;a<Ns.length;a++)Ce(Ns[a],t);break;case"image":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"embed":case"source":case"link":Ce("error",t),Ce("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in l)if(l.hasOwnProperty(U)&&(a=l[U],a!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:qe(t,o,U,a,l,null)}return;default:if(Va(o)){for(F in l)l.hasOwnProperty(F)&&(a=l[F],a!==void 0&&Rc(t,o,F,a,l,void 0));return}}for(E in l)l.hasOwnProperty(E)&&(a=l[E],a!=null&&qe(t,o,E,a,l,null))}function hE(t,o,l,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,S=null,E=null,w=null,U=null,F=null;for(k in l){var K=l[k];if(l.hasOwnProperty(k)&&K!=null)switch(k){case"checked":break;case"value":break;case"defaultValue":w=K;default:a.hasOwnProperty(k)||qe(t,o,k,null,a,K)}}for(var O in a){var k=a[O];if(K=l[O],a.hasOwnProperty(O)&&(k!=null||K!=null))switch(O){case"type":g=k;break;case"name":h=k;break;case"checked":U=k;break;case"defaultChecked":F=k;break;case"value":S=k;break;case"defaultValue":E=k;break;case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(137,o));break;default:k!==K&&qe(t,o,O,k,a,K)}}qa(t,S,E,w,U,F,g,h);return;case"select":k=S=E=O=null;for(g in l)if(w=l[g],l.hasOwnProperty(g)&&w!=null)switch(g){case"value":break;case"multiple":k=w;default:a.hasOwnProperty(g)||qe(t,o,g,null,a,w)}for(h in a)if(g=a[h],w=l[h],a.hasOwnProperty(h)&&(g!=null||w!=null))switch(h){case"value":O=g;break;case"defaultValue":E=g;break;case"multiple":S=g;default:g!==w&&qe(t,o,h,g,a,w)}o=E,l=S,a=k,O!=null?Xi(t,!!l,O,!1):!!a!=!!l&&(o!=null?Xi(t,!!l,o,!0):Xi(t,!!l,l?[]:"",!1));return;case"textarea":k=O=null;for(E in l)if(h=l[E],l.hasOwnProperty(E)&&h!=null&&!a.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:qe(t,o,E,null,a,h)}for(S in a)if(h=a[S],g=l[S],a.hasOwnProperty(S)&&(h!=null||g!=null))switch(S){case"value":O=h;break;case"defaultValue":k=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==g&&qe(t,o,S,h,a,g)}Bd(t,O,k);return;case"option":for(var te in l)if(O=l[te],l.hasOwnProperty(te)&&O!=null&&!a.hasOwnProperty(te))switch(te){case"selected":t.selected=!1;break;default:qe(t,o,te,null,a,O)}for(w in a)if(O=a[w],k=l[w],a.hasOwnProperty(w)&&O!==k&&(O!=null||k!=null))switch(w){case"selected":t.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:qe(t,o,w,O,a,k)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in l)O=l[de],l.hasOwnProperty(de)&&O!=null&&!a.hasOwnProperty(de)&&qe(t,o,de,null,a,O);for(U in a)if(O=a[U],k=l[U],a.hasOwnProperty(U)&&O!==k&&(O!=null||k!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(137,o));break;default:qe(t,o,U,O,a,k)}return;default:if(Va(o)){for(var Be in l)O=l[Be],l.hasOwnProperty(Be)&&O!==void 0&&!a.hasOwnProperty(Be)&&Rc(t,o,Be,void 0,a,O);for(F in a)O=a[F],k=l[F],!a.hasOwnProperty(F)||O===k||O===void 0&&k===void 0||Rc(t,o,F,O,a,k);return}}for(var M in l)O=l[M],l.hasOwnProperty(M)&&O!=null&&!a.hasOwnProperty(M)&&qe(t,o,M,null,a,O);for(K in a)O=a[K],k=l[K],!a.hasOwnProperty(K)||O===k||O==null&&k==null||qe(t,o,K,O,a,k)}function $m(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,o=0,l=performance.getEntriesByType("resource"),a=0;a<l.length;a++){var h=l[a],g=h.transferSize,S=h.initiatorType,E=h.duration;if(g&&E&&$m(S)){for(S=0,E=h.responseEnd,a+=1;a<l.length;a++){var w=l[a],U=w.startTime;if(U>E)break;var F=w.transferSize,K=w.initiatorType;F&&$m(K)&&(w=w.responseEnd,S+=F*(w<E?1:(E-U)/(w-U)))}if(--a,o+=8*(g+S)/(h.duration/1e3),t++,10<t)break}}if(0<t)return o/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Nc=null,Ic=null;function dr(t){return t.nodeType===9?t:t.ownerDocument}function Jm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ym(t,o){if(t===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&o==="foreignObject"?0:t}function Mc(t,o){return t==="textarea"||t==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Dc=null;function mE(){var t=window.event;return t&&t.type==="popstate"?t===Dc?!1:(Dc=t,!0):(Dc=null,!1)}var Km=typeof setTimeout=="function"?setTimeout:void 0,gE=typeof clearTimeout=="function"?clearTimeout:void 0,Xm=typeof Promise=="function"?Promise:void 0,yE=typeof queueMicrotask=="function"?queueMicrotask:typeof Xm<"u"?function(t){return Xm.resolve(null).then(t).catch(vE)}:Km;function vE(t){setTimeout(function(){throw t})}function ai(t){return t==="head"}function Qm(t,o){var l=o,a=0;do{var h=l.nextSibling;if(t.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"||l==="/&"){if(a===0){t.removeChild(h),Ro(o);return}a--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")a++;else if(l==="html")Ms(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Ms(l);for(var g=l.firstChild;g;){var S=g.nextSibling,E=g.nodeName;g[Xo]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=S}}else l==="body"&&Ms(t.ownerDocument.body);l=h}while(l);Ro(o)}function Zm(t,o){var l=t;t=0;do{var a=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),a&&a.nodeType===8)if(l=a.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=a}while(l)}function Uc(t){var o=t.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Uc(l),ka(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function _E(t,o,l,a){for(;t.nodeType===1;){var h=l;if(t.nodeName.toLowerCase()!==o.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[Xo])switch(o){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(o==="input"&&t.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=jt(t.nextSibling),t===null)break}return null}function SE(t,o,l){if(o==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=jt(t.nextSibling),t===null))return null;return t}function Wm(t,o){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=jt(t.nextSibling),t===null))return null;return t}function Lc(t){return t.data==="$?"||t.data==="$~"}function Oc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function TE(t,o){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=o;else if(t.data!=="$?"||l.readyState!=="loading")o();else{var a=function(){o(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function jt(t){for(;t!=null;t=t.nextSibling){var o=t.nodeType;if(o===1||o===3)break;if(o===8){if(o=t.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return t}var Gc=null;function jm(t){t=t.nextSibling;for(var o=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(o===0)return jt(t.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}t=t.nextSibling}return null}function eg(t){t=t.previousSibling;for(var o=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return t;o--}else l!=="/$"&&l!=="/&"||o++}t=t.previousSibling}return null}function tg(t,o,l){switch(o=dr(l),t){case"html":if(t=o.documentElement,!t)throw Error(s(452));return t;case"head":if(t=o.head,!t)throw Error(s(453));return t;case"body":if(t=o.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ms(t){for(var o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ka(t)}var en=new Map,ng=new Set;function hr(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Pn=j.d;j.d={f:EE,r:AE,D:CE,C:bE,L:wE,m:xE,X:NE,S:RE,M:IE};function EE(){var t=Pn.f(),o=or();return t||o}function AE(t){var o=Ji(t);o!==null&&o.tag===5&&o.type==="form"?_p(o):Pn.r(t)}var bo=typeof document>"u"?null:document;function ig(t,o,l){var a=bo;if(a&&typeof o=="string"&&o){var h=Jt(o);h='link[rel="'+t+'"][href="'+h+'"]',typeof l=="string"&&(h+='[crossorigin="'+l+'"]'),ng.has(h)||(ng.add(h),t={rel:t,crossOrigin:l,href:o},a.querySelector(h)===null&&(o=a.createElement("link"),mt(o,"link",t),rt(o),a.head.appendChild(o)))}}function CE(t){Pn.D(t),ig("dns-prefetch",t,null)}function bE(t,o){Pn.C(t,o),ig("preconnect",t,o)}function wE(t,o,l){Pn.L(t,o,l);var a=bo;if(a&&t&&o){var h='link[rel="preload"][as="'+Jt(o)+'"]';o==="image"&&l&&l.imageSrcSet?(h+='[imagesrcset="'+Jt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(h+='[imagesizes="'+Jt(l.imageSizes)+'"]')):h+='[href="'+Jt(t)+'"]';var g=h;switch(o){case"style":g=wo(t);break;case"script":g=xo(t)}en.has(g)||(t=_({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:t,as:o},l),en.set(g,t),a.querySelector(h)!==null||o==="style"&&a.querySelector(Ds(g))||o==="script"&&a.querySelector(Us(g))||(o=a.createElement("link"),mt(o,"link",t),rt(o),a.head.appendChild(o)))}}function xE(t,o){Pn.m(t,o);var l=bo;if(l&&t){var a=o&&typeof o.as=="string"?o.as:"script",h='link[rel="modulepreload"][as="'+Jt(a)+'"][href="'+Jt(t)+'"]',g=h;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=xo(t)}if(!en.has(g)&&(t=_({rel:"modulepreload",href:t},o),en.set(g,t),l.querySelector(h)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Us(g)))return}a=l.createElement("link"),mt(a,"link",t),rt(a),l.head.appendChild(a)}}}function RE(t,o,l){Pn.S(t,o,l);var a=bo;if(a&&t){var h=Yi(a).hoistableStyles,g=wo(t);o=o||"default";var S=h.get(g);if(!S){var E={loading:0,preload:null};if(S=a.querySelector(Ds(g)))E.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":o},l),(l=en.get(g))&&Pc(t,l);var w=S=a.createElement("link");rt(w),mt(w,"link",t),w._p=new Promise(function(U,F){w.onload=U,w.onerror=F}),w.addEventListener("load",function(){E.loading|=1}),w.addEventListener("error",function(){E.loading|=2}),E.loading|=4,pr(S,o,a)}S={type:"stylesheet",instance:S,count:1,state:E},h.set(g,S)}}}function NE(t,o){Pn.X(t,o);var l=bo;if(l&&t){var a=Yi(l).hoistableScripts,h=xo(t),g=a.get(h);g||(g=l.querySelector(Us(h)),g||(t=_({src:t,async:!0},o),(o=en.get(h))&&kc(t,o),g=l.createElement("script"),rt(g),mt(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(h,g))}}function IE(t,o){Pn.M(t,o);var l=bo;if(l&&t){var a=Yi(l).hoistableScripts,h=xo(t),g=a.get(h);g||(g=l.querySelector(Us(h)),g||(t=_({src:t,async:!0,type:"module"},o),(o=en.get(h))&&kc(t,o),g=l.createElement("script"),rt(g),mt(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},a.set(h,g))}}function og(t,o,l,a){var h=(h=ve.current)?hr(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=wo(l.href),l=Yi(h).hoistableStyles,a=l.get(o),a||(a={type:"style",instance:null,count:0,state:null},l.set(o,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=wo(l.href);var g=Yi(h).hoistableStyles,S=g.get(t);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,S),(g=h.querySelector(Ds(t)))&&!g._p&&(S.instance=g,S.state.loading=5),en.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},en.set(t,l),g||ME(h,t,l,S.state))),o&&a===null)throw Error(s(528,""));return S}if(o&&a!==null)throw Error(s(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=xo(l),l=Yi(h).hoistableScripts,a=l.get(o),a||(a={type:"script",instance:null,count:0,state:null},l.set(o,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function wo(t){return'href="'+Jt(t)+'"'}function Ds(t){return'link[rel="stylesheet"]['+t+"]"}function sg(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function ME(t,o,l,a){t.querySelector('link[rel="preload"][as="style"]['+o+"]")?a.loading=1:(o=t.createElement("link"),a.preload=o,o.addEventListener("load",function(){return a.loading|=1}),o.addEventListener("error",function(){return a.loading|=2}),mt(o,"link",l),rt(o),t.head.appendChild(o))}function xo(t){return'[src="'+Jt(t)+'"]'}function Us(t){return"script[async]"+t}function lg(t,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var a=t.querySelector('style[data-href~="'+Jt(l.href)+'"]');if(a)return o.instance=a,rt(a),a;var h=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),rt(a),mt(a,"style",h),pr(a,l.precedence,t),o.instance=a;case"stylesheet":h=wo(l.href);var g=t.querySelector(Ds(h));if(g)return o.state.loading|=4,o.instance=g,rt(g),g;a=sg(l),(h=en.get(h))&&Pc(a,h),g=(t.ownerDocument||t).createElement("link"),rt(g);var S=g;return S._p=new Promise(function(E,w){S.onload=E,S.onerror=w}),mt(g,"link",a),o.state.loading|=4,pr(g,l.precedence,t),o.instance=g;case"script":return g=xo(l.src),(h=t.querySelector(Us(g)))?(o.instance=h,rt(h),h):(a=l,(h=en.get(g))&&(a=_({},l),kc(a,h)),t=t.ownerDocument||t,h=t.createElement("script"),rt(h),mt(h,"link",a),t.head.appendChild(h),o.instance=h);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(a=o.instance,o.state.loading|=4,pr(a,l.precedence,t));return o.instance}function pr(t,o,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=a.length?a[a.length-1]:null,g=h,S=0;S<a.length;S++){var E=a[S];if(E.dataset.precedence===o)g=E;else if(g!==h)break}g?g.parentNode.insertBefore(t,g.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(t,o.firstChild))}function Pc(t,o){t.crossOrigin==null&&(t.crossOrigin=o.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=o.referrerPolicy),t.title==null&&(t.title=o.title)}function kc(t,o){t.crossOrigin==null&&(t.crossOrigin=o.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=o.referrerPolicy),t.integrity==null&&(t.integrity=o.integrity)}var mr=null;function rg(t,o,l){if(mr===null){var a=new Map,h=mr=new Map;h.set(l,a)}else h=mr,a=h.get(l),a||(a=new Map,h.set(l,a));if(a.has(t))return a;for(a.set(t,null),l=l.getElementsByTagName(t),h=0;h<l.length;h++){var g=l[h];if(!(g[Xo]||g[ft]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(o)||"";S=t+S;var E=a.get(S);E?E.push(g):a.set(S,[g])}}return a}function ag(t,o,l){t=t.ownerDocument||t,t.head.insertBefore(l,o==="title"?t.querySelector("head > title"):null)}function DE(t,o,l){if(l===1||o.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return t=o.disabled,typeof o.precedence=="string"&&t==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function ug(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function UE(t,o,l,a){if(l.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var h=wo(a.href),g=o.querySelector(Ds(h));if(g){o=g._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(t.count++,t=gr.bind(t),o.then(t,t)),l.state.loading|=4,l.instance=g,rt(g);return}g=o.ownerDocument||o,a=sg(a),(h=en.get(h))&&Pc(a,h),g=g.createElement("link"),rt(g);var S=g;S._p=new Promise(function(E,w){S.onload=E,S.onerror=w}),mt(g,"link",a),l.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=gr.bind(t),o.addEventListener("load",l),o.addEventListener("error",l))}}var Hc=0;function LE(t,o){return t.stylesheets&&t.count===0&&vr(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var a=setTimeout(function(){if(t.stylesheets&&vr(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+o);0<t.imgBytes&&Hc===0&&(Hc=62500*pE());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&vr(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>Hc?50:800)+o);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(h)}}:null}function gr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vr(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var yr=null;function vr(t,o){t.stylesheets=null,t.unsuspend!==null&&(t.count++,yr=new Map,o.forEach(OE,t),yr=null,gr.call(t))}function OE(t,o){if(!(o.state.loading&4)){var l=yr.get(t);if(l)var a=l.get(null);else{l=new Map,yr.set(t,l);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var S=h[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),a=S)}a&&l.set(null,a)}h=o.instance,S=h.getAttribute("data-precedence"),g=l.get(S)||a,g===a&&l.set(null,h),l.set(S,h),this.count++,a=gr.bind(this),h.addEventListener("load",a),h.addEventListener("error",a),g?g.parentNode.insertBefore(h,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),o.state.loading|=4}}var Ls={$$typeof:H,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function GE(t,o,l,a,h,g,S,E,w){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=La(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=La(0),this.hiddenUpdates=La(null),this.identifierPrefix=a,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function cg(t,o,l,a,h,g,S,E,w,U,F,K){return t=new GE(t,o,l,S,w,U,F,K,E),o=1,g===!0&&(o|=24),g=Gt(3,null,null,o),t.current=g,g.stateNode=t,o=vu(),o.refCount++,t.pooledCache=o,o.refCount++,g.memoizedState={element:a,isDehydrated:l,cache:o},Eu(g),t}function fg(t){return t?(t=io,t):io}function dg(t,o,l,a,h,g){h=fg(h),a.context===null?a.context=h:a.pendingContext=h,a=Zn(o),a.payload={element:l},g=g===void 0?null:g,g!==null&&(a.callback=g),l=Wn(t,a,o),l!==null&&(It(l,t,o),ds(l,t,o))}function hg(t,o){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<o?l:o}}function qc(t,o){hg(t,o),(t=t.alternate)&&hg(t,o)}function pg(t){if(t.tag===13||t.tag===31){var o=Ci(t,67108864);o!==null&&It(o,t,67108864),qc(t,67108864)}}function mg(t){if(t.tag===13||t.tag===31){var o=Bt();o=Oa(o);var l=Ci(t,o);l!==null&&It(l,t,o),qc(t,o)}}var _r=!0;function PE(t,o,l,a){var h=z.T;z.T=null;var g=j.p;try{j.p=2,Bc(t,o,l,a)}finally{j.p=g,z.T=h}}function kE(t,o,l,a){var h=z.T;z.T=null;var g=j.p;try{j.p=8,Bc(t,o,l,a)}finally{j.p=g,z.T=h}}function Bc(t,o,l,a){if(_r){var h=Vc(a);if(h===null)xc(t,o,a,Sr,l),yg(t,a);else if(qE(h,t,o,l,a))a.stopPropagation();else if(yg(t,a),o&4&&-1<HE.indexOf(t)){for(;h!==null;){var g=Ji(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=_i(g.pendingLanes);if(S!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;S;){var w=1<<31-Lt(S);E.entanglements[1]|=w,S&=~w}gn(g),(Ue&6)===0&&(nr=Dt()+500,Rs(0))}}break;case 31:case 13:E=Ci(g,2),E!==null&&It(E,g,2),or(),qc(g,2)}if(g=Vc(a),g===null&&xc(t,o,a,Sr,l),g===h)break;h=g}h!==null&&a.stopPropagation()}else xc(t,o,a,null,l)}}function Vc(t){return t=Fa(t),zc(t)}var Sr=null;function zc(t){if(Sr=null,t=$i(t),t!==null){var o=u(t);if(o===null)t=null;else{var l=o.tag;if(l===13){if(t=d(o),t!==null)return t;t=null}else if(l===31){if(t=p(o),t!==null)return t;t=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;t=null}else o!==t&&(t=null)}}return Sr=t,null}function gg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(CS()){case Cd:return 2;case bd:return 8;case ul:case bS:return 32;case wd:return 268435456;default:return 32}default:return 32}}var Fc=!1,ui=null,ci=null,fi=null,Os=new Map,Gs=new Map,di=[],HE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yg(t,o){switch(t){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":Os.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gs.delete(o.pointerId)}}function Ps(t,o,l,a,h,g){return t===null||t.nativeEvent!==g?(t={blockedOn:o,domEventName:l,eventSystemFlags:a,nativeEvent:g,targetContainers:[h]},o!==null&&(o=Ji(o),o!==null&&pg(o)),t):(t.eventSystemFlags|=a,o=t.targetContainers,h!==null&&o.indexOf(h)===-1&&o.push(h),t)}function qE(t,o,l,a,h){switch(o){case"focusin":return ui=Ps(ui,t,o,l,a,h),!0;case"dragenter":return ci=Ps(ci,t,o,l,a,h),!0;case"mouseover":return fi=Ps(fi,t,o,l,a,h),!0;case"pointerover":var g=h.pointerId;return Os.set(g,Ps(Os.get(g)||null,t,o,l,a,h)),!0;case"gotpointercapture":return g=h.pointerId,Gs.set(g,Ps(Gs.get(g)||null,t,o,l,a,h)),!0}return!1}function vg(t){var o=$i(t.target);if(o!==null){var l=u(o);if(l!==null){if(o=l.tag,o===13){if(o=d(l),o!==null){t.blockedOn=o,Dd(t.priority,function(){mg(l)});return}}else if(o===31){if(o=p(l),o!==null){t.blockedOn=o,Dd(t.priority,function(){mg(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tr(t){if(t.blockedOn!==null)return!1;for(var o=t.targetContainers;0<o.length;){var l=Vc(t.nativeEvent);if(l===null){l=t.nativeEvent;var a=new l.constructor(l.type,l);za=a,l.target.dispatchEvent(a),za=null}else return o=Ji(l),o!==null&&pg(o),t.blockedOn=l,!1;o.shift()}return!0}function _g(t,o,l){Tr(t)&&l.delete(o)}function BE(){Fc=!1,ui!==null&&Tr(ui)&&(ui=null),ci!==null&&Tr(ci)&&(ci=null),fi!==null&&Tr(fi)&&(fi=null),Os.forEach(_g),Gs.forEach(_g)}function Er(t,o){t.blockedOn===o&&(t.blockedOn=null,Fc||(Fc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,BE)))}var Ar=null;function Sg(t){Ar!==t&&(Ar=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ar===t&&(Ar=null);for(var o=0;o<t.length;o+=3){var l=t[o],a=t[o+1],h=t[o+2];if(typeof a!="function"){if(zc(a||l)===null)continue;break}var g=Ji(l);g!==null&&(t.splice(o,3),o-=3,Vu(g,{pending:!0,data:h,method:l.method,action:a},a,h))}}))}function Ro(t){function o(w){return Er(w,t)}ui!==null&&Er(ui,t),ci!==null&&Er(ci,t),fi!==null&&Er(fi,t),Os.forEach(o),Gs.forEach(o);for(var l=0;l<di.length;l++){var a=di[l];a.blockedOn===t&&(a.blockedOn=null)}for(;0<di.length&&(l=di[0],l.blockedOn===null);)vg(l),l.blockedOn===null&&di.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var h=l[a],g=l[a+1],S=h[Ct]||null;if(typeof g=="function")S||Sg(l);else if(S){var E=null;if(g&&g.hasAttribute("formAction")){if(h=g,S=g[Ct]||null)E=S.formAction;else if(zc(h)!==null)continue}else E=S.action;typeof E=="function"?l[a+1]=E:(l.splice(a,3),a-=3),Sg(l)}}}function Tg(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function o(){h!==null&&(h(),h=null),a||setTimeout(l,20)}function l(){if(!a&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),h!==null&&(h(),h=null)}}}function $c(t){this._internalRoot=t}Cr.prototype.render=$c.prototype.render=function(t){var o=this._internalRoot;if(o===null)throw Error(s(409));var l=o.current,a=Bt();dg(l,a,t,o,null,null)},Cr.prototype.unmount=$c.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var o=t.containerInfo;dg(t.current,2,null,t,null,null),or(),o[Fi]=null}};function Cr(t){this._internalRoot=t}Cr.prototype.unstable_scheduleHydration=function(t){if(t){var o=Md();t={blockedOn:null,target:t,priority:o};for(var l=0;l<di.length&&o!==0&&o<di[l].priority;l++);di.splice(l,0,t),l===0&&vg(t)}};var Eg=e.version;if(Eg!=="19.2.4")throw Error(s(527,Eg,"19.2.4"));j.findDOMNode=function(t){var o=t._reactInternals;if(o===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(o),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var VE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var br=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!br.isDisabled&&br.supportsFiber)try{Jo=br.inject(VE),Ut=br}catch{}}return Hs.createRoot=function(t,o){if(!r(t))throw Error(s(299));var l=!1,a="",h=Np,g=Ip,S=Mp;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(a=o.identifierPrefix),o.onUncaughtError!==void 0&&(h=o.onUncaughtError),o.onCaughtError!==void 0&&(g=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=cg(t,1,!1,null,null,l,a,null,h,g,S,Tg),t[Fi]=o.current,wc(t),new $c(o)},Hs.hydrateRoot=function(t,o,l){if(!r(t))throw Error(s(299));var a=!1,h="",g=Np,S=Ip,E=Mp,w=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.formState!==void 0&&(w=l.formState)),o=cg(t,1,!0,o,l??null,a,h,w,g,S,E,Tg),o.context=fg(null),l=o.current,a=Bt(),a=Oa(a),h=Zn(a),h.callback=null,Wn(l,h,a),l=a,o.current.lanes=l,Ko(o,l),gn(o),t[Fi]=o.current,wc(t),new Cr(o)},Hs.version="19.2.4",Hs}var Dg;function jE(){if(Dg)return Yc.exports;Dg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yc.exports=WE(),Yc.exports}var eA=jE(),Qr=zf();const wr=FE(Qr);var gi=(n=>(n.SELECTION="SELECTION",n.LOADING="LOADING",n.GAMEPLAY="GAMEPLAY",n.GAME_OVER="GAME_OVER",n))(gi||{});const tA=[{id:"c1",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1560706560-59f7df8da891?q=80&w=1200&auto=format&fit=crop",stats:{strength:8,wits:7,charm:5},traits:["","",""],weakness:""},{id:"c2",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1535581652167-3d6693c0326e?q=80&w=1200&auto=format&fit=crop",stats:{strength:9,wits:5,charm:3},traits:["","",""],weakness:""},{id:"c3",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1509316975850-ff9c5deb0cd9?q=80&w=1200&auto=format&fit=crop",stats:{strength:3,wits:9,charm:8},traits:["","",""],weakness:""},{id:"c4",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1519074069444-1ba4fff66d16?q=80&w=1200&auto=format&fit=crop",stats:{strength:4,wits:8,charm:6},traits:["","",""],weakness:""},{id:"c5",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1636217989679-2c70092c7251?q=80&w=1200&auto=format&fit=crop",stats:{strength:9,wits:4,charm:6},traits:["","",""],weakness:""},{id:"c6",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1200&auto=format&fit=crop",stats:{strength:3,wits:7,charm:10},traits:["","",""],weakness:""},{id:"c7",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1605806616949-1e87b487bc2a?q=80&w=1200&auto=format&fit=crop",stats:{strength:7,wits:8,charm:2},traits:["","",""],weakness:""},{id:"c8",name:"",title:"",description:"",imageUrl:"https://images.unsplash.com/photo-1601362840469-51e4d8d58785?q=80&w=1200&auto=format&fit=crop",stats:{strength:2,wits:10,charm:4},traits:["","",""],weakness:""}],ff=[{id:"r1",title:"",type:"CONSTRAINT",description:"",active:!0},{id:"r2",title:"",type:"REALITY",description:"<3NPC>8",active:!0},{id:"r3",title:"",type:"RISK",description:"",active:!0},{id:"r4",title:"",type:"RISK",description:"23",active:!0},{id:"r5",title:"",type:"BONUS",description:"1",active:!0},{id:"r6",title:"",type:"REALITY",description:"",active:!1},{id:"r7",title:"",type:"CONSTRAINT",description:"",active:!1},{id:"r8",title:"",type:"CONSTRAINT",description:"",active:!0},{id:"r9",title:"",type:"BONUS",description:"50%",active:!1},{id:"r10",title:"",type:"REALITY",description:"10%",active:!1},{id:"r11",title:"",type:"RISK",description:"",active:!0},{id:"r12",title:"",type:"BONUS",description:"",active:!1}],Ug={text:"",choices:[{id:"opt1",text:"",consequence:"",cost:"",risk:""},{id:"opt2",text:"",consequence:"",risk:""},{id:"opt3",text:"",consequence:"",cost:"",risk:""}]},nA=n=>({1:"I",2:"II",3:"III",4:"IV",5:"V",6:"VI",7:"VII",8:"VIII"})[n]||"X",Lg=({character:n,onSelect:e,isSelected:i})=>{const s=parseInt(n.id.replace("c",""));return C.jsxs("div",{onClick:()=>e&&e(n),className:`
        relative w-72 h-[450px] rounded-xl overflow-hidden cursor-pointer transition-all duration-500 transform group
        ${i?"scale-105 ring-4 ring-[#D4AF37] shadow-[0_0_50px_rgba(212,175,55,0.4)] z-20":"hover:scale-105 hover:shadow-2xl hover:z-10"}
        border-[6px] border-[#D4AF37] bg-[#1a0f0f]
      `,children:[C.jsx("div",{className:"absolute top-0 w-full h-12 flex justify-center items-center z-20 pointer-events-none",children:C.jsx("div",{className:"bg-[#D4AF37] text-[#1a0f0f] px-4 pt-1 pb-2 rounded-b-lg font-display font-bold text-sm tracking-widest shadow-md",children:nA(s)})}),C.jsxs("div",{className:"absolute inset-0 bg-gray-900",children:[C.jsx("img",{src:n.imageUrl,alt:n.name,className:`
                    w-full h-full object-cover transition-transform duration-1000
                    ${i?"scale-110 grayscale-0":"grayscale-[0.5] sepia-[0.3] group-hover:grayscale-0 group-hover:scale-110"}
                `}),C.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/old-map.png')] opacity-30 mix-blend-overlay pointer-events-none"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1a0505] via-transparent to-[#1a0505] opacity-90 pointer-events-none"})]}),C.jsx("div",{className:"absolute top-2 left-2 text-[#D4AF37] z-20 opacity-80",children:C.jsx("i",{className:"fa-solid fa-star-of-life text-xs"})}),C.jsx("div",{className:"absolute top-2 right-2 text-[#D4AF37] z-20 opacity-80",children:C.jsx("i",{className:"fa-solid fa-star-of-life text-xs"})}),C.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 w-[90%] flex flex-col items-center justify-center z-20",children:C.jsxs("div",{className:"border-t border-b border-[#D4AF37] py-2 w-full text-center backdrop-blur-sm bg-black/40",children:[C.jsx("h3",{className:"text-xl font-bold font-display text-[#f0e6d2] uppercase tracking-wider",children:n.name}),C.jsx("p",{className:"text-[10px] uppercase font-bold tracking-[0.2em] text-[#D4AF37] mt-1",children:n.title})]})}),C.jsxs("div",{className:"absolute inset-0 bg-[#1a0505]/95 translate-y-full group-hover:translate-y-0 transition-transform duration-500 z-30 flex flex-col items-center justify-center text-paper p-6 text-center border-t-2 border-[#D4AF37]",children:[C.jsx("i",{className:"fa-solid fa-eye text-[#D4AF37] mb-2 text-xl"}),C.jsxs("p",{className:"italic font-serif text-sm mb-6 leading-relaxed opacity-90",children:['"',n.description,'"']}),C.jsxs("div",{className:"grid grid-cols-3 gap-2 w-full border-t border-[#D4AF37]/30 pt-4",children:[C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-lg font-display",children:n.stats.strength})]}),C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-lg font-display",children:n.stats.wits})]}),C.jsxs("div",{className:"flex flex-col items-center",children:[C.jsx("span",{className:"text-[10px] text-[#D4AF37] uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-lg font-display",children:n.stats.charm})]})]}),C.jsxs("div",{className:"mt-6 w-full text-left",children:[C.jsx("span",{className:"text-[10px] text-red-500 uppercase tracking-widest block mb-1",children:""}),C.jsx("span",{className:"text-xs text-stone-gray block font-serif italic",children:n.weakness})]})]})]})},iA=({rule:n,triggeredInfo:e})=>{const[i,s]=Qr.useState(!1),r=!!e,u=()=>{if(r)return"border-yellow-400";switch(n.type){case"CONSTRAINT":return"border-red-800";case"BONUS":return"border-green-700";case"RISK":return"border-orange-600";case"REALITY":return"border-purple-800";default:return"border-gray-800"}},d=()=>{switch(n.type){case"CONSTRAINT":return"fa-lock";case"BONUS":return"fa-gift";case"RISK":return"fa-dice-d20";case"REALITY":return"fa-scale-balanced"}};return C.jsxs("div",{className:`
        relative w-full mb-3 bg-[#F5DEB3] rounded-lg p-3 border-l-4 shadow-md 
        transform hover:-translate-y-1 transition-all duration-300
        ${u()}
        ${r?"ring-2 ring-yellow-400/60 shadow-[0_0_12px_rgba(250,204,21,0.3)] animate-pulse-once":""}
      `,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[C.jsxs("div",{className:"flex justify-between items-start mb-1",children:[C.jsxs("h4",{className:"font-bold text-[#4a0404] text-sm uppercase tracking-wider flex items-center gap-1.5",children:[n.title,r&&C.jsxs("span",{className:"inline-flex items-center text-[10px] bg-yellow-500 text-black px-1.5 py-0.5 rounded-full font-bold normal-case tracking-normal",children:[C.jsx("i",{className:"fa-solid fa-bolt mr-0.5 text-[8px]"}),""]})]}),C.jsx("i",{className:`fa-solid ${d()} text-[#8B4513] opacity-50`})]}),C.jsx("p",{className:"text-xs text-[#5c4033] leading-snug",children:n.description}),n.type==="REALITY"&&!r&&C.jsx("div",{className:"absolute -right-1 -top-1 w-3 h-3 bg-purple-600 rounded-full animate-pulse"}),r&&i&&C.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-full z-50 pointer-events-none",children:C.jsxs("div",{className:"bg-[#1a0505] border border-yellow-500/60 rounded-lg p-3 shadow-2xl text-left",children:[C.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[C.jsx("i",{className:"fa-solid fa-bolt text-yellow-400 text-xs"}),C.jsx("span",{className:"text-yellow-400 text-xs font-bold uppercase tracking-wider",children:""})]}),C.jsx("p",{className:"text-paper text-xs leading-relaxed",children:e.reason}),C.jsx("div",{className:"absolute -bottom-1.5 left-6 w-3 h-3 bg-[#1a0505] border-r border-b border-yellow-500/60 transform rotate-45"})]})})]})},Og=n=>{let e;const i=new Set,s=(m,v)=>{const _=typeof m=="function"?m(e):m;if(!Object.is(_,e)){const T=e;e=v??(typeof _!="object"||_===null)?_:Object.assign({},e,_),i.forEach(A=>A(e,T))}},r=()=>e,p={setState:s,getState:r,getInitialState:()=>y,subscribe:m=>(i.add(m),()=>i.delete(m))},y=e=n(s,r,p);return p},oA=(n=>n?Og(n):Og),sA=n=>n;function lA(n,e=sA){const i=wr.useSyncExternalStore(n.subscribe,wr.useCallback(()=>e(n.getState()),[n,e]),wr.useCallback(()=>e(n.getInitialState()),[n,e]));return wr.useDebugValue(i),i}const rA=n=>{const e=oA(n),i=s=>lA(e,s);return Object.assign(i,e),i},aA=(n=>rA);function Fv(n,e){let i;try{i=n()}catch{return}return{getItem:r=>{var u;const d=y=>y===null?null:JSON.parse(y,void 0),p=(u=i.getItem(r))!=null?u:null;return p instanceof Promise?p.then(d):d(p)},setItem:(r,u)=>i.setItem(r,JSON.stringify(u,void 0)),removeItem:r=>i.removeItem(r)}}const df=n=>e=>{try{const i=n(e);return i instanceof Promise?i:{then(s){return df(s)(i)},catch(s){return this}}}catch(i){return{then(s){return this},catch(s){return df(s)(i)}}}},uA=(n,e)=>(i,s,r)=>{let u={storage:Fv(()=>window.localStorage),partialize:x=>x,version:0,merge:(x,B)=>({...B,...x}),...e},d=!1,p=0;const y=new Set,m=new Set;let v=u.storage;if(!v)return n((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),i(...x)},s,r);const _=()=>{const x=u.partialize({...s()});return v.setItem(u.name,{state:x,version:u.version})},T=r.setState;r.setState=(x,B)=>(T(x,B),_());const A=n((...x)=>(i(...x),_()),s,r);r.getInitialState=()=>A;let b;const I=()=>{var x,B;if(!v)return;const V=++p;d=!1,y.forEach(G=>{var P;return G((P=s())!=null?P:A)});const H=((B=u.onRehydrateStorage)==null?void 0:B.call(u,(x=s())!=null?x:A))||void 0;return df(v.getItem.bind(v))(u.name).then(G=>{if(G)if(typeof G.version=="number"&&G.version!==u.version){if(u.migrate){const P=u.migrate(G.state,G.version);return P instanceof Promise?P.then(W=>[!0,W]):[!0,P]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,G.state];return[!1,void 0]}).then(G=>{var P;if(V!==p)return;const[W,J]=G;if(b=u.merge(J,(P=s())!=null?P:A),i(b,!0),W)return _()}).then(()=>{V===p&&(H==null||H(b,void 0),b=s(),d=!0,m.forEach(G=>G(b)))}).catch(G=>{V===p&&(H==null||H(void 0,G))})};return r.persist={setOptions:x=>{u={...u,...x},x.storage&&(v=x.storage)},clearStorage:()=>{v==null||v.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>I(),hasHydrated:()=>d,onHydrate:x=>(y.add(x),()=>{y.delete(x)}),onFinishHydration:x=>(m.add(x),()=>{m.delete(x)})},u.skipHydration||I(),b||A},cA=uA,fA=Fv(()=>localStorage),dA={phase:gi.SELECTION,character:null,rules:ff,storyLog:[],currentStory:null,realityStats:{credibility:5,stress:2,connections:3},turnCount:0,maxTurns:10,finalSummary:void 0,loading:!1,currentTriggeredRules:[],showAiSettings:!1,provider:"gemini",geminiKey:"",openaiConfig:{apiKey:"",baseUrl:"https://api.openai.com/v1",model:"gpt-4-turbo-preview"}},Le=aA()(cA(n=>({...dA,setPhase:e=>n({phase:e}),setCharacter:e=>n({character:e}),setRules:e=>n(i=>({rules:typeof e=="function"?e(i.rules):e})),setStoryLog:e=>n(i=>({storyLog:typeof e=="function"?e(i.storyLog):e})),setCurrentStory:e=>n({currentStory:e}),setRealityStats:e=>n(i=>({realityStats:typeof e=="function"?e(i.realityStats):e})),setTurnCount:e=>n({turnCount:e}),setMaxTurns:e=>n({maxTurns:e}),setFinalSummary:e=>n({finalSummary:e}),setLoading:e=>n({loading:e}),setCurrentTriggeredRules:e=>n({currentTriggeredRules:e}),updateGameState:e=>n(i=>e(i)),resetGame:()=>n({phase:gi.SELECTION,character:null,storyLog:[],currentStory:null,turnCount:0,finalSummary:void 0,realityStats:{credibility:5,stress:2,connections:3},rules:ff,loading:!1,currentTriggeredRules:[]}),startNewGame:e=>n({phase:gi.GAMEPLAY,character:e,currentStory:Ug,storyLog:[Ug],turnCount:1,realityStats:{credibility:5,stress:2,connections:3},rules:ff,finalSummary:void 0,loading:!1,currentTriggeredRules:[]}),setShowAiSettings:e=>n({showAiSettings:e}),setProvider:e=>n({provider:e}),setGeminiKey:e=>n({geminiKey:e}),setOpenaiConfig:e=>n(i=>({openaiConfig:typeof e=="function"?e(i.openaiConfig):e}))}),{name:"character-card-game-store",storage:fA,partialize:n=>({phase:n.phase,character:n.character,rules:n.rules,storyLog:n.storyLog,currentStory:n.currentStory,realityStats:n.realityStats,turnCount:n.turnCount,maxTurns:n.maxTurns,finalSummary:n.finalSummary,provider:n.provider,geminiKey:n.geminiKey,openaiConfig:n.openaiConfig})})),hA=()=>Le(n=>n.phase),pA=()=>Le(n=>n.character),mA=()=>Le(n=>n.rules),gA=()=>Le(n=>n.storyLog),yA=()=>Le(n=>n.currentStory),vA=()=>Le(n=>n.realityStats),_A=()=>Le(n=>n.turnCount),SA=()=>Le(n=>n.maxTurns),TA=()=>Le(n=>n.finalSummary),EA=()=>Le(n=>n.loading),AA=()=>Le(n=>n.currentTriggeredRules),CA=()=>Le(n=>n.showAiSettings),$v=()=>Le(n=>n.provider),Jv=()=>Le(n=>n.geminiKey),Yv=()=>Le(n=>n.openaiConfig),bA=()=>Le(n=>n.setPhase),wA=()=>Le(n=>n.setCharacter),xA=()=>Le(n=>n.setRules),RA=()=>Le(n=>n.setStoryLog),NA=()=>Le(n=>n.setCurrentStory),IA=()=>Le(n=>n.setRealityStats),MA=()=>Le(n=>n.setTurnCount),DA=()=>Le(n=>n.setFinalSummary),UA=()=>Le(n=>n.setLoading),LA=()=>Le(n=>n.setCurrentTriggeredRules),OA=()=>Le(n=>n.resetGame),GA=()=>Le(n=>n.startNewGame),Kv=()=>Le(n=>n.setShowAiSettings),PA=()=>Le(n=>n.setProvider),kA=()=>Le(n=>n.setGeminiKey),HA=()=>Le(n=>n.setOpenaiConfig),qA=()=>{const n=CA(),e=Kv(),i=$v(),s=PA(),r=Jv(),u=kA(),d=Yv(),p=HA(),y=()=>e(!1);return n?C.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:C.jsxs("div",{className:"bg-[#1a0f0f] border-4 border-double border-gold rounded-lg w-full max-w-md shadow-[0_0_50px_rgba(212,175,55,0.3)] overflow-hidden animate-fade-in",children:[C.jsxs("div",{className:"p-6 border-b border-gold/30 flex items-center justify-between bg-velvet-red/20",children:[C.jsxs("h3",{className:"font-display text-2xl text-gold flex items-center gap-2 uppercase tracking-widest",children:[C.jsx("i",{className:"fa-solid fa-cog"}),"AI "]}),C.jsx("button",{onClick:y,className:"text-gold/60 hover:text-gold p-2 rounded-full hover:bg-gold/10 transition-colors",children:C.jsx("i",{className:"fa-solid fa-times text-xl"})})]}),C.jsxs("div",{className:"p-6 space-y-6 bg-[#0f0303]",children:[C.jsxs("div",{className:"space-y-3",children:[C.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-brown-600 rounded-lg cursor-pointer hover:border-gold transition-colors bg-brown-800/30",children:[C.jsx("input",{type:"radio",name:"provider",checked:i==="gemini",onChange:()=>s("gemini"),className:"w-4 h-4 text-gold focus:ring-gold accent-gold"}),C.jsxs("div",{className:"flex-1",children:[C.jsx("span",{className:"block text-base font-display text-paper",children:"Google Gemini"}),C.jsx("span",{className:"block text-xs text-stone-gray",children:""})]})]}),C.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-brown-600 rounded-lg cursor-pointer hover:border-gold transition-colors bg-brown-800/30",children:[C.jsx("input",{type:"radio",name:"provider",checked:i==="openai",onChange:()=>s("openai"),className:"w-4 h-4 text-gold focus:ring-gold accent-gold"}),C.jsxs("div",{className:"flex-1",children:[C.jsx("span",{className:"block text-base font-display text-paper",children:"OpenAI"}),C.jsx("span",{className:"block text-xs text-stone-gray",children:" API Key"})]})]})]}),i==="gemini"&&C.jsx("div",{className:"space-y-4 pt-4 border-t border-brown-600 animate-fade-in",children:C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-xs font-bold text-gold uppercase tracking-wider",children:"API Key ()"}),C.jsx("input",{type:"password",value:r,onChange:m=>u(m.target.value),placeholder:" Key...",className:"w-full px-4 py-3 text-sm bg-brown-800/50 border-2 border-brown-600 text-paper rounded-lg focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-all placeholder-stone-gray/50"}),C.jsx("p",{className:"text-[10px] text-stone-gray italic",children:" Google Gemini API Key"})]})}),i==="openai"&&C.jsxs("div",{className:"space-y-4 pt-4 border-t border-brown-600 animate-fade-in",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-xs font-bold text-gold uppercase tracking-wider",children:"Base URL"}),C.jsx("input",{type:"text",value:d.baseUrl,onChange:m=>p(v=>({...v,baseUrl:m.target.value})),placeholder:"https://api.openai.com/v1",className:"w-full px-4 py-3 text-sm bg-brown-800/50 border-2 border-brown-600 text-paper rounded-lg focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-all"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("label",{className:"text-xs font-bold text-gold uppercase tracking-wider",children:["API Key ",C.jsx("span",{className:"text-red-500",children:"*"})]}),C.jsx("input",{type:"password",value:d.apiKey,onChange:m=>p(v=>({...v,apiKey:m.target.value})),placeholder:"sk-...",className:"w-full px-4 py-3 text-sm bg-brown-800/50 border-2 border-brown-600 text-paper rounded-lg focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-all"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-xs font-bold text-gold uppercase tracking-wider",children:""}),C.jsx("input",{type:"text",value:d.model,onChange:m=>p(v=>({...v,model:m.target.value})),placeholder:"gpt-4-turbo-preview",className:"w-full px-4 py-3 text-sm bg-brown-800/50 border-2 border-brown-600 text-paper rounded-lg focus:ring-2 focus:ring-gold focus:border-gold outline-none transition-all"})]})]})]}),C.jsx("div",{className:"p-4 bg-velvet-red/20 border-t border-gold/30 flex justify-end",children:C.jsx("button",{onClick:y,className:"px-8 py-3 bg-gold hover:bg-white text-black font-bold font-display uppercase tracking-widest transition-colors rounded shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.5)]",children:""})})]})}):null};var BA={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let VA,zA;function FA(){return{geminiUrl:VA,vertexUrl:zA}}function $A(n,e,i,s){var r,u;if(!(n!=null&&n.baseUrl)){const d=FA();return e?(r=d.vertexUrl)!==null&&r!==void 0?r:i:(u=d.geminiUrl)!==null&&u!==void 0?u:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bn{}function ee(n,e){const i=/\{([^}]+)\}/g;return n.replace(i,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const u=e[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function f(n,e,i){for(let u=0;u<e.length-1;u++){const d=e[u];if(d.endsWith("[]")){const p=d.slice(0,-2);if(!(p in n))if(Array.isArray(i))n[p]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(n[p])){const y=n[p];if(Array.isArray(i))for(let m=0;m<y.length;m++){const v=y[m];f(v,e.slice(u+1),i[m])}else for(const m of y)f(m,e.slice(u+1),i)}return}else if(d.endsWith("[0]")){const p=d.slice(0,-3);p in n||(n[p]=[{}]);const y=n[p];f(y[0],e.slice(u+1),i);return}(!n[d]||typeof n[d]!="object")&&(n[d]={}),n=n[d]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===r)return;if(typeof r=="object"&&typeof i=="object"&&r!==null&&i!==null)Object.assign(r,i);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(n,i):n[s]=i}function c(n,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return i;const r=e[s];if(r.endsWith("[]")){const u=r.slice(0,-2);if(u in n){const d=n[u];return Array.isArray(d)?d.map(p=>c(p,e.slice(s+1),i)):i}else return i}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return i;throw s}}function JA(n,e){for(const[i,s]of Object.entries(e)){const r=i.split("."),u=s.split("."),d=new Set;let p=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){p=y;break}if(p!==-1&&u.length>p)for(let y=p;y<u.length;y++){const m=u[y];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&d.add(m)}hf(n,r,u,0,d)}}function hf(n,e,i,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const u=e[s];if(u.endsWith("[]")){const d=u.slice(0,-2),p=n;if(d in p&&Array.isArray(p[d]))for(const y of p[d])hf(y,e,i,s+1,r)}else if(u==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const d=n,p=Object.keys(d).filter(m=>!m.startsWith("_")&&!r.has(m)),y={};for(const m of p)y[m]=d[m];for(const[m,v]of Object.entries(y)){const _=[];for(const T of i.slice(s))T==="*"?_.push(m):_.push(T);f(d,_,v)}for(const m of p)delete d[m]}}else{const d=n;u in d&&hf(d[u],e,i,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ff(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YA(n){const e={},i=c(n,["operationName"]);i!=null&&f(e,["operationName"],i);const s=c(n,["resourceName"]);return s!=null&&f(e,["_url","resourceName"],s),e}function KA(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const r=c(n,["done"]);r!=null&&f(e,["done"],r);const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["response","generateVideoResponse"]);return d!=null&&f(e,["response"],QA(d)),e}function XA(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const r=c(n,["done"]);r!=null&&f(e,["done"],r);const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["response"]);return d!=null&&f(e,["response"],ZA(d)),e}function QA(n){const e={},i=c(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>WA(d))),f(e,["generatedVideos"],u)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function ZA(n){const e={},i=c(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>jA(d))),f(e,["generatedVideos"],u)}const s=c(n,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const r=c(n,["raiMediaFilteredReasons"]);return r!=null&&f(e,["raiMediaFilteredReasons"],r),e}function WA(n){const e={},i=c(n,["video"]);return i!=null&&f(e,["video"],sC(i)),e}function jA(n){const e={},i=c(n,["_self"]);return i!=null&&f(e,["video"],lC(i)),e}function eC(n){const e={},i=c(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function tC(n){const e={},i=c(n,["operationName"]);return i!=null&&f(e,["_url","operationName"],i),e}function nC(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const r=c(n,["done"]);r!=null&&f(e,["done"],r);const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["response"]);return d!=null&&f(e,["response"],iC(d)),e}function iC(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["parent"]);s!=null&&f(e,["parent"],s);const r=c(n,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function Xv(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const r=c(n,["done"]);r!=null&&f(e,["done"],r);const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["response"]);return d!=null&&f(e,["response"],oC(d)),e}function oC(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["parent"]);s!=null&&f(e,["parent"],s);const r=c(n,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function sC(n){const e={},i=c(n,["uri"]);i!=null&&f(e,["uri"],i);const s=c(n,["encodedVideo"]);s!=null&&f(e,["videoBytes"],Ff(s));const r=c(n,["encoding"]);return r!=null&&f(e,["mimeType"],r),e}function lC(n){const e={},i=c(n,["gcsUri"]);i!=null&&f(e,["uri"],i);const s=c(n,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],Ff(s));const r=c(n,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Gg;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Gg||(Gg={}));var Pg;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Pg||(Pg={}));var kg;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(kg||(kg={}));var Se;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Se||(Se={}));var Hg;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Hg||(Hg={}));var qg;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(qg||(qg={}));var Bg;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Bg||(Bg={}));var Vg;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Vg||(Vg={}));var zg;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(zg||(zg={}));var Fg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Fg||(Fg={}));var $g;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})($g||($g={}));var Jg;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Jg||(Jg={}));var Yg;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Yg||(Yg={}));var Kg;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Kg||(Kg={}));var Xg;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Xg||(Xg={}));var Qg;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Qg||(Qg={}));var Zg;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Zg||(Zg={}));var Wg;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Wg||(Wg={}));var jg;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(jg||(jg={}));var ey;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(ey||(ey={}));var ty;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ty||(ty={}));var Zr;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Zr||(Zr={}));var ny;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ny||(ny={}));var iy;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(iy||(iy={}));var oy;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(oy||(oy={}));var pf;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(pf||(pf={}));var sy;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(sy||(sy={}));var ly;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ly||(ly={}));var mf;(function(n){n.COLLECTION="COLLECTION"})(mf||(mf={}));var ry;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ry||(ry={}));var ay;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ay||(ay={}));var uy;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(uy||(uy={}));var cy;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(cy||(cy={}));var fy;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(fy||(fy={}));var dy;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(dy||(dy={}));var hy;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(hy||(hy={}));var py;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(py||(py={}));var my;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(my||(my={}));var gy;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(gy||(gy={}));var yy;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(yy||(yy={}));var vy;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(vy||(vy={}));var _y;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(_y||(_y={}));var Sy;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(Sy||(Sy={}));var Ty;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Ty||(Ty={}));var Ey;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Ey||(Ey={}));var Ay;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(Ay||(Ay={}));var Cy;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Cy||(Cy={}));var by;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(by||(by={}));var wy;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(wy||(wy={}));var xy;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(xy||(xy={}));var Ry;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ry||(Ry={}));var Ny;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ny||(Ny={}));var Iy;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Iy||(Iy={}));var My;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(My||(My={}));var Dy;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Dy||(Dy={}));var Uy;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Uy||(Uy={}));var Go;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Go||(Go={}));class gf{constructor(e){const i={};for(const s of e.headers.entries())i[s[0]]=s[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class qs{get text(){var e,i,s,r,u,d,p,y;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const T of(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[A,b]of Object.entries(T))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(b!==null||b!==void 0)&&_.push(A);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,m+=T.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,i,s,r,u,d,p,y;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[T,A]of Object.entries(_))T!=="inlineData"&&(A!==null||A!==void 0)&&v.push(T);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,i,s,r,u,d,p,y;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,i,s,r,u,d,p,y,m;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,i,s,r,u,d,p,y,m;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(p=(d=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Ly{}class Oy{}class rC{}class aC{}class uC{}class cC{}class Gy{}class Py{}class ky{}class fC{}class Wr{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Wr;let r;const u=e;return i?r=XA(u):r=KA(u),Object.assign(s,r),s}}class Hy{}class qy{}class By{}class Vy{}class dC{}class hC{}class pC{}class $f{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new $f,u=nC(e);return Object.assign(s,u),s}}class mC{}class gC{}class yC{}class vC{}class zy{}class _C{get text(){var e,i,s;let r="",u=!1;const d=[];for(const p of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[y,m]of Object.entries(p))y!=="text"&&y!=="thought"&&m!==null&&d.push(y);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;u=!0,r+=p.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var e,i,s;let r="";const u=[];for(const d of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[p,y]of Object.entries(d))p!=="inlineData"&&y!==null&&u.push(p);d.inlineData&&typeof d.inlineData.data=="string"&&(r+=atob(d.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class SC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Jf{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Jf,u=Xv(e);return Object.assign(s,u),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function De(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Qv(n,e){const i=De(n,e);return i?i.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}`:i.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${i}`:i:""}function Zv(n){return Array.isArray(n)?n.map(e=>jr(e)):[jr(n)]}function jr(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Wv(n){const e=jr(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jv(n){const e=jr(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Fy(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function e0(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Fy(e)):[Fy(n)]}function yf(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function $y(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Jy(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function St(n){if(n==null)throw new Error("ContentUnion is required");return yf(n)?n:{role:"user",parts:e0(n)}}function Yf(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const s=St(i);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const i=St(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>St(i)):[St(e)]}function nn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if($y(n)||Jy(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[St(n)]}const e=[],i=[],s=yf(n[0]);for(const r of n){const u=yf(r);if(u!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)e.push(r);else{if($y(r)||Jy(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return s||e.push({role:"user",parts:e0(i)}),e}function TC(n,e){n.includes("null")&&(e.nullable=!0);const i=n.filter(s=>s!=="null");if(i.length===1)e.type=Object.values(Se).includes(i[0].toUpperCase())?i[0].toUpperCase():Se.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of i)e.anyOf.push({type:Object.values(Se).includes(s.toUpperCase())?s.toUpperCase():Se.TYPE_UNSPECIFIED})}}function ko(n){const e={},i=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=n.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(e.nullable=!0,n=u[1]):u[1].type==="null"&&(e.nullable=!0,n=u[0])),n.type instanceof Array&&TC(n.type,e);for(const[d,p]of Object.entries(n))if(p!=null)if(d=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(Se).includes(p.toUpperCase())?p.toUpperCase():Se.TYPE_UNSPECIFIED}else if(i.includes(d))e[d]=ko(p);else if(s.includes(d)){const y=[];for(const m of p){if(m.type=="null"){e.nullable=!0;continue}y.push(ko(m))}e[d]=y}else if(r.includes(d)){const y={};for(const[m,v]of Object.entries(p))y[m]=ko(v);e[d]=y}else{if(d==="additionalProperties")continue;e[d]=p}return e}function Kf(n){return ko(n)}function Xf(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Qf(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function qo(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ko(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ko(e.response));return n}function Bo(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of n)e.push(i);return e}function EC(n,e,i,s=1){const r=!e.startsWith(`${i}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}/${e}`:e:r?`${i}/${e}`:e}function Vn(n,e){if(typeof e!="string")throw new Error("name must be a string");return EC(n,e,"cachedContents")}function t0(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function yi(n){return Ff(n)}function AC(n){return n!=null&&typeof n=="object"&&"name"in n}function CC(n){return n!=null&&typeof n=="object"&&"video"in n}function bC(n){return n!=null&&typeof n=="object"&&"uri"in n}function n0(n){var e;let i;if(AC(n)&&(i=n.name),!(bC(n)&&(i=n.uri,i===void 0))&&!(CC(n)&&(i=(e=n.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof n=="string"&&(i=n),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const r=i.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${i}`);i=r[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function i0(n,e){let i;return n.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function o0(n){for(const e of["models","tunedModels","publisherModels"])if(wC(n,e))return n[e];return[]}function wC(n,e){return n!==null&&typeof n=="object"&&e in n}function xC(n,e={}){const i=n,s={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(s.responseJsonSchema=i.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function RC(n,e={}){const i=[],s=new Set;for(const r of n){const u=r.name;if(s.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);s.add(u);const d=xC(r,e);d.functionDeclarations&&i.push(...d.functionDeclarations)}return{functionDeclarations:i}}function s0(n,e){let i;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const s=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,r=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function NC(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function l0(n){if(typeof n!="object"||n===null)return{};const e=n,i=e.inlinedResponses;if(typeof i!="object"||i===null)return n;const r=i.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let u=!1;for(const d of r){if(typeof d!="object"||d===null)continue;const y=d.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){u=!0;break}}return u&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Vo(n,e){const i=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function r0(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IC(n){const e={},i=c(n,["responsesFile"]);i!=null&&f(e,["fileName"],i);const s=c(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>cb(d))),f(e,["inlinedResponses"],u)}const r=c(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["inlinedEmbedContentResponses"],u)}return e}function MC(n){const e={},i=c(n,["predictionsFormat"]);i!=null&&f(e,["format"],i);const s=c(n,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const r=c(n,["bigqueryDestination","outputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function DC(n){const e={},i=c(n,["format"]);i!=null&&f(e,["predictionsFormat"],i);const s=c(n,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const r=c(n,["bigqueryUri"]);if(r!=null&&f(e,["bigqueryDestination","outputUri"],r),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Hr(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const r=c(n,["metadata","state"]);r!=null&&f(e,["state"],r0(r));const u=c(n,["metadata","createTime"]);u!=null&&f(e,["createTime"],u);const d=c(n,["metadata","endTime"]);d!=null&&f(e,["endTime"],d);const p=c(n,["metadata","updateTime"]);p!=null&&f(e,["updateTime"],p);const y=c(n,["metadata","model"]);y!=null&&f(e,["model"],y);const m=c(n,["metadata","output"]);return m!=null&&f(e,["dest"],IC(l0(m))),e}function vf(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["displayName"]);s!=null&&f(e,["displayName"],s);const r=c(n,["state"]);r!=null&&f(e,["state"],r0(r));const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["createTime"]);d!=null&&f(e,["createTime"],d);const p=c(n,["startTime"]);p!=null&&f(e,["startTime"],p);const y=c(n,["endTime"]);y!=null&&f(e,["endTime"],y);const m=c(n,["updateTime"]);m!=null&&f(e,["updateTime"],m);const v=c(n,["model"]);v!=null&&f(e,["model"],v);const _=c(n,["inputConfig"]);_!=null&&f(e,["src"],UC(_));const T=c(n,["outputConfig"]);T!=null&&f(e,["dest"],MC(l0(T)));const A=c(n,["completionStats"]);return A!=null&&f(e,["completionStats"],A),e}function UC(n){const e={},i=c(n,["instancesFormat"]);i!=null&&f(e,["format"],i);const s=c(n,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const r=c(n,["bigquerySource","inputUri"]);return r!=null&&f(e,["bigqueryUri"],r),e}function LC(n,e){const i={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=c(e,["fileName"]);s!=null&&f(i,["fileName"],s);const r=c(e,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>ub(n,d))),f(i,["requests","requests"],u)}return i}function OC(n){const e={},i=c(n,["format"]);i!=null&&f(e,["instancesFormat"],i);const s=c(n,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const r=c(n,["bigqueryUri"]);if(r!=null&&f(e,["bigquerySource","inputUri"],r),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function GC(n){const e={},i=c(n,["data"]);if(i!=null&&f(e,["data"],i),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function PC(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function kC(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function HC(n){const e={},i=c(n,["content"]);i!=null&&f(e,["content"],i);const s=c(n,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],qC(s));const r=c(n,["tokenCount"]);r!=null&&f(e,["tokenCount"],r);const u=c(n,["finishReason"]);u!=null&&f(e,["finishReason"],u);const d=c(n,["avgLogprobs"]);d!=null&&f(e,["avgLogprobs"],d);const p=c(n,["groundingMetadata"]);p!=null&&f(e,["groundingMetadata"],p);const y=c(n,["index"]);y!=null&&f(e,["index"],y);const m=c(n,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=c(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(A=>A)),f(e,["safetyRatings"],T)}const _=c(n,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function qC(n){const e={},i=c(n,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["citations"],s)}return e}function a0(n){const e={},i=c(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>yb(u))),f(e,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(e,["role"],s),e}function BC(n,e){const i={},s=c(n,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function VC(n,e){const i={},s=c(n,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const r=c(n,["dest"]);return e!==void 0&&r!=null&&f(e,["outputConfig"],DC(NC(r))),i}function Yy(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["_url","model"],De(n,s));const r=c(e,["src"]);r!=null&&f(i,["batch","inputConfig"],LC(n,s0(n,r)));const u=c(e,["config"]);return u!=null&&BC(u,i),i}function zC(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["model"],De(n,s));const r=c(e,["src"]);r!=null&&f(i,["inputConfig"],OC(s0(n,r)));const u=c(e,["config"]);return u!=null&&VC(u,i),i}function FC(n,e){const i={},s=c(n,["displayName"]);return e!==void 0&&s!=null&&f(e,["batch","displayName"],s),i}function $C(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["_url","model"],De(n,s));const r=c(e,["src"]);r!=null&&f(i,["batch","inputConfig"],WC(n,r));const u=c(e,["config"]);return u!=null&&FC(u,i),i}function JC(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function YC(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function KC(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["name"]);s!=null&&f(e,["name"],s);const r=c(n,["done"]);r!=null&&f(e,["done"],r);const u=c(n,["error"]);return u!=null&&f(e,["error"],u),e}function XC(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["name"]);s!=null&&f(e,["name"],s);const r=c(n,["done"]);r!=null&&f(e,["done"],r);const u=c(n,["error"]);return u!=null&&f(e,["error"],u),e}function QC(n,e){const i={},s=c(e,["contents"]);if(s!=null){let u=Yf(n,s);Array.isArray(u)&&(u=u.map(d=>d)),f(i,["requests[]","request","content"],u)}const r=c(e,["config"]);return r!=null&&(f(i,["_self"],ZC(r,i)),JA(i,{"requests[].*":"requests[].request.*"})),i}function ZC(n,e){const i={},s=c(n,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const r=c(n,["title"]);e!==void 0&&r!=null&&f(e,["requests[]","title"],r);const u=c(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&f(e,["requests[]","outputDimensionality"],u),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function WC(n,e){const i={},s=c(e,["fileName"]);s!=null&&f(i,["file_name"],s);const r=c(e,["inlinedRequests"]);return r!=null&&f(i,["requests"],QC(n,r)),i}function jC(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function eb(n){const e={},i=c(n,["id"]);i!=null&&f(e,["id"],i);const s=c(n,["args"]);s!=null&&f(e,["args"],s);const r=c(n,["name"]);if(r!=null&&f(e,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tb(n){const e={},i=c(n,["allowedFunctionNames"]);i!=null&&f(e,["allowedFunctionNames"],i);const s=c(n,["mode"]);if(s!=null&&f(e,["mode"],s),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function nb(n,e,i){const s={},r=c(e,["systemInstruction"]);i!==void 0&&r!=null&&f(i,["systemInstruction"],a0(St(r)));const u=c(e,["temperature"]);u!=null&&f(s,["temperature"],u);const d=c(e,["topP"]);d!=null&&f(s,["topP"],d);const p=c(e,["topK"]);p!=null&&f(s,["topK"],p);const y=c(e,["candidateCount"]);y!=null&&f(s,["candidateCount"],y);const m=c(e,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const v=c(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=c(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const T=c(e,["logprobs"]);T!=null&&f(s,["logprobs"],T);const A=c(e,["presencePenalty"]);A!=null&&f(s,["presencePenalty"],A);const b=c(e,["frequencyPenalty"]);b!=null&&f(s,["frequencyPenalty"],b);const I=c(e,["seed"]);I!=null&&f(s,["seed"],I);const x=c(e,["responseMimeType"]);x!=null&&f(s,["responseMimeType"],x);const B=c(e,["responseSchema"]);B!=null&&f(s,["responseSchema"],Kf(B));const V=c(e,["responseJsonSchema"]);if(V!=null&&f(s,["responseJsonSchema"],V),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=c(e,["safetySettings"]);if(i!==void 0&&H!=null){let Ge=H;Array.isArray(Ge)&&(Ge=Ge.map(Oe=>vb(Oe))),f(i,["safetySettings"],Ge)}const G=c(e,["tools"]);if(i!==void 0&&G!=null){let Ge=Bo(G);Array.isArray(Ge)&&(Ge=Ge.map(Oe=>Sb(qo(Oe)))),f(i,["tools"],Ge)}const P=c(e,["toolConfig"]);if(i!==void 0&&P!=null&&f(i,["toolConfig"],_b(P)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const W=c(e,["cachedContent"]);i!==void 0&&W!=null&&f(i,["cachedContent"],Vn(n,W));const J=c(e,["responseModalities"]);J!=null&&f(s,["responseModalities"],J);const fe=c(e,["mediaResolution"]);fe!=null&&f(s,["mediaResolution"],fe);const Z=c(e,["speechConfig"]);if(Z!=null&&f(s,["speechConfig"],Xf(Z)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ie=c(e,["thinkingConfig"]);ie!=null&&f(s,["thinkingConfig"],ie);const oe=c(e,["imageConfig"]);oe!=null&&f(s,["imageConfig"],ab(oe));const Ee=c(e,["enableEnhancedCivicAnswers"]);if(Ee!=null&&f(s,["enableEnhancedCivicAnswers"],Ee),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function ib(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(m=>HC(m))),f(e,["candidates"],y)}const r=c(n,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const u=c(n,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const d=c(n,["responseId"]);d!=null&&f(e,["responseId"],d);const p=c(n,["usageMetadata"]);return p!=null&&f(e,["usageMetadata"],p),e}function ob(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function sb(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vo(n,s)),i}function lb(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function rb(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function ab(n){const e={},i=c(n,["aspectRatio"]);i!=null&&f(e,["aspectRatio"],i);const s=c(n,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),c(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ub(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["request","model"],De(n,s));const r=c(e,["contents"]);if(r!=null){let p=nn(r);Array.isArray(p)&&(p=p.map(y=>a0(y))),f(i,["request","contents"],p)}const u=c(e,["metadata"]);u!=null&&f(i,["metadata"],u);const d=c(e,["config"]);return d!=null&&f(i,["request","generationConfig"],nb(n,d,c(i,["request"],{}))),i}function cb(n){const e={},i=c(n,["response"]);i!=null&&f(e,["response"],ib(i));const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const r=c(n,["error"]);return r!=null&&f(e,["error"],r),e}function fb(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=c(n,["pageToken"]);if(e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function db(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=c(n,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const u=c(n,["filter"]);return e!==void 0&&u!=null&&f(e,["_query","filter"],u),i}function hb(n){const e={},i=c(n,["config"]);return i!=null&&fb(i,e),e}function pb(n){const e={},i=c(n,["config"]);return i!=null&&db(i,e),e}function mb(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=c(n,["operations"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>Hr(d))),f(e,["batchJobs"],u)}return e}function gb(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=c(n,["batchPredictionJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>vf(d))),f(e,["batchJobs"],u)}return e}function yb(n){const e={},i=c(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=c(n,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&f(e,["fileData"],jC(u));const d=c(n,["functionCall"]);d!=null&&f(e,["functionCall"],eb(d));const p=c(n,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(n,["inlineData"]);y!=null&&f(e,["inlineData"],GC(y));const m=c(n,["text"]);m!=null&&f(e,["text"],m);const v=c(n,["thought"]);v!=null&&f(e,["thought"],v);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const T=c(n,["videoMetadata"]);return T!=null&&f(e,["videoMetadata"],T),e}function vb(n){const e={},i=c(n,["category"]);if(i!=null&&f(e,["category"],i),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=c(n,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function _b(n){const e={},i=c(n,["retrievalConfig"]);i!=null&&f(e,["retrievalConfig"],i);const s=c(n,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],tb(s)),e}function Sb(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=c(n,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=c(n,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(n,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const d=c(n,["googleMaps"]);d!=null&&f(e,["googleMaps"],lb(d));const p=c(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],rb(p));const y=c(n,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=c(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qn;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(qn||(qn={}));class zi{constructor(e,i,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,s,r)}init(e,i,s){var r,u;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!s||Object.keys(s).length===0?d={config:{}}:typeof s=="object"?d=Object.assign({},s):d=s,d.config&&(d.config.pageToken=i.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(u=(r=d.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Tb=class extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new zi(qn.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=Yy(this.apiClient,e),s=i._url,r=ee("{model}:batchGenerateContent",s),p=i.batch.inputConfig.requests,y=p.requests,m=[];for(const v of y){const _=Object.assign({},v);if(_.systemInstruction){const T=_.systemInstruction;delete _.systemInstruction;const A=_.request;A.systemInstruction=T,_.request=A}m.push(_)}return p.requests=m,delete i.config,delete i._url,delete i._query,{path:r,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const s=i?Object.assign({},i):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const u=this.getGcsUri(e),d=this.getBigqueryUri(e);if(u)u.endsWith(".jsonl")?s.dest=`${u.slice(0,-6)}/dest`:s.dest=`${u}_dest_${r}`;else if(d)s.dest=`${d}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=zC(this.apiClient,e);return p=ee("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>vf(v))}else{const m=Yy(this.apiClient,e);return p=ee("{model}:batchGenerateContent",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>Hr(v))}}async createEmbeddingsInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=$C(this.apiClient,e);return u=ee("{model}:asyncBatchEmbedContent",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>Hr(y))}}async get(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=sb(this.apiClient,e);return p=ee("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>vf(v))}else{const m=ob(this.apiClient,e);return p=ee("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>Hr(v))}}async cancel(e){var i,s,r,u;let d="",p={};if(this.apiClient.isVertexAI()){const y=kC(this.apiClient,e);d=ee("batchPredictionJobs/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=PC(this.apiClient,e);d=ee("batches/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=pb(e);return p=ee("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=gb(v),T=new zy;return Object.assign(T,_),T})}else{const m=hb(e);return p=ee("batches",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=mb(v),T=new zy;return Object.assign(T,_),T})}}async delete(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=YC(this.apiClient,e);return p=ee("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>XC(v))}else{const m=JC(this.apiClient,e);return p=ee("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>KC(v))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eb(n){const e={},i=c(n,["data"]);if(i!=null&&f(e,["data"],i),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Ky(n){const e={},i=c(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>$b(u))),f(e,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(e,["role"],s),e}function Ab(n,e){const i={},s=c(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=c(n,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const u=c(n,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const d=c(n,["contents"]);if(e!==void 0&&d!=null){let v=nn(d);Array.isArray(v)&&(v=v.map(_=>Ky(_))),f(e,["contents"],v)}const p=c(n,["systemInstruction"]);e!==void 0&&p!=null&&f(e,["systemInstruction"],Ky(St(p)));const y=c(n,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(_=>Yb(_))),f(e,["tools"],v)}const m=c(n,["toolConfig"]);if(e!==void 0&&m!=null&&f(e,["toolConfig"],Jb(m)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function Cb(n,e){const i={},s=c(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=c(n,["expireTime"]);e!==void 0&&r!=null&&f(e,["expireTime"],r);const u=c(n,["displayName"]);e!==void 0&&u!=null&&f(e,["displayName"],u);const d=c(n,["contents"]);if(e!==void 0&&d!=null){let _=nn(d);Array.isArray(_)&&(_=_.map(T=>T)),f(e,["contents"],_)}const p=c(n,["systemInstruction"]);e!==void 0&&p!=null&&f(e,["systemInstruction"],St(p));const y=c(n,["tools"]);if(e!==void 0&&y!=null){let _=y;Array.isArray(_)&&(_=_.map(T=>Kb(T))),f(e,["tools"],_)}const m=c(n,["toolConfig"]);e!==void 0&&m!=null&&f(e,["toolConfig"],m);const v=c(n,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),i}function bb(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["model"],Qv(n,s));const r=c(e,["config"]);return r!=null&&Ab(r,i),i}function wb(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["model"],Qv(n,s));const r=c(e,["config"]);return r!=null&&Cb(r,i),i}function xb(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vn(n,s)),i}function Rb(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vn(n,s)),i}function Nb(n){const e={},i=c(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Ib(n){const e={},i=c(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function Mb(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Db(n){const e={},i=c(n,["id"]);i!=null&&f(e,["id"],i);const s=c(n,["args"]);s!=null&&f(e,["args"],s);const r=c(n,["name"]);if(r!=null&&f(e,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ub(n){const e={},i=c(n,["allowedFunctionNames"]);i!=null&&f(e,["allowedFunctionNames"],i);const s=c(n,["mode"]);if(s!=null&&f(e,["mode"],s),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Lb(n){const e={},i=c(n,["description"]);i!=null&&f(e,["description"],i);const s=c(n,["name"]);s!=null&&f(e,["name"],s);const r=c(n,["parameters"]);r!=null&&f(e,["parameters"],r);const u=c(n,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(n,["response"]);d!=null&&f(e,["response"],d);const p=c(n,["responseJsonSchema"]);if(p!=null&&f(e,["responseJsonSchema"],p),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Ob(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vn(n,s)),i}function Gb(n,e){const i={},s=c(e,["name"]);return s!=null&&f(i,["_url","name"],Vn(n,s)),i}function Pb(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function kb(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function Hb(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=c(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),i}function qb(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=c(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),i}function Bb(n){const e={},i=c(n,["config"]);return i!=null&&Hb(i,e),e}function Vb(n){const e={},i=c(n,["config"]);return i!=null&&qb(i,e),e}function zb(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=c(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["cachedContents"],u)}return e}function Fb(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=c(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["cachedContents"],u)}return e}function $b(n){const e={},i=c(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=c(n,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&f(e,["fileData"],Mb(u));const d=c(n,["functionCall"]);d!=null&&f(e,["functionCall"],Db(d));const p=c(n,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(n,["inlineData"]);y!=null&&f(e,["inlineData"],Eb(y));const m=c(n,["text"]);m!=null&&f(e,["text"],m);const v=c(n,["thought"]);v!=null&&f(e,["thought"],v);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const T=c(n,["videoMetadata"]);return T!=null&&f(e,["videoMetadata"],T),e}function Jb(n){const e={},i=c(n,["retrievalConfig"]);i!=null&&f(e,["retrievalConfig"],i);const s=c(n,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],Ub(s)),e}function Yb(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=c(n,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=c(n,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(n,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const d=c(n,["googleMaps"]);d!=null&&f(e,["googleMaps"],Pb(d));const p=c(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],kb(p));const y=c(n,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=c(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function Kb(n){const e={},i=c(n,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=c(n,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(n,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const u=c(n,["enterpriseWebSearch"]);u!=null&&f(e,["enterpriseWebSearch"],u);const d=c(n,["functionDeclarations"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(T=>Lb(T))),f(e,["functionDeclarations"],_)}const p=c(n,["googleMaps"]);p!=null&&f(e,["googleMaps"],p);const y=c(n,["googleSearch"]);y!=null&&f(e,["googleSearch"],y);const m=c(n,["googleSearchRetrieval"]);m!=null&&f(e,["googleSearchRetrieval"],m);const v=c(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Xb(n,e){const i={},s=c(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=c(n,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),i}function Qb(n,e){const i={},s=c(n,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const r=c(n,["expireTime"]);return e!==void 0&&r!=null&&f(e,["expireTime"],r),i}function Zb(n,e){const i={},s=c(e,["name"]);s!=null&&f(i,["_url","name"],Vn(n,s));const r=c(e,["config"]);return r!=null&&Xb(r,i),i}function Wb(n,e){const i={},s=c(e,["name"]);s!=null&&f(i,["_url","name"],Vn(n,s));const r=c(e,["config"]);return r!=null&&Qb(r,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jb extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new zi(qn.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(i),i)}async create(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=wb(this.apiClient,e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const m=bb(this.apiClient,e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async get(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Gb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const m=Ob(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async delete(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Rb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Ib(v),T=new By;return Object.assign(T,_),T})}else{const m=xb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Nb(v),T=new By;return Object.assign(T,_),T})}}async update(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Wb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>v)}else{const m=Zb(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>v)}}async listInternal(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Vb(e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Fb(v),T=new Vy;return Object.assign(T,_),T})}else{const m=Bb(e);return p=ee("cachedContents",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=zb(v),T=new Vy;return Object.assign(T,_),T})}}}function ea(n,e){var i={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(i[s[r]]=n[s[r]]);return i}function Xy(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],s=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pe(n){return this instanceof pe?(this.v=n,this):new pe(n)}function cn(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(n,e||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(A){return function(b){return Promise.resolve(b).then(A,_)}}function p(A,b){s[A]&&(r[A]=function(I){return new Promise(function(x,B){u.push([A,I,x,B])>1||y(A,I)})},b&&(r[A]=b(r[A])))}function y(A,b){try{m(s[A](b))}catch(I){T(u[0][3],I)}}function m(A){A.value instanceof pe?Promise.resolve(A.value.v).then(v,_):T(u[0][2],A)}function v(A){y("next",A)}function _(A){y("throw",A)}function T(A,b){A(b),u.shift(),u.length&&y(u[0][0],u[0][1])}}function fn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof Xy=="function"?Xy(n):n[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(u){i[u]=n[u]&&function(d){return new Promise(function(p,y){d=n[u](d),r(p,y,d.done,d.value)})}}function r(u,d,p,y){Promise.resolve(y).then(function(m){u({value:m,done:p})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ew(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const i=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:u0(i)}function u0(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function tw(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Qy(n){if(n===void 0||n.length===0)return[];const e=[],i=n.length;let s=0;for(;s<i;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let u=!0;for(;s<i&&n[s].role==="model";)r.push(n[s]),u&&!u0(n[s])&&(u=!1),s++;u?e.push(...r):e.pop()}return e}class nw{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new iw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let iw=class{constructor(e,i,s,r={},u=[]){this.apiClient=e,this.modelsModule=i,this.model=s,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),tw(u)}async sendMessage(e){var i;await this.sendPromise;const s=St(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var u,d,p;const y=await r,m=(d=(u=y.candidates)===null||u===void 0?void 0:u[0])===null||d===void 0?void 0:d.content,v=y.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let T=[];v!=null&&(T=(p=v.slice(_))!==null&&p!==void 0?p:[]);const A=m?[m]:[];this.recordHistory(s,A,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var i;await this.sendPromise;const s=St(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,s)}getHistory(e=!1){const i=e?Qy(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return cn(this,arguments,function*(){var r,u,d,p,y,m;const v=[];try{for(var _=!0,T=fn(e),A;A=yield pe(T.next()),r=A.done,!r;_=!0){p=A.value,_=!1;const b=p;if(ew(b)){const I=(m=(y=b.candidates)===null||y===void 0?void 0:y[0])===null||m===void 0?void 0:m.content;I!==void 0&&v.push(I)}yield yield pe(b)}}catch(b){u={error:b}}finally{try{!_&&!r&&(d=T.return)&&(yield pe(d.call(T)))}finally{if(u)throw u.error}}this.recordHistory(i,v)})}recordHistory(e,i,s){let r=[];i.length>0&&i.every(u=>u.role!==void 0)?r=i:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Qy(s)):this.history.push(e),this.history.push(...r)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class il extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,il.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ow(n){const e={},i=c(n,["file"]);return i!=null&&f(e,["file"],i),e}function sw(n){const e={},i=c(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function lw(n){const e={},i=c(n,["name"]);return i!=null&&f(e,["_url","file"],n0(i)),e}function rw(n){const e={},i=c(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}function aw(n){const e={},i=c(n,["name"]);return i!=null&&f(e,["_url","file"],n0(i)),e}function uw(n){const e={},i=c(n,["uris"]);return i!=null&&f(e,["uris"],i),e}function cw(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=c(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),i}function fw(n){const e={},i=c(n,["config"]);return i!=null&&cw(i,e),e}function dw(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=c(n,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["files"],u)}return e}function hw(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pw=class extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new zi(qn.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=fw(e);return u=ee("files",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=dw(y),v=new mC;return Object.assign(v,m),v})}}async createInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=ow(e);return u=ee("upload/v1beta/files",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const m=sw(y),v=new gC;return Object.assign(v,m),v})}}async get(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=aw(e);return u=ee("files/{file}",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=lw(e);return u=ee("files/{file}",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=rw(y),v=new yC;return Object.assign(v,m),v})}}async registerFilesInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=uw(e);return u=ee("files:register",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const m=hw(y),v=new vC;return Object.assign(v,m),v})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qr(n){const e={},i=c(n,["data"]);if(i!=null&&f(e,["data"],i),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function mw(n){const e={},i=c(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>Mw(u))),f(e,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(e,["role"],s),e}function gw(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function yw(n){const e={},i=c(n,["id"]);i!=null&&f(e,["id"],i);const s=c(n,["args"]);s!=null&&f(e,["args"],s);const r=c(n,["name"]);if(r!=null&&f(e,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vw(n){const e={},i=c(n,["description"]);i!=null&&f(e,["description"],i);const s=c(n,["name"]);s!=null&&f(e,["name"],s);const r=c(n,["parameters"]);r!=null&&f(e,["parameters"],r);const u=c(n,["parametersJsonSchema"]);u!=null&&f(e,["parametersJsonSchema"],u);const d=c(n,["response"]);d!=null&&f(e,["response"],d);const p=c(n,["responseJsonSchema"]);if(p!=null&&f(e,["responseJsonSchema"],p),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function _w(n){const e={},i=c(n,["modelSelectionConfig"]);i!=null&&f(e,["modelConfig"],i);const s=c(n,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const r=c(n,["audioTimestamp"]);r!=null&&f(e,["audioTimestamp"],r);const u=c(n,["candidateCount"]);u!=null&&f(e,["candidateCount"],u);const d=c(n,["enableAffectiveDialog"]);d!=null&&f(e,["enableAffectiveDialog"],d);const p=c(n,["frequencyPenalty"]);p!=null&&f(e,["frequencyPenalty"],p);const y=c(n,["logprobs"]);y!=null&&f(e,["logprobs"],y);const m=c(n,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=c(n,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=c(n,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const T=c(n,["responseLogprobs"]);T!=null&&f(e,["responseLogprobs"],T);const A=c(n,["responseMimeType"]);A!=null&&f(e,["responseMimeType"],A);const b=c(n,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const I=c(n,["responseSchema"]);I!=null&&f(e,["responseSchema"],I);const x=c(n,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const B=c(n,["seed"]);B!=null&&f(e,["seed"],B);const V=c(n,["speechConfig"]);V!=null&&f(e,["speechConfig"],V);const H=c(n,["stopSequences"]);H!=null&&f(e,["stopSequences"],H);const G=c(n,["temperature"]);G!=null&&f(e,["temperature"],G);const P=c(n,["thinkingConfig"]);P!=null&&f(e,["thinkingConfig"],P);const W=c(n,["topK"]);W!=null&&f(e,["topK"],W);const J=c(n,["topP"]);if(J!=null&&f(e,["topP"],J),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Sw(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function Tw(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function Ew(n,e){const i={},s=c(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const r=c(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(n,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const p=c(n,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=c(n,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=c(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=c(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Qf(_));const T=c(n,["thinkingConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=c(n,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],mw(St(b)));const I=c(n,["tools"]);if(e!==void 0&&I!=null){let W=Bo(I);Array.isArray(W)&&(W=W.map(J=>Uw(qo(J)))),f(e,["setup","tools"],W)}const x=c(n,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],Dw(x));const B=c(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","inputAudioTranscription"],B);const V=c(n,["outputAudioTranscription"]);e!==void 0&&V!=null&&f(e,["setup","outputAudioTranscription"],V);const H=c(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&f(e,["setup","realtimeInputConfig"],H);const G=c(n,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],G);const P=c(n,["proactivity"]);if(e!==void 0&&P!=null&&f(e,["setup","proactivity"],P),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function Aw(n,e){const i={},s=c(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],_w(s));const r=c(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(n,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const p=c(n,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=c(n,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=c(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=c(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Qf(_));const T=c(n,["thinkingConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=c(n,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],St(b));const I=c(n,["tools"]);if(e!==void 0&&I!=null){let J=Bo(I);Array.isArray(J)&&(J=J.map(fe=>Lw(qo(fe)))),f(e,["setup","tools"],J)}const x=c(n,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],x);const B=c(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","inputAudioTranscription"],B);const V=c(n,["outputAudioTranscription"]);e!==void 0&&V!=null&&f(e,["setup","outputAudioTranscription"],V);const H=c(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&f(e,["setup","realtimeInputConfig"],H);const G=c(n,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],G);const P=c(n,["proactivity"]);e!==void 0&&P!=null&&f(e,["setup","proactivity"],P);const W=c(n,["explicitVadSignal"]);return e!==void 0&&W!=null&&f(e,["setup","explicitVadSignal"],W),i}function Cw(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["setup","model"],De(n,s));const r=c(e,["config"]);return r!=null&&f(i,["config"],Ew(r,i)),i}function bw(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["setup","model"],De(n,s));const r=c(e,["config"]);return r!=null&&f(i,["config"],Aw(r,i)),i}function ww(n){const e={},i=c(n,["musicGenerationConfig"]);return i!=null&&f(e,["musicGenerationConfig"],i),e}function xw(n){const e={},i=c(n,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["weightedPrompts"],s)}return e}function Rw(n){const e={},i=c(n,["media"]);if(i!=null){let m=Zv(i);Array.isArray(m)&&(m=m.map(v=>qr(v))),f(e,["mediaChunks"],m)}const s=c(n,["audio"]);s!=null&&f(e,["audio"],qr(jv(s)));const r=c(n,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const u=c(n,["video"]);u!=null&&f(e,["video"],qr(Wv(u)));const d=c(n,["text"]);d!=null&&f(e,["text"],d);const p=c(n,["activityStart"]);p!=null&&f(e,["activityStart"],p);const y=c(n,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function Nw(n){const e={},i=c(n,["media"]);if(i!=null){let m=Zv(i);Array.isArray(m)&&(m=m.map(v=>v)),f(e,["mediaChunks"],m)}const s=c(n,["audio"]);s!=null&&f(e,["audio"],jv(s));const r=c(n,["audioStreamEnd"]);r!=null&&f(e,["audioStreamEnd"],r);const u=c(n,["video"]);u!=null&&f(e,["video"],Wv(u));const d=c(n,["text"]);d!=null&&f(e,["text"],d);const p=c(n,["activityStart"]);p!=null&&f(e,["activityStart"],p);const y=c(n,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function Iw(n){const e={},i=c(n,["setupComplete"]);i!=null&&f(e,["setupComplete"],i);const s=c(n,["serverContent"]);s!=null&&f(e,["serverContent"],s);const r=c(n,["toolCall"]);r!=null&&f(e,["toolCall"],r);const u=c(n,["toolCallCancellation"]);u!=null&&f(e,["toolCallCancellation"],u);const d=c(n,["usageMetadata"]);d!=null&&f(e,["usageMetadata"],Ow(d));const p=c(n,["goAway"]);p!=null&&f(e,["goAway"],p);const y=c(n,["sessionResumptionUpdate"]);y!=null&&f(e,["sessionResumptionUpdate"],y);const m=c(n,["voiceActivityDetectionSignal"]);m!=null&&f(e,["voiceActivityDetectionSignal"],m);const v=c(n,["voiceActivity"]);return v!=null&&f(e,["voiceActivity"],Gw(v)),e}function Mw(n){const e={},i=c(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=c(n,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&f(e,["fileData"],gw(u));const d=c(n,["functionCall"]);d!=null&&f(e,["functionCall"],yw(d));const p=c(n,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(n,["inlineData"]);y!=null&&f(e,["inlineData"],qr(y));const m=c(n,["text"]);m!=null&&f(e,["text"],m);const v=c(n,["thought"]);v!=null&&f(e,["thought"],v);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const T=c(n,["videoMetadata"]);return T!=null&&f(e,["videoMetadata"],T),e}function Dw(n){const e={},i=c(n,["handle"]);if(i!=null&&f(e,["handle"],i),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Uw(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=c(n,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=c(n,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(n,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const d=c(n,["googleMaps"]);d!=null&&f(e,["googleMaps"],Sw(d));const p=c(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],Tw(p));const y=c(n,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=c(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function Lw(n){const e={},i=c(n,["retrieval"]);i!=null&&f(e,["retrieval"],i);const s=c(n,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(n,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const u=c(n,["enterpriseWebSearch"]);u!=null&&f(e,["enterpriseWebSearch"],u);const d=c(n,["functionDeclarations"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(T=>vw(T))),f(e,["functionDeclarations"],_)}const p=c(n,["googleMaps"]);p!=null&&f(e,["googleMaps"],p);const y=c(n,["googleSearch"]);y!=null&&f(e,["googleSearch"],y);const m=c(n,["googleSearchRetrieval"]);m!=null&&f(e,["googleSearchRetrieval"],m);const v=c(n,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Ow(n){const e={},i=c(n,["promptTokenCount"]);i!=null&&f(e,["promptTokenCount"],i);const s=c(n,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const r=c(n,["candidatesTokenCount"]);r!=null&&f(e,["responseTokenCount"],r);const u=c(n,["toolUsePromptTokenCount"]);u!=null&&f(e,["toolUsePromptTokenCount"],u);const d=c(n,["thoughtsTokenCount"]);d!=null&&f(e,["thoughtsTokenCount"],d);const p=c(n,["totalTokenCount"]);p!=null&&f(e,["totalTokenCount"],p);const y=c(n,["promptTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(b=>b)),f(e,["promptTokensDetails"],A)}const m=c(n,["cacheTokensDetails"]);if(m!=null){let A=m;Array.isArray(A)&&(A=A.map(b=>b)),f(e,["cacheTokensDetails"],A)}const v=c(n,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(b=>b)),f(e,["responseTokensDetails"],A)}const _=c(n,["toolUsePromptTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(b=>b)),f(e,["toolUsePromptTokensDetails"],A)}const T=c(n,["trafficType"]);return T!=null&&f(e,["trafficType"],T),e}function Gw(n){const e={},i=c(n,["type"]);return i!=null&&f(e,["voiceActivityType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pw(n,e){const i={},s=c(n,["data"]);if(s!=null&&f(i,["data"],s),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(n,["mimeType"]);return r!=null&&f(i,["mimeType"],r),i}function kw(n,e){const i={},s=c(n,["content"]);s!=null&&f(i,["content"],s);const r=c(n,["citationMetadata"]);r!=null&&f(i,["citationMetadata"],Hw(r));const u=c(n,["tokenCount"]);u!=null&&f(i,["tokenCount"],u);const d=c(n,["finishReason"]);d!=null&&f(i,["finishReason"],d);const p=c(n,["avgLogprobs"]);p!=null&&f(i,["avgLogprobs"],p);const y=c(n,["groundingMetadata"]);y!=null&&f(i,["groundingMetadata"],y);const m=c(n,["index"]);m!=null&&f(i,["index"],m);const v=c(n,["logprobsResult"]);v!=null&&f(i,["logprobsResult"],v);const _=c(n,["safetyRatings"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(b=>b)),f(i,["safetyRatings"],A)}const T=c(n,["urlContextMetadata"]);return T!=null&&f(i,["urlContextMetadata"],T),i}function Hw(n,e){const i={},s=c(n,["citationSources"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),f(i,["citations"],r)}return i}function qw(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["contents"]);if(u!=null){let d=nn(u);Array.isArray(d)&&(d=d.map(p=>p)),f(s,["contents"],d)}return s}function Bw(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["tokensInfo"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(i,["tokensInfo"],u)}return i}function Vw(n,e){const i={},s=c(n,["values"]);s!=null&&f(i,["values"],s);const r=c(n,["statistics"]);return r!=null&&f(i,["statistics"],zw(r)),i}function zw(n,e){const i={},s=c(n,["truncated"]);s!=null&&f(i,["truncated"],s);const r=c(n,["token_count"]);return r!=null&&f(i,["tokenCount"],r),i}function da(n,e){const i={},s=c(n,["parts"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>Wx(d))),f(i,["parts"],u)}const r=c(n,["role"]);return r!=null&&f(i,["role"],r),i}function Fw(n,e){const i={},s=c(n,["controlType"]);s!=null&&f(i,["controlType"],s);const r=c(n,["enableControlImageComputation"]);return r!=null&&f(i,["computeControl"],r),i}function $w(n,e){const i={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return i}function Jw(n,e,i){const s={},r=c(n,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],St(r));const u=c(n,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>h0(y))),f(e,["tools"],p)}const d=c(n,["generationConfig"]);return e!==void 0&&d!=null&&f(e,["generationConfig"],Px(d)),s}function Yw(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["contents"]);if(u!=null){let p=nn(u);Array.isArray(p)&&(p=p.map(y=>da(y))),f(s,["contents"],p)}const d=c(e,["config"]);return d!=null&&$w(d),s}function Kw(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["contents"]);if(u!=null){let p=nn(u);Array.isArray(p)&&(p=p.map(y=>y)),f(s,["contents"],p)}const d=c(e,["config"]);return d!=null&&Jw(d,s),s}function Xw(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["totalTokens"]);r!=null&&f(i,["totalTokens"],r);const u=c(n,["cachedContentTokenCount"]);return u!=null&&f(i,["cachedContentTokenCount"],u),i}function Qw(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["totalTokens"]);return r!=null&&f(i,["totalTokens"],r),i}function Zw(n,e,i){const s={},r=c(e,["model"]);return r!=null&&f(s,["_url","name"],De(n,r)),s}function Ww(n,e,i){const s={},r=c(e,["model"]);return r!=null&&f(s,["_url","name"],De(n,r)),s}function jw(n,e){const i={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function ex(n,e){const i={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function tx(n,e,i){const s={},r=c(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const u=c(n,["negativePrompt"]);e!==void 0&&u!=null&&f(e,["parameters","negativePrompt"],u);const d=c(n,["numberOfImages"]);e!==void 0&&d!=null&&f(e,["parameters","sampleCount"],d);const p=c(n,["aspectRatio"]);e!==void 0&&p!=null&&f(e,["parameters","aspectRatio"],p);const y=c(n,["guidanceScale"]);e!==void 0&&y!=null&&f(e,["parameters","guidanceScale"],y);const m=c(n,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const v=c(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&f(e,["parameters","safetySetting"],v);const _=c(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const T=c(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&f(e,["parameters","includeSafetyAttributes"],T);const A=c(n,["includeRaiReason"]);e!==void 0&&A!=null&&f(e,["parameters","includeRaiReason"],A);const b=c(n,["language"]);e!==void 0&&b!=null&&f(e,["parameters","language"],b);const I=c(n,["outputMimeType"]);e!==void 0&&I!=null&&f(e,["parameters","outputOptions","mimeType"],I);const x=c(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const B=c(n,["addWatermark"]);e!==void 0&&B!=null&&f(e,["parameters","addWatermark"],B);const V=c(n,["labels"]);e!==void 0&&V!=null&&f(e,["labels"],V);const H=c(n,["editMode"]);e!==void 0&&H!=null&&f(e,["parameters","editMode"],H);const G=c(n,["baseSteps"]);return e!==void 0&&G!=null&&f(e,["parameters","editConfig","baseSteps"],G),s}function nx(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["prompt"]);u!=null&&f(s,["instances[0]","prompt"],u);const d=c(e,["referenceImages"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(m=>oR(m))),f(s,["instances[0]","referenceImages"],y)}const p=c(e,["config"]);return p!=null&&tx(p,s),s}function ix(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>ha(d))),f(i,["generatedImages"],u)}return i}function ox(n,e,i){const s={},r=c(n,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const u=c(n,["title"]);e!==void 0&&u!=null&&f(e,["requests[]","title"],u);const d=c(n,["outputDimensionality"]);if(e!==void 0&&d!=null&&f(e,["requests[]","outputDimensionality"],d),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function sx(n,e,i){const s={},r=c(n,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const u=c(n,["title"]);e!==void 0&&u!=null&&f(e,["instances[]","title"],u);const d=c(n,["outputDimensionality"]);e!==void 0&&d!=null&&f(e,["parameters","outputDimensionality"],d);const p=c(n,["mimeType"]);e!==void 0&&p!=null&&f(e,["instances[]","mimeType"],p);const y=c(n,["autoTruncate"]);return e!==void 0&&y!=null&&f(e,["parameters","autoTruncate"],y),s}function lx(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["contents"]);if(u!=null){let y=Yf(n,u);Array.isArray(y)&&(y=y.map(m=>m)),f(s,["requests[]","content"],y)}const d=c(e,["config"]);d!=null&&ox(d,s);const p=c(e,["model"]);return p!==void 0&&f(s,["requests[]","model"],De(n,p)),s}function rx(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["contents"]);if(u!=null){let p=Yf(n,u);Array.isArray(p)&&(p=p.map(y=>y)),f(s,["instances[]","content"],p)}const d=c(e,["config"]);return d!=null&&sx(d,s),s}function ax(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["embeddings"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),f(i,["embeddings"],d)}const u=c(n,["metadata"]);return u!=null&&f(i,["metadata"],u),i}function ux(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["predictions[]","embeddings"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>Vw(p))),f(i,["embeddings"],d)}const u=c(n,["metadata"]);return u!=null&&f(i,["metadata"],u),i}function cx(n,e){const i={},s=c(n,["endpoint"]);s!=null&&f(i,["name"],s);const r=c(n,["deployedModelId"]);return r!=null&&f(i,["deployedModelId"],r),i}function fx(n,e){const i={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["fileUri"]);s!=null&&f(i,["fileUri"],s);const r=c(n,["mimeType"]);return r!=null&&f(i,["mimeType"],r),i}function dx(n,e){const i={},s=c(n,["id"]);s!=null&&f(i,["id"],s);const r=c(n,["args"]);r!=null&&f(i,["args"],r);const u=c(n,["name"]);if(u!=null&&f(i,["name"],u),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return i}function hx(n,e){const i={},s=c(n,["allowedFunctionNames"]);s!=null&&f(i,["allowedFunctionNames"],s);const r=c(n,["mode"]);if(r!=null&&f(i,["mode"],r),c(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return i}function px(n,e){const i={},s=c(n,["description"]);s!=null&&f(i,["description"],s);const r=c(n,["name"]);r!=null&&f(i,["name"],r);const u=c(n,["parameters"]);u!=null&&f(i,["parameters"],u);const d=c(n,["parametersJsonSchema"]);d!=null&&f(i,["parametersJsonSchema"],d);const p=c(n,["response"]);p!=null&&f(i,["response"],p);const y=c(n,["responseJsonSchema"]);if(y!=null&&f(i,["responseJsonSchema"],y),c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return i}function mx(n,e,i,s){const r={},u=c(e,["systemInstruction"]);i!==void 0&&u!=null&&f(i,["systemInstruction"],da(St(u)));const d=c(e,["temperature"]);d!=null&&f(r,["temperature"],d);const p=c(e,["topP"]);p!=null&&f(r,["topP"],p);const y=c(e,["topK"]);y!=null&&f(r,["topK"],y);const m=c(e,["candidateCount"]);m!=null&&f(r,["candidateCount"],m);const v=c(e,["maxOutputTokens"]);v!=null&&f(r,["maxOutputTokens"],v);const _=c(e,["stopSequences"]);_!=null&&f(r,["stopSequences"],_);const T=c(e,["responseLogprobs"]);T!=null&&f(r,["responseLogprobs"],T);const A=c(e,["logprobs"]);A!=null&&f(r,["logprobs"],A);const b=c(e,["presencePenalty"]);b!=null&&f(r,["presencePenalty"],b);const I=c(e,["frequencyPenalty"]);I!=null&&f(r,["frequencyPenalty"],I);const x=c(e,["seed"]);x!=null&&f(r,["seed"],x);const B=c(e,["responseMimeType"]);B!=null&&f(r,["responseMimeType"],B);const V=c(e,["responseSchema"]);V!=null&&f(r,["responseSchema"],Kf(V));const H=c(e,["responseJsonSchema"]);if(H!=null&&f(r,["responseJsonSchema"],H),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=c(e,["safetySettings"]);if(i!==void 0&&G!=null){let Oe=G;Array.isArray(Oe)&&(Oe=Oe.map(Ye=>sR(Ye))),f(i,["safetySettings"],Oe)}const P=c(e,["tools"]);if(i!==void 0&&P!=null){let Oe=Bo(P);Array.isArray(Oe)&&(Oe=Oe.map(Ye=>dR(qo(Ye)))),f(i,["tools"],Oe)}const W=c(e,["toolConfig"]);if(i!==void 0&&W!=null&&f(i,["toolConfig"],fR(W)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=c(e,["cachedContent"]);i!==void 0&&J!=null&&f(i,["cachedContent"],Vn(n,J));const fe=c(e,["responseModalities"]);fe!=null&&f(r,["responseModalities"],fe);const Z=c(e,["mediaResolution"]);Z!=null&&f(r,["mediaResolution"],Z);const ie=c(e,["speechConfig"]);if(ie!=null&&f(r,["speechConfig"],Xf(ie)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const oe=c(e,["thinkingConfig"]);oe!=null&&f(r,["thinkingConfig"],oe);const Ee=c(e,["imageConfig"]);Ee!=null&&f(r,["imageConfig"],Vx(Ee));const Ge=c(e,["enableEnhancedCivicAnswers"]);if(Ge!=null&&f(r,["enableEnhancedCivicAnswers"],Ge),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function gx(n,e,i,s){const r={},u=c(e,["systemInstruction"]);i!==void 0&&u!=null&&f(i,["systemInstruction"],St(u));const d=c(e,["temperature"]);d!=null&&f(r,["temperature"],d);const p=c(e,["topP"]);p!=null&&f(r,["topP"],p);const y=c(e,["topK"]);y!=null&&f(r,["topK"],y);const m=c(e,["candidateCount"]);m!=null&&f(r,["candidateCount"],m);const v=c(e,["maxOutputTokens"]);v!=null&&f(r,["maxOutputTokens"],v);const _=c(e,["stopSequences"]);_!=null&&f(r,["stopSequences"],_);const T=c(e,["responseLogprobs"]);T!=null&&f(r,["responseLogprobs"],T);const A=c(e,["logprobs"]);A!=null&&f(r,["logprobs"],A);const b=c(e,["presencePenalty"]);b!=null&&f(r,["presencePenalty"],b);const I=c(e,["frequencyPenalty"]);I!=null&&f(r,["frequencyPenalty"],I);const x=c(e,["seed"]);x!=null&&f(r,["seed"],x);const B=c(e,["responseMimeType"]);B!=null&&f(r,["responseMimeType"],B);const V=c(e,["responseSchema"]);V!=null&&f(r,["responseSchema"],Kf(V));const H=c(e,["responseJsonSchema"]);H!=null&&f(r,["responseJsonSchema"],H);const G=c(e,["routingConfig"]);G!=null&&f(r,["routingConfig"],G);const P=c(e,["modelSelectionConfig"]);P!=null&&f(r,["modelConfig"],P);const W=c(e,["safetySettings"]);if(i!==void 0&&W!=null){let le=W;Array.isArray(le)&&(le=le.map(ge=>ge)),f(i,["safetySettings"],le)}const J=c(e,["tools"]);if(i!==void 0&&J!=null){let le=Bo(J);Array.isArray(le)&&(le=le.map(ge=>h0(qo(ge)))),f(i,["tools"],le)}const fe=c(e,["toolConfig"]);i!==void 0&&fe!=null&&f(i,["toolConfig"],fe);const Z=c(e,["labels"]);i!==void 0&&Z!=null&&f(i,["labels"],Z);const ie=c(e,["cachedContent"]);i!==void 0&&ie!=null&&f(i,["cachedContent"],Vn(n,ie));const oe=c(e,["responseModalities"]);oe!=null&&f(r,["responseModalities"],oe);const Ee=c(e,["mediaResolution"]);Ee!=null&&f(r,["mediaResolution"],Ee);const Ge=c(e,["speechConfig"]);Ge!=null&&f(r,["speechConfig"],Xf(Ge));const Oe=c(e,["audioTimestamp"]);Oe!=null&&f(r,["audioTimestamp"],Oe);const Ye=c(e,["thinkingConfig"]);Ye!=null&&f(r,["thinkingConfig"],Ye);const z=c(e,["imageConfig"]);if(z!=null&&f(r,["imageConfig"],zx(z)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const j=c(e,["modelArmorConfig"]);return i!==void 0&&j!=null&&f(i,["modelArmorConfig"],j),r}function Zy(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["contents"]);if(u!=null){let p=nn(u);Array.isArray(p)&&(p=p.map(y=>da(y))),f(s,["contents"],p)}const d=c(e,["config"]);return d!=null&&f(s,["generationConfig"],mx(n,d,s)),s}function Wy(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["contents"]);if(u!=null){let p=nn(u);Array.isArray(p)&&(p=p.map(y=>y)),f(s,["contents"],p)}const d=c(e,["config"]);return d!=null&&f(s,["generationConfig"],gx(n,d,s)),s}function jy(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(v=>kw(v))),f(i,["candidates"],m)}const u=c(n,["modelVersion"]);u!=null&&f(i,["modelVersion"],u);const d=c(n,["promptFeedback"]);d!=null&&f(i,["promptFeedback"],d);const p=c(n,["responseId"]);p!=null&&f(i,["responseId"],p);const y=c(n,["usageMetadata"]);return y!=null&&f(i,["usageMetadata"],y),i}function ev(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["candidates"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),f(i,["candidates"],v)}const u=c(n,["createTime"]);u!=null&&f(i,["createTime"],u);const d=c(n,["modelVersion"]);d!=null&&f(i,["modelVersion"],d);const p=c(n,["promptFeedback"]);p!=null&&f(i,["promptFeedback"],p);const y=c(n,["responseId"]);y!=null&&f(i,["responseId"],y);const m=c(n,["usageMetadata"]);return m!=null&&f(i,["usageMetadata"],m),i}function yx(n,e,i){const s={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(n,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const u=c(n,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const d=c(n,["guidanceScale"]);if(e!==void 0&&d!=null&&f(e,["parameters","guidanceScale"],d),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=c(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const y=c(n,["personGeneration"]);e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y);const m=c(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);const v=c(n,["includeRaiReason"]);e!==void 0&&v!=null&&f(e,["parameters","includeRaiReason"],v);const _=c(n,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const T=c(n,["outputMimeType"]);e!==void 0&&T!=null&&f(e,["parameters","outputOptions","mimeType"],T);const A=c(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&f(e,["parameters","outputOptions","compressionQuality"],A),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=c(n,["imageSize"]);if(e!==void 0&&b!=null&&f(e,["parameters","sampleImageSize"],b),c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function vx(n,e,i){const s={},r=c(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const u=c(n,["negativePrompt"]);e!==void 0&&u!=null&&f(e,["parameters","negativePrompt"],u);const d=c(n,["numberOfImages"]);e!==void 0&&d!=null&&f(e,["parameters","sampleCount"],d);const p=c(n,["aspectRatio"]);e!==void 0&&p!=null&&f(e,["parameters","aspectRatio"],p);const y=c(n,["guidanceScale"]);e!==void 0&&y!=null&&f(e,["parameters","guidanceScale"],y);const m=c(n,["seed"]);e!==void 0&&m!=null&&f(e,["parameters","seed"],m);const v=c(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&f(e,["parameters","safetySetting"],v);const _=c(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const T=c(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&f(e,["parameters","includeSafetyAttributes"],T);const A=c(n,["includeRaiReason"]);e!==void 0&&A!=null&&f(e,["parameters","includeRaiReason"],A);const b=c(n,["language"]);e!==void 0&&b!=null&&f(e,["parameters","language"],b);const I=c(n,["outputMimeType"]);e!==void 0&&I!=null&&f(e,["parameters","outputOptions","mimeType"],I);const x=c(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const B=c(n,["addWatermark"]);e!==void 0&&B!=null&&f(e,["parameters","addWatermark"],B);const V=c(n,["labels"]);e!==void 0&&V!=null&&f(e,["labels"],V);const H=c(n,["imageSize"]);e!==void 0&&H!=null&&f(e,["parameters","sampleImageSize"],H);const G=c(n,["enhancePrompt"]);return e!==void 0&&G!=null&&f(e,["parameters","enhancePrompt"],G),s}function _x(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["prompt"]);u!=null&&f(s,["instances[0]","prompt"],u);const d=c(e,["config"]);return d!=null&&yx(d,s),s}function Sx(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["prompt"]);u!=null&&f(s,["instances[0]","prompt"],u);const d=c(e,["config"]);return d!=null&&vx(d,s),s}function Tx(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>Ux(p))),f(i,["generatedImages"],d)}const u=c(n,["positivePromptSafetyAttributes"]);return u!=null&&f(i,["positivePromptSafetyAttributes"],f0(u)),i}function Ex(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>ha(p))),f(i,["generatedImages"],d)}const u=c(n,["positivePromptSafetyAttributes"]);return u!=null&&f(i,["positivePromptSafetyAttributes"],d0(u)),i}function Ax(n,e,i){const s={},r=c(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=c(n,["durationSeconds"]);if(e!==void 0&&u!=null&&f(e,["parameters","durationSeconds"],u),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=c(n,["aspectRatio"]);e!==void 0&&d!=null&&f(e,["parameters","aspectRatio"],d);const p=c(n,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const y=c(n,["personGeneration"]);if(e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=c(n,["negativePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","negativePrompt"],m);const v=c(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&f(e,["parameters","enhancePrompt"],v),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=c(n,["lastFrame"]);e!==void 0&&_!=null&&f(e,["instances[0]","lastFrame"],pa(_));const T=c(n,["referenceImages"]);if(e!==void 0&&T!=null){let A=T;Array.isArray(A)&&(A=A.map(b=>bR(b))),f(e,["instances[0]","referenceImages"],A)}if(c(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function Cx(n,e,i){const s={},r=c(n,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const u=c(n,["outputGcsUri"]);e!==void 0&&u!=null&&f(e,["parameters","storageUri"],u);const d=c(n,["fps"]);e!==void 0&&d!=null&&f(e,["parameters","fps"],d);const p=c(n,["durationSeconds"]);e!==void 0&&p!=null&&f(e,["parameters","durationSeconds"],p);const y=c(n,["seed"]);e!==void 0&&y!=null&&f(e,["parameters","seed"],y);const m=c(n,["aspectRatio"]);e!==void 0&&m!=null&&f(e,["parameters","aspectRatio"],m);const v=c(n,["resolution"]);e!==void 0&&v!=null&&f(e,["parameters","resolution"],v);const _=c(n,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const T=c(n,["pubsubTopic"]);e!==void 0&&T!=null&&f(e,["parameters","pubsubTopic"],T);const A=c(n,["negativePrompt"]);e!==void 0&&A!=null&&f(e,["parameters","negativePrompt"],A);const b=c(n,["enhancePrompt"]);e!==void 0&&b!=null&&f(e,["parameters","enhancePrompt"],b);const I=c(n,["generateAudio"]);e!==void 0&&I!=null&&f(e,["parameters","generateAudio"],I);const x=c(n,["lastFrame"]);e!==void 0&&x!=null&&f(e,["instances[0]","lastFrame"],dn(x));const B=c(n,["referenceImages"]);if(e!==void 0&&B!=null){let G=B;Array.isArray(G)&&(G=G.map(P=>wR(P))),f(e,["instances[0]","referenceImages"],G)}const V=c(n,["mask"]);e!==void 0&&V!=null&&f(e,["instances[0]","mask"],CR(V));const H=c(n,["compressionQuality"]);return e!==void 0&&H!=null&&f(e,["parameters","compressionQuality"],H),s}function bx(n,e){const i={},s=c(n,["name"]);s!=null&&f(i,["name"],s);const r=c(n,["metadata"]);r!=null&&f(i,["metadata"],r);const u=c(n,["done"]);u!=null&&f(i,["done"],u);const d=c(n,["error"]);d!=null&&f(i,["error"],d);const p=c(n,["response","generateVideoResponse"]);return p!=null&&f(i,["response"],Nx(p)),i}function wx(n,e){const i={},s=c(n,["name"]);s!=null&&f(i,["name"],s);const r=c(n,["metadata"]);r!=null&&f(i,["metadata"],r);const u=c(n,["done"]);u!=null&&f(i,["done"],u);const d=c(n,["error"]);d!=null&&f(i,["error"],d);const p=c(n,["response"]);return p!=null&&f(i,["response"],Ix(p)),i}function xx(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["prompt"]);u!=null&&f(s,["instances[0]","prompt"],u);const d=c(e,["image"]);d!=null&&f(s,["instances[0]","image"],pa(d));const p=c(e,["video"]);p!=null&&f(s,["instances[0]","video"],p0(p));const y=c(e,["source"]);y!=null&&Mx(y,s);const m=c(e,["config"]);return m!=null&&Ax(m,s),s}function Rx(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["prompt"]);u!=null&&f(s,["instances[0]","prompt"],u);const d=c(e,["image"]);d!=null&&f(s,["instances[0]","image"],dn(d));const p=c(e,["video"]);p!=null&&f(s,["instances[0]","video"],m0(p));const y=c(e,["source"]);y!=null&&Dx(y,s);const m=c(e,["config"]);return m!=null&&Cx(m,s),s}function Nx(n,e){const i={},s=c(n,["generatedSamples"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>Ox(p))),f(i,["generatedVideos"],d)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&f(i,["raiMediaFilteredCount"],r);const u=c(n,["raiMediaFilteredReasons"]);return u!=null&&f(i,["raiMediaFilteredReasons"],u),i}function Ix(n,e){const i={},s=c(n,["videos"]);if(s!=null){let d=s;Array.isArray(d)&&(d=d.map(p=>Gx(p))),f(i,["generatedVideos"],d)}const r=c(n,["raiMediaFilteredCount"]);r!=null&&f(i,["raiMediaFilteredCount"],r);const u=c(n,["raiMediaFilteredReasons"]);return u!=null&&f(i,["raiMediaFilteredReasons"],u),i}function Mx(n,e,i){const s={},r=c(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const u=c(n,["image"]);e!==void 0&&u!=null&&f(e,["instances[0]","image"],pa(u));const d=c(n,["video"]);return e!==void 0&&d!=null&&f(e,["instances[0]","video"],p0(d)),s}function Dx(n,e,i){const s={},r=c(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const u=c(n,["image"]);e!==void 0&&u!=null&&f(e,["instances[0]","image"],dn(u));const d=c(n,["video"]);return e!==void 0&&d!=null&&f(e,["instances[0]","video"],m0(d)),s}function Ux(n,e){const i={},s=c(n,["_self"]);s!=null&&f(i,["image"],Fx(s));const r=c(n,["raiFilteredReason"]);r!=null&&f(i,["raiFilteredReason"],r);const u=c(n,["_self"]);return u!=null&&f(i,["safetyAttributes"],f0(u)),i}function ha(n,e){const i={},s=c(n,["_self"]);s!=null&&f(i,["image"],c0(s));const r=c(n,["raiFilteredReason"]);r!=null&&f(i,["raiFilteredReason"],r);const u=c(n,["_self"]);u!=null&&f(i,["safetyAttributes"],d0(u));const d=c(n,["prompt"]);return d!=null&&f(i,["enhancedPrompt"],d),i}function Lx(n,e){const i={},s=c(n,["_self"]);s!=null&&f(i,["mask"],c0(s));const r=c(n,["labels"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(i,["labels"],u)}return i}function Ox(n,e){const i={},s=c(n,["video"]);return s!=null&&f(i,["video"],ER(s)),i}function Gx(n,e){const i={},s=c(n,["_self"]);return s!=null&&f(i,["video"],AR(s)),i}function Px(n,e){const i={},s=c(n,["modelSelectionConfig"]);s!=null&&f(i,["modelConfig"],s);const r=c(n,["responseJsonSchema"]);r!=null&&f(i,["responseJsonSchema"],r);const u=c(n,["audioTimestamp"]);u!=null&&f(i,["audioTimestamp"],u);const d=c(n,["candidateCount"]);d!=null&&f(i,["candidateCount"],d);const p=c(n,["enableAffectiveDialog"]);p!=null&&f(i,["enableAffectiveDialog"],p);const y=c(n,["frequencyPenalty"]);y!=null&&f(i,["frequencyPenalty"],y);const m=c(n,["logprobs"]);m!=null&&f(i,["logprobs"],m);const v=c(n,["maxOutputTokens"]);v!=null&&f(i,["maxOutputTokens"],v);const _=c(n,["mediaResolution"]);_!=null&&f(i,["mediaResolution"],_);const T=c(n,["presencePenalty"]);T!=null&&f(i,["presencePenalty"],T);const A=c(n,["responseLogprobs"]);A!=null&&f(i,["responseLogprobs"],A);const b=c(n,["responseMimeType"]);b!=null&&f(i,["responseMimeType"],b);const I=c(n,["responseModalities"]);I!=null&&f(i,["responseModalities"],I);const x=c(n,["responseSchema"]);x!=null&&f(i,["responseSchema"],x);const B=c(n,["routingConfig"]);B!=null&&f(i,["routingConfig"],B);const V=c(n,["seed"]);V!=null&&f(i,["seed"],V);const H=c(n,["speechConfig"]);H!=null&&f(i,["speechConfig"],H);const G=c(n,["stopSequences"]);G!=null&&f(i,["stopSequences"],G);const P=c(n,["temperature"]);P!=null&&f(i,["temperature"],P);const W=c(n,["thinkingConfig"]);W!=null&&f(i,["thinkingConfig"],W);const J=c(n,["topK"]);J!=null&&f(i,["topK"],J);const fe=c(n,["topP"]);if(fe!=null&&f(i,["topP"],fe),c(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function kx(n,e,i){const s={},r=c(e,["model"]);return r!=null&&f(s,["_url","name"],De(n,r)),s}function Hx(n,e,i){const s={},r=c(e,["model"]);return r!=null&&f(s,["_url","name"],De(n,r)),s}function qx(n,e){const i={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(n,["enableWidget"]);return s!=null&&f(i,["enableWidget"],s),i}function Bx(n,e){const i={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=c(n,["timeRangeFilter"]);return s!=null&&f(i,["timeRangeFilter"],s),i}function Vx(n,e){const i={},s=c(n,["aspectRatio"]);s!=null&&f(i,["aspectRatio"],s);const r=c(n,["imageSize"]);if(r!=null&&f(i,["imageSize"],r),c(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return i}function zx(n,e){const i={},s=c(n,["aspectRatio"]);s!=null&&f(i,["aspectRatio"],s);const r=c(n,["imageSize"]);r!=null&&f(i,["imageSize"],r);const u=c(n,["personGeneration"]);u!=null&&f(i,["personGeneration"],u);const d=c(n,["outputMimeType"]);d!=null&&f(i,["imageOutputOptions","mimeType"],d);const p=c(n,["outputCompressionQuality"]);return p!=null&&f(i,["imageOutputOptions","compressionQuality"],p),i}function Fx(n,e){const i={},s=c(n,["bytesBase64Encoded"]);s!=null&&f(i,["imageBytes"],yi(s));const r=c(n,["mimeType"]);return r!=null&&f(i,["mimeType"],r),i}function c0(n,e){const i={},s=c(n,["gcsUri"]);s!=null&&f(i,["gcsUri"],s);const r=c(n,["bytesBase64Encoded"]);r!=null&&f(i,["imageBytes"],yi(r));const u=c(n,["mimeType"]);return u!=null&&f(i,["mimeType"],u),i}function pa(n,e){const i={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=c(n,["imageBytes"]);s!=null&&f(i,["bytesBase64Encoded"],yi(s));const r=c(n,["mimeType"]);return r!=null&&f(i,["mimeType"],r),i}function dn(n,e){const i={},s=c(n,["gcsUri"]);s!=null&&f(i,["gcsUri"],s);const r=c(n,["imageBytes"]);r!=null&&f(i,["bytesBase64Encoded"],yi(r));const u=c(n,["mimeType"]);return u!=null&&f(i,["mimeType"],u),i}function $x(n,e,i,s){const r={},u=c(e,["pageSize"]);i!==void 0&&u!=null&&f(i,["_query","pageSize"],u);const d=c(e,["pageToken"]);i!==void 0&&d!=null&&f(i,["_query","pageToken"],d);const p=c(e,["filter"]);i!==void 0&&p!=null&&f(i,["_query","filter"],p);const y=c(e,["queryBase"]);return i!==void 0&&y!=null&&f(i,["_url","models_url"],i0(n,y)),r}function Jx(n,e,i,s){const r={},u=c(e,["pageSize"]);i!==void 0&&u!=null&&f(i,["_query","pageSize"],u);const d=c(e,["pageToken"]);i!==void 0&&d!=null&&f(i,["_query","pageToken"],d);const p=c(e,["filter"]);i!==void 0&&p!=null&&f(i,["_query","filter"],p);const y=c(e,["queryBase"]);return i!==void 0&&y!=null&&f(i,["_url","models_url"],i0(n,y)),r}function Yx(n,e,i){const s={},r=c(e,["config"]);return r!=null&&$x(n,r,s),s}function Kx(n,e,i){const s={},r=c(e,["config"]);return r!=null&&Jx(n,r,s),s}function Xx(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["nextPageToken"]);r!=null&&f(i,["nextPageToken"],r);const u=c(n,["_self"]);if(u!=null){let d=o0(u);Array.isArray(d)&&(d=d.map(p=>_f(p))),f(i,["models"],d)}return i}function Qx(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["nextPageToken"]);r!=null&&f(i,["nextPageToken"],r);const u=c(n,["_self"]);if(u!=null){let d=o0(u);Array.isArray(d)&&(d=d.map(p=>Sf(p))),f(i,["models"],d)}return i}function Zx(n,e){const i={},s=c(n,["maskMode"]);s!=null&&f(i,["maskMode"],s);const r=c(n,["segmentationClasses"]);r!=null&&f(i,["maskClasses"],r);const u=c(n,["maskDilation"]);return u!=null&&f(i,["dilation"],u),i}function _f(n,e){const i={},s=c(n,["name"]);s!=null&&f(i,["name"],s);const r=c(n,["displayName"]);r!=null&&f(i,["displayName"],r);const u=c(n,["description"]);u!=null&&f(i,["description"],u);const d=c(n,["version"]);d!=null&&f(i,["version"],d);const p=c(n,["_self"]);p!=null&&f(i,["tunedModelInfo"],hR(p));const y=c(n,["inputTokenLimit"]);y!=null&&f(i,["inputTokenLimit"],y);const m=c(n,["outputTokenLimit"]);m!=null&&f(i,["outputTokenLimit"],m);const v=c(n,["supportedGenerationMethods"]);v!=null&&f(i,["supportedActions"],v);const _=c(n,["temperature"]);_!=null&&f(i,["temperature"],_);const T=c(n,["maxTemperature"]);T!=null&&f(i,["maxTemperature"],T);const A=c(n,["topP"]);A!=null&&f(i,["topP"],A);const b=c(n,["topK"]);b!=null&&f(i,["topK"],b);const I=c(n,["thinking"]);return I!=null&&f(i,["thinking"],I),i}function Sf(n,e){const i={},s=c(n,["name"]);s!=null&&f(i,["name"],s);const r=c(n,["displayName"]);r!=null&&f(i,["displayName"],r);const u=c(n,["description"]);u!=null&&f(i,["description"],u);const d=c(n,["versionId"]);d!=null&&f(i,["version"],d);const p=c(n,["deployedModels"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(A=>cx(A))),f(i,["endpoints"],T)}const y=c(n,["labels"]);y!=null&&f(i,["labels"],y);const m=c(n,["_self"]);m!=null&&f(i,["tunedModelInfo"],pR(m));const v=c(n,["defaultCheckpointId"]);v!=null&&f(i,["defaultCheckpointId"],v);const _=c(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>A)),f(i,["checkpoints"],T)}return i}function Wx(n,e){const i={},s=c(n,["mediaResolution"]);s!=null&&f(i,["mediaResolution"],s);const r=c(n,["codeExecutionResult"]);r!=null&&f(i,["codeExecutionResult"],r);const u=c(n,["executableCode"]);u!=null&&f(i,["executableCode"],u);const d=c(n,["fileData"]);d!=null&&f(i,["fileData"],fx(d));const p=c(n,["functionCall"]);p!=null&&f(i,["functionCall"],dx(p));const y=c(n,["functionResponse"]);y!=null&&f(i,["functionResponse"],y);const m=c(n,["inlineData"]);m!=null&&f(i,["inlineData"],Pw(m));const v=c(n,["text"]);v!=null&&f(i,["text"],v);const _=c(n,["thought"]);_!=null&&f(i,["thought"],_);const T=c(n,["thoughtSignature"]);T!=null&&f(i,["thoughtSignature"],T);const A=c(n,["videoMetadata"]);return A!=null&&f(i,["videoMetadata"],A),i}function jx(n,e){const i={},s=c(n,["productImage"]);return s!=null&&f(i,["image"],dn(s)),i}function eR(n,e,i){const s={},r=c(n,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const u=c(n,["baseSteps"]);e!==void 0&&u!=null&&f(e,["parameters","baseSteps"],u);const d=c(n,["outputGcsUri"]);e!==void 0&&d!=null&&f(e,["parameters","storageUri"],d);const p=c(n,["seed"]);e!==void 0&&p!=null&&f(e,["parameters","seed"],p);const y=c(n,["safetyFilterLevel"]);e!==void 0&&y!=null&&f(e,["parameters","safetySetting"],y);const m=c(n,["personGeneration"]);e!==void 0&&m!=null&&f(e,["parameters","personGeneration"],m);const v=c(n,["addWatermark"]);e!==void 0&&v!=null&&f(e,["parameters","addWatermark"],v);const _=c(n,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const T=c(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&f(e,["parameters","outputOptions","compressionQuality"],T);const A=c(n,["enhancePrompt"]);e!==void 0&&A!=null&&f(e,["parameters","enhancePrompt"],A);const b=c(n,["labels"]);return e!==void 0&&b!=null&&f(e,["labels"],b),s}function tR(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["source"]);u!=null&&iR(u,s);const d=c(e,["config"]);return d!=null&&eR(d,s),s}function nR(n,e){const i={},s=c(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>ha(u))),f(i,["generatedImages"],r)}return i}function iR(n,e,i){const s={},r=c(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const u=c(n,["personImage"]);e!==void 0&&u!=null&&f(e,["instances[0]","personImage","image"],dn(u));const d=c(n,["productImages"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(y=>jx(y))),f(e,["instances[0]","productImages"],p)}return s}function oR(n,e){const i={},s=c(n,["referenceImage"]);s!=null&&f(i,["referenceImage"],dn(s));const r=c(n,["referenceId"]);r!=null&&f(i,["referenceId"],r);const u=c(n,["referenceType"]);u!=null&&f(i,["referenceType"],u);const d=c(n,["maskImageConfig"]);d!=null&&f(i,["maskImageConfig"],Zx(d));const p=c(n,["controlImageConfig"]);p!=null&&f(i,["controlImageConfig"],Fw(p));const y=c(n,["styleImageConfig"]);y!=null&&f(i,["styleImageConfig"],y);const m=c(n,["subjectImageConfig"]);return m!=null&&f(i,["subjectImageConfig"],m),i}function f0(n,e){const i={},s=c(n,["safetyAttributes","categories"]);s!=null&&f(i,["categories"],s);const r=c(n,["safetyAttributes","scores"]);r!=null&&f(i,["scores"],r);const u=c(n,["contentType"]);return u!=null&&f(i,["contentType"],u),i}function d0(n,e){const i={},s=c(n,["safetyAttributes","categories"]);s!=null&&f(i,["categories"],s);const r=c(n,["safetyAttributes","scores"]);r!=null&&f(i,["scores"],r);const u=c(n,["contentType"]);return u!=null&&f(i,["contentType"],u),i}function sR(n,e){const i={},s=c(n,["category"]);if(s!=null&&f(i,["category"],s),c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(n,["threshold"]);return r!=null&&f(i,["threshold"],r),i}function lR(n,e){const i={},s=c(n,["image"]);return s!=null&&f(i,["image"],dn(s)),i}function rR(n,e,i){const s={},r=c(n,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const u=c(n,["maxPredictions"]);e!==void 0&&u!=null&&f(e,["parameters","maxPredictions"],u);const d=c(n,["confidenceThreshold"]);e!==void 0&&d!=null&&f(e,["parameters","confidenceThreshold"],d);const p=c(n,["maskDilation"]);e!==void 0&&p!=null&&f(e,["parameters","maskDilation"],p);const y=c(n,["binaryColorThreshold"]);e!==void 0&&y!=null&&f(e,["parameters","binaryColorThreshold"],y);const m=c(n,["labels"]);return e!==void 0&&m!=null&&f(e,["labels"],m),s}function aR(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["source"]);u!=null&&cR(u,s);const d=c(e,["config"]);return d!=null&&rR(d,s),s}function uR(n,e){const i={},s=c(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>Lx(u))),f(i,["generatedMasks"],r)}return i}function cR(n,e,i){const s={},r=c(n,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const u=c(n,["image"]);e!==void 0&&u!=null&&f(e,["instances[0]","image"],dn(u));const d=c(n,["scribbleImage"]);return e!==void 0&&d!=null&&f(e,["instances[0]","scribble"],lR(d)),s}function fR(n,e){const i={},s=c(n,["retrievalConfig"]);s!=null&&f(i,["retrievalConfig"],s);const r=c(n,["functionCallingConfig"]);return r!=null&&f(i,["functionCallingConfig"],hx(r)),i}function dR(n,e){const i={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(n,["computerUse"]);s!=null&&f(i,["computerUse"],s);const r=c(n,["fileSearch"]);r!=null&&f(i,["fileSearch"],r);const u=c(n,["codeExecution"]);if(u!=null&&f(i,["codeExecution"],u),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=c(n,["functionDeclarations"]);if(d!=null){let _=d;Array.isArray(_)&&(_=_.map(T=>T)),f(i,["functionDeclarations"],_)}const p=c(n,["googleMaps"]);p!=null&&f(i,["googleMaps"],qx(p));const y=c(n,["googleSearch"]);y!=null&&f(i,["googleSearch"],Bx(y));const m=c(n,["googleSearchRetrieval"]);m!=null&&f(i,["googleSearchRetrieval"],m);const v=c(n,["urlContext"]);return v!=null&&f(i,["urlContext"],v),i}function h0(n,e){const i={},s=c(n,["retrieval"]);s!=null&&f(i,["retrieval"],s);const r=c(n,["computerUse"]);if(r!=null&&f(i,["computerUse"],r),c(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=c(n,["codeExecution"]);u!=null&&f(i,["codeExecution"],u);const d=c(n,["enterpriseWebSearch"]);d!=null&&f(i,["enterpriseWebSearch"],d);const p=c(n,["functionDeclarations"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(A=>px(A))),f(i,["functionDeclarations"],T)}const y=c(n,["googleMaps"]);y!=null&&f(i,["googleMaps"],y);const m=c(n,["googleSearch"]);m!=null&&f(i,["googleSearch"],m);const v=c(n,["googleSearchRetrieval"]);v!=null&&f(i,["googleSearchRetrieval"],v);const _=c(n,["urlContext"]);return _!=null&&f(i,["urlContext"],_),i}function hR(n,e){const i={},s=c(n,["baseModel"]);s!=null&&f(i,["baseModel"],s);const r=c(n,["createTime"]);r!=null&&f(i,["createTime"],r);const u=c(n,["updateTime"]);return u!=null&&f(i,["updateTime"],u),i}function pR(n,e){const i={},s=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&f(i,["baseModel"],s);const r=c(n,["createTime"]);r!=null&&f(i,["createTime"],r);const u=c(n,["updateTime"]);return u!=null&&f(i,["updateTime"],u),i}function mR(n,e,i){const s={},r=c(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const u=c(n,["description"]);e!==void 0&&u!=null&&f(e,["description"],u);const d=c(n,["defaultCheckpointId"]);return e!==void 0&&d!=null&&f(e,["defaultCheckpointId"],d),s}function gR(n,e,i){const s={},r=c(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const u=c(n,["description"]);e!==void 0&&u!=null&&f(e,["description"],u);const d=c(n,["defaultCheckpointId"]);return e!==void 0&&d!=null&&f(e,["defaultCheckpointId"],d),s}function yR(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","name"],De(n,r));const u=c(e,["config"]);return u!=null&&mR(u,s),s}function vR(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["config"]);return u!=null&&gR(u,s),s}function _R(n,e,i){const s={},r=c(n,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const u=c(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const d=c(n,["personGeneration"]);e!==void 0&&d!=null&&f(e,["parameters","personGeneration"],d);const p=c(n,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const y=c(n,["outputMimeType"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","mimeType"],y);const m=c(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m);const v=c(n,["enhanceInputImage"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],v);const _=c(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=c(n,["labels"]);e!==void 0&&T!=null&&f(e,["labels"],T);const A=c(n,["numberOfImages"]);e!==void 0&&A!=null&&f(e,["parameters","sampleCount"],A);const b=c(n,["mode"]);return e!==void 0&&b!=null&&f(e,["parameters","mode"],b),s}function SR(n,e,i){const s={},r=c(e,["model"]);r!=null&&f(s,["_url","model"],De(n,r));const u=c(e,["image"]);u!=null&&f(s,["instances[0]","image"],dn(u));const d=c(e,["upscaleFactor"]);d!=null&&f(s,["parameters","upscaleConfig","upscaleFactor"],d);const p=c(e,["config"]);return p!=null&&_R(p,s),s}function TR(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>ha(d))),f(i,["generatedImages"],u)}return i}function ER(n,e){const i={},s=c(n,["uri"]);s!=null&&f(i,["uri"],s);const r=c(n,["encodedVideo"]);r!=null&&f(i,["videoBytes"],yi(r));const u=c(n,["encoding"]);return u!=null&&f(i,["mimeType"],u),i}function AR(n,e){const i={},s=c(n,["gcsUri"]);s!=null&&f(i,["uri"],s);const r=c(n,["bytesBase64Encoded"]);r!=null&&f(i,["videoBytes"],yi(r));const u=c(n,["mimeType"]);return u!=null&&f(i,["mimeType"],u),i}function CR(n,e){const i={},s=c(n,["image"]);s!=null&&f(i,["_self"],dn(s));const r=c(n,["maskMode"]);return r!=null&&f(i,["maskMode"],r),i}function bR(n,e){const i={},s=c(n,["image"]);s!=null&&f(i,["image"],pa(s));const r=c(n,["referenceType"]);return r!=null&&f(i,["referenceType"],r),i}function wR(n,e){const i={},s=c(n,["image"]);s!=null&&f(i,["image"],dn(s));const r=c(n,["referenceType"]);return r!=null&&f(i,["referenceType"],r),i}function p0(n,e){const i={},s=c(n,["uri"]);s!=null&&f(i,["uri"],s);const r=c(n,["videoBytes"]);r!=null&&f(i,["encodedVideo"],yi(r));const u=c(n,["mimeType"]);return u!=null&&f(i,["encoding"],u),i}function m0(n,e){const i={},s=c(n,["uri"]);s!=null&&f(i,["gcsUri"],s);const r=c(n,["videoBytes"]);r!=null&&f(i,["bytesBase64Encoded"],yi(r));const u=c(n,["mimeType"]);return u!=null&&f(i,["mimeType"],u),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xR(n,e){const i={},s=c(n,["displayName"]);return e!==void 0&&s!=null&&f(e,["displayName"],s),i}function RR(n){const e={},i=c(n,["config"]);return i!=null&&xR(i,e),e}function NR(n,e){const i={},s=c(n,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),i}function IR(n){const e={},i=c(n,["name"]);i!=null&&f(e,["_url","name"],i);const s=c(n,["config"]);return s!=null&&NR(s,e),e}function MR(n){const e={},i=c(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function DR(n,e){const i={},s=c(n,["customMetadata"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["customMetadata"],u)}const r=c(n,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),i}function UR(n){const e={},i=c(n,["name"]);i!=null&&f(e,["name"],i);const s=c(n,["metadata"]);s!=null&&f(e,["metadata"],s);const r=c(n,["done"]);r!=null&&f(e,["done"],r);const u=c(n,["error"]);u!=null&&f(e,["error"],u);const d=c(n,["response"]);return d!=null&&f(e,["response"],OR(d)),e}function LR(n){const e={},i=c(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const s=c(n,["fileName"]);s!=null&&f(e,["fileName"],s);const r=c(n,["config"]);return r!=null&&DR(r,e),e}function OR(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["parent"]);s!=null&&f(e,["parent"],s);const r=c(n,["documentName"]);return r!=null&&f(e,["documentName"],r),e}function GR(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=c(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),i}function PR(n){const e={},i=c(n,["config"]);return i!=null&&GR(i,e),e}function kR(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=c(n,["fileSearchStores"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["fileSearchStores"],u)}return e}function g0(n,e){const i={},s=c(n,["mimeType"]);e!==void 0&&s!=null&&f(e,["mimeType"],s);const r=c(n,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const u=c(n,["customMetadata"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>y)),f(e,["customMetadata"],p)}const d=c(n,["chunkingConfig"]);return e!==void 0&&d!=null&&f(e,["chunkingConfig"],d),i}function HR(n){const e={},i=c(n,["fileSearchStoreName"]);i!=null&&f(e,["_url","file_search_store_name"],i);const s=c(n,["config"]);return s!=null&&g0(s,e),e}function qR(n){const e={},i=c(n,["sdkHttpResponse"]);return i!=null&&f(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BR="Content-Type",VR="X-Server-Timeout",zR="User-Agent",Tf="x-goog-api-client",FR="1.40.0",$R=`google-genai-sdk/${FR}`,JR="v1beta1",YR="v1beta";class KR{constructor(e){var i,s,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(i=e.httpOptions)===null||i===void 0?void 0:i.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const u={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const p=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!p?(u.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?u.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(u.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),u.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:JR}else{if(!this.clientOptions.apiKey)throw new il({message:"API key must be set when using the Gemini API.",status:403});u.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:YR,u.baseUrl="https://generativelanguage.googleapis.com/"}u.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=u,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(u,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,s){const r=[this.getRequestUrlInternal(i)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,i){return!(i.baseUrl&&i.baseUrlResourceScope===mf.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,i),r=this.constructUrl(e.path,i,s);if(e.queryParams)for(const[d,p]of Object.entries(e.queryParams))r.searchParams.append(d,String(p));let u={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=e.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,i,r.toString(),e.abortSignal),this.unaryApiCall(r,u,e.httpMethod)}patchHttpOptions(e,i){const s=JSON.parse(JSON.stringify(e));for(const[r,u]of Object.entries(i))typeof u=="object"?s[r]=Object.assign(Object.assign({},s[r]),u):u!==void 0&&(s[r]=u);return s}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,i),r=this.constructUrl(e.path,i,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=e.body,u=await this.includeExtraHttpOptionsToRequestInit(u,i,r.toString(),e.abortSignal),this.streamApiCall(r,u,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,s,r){if(i&&i.timeout||r){const u=new AbortController,d=u.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const p=setTimeout(()=>u.abort(),i.timeout);p&&typeof p.unref=="function"&&p.unref()}r&&r.addEventListener("abort",()=>{u.abort()}),e.signal=d}return i&&i.extraBody!==null&&XR(e,i.extraBody),e.headers=await this.getHeadersInternal(i,s),e}async unaryApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async r=>(await tv(r),new gf(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async r=>(await tv(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return cn(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let d="";const p="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield pe(r.read());if(m){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=u.decode(v,{stream:!0});try{const b=JSON.parse(_);if("error"in b){const I=JSON.parse(JSON.stringify(b.error)),x=I.status,B=I.code,V=`got status: ${x}. ${JSON.stringify(b)}`;if(B>=400&&B<600)throw new il({message:V,status:B})}}catch(b){if(b.name==="ApiError")throw b}d+=_;let T=-1,A=0;for(;;){T=-1,A=0;for(const x of y){const B=d.indexOf(x);B!==-1&&(T===-1||B<T)&&(T=B,A=x.length)}if(T===-1)break;const b=d.substring(0,T);d=d.substring(T+A);const I=b.trim();if(I.startsWith(p)){const x=I.substring(p.length).trim();try{const B=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield pe(new gf(B))}catch(B){throw new Error(`exception parsing stream chunk ${x}. ${B}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},i=$R+" "+this.clientOptions.userAgentExtra;return e[zR]=i,e[Tf]=i,e[BR]="application/json",e}async getHeadersInternal(e,i){const s=new Headers;if(e&&e.headers){for(const[r,u]of Object.entries(e.headers))s.append(r,u);e.timeout&&e.timeout>0&&s.append(VR,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,i),s}getFileName(e){var i;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(i=s.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),s}async uploadFile(e,i){var s;const r={};i!=null&&(r.mimeType=i.mimeType,r.name=i.name,r.displayName=i.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,d=await u.stat(e);r.sizeBytes=String(d.size);const p=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:d.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=p;const y={file:r},m=this.getFileName(e),v=ee("upload/v1beta/files",y._url),_=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,y,i==null?void 0:i.httpOptions);return u.upload(e,_,this)}async uploadFileToFileSearchStore(e,i,s){var r;const u=this.clientOptions.uploader,d=await u.stat(i),p=String(d.size),y=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:d.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),_={};s!=null&&g0(s,_);const T=await this.fetchUploadUrl(m,p,y,v,_,s==null?void 0:s.httpOptions);return u.uploadToFileSearchStore(i,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,s,r,u,d){var p;let y={};d?y=d:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(u),httpMethod:"POST",httpOptions:y});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(p=m==null?void 0:m.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function tv(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const i=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw i>=400&&i<600?new il({message:r,status:i}):new Error(r)}}function XR(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof n.body=="string"&&n.body.length>0)try{const u=JSON.parse(n.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))i=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(u,d){const p=Object.assign({},u);for(const y in d)if(Object.prototype.hasOwnProperty.call(d,y)){const m=d[y],v=p[y];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?p[y]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),p[y]=m)}return p}const r=s(i,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QR="mcp_used/unknown";let ZR=!1;function y0(n){for(const e of n)if(WR(e)||typeof e=="object"&&"inputSchema"in e)return!0;return ZR}function v0(n){var e;const i=(e=n[Tf])!==null&&e!==void 0?e:"";n[Tf]=(i+` ${QR}`).trimStart()}function WR(n){return n!==null&&typeof n=="object"&&n instanceof Zf}function jR(n){return cn(this,arguments,function*(i,s=100){let r,u=0;for(;u<s;){const d=yield pe(i.listTools({cursor:r}));for(const p of d.tools)yield yield pe(p),u++;if(!d.nextCursor)break;r=d.nextCursor}})}class Zf{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new Zf(e,i)}async initialize(){var e,i,s,r;if(this.mcpTools.length>0)return;const u={},d=[];for(const v of this.mcpClients)try{for(var p=!0,y=(i=void 0,fn(jR(v))),m;m=await y.next(),e=m.done,!e;p=!0){r=m.value,p=!1;const _=r;d.push(_);const T=_.name;if(u[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);u[T]=v}}catch(_){i={error:_}}finally{try{!p&&!e&&(s=y.return)&&await s.call(y)}finally{if(i)throw i.error}}this.mcpTools=d,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),RC(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const d=await r.callTool({name:s.name,arguments:s.args},void 0,u);i.push({functionResponse:{name:s.name,response:d.isError?{error:d}:d}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function eN(n,e,i){const s=new SC;let r;i.data instanceof Blob?r=JSON.parse(await i.data.text()):r=JSON.parse(i.data),Object.assign(s,r),e(s)}class tN{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s}async connect(e){var i,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),d=oN(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${p}`;let m=()=>{};const v=new Promise(H=>{m=H}),_=e.callbacks,T=function(){m({})},A=this.apiClient,b={onopen:T,onmessage:H=>{eN(A,_.onmessage,H)},onerror:(i=_==null?void 0:_.onerror)!==null&&i!==void 0?i:function(H){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(H){}},I=this.webSocketFactory.create(y,iN(d),b);I.connect(),await v;const V={setup:{model:De(this.apiClient,e.model)}};return I.send(JSON.stringify(V)),new nN(I,this.apiClient)}}class nN{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=xw(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=ww(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Go.PLAY)}pause(){this.sendPlaybackControl(Go.PAUSE)}stop(){this.sendPlaybackControl(Go.STOP)}resetContext(){this.sendPlaybackControl(Go.RESET_CONTEXT)}close(){this.conn.close()}}function iN(n){const e={};return n.forEach((i,s)=>{e[s]=i}),e}function oN(n){const e=new Headers;for(const[i,s]of Object.entries(n))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function lN(n,e,i){const s=new _C;let r;i.data instanceof Blob?r=await i.data.text():i.data instanceof ArrayBuffer?r=new TextDecoder().decode(i.data):r=i.data;const u=JSON.parse(r);if(n.isVertexAI()){const d=Iw(u);Object.assign(s,d)}else Object.assign(s,u);e(s)}class rN{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s,this.music=new tN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,s,r,u,d,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&y0(e.config.tools)&&v0(_);const T=fN(_);if(this.apiClient.isVertexAI()){const Z=this.apiClient.getProject(),ie=this.apiClient.getLocation(),oe=this.apiClient.getApiKey(),Ee=!!Z&&!!ie||!!oe;this.apiClient.getCustomBaseUrl()&&!Ee?v=y:(v=`${y}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v))}else{const Z=this.apiClient.getApiKey();let ie="BidiGenerateContent",oe="key";Z!=null&&Z.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ie="BidiGenerateContentConstrained",oe="access_token"),v=`${y}/ws/google.ai.generativelanguage.${m}.GenerativeService.${ie}?${oe}=${Z}`}let A=()=>{};const b=new Promise(Z=>{A=Z}),I=e.callbacks,x=function(){var Z;(Z=I==null?void 0:I.onopen)===null||Z===void 0||Z.call(I),A({})},B=this.apiClient,V={onopen:x,onmessage:Z=>{lN(B,I.onmessage,Z)},onerror:(i=I==null?void 0:I.onerror)!==null&&i!==void 0?i:function(Z){},onclose:(s=I==null?void 0:I.onclose)!==null&&s!==void 0?s:function(Z){}},H=this.webSocketFactory.create(v,cN(T),V);H.connect(),await b;let G=De(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const Z=this.apiClient.getProject(),ie=this.apiClient.getLocation();Z&&ie&&(G=`projects/${Z}/locations/${ie}/`+G)}let P={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Zr.AUDIO]}:e.config.responseModalities=[Zr.AUDIO]),!((u=e.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const W=(p=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&p!==void 0?p:[],J=[];for(const Z of W)if(this.isCallableTool(Z)){const ie=Z;J.push(await ie.tool())}else J.push(Z);J.length>0&&(e.config.tools=J);const fe={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=bw(this.apiClient,fe):P=Cw(this.apiClient,fe),delete P.config,H.send(JSON.stringify(P)),new uN(H,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const aN={turnComplete:!0};class uN{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let s=[];try{s=nn(i.turns),e.isVertexAI()||(s=s.map(r=>da(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:s,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let s=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?s=i.functionResponses:s=[i.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const u of s){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!e.isVertexAI()&&!("id"in u))throw new Error(sN)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},aN),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:Nw(e)}:i={realtimeInput:Rw(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function cN(n){const e={};return n.forEach((i,s)=>{e[s]=i}),e}function fN(n){const e=new Headers;for(const[i,s]of Object.entries(n))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nv=10;function iv(n){var e,i,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const d of(i=n==null?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ho(d)){r=!0;break}if(!r)return!0;const u=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function Ho(n){return"callTool"in n&&typeof n.callTool=="function"}function dN(n){var e,i,s;return(s=(i=(e=n.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(r=>Ho(r)))!==null&&s!==void 0?s:!1}function ov(n){var e;const i=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(Ho(s))return;const u=s;u.functionDeclarations&&u.functionDeclarations.length>0&&i.push(r)}),i}function sv(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hN=class extends Bn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var s,r,u,d,p;const y=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!dN(i)||iv(i.config))return await this.generateContentInternal(y);const m=ov(i);if(m.length>0){const I=m.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${I}.`)}let v,_;const T=nn(y.contents),A=(u=(r=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:nv;let b=0;for(;b<A&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const I=v.candidates[0].content,x=[];for(const B of(p=(d=i.config)===null||d===void 0?void 0:d.tools)!==null&&p!==void 0?p:[])if(Ho(B)){const H=await B.callTool(v.functionCalls);x.push(...H)}b++,_={role:"user",parts:x},y.contents=nn(y.contents),y.contents.push(I),y.contents.push(_),sv(y.config)&&(T.push(I),T.push(_))}return sv(y.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async i=>{var s,r,u,d,p;if(this.maybeMoveToResponseJsonSchem(i),iv(i.config)){const _=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(_)}const y=ov(i);if(y.length>0){const _=y.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(u=(r=(s=i==null?void 0:i.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,v=(p=(d=i==null?void 0:i.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||p===void 0?void 0:p.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(s=>{var r;let u;const d=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=y==null?void 0:y.safetyAttributes:d.push(y);let p;return u?p={generatedImages:d,positivePromptSafetyAttributes:u,sdkHttpResponse:s.sdkHttpResponse}:p={generatedImages:d,sdkHttpResponse:s.sdkHttpResponse},p}),this.list=async i=>{var s;const d={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((s=d.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new zi(qn.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(d),d)},this.editImage=async i=>{const s={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(s.referenceImages=i.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async i=>{let s={numberOfImages:1,mode:"upscale"};i.config&&(s=Object.assign(Object.assign({},s),i.config));const r={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async i=>{var s,r,u,d,p,y;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=i.video)===null||s===void 0)&&s.uri&&(!((r=i.video)===null||r===void 0)&&r.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((d=(u=i.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.uri&&(!((y=(p=i.source)===null||p===void 0?void 0:p.video)===null||y===void 0)&&y.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,s,r;const u=(i=e.config)===null||i===void 0?void 0:i.tools;if(!u)return e;const d=await Promise.all(u.map(async y=>Ho(y)?await y.tool():y)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(p.config.tools=d,e.config&&e.config.tools&&y0(e.config.tools)){const y=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},y);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),v0(m),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return p}async initAfcToolsMap(e){var i,s,r;const u=new Map;for(const d of(s=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&s!==void 0?s:[])if(Ho(d)){const p=d,y=await p.tool();for(const m of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(u.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);u.set(m.name,p)}}return u}async processAfcStream(e){var i,s,r;const u=(r=(s=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:nv;let d=!1,p=0;const y=await this.initAfcToolsMap(e);return(function(m,v,_){return cn(this,arguments,function*(){for(var T,A,b,I,x,B;p<u;){d&&(p++,d=!1);const P=yield pe(m.processParamsMaybeAddMcpUsage(_)),W=yield pe(m.generateContentStreamInternal(P)),J=[],fe=[];try{for(var V=!0,H=(A=void 0,fn(W)),G;G=yield pe(H.next()),T=G.done,!T;V=!0){I=G.value,V=!1;const Z=I;if(yield yield pe(Z),Z.candidates&&(!((x=Z.candidates[0])===null||x===void 0)&&x.content)){fe.push(Z.candidates[0].content);for(const ie of(B=Z.candidates[0].content.parts)!==null&&B!==void 0?B:[])if(p<u&&ie.functionCall){if(!ie.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ie.functionCall.name)){const oe=yield pe(v.get(ie.functionCall.name).callTool([ie.functionCall]));J.push(...oe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ie.functionCall.name}`)}}}}catch(Z){A={error:Z}}finally{try{!V&&!T&&(b=H.return)&&(yield pe(b.call(H)))}finally{if(A)throw A.error}}if(J.length>0){d=!0;const Z=new qs;Z.candidates=[{content:{role:"user",parts:J}}],yield yield pe(Z);const ie=[];ie.push(...fe),ie.push({role:"user",parts:J});const oe=nn(_.contents).concat(ie);_.contents=oe}else break}})})(this,y,e)}async generateContentInternal(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Wy(this.apiClient,e);return p=ee("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=ev(v),T=new qs;return Object.assign(T,_),T})}else{const m=Zy(this.apiClient,e);return p=ee("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=jy(v),T=new qs;return Object.assign(T,_),T})}}async generateContentStreamInternal(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Wy(this.apiClient,e);return p=ee("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),d.then(function(_){return cn(this,arguments,function*(){var T,A,b,I;try{for(var x=!0,B=fn(_),V;V=yield pe(B.next()),T=V.done,!T;x=!0){I=V.value,x=!1;const H=I,G=ev(yield pe(H.json()),e);G.sdkHttpResponse={headers:H.headers};const P=new qs;Object.assign(P,G),yield yield pe(P)}}catch(H){A={error:H}}finally{try{!x&&!T&&(b=B.return)&&(yield pe(b.call(B)))}finally{if(A)throw A.error}}})})}else{const m=Zy(this.apiClient,e);return p=ee("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}),d.then(function(_){return cn(this,arguments,function*(){var T,A,b,I;try{for(var x=!0,B=fn(_),V;V=yield pe(B.next()),T=V.done,!T;x=!0){I=V.value,x=!1;const H=I,G=jy(yield pe(H.json()),e);G.sdkHttpResponse={headers:H.headers};const P=new qs;Object.assign(P,G),yield yield pe(P)}}catch(H){A={error:H}}finally{try{!x&&!T&&(b=B.return)&&(yield pe(b.call(B)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=rx(this.apiClient,e);return p=ee("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=ux(v),T=new Ly;return Object.assign(T,_),T})}else{const m=lx(this.apiClient,e);return p=ee("{model}:batchEmbedContents",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=ax(v),T=new Ly;return Object.assign(T,_),T})}}async generateImagesInternal(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Sx(this.apiClient,e);return p=ee("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Ex(v),T=new Oy;return Object.assign(T,_),T})}else{const m=_x(this.apiClient,e);return p=ee("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Tx(v),T=new Oy;return Object.assign(T,_),T})}}async editImageInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=nx(this.apiClient,e);return u=ee("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=ix(y),v=new rC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=SR(this.apiClient,e);return u=ee("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=TR(y),v=new aC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=tR(this.apiClient,e);return u=ee("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const m=nR(y),v=new uC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=aR(this.apiClient,e);return u=ee("{model}:predict",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const m=uR(y),v=new cC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Hx(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>Sf(v))}else{const m=kx(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>_f(v))}}async listInternal(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Kx(this.apiClient,e);return p=ee("{models_url}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Qx(v),T=new Gy;return Object.assign(T,_),T})}else{const m=Yx(this.apiClient,e);return p=ee("{models_url}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Xx(v),T=new Gy;return Object.assign(T,_),T})}}async update(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=vR(this.apiClient,e);return p=ee("{model}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>Sf(v))}else{const m=yR(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>_f(v))}}async delete(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Ww(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=ex(v),T=new Py;return Object.assign(T,_),T})}else{const m=Zw(this.apiClient,e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=jw(v),T=new Py;return Object.assign(T,_),T})}}async countTokens(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Kw(this.apiClient,e);return p=ee("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Qw(v),T=new ky;return Object.assign(T,_),T})}else{const m=Yw(this.apiClient,e);return p=ee("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=Xw(v),T=new ky;return Object.assign(T,_),T})}}async computeTokens(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=qw(this.apiClient,e);return u=ee("{model}:computeTokens",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=Bw(y),v=new fC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=Rx(this.apiClient,e);return p=ee("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d.then(v=>{const _=wx(v),T=new Wr;return Object.assign(T,_),T})}else{const m=xx(this.apiClient,e);return p=ee("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d.then(v=>{const _=bx(v),T=new Wr;return Object.assign(T,_),T})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pN extends Bn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:u}});return i._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:u}});return i._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=tC(e);return p=ee("{operationName}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),d}else{const m=eC(e);return p=ee("{operationName}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),d}}async fetchPredictVideosOperationInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=YA(e);return u=ee("{resourceName}:fetchPredictOperation",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mN(n){const e={},i=c(n,["data"]);if(i!=null&&f(e,["data"],i),c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function gN(n){const e={},i=c(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>bN(u))),f(e,["parts"],r)}const s=c(n,["role"]);return s!=null&&f(e,["role"],s),e}function yN(n,e,i){const s={},r=c(e,["expireTime"]);i!==void 0&&r!=null&&f(i,["expireTime"],r);const u=c(e,["newSessionExpireTime"]);i!==void 0&&u!=null&&f(i,["newSessionExpireTime"],u);const d=c(e,["uses"]);i!==void 0&&d!=null&&f(i,["uses"],d);const p=c(e,["liveConnectConstraints"]);i!==void 0&&p!=null&&f(i,["bidiGenerateContentSetup"],CN(n,p));const y=c(e,["lockAdditionalFields"]);return i!==void 0&&y!=null&&f(i,["fieldMask"],y),s}function vN(n,e){const i={},s=c(e,["config"]);return s!=null&&f(i,["config"],yN(n,s,i)),i}function _N(n){const e={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(n,["fileUri"]);i!=null&&f(e,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function SN(n){const e={},i=c(n,["id"]);i!=null&&f(e,["id"],i);const s=c(n,["args"]);s!=null&&f(e,["args"],s);const r=c(n,["name"]);if(r!=null&&f(e,["name"],r),c(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TN(n){const e={};if(c(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=c(n,["enableWidget"]);return i!=null&&f(e,["enableWidget"],i),e}function EN(n){const e={};if(c(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=c(n,["timeRangeFilter"]);return i!=null&&f(e,["timeRangeFilter"],i),e}function AN(n,e){const i={},s=c(n,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const r=c(n,["responseModalities"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","responseModalities"],r);const u=c(n,["temperature"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","temperature"],u);const d=c(n,["topP"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","topP"],d);const p=c(n,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=c(n,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const m=c(n,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=c(n,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=c(n,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Qf(_));const T=c(n,["thinkingConfig"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","thinkingConfig"],T);const A=c(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],A);const b=c(n,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],gN(St(b)));const I=c(n,["tools"]);if(e!==void 0&&I!=null){let W=Bo(I);Array.isArray(W)&&(W=W.map(J=>xN(qo(J)))),f(e,["setup","tools"],W)}const x=c(n,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],wN(x));const B=c(n,["inputAudioTranscription"]);e!==void 0&&B!=null&&f(e,["setup","inputAudioTranscription"],B);const V=c(n,["outputAudioTranscription"]);e!==void 0&&V!=null&&f(e,["setup","outputAudioTranscription"],V);const H=c(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&f(e,["setup","realtimeInputConfig"],H);const G=c(n,["contextWindowCompression"]);e!==void 0&&G!=null&&f(e,["setup","contextWindowCompression"],G);const P=c(n,["proactivity"]);if(e!==void 0&&P!=null&&f(e,["setup","proactivity"],P),c(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function CN(n,e){const i={},s=c(e,["model"]);s!=null&&f(i,["setup","model"],De(n,s));const r=c(e,["config"]);return r!=null&&f(i,["config"],AN(r,i)),i}function bN(n){const e={},i=c(n,["mediaResolution"]);i!=null&&f(e,["mediaResolution"],i);const s=c(n,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const r=c(n,["executableCode"]);r!=null&&f(e,["executableCode"],r);const u=c(n,["fileData"]);u!=null&&f(e,["fileData"],_N(u));const d=c(n,["functionCall"]);d!=null&&f(e,["functionCall"],SN(d));const p=c(n,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=c(n,["inlineData"]);y!=null&&f(e,["inlineData"],mN(y));const m=c(n,["text"]);m!=null&&f(e,["text"],m);const v=c(n,["thought"]);v!=null&&f(e,["thought"],v);const _=c(n,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const T=c(n,["videoMetadata"]);return T!=null&&f(e,["videoMetadata"],T),e}function wN(n){const e={},i=c(n,["handle"]);if(i!=null&&f(e,["handle"],i),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xN(n){const e={};if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["computerUse"]);i!=null&&f(e,["computerUse"],i);const s=c(n,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=c(n,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(n,["functionDeclarations"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const d=c(n,["googleMaps"]);d!=null&&f(e,["googleMaps"],TN(d));const p=c(n,["googleSearch"]);p!=null&&f(e,["googleSearch"],EN(p));const y=c(n,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=c(n,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RN(n){const e=[];for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const s=n[i];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(u=>`${i}.${u}`);e.push(...r)}else e.push(i)}return e.join(",")}function NN(n,e){let i=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const u=s.setup;typeof u=="object"&&u!==null?(n.bidiGenerateContentSetup=u,i=u):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(i){const u=RN(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)u?n.fieldMask=u:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];r.length>0&&(p=r.map(m=>d.includes(m)?`generationConfig.${m}`:m));const y=[];u&&y.push(u),p.length>0&&y.push(...p),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class IN extends Bn{constructor(e){super(),this.apiClient=e}async create(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=vN(this.apiClient,e);u=ee("auth_tokens",p._url),d=p._query,delete p.config,delete p._url,delete p._query;const y=NN(p,e.config);return r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MN(n,e){const i={},s=c(n,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),i}function DN(n){const e={},i=c(n,["name"]);i!=null&&f(e,["_url","name"],i);const s=c(n,["config"]);return s!=null&&MN(s,e),e}function UN(n){const e={},i=c(n,["name"]);return i!=null&&f(e,["_url","name"],i),e}function LN(n,e){const i={},s=c(n,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const r=c(n,["pageToken"]);return e!==void 0&&r!=null&&f(e,["_query","pageToken"],r),i}function ON(n){const e={},i=c(n,["parent"]);i!=null&&f(e,["_url","parent"],i);const s=c(n,["config"]);return s!=null&&LN(s,e),e}function GN(n){const e={},i=c(n,["sdkHttpResponse"]);i!=null&&f(e,["sdkHttpResponse"],i);const s=c(n,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const r=c(n,["documents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>d)),f(e,["documents"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PN extends Bn{constructor(e){super(),this.apiClient=e,this.list=async i=>new zi(qn.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:i.parent,config:s.config}),await this.listInternal(i),i)}async get(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=UN(e);return u=ee("{name}",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var i,s;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DN(e);r=ee("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=ON(e);return u=ee("{parent}/documents",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const m=GN(y),v=new dC;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kN extends Bn{constructor(e,i=new PN(e)){super(),this.apiClient=e,this.documents=i,this.list=async(s={})=>new zi(qn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=RR(e);return u=ee("fileSearchStores",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=MR(e);return u=ee("{name}",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var i,s;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IR(e);r=ee("{name}",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=PR(e);return u=ee("fileSearchStores",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const m=kR(y),v=new hC;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=HR(e);return u=ee("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const m=qR(y),v=new pC;return Object.assign(v,m),v})}}async importFile(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=LR(e);return u=ee("{file_search_store_name}:importFile",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),r.then(y=>{const m=UR(y),v=new $f;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _0=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return _0=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),i=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^i()&15>>+s/4).toString(16))};const HN=()=>_0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ef(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Af=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class on extends Error{}let sn=class Cf extends on{constructor(e,i,s,r){super(`${Cf.makeMessage(e,i,s)}`),this.status=e,this.headers=r,this.error=i}static makeMessage(e,i,s){const r=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,i,s,r){if(!e||!r)return new ma({message:s,cause:Af(i)});const u=i;return e===400?new T0(e,u,s,r):e===401?new E0(e,u,s,r):e===403?new A0(e,u,s,r):e===404?new C0(e,u,s,r):e===409?new b0(e,u,s,r):e===422?new w0(e,u,s,r):e===429?new x0(e,u,s,r):e>=500?new R0(e,u,s,r):new Cf(e,u,s,r)}},bf=class extends sn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},ma=class extends sn{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}},S0=class extends ma{constructor({message:e}={}){super({message:e??"Request timed out."})}},T0=class extends sn{},E0=class extends sn{},A0=class extends sn{},C0=class extends sn{},b0=class extends sn{},w0=class extends sn{},x0=class extends sn{},R0=class extends sn{};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qN=/^[a-z][a-z0-9+.-]*:/i,BN=n=>qN.test(n);let wf=n=>(wf=Array.isArray,wf(n));const VN=wf;let zN=VN;const lv=zN;function FN(n){if(!n)return!0;for(const e in n)return!1;return!0}function $N(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const JN=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new on(`${n} must be an integer`);if(e<0)throw new on(`${n} must be a positive integer`);return e},YN=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KN=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Do="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XN(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const QN=()=>{var n,e,i,s,r;const u=XN();if(u==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":av(Deno.build.os),"X-Stainless-Arch":rv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(u==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":av((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":rv((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const d=ZN();return d?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${d.browser}`,"X-Stainless-Runtime-Version":d.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Do,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ZN(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of n){const s=i.exec(navigator.userAgent);if(s){const r=s[1]||0,u=s[2]||0,d=s[3]||0;return{browser:e,version:`${r}.${u}.${d}`}}}return null}const rv=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",av=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let xr;const WN=()=>xr??(xr=QN());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jN(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function N0(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function eI(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return N0({start(){},async pull(i){const{done:s,value:r}=await e.next();s?i.close():i.enqueue(r)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function I0(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function tI(n){var e,i;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((i=(e=n[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nI=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M0=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Wc(n,e,i){return M0(),new File(n,e??"unknown_file",i)}function iI(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const oI=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D0=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",sI=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&D0(n),lI=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function rI(n,e,i){if(M0(),n=await n,sI(n))return n instanceof File?n:Wc([await n.arrayBuffer()],n.name);if(lI(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Wc(await xf(r),e,i)}const s=await xf(n);if(e||(e=iI(n)),!(i!=null&&i.type)){const r=s.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof r=="string"&&(i=Object.assign(Object.assign({},i),{type:r}))}return Wc(s,e,i)}async function xf(n){var e,i,s,r,u;let d=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)d.push(n);else if(D0(n))d.push(n instanceof Blob?n:await n.arrayBuffer());else if(oI(n))try{for(var p=!0,y=fn(n),m;m=await y.next(),e=m.done,!e;p=!0){r=m.value,p=!1;const v=r;d.push(...await xf(v))}}catch(v){i={error:v}}finally{try{!p&&!e&&(s=y.return)&&await s.call(y)}finally{if(i)throw i.error}}else{const v=(u=n==null?void 0:n.constructor)===null||u===void 0?void 0:u.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${aI(n)}`)}return d}function aI(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let U0=class{constructor(e){this._client=e}};U0._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L0(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const uv=Object.freeze(Object.create(null)),uI=(n=L0)=>(function(i,...s){if(i.length===1)return i[0];let r=!1;const u=[],d=i.reduce((v,_,T)=>{var A,b,I;/[?#]/.test(_)&&(r=!0);const x=s[T];let B=(r?encodeURIComponent:n)(""+x);return T!==s.length&&(x==null||typeof x=="object"&&x.toString===((I=Object.getPrototypeOf((b=Object.getPrototypeOf((A=x.hasOwnProperty)!==null&&A!==void 0?A:uv))!==null&&b!==void 0?b:uv))===null||I===void 0?void 0:I.toString))&&(B=x+"",u.push({start:v.length+_.length,length:B.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),v+_+(T===s.length?"":B)},""),p=d.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(p))!==null;)u.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(u.sort((v,_)=>v.start-_.start),u.length>0){let v=0;const _=u.reduce((T,A)=>{const b=" ".repeat(A.start-v),I="^".repeat(A.length);return v=A.start+A.length,T+b+I},"");throw new on(`Path parameters result in path with invalid segments:
${u.map(T=>T.error).join(`
`)}
${d}
${_}`)}return d}),Rr=uI(L0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class O0 extends U0{create(e,i){var s;const{api_version:r=this._client.apiVersion}=e,u=ea(e,["api_version"]);if("model"in u&&"agent_config"in u)throw new on("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in u&&"generation_config"in u)throw new on("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Rr`/${r}/interactions`,Object.assign(Object.assign({body:u},i),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,i={},s){const{api_version:r=this._client.apiVersion}=i??{};return this._client.delete(Rr`/${r}/interactions/${e}`,s)}cancel(e,i={},s){const{api_version:r=this._client.apiVersion}=i??{};return this._client.post(Rr`/${r}/interactions/${e}/cancel`,s)}get(e,i={},s){var r;const u=i??{},{api_version:d=this._client.apiVersion}=u,p=ea(u,["api_version"]);return this._client.get(Rr`/${d}/interactions/${e}`,Object.assign(Object.assign({query:p},s),{stream:(r=i==null?void 0:i.stream)!==null&&r!==void 0?r:!1}))}}O0._key=Object.freeze(["interactions"]);class G0 extends O0{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cI(n){let e=0;for(const r of n)e+=r.length;const i=new Uint8Array(e);let s=0;for(const r of n)i.set(r,s),s+=r.length;return i}let Nr;function Wf(n){let e;return(Nr??(e=new globalThis.TextEncoder,Nr=e.encode.bind(e)))(n)}let Ir;function cv(n){let e;return(Ir??(e=new globalThis.TextDecoder,Ir=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ga=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Wf(e):e;this.buffer=cI([this.buffer,i]);const s=[];let r;for(;(r=fI(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(cv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const u=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,d=cv(this.buffer.subarray(0,u));s.push(d),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}};ga.NEWLINE_CHARS=new Set([`
`,"\r"]);ga.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function fI(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function dI(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ta={off:0,error:200,warn:300,info:400,debug:500},fv=(n,e,i)=>{if(n){if($N(ta,n))return n;At(i).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ta))}`)}};function zs(){}function Mr(n,e,i){return!e||ta[n]>ta[i]?zs:e[n].bind(e)}const hI={error:zs,warn:zs,info:zs,debug:zs};let dv=new WeakMap;function At(n){var e;const i=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!i)return hI;const r=dv.get(i);if(r&&r[0]===s)return r[1];const u={error:Mr("error",i,s),warn:Mr("warn",i,s),info:Mr("info",i,s),debug:Mr("debug",i,s)};return dv.set(i,[s,u]),u}const Pi=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pI=class Fs{constructor(e,i,s){this.iterator=e,this.controller=i,this.client=s}static fromSSEResponse(e,i,s){let r=!1;const u=s?At(s):console;function d(){return cn(this,arguments,function*(){var y,m,v,_;if(r)throw new on("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,b=fn(mI(e,i)),I;I=yield pe(b.next()),y=I.done,!y;A=!0){_=I.value,A=!1;const x=_;if(!T)if(x.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield pe(JSON.parse(x.data))}catch(B){throw u.error("Could not parse message into JSON:",x.data),u.error("From chunk:",x.raw),B}}}catch(x){m={error:x}}finally{try{!A&&!y&&(v=b.return)&&(yield pe(v.call(b)))}finally{if(m)throw m.error}}T=!0}catch(x){if(Ef(x))return yield pe(void 0);throw x}finally{T||i.abort()}})}return new Fs(d,i,s)}static fromReadableStream(e,i,s){let r=!1;function u(){return cn(this,arguments,function*(){var y,m,v,_;const T=new ga,A=I0(e);try{for(var b=!0,I=fn(A),x;x=yield pe(I.next()),y=x.done,!y;b=!0){_=x.value,b=!1;const B=_;for(const V of T.decode(B))yield yield pe(V)}}catch(B){m={error:B}}finally{try{!b&&!y&&(v=I.return)&&(yield pe(v.call(I)))}finally{if(m)throw m.error}}for(const B of T.flush())yield yield pe(B)})}function d(){return cn(this,arguments,function*(){var y,m,v,_;if(r)throw new on("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var A=!0,b=fn(u()),I;I=yield pe(b.next()),y=I.done,!y;A=!0){_=I.value,A=!1;const x=_;T||x&&(yield yield pe(JSON.parse(x)))}}catch(x){m={error:x}}finally{try{!A&&!y&&(v=b.return)&&(yield pe(v.call(b)))}finally{if(m)throw m.error}}T=!0}catch(x){if(Ef(x))return yield pe(void 0);throw x}finally{T||i.abort()}})}return new Fs(d,i,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],s=this.iterator(),r=u=>({next:()=>{if(u.length===0){const d=s.next();e.push(d),i.push(d)}return u.shift()}});return[new Fs(()=>r(e),this.controller,this.client),new Fs(()=>r(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return N0({async start(){i=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:u}=await i.next();if(u)return s.close();const d=Wf(JSON.stringify(r)+`
`);s.enqueue(d)}catch(r){s.error(r)}},async cancel(){var s;await((s=i.return)===null||s===void 0?void 0:s.call(i))}})}};function mI(n,e){return cn(this,arguments,function*(){var s,r,u,d;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new on("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new on("Attempted to iterate over a response with no body");const p=new yI,y=new ga,m=I0(n.body);try{for(var v=!0,_=fn(gI(m)),T;T=yield pe(_.next()),s=T.done,!s;v=!0){d=T.value,v=!1;const A=d;for(const b of y.decode(A)){const I=p.decode(b);I&&(yield yield pe(I))}}}catch(A){r={error:A}}finally{try{!v&&!s&&(u=_.return)&&(yield pe(u.call(_)))}finally{if(r)throw r.error}}for(const A of y.flush()){const b=p.decode(A);b&&(yield yield pe(b))}})}function gI(n){return cn(this,arguments,function*(){var i,s,r,u;let d=new Uint8Array;try{for(var p=!0,y=fn(n),m;m=yield pe(y.next()),i=m.done,!i;p=!0){u=m.value,p=!1;const v=u;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Wf(v):v;let T=new Uint8Array(d.length+_.length);T.set(d),T.set(_,d.length),d=T;let A;for(;(A=dI(d))!==-1;)yield yield pe(d.slice(0,A)),d=d.slice(A)}}catch(v){s={error:v}}finally{try{!p&&!i&&(r=y.return)&&(yield pe(r.call(y)))}finally{if(s)throw s.error}}d.length>0&&(yield yield pe(d))})}let yI=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,s,r]=vI(e,":");return r.startsWith(" ")&&(r=r.substring(1)),i==="event"?this.event=r:i==="data"&&this.data.push(r),null}};function vI(n,e){const i=n.indexOf(e);return i!==-1?[n.substring(0,i),e,n.substring(i+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function _I(n,e){const{response:i,requestLogID:s,retryOfRequestLogID:r,startTime:u}=e,d=await(async()=>{var p;if(e.options.stream)return At(n).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,n):pI.fromSSEResponse(i,e.controller,n);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const y=i.headers.get("content-type"),m=(p=y==null?void 0:y.split(";")[0])===null||p===void 0?void 0:p.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?i.headers.get("content-length")==="0"?void 0:await i.json():await i.text()})();return At(n).debug(`[${s}] response parsed`,Pi({retryOfRequestLogID:r,url:i.url,status:i.status,body:d,durationMs:Date.now()-u})),d}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let SI=class P0 extends Promise{constructor(e,i,s=_I){super(r=>{r(null)}),this.responsePromise=i,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new P0(this.client,this.responsePromise,async(i,s)=>e(await this.parseResponse(i,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k0=Symbol("brand.privateNullableHeaders");function*TI(n){if(!n)return;if(k0 in n){const{values:s,nulls:r}=n;yield*s.entries();for(const u of r)yield[u,null];return}let e=!1,i;n instanceof Headers?i=n.entries():lv(n)?i=n:(e=!0,i=Object.entries(n??{}));for(let s of i){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const u=lv(s[1])?s[1]:[s[1]];let d=!1;for(const p of u)p!==void 0&&(e&&!d&&(d=!0,yield[r,null]),yield[r,p])}}const Bs=n=>{const e=new Headers,i=new Set;for(const s of n){const r=new Set;for(const[u,d]of TI(s)){const p=u.toLowerCase();r.has(p)||(e.delete(u),r.add(p)),d===null?(e.delete(u),i.add(p)):(e.append(u,d),i.delete(p))}}return{[k0]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jc=n=>{var e,i,s,r,u,d;if(typeof globalThis.process<"u")return(s=(i=(e=BA)===null||e===void 0?void 0:e[n])===null||i===void 0?void 0:i.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(d=(u=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||u===void 0?void 0:u.call(r,n))===null||d===void 0?void 0:d.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var H0;class ya{constructor(e){var i,s,r,u,d,p,y,{baseURL:m=jc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=jc("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:_="v1beta"}=e,T=ea(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:v,apiVersion:_},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:ya.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const b="warn";this.logLevel=b,this.logLevel=(d=(u=fv(A.logLevel,"ClientOptions.logLevel",this))!==null&&u!==void 0?u:fv(jc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&d!==void 0?d:b,this.fetchOptions=A.fetchOptions,this.maxRetries=(p=A.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(y=A.fetch)!==null&&y!==void 0?y:jN(),this.encoder=nI,this._options=A,this.apiKey=v,this.apiVersion=_,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=Bs([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return Bs([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Bs([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,s])=>typeof s<"u").map(([i,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(i)}=`;throw new on(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Do}`}defaultIdempotencyKey(){return`stainless-node-retry-${HN()}`}makeStatusError(e,i,s,r){return sn.generate(e,i,s,r)}buildURL(e,i,s){const r=!this.baseURLOverridden()&&s||this.baseURL,u=BN(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return FN(d)||(i=Object.assign(Object.assign({},d),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(u.search=this.stringifyQuery(i)),u.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:s}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:i},r)))}request(e,i=null){return new SI(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,s){var r,u,d;const p=await e,y=(r=p.maxRetries)!==null&&r!==void 0?r:this.maxRetries;i==null&&(i=y),await this.prepareOptions(p);const{req:m,url:v,timeout:_}=await this.buildRequest(p,{retryCount:y-i});await this.prepareRequest(m,{url:v,options:p});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,b=Date.now();if(At(this).debug(`[${T}] sending request`,Pi({retryOfRequestLogID:s,method:p.method,url:v,options:p,headers:m.headers})),!((u=p.signal)===null||u===void 0)&&u.aborted)throw new bf;const I=new AbortController,x=await this.fetchWithTimeout(v,m,_,I).catch(Af),B=Date.now();if(x instanceof globalThis.Error){const H=`retrying, ${i} attempts remaining`;if(!((d=p.signal)===null||d===void 0)&&d.aborted)throw new bf;const G=Ef(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(i)return At(this).info(`[${T}] connection ${G?"timed out":"failed"} - ${H}`),At(this).debug(`[${T}] connection ${G?"timed out":"failed"} (${H})`,Pi({retryOfRequestLogID:s,url:v,durationMs:B-b,message:x.message})),this.retryRequest(p,i,s??T);throw At(this).info(`[${T}] connection ${G?"timed out":"failed"} - error; no more retries left`),At(this).debug(`[${T}] connection ${G?"timed out":"failed"} (error; no more retries left)`,Pi({retryOfRequestLogID:s,url:v,durationMs:B-b,message:x.message})),G?new S0:new ma({cause:x})}const V=`[${T}${A}] ${m.method} ${v} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${B-b}ms`;if(!x.ok){const H=await this.shouldRetry(x);if(i&&H){const Z=`retrying, ${i} attempts remaining`;return await tI(x.body),At(this).info(`${V} - ${Z}`),At(this).debug(`[${T}] response error (${Z})`,Pi({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,durationMs:B-b})),this.retryRequest(p,i,s??T,x.headers)}const G=H?"error; no more retries left":"error; not retryable";At(this).info(`${V} - ${G}`);const P=await x.text().catch(Z=>Af(Z).message),W=YN(P),J=W?void 0:P;throw At(this).debug(`[${T}] response error (${G})`,Pi({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,message:J,durationMs:Date.now()-b})),this.makeStatusError(x.status,W,J,x.headers)}return At(this).info(V),At(this).debug(`[${T}] response start`,Pi({retryOfRequestLogID:s,url:x.url,status:x.status,headers:x.headers,durationMs:B-b})),{response:x,options:p,controller:I,requestLogID:T,retryOfRequestLogID:s,startTime:b}}async fetchWithTimeout(e,i,s,r){const u=i||{},{signal:d,method:p}=u,y=ea(u,["signal","method"]),m=r.abort.bind(r);d&&d.addEventListener("abort",m,{once:!0});const v=setTimeout(m,s),_=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),y);p&&(T.method=p.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(v)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,s,r){var u;let d;const p=r==null?void 0:r.get("retry-after-ms");if(p){const m=parseFloat(p);Number.isNaN(m)||(d=m)}const y=r==null?void 0:r.get("retry-after");if(y&&!d){const m=parseFloat(y);Number.isNaN(m)?d=Date.parse(y)-Date.now():d=m*1e3}if(!(d&&0<=d&&d<60*1e3)){const m=(u=e.maxRetries)!==null&&u!==void 0?u:this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(i,m)}return await KN(d),this.makeRequest(e,i-1,s)}calculateDefaultRetryTimeoutMillis(e,i){const u=i-e,d=Math.min(.5*Math.pow(2,u),8),p=1-Math.random()*.25;return d*p*1e3}async buildRequest(e,{retryCount:i=0}={}){var s,r,u;const d=Object.assign({},e),{method:p,path:y,query:m,defaultBaseURL:v}=d,_=this.buildURL(y,m,v);"timeout"in d&&JN("timeout",d.timeout),d.timeout=(s=d.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:T,body:A}=this.buildBody({options:d}),b=await this.buildHeaders({options:e,method:p,bodyHeaders:T,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:b},d.signal&&{signal:d.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(u=d.fetchOptions)!==null&&u!==void 0?u:{}),url:_,timeout:d.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:s,retryCount:r}){let u={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);const d=await this.authHeaders(e);let p=Bs([u,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),WN()),this._options.defaultHeaders,s,e.headers,d]);return this.validateHeaders(p),p.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Bs([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:eI(e)}:this.encoder({body:e,headers:s})}}ya.DEFAULT_TIMEOUT=6e4;class ct extends ya{constructor(){super(...arguments),this.interactions=new G0(this)}}H0=ct;ct.GeminiNextGenAPIClient=H0;ct.GeminiNextGenAPIClientError=on;ct.APIError=sn;ct.APIConnectionError=ma;ct.APIConnectionTimeoutError=S0;ct.APIUserAbortError=bf;ct.NotFoundError=C0;ct.ConflictError=b0;ct.RateLimitError=x0;ct.BadRequestError=T0;ct.AuthenticationError=E0;ct.InternalServerError=R0;ct.PermissionDeniedError=A0;ct.UnprocessableEntityError=w0;ct.toFile=rI;ct.Interactions=G0;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EI(n,e){const i={},s=c(n,["name"]);return s!=null&&f(i,["_url","name"],s),i}function AI(n,e){const i={},s=c(n,["name"]);return s!=null&&f(i,["_url","name"],s),i}function CI(n,e){const i={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function bI(n,e){const i={},s=c(n,["sdkHttpResponse"]);return s!=null&&f(i,["sdkHttpResponse"],s),i}function wI(n,e,i){const s={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&f(e,["displayName"],r),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(n,["epochCount"]);e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","epochCount"],u);const d=c(n,["learningRateMultiplier"]);if(d!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],d),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(c(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(c(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const p=c(n,["batchSize"]);e!==void 0&&p!=null&&f(e,["tuningTask","hyperparameters","batchSize"],p);const y=c(n,["learningRate"]);if(e!==void 0&&y!=null&&f(e,["tuningTask","hyperparameters","learningRate"],y),c(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(c(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(c(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(c(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(c(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return s}function xI(n,e,i){const s={};let r=c(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const P=c(n,["validationDataset"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec"],ef(P))}else if(r==="PREFERENCE_TUNING"){const P=c(n,["validationDataset"]);e!==void 0&&P!=null&&f(e,["preferenceOptimizationSpec"],ef(P))}else if(r==="DISTILLATION"){const P=c(n,["validationDataset"]);e!==void 0&&P!=null&&f(e,["distillationSpec"],ef(P))}const u=c(n,["tunedModelDisplayName"]);e!==void 0&&u!=null&&f(e,["tunedModelDisplayName"],u);const d=c(n,["description"]);e!==void 0&&d!=null&&f(e,["description"],d);let p=c(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const P=c(n,["epochCount"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],P)}else if(p==="PREFERENCE_TUNING"){const P=c(n,["epochCount"]);e!==void 0&&P!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],P)}else if(p==="DISTILLATION"){const P=c(n,["epochCount"]);e!==void 0&&P!=null&&f(e,["distillationSpec","hyperParameters","epochCount"],P)}let y=c(i,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const P=c(n,["learningRateMultiplier"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],P)}else if(y==="PREFERENCE_TUNING"){const P=c(n,["learningRateMultiplier"]);e!==void 0&&P!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],P)}else if(y==="DISTILLATION"){const P=c(n,["learningRateMultiplier"]);e!==void 0&&P!=null&&f(e,["distillationSpec","hyperParameters","learningRateMultiplier"],P)}let m=c(i,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const P=c(n,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],P)}else if(m==="PREFERENCE_TUNING"){const P=c(n,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],P)}else if(m==="DISTILLATION"){const P=c(n,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&f(e,["distillationSpec","exportLastCheckpointOnly"],P)}let v=c(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const P=c(n,["adapterSize"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],P)}else if(v==="PREFERENCE_TUNING"){const P=c(n,["adapterSize"]);e!==void 0&&P!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],P)}else if(v==="DISTILLATION"){const P=c(n,["adapterSize"]);e!==void 0&&P!=null&&f(e,["distillationSpec","hyperParameters","adapterSize"],P)}let _=c(i,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const P=c(n,["tuningMode"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","tuningMode"],P)}const T=c(n,["customBaseModel"]);e!==void 0&&T!=null&&f(e,["customBaseModel"],T);let A=c(i,["config","method"]);if(A===void 0&&(A="SUPERVISED_FINE_TUNING"),A==="SUPERVISED_FINE_TUNING"){const P=c(n,["batchSize"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","hyperParameters","batchSize"],P)}let b=c(i,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const P=c(n,["learningRate"]);e!==void 0&&P!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRate"],P)}const I=c(n,["labels"]);e!==void 0&&I!=null&&f(e,["labels"],I);const x=c(n,["beta"]);e!==void 0&&x!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],x);const B=c(n,["baseTeacherModel"]);e!==void 0&&B!=null&&f(e,["distillationSpec","baseTeacherModel"],B);const V=c(n,["tunedTeacherModelSource"]);e!==void 0&&V!=null&&f(e,["distillationSpec","tunedTeacherModelSource"],V);const H=c(n,["sftLossWeightMultiplier"]);e!==void 0&&H!=null&&f(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],H);const G=c(n,["outputUri"]);return e!==void 0&&G!=null&&f(e,["outputUri"],G),s}function RI(n,e){const i={},s=c(n,["baseModel"]);s!=null&&f(i,["baseModel"],s);const r=c(n,["preTunedModel"]);r!=null&&f(i,["preTunedModel"],r);const u=c(n,["trainingDataset"]);u!=null&&HI(u);const d=c(n,["config"]);return d!=null&&wI(d,i),i}function NI(n,e){const i={},s=c(n,["baseModel"]);s!=null&&f(i,["baseModel"],s);const r=c(n,["preTunedModel"]);r!=null&&f(i,["preTunedModel"],r);const u=c(n,["trainingDataset"]);u!=null&&qI(u,i,e);const d=c(n,["config"]);return d!=null&&xI(d,i,e),i}function II(n,e){const i={},s=c(n,["name"]);return s!=null&&f(i,["_url","name"],s),i}function MI(n,e){const i={},s=c(n,["name"]);return s!=null&&f(i,["_url","name"],s),i}function DI(n,e,i){const s={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const u=c(n,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const d=c(n,["filter"]);return e!==void 0&&d!=null&&f(e,["_query","filter"],d),s}function UI(n,e,i){const s={},r=c(n,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const u=c(n,["pageToken"]);e!==void 0&&u!=null&&f(e,["_query","pageToken"],u);const d=c(n,["filter"]);return e!==void 0&&d!=null&&f(e,["_query","filter"],d),s}function LI(n,e){const i={},s=c(n,["config"]);return s!=null&&DI(s,i),i}function OI(n,e){const i={},s=c(n,["config"]);return s!=null&&UI(s,i),i}function GI(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["nextPageToken"]);r!=null&&f(i,["nextPageToken"],r);const u=c(n,["tunedModels"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>q0(p))),f(i,["tuningJobs"],d)}return i}function PI(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["nextPageToken"]);r!=null&&f(i,["nextPageToken"],r);const u=c(n,["tuningJobs"]);if(u!=null){let d=u;Array.isArray(d)&&(d=d.map(p=>Rf(p))),f(i,["tuningJobs"],d)}return i}function kI(n,e){const i={},s=c(n,["name"]);s!=null&&f(i,["model"],s);const r=c(n,["name"]);return r!=null&&f(i,["endpoint"],r),i}function HI(n,e){const i={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=c(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),f(i,["examples","examples"],r)}return i}function qI(n,e,i){const s={};let r=c(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const d=c(n,["gcsUri"]);e!==void 0&&d!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(r==="PREFERENCE_TUNING"){const d=c(n,["gcsUri"]);e!==void 0&&d!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(r==="DISTILLATION"){const d=c(n,["gcsUri"]);e!==void 0&&d!=null&&f(e,["distillationSpec","promptDatasetUri"],d)}let u=c(i,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const d=c(n,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(u==="PREFERENCE_TUNING"){const d=c(n,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(u==="DISTILLATION"){const d=c(n,["vertexDatasetResource"]);e!==void 0&&d!=null&&f(e,["distillationSpec","promptDatasetUri"],d)}if(c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function q0(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["name"]);r!=null&&f(i,["name"],r);const u=c(n,["state"]);u!=null&&f(i,["state"],t0(u));const d=c(n,["createTime"]);d!=null&&f(i,["createTime"],d);const p=c(n,["tuningTask","startTime"]);p!=null&&f(i,["startTime"],p);const y=c(n,["tuningTask","completeTime"]);y!=null&&f(i,["endTime"],y);const m=c(n,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=c(n,["description"]);v!=null&&f(i,["description"],v);const _=c(n,["baseModel"]);_!=null&&f(i,["baseModel"],_);const T=c(n,["_self"]);return T!=null&&f(i,["tunedModel"],kI(T)),i}function Rf(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["name"]);r!=null&&f(i,["name"],r);const u=c(n,["state"]);u!=null&&f(i,["state"],t0(u));const d=c(n,["createTime"]);d!=null&&f(i,["createTime"],d);const p=c(n,["startTime"]);p!=null&&f(i,["startTime"],p);const y=c(n,["endTime"]);y!=null&&f(i,["endTime"],y);const m=c(n,["updateTime"]);m!=null&&f(i,["updateTime"],m);const v=c(n,["error"]);v!=null&&f(i,["error"],v);const _=c(n,["description"]);_!=null&&f(i,["description"],_);const T=c(n,["baseModel"]);T!=null&&f(i,["baseModel"],T);const A=c(n,["tunedModel"]);A!=null&&f(i,["tunedModel"],A);const b=c(n,["preTunedModel"]);b!=null&&f(i,["preTunedModel"],b);const I=c(n,["supervisedTuningSpec"]);I!=null&&f(i,["supervisedTuningSpec"],I);const x=c(n,["preferenceOptimizationSpec"]);x!=null&&f(i,["preferenceOptimizationSpec"],x);const B=c(n,["distillationSpec"]);B!=null&&f(i,["distillationSpec"],B);const V=c(n,["tuningDataStats"]);V!=null&&f(i,["tuningDataStats"],V);const H=c(n,["encryptionSpec"]);H!=null&&f(i,["encryptionSpec"],H);const G=c(n,["partnerModelTuningSpec"]);G!=null&&f(i,["partnerModelTuningSpec"],G);const P=c(n,["customBaseModel"]);P!=null&&f(i,["customBaseModel"],P);const W=c(n,["experiment"]);W!=null&&f(i,["experiment"],W);const J=c(n,["labels"]);J!=null&&f(i,["labels"],J);const fe=c(n,["outputUri"]);fe!=null&&f(i,["outputUri"],fe);const Z=c(n,["pipelineJob"]);Z!=null&&f(i,["pipelineJob"],Z);const ie=c(n,["serviceAccount"]);ie!=null&&f(i,["serviceAccount"],ie);const oe=c(n,["tunedModelDisplayName"]);oe!=null&&f(i,["tunedModelDisplayName"],oe);const Ee=c(n,["veoTuningSpec"]);return Ee!=null&&f(i,["veoTuningSpec"],Ee),i}function BI(n,e){const i={},s=c(n,["sdkHttpResponse"]);s!=null&&f(i,["sdkHttpResponse"],s);const r=c(n,["name"]);r!=null&&f(i,["name"],r);const u=c(n,["metadata"]);u!=null&&f(i,["metadata"],u);const d=c(n,["done"]);d!=null&&f(i,["done"],d);const p=c(n,["error"]);return p!=null&&f(i,["error"],p),i}function ef(n,e){const i={},s=c(n,["gcsUri"]);s!=null&&f(i,["validationDatasetUri"],s);const r=c(n,["vertexDatasetResource"]);return r!=null&&f(i,["validationDatasetUri"],r),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VI extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new zi(qn.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var s;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const r={tunedModelName:i.baseModel};!((s=i.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=i.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},i),{preTunedModel:r});return u.baseModel=void 0,await this.tuneInternal(u)}else{const r=Object.assign({},i);return await this.tuneInternal(r)}else{const r=Object.assign({},i),u=await this.tuneMldevInternal(r);let d="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?d=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(d=u.name.split("/operations/")[0]),{name:d,state:pf.JOB_STATE_QUEUED}}}}async getInternal(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=MI(e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>Rf(v))}else{const m=II(e);return p=ee("{name}",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>q0(v))}}async listInternal(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=OI(e);return p=ee("tuningJobs",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=PI(v),T=new Hy;return Object.assign(T,_),T})}else{const m=LI(e);return p=ee("tunedModels",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=GI(v),T=new Hy;return Object.assign(T,_),T})}}async cancel(e){var i,s,r,u;let d,p="",y={};if(this.apiClient.isVertexAI()){const m=AI(e);return p=ee("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=bI(v),T=new qy;return Object.assign(T,_),T})}else{const m=EI(e);return p=ee("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(_=>{const T=_;return T.sdkHttpResponse={headers:v.headers},T})),d.then(v=>{const _=CI(v),T=new qy;return Object.assign(T,_),T})}}async tuneInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI()){const p=NI(e,e);return u=ee("tuningJobs",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>Rf(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,s;let r,u="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=RI(e);return u=ee("tunedModels",p._url),d=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>BI(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zI{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const FI=1024*1024*8,$I=3,JI=1e3,YI=2,na="x-goog-upload-status";async function KI(n,e,i){var s;const r=await B0(n,e,i),u=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[na])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function XI(n,e,i){var s;const r=await B0(n,e,i),u=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[na])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=Xv(u),p=new Jf;return Object.assign(p,d),p}async function B0(n,e,i){var s,r;let u=0,d=0,p=new gf(new Response),y="upload";for(u=n.size;d<u;){const m=Math.min(FI,u-d),v=n.slice(d,d+m);d+m>=u&&(y+=", finalize");let _=0,T=JI;for(;_<$I&&(p=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(d),"Content-Length":String(m)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[na]));)_++,await ZI(T),T=T*YI;if(d+=m,((r=p==null?void 0:p.headers)===null||r===void 0?void 0:r[na])!=="active")break;if(u<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function QI(n){return{size:n.size,type:n.type}}function ZI(n){return new Promise(e=>setTimeout(e,n))}class WI{async upload(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KI(e,i,s)}async uploadToFileSearchStore(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XI(e,i,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QI(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jI{create(e,i,s){return new eM(e,i,s)}}class eM{constructor(e,i,s){this.url=e,this.headers=i,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hv="x-goog-api-key";class tM{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(hv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(hv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nM="gl-node/";class iM{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new ct({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const s=$A(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new tM(this.apiKey);this.apiClient=new KR({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:nM+"web",uploader:new WI,downloader:new zI}),this.models=new hN(this.apiClient),this.live=new rN(this.apiClient,r,new jI),this.batches=new Tb(this.apiClient),this.chats=new nw(this.models,this.apiClient),this.caches=new jb(this.apiClient),this.files=new pw(this.apiClient),this.operations=new pN(this.apiClient),this.authTokens=new IN(this.apiClient),this.tunings=new VI(this.apiClient),this.fileSearchStores=new kN(this.apiClient)}}function he(n,e,i,s,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,i),i}function L(n,e,i,s){if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?s:i==="a"?s.call(n):s?s.value:e.get(n)}let V0=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return V0=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),i=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^i()&15>>+s/4).toString(16))};function Nf(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const If=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};class ce extends Error{}class vt extends ce{constructor(e,i,s,r){super(`${vt.makeMessage(e,i,s)}`),this.status=e,this.headers=r,this.requestID=r==null?void 0:r.get("x-request-id"),this.error=i;const u=i;this.code=u==null?void 0:u.code,this.param=u==null?void 0:u.param,this.type=u==null?void 0:u.type}static makeMessage(e,i,s){const r=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,i,s,r){if(!e||!r)return new va({message:s,cause:If(i)});const u=i==null?void 0:i.error;return e===400?new z0(e,u,s,r):e===401?new F0(e,u,s,r):e===403?new $0(e,u,s,r):e===404?new J0(e,u,s,r):e===409?new Y0(e,u,s,r):e===422?new K0(e,u,s,r):e===429?new X0(e,u,s,r):e>=500?new Q0(e,u,s,r):new vt(e,u,s,r)}}class tn extends vt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class va extends vt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class jf extends va{constructor({message:e}={}){super({message:e??"Request timed out."})}}class z0 extends vt{}class F0 extends vt{}class $0 extends vt{}class J0 extends vt{}class Y0 extends vt{}class K0 extends vt{}class X0 extends vt{}class Q0 extends vt{}class Z0 extends ce{constructor(){super("Could not parse response content as the length limit was reached")}}class W0 extends ce{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class $s extends Error{constructor(e){super(e)}}const oM=/^[a-z][a-z0-9+.-]*:/i,sM=n=>oM.test(n);let Mt=n=>(Mt=Array.isArray,Mt(n)),pv=Mt;function j0(n){return typeof n!="object"?{}:n??{}}function lM(n){if(!n)return!0;for(const e in n)return!1;return!0}function rM(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function tf(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}const aM=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ce(`${n} must be an integer`);if(e<0)throw new ce(`${n} must be a positive integer`);return e},uM=n=>{try{return JSON.parse(n)}catch{return}},sl=n=>new Promise(e=>setTimeout(e,n)),Uo="6.17.0",cM=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function fM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const dM=()=>{var i;const n=fM();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uo,"X-Stainless-OS":gv(Deno.build.os),"X-Stainless-Arch":mv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((i=Deno.version)==null?void 0:i.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uo,"X-Stainless-OS":gv(globalThis.process.platform??"unknown"),"X-Stainless-Arch":mv(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=hM();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function hM(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of n){const s=i.exec(navigator.userAgent);if(s){const r=s[1]||0,u=s[2]||0,d=s[3]||0;return{browser:e,version:`${r}.${u}.${d}`}}}return null}const mv=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",gv=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let yv;const pM=()=>yv??(yv=dM());function mM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function e_(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function t_(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return e_({start(){},async pull(i){const{done:s,value:r}=await e.next();s?i.close():i.enqueue(r)},async cancel(){var i;await((i=e.return)==null?void 0:i.call(e))}})}function n_(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function gM(n){var s,r;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((r=(s=n[Symbol.asyncIterator]()).return)==null?void 0:r.call(s));return}const e=n.getReader(),i=e.cancel();e.releaseLock(),await i}const yM=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),i_="RFC3986",o_=n=>String(n),vv={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:o_},vM="RFC1738";let Mf=(n,e)=>(Mf=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Mf(n,e));const yn=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),nf=1024,_M=(n,e,i,s,r)=>{if(n.length===0)return n;let u=n;if(typeof n=="symbol"?u=Symbol.prototype.toString.call(n):typeof n!="string"&&(u=String(n)),i==="iso-8859-1")return escape(u).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});let d="";for(let p=0;p<u.length;p+=nf){const y=u.length>=nf?u.slice(p,p+nf):u,m=[];for(let v=0;v<y.length;++v){let _=y.charCodeAt(v);if(_===45||_===46||_===95||_===126||_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||r===vM&&(_===40||_===41)){m[m.length]=y.charAt(v);continue}if(_<128){m[m.length]=yn[_];continue}if(_<2048){m[m.length]=yn[192|_>>6]+yn[128|_&63];continue}if(_<55296||_>=57344){m[m.length]=yn[224|_>>12]+yn[128|_>>6&63]+yn[128|_&63];continue}v+=1,_=65536+((_&1023)<<10|y.charCodeAt(v)&1023),m[m.length]=yn[240|_>>18]+yn[128|_>>12&63]+yn[128|_>>6&63]+yn[128|_&63]}d+=m.join("")}return d};function SM(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function _v(n,e){if(Mt(n)){const i=[];for(let s=0;s<n.length;s+=1)i.push(e(n[s]));return i}return e(n)}const s_={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},l_=function(n,e){Array.prototype.push.apply(n,Mt(e)?e:[e])};let Sv;const lt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:_M,encodeValuesOnly:!1,format:i_,formatter:o_,indices:!1,serializeDate(n){return(Sv??(Sv=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function TM(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const of={};function r_(n,e,i,s,r,u,d,p,y,m,v,_,T,A,b,I,x,B){let V=n,H=B,G=0,P=!1;for(;(H=H.get(of))!==void 0&&!P;){const ie=H.get(n);if(G+=1,typeof ie<"u"){if(ie===G)throw new RangeError("Cyclic object value");P=!0}typeof H.get(of)>"u"&&(G=0)}if(typeof m=="function"?V=m(e,V):V instanceof Date?V=T==null?void 0:T(V):i==="comma"&&Mt(V)&&(V=_v(V,function(ie){return ie instanceof Date?T==null?void 0:T(ie):ie})),V===null){if(u)return y&&!I?y(e,lt.encoder,x,"key",A):e;V=""}if(TM(V)||SM(V)){if(y){const ie=I?e:y(e,lt.encoder,x,"key",A);return[(b==null?void 0:b(ie))+"="+(b==null?void 0:b(y(V,lt.encoder,x,"value",A)))]}return[(b==null?void 0:b(e))+"="+(b==null?void 0:b(String(V)))]}const W=[];if(typeof V>"u")return W;let J;if(i==="comma"&&Mt(V))I&&y&&(V=_v(V,y)),J=[{value:V.length>0?V.join(",")||null:void 0}];else if(Mt(m))J=m;else{const ie=Object.keys(V);J=v?ie.sort(v):ie}const fe=p?String(e).replace(/\./g,"%2E"):String(e),Z=s&&Mt(V)&&V.length===1?fe+"[]":fe;if(r&&Mt(V)&&V.length===0)return Z+"[]";for(let ie=0;ie<J.length;++ie){const oe=J[ie],Ee=typeof oe=="object"&&typeof oe.value<"u"?oe.value:V[oe];if(d&&Ee===null)continue;const Ge=_&&p?oe.replace(/\./g,"%2E"):oe,Oe=Mt(V)?typeof i=="function"?i(Z,Ge):Z:Z+(_?"."+Ge:"["+Ge+"]");B.set(n,G);const Ye=new WeakMap;Ye.set(of,B),l_(W,r_(Ee,Oe,i,s,r,u,d,p,i==="comma"&&I&&Mt(V)?null:y,m,v,_,T,A,b,I,x,Ye))}return W}function EM(n=lt){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||lt.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let i=i_;if(typeof n.format<"u"){if(!Mf(vv,n.format))throw new TypeError("Unknown format option provided.");i=n.format}const s=vv[i];let r=lt.filter;(typeof n.filter=="function"||Mt(n.filter))&&(r=n.filter);let u;if(n.arrayFormat&&n.arrayFormat in s_?u=n.arrayFormat:"indices"in n?u=n.indices?"indices":"repeat":u=lt.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const d=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:lt.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:lt.addQueryPrefix,allowDots:d,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:lt.allowEmptyArrays,arrayFormat:u,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:lt.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?lt.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:lt.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:lt.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:lt.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:lt.encodeValuesOnly,filter:r,format:i,formatter:s,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:lt.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:lt.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:lt.strictNullHandling}}function AM(n,e={}){let i=n;const s=EM(e);let r,u;typeof s.filter=="function"?(u=s.filter,i=u("",i)):Mt(s.filter)&&(u=s.filter,r=u);const d=[];if(typeof i!="object"||i===null)return"";const p=s_[s.arrayFormat],y=p==="comma"&&s.commaRoundTrip;r||(r=Object.keys(i)),s.sort&&r.sort(s.sort);const m=new WeakMap;for(let T=0;T<r.length;++T){const A=r[T];s.skipNulls&&i[A]===null||l_(d,r_(i[A],A,p,y,s.allowEmptyArrays,s.strictNullHandling,s.skipNulls,s.encodeDotInKeys,s.encode?s.encoder:null,s.filter,s.sort,s.allowDots,s.serializeDate,s.format,s.formatter,s.encodeValuesOnly,s.charset,m))}const v=d.join(s.delimiter);let _=s.addQueryPrefix===!0?"?":"";return s.charsetSentinel&&(s.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),v.length>0?_+v:""}function CM(n){let e=0;for(const r of n)e+=r.length;const i=new Uint8Array(e);let s=0;for(const r of n)i.set(r,s),s+=r.length;return i}let Tv;function ed(n){let e;return(Tv??(e=new globalThis.TextEncoder,Tv=e.encode.bind(e)))(n)}let Ev;function Av(n){let e;return(Ev??(e=new globalThis.TextDecoder,Ev=e.decode.bind(e)))(n)}var Vt,zt;class _a{constructor(){Vt.set(this,void 0),zt.set(this,void 0),he(this,Vt,new Uint8Array),he(this,zt,null)}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ed(e):e;he(this,Vt,CM([L(this,Vt,"f"),i]));const s=[];let r;for(;(r=bM(L(this,Vt,"f"),L(this,zt,"f")))!=null;){if(r.carriage&&L(this,zt,"f")==null){he(this,zt,r.index);continue}if(L(this,zt,"f")!=null&&(r.index!==L(this,zt,"f")+1||r.carriage)){s.push(Av(L(this,Vt,"f").subarray(0,L(this,zt,"f")-1))),he(this,Vt,L(this,Vt,"f").subarray(L(this,zt,"f"))),he(this,zt,null);continue}const u=L(this,zt,"f")!==null?r.preceding-1:r.preceding,d=Av(L(this,Vt,"f").subarray(0,u));s.push(d),he(this,Vt,L(this,Vt,"f").subarray(r.index)),he(this,zt,null)}return s}flush(){return L(this,Vt,"f").length?this.decode(`
`):[]}}Vt=new WeakMap,zt=new WeakMap;_a.NEWLINE_CHARS=new Set([`
`,"\r"]);_a.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function bM(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function wM(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}const ia={off:0,error:200,warn:300,info:400,debug:500},Cv=(n,e,i)=>{if(n){if(rM(ia,n))return n;gt(i).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ia))}`)}};function Js(){}function Dr(n,e,i){return!e||ia[n]>ia[i]?Js:e[n].bind(e)}const xM={error:Js,warn:Js,info:Js,debug:Js};let bv=new WeakMap;function gt(n){const e=n.logger,i=n.logLevel??"off";if(!e)return xM;const s=bv.get(e);if(s&&s[0]===i)return s[1];const r={error:Dr("error",e,i),warn:Dr("warn",e,i),info:Dr("info",e,i),debug:Dr("debug",e,i)};return bv.set(e,[i,r]),r}const ki=n=>(n.options&&(n.options={...n.options},delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,i])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var Vs;class _n{constructor(e,i,s){this.iterator=e,Vs.set(this,void 0),this.controller=i,he(this,Vs,s)}static fromSSEResponse(e,i,s){let r=!1;const u=s?gt(s):console;async function*d(){if(r)throw new ce("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{for await(const y of RM(e,i))if(!p){if(y.data.startsWith("[DONE]")){p=!0;continue}if(y.event===null||!y.event.startsWith("thread.")){let m;try{m=JSON.parse(y.data)}catch(v){throw u.error("Could not parse message into JSON:",y.data),u.error("From chunk:",y.raw),v}if(m&&m.error)throw new vt(void 0,m.error,void 0,e.headers);yield m}else{let m;try{m=JSON.parse(y.data)}catch(v){throw console.error("Could not parse message into JSON:",y.data),console.error("From chunk:",y.raw),v}if(y.event=="error")throw new vt(void 0,m.error,m.message,void 0);yield{event:y.event,data:m}}}p=!0}catch(y){if(Nf(y))return;throw y}finally{p||i.abort()}}return new _n(d,i,s)}static fromReadableStream(e,i,s){let r=!1;async function*u(){const p=new _a,y=n_(e);for await(const m of y)for(const v of p.decode(m))yield v;for(const m of p.flush())yield m}async function*d(){if(r)throw new ce("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let p=!1;try{for await(const y of u())p||y&&(yield JSON.parse(y));p=!0}catch(y){if(Nf(y))return;throw y}finally{p||i.abort()}}return new _n(d,i,s)}[(Vs=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],i=[],s=this.iterator(),r=u=>({next:()=>{if(u.length===0){const d=s.next();e.push(d),i.push(d)}return u.shift()}});return[new _n(()=>r(e),this.controller,L(this,Vs,"f")),new _n(()=>r(i),this.controller,L(this,Vs,"f"))]}toReadableStream(){const e=this;let i;return e_({async start(){i=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:u}=await i.next();if(u)return s.close();const d=ed(JSON.stringify(r)+`
`);s.enqueue(d)}catch(r){s.error(r)}},async cancel(){var s;await((s=i.return)==null?void 0:s.call(i))}})}}async function*RM(n,e){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ce("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ce("Attempted to iterate over a response with no body");const i=new IM,s=new _a,r=n_(n.body);for await(const u of NM(r))for(const d of s.decode(u)){const p=i.decode(d);p&&(yield p)}for(const u of s.flush()){const d=i.decode(u);d&&(yield d)}}async function*NM(n){let e=new Uint8Array;for await(const i of n){if(i==null)continue;const s=i instanceof ArrayBuffer?new Uint8Array(i):typeof i=="string"?ed(i):i;let r=new Uint8Array(e.length+s.length);r.set(e),r.set(s,e.length),e=r;let u;for(;(u=wM(e))!==-1;)yield e.slice(0,u),e=e.slice(u)}e.length>0&&(yield e)}class IM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,s,r]=MM(e,":");return r.startsWith(" ")&&(r=r.substring(1)),i==="event"?this.event=r:i==="data"&&this.data.push(r),null}}function MM(n,e){const i=n.indexOf(e);return i!==-1?[n.substring(0,i),e,n.substring(i+e.length)]:[n,"",""]}async function a_(n,e){const{response:i,requestLogID:s,retryOfRequestLogID:r,startTime:u}=e,d=await(async()=>{var _;if(e.options.stream)return gt(n).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,n):_n.fromSSEResponse(i,e.controller,n);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const p=i.headers.get("content-type"),y=(_=p==null?void 0:p.split(";")[0])==null?void 0:_.trim();if((y==null?void 0:y.includes("application/json"))||(y==null?void 0:y.endsWith("+json"))){const T=await i.json();return u_(T,i)}return await i.text()})();return gt(n).debug(`[${s}] response parsed`,ki({retryOfRequestLogID:r,url:i.url,status:i.status,body:d,durationMs:Date.now()-u})),d}function u_(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Ys;class Sa extends Promise{constructor(e,i,s=a_){super(r=>{r(null)}),this.responsePromise=i,this.parseResponse=s,Ys.set(this,void 0),he(this,Ys,e)}_thenUnwrap(e){return new Sa(L(this,Ys,"f"),this.responsePromise,async(i,s)=>u_(e(await this.parseResponse(i,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i,request_id:i.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(L(this,Ys,"f"),e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Ys=new WeakMap;var Ur;class td{constructor(e,i,s,r){Ur.set(this,void 0),he(this,Ur,e),this.options=r,this.response=i,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new ce("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await L(this,Ur,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Ur=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const i of e.getPaginatedItems())yield i}}class DM extends Sa{constructor(e,i,s){super(e,i,async(r,u)=>new s(r,u.response,await a_(r,u),u.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const i of e)yield i}}class Ta extends td{constructor(e,i,s,r){super(e,i,s,r),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class it extends td{constructor(e,i,s,r){super(e,i,s,r),this.data=s.data||[],this.has_more=s.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var s;const e=this.getPaginatedItems(),i=(s=e[e.length-1])==null?void 0:s.id;return i?{...this.options,query:{...j0(this.options.query),after:i}}:null}}class oa extends td{constructor(e,i,s,r){super(e,i,s,r),this.data=s.data||[],this.has_more=s.has_more||!1,this.last_id=s.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...j0(this.options.query),after:e}}:null}}const c_=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((n=e==null?void 0:e.versions)==null?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function el(n,e,i){return c_(),new File(n,e??"unknown_file",i)}function Br(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const nd=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",wv=async(n,e)=>Df(n.body)?{...n,body:await f_(n.body,e)}:n,Vi=async(n,e)=>({...n,body:await f_(n.body,e)}),xv=new WeakMap;function UM(n){const e=typeof n=="function"?n:n.fetch,i=xv.get(e);if(i)return i;const s=(async()=>{try{const r="Response"in e?e.Response:(await e("data:,")).constructor,u=new FormData;return u.toString()!==await new r(u).text()}catch{return!0}})();return xv.set(e,s),s}const f_=async(n,e)=>{if(!await UM(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const i=new FormData;return await Promise.all(Object.entries(n||{}).map(([s,r])=>Uf(i,s,r))),i},d_=n=>n instanceof Blob&&"name"in n,LM=n=>typeof n=="object"&&n!==null&&(n instanceof Response||nd(n)||d_(n)),Df=n=>{if(LM(n))return!0;if(Array.isArray(n))return n.some(Df);if(n&&typeof n=="object"){for(const e in n)if(Df(n[e]))return!0}return!1},Uf=async(n,e,i)=>{if(i!==void 0){if(i==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")n.append(e,String(i));else if(i instanceof Response)n.append(e,el([await i.blob()],Br(i)));else if(nd(i))n.append(e,el([await new Response(t_(i)).blob()],Br(i)));else if(d_(i))n.append(e,i,Br(i));else if(Array.isArray(i))await Promise.all(i.map(s=>Uf(n,e+"[]",s)));else if(typeof i=="object")await Promise.all(Object.entries(i).map(([s,r])=>Uf(n,`${e}[${s}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${i} instead`)}},h_=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",OM=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&h_(n),GM=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function PM(n,e,i){if(c_(),n=await n,OM(n))return n instanceof File?n:el([await n.arrayBuffer()],n.name);if(GM(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),el(await Lf(r),e,i)}const s=await Lf(n);if(e||(e=Br(n)),!(i!=null&&i.type)){const r=s.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof r=="string"&&(i={...i,type:r})}return el(s,e,i)}async function Lf(n){var i;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(h_(n))e.push(n instanceof Blob?n:await n.arrayBuffer());else if(nd(n))for await(const s of n)e.push(...await Lf(s));else{const s=(i=n==null?void 0:n.constructor)==null?void 0:i.name;throw new Error(`Unexpected data type: ${typeof n}${s?`; constructor: ${s}`:""}${kM(n)}`)}return e}function kM(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(i=>`"${i}"`).join(", ")}]`}class ae{constructor(e){this._client=e}}function p_(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Rv=Object.freeze(Object.create(null)),HM=(n=p_)=>function(i,...s){if(i.length===1)return i[0];let r=!1;const u=[],d=i.reduce((v,_,T)=>{var I;/[?#]/.test(_)&&(r=!0);const A=s[T];let b=(r?encodeURIComponent:n)(""+A);return T!==s.length&&(A==null||typeof A=="object"&&A.toString===((I=Object.getPrototypeOf(Object.getPrototypeOf(A.hasOwnProperty??Rv)??Rv))==null?void 0:I.toString))&&(b=A+"",u.push({start:v.length+_.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(A).slice(8,-1)} is not a valid path parameter`})),v+_+(T===s.length?"":b)},""),p=d.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(p))!==null;)u.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(u.sort((v,_)=>v.start-_.start),u.length>0){let v=0;const _=u.reduce((T,A)=>{const b=" ".repeat(A.start-v),I="^".repeat(A.length);return v=A.start+A.length,T+b+I},"");throw new ce(`Path parameters result in path with invalid segments:
${u.map(T=>T.error).join(`
`)}
${d}
${_}`)}return d},X=HM(p_);let m_=class extends ae{list(e,i={},s){return this._client.getAPIList(X`/chat/completions/${e}/messages`,it,{query:i,...s})}};function sa(n){return n!==void 0&&"function"in n&&n.function!==void 0}function id(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function ll(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function qM(n,e){return!e||!g_(e)?{...n,choices:n.choices.map(i=>(y_(i.message.tool_calls),{...i,message:{...i.message,parsed:null,...i.message.tool_calls?{tool_calls:i.message.tool_calls}:void 0}}))}:od(n,e)}function od(n,e){const i=n.choices.map(s=>{var r;if(s.finish_reason==="length")throw new Z0;if(s.finish_reason==="content_filter")throw new W0;return y_(s.message.tool_calls),{...s,message:{...s.message,...s.message.tool_calls?{tool_calls:((r=s.message.tool_calls)==null?void 0:r.map(u=>VM(e,u)))??void 0}:void 0,parsed:s.message.content&&!s.message.refusal?BM(e,s.message.content):null}}});return{...n,choices:i}}function BM(n,e){var i,s;return((i=n.response_format)==null?void 0:i.type)!=="json_schema"?null:((s=n.response_format)==null?void 0:s.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function VM(n,e){var s;const i=(s=n.tools)==null?void 0:s.find(r=>{var u;return sa(r)&&((u=r.function)==null?void 0:u.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:ll(i)?i.$parseRaw(e.function.arguments):i!=null&&i.function.strict?JSON.parse(e.function.arguments):null}}}function zM(n,e){var s;if(!n||!("tools"in n)||!n.tools)return!1;const i=(s=n.tools)==null?void 0:s.find(r=>{var u;return sa(r)&&((u=r.function)==null?void 0:u.name)===e.function.name});return sa(i)&&(ll(i)||(i==null?void 0:i.function.strict)||!1)}function g_(n){var e;return id(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(i=>ll(i)||i.type==="function"&&i.function.strict===!0))??!1}function y_(n){for(const e of n||[])if(e.type!=="function")throw new ce(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function FM(n){for(const e of n??[]){if(e.type!=="function")throw new ce(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ce(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const la=n=>(n==null?void 0:n.role)==="assistant",v_=n=>(n==null?void 0:n.role)==="tool";var Of,Vr,zr,Ks,Xs,Fr,Qs,Hn,Zs,ra,aa,Lo,__;class sd{constructor(){Of.add(this),this.controller=new AbortController,Vr.set(this,void 0),zr.set(this,()=>{}),Ks.set(this,()=>{}),Xs.set(this,void 0),Fr.set(this,()=>{}),Qs.set(this,()=>{}),Hn.set(this,{}),Zs.set(this,!1),ra.set(this,!1),aa.set(this,!1),Lo.set(this,!1),he(this,Vr,new Promise((e,i)=>{he(this,zr,e,"f"),he(this,Ks,i,"f")})),he(this,Xs,new Promise((e,i)=>{he(this,Fr,e,"f"),he(this,Qs,i,"f")})),L(this,Vr,"f").catch(()=>{}),L(this,Xs,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},L(this,Of,"m",__).bind(this))},0)}_connected(){this.ended||(L(this,zr,"f").call(this),this._emit("connect"))}get ended(){return L(this,Zs,"f")}get errored(){return L(this,ra,"f")}get aborted(){return L(this,aa,"f")}abort(){this.controller.abort()}on(e,i){return(L(this,Hn,"f")[e]||(L(this,Hn,"f")[e]=[])).push({listener:i}),this}off(e,i){const s=L(this,Hn,"f")[e];if(!s)return this;const r=s.findIndex(u=>u.listener===i);return r>=0&&s.splice(r,1),this}once(e,i){return(L(this,Hn,"f")[e]||(L(this,Hn,"f")[e]=[])).push({listener:i,once:!0}),this}emitted(e){return new Promise((i,s)=>{he(this,Lo,!0),e!=="error"&&this.once("error",s),this.once(e,i)})}async done(){he(this,Lo,!0),await L(this,Xs,"f")}_emit(e,...i){if(L(this,Zs,"f"))return;e==="end"&&(he(this,Zs,!0),L(this,Fr,"f").call(this));const s=L(this,Hn,"f")[e];if(s&&(L(this,Hn,"f")[e]=s.filter(r=>!r.once),s.forEach(({listener:r})=>r(...i))),e==="abort"){const r=i[0];!L(this,Lo,"f")&&!(s!=null&&s.length)&&Promise.reject(r),L(this,Ks,"f").call(this,r),L(this,Qs,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=i[0];!L(this,Lo,"f")&&!(s!=null&&s.length)&&Promise.reject(r),L(this,Ks,"f").call(this,r),L(this,Qs,"f").call(this,r),this._emit("end")}}_emitFinal(){}}Vr=new WeakMap,zr=new WeakMap,Ks=new WeakMap,Xs=new WeakMap,Fr=new WeakMap,Qs=new WeakMap,Hn=new WeakMap,Zs=new WeakMap,ra=new WeakMap,aa=new WeakMap,Lo=new WeakMap,Of=new WeakSet,__=function(e){if(he(this,ra,!0),e instanceof Error&&e.name==="AbortError"&&(e=new tn),e instanceof tn)return he(this,aa,!0),this._emit("abort",e);if(e instanceof ce)return this._emit("error",e);if(e instanceof Error){const i=new ce(e.message);return i.cause=e,this._emit("error",i)}return this._emit("error",new ce(String(e)))};function $M(n){return typeof n.parse=="function"}var Et,Gf,ua,Pf,kf,Hf,S_,T_;const JM=10;class E_ extends sd{constructor(){super(...arguments),Et.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var s;this._chatCompletions.push(e),this._emit("chatCompletion",e);const i=(s=e.choices[0])==null?void 0:s.message;return i&&this._addMessage(i),e}_addMessage(e,i=!0){if("content"in e||(e.content=null),this.messages.push(e),i){if(this._emit("message",e),v_(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(la(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionToolCall",s.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ce("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),L(this,Et,"m",Gf).call(this)}async finalMessage(){return await this.done(),L(this,Et,"m",ua).call(this)}async finalFunctionToolCall(){return await this.done(),L(this,Et,"m",Pf).call(this)}async finalFunctionToolCallResult(){return await this.done(),L(this,Et,"m",kf).call(this)}async totalUsage(){return await this.done(),L(this,Et,"m",Hf).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const i=L(this,Et,"m",ua).call(this);i&&this._emit("finalMessage",i);const s=L(this,Et,"m",Gf).call(this);s&&this._emit("finalContent",s);const r=L(this,Et,"m",Pf).call(this);r&&this._emit("finalFunctionToolCall",r);const u=L(this,Et,"m",kf).call(this);u!=null&&this._emit("finalFunctionToolCallResult",u),this._chatCompletions.some(d=>d.usage)&&this._emit("totalUsage",L(this,Et,"m",Hf).call(this))}async _createChatCompletion(e,i,s){const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),L(this,Et,"m",S_).call(this,i);const u=await e.chat.completions.create({...i,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(od(u,i))}async _runChatCompletion(e,i,s){for(const r of i.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,i,s)}async _runTools(e,i,s){var A,b,I;const r="tool",{tool_choice:u="auto",stream:d,...p}=i,y=typeof u!="string"&&u.type==="function"&&((A=u==null?void 0:u.function)==null?void 0:A.name),{maxChatCompletions:m=JM}=s||{},v=i.tools.map(x=>{if(ll(x)){if(!x.$callback)throw new ce("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:x.$callback,name:x.function.name,description:x.function.description||"",parameters:x.function.parameters,parse:x.$parseRaw,strict:!0}}}return x}),_={};for(const x of v)x.type==="function"&&(_[x.function.name||x.function.function.name]=x.function);const T="tools"in i?v.map(x=>x.type==="function"?{type:"function",function:{name:x.function.name||x.function.function.name,parameters:x.function.parameters,description:x.function.description,strict:x.function.strict}}:x):void 0;for(const x of i.messages)this._addMessage(x,!1);for(let x=0;x<m;++x){const V=(b=(await this._createChatCompletion(e,{...p,tool_choice:u,tools:T,messages:[...this.messages]},s)).choices[0])==null?void 0:b.message;if(!V)throw new ce("missing message in ChatCompletion response");if(!((I=V.tool_calls)!=null&&I.length))return;for(const H of V.tool_calls){if(H.type!=="function")continue;const G=H.id,{name:P,arguments:W}=H.function,J=_[P];if(J){if(y&&y!==P){const oe=`Invalid tool_call: ${JSON.stringify(P)}. ${JSON.stringify(y)} requested. Please try again`;this._addMessage({role:r,tool_call_id:G,content:oe});continue}}else{const oe=`Invalid tool_call: ${JSON.stringify(P)}. Available options are: ${Object.keys(_).map(Ee=>JSON.stringify(Ee)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:G,content:oe});continue}let fe;try{fe=$M(J)?await J.parse(W):W}catch(oe){const Ee=oe instanceof Error?oe.message:String(oe);this._addMessage({role:r,tool_call_id:G,content:Ee});continue}const Z=await J.function(fe,this),ie=L(this,Et,"m",T_).call(this,Z);if(this._addMessage({role:r,tool_call_id:G,content:ie}),y)return}}}}Et=new WeakSet,Gf=function(){return L(this,Et,"m",ua).call(this).content??null},ua=function(){let e=this.messages.length;for(;e-- >0;){const i=this.messages[e];if(la(i))return{...i,content:i.content??null,refusal:i.refusal??null}}throw new ce("stream ended without producing a ChatCompletionMessage with role=assistant")},Pf=function(){var e,i;for(let s=this.messages.length-1;s>=0;s--){const r=this.messages[s];if(la(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(i=r.tool_calls.filter(u=>u.type==="function").at(-1))==null?void 0:i.function}},kf=function(){for(let e=this.messages.length-1;e>=0;e--){const i=this.messages[e];if(v_(i)&&i.content!=null&&typeof i.content=="string"&&this.messages.some(s=>{var r;return s.role==="assistant"&&((r=s.tool_calls)==null?void 0:r.some(u=>u.type==="function"&&u.id===i.tool_call_id))}))return i.content}},Hf=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:i}of this._chatCompletions)i&&(e.completion_tokens+=i.completion_tokens,e.prompt_tokens+=i.prompt_tokens,e.total_tokens+=i.total_tokens);return e},S_=function(e){if(e.n!=null&&e.n>1)throw new ce("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},T_=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ld extends E_{static runTools(e,i,s){const r=new ld,u={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,i,u)),r}_addMessage(e,i=!0){super._addMessage(e,i),la(e)&&e.content&&this._emit("content",e.content)}}const A_=1,C_=2,b_=4,w_=8,x_=16,R_=32,N_=64,I_=128,M_=256,D_=I_|M_,U_=x_|R_|D_|N_,L_=A_|C_|U_,O_=b_|w_,YM=L_|O_,ut={STR:A_,NUM:C_,ARR:b_,OBJ:w_,NULL:x_,BOOL:R_,NAN:N_,INFINITY:I_,MINUS_INFINITY:M_,INF:D_,SPECIAL:U_,ATOM:L_,COLLECTION:O_,ALL:YM};class KM extends Error{}class XM extends Error{}function QM(n,e=ut.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return ZM(n.trim(),e)}const ZM=(n,e)=>{const i=n.length;let s=0;const r=T=>{throw new KM(`${T} at position ${s}`)},u=T=>{throw new XM(`${T} at position ${s}`)},d=()=>(_(),s>=i&&r("Unexpected end of input"),n[s]==='"'?p():n[s]==="{"?y():n[s]==="["?m():n.substring(s,s+4)==="null"||ut.NULL&e&&i-s<4&&"null".startsWith(n.substring(s))?(s+=4,null):n.substring(s,s+4)==="true"||ut.BOOL&e&&i-s<4&&"true".startsWith(n.substring(s))?(s+=4,!0):n.substring(s,s+5)==="false"||ut.BOOL&e&&i-s<5&&"false".startsWith(n.substring(s))?(s+=5,!1):n.substring(s,s+8)==="Infinity"||ut.INFINITY&e&&i-s<8&&"Infinity".startsWith(n.substring(s))?(s+=8,1/0):n.substring(s,s+9)==="-Infinity"||ut.MINUS_INFINITY&e&&1<i-s&&i-s<9&&"-Infinity".startsWith(n.substring(s))?(s+=9,-1/0):n.substring(s,s+3)==="NaN"||ut.NAN&e&&i-s<3&&"NaN".startsWith(n.substring(s))?(s+=3,NaN):v()),p=()=>{const T=s;let A=!1;for(s++;s<i&&(n[s]!=='"'||A&&n[s-1]==="\\");)A=n[s]==="\\"?!A:!1,s++;if(n.charAt(s)=='"')try{return JSON.parse(n.substring(T,++s-Number(A)))}catch(b){u(String(b))}else if(ut.STR&e)try{return JSON.parse(n.substring(T,s-Number(A))+'"')}catch{return JSON.parse(n.substring(T,n.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},y=()=>{s++,_();const T={};try{for(;n[s]!=="}";){if(_(),s>=i&&ut.OBJ&e)return T;const A=p();_(),s++;try{const b=d();Object.defineProperty(T,A,{value:b,writable:!0,enumerable:!0,configurable:!0})}catch(b){if(ut.OBJ&e)return T;throw b}_(),n[s]===","&&s++}}catch{if(ut.OBJ&e)return T;r("Expected '}' at end of object")}return s++,T},m=()=>{s++;const T=[];try{for(;n[s]!=="]";)T.push(d()),_(),n[s]===","&&s++}catch{if(ut.ARR&e)return T;r("Expected ']' at end of array")}return s++,T},v=()=>{if(s===0){n==="-"&&ut.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n)}catch(A){if(ut.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}u(String(A))}}const T=s;for(n[s]==="-"&&s++;n[s]&&!",]}".includes(n[s]);)s++;s==i&&!(ut.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(n.substring(T,s))}catch{n.substring(T,s)==="-"&&ut.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(n.substring(T,n.lastIndexOf("e")))}catch(b){u(String(b))}}},_=()=>{for(;s<i&&` 
\r	`.includes(n[s]);)s++};return d()},Nv=n=>QM(n,ut.ALL^ut.NUM);var st,kn,No,pi,sf,Lr,lf,rf,af,Or,uf,Iv;class ol extends E_{constructor(e){super(),st.add(this),kn.set(this,void 0),No.set(this,void 0),pi.set(this,void 0),he(this,kn,e),he(this,No,[])}get currentChatCompletionSnapshot(){return L(this,pi,"f")}static fromReadableStream(e){const i=new ol(null);return i._run(()=>i._fromReadableStream(e)),i}static createChatCompletion(e,i,s){const r=new ol(i);return r._run(()=>r._runChatCompletion(e,{...i,stream:!0},{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,i,s){var d;super._createChatCompletion;const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),L(this,st,"m",sf).call(this);const u=await e.chat.completions.create({...i,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const p of u)L(this,st,"m",lf).call(this,p);if((d=u.controller.signal)!=null&&d.aborted)throw new tn;return this._addChatCompletion(L(this,st,"m",Or).call(this))}async _fromReadableStream(e,i){var d;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),L(this,st,"m",sf).call(this),this._connected();const r=_n.fromReadableStream(e,this.controller);let u;for await(const p of r)u&&u!==p.id&&this._addChatCompletion(L(this,st,"m",Or).call(this)),L(this,st,"m",lf).call(this,p),u=p.id;if((d=r.controller.signal)!=null&&d.aborted)throw new tn;return this._addChatCompletion(L(this,st,"m",Or).call(this))}[(kn=new WeakMap,No=new WeakMap,pi=new WeakMap,st=new WeakSet,sf=function(){this.ended||he(this,pi,void 0)},Lr=function(i){let s=L(this,No,"f")[i.index];return s||(s={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},L(this,No,"f")[i.index]=s,s)},lf=function(i){var r,u,d,p,y,m,v,_,T,A,b,I,x,B,V;if(this.ended)return;const s=L(this,st,"m",Iv).call(this,i);this._emit("chunk",i,s);for(const H of i.choices){const G=s.choices[H.index];H.delta.content!=null&&((r=G.message)==null?void 0:r.role)==="assistant"&&((u=G.message)!=null&&u.content)&&(this._emit("content",H.delta.content,G.message.content),this._emit("content.delta",{delta:H.delta.content,snapshot:G.message.content,parsed:G.message.parsed})),H.delta.refusal!=null&&((d=G.message)==null?void 0:d.role)==="assistant"&&((p=G.message)!=null&&p.refusal)&&this._emit("refusal.delta",{delta:H.delta.refusal,snapshot:G.message.refusal}),((y=H.logprobs)==null?void 0:y.content)!=null&&((m=G.message)==null?void 0:m.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(v=H.logprobs)==null?void 0:v.content,snapshot:((_=G.logprobs)==null?void 0:_.content)??[]}),((T=H.logprobs)==null?void 0:T.refusal)!=null&&((A=G.message)==null?void 0:A.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(b=H.logprobs)==null?void 0:b.refusal,snapshot:((I=G.logprobs)==null?void 0:I.refusal)??[]});const P=L(this,st,"m",Lr).call(this,G);G.finish_reason&&(L(this,st,"m",af).call(this,G),P.current_tool_call_index!=null&&L(this,st,"m",rf).call(this,G,P.current_tool_call_index));for(const W of H.delta.tool_calls??[])P.current_tool_call_index!==W.index&&(L(this,st,"m",af).call(this,G),P.current_tool_call_index!=null&&L(this,st,"m",rf).call(this,G,P.current_tool_call_index)),P.current_tool_call_index=W.index;for(const W of H.delta.tool_calls??[]){const J=(x=G.message.tool_calls)==null?void 0:x[W.index];J!=null&&J.type&&((J==null?void 0:J.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(B=J.function)==null?void 0:B.name,index:W.index,arguments:J.function.arguments,parsed_arguments:J.function.parsed_arguments,arguments_delta:((V=W.function)==null?void 0:V.arguments)??""}):(J==null||J.type,void 0))}}},rf=function(i,s){var d,p,y;if(L(this,st,"m",Lr).call(this,i).done_tool_calls.has(s))return;const u=(d=i.message.tool_calls)==null?void 0:d[s];if(!u)throw new Error("no tool call snapshot");if(!u.type)throw new Error("tool call snapshot missing `type`");if(u.type==="function"){const m=(y=(p=L(this,kn,"f"))==null?void 0:p.tools)==null?void 0:y.find(v=>sa(v)&&v.function.name===u.function.name);this._emit("tool_calls.function.arguments.done",{name:u.function.name,index:s,arguments:u.function.arguments,parsed_arguments:ll(m)?m.$parseRaw(u.function.arguments):m!=null&&m.function.strict?JSON.parse(u.function.arguments):null})}else u.type},af=function(i){var r,u;const s=L(this,st,"m",Lr).call(this,i);if(i.message.content&&!s.content_done){s.content_done=!0;const d=L(this,st,"m",uf).call(this);this._emit("content.done",{content:i.message.content,parsed:d?d.$parseRaw(i.message.content):null})}i.message.refusal&&!s.refusal_done&&(s.refusal_done=!0,this._emit("refusal.done",{refusal:i.message.refusal})),(r=i.logprobs)!=null&&r.content&&!s.logprobs_content_done&&(s.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:i.logprobs.content})),(u=i.logprobs)!=null&&u.refusal&&!s.logprobs_refusal_done&&(s.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:i.logprobs.refusal}))},Or=function(){if(this.ended)throw new ce("stream has ended, this shouldn't happen");const i=L(this,pi,"f");if(!i)throw new ce("request ended without sending any chunks");return he(this,pi,void 0),he(this,No,[]),WM(i,L(this,kn,"f"))},uf=function(){var s;const i=(s=L(this,kn,"f"))==null?void 0:s.response_format;return id(i)?i:null},Iv=function(i){var s,r,u,d;let p=L(this,pi,"f");const{choices:y,...m}=i;p?Object.assign(p,m):p=he(this,pi,{...m,choices:[]});for(const{delta:v,finish_reason:_,index:T,logprobs:A=null,...b}of i.choices){let I=p.choices[T];if(I||(I=p.choices[T]={finish_reason:_,index:T,message:{},logprobs:A,...b}),A)if(!I.logprobs)I.logprobs=Object.assign({},A);else{const{content:W,refusal:J,...fe}=A;Object.assign(I.logprobs,fe),W&&((s=I.logprobs).content??(s.content=[]),I.logprobs.content.push(...W)),J&&((r=I.logprobs).refusal??(r.refusal=[]),I.logprobs.refusal.push(...J))}if(_&&(I.finish_reason=_,L(this,kn,"f")&&g_(L(this,kn,"f")))){if(_==="length")throw new Z0;if(_==="content_filter")throw new W0}if(Object.assign(I,b),!v)continue;const{content:x,refusal:B,function_call:V,role:H,tool_calls:G,...P}=v;if(Object.assign(I.message,P),B&&(I.message.refusal=(I.message.refusal||"")+B),H&&(I.message.role=H),V&&(I.message.function_call?(V.name&&(I.message.function_call.name=V.name),V.arguments&&((u=I.message.function_call).arguments??(u.arguments=""),I.message.function_call.arguments+=V.arguments)):I.message.function_call=V),x&&(I.message.content=(I.message.content||"")+x,!I.message.refusal&&L(this,st,"m",uf).call(this)&&(I.message.parsed=Nv(I.message.content))),G){I.message.tool_calls||(I.message.tool_calls=[]);for(const{index:W,id:J,type:fe,function:Z,...ie}of G){const oe=(d=I.message.tool_calls)[W]??(d[W]={});Object.assign(oe,ie),J&&(oe.id=J),fe&&(oe.type=fe),Z&&(oe.function??(oe.function={name:Z.name??"",arguments:""})),Z!=null&&Z.name&&(oe.function.name=Z.name),Z!=null&&Z.arguments&&(oe.function.arguments+=Z.arguments,zM(L(this,kn,"f"),oe)&&(oe.function.parsed_arguments=Nv(oe.function.arguments)))}}}return p},Symbol.asyncIterator)](){const e=[],i=[];let s=!1;return this.on("chunk",r=>{const u=i.shift();u?u.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of i)r.resolve(void 0);i.length=0}),this.on("abort",r=>{s=!0;for(const u of i)u.reject(r);i.length=0}),this.on("error",r=>{s=!0;for(const u of i)u.reject(r);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((u,d)=>i.push({resolve:u,reject:d})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new _n(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function WM(n,e){const{id:i,choices:s,created:r,model:u,system_fingerprint:d,...p}=n,y={...p,id:i,choices:s.map(({message:m,finish_reason:v,index:_,logprobs:T,...A})=>{if(!v)throw new ce(`missing finish_reason for choice ${_}`);const{content:b=null,function_call:I,tool_calls:x,...B}=m,V=m.role;if(!V)throw new ce(`missing role for choice ${_}`);if(I){const{arguments:H,name:G}=I;if(H==null)throw new ce(`missing function_call.arguments for choice ${_}`);if(!G)throw new ce(`missing function_call.name for choice ${_}`);return{...A,message:{content:b,function_call:{arguments:H,name:G},role:V,refusal:m.refusal??null},finish_reason:v,index:_,logprobs:T}}return x?{...A,index:_,finish_reason:v,logprobs:T,message:{...B,role:V,content:b,refusal:m.refusal??null,tool_calls:x.map((H,G)=>{const{function:P,type:W,id:J,...fe}=H,{arguments:Z,name:ie,...oe}=P||{};if(J==null)throw new ce(`missing choices[${_}].tool_calls[${G}].id
${Gr(n)}`);if(W==null)throw new ce(`missing choices[${_}].tool_calls[${G}].type
${Gr(n)}`);if(ie==null)throw new ce(`missing choices[${_}].tool_calls[${G}].function.name
${Gr(n)}`);if(Z==null)throw new ce(`missing choices[${_}].tool_calls[${G}].function.arguments
${Gr(n)}`);return{...fe,id:J,type:W,function:{...oe,name:ie,arguments:Z}}})}}:{...A,message:{...B,content:b,role:V,refusal:m.refusal??null},finish_reason:v,index:_,logprobs:T}}),created:r,model:u,object:"chat.completion",...d?{system_fingerprint:d}:{}};return qM(y,e)}function Gr(n){return JSON.stringify(n)}class ca extends ol{static fromReadableStream(e){const i=new ca(null);return i._run(()=>i._fromReadableStream(e)),i}static runTools(e,i,s){const r=new ca(i),u={...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,i,u)),r}}let rd=class extends ae{constructor(){super(...arguments),this.messages=new m_(this._client)}create(e,i){return this._client.post("/chat/completions",{body:e,...i,stream:e.stream??!1})}retrieve(e,i){return this._client.get(X`/chat/completions/${e}`,i)}update(e,i,s){return this._client.post(X`/chat/completions/${e}`,{body:i,...s})}list(e={},i){return this._client.getAPIList("/chat/completions",it,{query:e,...i})}delete(e,i){return this._client.delete(X`/chat/completions/${e}`,i)}parse(e,i){return FM(e.tools),this._client.chat.completions.create(e,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(s=>od(s,e))}runTools(e,i){return e.stream?ca.runTools(this._client,e,i):ld.runTools(this._client,e,i)}stream(e,i){return ol.createChatCompletion(this._client,e,i)}};rd.Messages=m_;class ad extends ae{constructor(){super(...arguments),this.completions=new rd(this._client)}}ad.Completions=rd;const G_=Symbol("brand.privateNullableHeaders");function*jM(n){if(!n)return;if(G_ in n){const{values:s,nulls:r}=n;yield*s.entries();for(const u of r)yield[u,null];return}let e=!1,i;n instanceof Headers?i=n.entries():pv(n)?i=n:(e=!0,i=Object.entries(n??{}));for(let s of i){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const u=pv(s[1])?s[1]:[s[1]];let d=!1;for(const p of u)p!==void 0&&(e&&!d&&(d=!0,yield[r,null]),yield[r,p])}}const ne=n=>{const e=new Headers,i=new Set;for(const s of n){const r=new Set;for(const[u,d]of jM(s)){const p=u.toLowerCase();r.has(p)||(e.delete(u),r.add(p)),d===null?(e.delete(u),i.add(p)):(e.append(u,d),i.delete(p))}}return{[G_]:!0,values:e,nulls:i}};class P_ extends ae{create(e,i){return this._client.post("/audio/speech",{body:e,...i,headers:ne([{Accept:"application/octet-stream"},i==null?void 0:i.headers]),__binaryResponse:!0})}}class k_ extends ae{create(e,i){return this._client.post("/audio/transcriptions",Vi({body:e,...i,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class H_ extends ae{create(e,i){return this._client.post("/audio/translations",Vi({body:e,...i,__metadata:{model:e.model}},this._client))}}class rl extends ae{constructor(){super(...arguments),this.transcriptions=new k_(this._client),this.translations=new H_(this._client),this.speech=new P_(this._client)}}rl.Transcriptions=k_;rl.Translations=H_;rl.Speech=P_;class q_ extends ae{create(e,i){return this._client.post("/batches",{body:e,...i})}retrieve(e,i){return this._client.get(X`/batches/${e}`,i)}list(e={},i){return this._client.getAPIList("/batches",it,{query:e,...i})}cancel(e,i){return this._client.post(X`/batches/${e}/cancel`,i)}}class B_ extends ae{create(e,i){return this._client.post("/assistants",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(X`/assistants/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,s){return this._client.post(X`/assistants/${e}`,{body:i,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},i){return this._client.getAPIList("/assistants",it,{query:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(X`/assistants/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}let V_=class extends ae{create(e,i){return this._client.post("/realtime/sessions",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}};class z_ extends ae{create(e,i){return this._client.post("/realtime/transcription_sessions",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}}let Ea=class extends ae{constructor(){super(...arguments),this.sessions=new V_(this._client),this.transcriptionSessions=new z_(this._client)}};Ea.Sessions=V_;Ea.TranscriptionSessions=z_;class F_ extends ae{create(e,i){return this._client.post("/chatkit/sessions",{body:e,...i,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}cancel(e,i){return this._client.post(X`/chatkit/sessions/${e}/cancel`,{...i,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}}let $_=class extends ae{retrieve(e,i){return this._client.get(X`/chatkit/threads/${e}`,{...i,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}list(e={},i){return this._client.getAPIList("/chatkit/threads",oa,{query:e,...i,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(X`/chatkit/threads/${e}`,{...i,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},i==null?void 0:i.headers])})}listItems(e,i={},s){return this._client.getAPIList(X`/chatkit/threads/${e}/items`,oa,{query:i,...s,headers:ne([{"OpenAI-Beta":"chatkit_beta=v1"},s==null?void 0:s.headers])})}};class Aa extends ae{constructor(){super(...arguments),this.sessions=new F_(this._client),this.threads=new $_(this._client)}}Aa.Sessions=F_;Aa.Threads=$_;class J_ extends ae{create(e,i,s){return this._client.post(X`/threads/${e}/messages`,{body:i,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,i,s){const{thread_id:r}=i;return this._client.get(X`/threads/${r}/messages/${e}`,{...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,i,s){const{thread_id:r,...u}=i;return this._client.post(X`/threads/${r}/messages/${e}`,{body:u,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,i={},s){return this._client.getAPIList(X`/threads/${e}/messages`,it,{query:i,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,i,s){const{thread_id:r}=i;return this._client.delete(X`/threads/${r}/messages/${e}`,{...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class Y_ extends ae{retrieve(e,i,s){const{thread_id:r,run_id:u,...d}=i;return this._client.get(X`/threads/${r}/runs/${u}/steps/${e}`,{query:d,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,i,s){const{thread_id:r,...u}=i;return this._client.getAPIList(X`/threads/${r}/runs/${e}/steps`,it,{query:u,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}const e1=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),i=e.length,s=new Uint8Array(i);for(let r=0;r<i;r++)s[r]=e.charCodeAt(r);return Array.from(new Float32Array(s.buffer))}};var cf={};const Io=n=>{var e,i,s,r;if(typeof globalThis.process<"u")return((e=cf==null?void 0:cf[n])==null?void 0:e.trim())??void 0;if(typeof globalThis.Deno<"u")return(r=(s=(i=globalThis.Deno.env)==null?void 0:i.get)==null?void 0:s.call(i,n))==null?void 0:r.trim()};var yt,qi,qf,vn,$r,un,Bi,Po,Hi,fa,Ft,Jr,Yr,tl,Ws,js,Mv,Dv,Uv,Lv,Ov,Gv,Pv;class nl extends sd{constructor(){super(...arguments),yt.add(this),qf.set(this,[]),vn.set(this,{}),$r.set(this,{}),un.set(this,void 0),Bi.set(this,void 0),Po.set(this,void 0),Hi.set(this,void 0),fa.set(this,void 0),Ft.set(this,void 0),Jr.set(this,void 0),Yr.set(this,void 0),tl.set(this,void 0)}[(qf=new WeakMap,vn=new WeakMap,$r=new WeakMap,un=new WeakMap,Bi=new WeakMap,Po=new WeakMap,Hi=new WeakMap,fa=new WeakMap,Ft=new WeakMap,Jr=new WeakMap,Yr=new WeakMap,tl=new WeakMap,yt=new WeakSet,Symbol.asyncIterator)](){const e=[],i=[];let s=!1;return this.on("event",r=>{const u=i.shift();u?u.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of i)r.resolve(void 0);i.length=0}),this.on("abort",r=>{s=!0;for(const u of i)u.reject(r);i.length=0}),this.on("error",r=>{s=!0;for(const u of i)u.reject(r);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((u,d)=>i.push({resolve:u,reject:d})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const i=new qi;return i._run(()=>i._fromReadableStream(e)),i}async _fromReadableStream(e,i){var u;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=_n.fromReadableStream(e,this.controller);for await(const d of r)L(this,yt,"m",Ws).call(this,d);if((u=r.controller.signal)!=null&&u.aborted)throw new tn;return this._addRun(L(this,yt,"m",js).call(this))}toReadableStream(){return new _n(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,i,s,r){const u=new qi;return u._run(()=>u._runToolAssistantStream(e,i,s,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),u}async _createToolAssistantStream(e,i,s,r){var y;const u=r==null?void 0:r.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const d={...s,stream:!0},p=await e.submitToolOutputs(i,d,{...r,signal:this.controller.signal});this._connected();for await(const m of p)L(this,yt,"m",Ws).call(this,m);if((y=p.controller.signal)!=null&&y.aborted)throw new tn;return this._addRun(L(this,yt,"m",js).call(this))}static createThreadAssistantStream(e,i,s){const r=new qi;return r._run(()=>r._threadAssistantStream(e,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,i,s,r){const u=new qi;return u._run(()=>u._runAssistantStream(e,i,s,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),u}currentEvent(){return L(this,Jr,"f")}currentRun(){return L(this,Yr,"f")}currentMessageSnapshot(){return L(this,un,"f")}currentRunStepSnapshot(){return L(this,tl,"f")}async finalRunSteps(){return await this.done(),Object.values(L(this,vn,"f"))}async finalMessages(){return await this.done(),Object.values(L(this,$r,"f"))}async finalRun(){if(await this.done(),!L(this,Bi,"f"))throw Error("Final run was not received.");return L(this,Bi,"f")}async _createThreadAssistantStream(e,i,s){var p;const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const u={...i,stream:!0},d=await e.createAndRun(u,{...s,signal:this.controller.signal});this._connected();for await(const y of d)L(this,yt,"m",Ws).call(this,y);if((p=d.controller.signal)!=null&&p.aborted)throw new tn;return this._addRun(L(this,yt,"m",js).call(this))}async _createAssistantStream(e,i,s,r){var y;const u=r==null?void 0:r.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const d={...s,stream:!0},p=await e.create(i,d,{...r,signal:this.controller.signal});this._connected();for await(const m of p)L(this,yt,"m",Ws).call(this,m);if((y=p.controller.signal)!=null&&y.aborted)throw new tn;return this._addRun(L(this,yt,"m",js).call(this))}static accumulateDelta(e,i){for(const[s,r]of Object.entries(i)){if(!e.hasOwnProperty(s)){e[s]=r;continue}let u=e[s];if(u==null){e[s]=r;continue}if(s==="index"||s==="type"){e[s]=r;continue}if(typeof u=="string"&&typeof r=="string")u+=r;else if(typeof u=="number"&&typeof r=="number")u+=r;else if(tf(u)&&tf(r))u=this.accumulateDelta(u,r);else if(Array.isArray(u)&&Array.isArray(r)){if(u.every(d=>typeof d=="string"||typeof d=="number")){u.push(...r);continue}for(const d of r){if(!tf(d))throw new Error(`Expected array delta entry to be an object but got: ${d}`);const p=d.index;if(p==null)throw console.error(d),new Error("Expected array delta entry to have an `index` property");if(typeof p!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${p}`);const y=u[p];y==null?u.push(d):u[p]=this.accumulateDelta(y,d)}continue}else throw Error(`Unhandled record type: ${s}, deltaValue: ${r}, accValue: ${u}`);e[s]=u}return e}_addRun(e){return e}async _threadAssistantStream(e,i,s){return await this._createThreadAssistantStream(i,e,s)}async _runAssistantStream(e,i,s,r){return await this._createAssistantStream(i,e,s,r)}async _runToolAssistantStream(e,i,s,r){return await this._createToolAssistantStream(i,e,s,r)}}qi=nl,Ws=function(e){if(!this.ended)switch(he(this,Jr,e),L(this,yt,"m",Uv).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":L(this,yt,"m",Pv).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":L(this,yt,"m",Dv).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":L(this,yt,"m",Mv).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},js=function(){if(this.ended)throw new ce("stream has ended, this shouldn't happen");if(!L(this,Bi,"f"))throw Error("Final run has not been received");return L(this,Bi,"f")},Mv=function(e){const[i,s]=L(this,yt,"m",Ov).call(this,e,L(this,un,"f"));he(this,un,i),L(this,$r,"f")[i.id]=i;for(const r of s){const u=i.content[r.index];(u==null?void 0:u.type)=="text"&&this._emit("textCreated",u.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,i),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let u=r.text,d=i.content[r.index];if(d&&d.type=="text")this._emit("textDelta",u,d.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=L(this,Po,"f")){if(L(this,Hi,"f"))switch(L(this,Hi,"f").type){case"text":this._emit("textDone",L(this,Hi,"f").text,L(this,un,"f"));break;case"image_file":this._emit("imageFileDone",L(this,Hi,"f").image_file,L(this,un,"f"));break}he(this,Po,r.index)}he(this,Hi,i.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(L(this,Po,"f")!==void 0){const r=e.data.content[L(this,Po,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,L(this,un,"f"));break;case"text":this._emit("textDone",r.text,L(this,un,"f"));break}}L(this,un,"f")&&this._emit("messageDone",e.data),he(this,un,void 0)}},Dv=function(e){const i=L(this,yt,"m",Lv).call(this,e);switch(he(this,tl,i),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const s=e.data.delta;if(s.step_details&&s.step_details.type=="tool_calls"&&s.step_details.tool_calls&&i.step_details.type=="tool_calls")for(const u of s.step_details.tool_calls)u.index==L(this,fa,"f")?this._emit("toolCallDelta",u,i.step_details.tool_calls[u.index]):(L(this,Ft,"f")&&this._emit("toolCallDone",L(this,Ft,"f")),he(this,fa,u.index),he(this,Ft,i.step_details.tool_calls[u.index]),L(this,Ft,"f")&&this._emit("toolCallCreated",L(this,Ft,"f")));this._emit("runStepDelta",e.data.delta,i);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":he(this,tl,void 0),e.data.step_details.type=="tool_calls"&&L(this,Ft,"f")&&(this._emit("toolCallDone",L(this,Ft,"f")),he(this,Ft,void 0)),this._emit("runStepDone",e.data,i);break}},Uv=function(e){L(this,qf,"f").push(e),this._emit("event",e)},Lv=function(e){switch(e.event){case"thread.run.step.created":return L(this,vn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let i=L(this,vn,"f")[e.data.id];if(!i)throw Error("Received a RunStepDelta before creation of a snapshot");let s=e.data;if(s.delta){const r=qi.accumulateDelta(i,s.delta);L(this,vn,"f")[e.data.id]=r}return L(this,vn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":L(this,vn,"f")[e.data.id]=e.data;break}if(L(this,vn,"f")[e.data.id])return L(this,vn,"f")[e.data.id];throw new Error("No snapshot available")},Ov=function(e,i){let s=[];switch(e.event){case"thread.message.created":return[e.data,s];case"thread.message.delta":if(!i)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const u of r.delta.content)if(u.index in i.content){let d=i.content[u.index];i.content[u.index]=L(this,yt,"m",Gv).call(this,u,d)}else i.content[u.index]=u,s.push(u);return[i,s];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(i)return[i,s];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Gv=function(e,i){return qi.accumulateDelta(i,e)},Pv=function(e){switch(he(this,Yr,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":he(this,Bi,e.data),L(this,Ft,"f")&&(this._emit("toolCallDone",L(this,Ft,"f")),he(this,Ft,void 0));break}};let ud=class extends ae{constructor(){super(...arguments),this.steps=new Y_(this._client)}create(e,i,s){const{include:r,...u}=i;return this._client.post(X`/threads/${e}/runs`,{query:{include:r},body:u,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:i.stream??!1})}retrieve(e,i,s){const{thread_id:r}=i;return this._client.get(X`/threads/${r}/runs/${e}`,{...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,i,s){const{thread_id:r,...u}=i;return this._client.post(X`/threads/${r}/runs/${e}`,{body:u,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,i={},s){return this._client.getAPIList(X`/threads/${e}/runs`,it,{query:i,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,i,s){const{thread_id:r}=i;return this._client.post(X`/threads/${r}/runs/${e}/cancel`,{...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,i,s){const r=await this.create(e,i,s);return await this.poll(r.id,{thread_id:e},s)}createAndStream(e,i,s){return nl.createAssistantStream(e,this._client.beta.threads.runs,i,s)}async poll(e,i,s){var u;const r=ne([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((u=s==null?void 0:s.pollIntervalMs)==null?void 0:u.toString())??void 0}]);for(;;){const{data:d,response:p}=await this.retrieve(e,i,{...s,headers:{...s==null?void 0:s.headers,...r}}).withResponse();switch(d.status){case"queued":case"in_progress":case"cancelling":let y=5e3;if(s!=null&&s.pollIntervalMs)y=s.pollIntervalMs;else{const m=p.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await sl(y);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return d}}}stream(e,i,s){return nl.createAssistantStream(e,this._client.beta.threads.runs,i,s)}submitToolOutputs(e,i,s){const{thread_id:r,...u}=i;return this._client.post(X`/threads/${r}/runs/${e}/submit_tool_outputs`,{body:u,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers]),stream:i.stream??!1})}async submitToolOutputsAndPoll(e,i,s){const r=await this.submitToolOutputs(e,i,s);return await this.poll(r.id,i,s)}submitToolOutputsStream(e,i,s){return nl.createToolAssistantStream(e,this._client.beta.threads.runs,i,s)}};ud.Steps=Y_;class Ca extends ae{constructor(){super(...arguments),this.runs=new ud(this._client),this.messages=new J_(this._client)}create(e={},i){return this._client.post("/threads",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(X`/threads/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,s){return this._client.post(X`/threads/${e}`,{body:i,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,i){return this._client.delete(X`/threads/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}createAndRun(e,i){return this._client.post("/threads/runs",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers]),stream:e.stream??!1})}async createAndRunPoll(e,i){const s=await this.createAndRun(e,i);return await this.runs.poll(s.id,{thread_id:s.thread_id},i)}createAndRunStream(e,i){return nl.createThreadAssistantStream(e,this._client.beta.threads,i)}}Ca.Runs=ud;Ca.Messages=J_;class zo extends ae{constructor(){super(...arguments),this.realtime=new Ea(this._client),this.chatkit=new Aa(this._client),this.assistants=new B_(this._client),this.threads=new Ca(this._client)}}zo.Realtime=Ea;zo.ChatKit=Aa;zo.Assistants=B_;zo.Threads=Ca;class K_ extends ae{create(e,i){return this._client.post("/completions",{body:e,...i,stream:e.stream??!1})}}class X_ extends ae{retrieve(e,i,s){const{container_id:r}=i;return this._client.get(X`/containers/${r}/files/${e}/content`,{...s,headers:ne([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}}let cd=class extends ae{constructor(){super(...arguments),this.content=new X_(this._client)}create(e,i,s){return this._client.post(X`/containers/${e}/files`,Vi({body:i,...s},this._client))}retrieve(e,i,s){const{container_id:r}=i;return this._client.get(X`/containers/${r}/files/${e}`,s)}list(e,i={},s){return this._client.getAPIList(X`/containers/${e}/files`,it,{query:i,...s})}delete(e,i,s){const{container_id:r}=i;return this._client.delete(X`/containers/${r}/files/${e}`,{...s,headers:ne([{Accept:"*/*"},s==null?void 0:s.headers])})}};cd.Content=X_;class fd extends ae{constructor(){super(...arguments),this.files=new cd(this._client)}create(e,i){return this._client.post("/containers",{body:e,...i})}retrieve(e,i){return this._client.get(X`/containers/${e}`,i)}list(e={},i){return this._client.getAPIList("/containers",it,{query:e,...i})}delete(e,i){return this._client.delete(X`/containers/${e}`,{...i,headers:ne([{Accept:"*/*"},i==null?void 0:i.headers])})}}fd.Files=cd;class Q_ extends ae{create(e,i,s){const{include:r,...u}=i;return this._client.post(X`/conversations/${e}/items`,{query:{include:r},body:u,...s})}retrieve(e,i,s){const{conversation_id:r,...u}=i;return this._client.get(X`/conversations/${r}/items/${e}`,{query:u,...s})}list(e,i={},s){return this._client.getAPIList(X`/conversations/${e}/items`,oa,{query:i,...s})}delete(e,i,s){const{conversation_id:r}=i;return this._client.delete(X`/conversations/${r}/items/${e}`,s)}}class dd extends ae{constructor(){super(...arguments),this.items=new Q_(this._client)}create(e={},i){return this._client.post("/conversations",{body:e,...i})}retrieve(e,i){return this._client.get(X`/conversations/${e}`,i)}update(e,i,s){return this._client.post(X`/conversations/${e}`,{body:i,...s})}delete(e,i){return this._client.delete(X`/conversations/${e}`,i)}}dd.Items=Q_;class Z_ extends ae{create(e,i){const s=!!e.encoding_format;let r=s?e.encoding_format:"base64";s&&gt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const u=this._client.post("/embeddings",{body:{...e,encoding_format:r},...i});return s?u:(gt(this._client).debug("embeddings/decoding base64 embeddings from base64"),u._thenUnwrap(d=>(d&&d.data&&d.data.forEach(p=>{const y=p.embedding;p.embedding=e1(y)}),d)))}}class W_ extends ae{retrieve(e,i,s){const{eval_id:r,run_id:u}=i;return this._client.get(X`/evals/${r}/runs/${u}/output_items/${e}`,s)}list(e,i,s){const{eval_id:r,...u}=i;return this._client.getAPIList(X`/evals/${r}/runs/${e}/output_items`,it,{query:u,...s})}}class hd extends ae{constructor(){super(...arguments),this.outputItems=new W_(this._client)}create(e,i,s){return this._client.post(X`/evals/${e}/runs`,{body:i,...s})}retrieve(e,i,s){const{eval_id:r}=i;return this._client.get(X`/evals/${r}/runs/${e}`,s)}list(e,i={},s){return this._client.getAPIList(X`/evals/${e}/runs`,it,{query:i,...s})}delete(e,i,s){const{eval_id:r}=i;return this._client.delete(X`/evals/${r}/runs/${e}`,s)}cancel(e,i,s){const{eval_id:r}=i;return this._client.post(X`/evals/${r}/runs/${e}`,s)}}hd.OutputItems=W_;class pd extends ae{constructor(){super(...arguments),this.runs=new hd(this._client)}create(e,i){return this._client.post("/evals",{body:e,...i})}retrieve(e,i){return this._client.get(X`/evals/${e}`,i)}update(e,i,s){return this._client.post(X`/evals/${e}`,{body:i,...s})}list(e={},i){return this._client.getAPIList("/evals",it,{query:e,...i})}delete(e,i){return this._client.delete(X`/evals/${e}`,i)}}pd.Runs=hd;let j_=class extends ae{create(e,i){return this._client.post("/files",Vi({body:e,...i},this._client))}retrieve(e,i){return this._client.get(X`/files/${e}`,i)}list(e={},i){return this._client.getAPIList("/files",it,{query:e,...i})}delete(e,i){return this._client.delete(X`/files/${e}`,i)}content(e,i){return this._client.get(X`/files/${e}/content`,{...i,headers:ne([{Accept:"application/binary"},i==null?void 0:i.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:i=5e3,maxWait:s=1800*1e3}={}){const r=new Set(["processed","error","deleted"]),u=Date.now();let d=await this.retrieve(e);for(;!d.status||!r.has(d.status);)if(await sl(i),d=await this.retrieve(e),Date.now()-u>s)throw new jf({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return d}};class eS extends ae{}let tS=class extends ae{run(e,i){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...i})}validate(e,i){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...i})}};class md extends ae{constructor(){super(...arguments),this.graders=new tS(this._client)}}md.Graders=tS;class nS extends ae{create(e,i,s){return this._client.getAPIList(X`/fine_tuning/checkpoints/${e}/permissions`,Ta,{body:i,method:"post",...s})}retrieve(e,i={},s){return this._client.get(X`/fine_tuning/checkpoints/${e}/permissions`,{query:i,...s})}delete(e,i,s){const{fine_tuned_model_checkpoint:r}=i;return this._client.delete(X`/fine_tuning/checkpoints/${r}/permissions/${e}`,s)}}let gd=class extends ae{constructor(){super(...arguments),this.permissions=new nS(this._client)}};gd.Permissions=nS;class iS extends ae{list(e,i={},s){return this._client.getAPIList(X`/fine_tuning/jobs/${e}/checkpoints`,it,{query:i,...s})}}class yd extends ae{constructor(){super(...arguments),this.checkpoints=new iS(this._client)}create(e,i){return this._client.post("/fine_tuning/jobs",{body:e,...i})}retrieve(e,i){return this._client.get(X`/fine_tuning/jobs/${e}`,i)}list(e={},i){return this._client.getAPIList("/fine_tuning/jobs",it,{query:e,...i})}cancel(e,i){return this._client.post(X`/fine_tuning/jobs/${e}/cancel`,i)}listEvents(e,i={},s){return this._client.getAPIList(X`/fine_tuning/jobs/${e}/events`,it,{query:i,...s})}pause(e,i){return this._client.post(X`/fine_tuning/jobs/${e}/pause`,i)}resume(e,i){return this._client.post(X`/fine_tuning/jobs/${e}/resume`,i)}}yd.Checkpoints=iS;class Fo extends ae{constructor(){super(...arguments),this.methods=new eS(this._client),this.jobs=new yd(this._client),this.checkpoints=new gd(this._client),this.alpha=new md(this._client)}}Fo.Methods=eS;Fo.Jobs=yd;Fo.Checkpoints=gd;Fo.Alpha=md;class oS extends ae{}class vd extends ae{constructor(){super(...arguments),this.graderModels=new oS(this._client)}}vd.GraderModels=oS;class sS extends ae{createVariation(e,i){return this._client.post("/images/variations",Vi({body:e,...i},this._client))}edit(e,i){return this._client.post("/images/edits",Vi({body:e,...i,stream:e.stream??!1},this._client))}generate(e,i){return this._client.post("/images/generations",{body:e,...i,stream:e.stream??!1})}}class lS extends ae{retrieve(e,i){return this._client.get(X`/models/${e}`,i)}list(e){return this._client.getAPIList("/models",Ta,e)}delete(e,i){return this._client.delete(X`/models/${e}`,i)}}class rS extends ae{create(e,i){return this._client.post("/moderations",{body:e,...i})}}class aS extends ae{accept(e,i,s){return this._client.post(X`/realtime/calls/${e}/accept`,{body:i,...s,headers:ne([{Accept:"*/*"},s==null?void 0:s.headers])})}hangup(e,i){return this._client.post(X`/realtime/calls/${e}/hangup`,{...i,headers:ne([{Accept:"*/*"},i==null?void 0:i.headers])})}refer(e,i,s){return this._client.post(X`/realtime/calls/${e}/refer`,{body:i,...s,headers:ne([{Accept:"*/*"},s==null?void 0:s.headers])})}reject(e,i={},s){return this._client.post(X`/realtime/calls/${e}/reject`,{body:i,...s,headers:ne([{Accept:"*/*"},s==null?void 0:s.headers])})}}class uS extends ae{create(e,i){return this._client.post("/realtime/client_secrets",{body:e,...i})}}class ba extends ae{constructor(){super(...arguments),this.clientSecrets=new uS(this._client),this.calls=new aS(this._client)}}ba.ClientSecrets=uS;ba.Calls=aS;function t1(n,e){return!e||!i1(e)?{...n,output_parsed:null,output:n.output.map(i=>i.type==="function_call"?{...i,parsed_arguments:null}:i.type==="message"?{...i,content:i.content.map(s=>({...s,parsed:null}))}:i)}:cS(n,e)}function cS(n,e){const i=n.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:l1(e,r)};if(r.type==="message"){const u=r.content.map(d=>d.type==="output_text"?{...d,parsed:n1(e,d.text)}:d);return{...r,content:u}}return r}),s=Object.assign({},n,{output:i});return Object.getOwnPropertyDescriptor(n,"output_text")||Bf(s),Object.defineProperty(s,"output_parsed",{enumerable:!0,get(){for(const r of s.output)if(r.type==="message"){for(const u of r.content)if(u.type==="output_text"&&u.parsed!==null)return u.parsed}return null}}),s}function n1(n,e){var i,s,r,u;return((s=(i=n.text)==null?void 0:i.format)==null?void 0:s.type)!=="json_schema"?null:"$parseRaw"in((r=n.text)==null?void 0:r.format)?((u=n.text)==null?void 0:u.format).$parseRaw(e):JSON.parse(e)}function i1(n){var e;return!!id((e=n.text)==null?void 0:e.format)}function o1(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function s1(n,e){return n.find(i=>i.type==="function"&&i.name===e)}function l1(n,e){const i=s1(n.tools??[],e.name);return{...e,...e,parsed_arguments:o1(i)?i.$parseRaw(e.arguments):i!=null&&i.strict?JSON.parse(e.arguments):null}}function Bf(n){const e=[];for(const i of n.output)if(i.type==="message")for(const s of i.content)s.type==="output_text"&&e.push(s.text);n.output_text=e.join("")}var Mo,Pr,mi,kr,kv,Hv,qv,Bv;class _d extends sd{constructor(e){super(),Mo.add(this),Pr.set(this,void 0),mi.set(this,void 0),kr.set(this,void 0),he(this,Pr,e)}static createResponse(e,i,s){const r=new _d(i);return r._run(()=>r._createOrRetrieveResponse(e,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,i,s){var p;const r=s==null?void 0:s.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),L(this,Mo,"m",kv).call(this);let u,d=null;"response_id"in i?(u=await e.responses.retrieve(i.response_id,{stream:!0},{...s,signal:this.controller.signal,stream:!0}),d=i.starting_after??null):u=await e.responses.create({...i,stream:!0},{...s,signal:this.controller.signal}),this._connected();for await(const y of u)L(this,Mo,"m",Hv).call(this,y,d);if((p=u.controller.signal)!=null&&p.aborted)throw new tn;return L(this,Mo,"m",qv).call(this)}[(Pr=new WeakMap,mi=new WeakMap,kr=new WeakMap,Mo=new WeakSet,kv=function(){this.ended||he(this,mi,void 0)},Hv=function(i,s){if(this.ended)return;const r=(d,p)=>{(s==null||p.sequence_number>s)&&this._emit(d,p)},u=L(this,Mo,"m",Bv).call(this,i);switch(r("event",i),i.type){case"response.output_text.delta":{const d=u.output[i.output_index];if(!d)throw new ce(`missing output at index ${i.output_index}`);if(d.type==="message"){const p=d.content[i.content_index];if(!p)throw new ce(`missing content at index ${i.content_index}`);if(p.type!=="output_text")throw new ce(`expected content to be 'output_text', got ${p.type}`);r("response.output_text.delta",{...i,snapshot:p.text})}break}case"response.function_call_arguments.delta":{const d=u.output[i.output_index];if(!d)throw new ce(`missing output at index ${i.output_index}`);d.type==="function_call"&&r("response.function_call_arguments.delta",{...i,snapshot:d.arguments});break}default:r(i.type,i);break}},qv=function(){if(this.ended)throw new ce("stream has ended, this shouldn't happen");const i=L(this,mi,"f");if(!i)throw new ce("request ended without sending any events");he(this,mi,void 0);const s=r1(i,L(this,Pr,"f"));return he(this,kr,s),s},Bv=function(i){var r;let s=L(this,mi,"f");if(!s){if(i.type!=="response.created")throw new ce(`When snapshot hasn't been set yet, expected 'response.created' event, got ${i.type}`);return s=he(this,mi,i.response),s}switch(i.type){case"response.output_item.added":{s.output.push(i.item);break}case"response.content_part.added":{const u=s.output[i.output_index];if(!u)throw new ce(`missing output at index ${i.output_index}`);const d=u.type,p=i.part;d==="message"&&p.type!=="reasoning_text"?u.content.push(p):d==="reasoning"&&p.type==="reasoning_text"&&(u.content||(u.content=[]),u.content.push(p));break}case"response.output_text.delta":{const u=s.output[i.output_index];if(!u)throw new ce(`missing output at index ${i.output_index}`);if(u.type==="message"){const d=u.content[i.content_index];if(!d)throw new ce(`missing content at index ${i.content_index}`);if(d.type!=="output_text")throw new ce(`expected content to be 'output_text', got ${d.type}`);d.text+=i.delta}break}case"response.function_call_arguments.delta":{const u=s.output[i.output_index];if(!u)throw new ce(`missing output at index ${i.output_index}`);u.type==="function_call"&&(u.arguments+=i.delta);break}case"response.reasoning_text.delta":{const u=s.output[i.output_index];if(!u)throw new ce(`missing output at index ${i.output_index}`);if(u.type==="reasoning"){const d=(r=u.content)==null?void 0:r[i.content_index];if(!d)throw new ce(`missing content at index ${i.content_index}`);if(d.type!=="reasoning_text")throw new ce(`expected content to be 'reasoning_text', got ${d.type}`);d.text+=i.delta}break}case"response.completed":{he(this,mi,i.response);break}}return s},Symbol.asyncIterator)](){const e=[],i=[];let s=!1;return this.on("event",r=>{const u=i.shift();u?u.resolve(r):e.push(r)}),this.on("end",()=>{s=!0;for(const r of i)r.resolve(void 0);i.length=0}),this.on("abort",r=>{s=!0;for(const u of i)u.reject(r);i.length=0}),this.on("error",r=>{s=!0;for(const u of i)u.reject(r);i.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((u,d)=>i.push({resolve:u,reject:d})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=L(this,kr,"f");if(!e)throw new ce("stream ended without producing a ChatCompletion");return e}}function r1(n,e){return t1(n,e)}class fS extends ae{list(e,i={},s){return this._client.getAPIList(X`/responses/${e}/input_items`,it,{query:i,...s})}}class dS extends ae{count(e={},i){return this._client.post("/responses/input_tokens",{body:e,...i})}}class wa extends ae{constructor(){super(...arguments),this.inputItems=new fS(this._client),this.inputTokens=new dS(this._client)}create(e,i){return this._client.post("/responses",{body:e,...i,stream:e.stream??!1})._thenUnwrap(s=>("object"in s&&s.object==="response"&&Bf(s),s))}retrieve(e,i={},s){return this._client.get(X`/responses/${e}`,{query:i,...s,stream:(i==null?void 0:i.stream)??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Bf(r),r))}delete(e,i){return this._client.delete(X`/responses/${e}`,{...i,headers:ne([{Accept:"*/*"},i==null?void 0:i.headers])})}parse(e,i){return this._client.responses.create(e,i)._thenUnwrap(s=>cS(s,e))}stream(e,i){return _d.createResponse(this._client,e,i)}cancel(e,i){return this._client.post(X`/responses/${e}/cancel`,i)}compact(e,i){return this._client.post("/responses/compact",{body:e,...i})}}wa.InputItems=fS;wa.InputTokens=dS;class hS extends ae{create(e,i,s){return this._client.post(X`/uploads/${e}/parts`,Vi({body:i,...s},this._client))}}class Sd extends ae{constructor(){super(...arguments),this.parts=new hS(this._client)}create(e,i){return this._client.post("/uploads",{body:e,...i})}cancel(e,i){return this._client.post(X`/uploads/${e}/cancel`,i)}complete(e,i,s){return this._client.post(X`/uploads/${e}/complete`,{body:i,...s})}}Sd.Parts=hS;const a1=async n=>{const e=await Promise.allSettled(n),i=e.filter(r=>r.status==="rejected");if(i.length){for(const r of i)console.error(r.reason);throw new Error(`${i.length} promise(s) failed - see the above errors`)}const s=[];for(const r of e)r.status==="fulfilled"&&s.push(r.value);return s};class pS extends ae{create(e,i,s){return this._client.post(X`/vector_stores/${e}/file_batches`,{body:i,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,i,s){const{vector_store_id:r}=i;return this._client.get(X`/vector_stores/${r}/file_batches/${e}`,{...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}cancel(e,i,s){const{vector_store_id:r}=i;return this._client.post(X`/vector_stores/${r}/file_batches/${e}/cancel`,{...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,i,s){const r=await this.create(e,i);return await this.poll(e,r.id,s)}listFiles(e,i,s){const{vector_store_id:r,...u}=i;return this._client.getAPIList(X`/vector_stores/${r}/file_batches/${e}/files`,it,{query:u,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async poll(e,i,s){var u;const r=ne([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((u=s==null?void 0:s.pollIntervalMs)==null?void 0:u.toString())??void 0}]);for(;;){const{data:d,response:p}=await this.retrieve(i,{vector_store_id:e},{...s,headers:r}).withResponse();switch(d.status){case"in_progress":let y=5e3;if(s!=null&&s.pollIntervalMs)y=s.pollIntervalMs;else{const m=p.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await sl(y);break;case"failed":case"cancelled":case"completed":return d}}}async uploadAndPoll(e,{files:i,fileIds:s=[]},r){if(i==null||i.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const u=(r==null?void 0:r.maxConcurrency)??5,d=Math.min(u,i.length),p=this._client,y=i.values(),m=[...s];async function v(T){for(let A of T){const b=await p.files.create({file:A,purpose:"assistants"},r);m.push(b.id)}}const _=Array(d).fill(y).map(v);return await a1(_),await this.createAndPoll(e,{file_ids:m})}}class mS extends ae{create(e,i,s){return this._client.post(X`/vector_stores/${e}/files`,{body:i,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}retrieve(e,i,s){const{vector_store_id:r}=i;return this._client.get(X`/vector_stores/${r}/files/${e}`,{...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}update(e,i,s){const{vector_store_id:r,...u}=i;return this._client.post(X`/vector_stores/${r}/files/${e}`,{body:u,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e,i={},s){return this._client.getAPIList(X`/vector_stores/${e}/files`,it,{query:i,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}delete(e,i,s){const{vector_store_id:r}=i;return this._client.delete(X`/vector_stores/${r}/files/${e}`,{...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}async createAndPoll(e,i,s){const r=await this.create(e,i,s);return await this.poll(e,r.id,s)}async poll(e,i,s){var u;const r=ne([s==null?void 0:s.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((u=s==null?void 0:s.pollIntervalMs)==null?void 0:u.toString())??void 0}]);for(;;){const d=await this.retrieve(i,{vector_store_id:e},{...s,headers:r}).withResponse(),p=d.data;switch(p.status){case"in_progress":let y=5e3;if(s!=null&&s.pollIntervalMs)y=s.pollIntervalMs;else{const m=d.response.headers.get("openai-poll-after-ms");if(m){const v=parseInt(m);isNaN(v)||(y=v)}}await sl(y);break;case"failed":case"completed":return p}}}async upload(e,i,s){const r=await this._client.files.create({file:i,purpose:"assistants"},s);return this.create(e,{file_id:r.id},s)}async uploadAndPoll(e,i,s){const r=await this.upload(e,i,s);return await this.poll(e,r.id,s)}content(e,i,s){const{vector_store_id:r}=i;return this._client.getAPIList(X`/vector_stores/${r}/files/${e}/content`,Ta,{...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}class xa extends ae{constructor(){super(...arguments),this.files=new mS(this._client),this.fileBatches=new pS(this._client)}create(e,i){return this._client.post("/vector_stores",{body:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}retrieve(e,i){return this._client.get(X`/vector_stores/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}update(e,i,s){return this._client.post(X`/vector_stores/${e}`,{body:i,...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}list(e={},i){return this._client.getAPIList("/vector_stores",it,{query:e,...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}delete(e,i){return this._client.delete(X`/vector_stores/${e}`,{...i,headers:ne([{"OpenAI-Beta":"assistants=v2"},i==null?void 0:i.headers])})}search(e,i,s){return this._client.getAPIList(X`/vector_stores/${e}/search`,Ta,{body:i,method:"post",...s,headers:ne([{"OpenAI-Beta":"assistants=v2"},s==null?void 0:s.headers])})}}xa.Files=mS;xa.FileBatches=pS;class gS extends ae{create(e,i){return this._client.post("/videos",wv({body:e,...i},this._client))}retrieve(e,i){return this._client.get(X`/videos/${e}`,i)}list(e={},i){return this._client.getAPIList("/videos",oa,{query:e,...i})}delete(e,i){return this._client.delete(X`/videos/${e}`,i)}downloadContent(e,i={},s){return this._client.get(X`/videos/${e}/content`,{query:i,...s,headers:ne([{Accept:"application/binary"},s==null?void 0:s.headers]),__binaryResponse:!0})}remix(e,i,s){return this._client.post(X`/videos/${e}/remix`,wv({body:i,...s},this._client))}}var Oo,yS,Kr;class vS extends ae{constructor(){super(...arguments),Oo.add(this)}async unwrap(e,i,s=this._client.webhookSecret,r=300){return await this.verifySignature(e,i,s,r),JSON.parse(e)}async verifySignature(e,i,s=this._client.webhookSecret,r=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");L(this,Oo,"m",yS).call(this,s);const u=ne([i]).values,d=L(this,Oo,"m",Kr).call(this,u,"webhook-signature"),p=L(this,Oo,"m",Kr).call(this,u,"webhook-timestamp"),y=L(this,Oo,"m",Kr).call(this,u,"webhook-id"),m=parseInt(p,10);if(isNaN(m))throw new $s("Invalid webhook timestamp format");const v=Math.floor(Date.now()/1e3);if(v-m>r)throw new $s("Webhook timestamp is too old");if(m>v+r)throw new $s("Webhook timestamp is too new");const _=d.split(" ").map(I=>I.startsWith("v1,")?I.substring(3):I),T=s.startsWith("whsec_")?Buffer.from(s.replace("whsec_",""),"base64"):Buffer.from(s,"utf-8"),A=y?`${y}.${p}.${e}`:`${p}.${e}`,b=await crypto.subtle.importKey("raw",T,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const I of _)try{const x=Buffer.from(I,"base64");if(await crypto.subtle.verify("HMAC",b,x,new TextEncoder().encode(A)))return}catch{continue}throw new $s("The given webhook signature does not match the expected signature")}}Oo=new WeakSet,yS=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Kr=function(e,i){if(!e)throw new Error("Headers are required");const s=e.get(i);if(s==null)throw new Error(`Missing required header: ${i}`);return s};var Vf,Td,Xr,_S;class Te{constructor({baseURL:e=Io("OPENAI_BASE_URL"),apiKey:i=Io("OPENAI_API_KEY"),organization:s=Io("OPENAI_ORG_ID")??null,project:r=Io("OPENAI_PROJECT_ID")??null,webhookSecret:u=Io("OPENAI_WEBHOOK_SECRET")??null,...d}={}){if(Vf.add(this),Xr.set(this,void 0),this.completions=new K_(this),this.chat=new ad(this),this.embeddings=new Z_(this),this.files=new j_(this),this.images=new sS(this),this.audio=new rl(this),this.moderations=new rS(this),this.models=new lS(this),this.fineTuning=new Fo(this),this.graders=new vd(this),this.vectorStores=new xa(this),this.webhooks=new vS(this),this.beta=new zo(this),this.batches=new q_(this),this.uploads=new Sd(this),this.responses=new wa(this),this.realtime=new ba(this),this.conversations=new dd(this),this.evals=new pd(this),this.containers=new fd(this),this.videos=new gS(this),i===void 0)throw new ce("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const p={apiKey:i,organization:s,project:r,webhookSecret:u,...d,baseURL:e||"https://api.openai.com/v1"};if(!p.dangerouslyAllowBrowser&&cM())throw new ce(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=p.baseURL,this.timeout=p.timeout??Td.DEFAULT_TIMEOUT,this.logger=p.logger??console;const y="warn";this.logLevel=y,this.logLevel=Cv(p.logLevel,"ClientOptions.logLevel",this)??Cv(Io("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??y,this.fetchOptions=p.fetchOptions,this.maxRetries=p.maxRetries??2,this.fetch=p.fetch??mM(),he(this,Xr,yM),this._options=p,this.apiKey=typeof i=="string"?i:"Missing Key",this.organization=s,this.project=r,this.webhookSecret=u}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){}async authHeaders(e){return ne([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return AM(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Uo}`}defaultIdempotencyKey(){return`stainless-node-retry-${V0()}`}makeStatusError(e,i,s,r){return vt.generate(e,i,s,r)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let i;try{i=await e()}catch(s){throw s instanceof ce?s:new ce(`Failed to get token from 'apiKey' function: ${s.message}`,{cause:s})}if(typeof i!="string"||!i)throw new ce(`Expected 'apiKey' function argument to return a string but it returned ${i}`);return this.apiKey=i,!0}buildURL(e,i,s){const r=!L(this,Vf,"m",_S).call(this)&&s||this.baseURL,u=sM(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return lM(d)||(i={...d,...i}),typeof i=="object"&&i&&!Array.isArray(i)&&(u.search=this.stringifyQuery(i)),u.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:i,options:s}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,s){return this.request(Promise.resolve(s).then(r=>({method:e,path:i,...r})))}request(e,i=null){return new Sa(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,s){var B,V;const r=await e,u=r.maxRetries??this.maxRetries;i==null&&(i=u),await this.prepareOptions(r);const{req:d,url:p,timeout:y}=await this.buildRequest(r,{retryCount:u-i});await this.prepareRequest(d,{url:p,options:r});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=s===void 0?"":`, retryOf: ${s}`,_=Date.now();if(gt(this).debug(`[${m}] sending request`,ki({retryOfRequestLogID:s,method:r.method,url:p,options:r,headers:d.headers})),(B=r.signal)!=null&&B.aborted)throw new tn;const T=new AbortController,A=await this.fetchWithTimeout(p,d,y,T).catch(If),b=Date.now();if(A instanceof globalThis.Error){const H=`retrying, ${i} attempts remaining`;if((V=r.signal)!=null&&V.aborted)throw new tn;const G=Nf(A)||/timed? ?out/i.test(String(A)+("cause"in A?String(A.cause):""));if(i)return gt(this).info(`[${m}] connection ${G?"timed out":"failed"} - ${H}`),gt(this).debug(`[${m}] connection ${G?"timed out":"failed"} (${H})`,ki({retryOfRequestLogID:s,url:p,durationMs:b-_,message:A.message})),this.retryRequest(r,i,s??m);throw gt(this).info(`[${m}] connection ${G?"timed out":"failed"} - error; no more retries left`),gt(this).debug(`[${m}] connection ${G?"timed out":"failed"} (error; no more retries left)`,ki({retryOfRequestLogID:s,url:p,durationMs:b-_,message:A.message})),G?new jf:new va({cause:A})}const I=[...A.headers.entries()].filter(([H])=>H==="x-request-id").map(([H,G])=>", "+H+": "+JSON.stringify(G)).join(""),x=`[${m}${v}${I}] ${d.method} ${p} ${A.ok?"succeeded":"failed"} with status ${A.status} in ${b-_}ms`;if(!A.ok){const H=await this.shouldRetry(A);if(i&&H){const Z=`retrying, ${i} attempts remaining`;return await gM(A.body),gt(this).info(`${x} - ${Z}`),gt(this).debug(`[${m}] response error (${Z})`,ki({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,durationMs:b-_})),this.retryRequest(r,i,s??m,A.headers)}const G=H?"error; no more retries left":"error; not retryable";gt(this).info(`${x} - ${G}`);const P=await A.text().catch(Z=>If(Z).message),W=uM(P),J=W?void 0:P;throw gt(this).debug(`[${m}] response error (${G})`,ki({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,message:J,durationMs:Date.now()-_})),this.makeStatusError(A.status,W,J,A.headers)}return gt(this).info(x),gt(this).debug(`[${m}] response start`,ki({retryOfRequestLogID:s,url:A.url,status:A.status,headers:A.headers,durationMs:b-_})),{response:A,options:r,controller:T,requestLogID:m,retryOfRequestLogID:s,startTime:_}}getAPIList(e,i,s){return this.requestAPIList(i,{method:"get",path:e,...s})}requestAPIList(e,i){const s=this.makeRequest(i,null,void 0);return new DM(this,s,e)}async fetchWithTimeout(e,i,s,r){const{signal:u,method:d,...p}=i||{};u&&u.addEventListener("abort",()=>r.abort());const y=setTimeout(()=>r.abort(),s),m=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,v={signal:r.signal,...m?{duplex:"half"}:{},method:"GET",...p};d&&(v.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(y)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,s,r){let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const y=parseFloat(d);Number.isNaN(y)||(u=y)}const p=r==null?void 0:r.get("retry-after");if(p&&!u){const y=parseFloat(p);Number.isNaN(y)?u=Date.parse(p)-Date.now():u=y*1e3}if(!(u&&0<=u&&u<60*1e3)){const y=e.maxRetries??this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(i,y)}return await sl(u),this.makeRequest(e,i-1,s)}calculateDefaultRetryTimeoutMillis(e,i){const u=i-e,d=Math.min(.5*Math.pow(2,u),8),p=1-Math.random()*.25;return d*p*1e3}async buildRequest(e,{retryCount:i=0}={}){const s={...e},{method:r,path:u,query:d,defaultBaseURL:p}=s,y=this.buildURL(u,d,p);"timeout"in s&&aM("timeout",s.timeout),s.timeout=s.timeout??this.timeout;const{bodyHeaders:m,body:v}=this.buildBody({options:s}),_=await this.buildHeaders({options:e,method:r,bodyHeaders:m,retryCount:i});return{req:{method:r,headers:_,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"},...v&&{body:v},...this.fetchOptions??{},...s.fetchOptions??{}},url:y,timeout:s.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:s,retryCount:r}){let u={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);const d=ne([u,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...pM(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,s,e.headers]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=ne([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:t_(e)}:L(this,Xr,"f").call(this,{body:e,headers:s})}}Td=Te,Xr=new WeakMap,Vf=new WeakSet,_S=function(){return this.baseURL!=="https://api.openai.com/v1"};Te.OpenAI=Td;Te.DEFAULT_TIMEOUT=6e5;Te.OpenAIError=ce;Te.APIError=vt;Te.APIConnectionError=va;Te.APIConnectionTimeoutError=jf;Te.APIUserAbortError=tn;Te.NotFoundError=J0;Te.ConflictError=Y0;Te.RateLimitError=X0;Te.BadRequestError=z0;Te.AuthenticationError=F0;Te.InternalServerError=Q0;Te.PermissionDeniedError=$0;Te.UnprocessableEntityError=K0;Te.InvalidWebhookSignatureError=$s;Te.toFile=PM;Te.Completions=K_;Te.Chat=ad;Te.Embeddings=Z_;Te.Files=j_;Te.Images=sS;Te.Audio=rl;Te.Moderations=rS;Te.Models=lS;Te.FineTuning=Fo;Te.Graders=vd;Te.VectorStores=xa;Te.Webhooks=vS;Te.Beta=zo;Te.Batches=q_;Te.Uploads=Sd;Te.Responses=wa;Te.Realtime=ba;Te.Conversations=dd;Te.Evals=pd;Te.Containers=fd;Te.Videos=gS;const Vv='You should always follow the instructions and output a valid JSON object.\nThe structure of the JSON object you can found in the instructions.\n\nAnd you should always end the block with a "```" to indicate the end of the JSON object.\n\nIMPORTANT: You must output exactly one top-level JSON object inside a single fenced code block that starts with ```json and ends with ```. You must only output one such fenced code block per response, without any additional code blocks or text outside it.\n\n<instructions>\n',zv=`Output:
</instructions>

`;function u1(n){if(!n||n.trim().length===0)throw new Error("Empty response from AI");const e=/```(?:json\s*)?([\s\S]*?)```/,i=n.match(e);if(i&&i[1]){const p=i[1].trim();if(p.startsWith("{")||p.startsWith("["))return p}const s=n.trim();if(s.startsWith("{")||s.startsWith("["))return s;const r=s.indexOf("{"),u=s.indexOf("[");let d=-1;if(r!==-1&&u!==-1?d=Math.min(r,u):r!==-1?d=r:u!==-1&&(d=u),d!==-1){let p=0,y=0,m=!1,v=!1;for(let _=d;_<s.length;_++){const T=s[_];if(v){v=!1;continue}if(T==="\\"){v=!0;continue}if(T==='"'){m=!m;continue}if(!m&&(T==="{"&&p++,T==="}"&&p--,T==="["&&y++,T==="]"&&y--,p===0&&y===0&&_>d))return s.substring(d,_+1)}return s.substring(d)}throw new Error(`Could not extract valid JSON from response. Response preview: ${n.substring(0,200)}...`)}function c1(n){try{return JSON.parse(n)}catch(e){let i=n.replace(/^\uFEFF/,"").replace(/,(\s*[}\]])/g,"$1").replace(/'/g,'"').replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*/g,"").replace(/([{,]\s*)([a-zA-Z_][a-zA-Z0-9_]*)(\s*:)/g,'$1"$2"$3');try{return JSON.parse(i)}catch(s){throw new Error(`Failed to parse JSON even after repair attempts. Original error: ${e}. Repaired error: ${s}`)}}}function f1(n){const e=u1(n);return c1(e)}function d1(n){var e,i;if(n.provider==="openai"){if(!((e=n.openai)!=null&&e.apiKey))throw new Error("OpenAI API Key is missing in settings.")}else if(n.provider==="gemini"&&!((i=n.gemini)!=null&&i.apiKey))throw new Error("Gemini API Key is missing (process.env.API_KEY).")}function SS(n,e=0){var s,r;const i="  ".repeat(e);if(n.type===Se.OBJECT&&n.properties){let u=`{
`;for(const[d,p]of Object.entries(n.properties)){const y=p,m=(s=n.required)!=null&&s.includes(d)?" (required)":" (optional)",v=y.enum?` Enum: ${y.enum.join(", ")}`:"";u+=`${i}  "${d}": ${y.type}${m}${v},
`}return u+=`${i}}`,u}return n.type===Se.ARRAY&&n.items?`[
${SS(n.items,e+1)}
${i}]`:((r=n.type)==null?void 0:r.toLowerCase())||"object"}const h1=async(n,e)=>{var i;if(d1(n),n.provider==="gemini"){const s=((i=n.gemini)==null?void 0:i.apiKey)||"",r=new iM({apiKey:s}),u={systemInstruction:e.systemInstruction};u.responseMimeType="application/json",e.jsonSchema&&(u.responseSchema=e.jsonSchema);try{return(await r.models.generateContent({model:"gemini-3-flash-preview",contents:e.prompt,config:u})).text||""}catch(d){throw console.error("Gemini Error:",d),new Error(`Gemini Error: ${d.message}`)}}if(n.provider==="openai"&&n.openai){const s=new Te({apiKey:n.openai.apiKey,baseURL:n.openai.baseUrl||"https://api.openai.com/v1",dangerouslyAllowBrowser:!0}),r=e.jsonSchema?`

Expected JSON Schema Structure:
${SS(e.jsonSchema)}

Strictly follow the structure above.`:`

Output must be a valid JSON object.`,u=e.systemInstruction?`${Vv}${e.systemInstruction}${r}
</instructions>
${zv}`:`${Vv}${r}
</instructions>
${zv}`,d=[];u&&d.push({role:"system",content:u}),d.push({role:"user",content:e.prompt});try{const p={messages:d,model:n.openai.model||"gpt-4-turbo-preview"},y=await s.chat.completions.create(p);if(e.jsonMode){const m=f1(y.choices[0].message.content||"");return JSON.stringify(m)}}catch(p){throw console.error("OpenAI Error:",p),new Error(`OpenAI Error: ${p.message}`)}}throw new Error("Invalid Provider Configuration")},p1=`
You are the **Core Logic Engine** and **Narrative Director** for "Chronicles of the Persona".
Your role is to execute the game loop:
1. **Analyze Input**: Evaluate the player's choice against the current World State, Character Stats, and **Active Rules**.
2. **Apply Rules**: Check if any active rules (like "Murphy's Law" or "Equivalent Exchange") are triggered. 
   - If a rule triggers, you MUST apply its consequence (e.g., increase Stress, remove a resource).
   - You can also decide to ADD a new rule (e.g., "Wanted by Guards") or REMOVE an old one.
3. **Generate Output**: 
   - Write the narrative (Simplified Chinese).
   - Calculate numeric changes to stats (Stress, Credibility, Connections).
   - **IMPORTANT**: Report which rules were triggered this turn via the "triggeredRules" field. Each triggered rule must include its ID, title, and a brief reason explaining WHY it triggered based on the player's action.
   - Determine if the game ends (Victory or Death).

**Current Reality Mapping (Stats):**
- **Credibility ()**: < 3 means NPCs are hostile. 0 is Game Over (Exiled).
- **Stress ()**: > 7 means hallucinations/bad decisions. 10 is Game Over (Insanity).
- **Connections ()**: Currency for help. 0 means isolation.

**Output Constraints:**
- Language: **Simplified Chinese ()** ONLY.
- Style: Dark Fantasy, Tarot aesthetics, Gritty.
- Structure: JSON matching the schema.
`,m1={type:Se.OBJECT,properties:{text:{type:Se.STRING,description:"The narrative segment."},statUpdates:{type:Se.OBJECT,properties:{credibility:{type:Se.INTEGER,description:"Change amount, e.g., -1"},stress:{type:Se.INTEGER,description:"Change amount, e.g., +2"},connections:{type:Se.INTEGER,description:"Change amount, e.g., -1"}}},ruleUpdates:{type:Se.OBJECT,properties:{add:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{id:{type:Se.STRING},title:{type:Se.STRING},type:{type:Se.STRING,enum:["CONSTRAINT","BONUS","RISK","REALITY"]},description:{type:Se.STRING},active:{type:Se.BOOLEAN}}}},removeIds:{type:Se.ARRAY,items:{type:Se.STRING}}}},isGameOver:{type:Se.BOOLEAN},gameSummary:{type:Se.STRING,description:"Only if isGameOver is true."},triggeredRules:{type:Se.ARRAY,description:"List of rules that triggered this turn with reasons.",items:{type:Se.OBJECT,properties:{ruleId:{type:Se.STRING,description:"The ID of the triggered rule"},ruleTitle:{type:Se.STRING,description:"The title of the triggered rule"},reason:{type:Se.STRING,description:"Brief explanation of WHY this rule triggered based on the player action"}}}},choices:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{id:{type:Se.STRING},text:{type:Se.STRING},consequence:{type:Se.STRING},cost:{type:Se.STRING},risk:{type:Se.STRING}}}}}},g1=async(n,e,i,s,r,u,d,p)=>{var _,T;const y=u>=d,m=`
    [GAME STATE]
    Turn: ${u} / ${d}
    Character: ${n.name} (${n.title}) - Weakness: ${n.weakness}
    Current Stats: Credibility=${i.credibility}, Stress=${i.stress}, Connections=${i.connections}
    
    [ACTIVE RULES REGISTRY]
    ${e.map(A=>`(ID: ${A.id}) ${A.title}: ${A.description}`).join(`
`)}
    
    [NARRATIVE CONTEXT]
    Story So Far: ${r}
    **Player Action**: "${s}"
    
    [DIRECTIVES]
    1. Based on the player action and active rules, determine what happens next.
    2. Did any rule trigger? If "Murphy's Law" is active and they tried a complex plan, fail it. You MUST report ALL triggered rules in "triggeredRules" with a brief reason for each.
    3. Update Stats: Did they get hurt? (Stress +). Did they offend someone? (Credibility -).
    4. **Rule Evolution**: If the story shifts significantly, you may Add a Rule (e.g., "Injury") or Remove one.
    5. ${y?"This is the CLIMAX. Ignore choices generation. Set 'isGameOver': true and provide a 'gameSummary'.":"Generate 3 distinct choices for the next step."}
  `,v=p||{provider:"gemini",gemini:{apiKey:""}};try{const A=await h1(v,{prompt:m,systemInstruction:p1,jsonSchema:m1,jsonMode:!0}),b=JSON.parse(A);return{storyNode:{text:b.text||"...",choices:b.choices||[]},statUpdates:b.statUpdates||{},ruleUpdates:{add:((_=b.ruleUpdates)==null?void 0:_.add)||[],removeIds:((T=b.ruleUpdates)==null?void 0:T.removeIds)||[]},isGameOver:!!b.isGameOver,gameSummary:b.gameSummary,triggeredRules:b.triggeredRules||[]}}catch(A){return console.error("Gemini Engine Error",A),{storyNode:{text:"AI ",choices:[{id:"retry",text:"",consequence:""}]},statUpdates:{},ruleUpdates:{},isGameOver:!1}}},y1=()=>{const n=hA(),e=pA(),i=mA(),s=gA(),r=yA(),u=vA(),d=_A(),p=SA(),y=TA(),m=EA(),v=AA(),_=$v(),T=Jv(),A=Yv(),b=Kv(),I=bA(),x=wA(),B=xA(),V=RA(),H=NA(),G=IA(),P=MA(),W=DA(),J=UA(),fe=LA(),Z=OA(),ie=GA(),oe=Qr.useRef(null);Qr.useEffect(()=>{oe.current&&(oe.current.scrollTop=oe.current.scrollHeight)},[s,r,m]);const Ee=ge=>{x(ge)},Ge=()=>{e&&ie(e)},Oe=async(ge,Ne)=>{if(!e)return;J(!0);const N=s.map(Ke=>Ke.text).join(" ").slice(-1e3),Y={provider:_,gemini:T?{apiKey:T}:void 0,openai:_==="openai"?A:void 0},Q=await g1(e,i.filter(Ke=>Ke.active),u,Ne,N,d,p,Y);J(!1);const q={...u};Q.statUpdates.credibility&&(q.credibility+=Q.statUpdates.credibility),Q.statUpdates.stress&&(q.stress+=Q.statUpdates.stress),Q.statUpdates.connections&&(q.connections+=Q.statUpdates.connections),q.credibility=Math.max(0,Math.min(10,q.credibility)),q.stress=Math.max(0,Math.min(10,q.stress)),q.connections=Math.max(0,Math.min(10,q.connections));let re=[...i];Q.ruleUpdates.removeIds&&(re=re.filter(Ke=>{var $e;return!(($e=Q.ruleUpdates.removeIds)!=null&&$e.includes(Ke.id))})),Q.ruleUpdates.add&&(re=[...re,...Q.ruleUpdates.add]);let ve=Q.isGameOver,be=Q.gameSummary||"";q.stress>=10&&(ve=!0,be=be||""),q.credibility<=0&&(ve=!0,be=be||""),G(q),B(re),H(Q.storyNode),V(Ke=>[...Ke,Q.storyNode]),P(d+1),fe(Q.triggeredRules||[]),ve&&(I(gi.GAME_OVER),W(be))},Ye=()=>{Z()},z=()=>C.jsxs("div",{className:"h-screen w-full flex flex-col items-center bg-velvet-red relative overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle,transparent_20%,#000000_100%)] opacity-80 fixed"}),C.jsx("button",{onClick:()=>b(!0),className:"fixed top-6 right-6 z-30 p-4 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:C.jsx("i",{className:"fa-solid fa-cog text-xl group-hover:rotate-90 transition-transform duration-300"})}),C.jsxs("div",{className:"z-10 text-center mb-6 mt-6 shrink-0 animate-float",children:[C.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-gold-flow mb-2 drop-shadow-lg font-display",children:""}),C.jsx("p",{className:"text-paper text-base font-serif italic opacity-80 max-w-2xl mx-auto border-b border-gold pb-3",children:'""'})]}),C.jsx("div",{className:"z-20 flex flex-col items-center gap-3 mb-4 shrink-0",children:C.jsxs("button",{disabled:!e,onClick:Ge,className:`
                px-10 py-3 text-lg font-bold font-display tracking-widest uppercase transition-all duration-500
                border-2 border-gold relative overflow-hidden group shadow-2xl
                ${e?"bg-velvet-red text-gold shadow-[0_0_30px_#D4AF37] hover:scale-110":"bg-gray-900 text-gray-600 cursor-not-allowed border-gray-700"}
              `,children:[C.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e?` ${e.name}`:"",C.jsx("i",{className:"fa-solid fa-scroll"})]}),C.jsx("div",{className:"absolute inset-0 bg-gold transform -translate-x-full group-hover:translate-x-0 transition-transform duration-500 opacity-20"})]})}),C.jsx("div",{className:"z-10 flex-1 overflow-y-auto w-full px-4 pb-6",children:C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-[1600px] mx-auto",children:tA.map(ge=>C.jsx("div",{className:"flex justify-center",children:C.jsx(Lg,{character:ge,isSelected:(e==null?void 0:e.id)===ge.id,onSelect:Ee})},ge.id))})})]}),j=()=>C.jsxs("div",{className:"h-screen w-full bg-black flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-20"}),C.jsx("button",{onClick:()=>b(!0),className:"fixed top-6 right-6 z-30 p-4 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:C.jsx("i",{className:"fa-solid fa-cog text-xl group-hover:rotate-90 transition-transform duration-300"})}),C.jsxs("div",{className:"z-10 max-w-2xl text-center border-[6px] border-double border-gold p-12 bg-[#1a0f0f] shadow-[0_0_100px_rgba(139,0,0,0.5)] transform animate-fade-in-up",children:[C.jsx("h1",{className:"text-6xl font-display text-velvet-red mb-6 uppercase tracking-widest",children:d>=p?"":""}),C.jsx("div",{className:"w-full h-1 bg-gold mb-8"}),C.jsxs("div",{className:"mb-8 font-serif text-2xl text-paper italic leading-relaxed",children:['"',y||"...",'"']}),C.jsxs("div",{className:"grid grid-cols-3 gap-8 mb-12 opacity-80",children:[C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-gold font-display text-3xl",children:u.credibility})]}),C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-gold font-display text-3xl",children:10-u.stress})]}),C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-stone-gray text-xs uppercase tracking-widest",children:""}),C.jsx("span",{className:"text-gold font-display text-3xl",children:d})]})]}),C.jsx("button",{onClick:Ye,className:"px-8 py-3 bg-gold text-black font-bold hover:bg-white transition-colors duration-300 font-display uppercase tracking-widest",children:""})]})]}),le=()=>{if(!r)return null;const ge=q=>["I","II","III","IV","V","VI","VII","VIII","IX","X"][q-1]||q,Ne=i.filter(q=>q.type==="REALITY"&&q.active),Y=(()=>{const q=[];return u.credibility<3&&q.push({stat:"credibility",message:"NPC ",critical:!0}),u.stress>7&&q.push({stat:"stress",message:"",critical:!0}),u.connections<=1&&q.push({stat:"connections",message:"",critical:u.connections===0}),q})(),Q=new Map;return v.forEach(q=>Q.set(q.ruleId,q)),C.jsxs("div",{className:"h-screen w-full bg-[#1a0505] flex flex-col md:flex-row text-paper overflow-hidden relative",children:[C.jsx("button",{onClick:()=>b(!0),className:"fixed top-6 right-6 z-30 p-3 bg-brown-800/80 hover:bg-brown-700 border-2 border-gold/50 hover:border-gold text-gold rounded-full shadow-lg hover:shadow-[0_0_20px_rgba(212,175,55,0.4)] transition-all group",title:"AI ",children:C.jsx("i",{className:"fa-solid fa-cog text-lg group-hover:rotate-90 transition-transform duration-300"})}),C.jsx("div",{className:"hidden md:flex flex-col w-1/4 bg-[#0f0303] border-r-4 border-brown-600 relative shadow-2xl z-10 h-screen overflow-y-auto scrollbar-hide",children:C.jsxs("div",{className:"p-6",children:[C.jsx("h2",{className:"text-gold font-display text-xl mb-4 border-b border-brown pb-2 text-center",children:""}),e&&C.jsx("div",{className:"flex justify-center transform scale-[0.6] origin-top mb-[-120px]",children:C.jsx(Lg,{character:e,isSelected:!0})}),C.jsxs("div",{className:"mt-20",children:[C.jsxs("h2",{className:"text-gold font-display text-lg mb-3 border-b border-brown pb-2 flex items-center gap-2",children:[C.jsx("i",{className:"fa-solid fa-map text-sm"}),""]}),C.jsxs("div",{className:"space-y-4 bg-brown-800/30 p-3 rounded-lg border border-brown",children:[C.jsxs("div",{className:"group",children:[C.jsxs("div",{className:"flex justify-between mb-1 text-xs font-bold text-stone-gray",children:[C.jsxs("span",{children:[C.jsx("i",{className:"fa-solid fa-scale-balanced mr-1.5"}),""]}),C.jsxs("span",{className:u.credibility<3?"text-red-400 animate-pulse":"",children:[u.credibility,"/10"]})]}),C.jsxs("div",{className:"w-full bg-[#2c1810] h-2.5 rounded-full overflow-hidden border border-brown-600 relative",children:[C.jsx("div",{className:"bg-forest-green h-full transition-all duration-1000",style:{width:`${u.credibility*10}%`}}),C.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500/60",style:{left:"30%"},title:": 3"})]}),u.credibility<3&&C.jsxs("p",{className:"text-[10px] text-red-400 mt-0.5 italic",children:[C.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-1"}),"NPC "]})]}),C.jsxs("div",{className:"group",children:[C.jsxs("div",{className:"flex justify-between mb-1 text-xs font-bold text-stone-gray",children:[C.jsxs("span",{children:[C.jsx("i",{className:"fa-solid fa-brain mr-1.5"}),""]}),C.jsxs("span",{className:u.stress>7?"text-red-400 animate-pulse":"",children:[u.stress,"/10"]})]}),C.jsxs("div",{className:"w-full bg-[#2c1810] h-2.5 rounded-full overflow-hidden border border-brown-600 relative",children:[C.jsx("div",{className:`h-full transition-all duration-1000 ${u.stress>7?"bg-red-600 animate-pulse":"bg-orange-700"}`,style:{width:`${u.stress*10}%`}}),C.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500/60",style:{left:"80%"},title:": 8"})]}),u.stress>7&&C.jsxs("p",{className:"text-[10px] text-red-400 mt-0.5 italic",children:[C.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-1"}),""]})]}),C.jsxs("div",{className:"group",children:[C.jsxs("div",{className:"flex justify-between mb-1 text-xs font-bold text-stone-gray",children:[C.jsxs("span",{children:[C.jsx("i",{className:"fa-solid fa-handshake mr-1.5"}),""]}),C.jsxs("span",{className:u.connections<=1?"text-yellow-400":"",children:[u.connections,"/10"]})]}),C.jsx("div",{className:"w-full bg-[#2c1810] h-2.5 rounded-full overflow-hidden border border-brown-600",children:C.jsx("div",{className:"bg-blue-700 h-full transition-all duration-1000",style:{width:`${u.connections*10}%`}})}),u.connections===0&&C.jsxs("p",{className:"text-[10px] text-yellow-400 mt-0.5 italic",children:[C.jsx("i",{className:"fa-solid fa-triangle-exclamation mr-1"}),""]})]})]}),Y.some(q=>q.critical)&&C.jsxs("div",{className:"mt-3 p-2 bg-red-900/40 border border-red-700/60 rounded-lg animate-pulse",children:[C.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[C.jsx("i",{className:"fa-solid fa-skull-crossbones text-red-400 text-xs"}),C.jsx("span",{className:"text-red-400 text-[10px] font-bold uppercase tracking-wider",children:""})]}),Y.filter(q=>q.critical).map((q,re)=>C.jsx("p",{className:"text-[10px] text-red-300 leading-snug",children:q.message},re))]}),Ne.length>0&&C.jsxs("div",{className:"mt-4",children:[C.jsxs("h3",{className:"text-purple-400 text-xs font-bold uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[C.jsx("i",{className:"fa-solid fa-eye text-[10px]"}),""]}),C.jsx("div",{className:"space-y-2",children:Ne.map(q=>{const re=Q.has(q.id);return C.jsxs("div",{className:`p-2 rounded border text-[11px] leading-snug transition-all ${re?"bg-purple-900/40 border-purple-500/60 shadow-[0_0_8px_rgba(168,85,247,0.3)]":"bg-[#1a0a1a]/50 border-purple-900/40"}`,children:[C.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[C.jsx("i",{className:"fa-solid fa-scale-balanced text-purple-400 text-[9px]"}),C.jsx("span",{className:"font-bold text-purple-300",children:q.title}),re&&C.jsx("span",{className:"ml-auto text-[9px] bg-purple-600 text-white px-1 py-0.5 rounded",children:""})]}),C.jsx("p",{className:"text-purple-200/70",children:q.description}),re&&Q.get(q.id)&&C.jsxs("p",{className:"text-yellow-300/80 mt-1 italic text-[10px]",children:[C.jsx("i",{className:"fa-solid fa-bolt text-[8px] mr-0.5"}),Q.get(q.id).reason]})]},q.id)})})]})]})]})}),C.jsxs("div",{className:"flex-1 flex flex-col relative h-screen bg-paper/5",children:[C.jsx("div",{className:"shrink-0 h-12 bg-gradient-to-b from-black to-transparent z-20 flex justify-center items-center pointer-events-none",children:C.jsxs("span",{className:"text-gold opacity-50 font-display tracking-[0.5em] text-sm",children:["ACT ",ge(d)," / ",ge(p)]})}),v.length>0&&!m&&C.jsx("div",{className:"shrink-0 mx-4 md:mx-8 mb-2 p-2 bg-yellow-900/20 border border-yellow-600/40 rounded-lg",children:C.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[C.jsxs("span",{className:"text-yellow-400 text-xs font-bold flex items-center gap-1",children:[C.jsx("i",{className:"fa-solid fa-bolt text-[10px]"}),":"]}),v.map((q,re)=>C.jsxs("span",{className:"group relative inline-flex items-center text-xs bg-yellow-800/40 text-yellow-200 px-2 py-0.5 rounded border border-yellow-600/30 cursor-help",children:[q.ruleTitle,C.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-[#1a0505] border border-yellow-500/50 rounded text-[10px] text-paper leading-snug opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 shadow-xl",children:[C.jsx("span",{className:"text-yellow-400 font-bold block mb-0.5",children:":"}),q.reason,C.jsx("span",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-[#1a0505] border-r border-b border-yellow-500/50 transform rotate-45"})]})]},re))]})}),C.jsxs("div",{ref:oe,className:"flex-1 overflow-y-auto px-6 md:px-12 py-4 scrollbar-hide scroll-smooth",children:[s.slice(0,-1).map((q,re)=>C.jsx("div",{className:"mb-8 opacity-50 text-sm font-serif border-l-4 border-brown-600 pl-4 italic hover:opacity-100 transition-opacity",children:C.jsx("p",{children:q.text})},re)),C.jsxs("div",{className:"animate-fade-in-up pb-8",children:[C.jsxs("div",{className:"flex items-center justify-center mb-6 text-gold opacity-80",children:[C.jsx("div",{className:"h-[1px] w-12 bg-gold"}),C.jsx("i",{className:"fa-solid fa-diamond text-sm mx-4 animate-spin-slow"}),C.jsx("span",{className:"uppercase tracking-[0.3em] text-sm font-display",children:d===1?"":""}),C.jsx("i",{className:"fa-solid fa-diamond text-sm mx-4 animate-spin-slow"}),C.jsx("div",{className:"h-[1px] w-12 bg-gold"})]}),C.jsx("p",{className:"font-serif text-xl md:text-2xl leading-relaxed mb-8 drop-shadow-md text-justify text-paper first-letter:text-5xl first-letter:font-display first-letter:text-gold first-letter:mr-2 first-letter:float-left",children:r.text}),m?C.jsxs("div",{className:"flex flex-col justify-center items-center py-8 gap-3",children:[C.jsxs("div",{className:"relative",children:[C.jsx("i",{className:"fa-solid fa-sun fa-spin text-5xl text-gold opacity-20"}),C.jsx("i",{className:"fa-solid fa-eye absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-xl text-gold animate-pulse"})]}),C.jsx("span",{className:"font-serif italic text-lg text-stone-gray animate-pulse",children:"..."}),C.jsxs("div",{className:"text-xs text-brown font-mono mt-1",children:["Checking: ",i.filter(q=>q.active).map(q=>q.title).slice(0,3).join(", "),"..."]})]}):C.jsx("div",{className:"grid gap-4 max-w-3xl mx-auto",children:r.choices.map(q=>C.jsxs("button",{onClick:()=>Oe(q.id,q.text),className:"group relative p-5 bg-[#2c1810] border-2 border-brown text-left hover:bg-[#3d2216] hover:border-gold transition-all duration-300 rounded-xl overflow-hidden shadow-lg",children:[C.jsx("div",{className:"absolute inset-0 bg-gold opacity-0 group-hover:opacity-5 transition-opacity"}),C.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-2 bg-gold transform scale-y-0 group-hover:scale-y-100 transition-transform origin-bottom duration-300"}),C.jsxs("div",{className:"flex items-start gap-3",children:[C.jsx("div",{className:"mt-1 text-gold opacity-50 group-hover:opacity-100",children:C.jsx("i",{className:"fa-solid fa-chevron-right"})}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-bold text-lg mb-1.5 group-hover:text-gold transition-colors font-display",children:q.text}),C.jsxs("div",{className:"flex flex-wrap gap-3 text-sm opacity-70 font-serif",children:[q.cost&&C.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[C.jsx("i",{className:"fa-solid fa-coins"})," ",q.cost]}),q.risk&&C.jsxs("span",{className:"text-orange-400 flex items-center gap-1",children:[C.jsx("i",{className:"fa-solid fa-triangle-exclamation"})," ",q.risk]}),C.jsx("span",{className:"text-stone-gray italic border-l border-stone-gray pl-3",children:q.consequence})]})]})]})]},q.id))})]})]})]}),C.jsxs("div",{className:"hidden md:flex flex-col w-1/4 bg-[#140404] border-l-4 border-brown-600 p-4 shadow-2xl z-10 h-screen",children:[C.jsxs("h2",{className:"text-gold font-display text-lg mb-4 border-b border-brown pb-2 flex justify-between items-center shrink-0",children:[C.jsx("span",{children:""}),C.jsxs("div",{className:"flex items-center gap-2",children:[v.length>0&&C.jsxs("span",{className:"text-[10px] bg-yellow-600 px-1.5 py-0.5 rounded text-black font-bold border border-yellow-400",children:[C.jsx("i",{className:"fa-solid fa-bolt mr-0.5"}),v.length," "]}),C.jsxs("span",{className:"text-xs bg-velvet-red px-2 py-0.5 rounded text-gold border border-gold",children:[i.filter(q=>q.active).length," "]})]})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto pr-1 scrollbar-hide space-y-3",children:[i.filter(q=>q.active).map(q=>C.jsx(iA,{rule:q,triggeredInfo:Q.get(q.id)},q.id)),i.some(q=>!q.active)&&C.jsx("div",{className:"text-center p-3 border border-dashed border-brown-600 opacity-50 rounded-lg",children:C.jsx("p",{className:"text-xs text-stone-gray",children:"..."})})]}),C.jsxs("div",{className:"mt-4 p-3 bg-brown-800/20 rounded border border-brown text-center shrink-0",children:[C.jsx("i",{className:"fa-solid fa-gear text-xl text-brown mb-1 animate-spin-slow opacity-50"}),C.jsx("p",{className:"text-[10px] text-stone-gray italic",children:'""'}),C.jsxs("button",{onClick:Z,className:"mt-2 text-xs text-paper/60 hover:text-gold transition-colors duration-300 underline underline-offset-2 decoration-dotted",children:[C.jsx("i",{className:"fa-solid fa-rotate-right mr-1"}),""]})]})]})]})};return C.jsxs(C.Fragment,{children:[n===gi.SELECTION&&z(),n===gi.GAMEPLAY&&le(),n===gi.GAME_OVER&&j(),C.jsx(qA,{})]})},v1=document.getElementById("root"),_1=eA.createRoot(v1);_1.render(C.jsx(y1,{}));
